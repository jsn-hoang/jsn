/*! For license information please see main.91ad42dc.js.LICENSE.txt */
!function(){var X={757:function(X,$,ee){X.exports=ee(727)},556:function(X,$,ee){"use strict";function _getPrototypeOf(X){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(X){return X.__proto__||Object.getPrototypeOf(X)},_getPrototypeOf(X)}function _superPropBase(X,$){for(;!Object.prototype.hasOwnProperty.call(X,$)&&null!==(X=_getPrototypeOf(X)););return X}ee.d($,{M:function(){return vY}});var ne=ee(942);function set(X,$,ee,ae){return set="undefined"!==typeof Reflect&&Reflect.set?Reflect.set:function set(X,$,ee,ae){var de,fe=_superPropBase(X,$);if(fe){if((de=Object.getOwnPropertyDescriptor(fe,$)).set)return de.set.call(ae,ee),!0;if(!de.writable)return!1}if(de=Object.getOwnPropertyDescriptor(ae,$)){if(!de.writable)return!1;de.value=ee,Object.defineProperty(ae,$,de)}else(0,ne.Z)(ae,$,ee);return!0},set(X,$,ee,ae)}function _set(X,$,ee,ne,ae){if(!set(X,$,ee,ne||X)&&ae)throw new Error("failed to set property");return ee}function _setPrototypeOf(X,$){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(X,$){return X.__proto__=$,X},_setPrototypeOf(X,$)}function _isNativeReflectConstruct(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(X_){return!1}}function _construct(X,$,ee){return _construct=_isNativeReflectConstruct()?Reflect.construct:function _construct(X,$,ee){var ne=[null];ne.push.apply(ne,$);var ae=new(Function.bind.apply(X,ne));return ee&&_setPrototypeOf(ae,ee.prototype),ae},_construct.apply(null,arguments)}function _wrapNativeSuper(X){var $="function"===typeof Map?new Map:void 0;return _wrapNativeSuper=function _wrapNativeSuper(X){if(null===X||!function _isNativeFunction(X){return-1!==Function.toString.call(X).indexOf("[native code]")}(X))return X;if("function"!==typeof X)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof $){if($.has(X))return $.get(X);$.set(X,Wrapper)}function Wrapper(){return _construct(X,arguments,_getPrototypeOf(this).constructor)}return Wrapper.prototype=Object.create(X.prototype,{constructor:{value:Wrapper,enumerable:!1,writable:!0,configurable:!0}}),_setPrototypeOf(Wrapper,X)},_wrapNativeSuper(X)}var ae=ee(982),de=ee(861),fe=ee(885);function _typeof(X){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(X){return typeof X}:function(X){return X&&"function"==typeof Symbol&&X.constructor===Symbol&&X!==Symbol.prototype?"symbol":typeof X},_typeof(X)}function _assertThisInitialized(X){if(void 0===X)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return X}function _possibleConstructorReturn(X,$){if($&&("object"===_typeof($)||"function"===typeof $))return $;if(void 0!==$)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(X)}function _get(){return _get="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function _get(X,$,ee){var ne=_superPropBase(X,$);if(ne){var ae=Object.getOwnPropertyDescriptor(ne,$);return ae.get?ae.get.call(arguments.length<3?X:ee):ae.value}},_get.apply(this,arguments)}function _inherits(X,$){if("function"!==typeof $&&null!==$)throw new TypeError("Super expression must either be null or a function");X.prototype=Object.create($&&$.prototype,{constructor:{value:X,writable:!0,configurable:!0}}),Object.defineProperty(X,"prototype",{writable:!1}),$&&_setPrototypeOf(X,$)}function _createSuper(X){var $=_isNativeReflectConstruct();return function _createSuperInternal(){var ee,ne=_getPrototypeOf(X);if($){var ae=_getPrototypeOf(this).constructor;ee=Reflect.construct(ne,arguments,ae)}else ee=ne.apply(this,arguments);return _possibleConstructorReturn(this,ee)}}function _classCallCheck(X,$){if(!(X instanceof $))throw new TypeError("Cannot call a class as a function")}function _defineProperties(X,$){for(var ee=0;ee<$.length;ee++){var ne=$[ee];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(X,ne.key,ne)}}function _createClass(X,$,ee){return $&&_defineProperties(X.prototype,$),ee&&_defineProperties(X,ee),Object.defineProperty(X,"prototype",{writable:!1}),X}var Ue,je=ee(762),Ke=ee(757),et=ee.n(Ke);X=ee.hmd(X);for(var tt=Object.create,nt=Object.defineProperty,it=Object.defineProperties,ct=Object.getOwnPropertyDescriptor,dt=Object.getOwnPropertyDescriptors,vt=Object.getOwnPropertyNames,gt=Object.getOwnPropertySymbols,yt=Object.getPrototypeOf,_t=Object.prototype.hasOwnProperty,wt=Object.prototype.propertyIsEnumerable,St=function Mx(X,$,ee){return $ in X?nt(X,$,{enumerable:!0,configurable:!0,writable:!0,value:ee}):X[$]=ee},Ct=function ie(X,$){for(var ee in $||($={}))_t.call($,ee)&&St(X,ee,$[ee]);if(gt){var ne,ae=(0,je.Z)(gt($));try{for(ae.s();!(ne=ae.n()).done;){ee=ne.value;wt.call($,ee)&&St(X,ee,$[ee])}}catch(de){ae.e(de)}finally{ae.f()}}return X},At=function xe(X,$){return it(X,dt($))},Et=function Eu(X,$){var ee={};for(var ne in X)_t.call(X,ne)&&$.indexOf(ne)<0&&(ee[ne]=X[ne]);if(null!=X&&gt){var ae,de=(0,je.Z)(gt(X));try{for(de.s();!(ae=de.n()).done;){ne=ae.value;$.indexOf(ne)<0&&wt.call(X,ne)&&(ee[ne]=X[ne])}}catch(fe){de.e(fe)}finally{de.f()}}return ee},Rt=function Tx(X,$){for(var ee in $)nt(X,ee,{get:$[ee],enumerable:!0})},Bt=function NT(X,$){return function(){return $||X(($={exports:{}}).exports,$),$.exports}}((function(X,$){!function(ne,ae){"object"==typeof X&&typeof $<"u"?ae(X):"function"==typeof define&&ee.amdO?define(["exports"],ae):ae((ne=typeof globalThis<"u"?globalThis:ne||self).SVDJS={})}(X,(function(X){X.SVD=function(X,$,ee,ne,ae){if($=void 0===$||$,ee=void 0===ee||ee,ae=1e-64/(ne=ne||Math.pow(2,-52)),!X)throw new TypeError("Matrix a is not defined");var de,fe,Ue,je,Ke,et,tt,nt,it,ct,dt,vt,gt=X[0].length,yt=X.length;if(yt<gt)throw new TypeError("Invalid matrix: m < n");for(var _t=[],wt=[],St=[],Ct="f"===$?yt:gt,At=ct=tt=0;At<yt;At++)wt[At]=new Array(Ct).fill(0);for(At=0;At<gt;At++)St[At]=new Array(gt).fill(0);var Et,Rt=new Array(gt).fill(0);for(At=0;At<yt;At++)for(de=0;de<gt;de++)wt[At][de]=X[At][de];for(At=0;At<gt;At++){for(_t[At]=tt,it=0,Ue=At+1,de=At;de<yt;de++)it+=Math.pow(wt[de][At],2);if(it<ae)tt=0;else for(nt=(et=wt[At][At])*(tt=et<0?Math.sqrt(it):-Math.sqrt(it))-it,wt[At][At]=et-tt,de=Ue;de<gt;de++){for(it=0,fe=At;fe<yt;fe++)it+=wt[fe][At]*wt[fe][de];for(et=it/nt,fe=At;fe<yt;fe++)wt[fe][de]=wt[fe][de]+et*wt[fe][At]}for(Rt[At]=tt,it=0,de=Ue;de<gt;de++)it+=Math.pow(wt[At][de],2);if(it<ae)tt=0;else{for(nt=(et=wt[At][At+1])*(tt=et<0?Math.sqrt(it):-Math.sqrt(it))-it,wt[At][At+1]=et-tt,de=Ue;de<gt;de++)_t[de]=wt[At][de]/nt;for(de=Ue;de<yt;de++){for(it=0,fe=Ue;fe<gt;fe++)it+=wt[de][fe]*wt[At][fe];for(fe=Ue;fe<gt;fe++)wt[de][fe]=wt[de][fe]+it*_t[fe]}}ct<(dt=Math.abs(Rt[At])+Math.abs(_t[At]))&&(ct=dt)}if(ee)for(At=gt-1;0<=At;At--){if(0!==tt){for(nt=wt[At][At+1]*tt,de=Ue;de<gt;de++)St[de][At]=wt[At][de]/nt;for(de=Ue;de<gt;de++){for(it=0,fe=Ue;fe<gt;fe++)it+=wt[At][fe]*St[fe][de];for(fe=Ue;fe<gt;fe++)St[fe][de]=St[fe][de]+it*St[fe][At]}}for(de=Ue;de<gt;de++)St[At][de]=0,St[de][At]=0;St[At][At]=1,tt=_t[At],Ue=At}if($){if("f"===$)for(At=gt;At<yt;At++){for(de=gt;de<yt;de++)wt[At][de]=0;wt[At][At]=1}for(At=gt-1;0<=At;At--){for(Ue=At+1,tt=Rt[At],de=Ue;de<Ct;de++)wt[At][de]=0;if(0!==tt){for(nt=wt[At][At]*tt,de=Ue;de<Ct;de++){for(it=0,fe=Ue;fe<yt;fe++)it+=wt[fe][At]*wt[fe][de];for(et=it/nt,fe=At;fe<yt;fe++)wt[fe][de]=wt[fe][de]+et*wt[fe][At]}for(de=At;de<yt;de++)wt[de][At]=wt[de][At]/tt}else for(de=At;de<yt;de++)wt[de][At]=0;wt[At][At]=wt[At][At]+1}}for(ne*=ct,fe=gt-1;0<=fe;fe--)for(var Bt=0;Bt<50;Bt++){for(Et=!1,Ue=fe;0<=Ue;Ue--){if(Math.abs(_t[Ue])<=ne){Et=!0;break}if(Math.abs(Rt[Ue-1])<=ne)break}if(!Et)for(Ke=0,je=Ue-(it=1),At=Ue;At<fe+1&&(et=it*_t[At],_t[At]=Ke*_t[At],!(Math.abs(et)<=ne));At++)if(tt=Rt[At],Rt[At]=Math.sqrt(et*et+tt*tt),Ke=tt/(nt=Rt[At]),it=-et/nt,$)for(de=0;de<yt;de++)dt=wt[de][je],vt=wt[de][At],wt[de][je]=dt*Ke+vt*it,wt[de][At]=-dt*it+vt*Ke;if(vt=Rt[fe],Ue===fe){if(vt<0&&(Rt[fe]=-vt,ee))for(de=0;de<gt;de++)St[de][fe]=-St[de][fe];break}for(ct=Rt[Ue],et=(((dt=Rt[fe-1])-vt)*(dt+vt)+((tt=_t[fe-1])-(nt=_t[fe]))*(tt+nt))/(2*nt*dt),tt=Math.sqrt(et*et+1),et=((ct-vt)*(ct+vt)+nt*(dt/(et<0?et-tt:et+tt)-nt))/ct,At=Ue+(it=Ke=1);At<fe+1;At++){if(tt=_t[At],dt=Rt[At],nt=it*tt,tt*=Ke,vt=Math.sqrt(et*et+nt*nt),et=ct*(Ke=et/(_t[At-1]=vt))+tt*(it=nt/vt),tt=-ct*it+tt*Ke,nt=dt*it,dt*=Ke,ee)for(de=0;de<gt;de++)ct=St[de][At-1],vt=St[de][At],St[de][At-1]=ct*Ke+vt*it,St[de][At]=-ct*it+vt*Ke;if(vt=Math.sqrt(et*et+nt*nt),et=(Ke=et/(Rt[At-1]=vt))*tt+(it=nt/vt)*dt,ct=-it*tt+Ke*dt,$)for(de=0;de<yt;de++)dt=wt[de][At-1],vt=wt[de][At],wt[de][At-1]=dt*Ke+vt*it,wt[de][At]=-dt*it+vt*Ke}_t[Ue]=0,_t[fe]=et,Rt[fe]=ct}for(At=0;At<gt;At++)Rt[At]<ne&&(Rt[At]=0);return{u:wt,q:Rt,v:St}},X.VERSION="1.1.1",Object.defineProperty(X,"__esModule",{value:!0})}))})),Ht="140",Wt=0,qt=1,Zt=2,Xt=3,Qt=100,en=301,tn=302,un=306,hn=1e3,dn=1001,mn=1002,gn=1003,_n=1006,wn=1008,Sn=1009,Cn=1012,An=1014,Mn=1015,En=1016,Tn=1020,Pn=1023,Dn=1026,Ln=1027,On=33776,In=33777,Fn=33778,Wn=33779,Yn=35840,Jn=35841,Zn=35842,Kn=35843,$n=37492,nr=37496,ir=37808,ar=37809,or=37810,hr=37811,dr=37812,fr=37813,vr=37814,yr=37815,br=37816,_r=37817,wr=37818,Cr=37819,Ar=37820,Mr=37821,Er=36492,Tr=2300,Pr=2301,Dr=2302,Br=2400,Ir=2401,zr=2402,Fr=2500,Vr=2501,qr=3e3,Xr=3001,Kr=3200,ei="srgb",li="srgb-linear",Ei=7680,Di=35044,Yi=35048,Zi="300 es",$i=1035,aa=function(){function Yt(){_classCallCheck(this,Yt)}return _createClass(Yt,[{key:"addEventListener",value:function addEventListener(X,$){void 0===this._listeners&&(this._listeners={});var ee=this._listeners;void 0===ee[X]&&(ee[X]=[]),-1===ee[X].indexOf($)&&ee[X].push($)}},{key:"hasEventListener",value:function hasEventListener(X,$){if(void 0===this._listeners)return!1;var ee=this._listeners;return void 0!==ee[X]&&-1!==ee[X].indexOf($)}},{key:"removeEventListener",value:function removeEventListener(X,$){if(void 0!==this._listeners){var ee=this._listeners[X];if(void 0!==ee){var ne=ee.indexOf($);-1!==ne&&ee.splice(ne,1)}}}},{key:"dispatchEvent",value:function dispatchEvent(X){if(void 0!==this._listeners){var $=this._listeners[X.type];if(void 0!==$){X.target=this;for(var ee=$.slice(0),ne=0,ae=ee.length;ne<ae;ne++)ee[ne].call(this,X);X.target=null}}}}]),Yt}(),sa=[],la=0;la<256;la++)sa[la]=(la<16?"0":"")+la.toString(16);var ua=1234567,ca=Math.PI/180,ha=180/Math.PI;function Un(){var X=4294967295*Math.random()|0,$=4294967295*Math.random()|0,ee=4294967295*Math.random()|0,ne=4294967295*Math.random()|0;return(sa[255&X]+sa[X>>8&255]+sa[X>>16&255]+sa[X>>24&255]+"-"+sa[255&$]+sa[$>>8&255]+"-"+sa[$>>16&15|64]+sa[$>>24&255]+"-"+sa[63&ee|128]+sa[ee>>8&255]+"-"+sa[ee>>16&255]+sa[ee>>24&255]+sa[255&ne]+sa[ne>>8&255]+sa[ne>>16&255]+sa[ne>>24&255]).toLowerCase()}function xr(X,$,ee){return Math.max($,Math.min(ee,X))}function ey(X,$){return(X%$+$)%$}function Fc(X,$,ee){return(1-ee)*X+ee*$}function og(X){return 0===(X&X-1)&&0!==X}function mf(X){return Math.pow(2,Math.floor(Math.log(X)/Math.LN2))}var da=Object.freeze({__proto__:null,DEG2RAD:ca,RAD2DEG:ha,generateUUID:Un,clamp:xr,euclideanModulo:ey,mapLinear:function BE(X,$,ee,ne,ae){return ne+(X-$)*(ae-ne)/(ee-$)},inverseLerp:function NE(X,$,ee){return X!==$?(ee-X)/($-X):0},lerp:Fc,damp:function OE(X,$,ee,ne){return Fc(X,$,1-Math.exp(-ee*ne))},pingpong:function FE(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return $-Math.abs(ey(X,2*$)-$)},smoothstep:function UE(X,$,ee){return X<=$?0:X>=ee?1:(X=(X-$)/(ee-$))*X*(3-2*X)},smootherstep:function zE(X,$,ee){return X<=$?0:X>=ee?1:(X=(X-$)/(ee-$))*X*X*(X*(6*X-15)+10)},randInt:function GE(X,$){return X+Math.floor(Math.random()*($-X+1))},randFloat:function kE(X,$){return X+Math.random()*($-X)},randFloatSpread:function VE(X){return X*(.5-Math.random())},seededRandom:function HE(X){void 0!==X&&(ua=X);var $=ua+=1831565813;return $=Math.imul($^$>>>15,1|$),((($^=$+Math.imul($^$>>>7,61|$))^$>>>14)>>>0)/4294967296},degToRad:function WE(X){return X*ca},radToDeg:function jE(X){return X*ha},isPowerOfTwo:og,ceilPowerOfTwo:function qE(X){return Math.pow(2,Math.ceil(Math.log(X)/Math.LN2))},floorPowerOfTwo:mf,setQuaternionFromProperEuler:function YE(X,$,ee,ne,ae){var de=Math.cos,fe=Math.sin,Ue=de(ee/2),je=fe(ee/2),Ke=de(($+ne)/2),et=fe(($+ne)/2),tt=de(($-ne)/2),nt=fe(($-ne)/2),it=de((ne-$)/2),ct=fe((ne-$)/2);switch(ae){case"XYX":X.set(Ue*et,je*tt,je*nt,Ue*Ke);break;case"YZY":X.set(je*nt,Ue*et,je*tt,Ue*Ke);break;case"ZXZ":X.set(je*tt,je*nt,Ue*et,Ue*Ke);break;case"XZX":X.set(Ue*et,je*ct,je*it,Ue*Ke);break;case"YXY":X.set(je*it,Ue*et,je*ct,Ue*Ke);break;case"ZYZ":X.set(je*ct,je*it,Ue*et,Ue*Ke);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+ae)}},normalize:function QE(X,$){switch($.constructor){case Float32Array:return X;case Uint16Array:return Math.round(65535*X);case Uint8Array:return Math.round(255*X);case Int16Array:return Math.round(32767*X);case Int8Array:return Math.round(127*X);default:throw new Error("Invalid component type.")}},denormalize:function XE(X,$){switch($.constructor){case Float32Array:return X;case Uint16Array:return X/65535;case Uint8Array:return X/255;case Int16Array:return Math.max(X/32767,-1);case Int8Array:return Math.max(X/127,-1);default:throw new Error("Invalid component type.")}}}),va=function(X){function B(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,$=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,B),this.x=X,this.y=$}return _createClass(B,[{key:"width",get:function get(){return this.x},set:function set(X){this.x=X}},{key:"height",get:function get(){return this.y},set:function set(X){this.y=X}},{key:"set",value:function set(X,$){return this.x=X,this.y=$,this}},{key:"setScalar",value:function setScalar(X){return this.x=X,this.y=X,this}},{key:"setX",value:function setX(X){return this.x=X,this}},{key:"setY",value:function setY(X){return this.y=X,this}},{key:"setComponent",value:function setComponent(X,$){switch(X){case 0:this.x=$;break;case 1:this.y=$;break;default:throw new Error("index is out of range: "+X)}return this}},{key:"getComponent",value:function getComponent(X){switch(X){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+X)}}},{key:"clone",value:function clone(){return new this.constructor(this.x,this.y)}},{key:"copy",value:function copy(X){return this.x=X.x,this.y=X.y,this}},{key:"add",value:function add(X,$){return void 0!==$?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(X,$)):(this.x+=X.x,this.y+=X.y,this)}},{key:"addScalar",value:function addScalar(X){return this.x+=X,this.y+=X,this}},{key:"addVectors",value:function addVectors(X,$){return this.x=X.x+$.x,this.y=X.y+$.y,this}},{key:"addScaledVector",value:function addScaledVector(X,$){return this.x+=X.x*$,this.y+=X.y*$,this}},{key:"sub",value:function sub(X,$){return void 0!==$?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(X,$)):(this.x-=X.x,this.y-=X.y,this)}},{key:"subScalar",value:function subScalar(X){return this.x-=X,this.y-=X,this}},{key:"subVectors",value:function subVectors(X,$){return this.x=X.x-$.x,this.y=X.y-$.y,this}},{key:"multiply",value:function multiply(X){return this.x*=X.x,this.y*=X.y,this}},{key:"multiplyScalar",value:function multiplyScalar(X){return this.x*=X,this.y*=X,this}},{key:"divide",value:function divide(X){return this.x/=X.x,this.y/=X.y,this}},{key:"divideScalar",value:function divideScalar(X){return this.multiplyScalar(1/X)}},{key:"applyMatrix3",value:function applyMatrix3(X){var $=this.x,ee=this.y,ne=X.elements;return this.x=ne[0]*$+ne[3]*ee+ne[6],this.y=ne[1]*$+ne[4]*ee+ne[7],this}},{key:"min",value:function min(X){return this.x=Math.min(this.x,X.x),this.y=Math.min(this.y,X.y),this}},{key:"max",value:function max(X){return this.x=Math.max(this.x,X.x),this.y=Math.max(this.y,X.y),this}},{key:"clamp",value:function clamp(X,$){return this.x=Math.max(X.x,Math.min($.x,this.x)),this.y=Math.max(X.y,Math.min($.y,this.y)),this}},{key:"clampScalar",value:function clampScalar(X,$){return this.x=Math.max(X,Math.min($,this.x)),this.y=Math.max(X,Math.min($,this.y)),this}},{key:"clampLength",value:function clampLength(X,$){var ee=this.length();return this.divideScalar(ee||1).multiplyScalar(Math.max(X,Math.min($,ee)))}},{key:"floor",value:function floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}},{key:"ceil",value:function ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}},{key:"round",value:function round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},{key:"roundToZero",value:function roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}},{key:"negate",value:function negate(){return this.x=-this.x,this.y=-this.y,this}},{key:"dot",value:function dot(X){return this.x*X.x+this.y*X.y}},{key:"cross",value:function cross(X){return this.x*X.y-this.y*X.x}},{key:"lengthSq",value:function lengthSq(){return this.x*this.x+this.y*this.y}},{key:"length",value:function length(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"manhattanLength",value:function manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}},{key:"normalize",value:function normalize(){return this.divideScalar(this.length()||1)}},{key:"angle",value:function angle(){return Math.atan2(-this.y,-this.x)+Math.PI}},{key:"distanceTo",value:function distanceTo(X){return Math.sqrt(this.distanceToSquared(X))}},{key:"distanceToSquared",value:function distanceToSquared(X){var $=this.x-X.x,ee=this.y-X.y;return $*$+ee*ee}},{key:"manhattanDistanceTo",value:function manhattanDistanceTo(X){return Math.abs(this.x-X.x)+Math.abs(this.y-X.y)}},{key:"setLength",value:function setLength(X){return this.normalize().multiplyScalar(X)}},{key:"lerp",value:function lerp(X,$){return this.x+=(X.x-this.x)*$,this.y+=(X.y-this.y)*$,this}},{key:"lerpVectors",value:function lerpVectors(X,$,ee){return this.x=X.x+($.x-X.x)*ee,this.y=X.y+($.y-X.y)*ee,this}},{key:"equals",value:function equals(X){return X.x===this.x&&X.y===this.y}},{key:"fromArray",value:function fromArray(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=X[$],this.y=X[$+1],this}},{key:"toArray",value:function toArray(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],$=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return X[$]=this.x,X[$+1]=this.y,X}},{key:"fromBufferAttribute",value:function fromBufferAttribute(X,$,ee){return void 0!==ee&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=X.getX($),this.y=X.getY($),this}},{key:"rotateAround",value:function rotateAround(X,$){var ee=Math.cos($),ne=Math.sin($),ae=this.x-X.x,de=this.y-X.y;return this.x=ae*ee-de*ne+X.x,this.y=ae*ne+de*ee+X.y,this}},{key:"random",value:function random(){return this.x=Math.random(),this.y=Math.random(),this}},{key:Symbol.iterator,value:et().mark((function value(){return et().wrap((function value$(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,this.x;case 2:return X.next=4,this.y;case 4:case"end":return X.stop()}}),value,this)}))}]),B}();va.prototype.isVector2=!0;var ga=function(){function Ft(){_classCallCheck(this,Ft),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}return _createClass(Ft,[{key:"set",value:function set(X,$,ee,ne,ae,de,fe,Ue,je){var Ke=this.elements;return Ke[0]=X,Ke[1]=ne,Ke[2]=fe,Ke[3]=$,Ke[4]=ae,Ke[5]=Ue,Ke[6]=ee,Ke[7]=de,Ke[8]=je,this}},{key:"identity",value:function identity(){return this.set(1,0,0,0,1,0,0,0,1),this}},{key:"copy",value:function copy(X){var $=this.elements,ee=X.elements;return $[0]=ee[0],$[1]=ee[1],$[2]=ee[2],$[3]=ee[3],$[4]=ee[4],$[5]=ee[5],$[6]=ee[6],$[7]=ee[7],$[8]=ee[8],this}},{key:"extractBasis",value:function extractBasis(X,$,ee){return X.setFromMatrix3Column(this,0),$.setFromMatrix3Column(this,1),ee.setFromMatrix3Column(this,2),this}},{key:"setFromMatrix4",value:function setFromMatrix4(X){var $=X.elements;return this.set($[0],$[4],$[8],$[1],$[5],$[9],$[2],$[6],$[10]),this}},{key:"multiply",value:function multiply(X){return this.multiplyMatrices(this,X)}},{key:"premultiply",value:function premultiply(X){return this.multiplyMatrices(X,this)}},{key:"multiplyMatrices",value:function multiplyMatrices(X,$){var ee=X.elements,ne=$.elements,ae=this.elements,de=ee[0],fe=ee[3],Ue=ee[6],je=ee[1],Ke=ee[4],et=ee[7],tt=ee[2],nt=ee[5],it=ee[8],ct=ne[0],dt=ne[3],vt=ne[6],gt=ne[1],yt=ne[4],_t=ne[7],wt=ne[2],St=ne[5],Ct=ne[8];return ae[0]=de*ct+fe*gt+Ue*wt,ae[3]=de*dt+fe*yt+Ue*St,ae[6]=de*vt+fe*_t+Ue*Ct,ae[1]=je*ct+Ke*gt+et*wt,ae[4]=je*dt+Ke*yt+et*St,ae[7]=je*vt+Ke*_t+et*Ct,ae[2]=tt*ct+nt*gt+it*wt,ae[5]=tt*dt+nt*yt+it*St,ae[8]=tt*vt+nt*_t+it*Ct,this}},{key:"multiplyScalar",value:function multiplyScalar(X){var $=this.elements;return $[0]*=X,$[3]*=X,$[6]*=X,$[1]*=X,$[4]*=X,$[7]*=X,$[2]*=X,$[5]*=X,$[8]*=X,this}},{key:"determinant",value:function determinant(){var X=this.elements,$=X[0],ee=X[1],ne=X[2],ae=X[3],de=X[4],fe=X[5],Ue=X[6],je=X[7],Ke=X[8];return $*de*Ke-$*fe*je-ee*ae*Ke+ee*fe*Ue+ne*ae*je-ne*de*Ue}},{key:"invert",value:function invert(){var X=this.elements,$=X[0],ee=X[1],ne=X[2],ae=X[3],de=X[4],fe=X[5],Ue=X[6],je=X[7],Ke=X[8],et=Ke*de-fe*je,tt=fe*Ue-Ke*ae,nt=je*ae-de*Ue,it=$*et+ee*tt+ne*nt;if(0===it)return this.set(0,0,0,0,0,0,0,0,0);var ct=1/it;return X[0]=et*ct,X[1]=(ne*je-Ke*ee)*ct,X[2]=(fe*ee-ne*de)*ct,X[3]=tt*ct,X[4]=(Ke*$-ne*Ue)*ct,X[5]=(ne*ae-fe*$)*ct,X[6]=nt*ct,X[7]=(ee*Ue-je*$)*ct,X[8]=(de*$-ee*ae)*ct,this}},{key:"transpose",value:function transpose(){var X,$=this.elements;return X=$[1],$[1]=$[3],$[3]=X,X=$[2],$[2]=$[6],$[6]=X,X=$[5],$[5]=$[7],$[7]=X,this}},{key:"getNormalMatrix",value:function getNormalMatrix(X){return this.setFromMatrix4(X).invert().transpose()}},{key:"transposeIntoArray",value:function transposeIntoArray(X){var $=this.elements;return X[0]=$[0],X[1]=$[3],X[2]=$[6],X[3]=$[1],X[4]=$[4],X[5]=$[7],X[6]=$[2],X[7]=$[5],X[8]=$[8],this}},{key:"setUvTransform",value:function setUvTransform(X,$,ee,ne,ae,de,fe){var Ue=Math.cos(ae),je=Math.sin(ae);return this.set(ee*Ue,ee*je,-ee*(Ue*de+je*fe)+de+X,-ne*je,ne*Ue,-ne*(-je*de+Ue*fe)+fe+$,0,0,1),this}},{key:"scale",value:function scale(X,$){var ee=this.elements;return ee[0]*=X,ee[3]*=X,ee[6]*=X,ee[1]*=$,ee[4]*=$,ee[7]*=$,this}},{key:"rotate",value:function rotate(X){var $=Math.cos(X),ee=Math.sin(X),ne=this.elements,ae=ne[0],de=ne[3],fe=ne[6],Ue=ne[1],je=ne[4],Ke=ne[7];return ne[0]=$*ae+ee*Ue,ne[3]=$*de+ee*je,ne[6]=$*fe+ee*Ke,ne[1]=-ee*ae+$*Ue,ne[4]=-ee*de+$*je,ne[7]=-ee*fe+$*Ke,this}},{key:"translate",value:function translate(X,$){var ee=this.elements;return ee[0]+=X*ee[2],ee[3]+=X*ee[5],ee[6]+=X*ee[8],ee[1]+=$*ee[2],ee[4]+=$*ee[5],ee[7]+=$*ee[8],this}},{key:"equals",value:function equals(X){for(var $=this.elements,ee=X.elements,ne=0;ne<9;ne++)if($[ne]!==ee[ne])return!1;return!0}},{key:"fromArray",value:function fromArray(X){for(var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,ee=0;ee<9;ee++)this.elements[ee]=X[ee+$];return this}},{key:"toArray",value:function toArray(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],$=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,ee=this.elements;return X[$]=ee[0],X[$+1]=ee[1],X[$+2]=ee[2],X[$+3]=ee[3],X[$+4]=ee[4],X[$+5]=ee[5],X[$+6]=ee[6],X[$+7]=ee[7],X[$+8]=ee[8],X}},{key:"clone",value:function clone(){return(new this.constructor).fromArray(this.elements)}}]),Ft}();function vb(X){for(var $=X.length-1;$>=0;--$)if(X[$]>65535)return!0;return!1}ga.prototype.isMatrix3=!0;var ya={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function _u(X,$){return new ya[X]($)}function jc(X){return document.createElementNS("http://www.w3.org/1999/xhtml",X)}function _o(X){return X<.04045?.0773993808*X:Math.pow(.9478672986*X+.0521327014,2.4)}function hf(X){return X<.0031308?12.92*X:1.055*Math.pow(X,.41666)-.055}var ba=(Ue={},(0,ne.Z)(Ue,ei,(0,ne.Z)({},li,_o)),(0,ne.Z)(Ue,li,(0,ne.Z)({},ei,hf)),Ue),xa={legacyMode:!0,get workingColorSpace(){return li},set workingColorSpace(X){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function convert(X,$,ee){if(this.legacyMode||$===ee||!$||!ee)return X;if(ba[$]&&void 0!==ba[$][ee]){var ne=ba[$][ee];return X.r=ne(X.r),X.g=ne(X.g),X.b=ne(X.b),X}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function fromWorkingColorSpace(X,$){return this.convert(X,this.workingColorSpace,$)},toWorkingColorSpace:function toWorkingColorSpace(X,$){return this.convert(X,$,this.workingColorSpace)}},_a={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},wa={r:0,g:0,b:0},Ca={h:0,s:0,l:0},Aa={h:0,s:0,l:0};function Am(X,$,ee){return ee<0&&(ee+=1),ee>1&&(ee-=1),ee<1/6?X+6*($-X)*ee:ee<.5?$:ee<2/3?X+6*($-X)*(2/3-ee):X}function Du(X,$){return $.r=X.r,$.g=X.g,$.b=X.b,$}var Ma=function(X){function be(X,$,ee){return _classCallCheck(this,be),void 0===$&&void 0===ee?this.set(X):this.setRGB(X,$,ee)}return _createClass(be,[{key:"set",value:function set(X){return X&&X.isColor?this.copy(X):"number"==typeof X?this.setHex(X):"string"==typeof X&&this.setStyle(X),this}},{key:"setScalar",value:function setScalar(X){return this.r=X,this.g=X,this.b=X,this}},{key:"setHex",value:function setHex(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ei;return X=Math.floor(X),this.r=(X>>16&255)/255,this.g=(X>>8&255)/255,this.b=(255&X)/255,xa.toWorkingColorSpace(this,$),this}},{key:"setRGB",value:function setRGB(X,$,ee){var ne=arguments.length>3&&void 0!==arguments[3]?arguments[3]:li;return this.r=X,this.g=$,this.b=ee,xa.toWorkingColorSpace(this,ne),this}},{key:"setHSL",value:function setHSL(X,$,ee){var ne=arguments.length>3&&void 0!==arguments[3]?arguments[3]:li;if(X=ey(X,1),$=xr($,0,1),ee=xr(ee,0,1),0===$)this.r=this.g=this.b=ee;else{var ae=ee<=.5?ee*(1+$):ee+$-ee*$,de=2*ee-ae;this.r=Am(de,ae,X+1/3),this.g=Am(de,ae,X),this.b=Am(de,ae,X-1/3)}return xa.toWorkingColorSpace(this,ne),this}},{key:"setStyle",value:function setStyle(X){var $,ee=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ei;function r($){void 0!==$&&parseFloat($)<1&&console.warn("THREE.Color: Alpha component of "+X+" will be ignored.")}if($=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(X)){var ne,ae=$[1],de=$[2];switch(ae){case"rgb":case"rgba":if(ne=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(de))return this.r=Math.min(255,parseInt(ne[1],10))/255,this.g=Math.min(255,parseInt(ne[2],10))/255,this.b=Math.min(255,parseInt(ne[3],10))/255,xa.toWorkingColorSpace(this,ee),r(ne[4]),this;if(ne=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(de))return this.r=Math.min(100,parseInt(ne[1],10))/100,this.g=Math.min(100,parseInt(ne[2],10))/100,this.b=Math.min(100,parseInt(ne[3],10))/100,xa.toWorkingColorSpace(this,ee),r(ne[4]),this;break;case"hsl":case"hsla":if(ne=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(de)){var fe=parseFloat(ne[1])/360,Ue=parseInt(ne[2],10)/100,je=parseInt(ne[3],10)/100;return r(ne[4]),this.setHSL(fe,Ue,je,ee)}}}else if($=/^\#([A-Fa-f\d]+)$/.exec(X)){var Ke=$[1],et=Ke.length;if(3===et)return this.r=parseInt(Ke.charAt(0)+Ke.charAt(0),16)/255,this.g=parseInt(Ke.charAt(1)+Ke.charAt(1),16)/255,this.b=parseInt(Ke.charAt(2)+Ke.charAt(2),16)/255,xa.toWorkingColorSpace(this,ee),this;if(6===et)return this.r=parseInt(Ke.charAt(0)+Ke.charAt(1),16)/255,this.g=parseInt(Ke.charAt(2)+Ke.charAt(3),16)/255,this.b=parseInt(Ke.charAt(4)+Ke.charAt(5),16)/255,xa.toWorkingColorSpace(this,ee),this}return X&&X.length>0?this.setColorName(X,ee):this}},{key:"setColorName",value:function setColorName(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ei,ee=_a[X.toLowerCase()];return void 0!==ee?this.setHex(ee,$):console.warn("THREE.Color: Unknown color "+X),this}},{key:"clone",value:function clone(){return new this.constructor(this.r,this.g,this.b)}},{key:"copy",value:function copy(X){return this.r=X.r,this.g=X.g,this.b=X.b,this}},{key:"copySRGBToLinear",value:function copySRGBToLinear(X){return this.r=_o(X.r),this.g=_o(X.g),this.b=_o(X.b),this}},{key:"copyLinearToSRGB",value:function copyLinearToSRGB(X){return this.r=hf(X.r),this.g=hf(X.g),this.b=hf(X.b),this}},{key:"convertSRGBToLinear",value:function convertSRGBToLinear(){return this.copySRGBToLinear(this),this}},{key:"convertLinearToSRGB",value:function convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}},{key:"getHex",value:function getHex(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ei;return xa.fromWorkingColorSpace(Du(this,wa),X),xr(255*wa.r,0,255)<<16^xr(255*wa.g,0,255)<<8^xr(255*wa.b,0,255)<<0}},{key:"getHexString",value:function getHexString(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ei;return("000000"+this.getHex(X).toString(16)).slice(-6)}},{key:"getHSL",value:function getHSL(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:li;xa.fromWorkingColorSpace(Du(this,wa),$);var ee,ne,ae=wa.r,de=wa.g,fe=wa.b,Ue=Math.max(ae,de,fe),je=Math.min(ae,de,fe),Ke=(je+Ue)/2;if(je===Ue)ee=0,ne=0;else{var et=Ue-je;switch(ne=Ke<=.5?et/(Ue+je):et/(2-Ue-je),Ue){case ae:ee=(de-fe)/et+(de<fe?6:0);break;case de:ee=(fe-ae)/et+2;break;case fe:ee=(ae-de)/et+4}ee/=6}return X.h=ee,X.s=ne,X.l=Ke,X}},{key:"getRGB",value:function getRGB(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:li;return xa.fromWorkingColorSpace(Du(this,wa),$),X.r=wa.r,X.g=wa.g,X.b=wa.b,X}},{key:"getStyle",value:function getStyle(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ei;return xa.fromWorkingColorSpace(Du(this,wa),X),X!==ei?"color(".concat(X," ").concat(wa.r," ").concat(wa.g," ").concat(wa.b,")"):"rgb(".concat(255*wa.r|0,",").concat(255*wa.g|0,",").concat(255*wa.b|0,")")}},{key:"offsetHSL",value:function offsetHSL(X,$,ee){return this.getHSL(Ca),Ca.h+=X,Ca.s+=$,Ca.l+=ee,this.setHSL(Ca.h,Ca.s,Ca.l),this}},{key:"add",value:function add(X){return this.r+=X.r,this.g+=X.g,this.b+=X.b,this}},{key:"addColors",value:function addColors(X,$){return this.r=X.r+$.r,this.g=X.g+$.g,this.b=X.b+$.b,this}},{key:"addScalar",value:function addScalar(X){return this.r+=X,this.g+=X,this.b+=X,this}},{key:"sub",value:function sub(X){return this.r=Math.max(0,this.r-X.r),this.g=Math.max(0,this.g-X.g),this.b=Math.max(0,this.b-X.b),this}},{key:"multiply",value:function multiply(X){return this.r*=X.r,this.g*=X.g,this.b*=X.b,this}},{key:"multiplyScalar",value:function multiplyScalar(X){return this.r*=X,this.g*=X,this.b*=X,this}},{key:"lerp",value:function lerp(X,$){return this.r+=(X.r-this.r)*$,this.g+=(X.g-this.g)*$,this.b+=(X.b-this.b)*$,this}},{key:"lerpColors",value:function lerpColors(X,$,ee){return this.r=X.r+($.r-X.r)*ee,this.g=X.g+($.g-X.g)*ee,this.b=X.b+($.b-X.b)*ee,this}},{key:"lerpHSL",value:function lerpHSL(X,$){this.getHSL(Ca),X.getHSL(Aa);var ee=Fc(Ca.h,Aa.h,$),ne=Fc(Ca.s,Aa.s,$),ae=Fc(Ca.l,Aa.l,$);return this.setHSL(ee,ne,ae),this}},{key:"equals",value:function equals(X){return X.r===this.r&&X.g===this.g&&X.b===this.b}},{key:"fromArray",value:function fromArray(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=X[$],this.g=X[$+1],this.b=X[$+2],this}},{key:"toArray",value:function toArray(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],$=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return X[$]=this.r,X[$+1]=this.g,X[$+2]=this.b,X}},{key:"fromBufferAttribute",value:function fromBufferAttribute(X,$){return this.r=X.getX($),this.g=X.getY($),this.b=X.getZ($),!0===X.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}},{key:"toJSON",value:function toJSON(){return this.getHex()}},{key:Symbol.iterator,value:et().mark((function value(){return et().wrap((function value$(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,this.r;case 2:return X.next=4,this.g;case 4:return X.next=6,this.b;case 6:case"end":return X.stop()}}),value,this)}))}]),be}();Ma.NAMES=_a,Ma.prototype.isColor=!0,Ma.prototype.r=1,Ma.prototype.g=1,Ma.prototype.b=1;var Ea,Da=function(){function ns(){_classCallCheck(this,ns)}return _createClass(ns,null,[{key:"getDataURL",value:function getDataURL(X){if(/^data:/i.test(X.src)||typeof HTMLCanvasElement>"u")return X.src;var $;if(X instanceof HTMLCanvasElement)$=X;else{void 0===Ea&&(Ea=jc("canvas")),Ea.width=X.width,Ea.height=X.height;var ee=Ea.getContext("2d");X instanceof ImageData?ee.putImageData(X,0,0):ee.drawImage(X,0,0,X.width,X.height),$=Ea}return $.width>2048||$.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",X),$.toDataURL("image/jpeg",.6)):$.toDataURL("image/png")}},{key:"sRGBToLinear",value:function sRGBToLinear(X){if(typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&X instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&X instanceof ImageBitmap){var $=jc("canvas");$.width=X.width,$.height=X.height;var ee=$.getContext("2d");ee.drawImage(X,0,0,X.width,X.height);for(var ne=ee.getImageData(0,0,X.width,X.height),ae=ne.data,de=0;de<ae.length;de++)ae[de]=255*_o(ae[de]/255);return ee.putImageData(ne,0,0),$}if(X.data){for(var fe=X.data.slice(0),Ue=0;Ue<fe.length;Ue++)fe instanceof Uint8Array||fe instanceof Uint8ClampedArray?fe[Ue]=Math.floor(255*_o(fe[Ue]/255)):fe[Ue]=_o(fe[Ue]);return{data:fe,width:X.width,height:X.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),X}}]),ns}(),Ia=function(){function gf(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;_classCallCheck(this,gf),this.uuid=Un(),this.data=X,this.version=0}return _createClass(gf,[{key:"needsUpdate",set:function set(X){!0===X&&this.version++}},{key:"toJSON",value:function toJSON(X){var $=void 0===X||"string"==typeof X;if(!$&&void 0!==X.images[this.uuid])return X.images[this.uuid];var ee={uuid:this.uuid,url:""},ne=this.data;if(null!==ne){var ae;if(Array.isArray(ne)){ae=[];for(var de=0,fe=ne.length;de<fe;de++)ne[de].isDataTexture?ae.push(Tm(ne[de].image)):ae.push(Tm(ne[de]))}else ae=Tm(ne);ee.url=ae}return $||(X.images[this.uuid]=ee),ee}}]),gf}();function Tm(X){return typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&X instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&X instanceof ImageBitmap?Da.getDataURL(X):X.data?{data:Array.prototype.slice.call(X.data),width:X.width,height:X.height,type:X.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Ia.prototype.isSource=!0;var qa=0,eo=function(X){_inherits(Dt,X);var $=_createSuper(Dt);function Dt(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dt.DEFAULT_IMAGE,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Dt.DEFAULT_MAPPING,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:dn,de=arguments.length>3&&void 0!==arguments[3]?arguments[3]:dn,fe=arguments.length>4&&void 0!==arguments[4]?arguments[4]:_n,Ue=arguments.length>5&&void 0!==arguments[5]?arguments[5]:wn,je=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Pn,Ke=arguments.length>7&&void 0!==arguments[7]?arguments[7]:Sn,et=arguments.length>8&&void 0!==arguments[8]?arguments[8]:1,tt=arguments.length>9&&void 0!==arguments[9]?arguments[9]:qr;return _classCallCheck(this,Dt),X=$.call(this),Object.defineProperty(_assertThisInitialized(X),"id",{value:qa++}),X.uuid=Un(),X.name="",X.source=new Ia(ee),X.mipmaps=[],X.mapping=ne,X.wrapS=ae,X.wrapT=de,X.magFilter=fe,X.minFilter=Ue,X.anisotropy=et,X.format=je,X.internalFormat=null,X.type=Ke,X.offset=new va(0,0),X.repeat=new va(1,1),X.center=new va(0,0),X.rotation=0,X.matrixAutoUpdate=!0,X.matrix=new ga,X.generateMipmaps=!0,X.premultiplyAlpha=!1,X.flipY=!0,X.unpackAlignment=4,X.encoding=tt,X.userData={},X.version=0,X.onUpdate=null,X.isRenderTargetTexture=!1,X.needsPMREMUpdate=!1,X}return _createClass(Dt,[{key:"image",get:function get(){return this.source.data},set:function set(X){this.source.data=X}},{key:"updateMatrix",value:function updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}},{key:"clone",value:function clone(){return(new this.constructor).copy(this)}},{key:"copy",value:function copy(X){return this.name=X.name,this.source=X.source,this.mipmaps=X.mipmaps.slice(0),this.mapping=X.mapping,this.wrapS=X.wrapS,this.wrapT=X.wrapT,this.magFilter=X.magFilter,this.minFilter=X.minFilter,this.anisotropy=X.anisotropy,this.format=X.format,this.internalFormat=X.internalFormat,this.type=X.type,this.offset.copy(X.offset),this.repeat.copy(X.repeat),this.center.copy(X.center),this.rotation=X.rotation,this.matrixAutoUpdate=X.matrixAutoUpdate,this.matrix.copy(X.matrix),this.generateMipmaps=X.generateMipmaps,this.premultiplyAlpha=X.premultiplyAlpha,this.flipY=X.flipY,this.unpackAlignment=X.unpackAlignment,this.encoding=X.encoding,this.userData=JSON.parse(JSON.stringify(X.userData)),this.needsUpdate=!0,this}},{key:"toJSON",value:function toJSON(X){var $=void 0===X||"string"==typeof X;if(!$&&void 0!==X.textures[this.uuid])return X.textures[this.uuid];var ee={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(X).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return"{}"!==JSON.stringify(this.userData)&&(ee.userData=this.userData),$||(X.textures[this.uuid]=ee),ee}},{key:"dispose",value:function dispose(){this.dispatchEvent({type:"dispose"})}},{key:"transformUv",value:function transformUv(X){if(300!==this.mapping)return X;if(X.applyMatrix3(this.matrix),X.x<0||X.x>1)switch(this.wrapS){case hn:X.x=X.x-Math.floor(X.x);break;case dn:X.x=X.x<0?0:1;break;case mn:1===Math.abs(Math.floor(X.x)%2)?X.x=Math.ceil(X.x)-X.x:X.x=X.x-Math.floor(X.x)}if(X.y<0||X.y>1)switch(this.wrapT){case hn:X.y=X.y-Math.floor(X.y);break;case dn:X.y=X.y<0?0:1;break;case mn:1===Math.abs(Math.floor(X.y)%2)?X.y=Math.ceil(X.y)-X.y:X.y=X.y-Math.floor(X.y)}return this.flipY&&(X.y=1-X.y),X}},{key:"needsUpdate",set:function set(X){!0===X&&(this.version++,this.source.needsUpdate=!0)}}]),Dt}(aa);eo.DEFAULT_IMAGE=null,eo.DEFAULT_MAPPING=300,eo.prototype.isTexture=!0;var to=function(X){function Je(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,$=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,ne=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;_classCallCheck(this,Je),this.x=X,this.y=$,this.z=ee,this.w=ne}return _createClass(Je,[{key:"width",get:function get(){return this.z},set:function set(X){this.z=X}},{key:"height",get:function get(){return this.w},set:function set(X){this.w=X}},{key:"set",value:function set(X,$,ee,ne){return this.x=X,this.y=$,this.z=ee,this.w=ne,this}},{key:"setScalar",value:function setScalar(X){return this.x=X,this.y=X,this.z=X,this.w=X,this}},{key:"setX",value:function setX(X){return this.x=X,this}},{key:"setY",value:function setY(X){return this.y=X,this}},{key:"setZ",value:function setZ(X){return this.z=X,this}},{key:"setW",value:function setW(X){return this.w=X,this}},{key:"setComponent",value:function setComponent(X,$){switch(X){case 0:this.x=$;break;case 1:this.y=$;break;case 2:this.z=$;break;case 3:this.w=$;break;default:throw new Error("index is out of range: "+X)}return this}},{key:"getComponent",value:function getComponent(X){switch(X){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+X)}}},{key:"clone",value:function clone(){return new this.constructor(this.x,this.y,this.z,this.w)}},{key:"copy",value:function copy(X){return this.x=X.x,this.y=X.y,this.z=X.z,this.w=void 0!==X.w?X.w:1,this}},{key:"add",value:function add(X,$){return void 0!==$?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(X,$)):(this.x+=X.x,this.y+=X.y,this.z+=X.z,this.w+=X.w,this)}},{key:"addScalar",value:function addScalar(X){return this.x+=X,this.y+=X,this.z+=X,this.w+=X,this}},{key:"addVectors",value:function addVectors(X,$){return this.x=X.x+$.x,this.y=X.y+$.y,this.z=X.z+$.z,this.w=X.w+$.w,this}},{key:"addScaledVector",value:function addScaledVector(X,$){return this.x+=X.x*$,this.y+=X.y*$,this.z+=X.z*$,this.w+=X.w*$,this}},{key:"sub",value:function sub(X,$){return void 0!==$?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(X,$)):(this.x-=X.x,this.y-=X.y,this.z-=X.z,this.w-=X.w,this)}},{key:"subScalar",value:function subScalar(X){return this.x-=X,this.y-=X,this.z-=X,this.w-=X,this}},{key:"subVectors",value:function subVectors(X,$){return this.x=X.x-$.x,this.y=X.y-$.y,this.z=X.z-$.z,this.w=X.w-$.w,this}},{key:"multiply",value:function multiply(X){return this.x*=X.x,this.y*=X.y,this.z*=X.z,this.w*=X.w,this}},{key:"multiplyScalar",value:function multiplyScalar(X){return this.x*=X,this.y*=X,this.z*=X,this.w*=X,this}},{key:"applyMatrix4",value:function applyMatrix4(X){var $=this.x,ee=this.y,ne=this.z,ae=this.w,de=X.elements;return this.x=de[0]*$+de[4]*ee+de[8]*ne+de[12]*ae,this.y=de[1]*$+de[5]*ee+de[9]*ne+de[13]*ae,this.z=de[2]*$+de[6]*ee+de[10]*ne+de[14]*ae,this.w=de[3]*$+de[7]*ee+de[11]*ne+de[15]*ae,this}},{key:"divideScalar",value:function divideScalar(X){return this.multiplyScalar(1/X)}},{key:"setAxisAngleFromQuaternion",value:function setAxisAngleFromQuaternion(X){this.w=2*Math.acos(X.w);var $=Math.sqrt(1-X.w*X.w);return $<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=X.x/$,this.y=X.y/$,this.z=X.z/$),this}},{key:"setAxisAngleFromRotationMatrix",value:function setAxisAngleFromRotationMatrix(X){var $,ee,ne,ae,de=X.elements,fe=de[0],Ue=de[4],je=de[8],Ke=de[1],et=de[5],tt=de[9],nt=de[2],it=de[6],ct=de[10];if(Math.abs(Ue-Ke)<.01&&Math.abs(je-nt)<.01&&Math.abs(tt-it)<.01){if(Math.abs(Ue+Ke)<.1&&Math.abs(je+nt)<.1&&Math.abs(tt+it)<.1&&Math.abs(fe+et+ct-3)<.1)return this.set(1,0,0,0),this;$=Math.PI;var dt=(fe+1)/2,vt=(et+1)/2,gt=(ct+1)/2,yt=(Ue+Ke)/4,_t=(je+nt)/4,wt=(tt+it)/4;return dt>vt&&dt>gt?dt<.01?(ee=0,ne=.707106781,ae=.707106781):(ne=yt/(ee=Math.sqrt(dt)),ae=_t/ee):vt>gt?vt<.01?(ee=.707106781,ne=0,ae=.707106781):(ee=yt/(ne=Math.sqrt(vt)),ae=wt/ne):gt<.01?(ee=.707106781,ne=.707106781,ae=0):(ee=_t/(ae=Math.sqrt(gt)),ne=wt/ae),this.set(ee,ne,ae,$),this}var St=Math.sqrt((it-tt)*(it-tt)+(je-nt)*(je-nt)+(Ke-Ue)*(Ke-Ue));return Math.abs(St)<.001&&(St=1),this.x=(it-tt)/St,this.y=(je-nt)/St,this.z=(Ke-Ue)/St,this.w=Math.acos((fe+et+ct-1)/2),this}},{key:"min",value:function min(X){return this.x=Math.min(this.x,X.x),this.y=Math.min(this.y,X.y),this.z=Math.min(this.z,X.z),this.w=Math.min(this.w,X.w),this}},{key:"max",value:function max(X){return this.x=Math.max(this.x,X.x),this.y=Math.max(this.y,X.y),this.z=Math.max(this.z,X.z),this.w=Math.max(this.w,X.w),this}},{key:"clamp",value:function clamp(X,$){return this.x=Math.max(X.x,Math.min($.x,this.x)),this.y=Math.max(X.y,Math.min($.y,this.y)),this.z=Math.max(X.z,Math.min($.z,this.z)),this.w=Math.max(X.w,Math.min($.w,this.w)),this}},{key:"clampScalar",value:function clampScalar(X,$){return this.x=Math.max(X,Math.min($,this.x)),this.y=Math.max(X,Math.min($,this.y)),this.z=Math.max(X,Math.min($,this.z)),this.w=Math.max(X,Math.min($,this.w)),this}},{key:"clampLength",value:function clampLength(X,$){var ee=this.length();return this.divideScalar(ee||1).multiplyScalar(Math.max(X,Math.min($,ee)))}},{key:"floor",value:function floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}},{key:"ceil",value:function ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}},{key:"round",value:function round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}},{key:"roundToZero",value:function roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}},{key:"negate",value:function negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}},{key:"dot",value:function dot(X){return this.x*X.x+this.y*X.y+this.z*X.z+this.w*X.w}},{key:"lengthSq",value:function lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}},{key:"length",value:function length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}},{key:"manhattanLength",value:function manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}},{key:"normalize",value:function normalize(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function setLength(X){return this.normalize().multiplyScalar(X)}},{key:"lerp",value:function lerp(X,$){return this.x+=(X.x-this.x)*$,this.y+=(X.y-this.y)*$,this.z+=(X.z-this.z)*$,this.w+=(X.w-this.w)*$,this}},{key:"lerpVectors",value:function lerpVectors(X,$,ee){return this.x=X.x+($.x-X.x)*ee,this.y=X.y+($.y-X.y)*ee,this.z=X.z+($.z-X.z)*ee,this.w=X.w+($.w-X.w)*ee,this}},{key:"equals",value:function equals(X){return X.x===this.x&&X.y===this.y&&X.z===this.z&&X.w===this.w}},{key:"fromArray",value:function fromArray(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=X[$],this.y=X[$+1],this.z=X[$+2],this.w=X[$+3],this}},{key:"toArray",value:function toArray(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],$=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return X[$]=this.x,X[$+1]=this.y,X[$+2]=this.z,X[$+3]=this.w,X}},{key:"fromBufferAttribute",value:function fromBufferAttribute(X,$,ee){return void 0!==ee&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=X.getX($),this.y=X.getY($),this.z=X.getZ($),this.w=X.getW($),this}},{key:"random",value:function random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}},{key:Symbol.iterator,value:et().mark((function value(){return et().wrap((function value$(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,this.x;case 2:return X.next=4,this.y;case 4:return X.next=6,this.z;case 6:return X.next=8,this.w;case 8:case"end":return X.stop()}}),value,this)}))}]),Je}();to.prototype.isVector4=!0;var ro=function(X){_inherits(mt,X);var $=_createSuper(mt);function mt(X,ee){var ne,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,mt),(ne=$.call(this)).width=X,ne.height=ee,ne.depth=1,ne.scissor=new to(0,0,X,ee),ne.scissorTest=!1,ne.viewport=new to(0,0,X,ee);var de={width:X,height:ee,depth:1};return ne.texture=new eo(de,ae.mapping,ae.wrapS,ae.wrapT,ae.magFilter,ae.minFilter,ae.format,ae.type,ae.anisotropy,ae.encoding),ne.texture.isRenderTargetTexture=!0,ne.texture.flipY=!1,ne.texture.generateMipmaps=void 0!==ae.generateMipmaps&&ae.generateMipmaps,ne.texture.internalFormat=void 0!==ae.internalFormat?ae.internalFormat:null,ne.texture.minFilter=void 0!==ae.minFilter?ae.minFilter:_n,ne.depthBuffer=void 0===ae.depthBuffer||ae.depthBuffer,ne.stencilBuffer=void 0!==ae.stencilBuffer&&ae.stencilBuffer,ne.depthTexture=void 0!==ae.depthTexture?ae.depthTexture:null,ne.samples=void 0!==ae.samples?ae.samples:0,ne}return _createClass(mt,[{key:"setSize",value:function setSize(X,$){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;(this.width!==X||this.height!==$||this.depth!==ee)&&(this.width=X,this.height=$,this.depth=ee,this.texture.image.width=X,this.texture.image.height=$,this.texture.image.depth=ee,this.dispose()),this.viewport.set(0,0,X,$),this.scissor.set(0,0,X,$)}},{key:"clone",value:function clone(){return(new this.constructor).copy(this)}},{key:"copy",value:function copy(X){return this.width=X.width,this.height=X.height,this.depth=X.depth,this.viewport.copy(X.viewport),this.texture=X.texture.clone(),this.texture.isRenderTargetTexture=!0,this.texture.image=Object.assign({},X.texture.image),this.depthBuffer=X.depthBuffer,this.stencilBuffer=X.stencilBuffer,null!==X.depthTexture&&(this.depthTexture=X.depthTexture.clone()),this.samples=X.samples,this}},{key:"dispose",value:function dispose(){this.dispatchEvent({type:"dispose"})}}]),mt}(aa);ro.prototype.isWebGLRenderTarget=!0;var fo=function(X){_inherits(Ra,X);var $=_createSuper(Ra);function Ra(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,de=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return _classCallCheck(this,Ra),(X=$.call(this,null)).image={data:ee,width:ne,height:ae,depth:de},X.magFilter=gn,X.minFilter=gn,X.wrapR=dn,X.generateMipmaps=!1,X.flipY=!1,X.unpackAlignment=1,X}return _createClass(Ra)}(eo);fo.prototype.isDataArrayTexture=!0;var vo=function(X){_inherits(ag,X);var $=_createSuper(ag);function ag(X,ee,ne){var ae;return _classCallCheck(this,ag),(ae=$.call(this,X,ee)).depth=ne,ae.texture=new fo(null,X,ee,ne),ae.texture.isRenderTargetTexture=!0,ae}return _createClass(ag)}(ro);vo.prototype.isWebGLArrayRenderTarget=!0;var mo=function(X){_inherits(qc,X);var $=_createSuper(qc);function qc(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,de=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return _classCallCheck(this,qc),(X=$.call(this,null)).image={data:ee,width:ne,height:ae,depth:de},X.magFilter=gn,X.minFilter=gn,X.wrapR=dn,X.generateMipmaps=!1,X.flipY=!1,X.unpackAlignment=1,X}return _createClass(qc)}(eo);mo.prototype.isData3DTexture=!0;var go=function(X){_inherits(lg,X);var $=_createSuper(lg);function lg(X,ee,ne){var ae;return _classCallCheck(this,lg),(ae=$.call(this,X,ee)).depth=ne,ae.texture=new mo(null,X,ee,ne),ae.texture.isRenderTargetTexture=!0,ae}return _createClass(lg)}(ro);go.prototype.isWebGL3DRenderTarget=!0;var bo=function(X){_inherits(cg,X);var $=_createSuper(cg);function cg(X,ee,ne){var ae,de=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};_classCallCheck(this,cg);var fe=(ae=$.call(this,X,ee,de)).texture;ae.texture=[];for(var Ue=0;Ue<ne;Ue++)ae.texture[Ue]=fe.clone(),ae.texture[Ue].isRenderTargetTexture=!0;return ae}return _createClass(cg,[{key:"setSize",value:function setSize(X,$){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==X||this.height!==$||this.depth!==ee){this.width=X,this.height=$,this.depth=ee;for(var ne=0,ae=this.texture.length;ne<ae;ne++)this.texture[ne].image.width=X,this.texture[ne].image.height=$,this.texture[ne].image.depth=ee;this.dispose()}return this.viewport.set(0,0,X,$),this.scissor.set(0,0,X,$),this}},{key:"copy",value:function copy(X){this.dispose(),this.width=X.width,this.height=X.height,this.depth=X.depth,this.viewport.set(0,0,this.width,this.height),this.scissor.set(0,0,this.width,this.height),this.depthBuffer=X.depthBuffer,this.stencilBuffer=X.stencilBuffer,null!==X.depthTexture&&(this.depthTexture=X.depthTexture.clone()),this.texture.length=0;for(var $=0,ee=X.texture.length;$<ee;$++)this.texture[$]=X.texture[$].clone(),this.texture[$].isRenderTargetTexture=!0;return this}}]),cg}(ro);bo.prototype.isWebGLMultipleRenderTargets=!0;var xo=function(X){function zt(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,$=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,ne=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;_classCallCheck(this,zt),this._x=X,this._y=$,this._z=ee,this._w=ne}return _createClass(zt,[{key:"x",get:function get(){return this._x},set:function set(X){this._x=X,this._onChangeCallback()}},{key:"y",get:function get(){return this._y},set:function set(X){this._y=X,this._onChangeCallback()}},{key:"z",get:function get(){return this._z},set:function set(X){this._z=X,this._onChangeCallback()}},{key:"w",get:function get(){return this._w},set:function set(X){this._w=X,this._onChangeCallback()}},{key:"set",value:function set(X,$,ee,ne){return this._x=X,this._y=$,this._z=ee,this._w=ne,this._onChangeCallback(),this}},{key:"clone",value:function clone(){return new this.constructor(this._x,this._y,this._z,this._w)}},{key:"copy",value:function copy(X){return this._x=X.x,this._y=X.y,this._z=X.z,this._w=X.w,this._onChangeCallback(),this}},{key:"setFromEuler",value:function setFromEuler(X,$){if(!X||!X.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var ee=X._x,ne=X._y,ae=X._z,de=X._order,fe=Math.cos,Ue=Math.sin,je=fe(ee/2),Ke=fe(ne/2),et=fe(ae/2),tt=Ue(ee/2),nt=Ue(ne/2),it=Ue(ae/2);switch(de){case"XYZ":this._x=tt*Ke*et+je*nt*it,this._y=je*nt*et-tt*Ke*it,this._z=je*Ke*it+tt*nt*et,this._w=je*Ke*et-tt*nt*it;break;case"YXZ":this._x=tt*Ke*et+je*nt*it,this._y=je*nt*et-tt*Ke*it,this._z=je*Ke*it-tt*nt*et,this._w=je*Ke*et+tt*nt*it;break;case"ZXY":this._x=tt*Ke*et-je*nt*it,this._y=je*nt*et+tt*Ke*it,this._z=je*Ke*it+tt*nt*et,this._w=je*Ke*et-tt*nt*it;break;case"ZYX":this._x=tt*Ke*et-je*nt*it,this._y=je*nt*et+tt*Ke*it,this._z=je*Ke*it-tt*nt*et,this._w=je*Ke*et+tt*nt*it;break;case"YZX":this._x=tt*Ke*et+je*nt*it,this._y=je*nt*et+tt*Ke*it,this._z=je*Ke*it-tt*nt*et,this._w=je*Ke*et-tt*nt*it;break;case"XZY":this._x=tt*Ke*et-je*nt*it,this._y=je*nt*et-tt*Ke*it,this._z=je*Ke*it+tt*nt*et,this._w=je*Ke*et+tt*nt*it;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+de)}return!1!==$&&this._onChangeCallback(),this}},{key:"setFromAxisAngle",value:function setFromAxisAngle(X,$){var ee=$/2,ne=Math.sin(ee);return this._x=X.x*ne,this._y=X.y*ne,this._z=X.z*ne,this._w=Math.cos(ee),this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function setFromRotationMatrix(X){var $=X.elements,ee=$[0],ne=$[4],ae=$[8],de=$[1],fe=$[5],Ue=$[9],je=$[2],Ke=$[6],et=$[10],tt=ee+fe+et;if(tt>0){var nt=.5/Math.sqrt(tt+1);this._w=.25/nt,this._x=(Ke-Ue)*nt,this._y=(ae-je)*nt,this._z=(de-ne)*nt}else if(ee>fe&&ee>et){var it=2*Math.sqrt(1+ee-fe-et);this._w=(Ke-Ue)/it,this._x=.25*it,this._y=(ne+de)/it,this._z=(ae+je)/it}else if(fe>et){var ct=2*Math.sqrt(1+fe-ee-et);this._w=(ae-je)/ct,this._x=(ne+de)/ct,this._y=.25*ct,this._z=(Ue+Ke)/ct}else{var dt=2*Math.sqrt(1+et-ee-fe);this._w=(de-ne)/dt,this._x=(ae+je)/dt,this._y=(Ue+Ke)/dt,this._z=.25*dt}return this._onChangeCallback(),this}},{key:"setFromUnitVectors",value:function setFromUnitVectors(X,$){var ee=X.dot($)+1;return ee<Number.EPSILON?(ee=0,Math.abs(X.x)>Math.abs(X.z)?(this._x=-X.y,this._y=X.x,this._z=0,this._w=ee):(this._x=0,this._y=-X.z,this._z=X.y,this._w=ee)):(this._x=X.y*$.z-X.z*$.y,this._y=X.z*$.x-X.x*$.z,this._z=X.x*$.y-X.y*$.x,this._w=ee),this.normalize()}},{key:"angleTo",value:function angleTo(X){return 2*Math.acos(Math.abs(xr(this.dot(X),-1,1)))}},{key:"rotateTowards",value:function rotateTowards(X,$){var ee=this.angleTo(X);if(0===ee)return this;var ne=Math.min(1,$/ee);return this.slerp(X,ne),this}},{key:"identity",value:function identity(){return this.set(0,0,0,1)}},{key:"invert",value:function invert(){return this.conjugate()}},{key:"conjugate",value:function conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}},{key:"dot",value:function dot(X){return this._x*X._x+this._y*X._y+this._z*X._z+this._w*X._w}},{key:"lengthSq",value:function lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}},{key:"length",value:function length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}},{key:"normalize",value:function normalize(){var X=this.length();return 0===X?(this._x=0,this._y=0,this._z=0,this._w=1):(X=1/X,this._x=this._x*X,this._y=this._y*X,this._z=this._z*X,this._w=this._w*X),this._onChangeCallback(),this}},{key:"multiply",value:function multiply(X,$){return void 0!==$?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(X,$)):this.multiplyQuaternions(this,X)}},{key:"premultiply",value:function premultiply(X){return this.multiplyQuaternions(X,this)}},{key:"multiplyQuaternions",value:function multiplyQuaternions(X,$){var ee=X._x,ne=X._y,ae=X._z,de=X._w,fe=$._x,Ue=$._y,je=$._z,Ke=$._w;return this._x=ee*Ke+de*fe+ne*je-ae*Ue,this._y=ne*Ke+de*Ue+ae*fe-ee*je,this._z=ae*Ke+de*je+ee*Ue-ne*fe,this._w=de*Ke-ee*fe-ne*Ue-ae*je,this._onChangeCallback(),this}},{key:"slerp",value:function slerp(X,$){if(0===$)return this;if(1===$)return this.copy(X);var ee=this._x,ne=this._y,ae=this._z,de=this._w,fe=de*X._w+ee*X._x+ne*X._y+ae*X._z;if(fe<0?(this._w=-X._w,this._x=-X._x,this._y=-X._y,this._z=-X._z,fe=-fe):this.copy(X),fe>=1)return this._w=de,this._x=ee,this._y=ne,this._z=ae,this;var Ue=1-fe*fe;if(Ue<=Number.EPSILON){var je=1-$;return this._w=je*de+$*this._w,this._x=je*ee+$*this._x,this._y=je*ne+$*this._y,this._z=je*ae+$*this._z,this.normalize(),this._onChangeCallback(),this}var Ke=Math.sqrt(Ue),et=Math.atan2(Ke,fe),tt=Math.sin((1-$)*et)/Ke,nt=Math.sin($*et)/Ke;return this._w=de*tt+this._w*nt,this._x=ee*tt+this._x*nt,this._y=ne*tt+this._y*nt,this._z=ae*tt+this._z*nt,this._onChangeCallback(),this}},{key:"slerpQuaternions",value:function slerpQuaternions(X,$,ee){return this.copy(X).slerp($,ee)}},{key:"random",value:function random(){var X=Math.random(),$=Math.sqrt(1-X),ee=Math.sqrt(X),ne=2*Math.PI*Math.random(),ae=2*Math.PI*Math.random();return this.set($*Math.cos(ne),ee*Math.sin(ae),ee*Math.cos(ae),$*Math.sin(ne))}},{key:"equals",value:function equals(X){return X._x===this._x&&X._y===this._y&&X._z===this._z&&X._w===this._w}},{key:"fromArray",value:function fromArray(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=X[$],this._y=X[$+1],this._z=X[$+2],this._w=X[$+3],this._onChangeCallback(),this}},{key:"toArray",value:function toArray(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],$=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return X[$]=this._x,X[$+1]=this._y,X[$+2]=this._z,X[$+3]=this._w,X}},{key:"fromBufferAttribute",value:function fromBufferAttribute(X,$){return this._x=X.getX($),this._y=X.getY($),this._z=X.getZ($),this._w=X.getW($),this}},{key:"_onChange",value:function _onChange(X){return this._onChangeCallback=X,this}},{key:"_onChangeCallback",value:function _onChangeCallback(){}},{key:Symbol.iterator,value:et().mark((function value(){return et().wrap((function value$(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,this._x;case 2:return X.next=4,this._y;case 4:return X.next=6,this._z;case 6:return X.next=8,this._w;case 8:case"end":return X.stop()}}),value,this)}))}],[{key:"slerp",value:function slerp(X,$,ee,ne){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),ee.slerpQuaternions(X,$,ne)}},{key:"slerpFlat",value:function slerpFlat(X,$,ee,ne,ae,de,fe){var Ue=ee[ne+0],je=ee[ne+1],Ke=ee[ne+2],et=ee[ne+3],tt=ae[de+0],nt=ae[de+1],it=ae[de+2],ct=ae[de+3];if(0===fe)return X[$+0]=Ue,X[$+1]=je,X[$+2]=Ke,void(X[$+3]=et);if(1===fe)return X[$+0]=tt,X[$+1]=nt,X[$+2]=it,void(X[$+3]=ct);if(et!==ct||Ue!==tt||je!==nt||Ke!==it){var dt=1-fe,vt=Ue*tt+je*nt+Ke*it+et*ct,gt=vt>=0?1:-1,yt=1-vt*vt;if(yt>Number.EPSILON){var _t=Math.sqrt(yt),wt=Math.atan2(_t,vt*gt);dt=Math.sin(dt*wt)/_t,fe=Math.sin(fe*wt)/_t}var St=fe*gt;if(Ue=Ue*dt+tt*St,je=je*dt+nt*St,Ke=Ke*dt+it*St,et=et*dt+ct*St,dt===1-fe){var Ct=1/Math.sqrt(Ue*Ue+je*je+Ke*Ke+et*et);Ue*=Ct,je*=Ct,Ke*=Ct,et*=Ct}}X[$]=Ue,X[$+1]=je,X[$+2]=Ke,X[$+3]=et}},{key:"multiplyQuaternionsFlat",value:function multiplyQuaternionsFlat(X,$,ee,ne,ae,de){var fe=ee[ne],Ue=ee[ne+1],je=ee[ne+2],Ke=ee[ne+3],et=ae[de],tt=ae[de+1],nt=ae[de+2],it=ae[de+3];return X[$]=fe*it+Ke*et+Ue*nt-je*tt,X[$+1]=Ue*it+Ke*tt+je*et-fe*nt,X[$+2]=je*it+Ke*nt+fe*tt-Ue*et,X[$+3]=Ke*it-fe*et-Ue*tt-je*nt,X}}]),zt}();xo.prototype.isQuaternion=!0;var wo=function(X){function M(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,$=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_classCallCheck(this,M),this.x=X,this.y=$,this.z=ee}return _createClass(M,[{key:"set",value:function set(X,$,ee){return void 0===ee&&(ee=this.z),this.x=X,this.y=$,this.z=ee,this}},{key:"setScalar",value:function setScalar(X){return this.x=X,this.y=X,this.z=X,this}},{key:"setX",value:function setX(X){return this.x=X,this}},{key:"setY",value:function setY(X){return this.y=X,this}},{key:"setZ",value:function setZ(X){return this.z=X,this}},{key:"setComponent",value:function setComponent(X,$){switch(X){case 0:this.x=$;break;case 1:this.y=$;break;case 2:this.z=$;break;default:throw new Error("index is out of range: "+X)}return this}},{key:"getComponent",value:function getComponent(X){switch(X){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+X)}}},{key:"clone",value:function clone(){return new this.constructor(this.x,this.y,this.z)}},{key:"copy",value:function copy(X){return this.x=X.x,this.y=X.y,this.z=X.z,this}},{key:"add",value:function add(X,$){return void 0!==$?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(X,$)):(this.x+=X.x,this.y+=X.y,this.z+=X.z,this)}},{key:"addScalar",value:function addScalar(X){return this.x+=X,this.y+=X,this.z+=X,this}},{key:"addVectors",value:function addVectors(X,$){return this.x=X.x+$.x,this.y=X.y+$.y,this.z=X.z+$.z,this}},{key:"addScaledVector",value:function addScaledVector(X,$){return this.x+=X.x*$,this.y+=X.y*$,this.z+=X.z*$,this}},{key:"sub",value:function sub(X,$){return void 0!==$?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(X,$)):(this.x-=X.x,this.y-=X.y,this.z-=X.z,this)}},{key:"subScalar",value:function subScalar(X){return this.x-=X,this.y-=X,this.z-=X,this}},{key:"subVectors",value:function subVectors(X,$){return this.x=X.x-$.x,this.y=X.y-$.y,this.z=X.z-$.z,this}},{key:"multiply",value:function multiply(X,$){return void 0!==$?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(X,$)):(this.x*=X.x,this.y*=X.y,this.z*=X.z,this)}},{key:"multiplyScalar",value:function multiplyScalar(X){return this.x*=X,this.y*=X,this.z*=X,this}},{key:"multiplyVectors",value:function multiplyVectors(X,$){return this.x=X.x*$.x,this.y=X.y*$.y,this.z=X.z*$.z,this}},{key:"applyEuler",value:function applyEuler(X){return X&&X.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Ao.setFromEuler(X))}},{key:"applyAxisAngle",value:function applyAxisAngle(X,$){return this.applyQuaternion(Ao.setFromAxisAngle(X,$))}},{key:"applyMatrix3",value:function applyMatrix3(X){var $=this.x,ee=this.y,ne=this.z,ae=X.elements;return this.x=ae[0]*$+ae[3]*ee+ae[6]*ne,this.y=ae[1]*$+ae[4]*ee+ae[7]*ne,this.z=ae[2]*$+ae[5]*ee+ae[8]*ne,this}},{key:"applyNormalMatrix",value:function applyNormalMatrix(X){return this.applyMatrix3(X).normalize()}},{key:"applyMatrix4",value:function applyMatrix4(X){var $=this.x,ee=this.y,ne=this.z,ae=X.elements,de=1/(ae[3]*$+ae[7]*ee+ae[11]*ne+ae[15]);return this.x=(ae[0]*$+ae[4]*ee+ae[8]*ne+ae[12])*de,this.y=(ae[1]*$+ae[5]*ee+ae[9]*ne+ae[13])*de,this.z=(ae[2]*$+ae[6]*ee+ae[10]*ne+ae[14])*de,this}},{key:"applyQuaternion",value:function applyQuaternion(X){var $=this.x,ee=this.y,ne=this.z,ae=X.x,de=X.y,fe=X.z,Ue=X.w,je=Ue*$+de*ne-fe*ee,Ke=Ue*ee+fe*$-ae*ne,et=Ue*ne+ae*ee-de*$,tt=-ae*$-de*ee-fe*ne;return this.x=je*Ue+tt*-ae+Ke*-fe-et*-de,this.y=Ke*Ue+tt*-de+et*-ae-je*-fe,this.z=et*Ue+tt*-fe+je*-de-Ke*-ae,this}},{key:"project",value:function project(X){return this.applyMatrix4(X.matrixWorldInverse).applyMatrix4(X.projectionMatrix)}},{key:"unproject",value:function unproject(X){return this.applyMatrix4(X.projectionMatrixInverse).applyMatrix4(X.matrixWorld)}},{key:"transformDirection",value:function transformDirection(X){var $=this.x,ee=this.y,ne=this.z,ae=X.elements;return this.x=ae[0]*$+ae[4]*ee+ae[8]*ne,this.y=ae[1]*$+ae[5]*ee+ae[9]*ne,this.z=ae[2]*$+ae[6]*ee+ae[10]*ne,this.normalize()}},{key:"divide",value:function divide(X){return this.x/=X.x,this.y/=X.y,this.z/=X.z,this}},{key:"divideScalar",value:function divideScalar(X){return this.multiplyScalar(1/X)}},{key:"min",value:function min(X){return this.x=Math.min(this.x,X.x),this.y=Math.min(this.y,X.y),this.z=Math.min(this.z,X.z),this}},{key:"max",value:function max(X){return this.x=Math.max(this.x,X.x),this.y=Math.max(this.y,X.y),this.z=Math.max(this.z,X.z),this}},{key:"clamp",value:function clamp(X,$){return this.x=Math.max(X.x,Math.min($.x,this.x)),this.y=Math.max(X.y,Math.min($.y,this.y)),this.z=Math.max(X.z,Math.min($.z,this.z)),this}},{key:"clampScalar",value:function clampScalar(X,$){return this.x=Math.max(X,Math.min($,this.x)),this.y=Math.max(X,Math.min($,this.y)),this.z=Math.max(X,Math.min($,this.z)),this}},{key:"clampLength",value:function clampLength(X,$){var ee=this.length();return this.divideScalar(ee||1).multiplyScalar(Math.max(X,Math.min($,ee)))}},{key:"floor",value:function floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}},{key:"ceil",value:function ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}},{key:"round",value:function round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}},{key:"roundToZero",value:function roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}},{key:"negate",value:function negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}},{key:"dot",value:function dot(X){return this.x*X.x+this.y*X.y+this.z*X.z}},{key:"lengthSq",value:function lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}},{key:"length",value:function length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}},{key:"manhattanLength",value:function manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}},{key:"normalize",value:function normalize(){return this.divideScalar(this.length()||1)}},{key:"setLength",value:function setLength(X){return this.normalize().multiplyScalar(X)}},{key:"lerp",value:function lerp(X,$){return this.x+=(X.x-this.x)*$,this.y+=(X.y-this.y)*$,this.z+=(X.z-this.z)*$,this}},{key:"lerpVectors",value:function lerpVectors(X,$,ee){return this.x=X.x+($.x-X.x)*ee,this.y=X.y+($.y-X.y)*ee,this.z=X.z+($.z-X.z)*ee,this}},{key:"cross",value:function cross(X,$){return void 0!==$?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(X,$)):this.crossVectors(this,X)}},{key:"crossVectors",value:function crossVectors(X,$){var ee=X.x,ne=X.y,ae=X.z,de=$.x,fe=$.y,Ue=$.z;return this.x=ne*Ue-ae*fe,this.y=ae*de-ee*Ue,this.z=ee*fe-ne*de,this}},{key:"projectOnVector",value:function projectOnVector(X){var $=X.lengthSq();if(0===$)return this.set(0,0,0);var ee=X.dot(this)/$;return this.copy(X).multiplyScalar(ee)}},{key:"projectOnPlane",value:function projectOnPlane(X){return So.copy(this).projectOnVector(X),this.sub(So)}},{key:"reflect",value:function reflect(X){return this.sub(So.copy(X).multiplyScalar(2*this.dot(X)))}},{key:"angleTo",value:function angleTo(X){var $=Math.sqrt(this.lengthSq()*X.lengthSq());if(0===$)return Math.PI/2;var ee=this.dot(X)/$;return Math.acos(xr(ee,-1,1))}},{key:"distanceTo",value:function distanceTo(X){return Math.sqrt(this.distanceToSquared(X))}},{key:"distanceToSquared",value:function distanceToSquared(X){var $=this.x-X.x,ee=this.y-X.y,ne=this.z-X.z;return $*$+ee*ee+ne*ne}},{key:"manhattanDistanceTo",value:function manhattanDistanceTo(X){return Math.abs(this.x-X.x)+Math.abs(this.y-X.y)+Math.abs(this.z-X.z)}},{key:"setFromSpherical",value:function setFromSpherical(X){return this.setFromSphericalCoords(X.radius,X.phi,X.theta)}},{key:"setFromSphericalCoords",value:function setFromSphericalCoords(X,$,ee){var ne=Math.sin($)*X;return this.x=ne*Math.sin(ee),this.y=Math.cos($)*X,this.z=ne*Math.cos(ee),this}},{key:"setFromCylindrical",value:function setFromCylindrical(X){return this.setFromCylindricalCoords(X.radius,X.theta,X.y)}},{key:"setFromCylindricalCoords",value:function setFromCylindricalCoords(X,$,ee){return this.x=X*Math.sin($),this.y=ee,this.z=X*Math.cos($),this}},{key:"setFromMatrixPosition",value:function setFromMatrixPosition(X){var $=X.elements;return this.x=$[12],this.y=$[13],this.z=$[14],this}},{key:"setFromMatrixScale",value:function setFromMatrixScale(X){var $=this.setFromMatrixColumn(X,0).length(),ee=this.setFromMatrixColumn(X,1).length(),ne=this.setFromMatrixColumn(X,2).length();return this.x=$,this.y=ee,this.z=ne,this}},{key:"setFromMatrixColumn",value:function setFromMatrixColumn(X,$){return this.fromArray(X.elements,4*$)}},{key:"setFromMatrix3Column",value:function setFromMatrix3Column(X,$){return this.fromArray(X.elements,3*$)}},{key:"setFromEuler",value:function setFromEuler(X){return this.x=X._x,this.y=X._y,this.z=X._z,this}},{key:"equals",value:function equals(X){return X.x===this.x&&X.y===this.y&&X.z===this.z}},{key:"fromArray",value:function fromArray(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=X[$],this.y=X[$+1],this.z=X[$+2],this}},{key:"toArray",value:function toArray(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],$=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return X[$]=this.x,X[$+1]=this.y,X[$+2]=this.z,X}},{key:"fromBufferAttribute",value:function fromBufferAttribute(X,$,ee){return void 0!==ee&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=X.getX($),this.y=X.getY($),this.z=X.getZ($),this}},{key:"random",value:function random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}},{key:"randomDirection",value:function randomDirection(){var X=2*(Math.random()-.5),$=Math.random()*Math.PI*2,ee=Math.sqrt(1-Math.pow(X,2));return this.x=ee*Math.cos($),this.y=ee*Math.sin($),this.z=X,this}},{key:Symbol.iterator,value:et().mark((function value(){return et().wrap((function value$(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,this.x;case 2:return X.next=4,this.y;case 4:return X.next=6,this.z;case 6:case"end":return X.stop()}}),value,this)}))}]),M}();wo.prototype.isVector3=!0;var So=new wo,Ao=new xo,Mo=function(){function Kt(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new wo(1/0,1/0,1/0),$=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new wo(-1/0,-1/0,-1/0);_classCallCheck(this,Kt),this.min=X,this.max=$}return _createClass(Kt,[{key:"set",value:function set(X,$){return this.min.copy(X),this.max.copy($),this}},{key:"setFromArray",value:function setFromArray(X){for(var $=1/0,ee=1/0,ne=1/0,ae=-1/0,de=-1/0,fe=-1/0,Ue=0,je=X.length;Ue<je;Ue+=3){var Ke=X[Ue],et=X[Ue+1],tt=X[Ue+2];Ke<$&&($=Ke),et<ee&&(ee=et),tt<ne&&(ne=tt),Ke>ae&&(ae=Ke),et>de&&(de=et),tt>fe&&(fe=tt)}return this.min.set($,ee,ne),this.max.set(ae,de,fe),this}},{key:"setFromBufferAttribute",value:function setFromBufferAttribute(X){for(var $=1/0,ee=1/0,ne=1/0,ae=-1/0,de=-1/0,fe=-1/0,Ue=0,je=X.count;Ue<je;Ue++){var Ke=X.getX(Ue),et=X.getY(Ue),tt=X.getZ(Ue);Ke<$&&($=Ke),et<ee&&(ee=et),tt<ne&&(ne=tt),Ke>ae&&(ae=Ke),et>de&&(de=et),tt>fe&&(fe=tt)}return this.min.set($,ee,ne),this.max.set(ae,de,fe),this}},{key:"setFromPoints",value:function setFromPoints(X){this.makeEmpty();for(var $=0,ee=X.length;$<ee;$++)this.expandByPoint(X[$]);return this}},{key:"setFromCenterAndSize",value:function setFromCenterAndSize(X,$){var ee=To.copy($).multiplyScalar(.5);return this.min.copy(X).sub(ee),this.max.copy(X).add(ee),this}},{key:"setFromObject",value:function setFromObject(X){var $=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(X,$)}},{key:"clone",value:function clone(){return(new this.constructor).copy(this)}},{key:"copy",value:function copy(X){return this.min.copy(X.min),this.max.copy(X.max),this}},{key:"makeEmpty",value:function makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}},{key:"isEmpty",value:function isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}},{key:"getCenter",value:function getCenter(X){return this.isEmpty()?X.set(0,0,0):X.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function getSize(X){return this.isEmpty()?X.set(0,0,0):X.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function expandByPoint(X){return this.min.min(X),this.max.max(X),this}},{key:"expandByVector",value:function expandByVector(X){return this.min.sub(X),this.max.add(X),this}},{key:"expandByScalar",value:function expandByScalar(X){return this.min.addScalar(-X),this.max.addScalar(X),this}},{key:"expandByObject",value:function expandByObject(X){var $=arguments.length>1&&void 0!==arguments[1]&&arguments[1];X.updateWorldMatrix(!1,!1);var ee=X.geometry;if(void 0!==ee)if($&&null!=ee.attributes&&void 0!==ee.attributes.position)for(var ne=ee.attributes.position,ae=0,de=ne.count;ae<de;ae++)To.fromBufferAttribute(ne,ae).applyMatrix4(X.matrixWorld),this.expandByPoint(To);else null===ee.boundingBox&&ee.computeBoundingBox(),Uo.copy(ee.boundingBox),Uo.applyMatrix4(X.matrixWorld),this.union(Uo);for(var fe=X.children,Ue=0,je=fe.length;Ue<je;Ue++)this.expandByObject(fe[Ue],$);return this}},{key:"containsPoint",value:function containsPoint(X){return!(X.x<this.min.x||X.x>this.max.x||X.y<this.min.y||X.y>this.max.y||X.z<this.min.z||X.z>this.max.z)}},{key:"containsBox",value:function containsBox(X){return this.min.x<=X.min.x&&X.max.x<=this.max.x&&this.min.y<=X.min.y&&X.max.y<=this.max.y&&this.min.z<=X.min.z&&X.max.z<=this.max.z}},{key:"getParameter",value:function getParameter(X,$){return $.set((X.x-this.min.x)/(this.max.x-this.min.x),(X.y-this.min.y)/(this.max.y-this.min.y),(X.z-this.min.z)/(this.max.z-this.min.z))}},{key:"intersectsBox",value:function intersectsBox(X){return!(X.max.x<this.min.x||X.min.x>this.max.x||X.max.y<this.min.y||X.min.y>this.max.y||X.max.z<this.min.z||X.min.z>this.max.z)}},{key:"intersectsSphere",value:function intersectsSphere(X){return this.clampPoint(X.center,To),To.distanceToSquared(X.center)<=X.radius*X.radius}},{key:"intersectsPlane",value:function intersectsPlane(X){var $,ee;return X.normal.x>0?($=X.normal.x*this.min.x,ee=X.normal.x*this.max.x):($=X.normal.x*this.max.x,ee=X.normal.x*this.min.x),X.normal.y>0?($+=X.normal.y*this.min.y,ee+=X.normal.y*this.max.y):($+=X.normal.y*this.max.y,ee+=X.normal.y*this.min.y),X.normal.z>0?($+=X.normal.z*this.min.z,ee+=X.normal.z*this.max.z):($+=X.normal.z*this.max.z,ee+=X.normal.z*this.min.z),$<=-X.constant&&ee>=-X.constant}},{key:"intersectsTriangle",value:function intersectsTriangle(X){if(this.isEmpty())return!1;this.getCenter(ls),us.subVectors(this.max,ls),Vo.subVectors(X.a,ls),Ho.subVectors(X.b,ls),Go.subVectors(X.c,ls),Wo.subVectors(Ho,Vo),es.subVectors(Go,Ho),rs.subVectors(Vo,Go);var $=[0,-Wo.z,Wo.y,0,-es.z,es.y,0,-rs.z,rs.y,Wo.z,0,-Wo.x,es.z,0,-es.x,rs.z,0,-rs.x,-Wo.y,Wo.x,0,-es.y,es.x,0,-rs.y,rs.x,0];return!(!Cm($,Vo,Ho,Go,us)||($=[1,0,0,0,1,0,0,0,1],!Cm($,Vo,Ho,Go,us)))&&(cs.crossVectors(Wo,es),Cm($=[cs.x,cs.y,cs.z],Vo,Ho,Go,us))}},{key:"clampPoint",value:function clampPoint(X,$){return $.copy(X).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function distanceToPoint(X){return To.copy(X).clamp(this.min,this.max).sub(X).length()}},{key:"getBoundingSphere",value:function getBoundingSphere(X){return this.getCenter(X.center),X.radius=.5*this.getSize(To).length(),X}},{key:"intersect",value:function intersect(X){return this.min.max(X.min),this.max.min(X.max),this.isEmpty()&&this.makeEmpty(),this}},{key:"union",value:function union(X){return this.min.min(X.min),this.max.max(X.max),this}},{key:"applyMatrix4",value:function applyMatrix4(X){return this.isEmpty()||(Eo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(X),Eo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(X),Eo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(X),Eo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(X),Eo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(X),Eo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(X),Eo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(X),Eo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(X),this.setFromPoints(Eo)),this}},{key:"translate",value:function translate(X){return this.min.add(X),this.max.add(X),this}},{key:"equals",value:function equals(X){return X.min.equals(this.min)&&X.max.equals(this.max)}}]),Kt}();Mo.prototype.isBox3=!0;var Eo=[new wo,new wo,new wo,new wo,new wo,new wo,new wo,new wo],To=new wo,Uo=new Mo,Vo=new wo,Ho=new wo,Go=new wo,Wo=new wo,es=new wo,rs=new wo,ls=new wo,us=new wo,cs=new wo,hs=new wo;function Cm(X,$,ee,ne,ae){for(var de=0,fe=X.length-3;de<=fe;de+=3){hs.fromArray(X,de);var Ue=ae.x*Math.abs(hs.x)+ae.y*Math.abs(hs.y)+ae.z*Math.abs(hs.z),je=$.dot(hs),Ke=ee.dot(hs),et=ne.dot(hs);if(Math.max(-Math.max(je,Ke,et),Math.min(je,Ke,et))>Ue)return!1}return!0}var ds=new Mo,fs=new wo,bs=new wo,xs=new wo,_s=function(){function Lr(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new wo,$=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;_classCallCheck(this,Lr),this.center=X,this.radius=$}return _createClass(Lr,[{key:"set",value:function set(X,$){return this.center.copy(X),this.radius=$,this}},{key:"setFromPoints",value:function setFromPoints(X,$){var ee=this.center;void 0!==$?ee.copy($):ds.setFromPoints(X).getCenter(ee);for(var ne=0,ae=0,de=X.length;ae<de;ae++)ne=Math.max(ne,ee.distanceToSquared(X[ae]));return this.radius=Math.sqrt(ne),this}},{key:"copy",value:function copy(X){return this.center.copy(X.center),this.radius=X.radius,this}},{key:"isEmpty",value:function isEmpty(){return this.radius<0}},{key:"makeEmpty",value:function makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}},{key:"containsPoint",value:function containsPoint(X){return X.distanceToSquared(this.center)<=this.radius*this.radius}},{key:"distanceToPoint",value:function distanceToPoint(X){return X.distanceTo(this.center)-this.radius}},{key:"intersectsSphere",value:function intersectsSphere(X){var $=this.radius+X.radius;return X.center.distanceToSquared(this.center)<=$*$}},{key:"intersectsBox",value:function intersectsBox(X){return X.intersectsSphere(this)}},{key:"intersectsPlane",value:function intersectsPlane(X){return Math.abs(X.distanceToPoint(this.center))<=this.radius}},{key:"clampPoint",value:function clampPoint(X,$){var ee=this.center.distanceToSquared(X);return $.copy(X),ee>this.radius*this.radius&&($.sub(this.center).normalize(),$.multiplyScalar(this.radius).add(this.center)),$}},{key:"getBoundingBox",value:function getBoundingBox(X){return this.isEmpty()?(X.makeEmpty(),X):(X.set(this.center,this.center),X.expandByScalar(this.radius),X)}},{key:"applyMatrix4",value:function applyMatrix4(X){return this.center.applyMatrix4(X),this.radius=this.radius*X.getMaxScaleOnAxis(),this}},{key:"translate",value:function translate(X){return this.center.add(X),this}},{key:"expandByPoint",value:function expandByPoint(X){xs.subVectors(X,this.center);var $=xs.lengthSq();if($>this.radius*this.radius){var ee=Math.sqrt($),ne=.5*(ee-this.radius);this.center.add(xs.multiplyScalar(ne/ee)),this.radius+=ne}return this}},{key:"union",value:function union(X){return!0===this.center.equals(X.center)?bs.set(0,0,1).multiplyScalar(X.radius):bs.subVectors(X.center,this.center).normalize().multiplyScalar(X.radius),this.expandByPoint(fs.copy(X.center).add(bs)),this.expandByPoint(fs.copy(X.center).sub(bs)),this}},{key:"equals",value:function equals(X){return X.center.equals(this.center)&&X.radius===this.radius}},{key:"clone",value:function clone(){return(new this.constructor).copy(this)}}]),Lr}(),ws=new wo,Ss=new wo,Cs=new wo,As=new wo,Ms=new wo,Es=new wo,Ts=new wo,Ps=function(){function si(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new wo,$=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new wo(0,0,-1);_classCallCheck(this,si),this.origin=X,this.direction=$}return _createClass(si,[{key:"set",value:function set(X,$){return this.origin.copy(X),this.direction.copy($),this}},{key:"copy",value:function copy(X){return this.origin.copy(X.origin),this.direction.copy(X.direction),this}},{key:"at",value:function at(X,$){return $.copy(this.direction).multiplyScalar(X).add(this.origin)}},{key:"lookAt",value:function lookAt(X){return this.direction.copy(X).sub(this.origin).normalize(),this}},{key:"recast",value:function recast(X){return this.origin.copy(this.at(X,ws)),this}},{key:"closestPointToPoint",value:function closestPointToPoint(X,$){$.subVectors(X,this.origin);var ee=$.dot(this.direction);return ee<0?$.copy(this.origin):$.copy(this.direction).multiplyScalar(ee).add(this.origin)}},{key:"distanceToPoint",value:function distanceToPoint(X){return Math.sqrt(this.distanceSqToPoint(X))}},{key:"distanceSqToPoint",value:function distanceSqToPoint(X){var $=ws.subVectors(X,this.origin).dot(this.direction);return $<0?this.origin.distanceToSquared(X):(ws.copy(this.direction).multiplyScalar($).add(this.origin),ws.distanceToSquared(X))}},{key:"distanceSqToSegment",value:function distanceSqToSegment(X,$,ee,ne){Ss.copy(X).add($).multiplyScalar(.5),Cs.copy($).sub(X).normalize(),As.copy(this.origin).sub(Ss);var ae,de,fe,Ue,je=.5*X.distanceTo($),Ke=-this.direction.dot(Cs),et=As.dot(this.direction),tt=-As.dot(Cs),nt=As.lengthSq(),it=Math.abs(1-Ke*Ke);if(it>0)if(de=Ke*et-tt,Ue=je*it,(ae=Ke*tt-et)>=0)if(de>=-Ue)if(de<=Ue){var ct=1/it;fe=(ae*=ct)*(ae+Ke*(de*=ct)+2*et)+de*(Ke*ae+de+2*tt)+nt}else de=je,fe=-(ae=Math.max(0,-(Ke*de+et)))*ae+de*(de+2*tt)+nt;else de=-je,fe=-(ae=Math.max(0,-(Ke*de+et)))*ae+de*(de+2*tt)+nt;else de<=-Ue?fe=-(ae=Math.max(0,-(-Ke*je+et)))*ae+(de=ae>0?-je:Math.min(Math.max(-je,-tt),je))*(de+2*tt)+nt:de<=Ue?(ae=0,fe=(de=Math.min(Math.max(-je,-tt),je))*(de+2*tt)+nt):fe=-(ae=Math.max(0,-(Ke*je+et)))*ae+(de=ae>0?je:Math.min(Math.max(-je,-tt),je))*(de+2*tt)+nt;else de=Ke>0?-je:je,fe=-(ae=Math.max(0,-(Ke*de+et)))*ae+de*(de+2*tt)+nt;return ee&&ee.copy(this.direction).multiplyScalar(ae).add(this.origin),ne&&ne.copy(Cs).multiplyScalar(de).add(Ss),fe}},{key:"intersectSphere",value:function intersectSphere(X,$){ws.subVectors(X.center,this.origin);var ee=ws.dot(this.direction),ne=ws.dot(ws)-ee*ee,ae=X.radius*X.radius;if(ne>ae)return null;var de=Math.sqrt(ae-ne),fe=ee-de,Ue=ee+de;return fe<0&&Ue<0?null:fe<0?this.at(Ue,$):this.at(fe,$)}},{key:"intersectsSphere",value:function intersectsSphere(X){return this.distanceSqToPoint(X.center)<=X.radius*X.radius}},{key:"distanceToPlane",value:function distanceToPlane(X){var $=X.normal.dot(this.direction);if(0===$)return 0===X.distanceToPoint(this.origin)?0:null;var ee=-(this.origin.dot(X.normal)+X.constant)/$;return ee>=0?ee:null}},{key:"intersectPlane",value:function intersectPlane(X,$){var ee=this.distanceToPlane(X);return null===ee?null:this.at(ee,$)}},{key:"intersectsPlane",value:function intersectsPlane(X){var $=X.distanceToPoint(this.origin);return 0===$||X.normal.dot(this.direction)*$<0}},{key:"intersectBox",value:function intersectBox(X,$){var ee,ne,ae,de,fe,Ue,je=1/this.direction.x,Ke=1/this.direction.y,et=1/this.direction.z,tt=this.origin;return je>=0?(ee=(X.min.x-tt.x)*je,ne=(X.max.x-tt.x)*je):(ee=(X.max.x-tt.x)*je,ne=(X.min.x-tt.x)*je),Ke>=0?(ae=(X.min.y-tt.y)*Ke,de=(X.max.y-tt.y)*Ke):(ae=(X.max.y-tt.y)*Ke,de=(X.min.y-tt.y)*Ke),ee>de||ae>ne||((ae>ee||ee!==ee)&&(ee=ae),(de<ne||ne!==ne)&&(ne=de),et>=0?(fe=(X.min.z-tt.z)*et,Ue=(X.max.z-tt.z)*et):(fe=(X.max.z-tt.z)*et,Ue=(X.min.z-tt.z)*et),ee>Ue||fe>ne)||((fe>ee||ee!==ee)&&(ee=fe),(Ue<ne||ne!==ne)&&(ne=Ue),ne<0)?null:this.at(ee>=0?ee:ne,$)}},{key:"intersectsBox",value:function intersectsBox(X){return null!==this.intersectBox(X,ws)}},{key:"intersectTriangle",value:function intersectTriangle(X,$,ee,ne,ae){Ms.subVectors($,X),Es.subVectors(ee,X),Ts.crossVectors(Ms,Es);var de,fe=this.direction.dot(Ts);if(fe>0){if(ne)return null;de=1}else{if(!(fe<0))return null;de=-1,fe=-fe}As.subVectors(this.origin,X);var Ue=de*this.direction.dot(Es.crossVectors(As,Es));if(Ue<0)return null;var je=de*this.direction.dot(Ms.cross(As));if(je<0||Ue+je>fe)return null;var Ke=-de*As.dot(Ts);return Ke<0?null:this.at(Ke/fe,ae)}},{key:"applyMatrix4",value:function applyMatrix4(X){return this.origin.applyMatrix4(X),this.direction.transformDirection(X),this}},{key:"equals",value:function equals(X){return X.origin.equals(this.origin)&&X.direction.equals(this.direction)}},{key:"clone",value:function clone(){return(new this.constructor).copy(this)}}]),si}(),Ds=function(){function Ae(){_classCallCheck(this,Ae),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}return _createClass(Ae,[{key:"set",value:function set(X,$,ee,ne,ae,de,fe,Ue,je,Ke,et,tt,nt,it,ct,dt){var vt=this.elements;return vt[0]=X,vt[4]=$,vt[8]=ee,vt[12]=ne,vt[1]=ae,vt[5]=de,vt[9]=fe,vt[13]=Ue,vt[2]=je,vt[6]=Ke,vt[10]=et,vt[14]=tt,vt[3]=nt,vt[7]=it,vt[11]=ct,vt[15]=dt,this}},{key:"identity",value:function identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}},{key:"clone",value:function clone(){return(new Ae).fromArray(this.elements)}},{key:"copy",value:function copy(X){var $=this.elements,ee=X.elements;return $[0]=ee[0],$[1]=ee[1],$[2]=ee[2],$[3]=ee[3],$[4]=ee[4],$[5]=ee[5],$[6]=ee[6],$[7]=ee[7],$[8]=ee[8],$[9]=ee[9],$[10]=ee[10],$[11]=ee[11],$[12]=ee[12],$[13]=ee[13],$[14]=ee[14],$[15]=ee[15],this}},{key:"copyPosition",value:function copyPosition(X){var $=this.elements,ee=X.elements;return $[12]=ee[12],$[13]=ee[13],$[14]=ee[14],this}},{key:"setFromMatrix3",value:function setFromMatrix3(X){var $=X.elements;return this.set($[0],$[3],$[6],0,$[1],$[4],$[7],0,$[2],$[5],$[8],0,0,0,0,1),this}},{key:"extractBasis",value:function extractBasis(X,$,ee){return X.setFromMatrixColumn(this,0),$.setFromMatrixColumn(this,1),ee.setFromMatrixColumn(this,2),this}},{key:"makeBasis",value:function makeBasis(X,$,ee){return this.set(X.x,$.x,ee.x,0,X.y,$.y,ee.y,0,X.z,$.z,ee.z,0,0,0,0,1),this}},{key:"extractRotation",value:function extractRotation(X){var $=this.elements,ee=X.elements,ne=1/Ls.setFromMatrixColumn(X,0).length(),ae=1/Ls.setFromMatrixColumn(X,1).length(),de=1/Ls.setFromMatrixColumn(X,2).length();return $[0]=ee[0]*ne,$[1]=ee[1]*ne,$[2]=ee[2]*ne,$[3]=0,$[4]=ee[4]*ae,$[5]=ee[5]*ae,$[6]=ee[6]*ae,$[7]=0,$[8]=ee[8]*de,$[9]=ee[9]*de,$[10]=ee[10]*de,$[11]=0,$[12]=0,$[13]=0,$[14]=0,$[15]=1,this}},{key:"makeRotationFromEuler",value:function makeRotationFromEuler(X){X&&X.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var $=this.elements,ee=X.x,ne=X.y,ae=X.z,de=Math.cos(ee),fe=Math.sin(ee),Ue=Math.cos(ne),je=Math.sin(ne),Ke=Math.cos(ae),et=Math.sin(ae);if("XYZ"===X.order){var tt=de*Ke,nt=de*et,it=fe*Ke,ct=fe*et;$[0]=Ue*Ke,$[4]=-Ue*et,$[8]=je,$[1]=nt+it*je,$[5]=tt-ct*je,$[9]=-fe*Ue,$[2]=ct-tt*je,$[6]=it+nt*je,$[10]=de*Ue}else if("YXZ"===X.order){var dt=Ue*Ke,vt=Ue*et,gt=je*Ke,yt=je*et;$[0]=dt+yt*fe,$[4]=gt*fe-vt,$[8]=de*je,$[1]=de*et,$[5]=de*Ke,$[9]=-fe,$[2]=vt*fe-gt,$[6]=yt+dt*fe,$[10]=de*Ue}else if("ZXY"===X.order){var _t=Ue*Ke,wt=Ue*et,St=je*Ke,Ct=je*et;$[0]=_t-Ct*fe,$[4]=-de*et,$[8]=St+wt*fe,$[1]=wt+St*fe,$[5]=de*Ke,$[9]=Ct-_t*fe,$[2]=-de*je,$[6]=fe,$[10]=de*Ue}else if("ZYX"===X.order){var At=de*Ke,Et=de*et,Rt=fe*Ke,Bt=fe*et;$[0]=Ue*Ke,$[4]=Rt*je-Et,$[8]=At*je+Bt,$[1]=Ue*et,$[5]=Bt*je+At,$[9]=Et*je-Rt,$[2]=-je,$[6]=fe*Ue,$[10]=de*Ue}else if("YZX"===X.order){var Ht=de*Ue,Wt=de*je,qt=fe*Ue,Zt=fe*je;$[0]=Ue*Ke,$[4]=Zt-Ht*et,$[8]=qt*et+Wt,$[1]=et,$[5]=de*Ke,$[9]=-fe*Ke,$[2]=-je*Ke,$[6]=Wt*et+qt,$[10]=Ht-Zt*et}else if("XZY"===X.order){var Xt=de*Ue,Qt=de*je,en=fe*Ue,tn=fe*je;$[0]=Ue*Ke,$[4]=-et,$[8]=je*Ke,$[1]=Xt*et+tn,$[5]=de*Ke,$[9]=Qt*et-en,$[2]=en*et-Qt,$[6]=fe*Ke,$[10]=tn*et+Xt}return $[3]=0,$[7]=0,$[11]=0,$[12]=0,$[13]=0,$[14]=0,$[15]=1,this}},{key:"makeRotationFromQuaternion",value:function makeRotationFromQuaternion(X){return this.compose(Bs,X,Ns)}},{key:"lookAt",value:function lookAt(X,$,ee){var ne=this.elements;return Js.subVectors(X,$),0===Js.lengthSq()&&(Js.z=1),Js.normalize(),js.crossVectors(ee,Js),0===js.lengthSq()&&(1===Math.abs(ee.z)?Js.x+=1e-4:Js.z+=1e-4,Js.normalize(),js.crossVectors(ee,Js)),js.normalize(),Ys.crossVectors(Js,js),ne[0]=js.x,ne[4]=Ys.x,ne[8]=Js.x,ne[1]=js.y,ne[5]=Ys.y,ne[9]=Js.y,ne[2]=js.z,ne[6]=Ys.z,ne[10]=Js.z,this}},{key:"multiply",value:function multiply(X,$){return void 0!==$?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(X,$)):this.multiplyMatrices(this,X)}},{key:"premultiply",value:function premultiply(X){return this.multiplyMatrices(X,this)}},{key:"multiplyMatrices",value:function multiplyMatrices(X,$){var ee=X.elements,ne=$.elements,ae=this.elements,de=ee[0],fe=ee[4],Ue=ee[8],je=ee[12],Ke=ee[1],et=ee[5],tt=ee[9],nt=ee[13],it=ee[2],ct=ee[6],dt=ee[10],vt=ee[14],gt=ee[3],yt=ee[7],_t=ee[11],wt=ee[15],St=ne[0],Ct=ne[4],At=ne[8],Et=ne[12],Rt=ne[1],Bt=ne[5],Ht=ne[9],Wt=ne[13],qt=ne[2],Zt=ne[6],Xt=ne[10],Qt=ne[14],en=ne[3],tn=ne[7],un=ne[11],hn=ne[15];return ae[0]=de*St+fe*Rt+Ue*qt+je*en,ae[4]=de*Ct+fe*Bt+Ue*Zt+je*tn,ae[8]=de*At+fe*Ht+Ue*Xt+je*un,ae[12]=de*Et+fe*Wt+Ue*Qt+je*hn,ae[1]=Ke*St+et*Rt+tt*qt+nt*en,ae[5]=Ke*Ct+et*Bt+tt*Zt+nt*tn,ae[9]=Ke*At+et*Ht+tt*Xt+nt*un,ae[13]=Ke*Et+et*Wt+tt*Qt+nt*hn,ae[2]=it*St+ct*Rt+dt*qt+vt*en,ae[6]=it*Ct+ct*Bt+dt*Zt+vt*tn,ae[10]=it*At+ct*Ht+dt*Xt+vt*un,ae[14]=it*Et+ct*Wt+dt*Qt+vt*hn,ae[3]=gt*St+yt*Rt+_t*qt+wt*en,ae[7]=gt*Ct+yt*Bt+_t*Zt+wt*tn,ae[11]=gt*At+yt*Ht+_t*Xt+wt*un,ae[15]=gt*Et+yt*Wt+_t*Qt+wt*hn,this}},{key:"multiplyScalar",value:function multiplyScalar(X){var $=this.elements;return $[0]*=X,$[4]*=X,$[8]*=X,$[12]*=X,$[1]*=X,$[5]*=X,$[9]*=X,$[13]*=X,$[2]*=X,$[6]*=X,$[10]*=X,$[14]*=X,$[3]*=X,$[7]*=X,$[11]*=X,$[15]*=X,this}},{key:"determinant",value:function determinant(){var X=this.elements,$=X[0],ee=X[4],ne=X[8],ae=X[12],de=X[1],fe=X[5],Ue=X[9],je=X[13],Ke=X[2],et=X[6],tt=X[10],nt=X[14];return X[3]*(+ae*Ue*et-ne*je*et-ae*fe*tt+ee*je*tt+ne*fe*nt-ee*Ue*nt)+X[7]*(+$*Ue*nt-$*je*tt+ae*de*tt-ne*de*nt+ne*je*Ke-ae*Ue*Ke)+X[11]*(+$*je*et-$*fe*nt-ae*de*et+ee*de*nt+ae*fe*Ke-ee*je*Ke)+X[15]*(-ne*fe*Ke-$*Ue*et+$*fe*tt+ne*de*et-ee*de*tt+ee*Ue*Ke)}},{key:"transpose",value:function transpose(){var X,$=this.elements;return X=$[1],$[1]=$[4],$[4]=X,X=$[2],$[2]=$[8],$[8]=X,X=$[6],$[6]=$[9],$[9]=X,X=$[3],$[3]=$[12],$[12]=X,X=$[7],$[7]=$[13],$[13]=X,X=$[11],$[11]=$[14],$[14]=X,this}},{key:"setPosition",value:function setPosition(X,$,ee){var ne=this.elements;return X.isVector3?(ne[12]=X.x,ne[13]=X.y,ne[14]=X.z):(ne[12]=X,ne[13]=$,ne[14]=ee),this}},{key:"invert",value:function invert(){var X=this.elements,$=X[0],ee=X[1],ne=X[2],ae=X[3],de=X[4],fe=X[5],Ue=X[6],je=X[7],Ke=X[8],et=X[9],tt=X[10],nt=X[11],it=X[12],ct=X[13],dt=X[14],vt=X[15],gt=et*dt*je-ct*tt*je+ct*Ue*nt-fe*dt*nt-et*Ue*vt+fe*tt*vt,yt=it*tt*je-Ke*dt*je-it*Ue*nt+de*dt*nt+Ke*Ue*vt-de*tt*vt,_t=Ke*ct*je-it*et*je+it*fe*nt-de*ct*nt-Ke*fe*vt+de*et*vt,wt=it*et*Ue-Ke*ct*Ue-it*fe*tt+de*ct*tt+Ke*fe*dt-de*et*dt,St=$*gt+ee*yt+ne*_t+ae*wt;if(0===St)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);var Ct=1/St;return X[0]=gt*Ct,X[1]=(ct*tt*ae-et*dt*ae-ct*ne*nt+ee*dt*nt+et*ne*vt-ee*tt*vt)*Ct,X[2]=(fe*dt*ae-ct*Ue*ae+ct*ne*je-ee*dt*je-fe*ne*vt+ee*Ue*vt)*Ct,X[3]=(et*Ue*ae-fe*tt*ae-et*ne*je+ee*tt*je+fe*ne*nt-ee*Ue*nt)*Ct,X[4]=yt*Ct,X[5]=(Ke*dt*ae-it*tt*ae+it*ne*nt-$*dt*nt-Ke*ne*vt+$*tt*vt)*Ct,X[6]=(it*Ue*ae-de*dt*ae-it*ne*je+$*dt*je+de*ne*vt-$*Ue*vt)*Ct,X[7]=(de*tt*ae-Ke*Ue*ae+Ke*ne*je-$*tt*je-de*ne*nt+$*Ue*nt)*Ct,X[8]=_t*Ct,X[9]=(it*et*ae-Ke*ct*ae-it*ee*nt+$*ct*nt+Ke*ee*vt-$*et*vt)*Ct,X[10]=(de*ct*ae-it*fe*ae+it*ee*je-$*ct*je-de*ee*vt+$*fe*vt)*Ct,X[11]=(Ke*fe*ae-de*et*ae-Ke*ee*je+$*et*je+de*ee*nt-$*fe*nt)*Ct,X[12]=wt*Ct,X[13]=(Ke*ct*ne-it*et*ne+it*ee*tt-$*ct*tt-Ke*ee*dt+$*et*dt)*Ct,X[14]=(it*fe*ne-de*ct*ne-it*ee*Ue+$*ct*Ue+de*ee*dt-$*fe*dt)*Ct,X[15]=(de*et*ne-Ke*fe*ne+Ke*ee*Ue-$*et*Ue-de*ee*tt+$*fe*tt)*Ct,this}},{key:"scale",value:function scale(X){var $=this.elements,ee=X.x,ne=X.y,ae=X.z;return $[0]*=ee,$[4]*=ne,$[8]*=ae,$[1]*=ee,$[5]*=ne,$[9]*=ae,$[2]*=ee,$[6]*=ne,$[10]*=ae,$[3]*=ee,$[7]*=ne,$[11]*=ae,this}},{key:"getMaxScaleOnAxis",value:function getMaxScaleOnAxis(){var X=this.elements,$=X[0]*X[0]+X[1]*X[1]+X[2]*X[2],ee=X[4]*X[4]+X[5]*X[5]+X[6]*X[6],ne=X[8]*X[8]+X[9]*X[9]+X[10]*X[10];return Math.sqrt(Math.max($,ee,ne))}},{key:"makeTranslation",value:function makeTranslation(X,$,ee){return this.set(1,0,0,X,0,1,0,$,0,0,1,ee,0,0,0,1),this}},{key:"makeRotationX",value:function makeRotationX(X){var $=Math.cos(X),ee=Math.sin(X);return this.set(1,0,0,0,0,$,-ee,0,0,ee,$,0,0,0,0,1),this}},{key:"makeRotationY",value:function makeRotationY(X){var $=Math.cos(X),ee=Math.sin(X);return this.set($,0,ee,0,0,1,0,0,-ee,0,$,0,0,0,0,1),this}},{key:"makeRotationZ",value:function makeRotationZ(X){var $=Math.cos(X),ee=Math.sin(X);return this.set($,-ee,0,0,ee,$,0,0,0,0,1,0,0,0,0,1),this}},{key:"makeRotationAxis",value:function makeRotationAxis(X,$){var ee=Math.cos($),ne=Math.sin($),ae=1-ee,de=X.x,fe=X.y,Ue=X.z,je=ae*de,Ke=ae*fe;return this.set(je*de+ee,je*fe-ne*Ue,je*Ue+ne*fe,0,je*fe+ne*Ue,Ke*fe+ee,Ke*Ue-ne*de,0,je*Ue-ne*fe,Ke*Ue+ne*de,ae*Ue*Ue+ee,0,0,0,0,1),this}},{key:"makeScale",value:function makeScale(X,$,ee){return this.set(X,0,0,0,0,$,0,0,0,0,ee,0,0,0,0,1),this}},{key:"makeShear",value:function makeShear(X,$,ee,ne,ae,de){return this.set(1,ee,ae,0,X,1,de,0,$,ne,1,0,0,0,0,1),this}},{key:"compose",value:function compose(X,$,ee){var ne=this.elements,ae=$._x,de=$._y,fe=$._z,Ue=$._w,je=ae+ae,Ke=de+de,et=fe+fe,tt=ae*je,nt=ae*Ke,it=ae*et,ct=de*Ke,dt=de*et,vt=fe*et,gt=Ue*je,yt=Ue*Ke,_t=Ue*et,wt=ee.x,St=ee.y,Ct=ee.z;return ne[0]=(1-(ct+vt))*wt,ne[1]=(nt+_t)*wt,ne[2]=(it-yt)*wt,ne[3]=0,ne[4]=(nt-_t)*St,ne[5]=(1-(tt+vt))*St,ne[6]=(dt+gt)*St,ne[7]=0,ne[8]=(it+yt)*Ct,ne[9]=(dt-gt)*Ct,ne[10]=(1-(tt+ct))*Ct,ne[11]=0,ne[12]=X.x,ne[13]=X.y,ne[14]=X.z,ne[15]=1,this}},{key:"decompose",value:function decompose(X,$,ee){var ne=this.elements,ae=Ls.set(ne[0],ne[1],ne[2]).length(),de=Ls.set(ne[4],ne[5],ne[6]).length(),fe=Ls.set(ne[8],ne[9],ne[10]).length();this.determinant()<0&&(ae=-ae),X.x=ne[12],X.y=ne[13],X.z=ne[14],Rs.copy(this);var Ue=1/ae,je=1/de,Ke=1/fe;return Rs.elements[0]*=Ue,Rs.elements[1]*=Ue,Rs.elements[2]*=Ue,Rs.elements[4]*=je,Rs.elements[5]*=je,Rs.elements[6]*=je,Rs.elements[8]*=Ke,Rs.elements[9]*=Ke,Rs.elements[10]*=Ke,$.setFromRotationMatrix(Rs),ee.x=ae,ee.y=de,ee.z=fe,this}},{key:"makePerspective",value:function makePerspective(X,$,ee,ne,ae,de){void 0===de&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var fe=this.elements,Ue=2*ae/($-X),je=2*ae/(ee-ne),Ke=($+X)/($-X),et=(ee+ne)/(ee-ne),tt=-(de+ae)/(de-ae),nt=-2*de*ae/(de-ae);return fe[0]=Ue,fe[4]=0,fe[8]=Ke,fe[12]=0,fe[1]=0,fe[5]=je,fe[9]=et,fe[13]=0,fe[2]=0,fe[6]=0,fe[10]=tt,fe[14]=nt,fe[3]=0,fe[7]=0,fe[11]=-1,fe[15]=0,this}},{key:"makeOrthographic",value:function makeOrthographic(X,$,ee,ne,ae,de){var fe=this.elements,Ue=1/($-X),je=1/(ee-ne),Ke=1/(de-ae),et=($+X)*Ue,tt=(ee+ne)*je,nt=(de+ae)*Ke;return fe[0]=2*Ue,fe[4]=0,fe[8]=0,fe[12]=-et,fe[1]=0,fe[5]=2*je,fe[9]=0,fe[13]=-tt,fe[2]=0,fe[6]=0,fe[10]=-2*Ke,fe[14]=-nt,fe[3]=0,fe[7]=0,fe[11]=0,fe[15]=1,this}},{key:"equals",value:function equals(X){for(var $=this.elements,ee=X.elements,ne=0;ne<16;ne++)if($[ne]!==ee[ne])return!1;return!0}},{key:"fromArray",value:function fromArray(X){for(var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,ee=0;ee<16;ee++)this.elements[ee]=X[ee+$];return this}},{key:"toArray",value:function toArray(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],$=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,ee=this.elements;return X[$]=ee[0],X[$+1]=ee[1],X[$+2]=ee[2],X[$+3]=ee[3],X[$+4]=ee[4],X[$+5]=ee[5],X[$+6]=ee[6],X[$+7]=ee[7],X[$+8]=ee[8],X[$+9]=ee[9],X[$+10]=ee[10],X[$+11]=ee[11],X[$+12]=ee[12],X[$+13]=ee[13],X[$+14]=ee[14],X[$+15]=ee[15],X}}]),Ae}();Ds.prototype.isMatrix4=!0;var Ls=new wo,Rs=new Ds,Bs=new wo(0,0,0),Ns=new wo(1,1,1),js=new wo,Ys=new wo,Js=new wo,Zs=new Ds,Xs=new xo,Qs=function(X){function yn(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,$=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,ne=arguments.length>3&&void 0!==arguments[3]?arguments[3]:yn.DefaultOrder;_classCallCheck(this,yn),this._x=X,this._y=$,this._z=ee,this._order=ne}return _createClass(yn,[{key:"x",get:function get(){return this._x},set:function set(X){this._x=X,this._onChangeCallback()}},{key:"y",get:function get(){return this._y},set:function set(X){this._y=X,this._onChangeCallback()}},{key:"z",get:function get(){return this._z},set:function set(X){this._z=X,this._onChangeCallback()}},{key:"order",get:function get(){return this._order},set:function set(X){this._order=X,this._onChangeCallback()}},{key:"set",value:function set(X,$,ee){var ne=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=X,this._y=$,this._z=ee,this._order=ne,this._onChangeCallback(),this}},{key:"clone",value:function clone(){return new this.constructor(this._x,this._y,this._z,this._order)}},{key:"copy",value:function copy(X){return this._x=X._x,this._y=X._y,this._z=X._z,this._order=X._order,this._onChangeCallback(),this}},{key:"setFromRotationMatrix",value:function setFromRotationMatrix(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,ee=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],ne=X.elements,ae=ne[0],de=ne[4],fe=ne[8],Ue=ne[1],je=ne[5],Ke=ne[9],et=ne[2],tt=ne[6],nt=ne[10];switch($){case"XYZ":this._y=Math.asin(xr(fe,-1,1)),Math.abs(fe)<.9999999?(this._x=Math.atan2(-Ke,nt),this._z=Math.atan2(-de,ae)):(this._x=Math.atan2(tt,je),this._z=0);break;case"YXZ":this._x=Math.asin(-xr(Ke,-1,1)),Math.abs(Ke)<.9999999?(this._y=Math.atan2(fe,nt),this._z=Math.atan2(Ue,je)):(this._y=Math.atan2(-et,ae),this._z=0);break;case"ZXY":this._x=Math.asin(xr(tt,-1,1)),Math.abs(tt)<.9999999?(this._y=Math.atan2(-et,nt),this._z=Math.atan2(-de,je)):(this._y=0,this._z=Math.atan2(Ue,ae));break;case"ZYX":this._y=Math.asin(-xr(et,-1,1)),Math.abs(et)<.9999999?(this._x=Math.atan2(tt,nt),this._z=Math.atan2(Ue,ae)):(this._x=0,this._z=Math.atan2(-de,je));break;case"YZX":this._z=Math.asin(xr(Ue,-1,1)),Math.abs(Ue)<.9999999?(this._x=Math.atan2(-Ke,je),this._y=Math.atan2(-et,ae)):(this._x=0,this._y=Math.atan2(fe,nt));break;case"XZY":this._z=Math.asin(-xr(de,-1,1)),Math.abs(de)<.9999999?(this._x=Math.atan2(tt,je),this._y=Math.atan2(fe,ae)):(this._x=Math.atan2(-Ke,nt),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+$)}return this._order=$,!0===ee&&this._onChangeCallback(),this}},{key:"setFromQuaternion",value:function setFromQuaternion(X,$,ee){return Zs.makeRotationFromQuaternion(X),this.setFromRotationMatrix(Zs,$,ee)}},{key:"setFromVector3",value:function setFromVector3(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(X.x,X.y,X.z,$)}},{key:"reorder",value:function reorder(X){return Xs.setFromEuler(this),this.setFromQuaternion(Xs,X)}},{key:"equals",value:function equals(X){return X._x===this._x&&X._y===this._y&&X._z===this._z&&X._order===this._order}},{key:"fromArray",value:function fromArray(X){return this._x=X[0],this._y=X[1],this._z=X[2],void 0!==X[3]&&(this._order=X[3]),this._onChangeCallback(),this}},{key:"toArray",value:function toArray(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],$=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return X[$]=this._x,X[$+1]=this._y,X[$+2]=this._z,X[$+3]=this._order,X}},{key:"_onChange",value:function _onChange(X){return this._onChangeCallback=X,this}},{key:"_onChangeCallback",value:function _onChangeCallback(){}},{key:Symbol.iterator,value:et().mark((function value(){return et().wrap((function value$(X){for(;;)switch(X.prev=X.next){case 0:return X.next=2,this._x;case 2:return X.next=4,this._y;case 4:return X.next=6,this._z;case 6:return X.next=8,this._order;case 8:case"end":return X.stop()}}),value,this)}))}]),yn}();Qs.prototype.isEuler=!0,Qs.DefaultOrder="XYZ",Qs.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];var Ks=function(){function Yc(){_classCallCheck(this,Yc),this.mask=1}return _createClass(Yc,[{key:"set",value:function set(X){this.mask=(1<<X|0)>>>0}},{key:"enable",value:function enable(X){this.mask|=1<<X|0}},{key:"enableAll",value:function enableAll(){this.mask=-1}},{key:"toggle",value:function toggle(X){this.mask^=1<<X|0}},{key:"disable",value:function disable(X){this.mask&=~(1<<X|0)}},{key:"disableAll",value:function disableAll(){this.mask=0}},{key:"test",value:function test(X){return 0!==(this.mask&X.mask)}},{key:"isEnabled",value:function isEnabled(X){return 0!==(this.mask&(1<<X|0))}}]),Yc}(),$s=0,il=new wo,al=new xo,ll=new Ds,cl=new wo,hl=new wo,gl=new wo,bl=new xo,_l=new wo(1,0,0),kl=new wo(0,1,0),Xl=new wo(0,0,1),tu={type:"added"},nu={type:"removed"},ru=function(X){_inherits(ot,X);var $=_createSuper(ot);function ot(){var X;_classCallCheck(this,ot),X=$.call(this),Object.defineProperty(_assertThisInitialized(X),"id",{value:$s++}),X.uuid=Un(),X.name="",X.type="Object3D",X.parent=null,X.children=[],X.up=ot.DefaultUp.clone();var ee=new wo,ne=new Qs,ae=new xo,de=new wo(1,1,1);return ne._onChange((function s(){ae.setFromEuler(ne,!1)})),ae._onChange((function o(){ne.setFromQuaternion(ae,void 0,!1)})),Object.defineProperties(_assertThisInitialized(X),{position:{configurable:!0,enumerable:!0,value:ee},rotation:{configurable:!0,enumerable:!0,value:ne},quaternion:{configurable:!0,enumerable:!0,value:ae},scale:{configurable:!0,enumerable:!0,value:de},modelViewMatrix:{value:new Ds},normalMatrix:{value:new ga}}),X.matrix=new Ds,X.matrixWorld=new Ds,X.matrixAutoUpdate=ot.DefaultMatrixAutoUpdate,X.matrixWorldNeedsUpdate=!1,X.layers=new Ks,X.visible=!0,X.castShadow=!1,X.receiveShadow=!1,X.frustumCulled=!0,X.renderOrder=0,X.animations=[],X.userData={},X}return _createClass(ot,[{key:"onBeforeRender",value:function onBeforeRender(){}},{key:"onAfterRender",value:function onAfterRender(){}},{key:"applyMatrix4",value:function applyMatrix4(X){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(X),this.matrix.decompose(this.position,this.quaternion,this.scale)}},{key:"applyQuaternion",value:function applyQuaternion(X){return this.quaternion.premultiply(X),this}},{key:"setRotationFromAxisAngle",value:function setRotationFromAxisAngle(X,$){this.quaternion.setFromAxisAngle(X,$)}},{key:"setRotationFromEuler",value:function setRotationFromEuler(X){this.quaternion.setFromEuler(X,!0)}},{key:"setRotationFromMatrix",value:function setRotationFromMatrix(X){this.quaternion.setFromRotationMatrix(X)}},{key:"setRotationFromQuaternion",value:function setRotationFromQuaternion(X){this.quaternion.copy(X)}},{key:"rotateOnAxis",value:function rotateOnAxis(X,$){return al.setFromAxisAngle(X,$),this.quaternion.multiply(al),this}},{key:"rotateOnWorldAxis",value:function rotateOnWorldAxis(X,$){return al.setFromAxisAngle(X,$),this.quaternion.premultiply(al),this}},{key:"rotateX",value:function rotateX(X){return this.rotateOnAxis(_l,X)}},{key:"rotateY",value:function rotateY(X){return this.rotateOnAxis(kl,X)}},{key:"rotateZ",value:function rotateZ(X){return this.rotateOnAxis(Xl,X)}},{key:"translateOnAxis",value:function translateOnAxis(X,$){return il.copy(X).applyQuaternion(this.quaternion),this.position.add(il.multiplyScalar($)),this}},{key:"translateX",value:function translateX(X){return this.translateOnAxis(_l,X)}},{key:"translateY",value:function translateY(X){return this.translateOnAxis(kl,X)}},{key:"translateZ",value:function translateZ(X){return this.translateOnAxis(Xl,X)}},{key:"localToWorld",value:function localToWorld(X){return X.applyMatrix4(this.matrixWorld)}},{key:"worldToLocal",value:function worldToLocal(X){return X.applyMatrix4(ll.copy(this.matrixWorld).invert())}},{key:"lookAt",value:function lookAt(X,$,ee){X.isVector3?cl.copy(X):cl.set(X,$,ee);var ne=this.parent;this.updateWorldMatrix(!0,!1),hl.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ll.lookAt(hl,cl,this.up):ll.lookAt(cl,hl,this.up),this.quaternion.setFromRotationMatrix(ll),ne&&(ll.extractRotation(ne.matrixWorld),al.setFromRotationMatrix(ll),this.quaternion.premultiply(al.invert()))}},{key:"add",value:function add(X){if(arguments.length>1){for(var $=0;$<arguments.length;$++)this.add(arguments[$]);return this}return X===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",X),this):(X&&X.isObject3D?(null!==X.parent&&X.parent.remove(X),X.parent=this,this.children.push(X),X.dispatchEvent(tu)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",X),this)}},{key:"remove",value:function remove(X){if(arguments.length>1){for(var $=0;$<arguments.length;$++)this.remove(arguments[$]);return this}var ee=this.children.indexOf(X);return-1!==ee&&(X.parent=null,this.children.splice(ee,1),X.dispatchEvent(nu)),this}},{key:"removeFromParent",value:function removeFromParent(){var X=this.parent;return null!==X&&X.remove(this),this}},{key:"clear",value:function clear(){for(var X=0;X<this.children.length;X++){var $=this.children[X];$.parent=null,$.dispatchEvent(nu)}return this.children.length=0,this}},{key:"attach",value:function attach(X){return this.updateWorldMatrix(!0,!1),ll.copy(this.matrixWorld).invert(),null!==X.parent&&(X.parent.updateWorldMatrix(!0,!1),ll.multiply(X.parent.matrixWorld)),X.applyMatrix4(ll),this.add(X),X.updateWorldMatrix(!1,!0),this}},{key:"getObjectById",value:function getObjectById(X){return this.getObjectByProperty("id",X)}},{key:"getObjectByName",value:function getObjectByName(X){return this.getObjectByProperty("name",X)}},{key:"getObjectByProperty",value:function getObjectByProperty(X,$){if(this[X]===$)return this;for(var ee=0,ne=this.children.length;ee<ne;ee++){var ae=this.children[ee].getObjectByProperty(X,$);if(void 0!==ae)return ae}}},{key:"getWorldPosition",value:function getWorldPosition(X){return this.updateWorldMatrix(!0,!1),X.setFromMatrixPosition(this.matrixWorld)}},{key:"getWorldQuaternion",value:function getWorldQuaternion(X){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hl,X,gl),X}},{key:"getWorldScale",value:function getWorldScale(X){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hl,bl,X),X}},{key:"getWorldDirection",value:function getWorldDirection(X){this.updateWorldMatrix(!0,!1);var $=this.matrixWorld.elements;return X.set($[8],$[9],$[10]).normalize()}},{key:"raycast",value:function raycast(){}},{key:"traverse",value:function traverse(X){X(this);for(var $=this.children,ee=0,ne=$.length;ee<ne;ee++)$[ee].traverse(X)}},{key:"traverseVisible",value:function traverseVisible(X){if(!1!==this.visible){X(this);for(var $=this.children,ee=0,ne=$.length;ee<ne;ee++)$[ee].traverseVisible(X)}}},{key:"traverseAncestors",value:function traverseAncestors(X){var $=this.parent;null!==$&&(X($),$.traverseAncestors(X))}},{key:"updateMatrix",value:function updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}},{key:"updateMatrixWorld",value:function updateMatrixWorld(X){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||X)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,X=!0);for(var $=this.children,ee=0,ne=$.length;ee<ne;ee++)$[ee].updateMatrixWorld(X)}},{key:"updateWorldMatrix",value:function updateWorldMatrix(X,$){var ee=this.parent;if(!0===X&&null!==ee&&ee.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===$)for(var ne=this.children,ae=0,de=ne.length;ae<de;ae++)ne[ae].updateWorldMatrix(!1,!0)}},{key:"toJSON",value:function toJSON(X){var $=void 0===X||"string"==typeof X,ee={};$&&(X={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},ee.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var ne={};function s($,ee){return void 0===$[ee.uuid]&&($[ee.uuid]=ee.toJSON(X)),ee.uuid}if(ne.uuid=this.uuid,ne.type=this.type,""!==this.name&&(ne.name=this.name),!0===this.castShadow&&(ne.castShadow=!0),!0===this.receiveShadow&&(ne.receiveShadow=!0),!1===this.visible&&(ne.visible=!1),!1===this.frustumCulled&&(ne.frustumCulled=!1),0!==this.renderOrder&&(ne.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(ne.userData=this.userData),ne.layers=this.layers.mask,ne.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(ne.matrixAutoUpdate=!1),this.isInstancedMesh&&(ne.type="InstancedMesh",ne.count=this.count,ne.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(ne.instanceColor=this.instanceColor.toJSON())),this.isScene)this.background&&(this.background.isColor?ne.background=this.background.toJSON():this.background.isTexture&&(ne.background=this.background.toJSON(X).uuid)),this.environment&&this.environment.isTexture&&(ne.environment=this.environment.toJSON(X).uuid);else if(this.isMesh||this.isLine||this.isPoints){ne.geometry=s(X.geometries,this.geometry);var ae=this.geometry.parameters;if(void 0!==ae&&void 0!==ae.shapes){var de=ae.shapes;if(Array.isArray(de))for(var fe=0,Ue=de.length;fe<Ue;fe++){var je=de[fe];s(X.shapes,je)}else s(X.shapes,de)}}if(this.isSkinnedMesh&&(ne.bindMode=this.bindMode,ne.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(s(X.skeletons,this.skeleton),ne.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){for(var Ke=[],et=0,tt=this.material.length;et<tt;et++)Ke.push(s(X.materials,this.material[et]));ne.material=Ke}else ne.material=s(X.materials,this.material);if(this.children.length>0){ne.children=[];for(var nt=0;nt<this.children.length;nt++)ne.children.push(this.children[nt].toJSON(X).object)}if(this.animations.length>0){ne.animations=[];for(var it=0;it<this.animations.length;it++){var ct=this.animations[it];ne.animations.push(s(X.animations,ct))}}if($){var dt=o(X.geometries),vt=o(X.materials),gt=o(X.textures),yt=o(X.images),_t=o(X.shapes),wt=o(X.skeletons),St=o(X.animations),Ct=o(X.nodes);dt.length>0&&(ee.geometries=dt),vt.length>0&&(ee.materials=vt),gt.length>0&&(ee.textures=gt),yt.length>0&&(ee.images=yt),_t.length>0&&(ee.shapes=_t),wt.length>0&&(ee.skeletons=wt),St.length>0&&(ee.animations=St),Ct.length>0&&(ee.nodes=Ct)}return ee.object=ne,ee;function o(X){var $=[];for(var ee in X){var ne=X[ee];delete ne.metadata,$.push(ne)}return $}}},{key:"clone",value:function clone(X){return(new this.constructor).copy(this,X)}},{key:"copy",value:function copy(X){var $=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=X.name,this.up.copy(X.up),this.position.copy(X.position),this.rotation.order=X.rotation.order,this.quaternion.copy(X.quaternion),this.scale.copy(X.scale),this.matrix.copy(X.matrix),this.matrixWorld.copy(X.matrixWorld),this.matrixAutoUpdate=X.matrixAutoUpdate,this.matrixWorldNeedsUpdate=X.matrixWorldNeedsUpdate,this.layers.mask=X.layers.mask,this.visible=X.visible,this.castShadow=X.castShadow,this.receiveShadow=X.receiveShadow,this.frustumCulled=X.frustumCulled,this.renderOrder=X.renderOrder,this.userData=JSON.parse(JSON.stringify(X.userData)),!0===$)for(var ee=0;ee<X.children.length;ee++){var ne=X.children[ee];this.add(ne.clone())}return this}}]),ot}(aa);ru.DefaultUp=new wo(0,1,0),ru.DefaultMatrixAutoUpdate=!0,ru.prototype.isObject3D=!0;var iu=new wo,ou=new wo,su=new wo,cu=new wo,hu=new wo,vu=new wo,gu=new wo,yu=new wo,wu=new wo,Su=new wo,ku=function(){function Jt(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new wo,$=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new wo,ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new wo;_classCallCheck(this,Jt),this.a=X,this.b=$,this.c=ee}return _createClass(Jt,[{key:"set",value:function set(X,$,ee){return this.a.copy(X),this.b.copy($),this.c.copy(ee),this}},{key:"setFromPointsAndIndices",value:function setFromPointsAndIndices(X,$,ee,ne){return this.a.copy(X[$]),this.b.copy(X[ee]),this.c.copy(X[ne]),this}},{key:"setFromAttributeAndIndices",value:function setFromAttributeAndIndices(X,$,ee,ne){return this.a.fromBufferAttribute(X,$),this.b.fromBufferAttribute(X,ee),this.c.fromBufferAttribute(X,ne),this}},{key:"clone",value:function clone(){return(new this.constructor).copy(this)}},{key:"copy",value:function copy(X){return this.a.copy(X.a),this.b.copy(X.b),this.c.copy(X.c),this}},{key:"getArea",value:function getArea(){return iu.subVectors(this.c,this.b),ou.subVectors(this.a,this.b),.5*iu.cross(ou).length()}},{key:"getMidpoint",value:function getMidpoint(X){return X.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}},{key:"getNormal",value:function getNormal(X){return Jt.getNormal(this.a,this.b,this.c,X)}},{key:"getPlane",value:function getPlane(X){return X.setFromCoplanarPoints(this.a,this.b,this.c)}},{key:"getBarycoord",value:function getBarycoord(X,$){return Jt.getBarycoord(X,this.a,this.b,this.c,$)}},{key:"getUV",value:function getUV(X,$,ee,ne,ae){return Jt.getUV(X,this.a,this.b,this.c,$,ee,ne,ae)}},{key:"containsPoint",value:function containsPoint(X){return Jt.containsPoint(X,this.a,this.b,this.c)}},{key:"isFrontFacing",value:function isFrontFacing(X){return Jt.isFrontFacing(this.a,this.b,this.c,X)}},{key:"intersectsBox",value:function intersectsBox(X){return X.intersectsTriangle(this)}},{key:"closestPointToPoint",value:function closestPointToPoint(X,$){var ee,ne,ae=this.a,de=this.b,fe=this.c;hu.subVectors(de,ae),vu.subVectors(fe,ae),yu.subVectors(X,ae);var Ue=hu.dot(yu),je=vu.dot(yu);if(Ue<=0&&je<=0)return $.copy(ae);wu.subVectors(X,de);var Ke=hu.dot(wu),et=vu.dot(wu);if(Ke>=0&&et<=Ke)return $.copy(de);var tt=Ue*et-Ke*je;if(tt<=0&&Ue>=0&&Ke<=0)return ee=Ue/(Ue-Ke),$.copy(ae).addScaledVector(hu,ee);Su.subVectors(X,fe);var nt=hu.dot(Su),it=vu.dot(Su);if(it>=0&&nt<=it)return $.copy(fe);var ct=nt*je-Ue*it;if(ct<=0&&je>=0&&it<=0)return ne=je/(je-it),$.copy(ae).addScaledVector(vu,ne);var dt=Ke*it-nt*et;if(dt<=0&&et-Ke>=0&&nt-it>=0)return gu.subVectors(fe,de),ne=(et-Ke)/(et-Ke+(nt-it)),$.copy(de).addScaledVector(gu,ne);var vt=1/(dt+ct+tt);return ee=ct*vt,ne=tt*vt,$.copy(ae).addScaledVector(hu,ee).addScaledVector(vu,ne)}},{key:"equals",value:function equals(X){return X.a.equals(this.a)&&X.b.equals(this.b)&&X.c.equals(this.c)}}],[{key:"getNormal",value:function getNormal(X,$,ee,ne){ne.subVectors(ee,$),iu.subVectors(X,$),ne.cross(iu);var ae=ne.lengthSq();return ae>0?ne.multiplyScalar(1/Math.sqrt(ae)):ne.set(0,0,0)}},{key:"getBarycoord",value:function getBarycoord(X,$,ee,ne,ae){iu.subVectors(ne,$),ou.subVectors(ee,$),su.subVectors(X,$);var de=iu.dot(iu),fe=iu.dot(ou),Ue=iu.dot(su),je=ou.dot(ou),Ke=ou.dot(su),et=de*je-fe*fe;if(0===et)return ae.set(-2,-1,-1);var tt=1/et,nt=(je*Ue-fe*Ke)*tt,it=(de*Ke-fe*Ue)*tt;return ae.set(1-nt-it,it,nt)}},{key:"containsPoint",value:function containsPoint(X,$,ee,ne){return this.getBarycoord(X,$,ee,ne,cu),cu.x>=0&&cu.y>=0&&cu.x+cu.y<=1}},{key:"getUV",value:function getUV(X,$,ee,ne,ae,de,fe,Ue){return this.getBarycoord(X,$,ee,ne,cu),Ue.set(0,0),Ue.addScaledVector(ae,cu.x),Ue.addScaledVector(de,cu.y),Ue.addScaledVector(fe,cu.z),Ue}},{key:"isFrontFacing",value:function isFrontFacing(X,$,ee,ne){return iu.subVectors(ee,$),ou.subVectors(X,$),iu.cross(ou).dot(ne)<0}}]),Jt}(),Cu=0,Au=function(X){_inherits(ur,X);var $=_createSuper(ur);function ur(){var X;return _classCallCheck(this,ur),X=$.call(this),Object.defineProperty(_assertThisInitialized(X),"id",{value:Cu++}),X.uuid=Un(),X.name="",X.type="Material",X.blending=1,X.side=0,X.vertexColors=!1,X.opacity=1,X.transparent=!1,X.blendSrc=204,X.blendDst=205,X.blendEquation=Qt,X.blendSrcAlpha=null,X.blendDstAlpha=null,X.blendEquationAlpha=null,X.depthFunc=3,X.depthTest=!0,X.depthWrite=!0,X.stencilWriteMask=255,X.stencilFunc=519,X.stencilRef=0,X.stencilFuncMask=255,X.stencilFail=Ei,X.stencilZFail=Ei,X.stencilZPass=Ei,X.stencilWrite=!1,X.clippingPlanes=null,X.clipIntersection=!1,X.clipShadows=!1,X.shadowSide=null,X.colorWrite=!0,X.precision=null,X.polygonOffset=!1,X.polygonOffsetFactor=0,X.polygonOffsetUnits=0,X.dithering=!1,X.alphaToCoverage=!1,X.premultipliedAlpha=!1,X.visible=!0,X.toneMapped=!0,X.userData={},X.version=0,X._alphaTest=0,X}return _createClass(ur,[{key:"alphaTest",get:function get(){return this._alphaTest},set:function set(X){this._alphaTest>0!=X>0&&this.version++,this._alphaTest=X}},{key:"onBuild",value:function onBuild(){}},{key:"onBeforeRender",value:function onBeforeRender(){}},{key:"onBeforeCompile",value:function onBeforeCompile(){}},{key:"customProgramCacheKey",value:function customProgramCacheKey(){return this.onBeforeCompile.toString()}},{key:"setValues",value:function setValues(X){if(void 0!==X)for(var $ in X){var ee=X[$];if(void 0!==ee)if("shading"!==$){var ne=this[$];void 0!==ne?ne&&ne.isColor?ne.set(ee):ne&&ne.isVector3&&ee&&ee.isVector3?ne.copy(ee):this[$]=ee:console.warn("THREE."+this.type+": '"+$+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===ee;else console.warn("THREE.Material: '"+$+"' parameter is undefined.")}}},{key:"toJSON",value:function toJSON(X){var $=void 0===X||"string"==typeof X;$&&(X={textures:{},images:{}});var ee={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function n(X){var $=[];for(var ee in X){var ne=X[ee];delete ne.metadata,$.push(ne)}return $}if(ee.uuid=this.uuid,ee.type=this.type,""!==this.name&&(ee.name=this.name),this.color&&this.color.isColor&&(ee.color=this.color.getHex()),void 0!==this.roughness&&(ee.roughness=this.roughness),void 0!==this.metalness&&(ee.metalness=this.metalness),void 0!==this.sheen&&(ee.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(ee.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(ee.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(ee.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(ee.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(ee.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(ee.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(ee.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(ee.shininess=this.shininess),void 0!==this.clearcoat&&(ee.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(ee.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(ee.clearcoatMap=this.clearcoatMap.toJSON(X).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(ee.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(X).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(ee.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(X).uuid,ee.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(ee.map=this.map.toJSON(X).uuid),this.matcap&&this.matcap.isTexture&&(ee.matcap=this.matcap.toJSON(X).uuid),this.alphaMap&&this.alphaMap.isTexture&&(ee.alphaMap=this.alphaMap.toJSON(X).uuid),this.lightMap&&this.lightMap.isTexture&&(ee.lightMap=this.lightMap.toJSON(X).uuid,ee.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(ee.aoMap=this.aoMap.toJSON(X).uuid,ee.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(ee.bumpMap=this.bumpMap.toJSON(X).uuid,ee.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(ee.normalMap=this.normalMap.toJSON(X).uuid,ee.normalMapType=this.normalMapType,ee.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(ee.displacementMap=this.displacementMap.toJSON(X).uuid,ee.displacementScale=this.displacementScale,ee.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(ee.roughnessMap=this.roughnessMap.toJSON(X).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(ee.metalnessMap=this.metalnessMap.toJSON(X).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(ee.emissiveMap=this.emissiveMap.toJSON(X).uuid),this.specularMap&&this.specularMap.isTexture&&(ee.specularMap=this.specularMap.toJSON(X).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(ee.specularIntensityMap=this.specularIntensityMap.toJSON(X).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(ee.specularColorMap=this.specularColorMap.toJSON(X).uuid),this.envMap&&this.envMap.isTexture&&(ee.envMap=this.envMap.toJSON(X).uuid,void 0!==this.combine&&(ee.combine=this.combine)),void 0!==this.envMapIntensity&&(ee.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(ee.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(ee.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(ee.gradientMap=this.gradientMap.toJSON(X).uuid),void 0!==this.transmission&&(ee.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(ee.transmissionMap=this.transmissionMap.toJSON(X).uuid),void 0!==this.thickness&&(ee.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(ee.thicknessMap=this.thicknessMap.toJSON(X).uuid),void 0!==this.attenuationDistance&&(ee.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(ee.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(ee.size=this.size),null!==this.shadowSide&&(ee.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(ee.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(ee.blending=this.blending),0!==this.side&&(ee.side=this.side),this.vertexColors&&(ee.vertexColors=!0),this.opacity<1&&(ee.opacity=this.opacity),!0===this.transparent&&(ee.transparent=this.transparent),ee.depthFunc=this.depthFunc,ee.depthTest=this.depthTest,ee.depthWrite=this.depthWrite,ee.colorWrite=this.colorWrite,ee.stencilWrite=this.stencilWrite,ee.stencilWriteMask=this.stencilWriteMask,ee.stencilFunc=this.stencilFunc,ee.stencilRef=this.stencilRef,ee.stencilFuncMask=this.stencilFuncMask,ee.stencilFail=this.stencilFail,ee.stencilZFail=this.stencilZFail,ee.stencilZPass=this.stencilZPass,void 0!==this.rotation&&0!==this.rotation&&(ee.rotation=this.rotation),!0===this.polygonOffset&&(ee.polygonOffset=!0),0!==this.polygonOffsetFactor&&(ee.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(ee.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(ee.linewidth=this.linewidth),void 0!==this.dashSize&&(ee.dashSize=this.dashSize),void 0!==this.gapSize&&(ee.gapSize=this.gapSize),void 0!==this.scale&&(ee.scale=this.scale),!0===this.dithering&&(ee.dithering=!0),this.alphaTest>0&&(ee.alphaTest=this.alphaTest),!0===this.alphaToCoverage&&(ee.alphaToCoverage=this.alphaToCoverage),!0===this.premultipliedAlpha&&(ee.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(ee.wireframe=this.wireframe),this.wireframeLinewidth>1&&(ee.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(ee.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(ee.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(ee.flatShading=this.flatShading),!1===this.visible&&(ee.visible=!1),!1===this.toneMapped&&(ee.toneMapped=!1),!1===this.fog&&(ee.fog=!1),"{}"!==JSON.stringify(this.userData)&&(ee.userData=this.userData),$){var ne=n(X.textures),ae=n(X.images);ne.length>0&&(ee.textures=ne),ae.length>0&&(ee.images=ae)}return ee}},{key:"clone",value:function clone(){return(new this.constructor).copy(this)}},{key:"copy",value:function copy(X){this.name=X.name,this.blending=X.blending,this.side=X.side,this.vertexColors=X.vertexColors,this.opacity=X.opacity,this.transparent=X.transparent,this.blendSrc=X.blendSrc,this.blendDst=X.blendDst,this.blendEquation=X.blendEquation,this.blendSrcAlpha=X.blendSrcAlpha,this.blendDstAlpha=X.blendDstAlpha,this.blendEquationAlpha=X.blendEquationAlpha,this.depthFunc=X.depthFunc,this.depthTest=X.depthTest,this.depthWrite=X.depthWrite,this.stencilWriteMask=X.stencilWriteMask,this.stencilFunc=X.stencilFunc,this.stencilRef=X.stencilRef,this.stencilFuncMask=X.stencilFuncMask,this.stencilFail=X.stencilFail,this.stencilZFail=X.stencilZFail,this.stencilZPass=X.stencilZPass,this.stencilWrite=X.stencilWrite;var $=X.clippingPlanes,ee=null;if(null!==$){var ne=$.length;ee=new Array(ne);for(var ae=0;ae!==ne;++ae)ee[ae]=$[ae].clone()}return this.clippingPlanes=ee,this.clipIntersection=X.clipIntersection,this.clipShadows=X.clipShadows,this.shadowSide=X.shadowSide,this.colorWrite=X.colorWrite,this.precision=X.precision,this.polygonOffset=X.polygonOffset,this.polygonOffsetFactor=X.polygonOffsetFactor,this.polygonOffsetUnits=X.polygonOffsetUnits,this.dithering=X.dithering,this.alphaTest=X.alphaTest,this.alphaToCoverage=X.alphaToCoverage,this.premultipliedAlpha=X.premultipliedAlpha,this.visible=X.visible,this.toneMapped=X.toneMapped,this.userData=JSON.parse(JSON.stringify(X.userData)),this}},{key:"dispose",value:function dispose(){this.dispatchEvent({type:"dispose"})}},{key:"needsUpdate",set:function set(X){!0===X&&this.version++}}]),ur}(aa);Au.prototype.isMaterial=!0,Au.fromType=function(){return null};var Mu=function(X){_inherits(zn,X);var $=_createSuper(zn);function zn(X){var ee;return _classCallCheck(this,zn),(ee=$.call(this)).type="MeshBasicMaterial",ee.color=new Ma(16777215),ee.map=null,ee.lightMap=null,ee.lightMapIntensity=1,ee.aoMap=null,ee.aoMapIntensity=1,ee.specularMap=null,ee.alphaMap=null,ee.envMap=null,ee.combine=0,ee.reflectivity=1,ee.refractionRatio=.98,ee.wireframe=!1,ee.wireframeLinewidth=1,ee.wireframeLinecap="round",ee.wireframeLinejoin="round",ee.fog=!0,ee.setValues(X),ee}return _createClass(zn,[{key:"copy",value:function copy(X){return _get(_getPrototypeOf(zn.prototype),"copy",this).call(this,X),this.color.copy(X.color),this.map=X.map,this.lightMap=X.lightMap,this.lightMapIntensity=X.lightMapIntensity,this.aoMap=X.aoMap,this.aoMapIntensity=X.aoMapIntensity,this.specularMap=X.specularMap,this.alphaMap=X.alphaMap,this.envMap=X.envMap,this.combine=X.combine,this.reflectivity=X.reflectivity,this.refractionRatio=X.refractionRatio,this.wireframe=X.wireframe,this.wireframeLinewidth=X.wireframeLinewidth,this.wireframeLinecap=X.wireframeLinecap,this.wireframeLinejoin=X.wireframeLinejoin,this.fog=X.fog,this}}]),zn}(Au);Mu.prototype.isMeshBasicMaterial=!0;var Tu=new wo,Pu=new va,Lu=function(){function Ve(X,$,ee){if(_classCallCheck(this,Ve),Array.isArray(X))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=X,this.itemSize=$,this.count=void 0!==X?X.length/$:0,this.normalized=!0===ee,this.usage=Di,this.updateRange={offset:0,count:-1},this.version=0}return _createClass(Ve,[{key:"onUploadCallback",value:function onUploadCallback(){}},{key:"needsUpdate",set:function set(X){!0===X&&this.version++}},{key:"setUsage",value:function setUsage(X){return this.usage=X,this}},{key:"copy",value:function copy(X){return this.name=X.name,this.array=new X.array.constructor(X.array),this.itemSize=X.itemSize,this.count=X.count,this.normalized=X.normalized,this.usage=X.usage,this}},{key:"copyAt",value:function copyAt(X,$,ee){X*=this.itemSize,ee*=$.itemSize;for(var ne=0,ae=this.itemSize;ne<ae;ne++)this.array[X+ne]=$.array[ee+ne];return this}},{key:"copyArray",value:function copyArray(X){return this.array.set(X),this}},{key:"copyColorsArray",value:function copyColorsArray(X){for(var $=this.array,ee=0,ne=0,ae=X.length;ne<ae;ne++){var de=X[ne];void 0===de&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",ne),de=new Ma),$[ee++]=de.r,$[ee++]=de.g,$[ee++]=de.b}return this}},{key:"copyVector2sArray",value:function copyVector2sArray(X){for(var $=this.array,ee=0,ne=0,ae=X.length;ne<ae;ne++){var de=X[ne];void 0===de&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",ne),de=new va),$[ee++]=de.x,$[ee++]=de.y}return this}},{key:"copyVector3sArray",value:function copyVector3sArray(X){for(var $=this.array,ee=0,ne=0,ae=X.length;ne<ae;ne++){var de=X[ne];void 0===de&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",ne),de=new wo),$[ee++]=de.x,$[ee++]=de.y,$[ee++]=de.z}return this}},{key:"copyVector4sArray",value:function copyVector4sArray(X){for(var $=this.array,ee=0,ne=0,ae=X.length;ne<ae;ne++){var de=X[ne];void 0===de&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",ne),de=new to),$[ee++]=de.x,$[ee++]=de.y,$[ee++]=de.z,$[ee++]=de.w}return this}},{key:"applyMatrix3",value:function applyMatrix3(X){if(2===this.itemSize)for(var $=0,ee=this.count;$<ee;$++)Pu.fromBufferAttribute(this,$),Pu.applyMatrix3(X),this.setXY($,Pu.x,Pu.y);else if(3===this.itemSize)for(var ne=0,ae=this.count;ne<ae;ne++)Tu.fromBufferAttribute(this,ne),Tu.applyMatrix3(X),this.setXYZ(ne,Tu.x,Tu.y,Tu.z);return this}},{key:"applyMatrix4",value:function applyMatrix4(X){for(var $=0,ee=this.count;$<ee;$++)Tu.fromBufferAttribute(this,$),Tu.applyMatrix4(X),this.setXYZ($,Tu.x,Tu.y,Tu.z);return this}},{key:"applyNormalMatrix",value:function applyNormalMatrix(X){for(var $=0,ee=this.count;$<ee;$++)Tu.fromBufferAttribute(this,$),Tu.applyNormalMatrix(X),this.setXYZ($,Tu.x,Tu.y,Tu.z);return this}},{key:"transformDirection",value:function transformDirection(X){for(var $=0,ee=this.count;$<ee;$++)Tu.fromBufferAttribute(this,$),Tu.transformDirection(X),this.setXYZ($,Tu.x,Tu.y,Tu.z);return this}},{key:"set",value:function set(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(X,$),this}},{key:"getX",value:function getX(X){return this.array[X*this.itemSize]}},{key:"setX",value:function setX(X,$){return this.array[X*this.itemSize]=$,this}},{key:"getY",value:function getY(X){return this.array[X*this.itemSize+1]}},{key:"setY",value:function setY(X,$){return this.array[X*this.itemSize+1]=$,this}},{key:"getZ",value:function getZ(X){return this.array[X*this.itemSize+2]}},{key:"setZ",value:function setZ(X,$){return this.array[X*this.itemSize+2]=$,this}},{key:"getW",value:function getW(X){return this.array[X*this.itemSize+3]}},{key:"setW",value:function setW(X,$){return this.array[X*this.itemSize+3]=$,this}},{key:"setXY",value:function setXY(X,$,ee){return X*=this.itemSize,this.array[X+0]=$,this.array[X+1]=ee,this}},{key:"setXYZ",value:function setXYZ(X,$,ee,ne){return X*=this.itemSize,this.array[X+0]=$,this.array[X+1]=ee,this.array[X+2]=ne,this}},{key:"setXYZW",value:function setXYZW(X,$,ee,ne,ae){return X*=this.itemSize,this.array[X+0]=$,this.array[X+1]=ee,this.array[X+2]=ne,this.array[X+3]=ae,this}},{key:"onUpload",value:function onUpload(X){return this.onUploadCallback=X,this}},{key:"clone",value:function clone(){return new this.constructor(this.array,this.itemSize).copy(this)}},{key:"toJSON",value:function toJSON(){var X={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized};return""!==this.name&&(X.name=this.name),this.usage!==Di&&(X.usage=this.usage),(0!==this.updateRange.offset||-1!==this.updateRange.count)&&(X.updateRange=this.updateRange),X}}]),Ve}();Lu.prototype.isBufferAttribute=!0;var Ou=function(X){_inherits(yf,X);var $=_createSuper(yf);function yf(X,ee,ne){return _classCallCheck(this,yf),$.call(this,new Uint16Array(X),ee,ne)}return _createClass(yf)}(Lu),Ru=function(X){_inherits(Os,X);var $=_createSuper(Os);function Os(X,ee,ne){return _classCallCheck(this,Os),$.call(this,new Uint32Array(X),ee,ne)}return _createClass(Os)}(Lu),Bu=function(X){_inherits(hg,X);var $=_createSuper(hg);function hg(X,ee,ne){return _classCallCheck(this,hg),$.call(this,new Uint16Array(X),ee,ne)}return _createClass(hg)}(Lu);Bu.prototype.isFloat16BufferAttribute=!0;var Iu=function(X){_inherits(Ce,X);var $=_createSuper(Ce);function Ce(X,ee,ne){return _classCallCheck(this,Ce),$.call(this,new Float32Array(X),ee,ne)}return _createClass(Ce)}(Lu),zu=0,Nu=new Ds,Fu=new ru,Uu=new wo,Vu=new Mo,Hu=new Mo,Gu=new wo,Wu=function(X){_inherits(Le,X);var $=_createSuper(Le);function Le(){var X;return _classCallCheck(this,Le),X=$.call(this),Object.defineProperty(_assertThisInitialized(X),"id",{value:zu++}),X.uuid=Un(),X.name="",X.type="BufferGeometry",X.index=null,X.attributes={},X.morphAttributes={},X.morphTargetsRelative=!1,X.groups=[],X.boundingBox=null,X.boundingSphere=null,X.drawRange={start:0,count:1/0},X.userData={},X}return _createClass(Le,[{key:"getIndex",value:function getIndex(){return this.index}},{key:"setIndex",value:function setIndex(X){return Array.isArray(X)?this.index=new(vb(X)?Ru:Ou)(X,1):this.index=X,this}},{key:"getAttribute",value:function getAttribute(X){return this.attributes[X]}},{key:"setAttribute",value:function setAttribute(X,$){return this.attributes[X]=$,this}},{key:"deleteAttribute",value:function deleteAttribute(X){return delete this.attributes[X],this}},{key:"hasAttribute",value:function hasAttribute(X){return void 0!==this.attributes[X]}},{key:"addGroup",value:function addGroup(X,$){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:X,count:$,materialIndex:ee})}},{key:"clearGroups",value:function clearGroups(){this.groups=[]}},{key:"setDrawRange",value:function setDrawRange(X,$){this.drawRange.start=X,this.drawRange.count=$}},{key:"applyMatrix4",value:function applyMatrix4(X){var $=this.attributes.position;void 0!==$&&($.applyMatrix4(X),$.needsUpdate=!0);var ee=this.attributes.normal;if(void 0!==ee){var ne=(new ga).getNormalMatrix(X);ee.applyNormalMatrix(ne),ee.needsUpdate=!0}var ae=this.attributes.tangent;return void 0!==ae&&(ae.transformDirection(X),ae.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}},{key:"applyQuaternion",value:function applyQuaternion(X){return Nu.makeRotationFromQuaternion(X),this.applyMatrix4(Nu),this}},{key:"rotateX",value:function rotateX(X){return Nu.makeRotationX(X),this.applyMatrix4(Nu),this}},{key:"rotateY",value:function rotateY(X){return Nu.makeRotationY(X),this.applyMatrix4(Nu),this}},{key:"rotateZ",value:function rotateZ(X){return Nu.makeRotationZ(X),this.applyMatrix4(Nu),this}},{key:"translate",value:function translate(X,$,ee){return Nu.makeTranslation(X,$,ee),this.applyMatrix4(Nu),this}},{key:"scale",value:function scale(X,$,ee){return Nu.makeScale(X,$,ee),this.applyMatrix4(Nu),this}},{key:"lookAt",value:function lookAt(X){return Fu.lookAt(X),Fu.updateMatrix(),this.applyMatrix4(Fu.matrix),this}},{key:"center",value:function center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Uu).negate(),this.translate(Uu.x,Uu.y,Uu.z),this}},{key:"setFromPoints",value:function setFromPoints(X){for(var $=[],ee=0,ne=X.length;ee<ne;ee++){var ae=X[ee];$.push(ae.x,ae.y,ae.z||0)}return this.setAttribute("position",new Iu($,3)),this}},{key:"computeBoundingBox",value:function computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Mo);var X=this.attributes.position,$=this.morphAttributes.position;if(X&&X.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new wo(-1/0,-1/0,-1/0),new wo(1/0,1/0,1/0));if(void 0!==X){if(this.boundingBox.setFromBufferAttribute(X),$)for(var ee=0,ne=$.length;ee<ne;ee++){var ae=$[ee];Vu.setFromBufferAttribute(ae),this.morphTargetsRelative?(Gu.addVectors(this.boundingBox.min,Vu.min),this.boundingBox.expandByPoint(Gu),Gu.addVectors(this.boundingBox.max,Vu.max),this.boundingBox.expandByPoint(Gu)):(this.boundingBox.expandByPoint(Vu.min),this.boundingBox.expandByPoint(Vu.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}},{key:"computeBoundingSphere",value:function computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new _s);var X=this.attributes.position,$=this.morphAttributes.position;if(X&&X.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new wo,1/0);if(X){var ee=this.boundingSphere.center;if(Vu.setFromBufferAttribute(X),$)for(var ne=0,ae=$.length;ne<ae;ne++){var de=$[ne];Hu.setFromBufferAttribute(de),this.morphTargetsRelative?(Gu.addVectors(Vu.min,Hu.min),Vu.expandByPoint(Gu),Gu.addVectors(Vu.max,Hu.max),Vu.expandByPoint(Gu)):(Vu.expandByPoint(Hu.min),Vu.expandByPoint(Hu.max))}Vu.getCenter(ee);for(var fe=0,Ue=0,je=X.count;Ue<je;Ue++)Gu.fromBufferAttribute(X,Ue),fe=Math.max(fe,ee.distanceToSquared(Gu));if($)for(var Ke=0,et=$.length;Ke<et;Ke++)for(var tt=$[Ke],nt=this.morphTargetsRelative,it=0,ct=tt.count;it<ct;it++)Gu.fromBufferAttribute(tt,it),nt&&(Uu.fromBufferAttribute(X,it),Gu.add(Uu)),fe=Math.max(fe,ee.distanceToSquared(Gu));this.boundingSphere.radius=Math.sqrt(fe),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}},{key:"computeTangents",value:function computeTangents(){var X=this.index,$=this.attributes;if(null!==X&&void 0!==$.position&&void 0!==$.normal&&void 0!==$.uv){var ee=X.array,ne=$.position.array,ae=$.normal.array,de=$.uv.array,fe=ne.length/3;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Lu(new Float32Array(4*fe),4));for(var Ue=this.getAttribute("tangent").array,je=[],Ke=[],et=0;et<fe;et++)je[et]=new wo,Ke[et]=new wo;var tt=new wo,nt=new wo,it=new wo,ct=new va,dt=new va,vt=new va,gt=new wo,yt=new wo,_t=this.groups;0===_t.length&&(_t=[{start:0,count:ee.length}]);for(var wt=0,St=_t.length;wt<St;++wt)for(var Ct=_t[wt],At=Ct.start,Et=At,Rt=At+Ct.count;Et<Rt;Et+=3)w(ee[Et+0],ee[Et+1],ee[Et+2]);for(var Bt=new wo,Ht=new wo,Wt=new wo,qt=new wo,Zt=0,Xt=_t.length;Zt<Xt;++Zt)for(var Qt=_t[Zt],en=Qt.start,tn=en,un=en+Qt.count;tn<un;tn+=3)E(ee[tn+0]),E(ee[tn+1]),E(ee[tn+2])}else console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function w(X,$,ee){tt.fromArray(ne,3*X),nt.fromArray(ne,3*$),it.fromArray(ne,3*ee),ct.fromArray(de,2*X),dt.fromArray(de,2*$),vt.fromArray(de,2*ee),nt.sub(tt),it.sub(tt),dt.sub(ct),vt.sub(ct);var ae=1/(dt.x*vt.y-vt.x*dt.y);!isFinite(ae)||(gt.copy(nt).multiplyScalar(vt.y).addScaledVector(it,-dt.y).multiplyScalar(ae),yt.copy(it).multiplyScalar(dt.x).addScaledVector(nt,-vt.x).multiplyScalar(ae),je[X].add(gt),je[$].add(gt),je[ee].add(gt),Ke[X].add(yt),Ke[$].add(yt),Ke[ee].add(yt))}function E(X){Wt.fromArray(ae,3*X),qt.copy(Wt);var $=je[X];Bt.copy($),Bt.sub(Wt.multiplyScalar(Wt.dot($))).normalize(),Ht.crossVectors(qt,$);var ee=Ht.dot(Ke[X])<0?-1:1;Ue[4*X]=Bt.x,Ue[4*X+1]=Bt.y,Ue[4*X+2]=Bt.z,Ue[4*X+3]=ee}}},{key:"computeVertexNormals",value:function computeVertexNormals(){var X=this.index,$=this.getAttribute("position");if(void 0!==$){var ee=this.getAttribute("normal");if(void 0===ee)ee=new Lu(new Float32Array(3*$.count),3),this.setAttribute("normal",ee);else for(var ne=0,ae=ee.count;ne<ae;ne++)ee.setXYZ(ne,0,0,0);var de=new wo,fe=new wo,Ue=new wo,je=new wo,Ke=new wo,et=new wo,tt=new wo,nt=new wo;if(X)for(var it=0,ct=X.count;it<ct;it+=3){var dt=X.getX(it+0),vt=X.getX(it+1),gt=X.getX(it+2);de.fromBufferAttribute($,dt),fe.fromBufferAttribute($,vt),Ue.fromBufferAttribute($,gt),tt.subVectors(Ue,fe),nt.subVectors(de,fe),tt.cross(nt),je.fromBufferAttribute(ee,dt),Ke.fromBufferAttribute(ee,vt),et.fromBufferAttribute(ee,gt),je.add(tt),Ke.add(tt),et.add(tt),ee.setXYZ(dt,je.x,je.y,je.z),ee.setXYZ(vt,Ke.x,Ke.y,Ke.z),ee.setXYZ(gt,et.x,et.y,et.z)}else for(var yt=0,_t=$.count;yt<_t;yt+=3)de.fromBufferAttribute($,yt+0),fe.fromBufferAttribute($,yt+1),Ue.fromBufferAttribute($,yt+2),tt.subVectors(Ue,fe),nt.subVectors(de,fe),tt.cross(nt),ee.setXYZ(yt+0,tt.x,tt.y,tt.z),ee.setXYZ(yt+1,tt.x,tt.y,tt.z),ee.setXYZ(yt+2,tt.x,tt.y,tt.z);this.normalizeNormals(),ee.needsUpdate=!0}}},{key:"merge",value:function merge(X,$){if(X&&X.isBufferGeometry){void 0===$&&($=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var ee=this.attributes;for(var ne in ee)if(void 0!==X.attributes[ne])for(var ae=ee[ne].array,de=X.attributes[ne],fe=de.array,Ue=de.itemSize*$,je=Math.min(fe.length,ae.length-Ue),Ke=0,et=Ue;Ke<je;Ke++,et++)ae[et]=fe[Ke];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",X)}},{key:"normalizeNormals",value:function normalizeNormals(){for(var X=this.attributes.normal,$=0,ee=X.count;$<ee;$++)Gu.fromBufferAttribute(X,$),Gu.normalize(),X.setXYZ($,Gu.x,Gu.y,Gu.z)}},{key:"toNonIndexed",value:function toNonIndexed(){function e(X,$){for(var ee=X.array,ne=X.itemSize,ae=X.normalized,de=new ee.constructor($.length*ne),fe=0,Ue=0,je=0,Ke=$.length;je<Ke;je++){fe=X.isInterleavedBufferAttribute?$[je]*X.data.stride+X.offset:$[je]*ne;for(var et=0;et<ne;et++)de[Ue++]=ee[fe++]}return new Lu(de,ne,ae)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;var X=new Le,$=this.index.array,ee=this.attributes;for(var ne in ee){var ae=e(ee[ne],$);X.setAttribute(ne,ae)}var de=this.morphAttributes;for(var fe in de){for(var Ue=[],je=de[fe],Ke=0,et=je.length;Ke<et;Ke++){var tt=e(je[Ke],$);Ue.push(tt)}X.morphAttributes[fe]=Ue}X.morphTargetsRelative=this.morphTargetsRelative;for(var nt=this.groups,it=0,ct=nt.length;it<ct;it++){var dt=nt[it];X.addGroup(dt.start,dt.count,dt.materialIndex)}return X}},{key:"toJSON",value:function toJSON(){var X={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(X.uuid=this.uuid,X.type=this.type,""!==this.name&&(X.name=this.name),Object.keys(this.userData).length>0&&(X.userData=this.userData),void 0!==this.parameters){var $=this.parameters;for(var ee in $)void 0!==$[ee]&&(X[ee]=$[ee]);return X}X.data={attributes:{}};var ne=this.index;null!==ne&&(X.data.index={type:ne.array.constructor.name,array:Array.prototype.slice.call(ne.array)});var ae=this.attributes;for(var de in ae){var fe=ae[de];X.data.attributes[de]=fe.toJSON(X.data)}var Ue={},je=!1;for(var Ke in this.morphAttributes){for(var et=this.morphAttributes[Ke],tt=[],nt=0,it=et.length;nt<it;nt++){var ct=et[nt];tt.push(ct.toJSON(X.data))}tt.length>0&&(Ue[Ke]=tt,je=!0)}je&&(X.data.morphAttributes=Ue,X.data.morphTargetsRelative=this.morphTargetsRelative);var dt=this.groups;dt.length>0&&(X.data.groups=JSON.parse(JSON.stringify(dt)));var vt=this.boundingSphere;return null!==vt&&(X.data.boundingSphere={center:vt.center.toArray(),radius:vt.radius}),X}},{key:"clone",value:function clone(){return(new this.constructor).copy(this)}},{key:"copy",value:function copy(X){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;var $={};this.name=X.name;var ee=X.index;null!==ee&&this.setIndex(ee.clone($));var ne=X.attributes;for(var ae in ne){var de=ne[ae];this.setAttribute(ae,de.clone($))}var fe=X.morphAttributes;for(var Ue in fe){for(var je=[],Ke=fe[Ue],et=0,tt=Ke.length;et<tt;et++)je.push(Ke[et].clone($));this.morphAttributes[Ue]=je}this.morphTargetsRelative=X.morphTargetsRelative;for(var nt=X.groups,it=0,ct=nt.length;it<ct;it++){var dt=nt[it];this.addGroup(dt.start,dt.count,dt.materialIndex)}var vt=X.boundingBox;null!==vt&&(this.boundingBox=vt.clone());var gt=X.boundingSphere;return null!==gt&&(this.boundingSphere=gt.clone()),this.drawRange.start=X.drawRange.start,this.drawRange.count=X.drawRange.count,this.userData=X.userData,void 0!==X.parameters&&(this.parameters=Object.assign({},X.parameters)),this}},{key:"dispose",value:function dispose(){this.dispatchEvent({type:"dispose"})}}]),Le}(aa);Wu.prototype.isBufferGeometry=!0;var qu=new Ds,Zu=new Ps,Xu=new _s,Qu=new wo,Ku=new wo,$u=new wo,ec=new wo,bc=new wo,_c=new wo,kc=new wo,Cc=new wo,Ac=new wo,Dc=new va,Bc=new va,Wc=new va,fh=new wo,Mh=new wo,Oh=function(X){_inherits(Vt,X);var $=_createSuper(Vt);function Vt(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Wu,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mu;return _classCallCheck(this,Vt),(X=$.call(this)).type="Mesh",X.geometry=ee,X.material=ne,X.updateMorphTargets(),X}return _createClass(Vt,[{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Vt.prototype),"copy",this).call(this,X),void 0!==X.morphTargetInfluences&&(this.morphTargetInfluences=X.morphTargetInfluences.slice()),void 0!==X.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},X.morphTargetDictionary)),this.material=X.material,this.geometry=X.geometry,this}},{key:"updateMorphTargets",value:function updateMorphTargets(){var X=this.geometry;if(X.isBufferGeometry){var $=X.morphAttributes,ee=Object.keys($);if(ee.length>0){var ne=$[ee[0]];if(void 0!==ne){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var ae=0,de=ne.length;ae<de;ae++){var fe=ne[ae].name||String(ae);this.morphTargetInfluences.push(0),this.morphTargetDictionary[fe]=ae}}}}else{var Ue=X.morphTargets;void 0!==Ue&&Ue.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"raycast",value:function raycast(X,$){var ee,ne=this.geometry,ae=this.material,de=this.matrixWorld;if(void 0!==ae&&(null===ne.boundingSphere&&ne.computeBoundingSphere(),Xu.copy(ne.boundingSphere),Xu.applyMatrix4(de),!1!==X.ray.intersectsSphere(Xu))&&(qu.copy(de).invert(),Zu.copy(X.ray).applyMatrix4(qu),null===ne.boundingBox||!1!==Zu.intersectsBox(ne.boundingBox)))if(ne.isBufferGeometry){var fe=ne.index,Ue=ne.attributes.position,je=ne.morphAttributes.position,Ke=ne.morphTargetsRelative,et=ne.attributes.uv,tt=ne.attributes.uv2,nt=ne.groups,it=ne.drawRange;if(null!==fe)if(Array.isArray(ae))for(var ct=0,dt=nt.length;ct<dt;ct++)for(var vt=nt[ct],gt=ae[vt.materialIndex],yt=Math.max(vt.start,it.start),_t=Math.min(fe.count,Math.min(vt.start+vt.count,it.start+it.count));yt<_t;yt+=3){var wt=fe.getX(yt),St=fe.getX(yt+1),Ct=fe.getX(yt+2);(ee=ju(this,gt,X,Zu,Ue,je,Ke,et,tt,wt,St,Ct))&&(ee.faceIndex=Math.floor(yt/3),ee.face.materialIndex=vt.materialIndex,$.push(ee))}else for(var At=Math.max(0,it.start),Et=Math.min(fe.count,it.start+it.count);At<Et;At+=3){var Rt=fe.getX(At),Bt=fe.getX(At+1),Ht=fe.getX(At+2);(ee=ju(this,ae,X,Zu,Ue,je,Ke,et,tt,Rt,Bt,Ht))&&(ee.faceIndex=Math.floor(At/3),$.push(ee))}else if(void 0!==Ue)if(Array.isArray(ae))for(var Wt=0,qt=nt.length;Wt<qt;Wt++)for(var Zt=nt[Wt],Xt=ae[Zt.materialIndex],Qt=Math.max(Zt.start,it.start),en=Math.min(Ue.count,Math.min(Zt.start+Zt.count,it.start+it.count));Qt<en;Qt+=3){(ee=ju(this,Xt,X,Zu,Ue,je,Ke,et,tt,Qt,Qt+1,Qt+2))&&(ee.faceIndex=Math.floor(Qt/3),ee.face.materialIndex=Zt.materialIndex,$.push(ee))}else for(var tn=Math.max(0,it.start),un=Math.min(Ue.count,it.start+it.count);tn<un;tn+=3){(ee=ju(this,ae,X,Zu,Ue,je,Ke,et,tt,tn,tn+1,tn+2))&&(ee.faceIndex=Math.floor(tn/3),$.push(ee))}}else ne.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}]),Vt}(ru);function ju(X,$,ee,ne,ae,de,fe,Ue,je,Ke,et,tt){Qu.fromBufferAttribute(ae,Ke),Ku.fromBufferAttribute(ae,et),$u.fromBufferAttribute(ae,tt);var nt=X.morphTargetInfluences;if(de&&nt){kc.set(0,0,0),Cc.set(0,0,0),Ac.set(0,0,0);for(var it=0,ct=de.length;it<ct;it++){var dt=nt[it],vt=de[it];0!==dt&&(ec.fromBufferAttribute(vt,Ke),bc.fromBufferAttribute(vt,et),_c.fromBufferAttribute(vt,tt),fe?(kc.addScaledVector(ec,dt),Cc.addScaledVector(bc,dt),Ac.addScaledVector(_c,dt)):(kc.addScaledVector(ec.sub(Qu),dt),Cc.addScaledVector(bc.sub(Ku),dt),Ac.addScaledVector(_c.sub($u),dt)))}Qu.add(kc),Ku.add(Cc),$u.add(Ac)}X.isSkinnedMesh&&(X.boneTransform(Ke,Qu),X.boneTransform(et,Ku),X.boneTransform(tt,$u));var gt=function a_(X,$,ee,ne,ae,de,fe,Ue){if(null===(1===$.side?ne.intersectTriangle(fe,de,ae,!0,Ue):ne.intersectTriangle(ae,de,fe,2!==$.side,Ue)))return null;Mh.copy(Ue),Mh.applyMatrix4(X.matrixWorld);var je=ee.ray.origin.distanceTo(Mh);return je<ee.near||je>ee.far?null:{distance:je,point:Mh.clone(),object:X}}(X,$,ee,ne,Qu,Ku,$u,fh);if(gt){Ue&&(Dc.fromBufferAttribute(Ue,Ke),Bc.fromBufferAttribute(Ue,et),Wc.fromBufferAttribute(Ue,tt),gt.uv=ku.getUV(fh,Qu,Ku,$u,Dc,Bc,Wc,new va)),je&&(Dc.fromBufferAttribute(je,Ke),Bc.fromBufferAttribute(je,et),Wc.fromBufferAttribute(je,tt),gt.uv2=ku.getUV(fh,Qu,Ku,$u,Dc,Bc,Wc,new va));var yt={a:Ke,b:et,c:tt,normal:new wo,materialIndex:0};ku.getNormal(Qu,Ku,$u,yt.normal),gt.face=yt}return gt}Oh.prototype.isMesh=!0;var Rh=function(X){_inherits(vn,X);var $=_createSuper(vn);function vn(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,de=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,fe=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,Ue=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;_classCallCheck(this,vn),(X=$.call(this)).type="BoxGeometry",X.parameters={width:ee,height:ne,depth:ae,widthSegments:de,heightSegments:fe,depthSegments:Ue};var je=_assertThisInitialized(X);de=Math.floor(de),fe=Math.floor(fe),Ue=Math.floor(Ue);var Ke=[],et=[],tt=[],nt=[],it=0,ct=0;function p(X,$,ee,ne,ae,de,fe,Ue,dt,vt,gt){for(var yt=de/dt,_t=fe/vt,wt=de/2,St=fe/2,Ct=Ue/2,At=dt+1,Et=vt+1,Rt=0,Bt=0,Ht=new wo,Wt=0;Wt<Et;Wt++)for(var qt=Wt*_t-St,Zt=0;Zt<At;Zt++){var Xt=Zt*yt-wt;Ht[X]=Xt*ne,Ht[$]=qt*ae,Ht[ee]=Ct,et.push(Ht.x,Ht.y,Ht.z),Ht[X]=0,Ht[$]=0,Ht[ee]=Ue>0?1:-1,tt.push(Ht.x,Ht.y,Ht.z),nt.push(Zt/dt),nt.push(1-Wt/vt),Rt+=1}for(var Qt=0;Qt<vt;Qt++)for(var en=0;en<dt;en++){var tn=it+en+At*Qt,un=it+en+At*(Qt+1),hn=it+(en+1)+At*(Qt+1),dn=it+(en+1)+At*Qt;Ke.push(tn,un,dn),Ke.push(un,hn,dn),Bt+=6}je.addGroup(ct,Bt,gt),ct+=Bt,it+=Rt}return p("z","y","x",-1,-1,ae,ne,ee,Ue,fe,0),p("z","y","x",1,-1,ae,ne,-ee,Ue,fe,1),p("x","z","y",1,1,ee,ae,ne,de,Ue,2),p("x","z","y",1,-1,ee,ae,-ne,de,Ue,3),p("x","y","z",1,-1,ee,ne,ae,de,fe,4),p("x","y","z",-1,-1,ee,ne,-ae,de,fe,5),X.setIndex(Ke),X.setAttribute("position",new Iu(et,3)),X.setAttribute("normal",new Iu(tt,3)),X.setAttribute("uv",new Iu(nt,2)),X}return _createClass(vn,null,[{key:"fromJSON",value:function fromJSON(X){return new vn(X.width,X.height,X.depth,X.widthSegments,X.heightSegments,X.depthSegments)}}]),vn}(Wu);function Ba(X){var $={};for(var ee in X)for(var ne in $[ee]={},X[ee]){var ae=X[ee][ne];ae&&(ae.isColor||ae.isMatrix3||ae.isMatrix4||ae.isVector2||ae.isVector3||ae.isVector4||ae.isTexture||ae.isQuaternion)?$[ee][ne]=ae.clone():Array.isArray(ae)?$[ee][ne]=ae.slice():$[ee][ne]=ae}return $}function Qr(X){for(var $={},ee=0;ee<X.length;ee++){var ne=Ba(X[ee]);for(var ae in ne)$[ae]=ne[ae]}return $}var Nh={clone:Ba,merge:Qr},$h=function(X){_inherits(Mt,X);var $=_createSuper(Mt);function Mt(X){var ee;return _classCallCheck(this,Mt),(ee=$.call(this)).type="ShaderMaterial",ee.defines={},ee.uniforms={},ee.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",ee.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",ee.linewidth=1,ee.wireframe=!1,ee.wireframeLinewidth=1,ee.fog=!1,ee.lights=!1,ee.clipping=!1,ee.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},ee.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},ee.index0AttributeName=void 0,ee.uniformsNeedUpdate=!1,ee.glslVersion=null,void 0!==X&&(void 0!==X.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),ee.setValues(X)),ee}return _createClass(Mt,[{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Mt.prototype),"copy",this).call(this,X),this.fragmentShader=X.fragmentShader,this.vertexShader=X.vertexShader,this.uniforms=Ba(X.uniforms),this.defines=Object.assign({},X.defines),this.wireframe=X.wireframe,this.wireframeLinewidth=X.wireframeLinewidth,this.fog=X.fog,this.lights=X.lights,this.clipping=X.clipping,this.extensions=Object.assign({},X.extensions),this.glslVersion=X.glslVersion,this}},{key:"toJSON",value:function toJSON(X){var $=_get(_getPrototypeOf(Mt.prototype),"toJSON",this).call(this,X);for(var ee in $.glslVersion=this.glslVersion,$.uniforms={},this.uniforms){var ne=this.uniforms[ee].value;ne&&ne.isTexture?$.uniforms[ee]={type:"t",value:ne.toJSON(X).uuid}:ne&&ne.isColor?$.uniforms[ee]={type:"c",value:ne.getHex()}:ne&&ne.isVector2?$.uniforms[ee]={type:"v2",value:ne.toArray()}:ne&&ne.isVector3?$.uniforms[ee]={type:"v3",value:ne.toArray()}:ne&&ne.isVector4?$.uniforms[ee]={type:"v4",value:ne.toArray()}:ne&&ne.isMatrix3?$.uniforms[ee]={type:"m3",value:ne.toArray()}:ne&&ne.isMatrix4?$.uniforms[ee]={type:"m4",value:ne.toArray()}:$.uniforms[ee]={value:ne}}Object.keys(this.defines).length>0&&($.defines=this.defines),$.vertexShader=this.vertexShader,$.fragmentShader=this.fragmentShader;var ae={};for(var de in this.extensions)!0===this.extensions[de]&&(ae[de]=!0);return Object.keys(ae).length>0&&($.extensions=ae),$}}]),Mt}(Au);$h.prototype.isShaderMaterial=!0;var ad=function(X){_inherits(Gn,X);var $=_createSuper(Gn);function Gn(){var X;return _classCallCheck(this,Gn),(X=$.call(this)).type="Camera",X.matrixWorldInverse=new Ds,X.projectionMatrix=new Ds,X.projectionMatrixInverse=new Ds,X}return _createClass(Gn,[{key:"copy",value:function copy(X,$){return _get(_getPrototypeOf(Gn.prototype),"copy",this).call(this,X,$),this.matrixWorldInverse.copy(X.matrixWorldInverse),this.projectionMatrix.copy(X.projectionMatrix),this.projectionMatrixInverse.copy(X.projectionMatrixInverse),this}},{key:"getWorldDirection",value:function getWorldDirection(X){this.updateWorldMatrix(!0,!1);var $=this.matrixWorld.elements;return X.set(-$[8],-$[9],-$[10]).normalize()}},{key:"updateMatrixWorld",value:function updateMatrixWorld(X){_get(_getPrototypeOf(Gn.prototype),"updateMatrixWorld",this).call(this,X),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function updateWorldMatrix(X,$){_get(_getPrototypeOf(Gn.prototype),"updateWorldMatrix",this).call(this,X,$),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"clone",value:function clone(){return(new this.constructor).copy(this)}}]),Gn}(ru);ad.prototype.isCamera=!0;var cd=function(X){_inherits(sr,X);var $=_createSuper(sr);function sr(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,de=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;return _classCallCheck(this,sr),(X=$.call(this)).type="PerspectiveCamera",X.fov=ee,X.zoom=1,X.near=ae,X.far=de,X.focus=10,X.aspect=ne,X.view=null,X.filmGauge=35,X.filmOffset=0,X.updateProjectionMatrix(),X}return _createClass(sr,[{key:"copy",value:function copy(X,$){return _get(_getPrototypeOf(sr.prototype),"copy",this).call(this,X,$),this.fov=X.fov,this.zoom=X.zoom,this.near=X.near,this.far=X.far,this.focus=X.focus,this.aspect=X.aspect,this.view=null===X.view?null:Object.assign({},X.view),this.filmGauge=X.filmGauge,this.filmOffset=X.filmOffset,this}},{key:"setFocalLength",value:function setFocalLength(X){var $=.5*this.getFilmHeight()/X;this.fov=2*ha*Math.atan($),this.updateProjectionMatrix()}},{key:"getFocalLength",value:function getFocalLength(){var X=Math.tan(.5*ca*this.fov);return.5*this.getFilmHeight()/X}},{key:"getEffectiveFOV",value:function getEffectiveFOV(){return 2*ha*Math.atan(Math.tan(.5*ca*this.fov)/this.zoom)}},{key:"getFilmWidth",value:function getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}},{key:"getFilmHeight",value:function getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}},{key:"setViewOffset",value:function setViewOffset(X,$,ee,ne,ae,de){this.aspect=X/$,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=X,this.view.fullHeight=$,this.view.offsetX=ee,this.view.offsetY=ne,this.view.width=ae,this.view.height=de,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function updateProjectionMatrix(){var X=this.near,$=X*Math.tan(.5*ca*this.fov)/this.zoom,ee=2*$,ne=this.aspect*ee,ae=-.5*ne,de=this.view;if(null!==this.view&&this.view.enabled){var fe=de.fullWidth,Ue=de.fullHeight;ae+=de.offsetX*ne/fe,$-=de.offsetY*ee/Ue,ne*=de.width/fe,ee*=de.height/Ue}var je=this.filmOffset;0!==je&&(ae+=X*je/this.getFilmWidth()),this.projectionMatrix.makePerspective(ae,ae+ne,$,$-ee,X,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function toJSON(X){var $=_get(_getPrototypeOf(sr.prototype),"toJSON",this).call(this,X);return $.object.fov=this.fov,$.object.zoom=this.zoom,$.object.near=this.near,$.object.far=this.far,$.object.focus=this.focus,$.object.aspect=this.aspect,null!==this.view&&($.object.view=Object.assign({},this.view)),$.object.filmGauge=this.filmGauge,$.object.filmOffset=this.filmOffset,$}}]),sr}(ad);cd.prototype.isPerspectiveCamera=!0;var dd=90,pd=function(X){_inherits(Xc,X);var $=_createSuper(Xc);function Xc(X,ee,ne){var ae;if(_classCallCheck(this,Xc),(ae=$.call(this)).type="CubeCamera",!0!==ne.isWebGLCubeRenderTarget)return console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter."),_possibleConstructorReturn(ae);ae.renderTarget=ne;var de=new cd(dd,1,X,ee);de.layers=ae.layers,de.up.set(0,-1,0),de.lookAt(new wo(1,0,0)),ae.add(de);var fe=new cd(dd,1,X,ee);fe.layers=ae.layers,fe.up.set(0,-1,0),fe.lookAt(new wo(-1,0,0)),ae.add(fe);var Ue=new cd(dd,1,X,ee);Ue.layers=ae.layers,Ue.up.set(0,0,1),Ue.lookAt(new wo(0,1,0)),ae.add(Ue);var je=new cd(dd,1,X,ee);je.layers=ae.layers,je.up.set(0,0,-1),je.lookAt(new wo(0,-1,0)),ae.add(je);var Ke=new cd(dd,1,X,ee);Ke.layers=ae.layers,Ke.up.set(0,-1,0),Ke.lookAt(new wo(0,0,1)),ae.add(Ke);var et=new cd(dd,1,X,ee);return et.layers=ae.layers,et.up.set(0,-1,0),et.lookAt(new wo(0,0,-1)),ae.add(et),_possibleConstructorReturn(ae)}return _createClass(Xc,[{key:"update",value:function update(X,$){null===this.parent&&this.updateMatrixWorld();var ee=this.renderTarget,ne=(0,fe.Z)(this.children,6),ae=ne[0],de=ne[1],Ue=ne[2],je=ne[3],Ke=ne[4],et=ne[5],tt=X.getRenderTarget(),nt=X.toneMapping,it=X.xr.enabled;X.toneMapping=0,X.xr.enabled=!1;var ct=ee.texture.generateMipmaps;ee.texture.generateMipmaps=!1,X.setRenderTarget(ee,0),X.render($,ae),X.setRenderTarget(ee,1),X.render($,de),X.setRenderTarget(ee,2),X.render($,Ue),X.setRenderTarget(ee,3),X.render($,je),X.setRenderTarget(ee,4),X.render($,Ke),ee.texture.generateMipmaps=ct,X.setRenderTarget(ee,5),X.render($,et),X.setRenderTarget(tt),X.toneMapping=nt,X.xr.enabled=it,ee.texture.needsPMREMUpdate=!0}}]),Xc}(ru),vd=function(X){_inherits(Fs,X);var $=_createSuper(Fs);function Fs(X,ee,ne,ae,de,fe,Ue,je,Ke,et){var tt;return _classCallCheck(this,Fs),X=void 0!==X?X:[],ee=void 0!==ee?ee:en,(tt=$.call(this,X,ee,ne,ae,de,fe,Ue,je,Ke,et)).flipY=!1,tt}return _createClass(Fs,[{key:"images",get:function get(){return this.image},set:function set(X){this.image=X}}]),Fs}(eo);vd.prototype.isCubeTexture=!0;var yd=function(X){_inherits(vf,X);var $=_createSuper(vf);function vf(X){var ee,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,vf);var ae={width:X,height:X,depth:1},de=[ae,ae,ae,ae,ae,ae];return(ee=$.call(this,X,X,ne)).texture=new vd(de,ne.mapping,ne.wrapS,ne.wrapT,ne.magFilter,ne.minFilter,ne.format,ne.type,ne.anisotropy,ne.encoding),ee.texture.isRenderTargetTexture=!0,ee.texture.generateMipmaps=void 0!==ne.generateMipmaps&&ne.generateMipmaps,ee.texture.minFilter=void 0!==ne.minFilter?ne.minFilter:_n,ee}return _createClass(vf,[{key:"fromEquirectangularTexture",value:function fromEquirectangularTexture(X,$){this.texture.type=$.type,this.texture.encoding=$.encoding,this.texture.generateMipmaps=$.generateMipmaps,this.texture.minFilter=$.minFilter,this.texture.magFilter=$.magFilter;var ee={tEquirect:{value:null}},ne="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",ae="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",de=new Rh(5,5,5),fe=new $h({name:"CubemapFromEquirect",uniforms:Ba(ee),vertexShader:ne,fragmentShader:ae,side:1,blending:0});fe.uniforms.tEquirect.value=$;var Ue=new Oh(de,fe),je=$.minFilter;return $.minFilter===wn&&($.minFilter=_n),new pd(1,10,this).update(X,Ue),$.minFilter=je,Ue.geometry.dispose(),Ue.material.dispose(),this}},{key:"clear",value:function clear(X,$,ee,ne){for(var ae=X.getRenderTarget(),de=0;de<6;de++)X.setRenderTarget(this,de),X.clear($,ee,ne);X.setRenderTarget(ae)}}]),vf}(ro);yd.prototype.isWebGLCubeRenderTarget=!0;var bd=new wo,xd=new wo,_d=new ga,Sd=function(){function Gr(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new wo(1,0,0),$=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,Gr),this.normal=X,this.constant=$}return _createClass(Gr,[{key:"set",value:function set(X,$){return this.normal.copy(X),this.constant=$,this}},{key:"setComponents",value:function setComponents(X,$,ee,ne){return this.normal.set(X,$,ee),this.constant=ne,this}},{key:"setFromNormalAndCoplanarPoint",value:function setFromNormalAndCoplanarPoint(X,$){return this.normal.copy(X),this.constant=-$.dot(this.normal),this}},{key:"setFromCoplanarPoints",value:function setFromCoplanarPoints(X,$,ee){var ne=bd.subVectors(ee,$).cross(xd.subVectors(X,$)).normalize();return this.setFromNormalAndCoplanarPoint(ne,X),this}},{key:"copy",value:function copy(X){return this.normal.copy(X.normal),this.constant=X.constant,this}},{key:"normalize",value:function normalize(){var X=1/this.normal.length();return this.normal.multiplyScalar(X),this.constant*=X,this}},{key:"negate",value:function negate(){return this.constant*=-1,this.normal.negate(),this}},{key:"distanceToPoint",value:function distanceToPoint(X){return this.normal.dot(X)+this.constant}},{key:"distanceToSphere",value:function distanceToSphere(X){return this.distanceToPoint(X.center)-X.radius}},{key:"projectPoint",value:function projectPoint(X,$){return $.copy(this.normal).multiplyScalar(-this.distanceToPoint(X)).add(X)}},{key:"intersectLine",value:function intersectLine(X,$){var ee=X.delta(bd),ne=this.normal.dot(ee);if(0===ne)return 0===this.distanceToPoint(X.start)?$.copy(X.start):null;var ae=-(X.start.dot(this.normal)+this.constant)/ne;return ae<0||ae>1?null:$.copy(ee).multiplyScalar(ae).add(X.start)}},{key:"intersectsLine",value:function intersectsLine(X){var $=this.distanceToPoint(X.start),ee=this.distanceToPoint(X.end);return $<0&&ee>0||ee<0&&$>0}},{key:"intersectsBox",value:function intersectsBox(X){return X.intersectsPlane(this)}},{key:"intersectsSphere",value:function intersectsSphere(X){return X.intersectsPlane(this)}},{key:"coplanarPoint",value:function coplanarPoint(X){return X.copy(this.normal).multiplyScalar(-this.constant)}},{key:"applyMatrix4",value:function applyMatrix4(X,$){var ee=$||_d.getNormalMatrix(X),ne=this.coplanarPoint(bd).applyMatrix4(X),ae=this.normal.applyMatrix3(ee).normalize();return this.constant=-ne.dot(ae),this}},{key:"translate",value:function translate(X){return this.constant-=X.dot(this.normal),this}},{key:"equals",value:function equals(X){return X.normal.equals(this.normal)&&X.constant===this.constant}},{key:"clone",value:function clone(){return(new this.constructor).copy(this)}}]),Gr}();Sd.prototype.isPlane=!0;var Td=new _s,Pd=new wo,Od=function(){function Na(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Sd,$=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Sd,ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Sd,ne=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Sd,ae=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Sd,de=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Sd;_classCallCheck(this,Na),this.planes=[X,$,ee,ne,ae,de]}return _createClass(Na,[{key:"set",value:function set(X,$,ee,ne,ae,de){var fe=this.planes;return fe[0].copy(X),fe[1].copy($),fe[2].copy(ee),fe[3].copy(ne),fe[4].copy(ae),fe[5].copy(de),this}},{key:"copy",value:function copy(X){for(var $=this.planes,ee=0;ee<6;ee++)$[ee].copy(X.planes[ee]);return this}},{key:"setFromProjectionMatrix",value:function setFromProjectionMatrix(X){var $=this.planes,ee=X.elements,ne=ee[0],ae=ee[1],de=ee[2],fe=ee[3],Ue=ee[4],je=ee[5],Ke=ee[6],et=ee[7],tt=ee[8],nt=ee[9],it=ee[10],ct=ee[11],dt=ee[12],vt=ee[13],gt=ee[14],yt=ee[15];return $[0].setComponents(fe-ne,et-Ue,ct-tt,yt-dt).normalize(),$[1].setComponents(fe+ne,et+Ue,ct+tt,yt+dt).normalize(),$[2].setComponents(fe+ae,et+je,ct+nt,yt+vt).normalize(),$[3].setComponents(fe-ae,et-je,ct-nt,yt-vt).normalize(),$[4].setComponents(fe-de,et-Ke,ct-it,yt-gt).normalize(),$[5].setComponents(fe+de,et+Ke,ct+it,yt+gt).normalize(),this}},{key:"intersectsObject",value:function intersectsObject(X){var $=X.geometry;return null===$.boundingSphere&&$.computeBoundingSphere(),Td.copy($.boundingSphere).applyMatrix4(X.matrixWorld),this.intersectsSphere(Td)}},{key:"intersectsSprite",value:function intersectsSprite(X){return Td.center.set(0,0,0),Td.radius=.7071067811865476,Td.applyMatrix4(X.matrixWorld),this.intersectsSphere(Td)}},{key:"intersectsSphere",value:function intersectsSphere(X){for(var $=this.planes,ee=X.center,ne=-X.radius,ae=0;ae<6;ae++)if($[ae].distanceToPoint(ee)<ne)return!1;return!0}},{key:"intersectsBox",value:function intersectsBox(X){for(var $=this.planes,ee=0;ee<6;ee++){var ne=$[ee];if(Pd.x=ne.normal.x>0?X.max.x:X.min.x,Pd.y=ne.normal.y>0?X.max.y:X.min.y,Pd.z=ne.normal.z>0?X.max.z:X.min.z,ne.distanceToPoint(Pd)<0)return!1}return!0}},{key:"containsPoint",value:function containsPoint(X){for(var $=this.planes,ee=0;ee<6;ee++)if($[ee].distanceToPoint(X)<0)return!1;return!0}},{key:"clone",value:function clone(){return(new this.constructor).copy(this)}}]),Na}();function bb(){var X=null,$=!1,ee=null,ne=null;function n($,ae){ee($,ae),ne=X.requestAnimationFrame(n)}return{start:function start(){!0!==$&&null!==ee&&(ne=X.requestAnimationFrame(n),$=!0)},stop:function stop(){X.cancelAnimationFrame(ne),$=!1},setAnimationLoop:function setAnimationLoop(X){ee=X},setContext:function setContext($){X=$}}}function f_(X,$){var ee=$.isWebGL2,ne=new WeakMap;return{get:function o(X){return X.isInterleavedBufferAttribute&&(X=X.data),ne.get(X)},remove:function a($){$.isInterleavedBufferAttribute&&($=$.data);var ee=ne.get($);ee&&(X.deleteBuffer(ee.buffer),ne.delete($))},update:function l($,ae){if($.isGLBufferAttribute){var de=ne.get($);(!de||de.version<$.version)&&ne.set($,{buffer:$.buffer,type:$.type,bytesPerElement:$.elementSize,version:$.version})}else{$.isInterleavedBufferAttribute&&($=$.data);var fe=ne.get($);void 0===fe?ne.set($,function n($,ne){var ae,de=$.array,fe=$.usage,Ue=X.createBuffer();if(X.bindBuffer(ne,Ue),X.bufferData(ne,de,fe),$.onUploadCallback(),de instanceof Float32Array)ae=5126;else if(de instanceof Uint16Array)if($.isFloat16BufferAttribute){if(!ee)throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");ae=5131}else ae=5123;else if(de instanceof Int16Array)ae=5122;else if(de instanceof Uint32Array)ae=5125;else if(de instanceof Int32Array)ae=5124;else if(de instanceof Int8Array)ae=5120;else if(de instanceof Uint8Array)ae=5121;else{if(!(de instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+de);ae=5121}return{buffer:Ue,type:ae,bytesPerElement:de.BYTES_PER_ELEMENT,version:$.version}}($,ae)):fe.version<$.version&&(function s($,ne,ae){var de=ne.array,fe=ne.updateRange;X.bindBuffer(ae,$),-1===fe.count?X.bufferSubData(ae,0,de):(ee?X.bufferSubData(ae,fe.offset*de.BYTES_PER_ELEMENT,de,fe.offset,fe.count):X.bufferSubData(ae,fe.offset*de.BYTES_PER_ELEMENT,de.subarray(fe.offset,fe.offset+fe.count)),fe.count=-1)}(fe.buffer,$,ae),fe.version=$.version)}}}}var Rd=function(X){_inherits(is,X);var $=_createSuper(is);function is(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,de=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;_classCallCheck(this,is),(X=$.call(this)).type="PlaneGeometry",X.parameters={width:ee,height:ne,widthSegments:ae,heightSegments:de};for(var fe=ee/2,Ue=ne/2,je=Math.floor(ae),Ke=Math.floor(de),et=je+1,tt=Ke+1,nt=ee/je,it=ne/Ke,ct=[],dt=[],vt=[],gt=[],yt=0;yt<tt;yt++)for(var _t=yt*it-Ue,wt=0;wt<et;wt++){var St=wt*nt-fe;dt.push(St,-_t,0),vt.push(0,0,1),gt.push(wt/je),gt.push(1-yt/Ke)}for(var Ct=0;Ct<Ke;Ct++)for(var At=0;At<je;At++){var Et=At+et*Ct,Rt=At+et*(Ct+1),Bt=At+1+et*(Ct+1),Ht=At+1+et*Ct;ct.push(Et,Rt,Ht),ct.push(Rt,Bt,Ht)}return X.setIndex(ct),X.setAttribute("position",new Iu(dt,3)),X.setAttribute("normal",new Iu(vt,3)),X.setAttribute("uv",new Iu(gt,2)),X}return _createClass(is,null,[{key:"fromJSON",value:function fromJSON(X){return new is(X.width,X.height,X.widthSegments,X.heightSegments)}}]),is}(Wu),Id={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\tif ( diffuseColor.a < alphaTest ) discard;\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"vec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP )\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\treflectedLight.indirectDiffuse += lightMapIrradiance;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( - dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\t#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\t\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\t\tif ( cutoffDistance > 0.0 ) {\n\t\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t\t}\n\t\treturn distanceFalloff;\n\t#else\n\t\tif ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\t\treturn pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t\t}\n\t\treturn 1.0;\n\t#endif\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\t#ifdef SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULARINTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;\n\t\t#endif\n\t\t#ifdef USE_SPECULARCOLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vUv ).rgb;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;\n\t#endif\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n};\nvec3 clearcoatSpecular = vec3( 0.0 );\nvec3 sheenSpecular = vec3( 0.0 );\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\tvec3 FssEss = specularColor * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tcomputeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef USE_CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometry.normal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\t\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\t\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\t\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\t#endif\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t\tuniform sampler2DArray morphTargetsTexture;\n\t\tuniform ivec2 morphTargetsTextureSize;\n\t\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t\t}\n\t#else\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\tuniform float morphTargetInfluences[ 8 ];\n\t\t#else\n\t\t\tuniform float morphTargetInfluences[ 4 ];\n\t\t#endif\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\t#ifdef MORPHTARGETS_TEXTURE\n\t\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t\t}\n\t#else\n\t\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\t\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\t\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\t\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t\t#ifndef USE_MORPHNORMALS\n\t\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t\t#endif\n\t#endif\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * faceDirection;\n\t\t\tbitangent = bitangent * faceDirection;\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",normal_fragment_maps:"#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );\n\t\treturn normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );\n\t#endif\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",output_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= transmissionAlpha + 0.1;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tuniform int boneTextureSize;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tfloat j = i * 4.0;\n\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\ty = dy * ( y + 0.5 );\n\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\treturn bone;\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tfloat transmissionAlpha = 1.0;\n\tfloat transmissionFactor = transmission;\n\tfloat thicknessFactor = thickness;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\ttransmissionFactor *= texture2D( transmissionMap, vUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tthicknessFactor *= texture2D( thicknessMap, vUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmission = getIBLVolumeRefraction(\n\t\tn, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,\n\t\tattenuationColor, attenuationDistance );\n\ttotalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );\n\ttransmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\t#ifdef texture2DLodEXT\n\t\t\treturn texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#else\n\t\t\treturn texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );\n\t\t#endif\n\t}\n\tvec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( attenuationDistance == 0.0 ) {\n\t\t\treturn radiance;\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance * radiance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\trefractionCoords += 1.0;\n\t\trefractionCoords /= 2.0;\n\t\tvec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\tvec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n\t}\n#endif",uv_pars_fragment:"#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tgl_FragColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tgl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );\n\t#endif\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULARINTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n\t#ifdef USE_SPECULARCOLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEENCOLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEENROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;\n\t#endif\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <output_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}"},Nd={common:{diffuse:{value:new Ma(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new ga},uv2Transform:{value:new ga},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new va(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ma(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ma(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ga}},sprite:{diffuse:{value:new Ma(16777215)},opacity:{value:1},center:{value:new va(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new ga}}},Fd={basic:{uniforms:Qr([Nd.common,Nd.specularmap,Nd.envmap,Nd.aomap,Nd.lightmap,Nd.fog]),vertexShader:Id.meshbasic_vert,fragmentShader:Id.meshbasic_frag},lambert:{uniforms:Qr([Nd.common,Nd.specularmap,Nd.envmap,Nd.aomap,Nd.lightmap,Nd.emissivemap,Nd.fog,Nd.lights,{emissive:{value:new Ma(0)}}]),vertexShader:Id.meshlambert_vert,fragmentShader:Id.meshlambert_frag},phong:{uniforms:Qr([Nd.common,Nd.specularmap,Nd.envmap,Nd.aomap,Nd.lightmap,Nd.emissivemap,Nd.bumpmap,Nd.normalmap,Nd.displacementmap,Nd.fog,Nd.lights,{emissive:{value:new Ma(0)},specular:{value:new Ma(1118481)},shininess:{value:30}}]),vertexShader:Id.meshphong_vert,fragmentShader:Id.meshphong_frag},standard:{uniforms:Qr([Nd.common,Nd.envmap,Nd.aomap,Nd.lightmap,Nd.emissivemap,Nd.bumpmap,Nd.normalmap,Nd.displacementmap,Nd.roughnessmap,Nd.metalnessmap,Nd.fog,Nd.lights,{emissive:{value:new Ma(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Id.meshphysical_vert,fragmentShader:Id.meshphysical_frag},toon:{uniforms:Qr([Nd.common,Nd.aomap,Nd.lightmap,Nd.emissivemap,Nd.bumpmap,Nd.normalmap,Nd.displacementmap,Nd.gradientmap,Nd.fog,Nd.lights,{emissive:{value:new Ma(0)}}]),vertexShader:Id.meshtoon_vert,fragmentShader:Id.meshtoon_frag},matcap:{uniforms:Qr([Nd.common,Nd.bumpmap,Nd.normalmap,Nd.displacementmap,Nd.fog,{matcap:{value:null}}]),vertexShader:Id.meshmatcap_vert,fragmentShader:Id.meshmatcap_frag},points:{uniforms:Qr([Nd.points,Nd.fog]),vertexShader:Id.points_vert,fragmentShader:Id.points_frag},dashed:{uniforms:Qr([Nd.common,Nd.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Id.linedashed_vert,fragmentShader:Id.linedashed_frag},depth:{uniforms:Qr([Nd.common,Nd.displacementmap]),vertexShader:Id.depth_vert,fragmentShader:Id.depth_frag},normal:{uniforms:Qr([Nd.common,Nd.bumpmap,Nd.normalmap,Nd.displacementmap,{opacity:{value:1}}]),vertexShader:Id.meshnormal_vert,fragmentShader:Id.meshnormal_frag},sprite:{uniforms:Qr([Nd.sprite,Nd.fog]),vertexShader:Id.sprite_vert,fragmentShader:Id.sprite_frag},background:{uniforms:{uvTransform:{value:new ga},t2D:{value:null}},vertexShader:Id.background_vert,fragmentShader:Id.background_frag},cube:{uniforms:Qr([Nd.envmap,{opacity:{value:1}}]),vertexShader:Id.cube_vert,fragmentShader:Id.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Id.equirect_vert,fragmentShader:Id.equirect_frag},distanceRGBA:{uniforms:Qr([Nd.common,Nd.displacementmap,{referencePosition:{value:new wo},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Id.distanceRGBA_vert,fragmentShader:Id.distanceRGBA_frag},shadow:{uniforms:Qr([Nd.lights,Nd.fog,{color:{value:new Ma(0)},opacity:{value:1}}]),vertexShader:Id.shadow_vert,fragmentShader:Id.shadow_frag}};function GD(X,$,ee,ne,ae,de){var fe,Ue,je=new Ma(0),Ke=!0===ae?0:1,et=null,tt=0,nt=null;function p(X,$){ee.buffers.color.setClear(X.r,X.g,X.b,$,de)}return{getClearColor:function getClearColor(){return je},setClearColor:function setClearColor(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;je.set(X),p(je,Ke=$)},getClearAlpha:function getClearAlpha(){return Ke},setClearAlpha:function setClearAlpha(X){p(je,Ke=X)},render:function d(ee,ae){var de=!1,it=!0===ae.isScene?ae.background:null;it&&it.isTexture&&(it=$.get(it));var ct=X.xr,dt=ct.getSession&&ct.getSession();dt&&"additive"===dt.environmentBlendMode&&(it=null),null===it?p(je,Ke):it&&it.isColor&&(p(it,1),de=!0),(X.autoClear||de)&&X.clear(X.autoClearColor,X.autoClearDepth,X.autoClearStencil),it&&(it.isCubeTexture||it.mapping===un)?(void 0===Ue&&((Ue=new Oh(new Rh(1,1,1),new $h({name:"BackgroundCubeMaterial",uniforms:Ba(Fd.cube.uniforms),vertexShader:Fd.cube.vertexShader,fragmentShader:Fd.cube.fragmentShader,side:1,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Ue.geometry.deleteAttribute("uv"),Ue.onBeforeRender=function(X,$,ee){this.matrixWorld.copyPosition(ee.matrixWorld)},Object.defineProperty(Ue.material,"envMap",{get:function get(){return this.uniforms.envMap.value}}),ne.update(Ue)),Ue.material.uniforms.envMap.value=it,Ue.material.uniforms.flipEnvMap.value=it.isCubeTexture&&!1===it.isRenderTargetTexture?-1:1,(et!==it||tt!==it.version||nt!==X.toneMapping)&&(Ue.material.needsUpdate=!0,et=it,tt=it.version,nt=X.toneMapping),Ue.layers.enableAll(),ee.unshift(Ue,Ue.geometry,Ue.material,0,0,null)):it&&it.isTexture&&(void 0===fe&&((fe=new Oh(new Rd(2,2),new $h({name:"BackgroundMaterial",uniforms:Ba(Fd.background.uniforms),vertexShader:Fd.background.vertexShader,fragmentShader:Fd.background.fragmentShader,side:0,depthTest:!1,depthWrite:!1,fog:!1}))).geometry.deleteAttribute("normal"),Object.defineProperty(fe.material,"map",{get:function get(){return this.uniforms.t2D.value}}),ne.update(fe)),fe.material.uniforms.t2D.value=it,!0===it.matrixAutoUpdate&&it.updateMatrix(),fe.material.uniforms.uvTransform.value.copy(it.matrix),(et!==it||tt!==it.version||nt!==X.toneMapping)&&(fe.material.needsUpdate=!0,et=it,tt=it.version,nt=X.toneMapping),fe.layers.enableAll(),ee.unshift(fe,fe.geometry,fe.material,0,0,null))}}}function kD(X,$,ee,ne){var ae=X.getParameter(34921),de=ne.isWebGL2?null:$.get("OES_vertex_array_object"),fe=ne.isWebGL2||null!==de,Ue={},je=g(null),Ke=je,et=!1;function d($){return ne.isWebGL2?X.bindVertexArray($):de.bindVertexArrayOES($)}function p($){return ne.isWebGL2?X.deleteVertexArray($):de.deleteVertexArrayOES($)}function g(X){for(var $=[],ee=[],ne=[],de=0;de<ae;de++)$[de]=0,ee[de]=0,ne[de]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:$,enabledAttributes:ee,attributeDivisors:ne,object:X,attributes:{},index:null}}function w(){for(var X=Ke.newAttributes,$=0,ee=X.length;$<ee;$++)X[$]=0}function b(X){S(X,0)}function S(ee,ae){var de=Ke.newAttributes,fe=Ke.enabledAttributes,Ue=Ke.attributeDivisors;de[ee]=1,0===fe[ee]&&(X.enableVertexAttribArray(ee),fe[ee]=1),Ue[ee]!==ae&&((ne.isWebGL2?X:$.get("ANGLE_instanced_arrays"))[ne.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](ee,ae),Ue[ee]=ae)}function T(){for(var $=Ke.newAttributes,ee=Ke.enabledAttributes,ne=0,ae=ee.length;ne<ae;ne++)ee[ne]!==$[ne]&&(X.disableVertexAttribArray(ne),ee[ne]=0)}function A($,ee,ae,de,fe,Ue){!0!==ne.isWebGL2||5124!==ae&&5125!==ae?X.vertexAttribPointer($,ee,ae,de,fe,Ue):X.vertexAttribIPointer($,ee,ae,fe,Ue)}function I(){N(),et=!0,Ke!==je&&d((Ke=je).object)}function N(){je.geometry=null,je.program=null,je.wireframe=!1}return{setup:function u(ae,je,tt,nt,it){var ct=!1;if(fe){var dt=function m($,ee,ae){var fe=!0===ae.wireframe,je=Ue[$.id];void 0===je&&(je={},Ue[$.id]=je);var Ke=je[ee.id];void 0===Ke&&(Ke={},je[ee.id]=Ke);var et=Ke[fe];return void 0===et&&(et=g(function f(){return ne.isWebGL2?X.createVertexArray():de.createVertexArrayOES()}()),Ke[fe]=et),et}(nt,tt,je);Ke!==dt&&d((Ke=dt).object),ct=function v(X,$,ee,ne){var ae=Ke.attributes,de=$.attributes,fe=0,Ue=ee.getAttributes();for(var je in Ue)if(Ue[je].location>=0){var et=ae[je],tt=de[je];if(void 0===tt&&("instanceMatrix"===je&&X.instanceMatrix&&(tt=X.instanceMatrix),"instanceColor"===je&&X.instanceColor&&(tt=X.instanceColor)),void 0===et||et.attribute!==tt||tt&&et.data!==tt.data)return!0;fe++}return Ke.attributesNum!==fe||Ke.index!==ne}(ae,nt,tt,it),ct&&function y(X,$,ee,ne){var ae={},de=$.attributes,fe=0,Ue=ee.getAttributes();for(var je in Ue)if(Ue[je].location>=0){var et=de[je];void 0===et&&("instanceMatrix"===je&&X.instanceMatrix&&(et=X.instanceMatrix),"instanceColor"===je&&X.instanceColor&&(et=X.instanceColor));var tt={};tt.attribute=et,et&&et.data&&(tt.data=et.data),ae[je]=tt,fe++}Ke.attributes=ae,Ke.attributesNum=fe,Ke.index=ne}(ae,nt,tt,it)}else{var vt=!0===je.wireframe;(Ke.geometry!==nt.id||Ke.program!==tt.id||Ke.wireframe!==vt)&&(Ke.geometry=nt.id,Ke.program=tt.id,Ke.wireframe=vt,ct=!0)}null!==it&&ee.update(it,34963),(ct||et)&&(et=!1,function x(ae,de,fe,Ue){if(!1===ne.isWebGL2&&(ae.isInstancedMesh||Ue.isInstancedBufferGeometry)&&null===$.get("ANGLE_instanced_arrays"))return;w();var je=Ue.attributes,Ke=fe.getAttributes(),et=de.defaultAttributeValues;for(var tt in Ke){var nt=Ke[tt];if(nt.location>=0){var it=je[tt];if(void 0===it&&("instanceMatrix"===tt&&ae.instanceMatrix&&(it=ae.instanceMatrix),"instanceColor"===tt&&ae.instanceColor&&(it=ae.instanceColor)),void 0!==it){var ct=it.normalized,dt=it.itemSize,vt=ee.get(it);if(void 0===vt)continue;var gt=vt.buffer,yt=vt.type,_t=vt.bytesPerElement;if(it.isInterleavedBufferAttribute){var wt=it.data,St=wt.stride,Ct=it.offset;if(wt.isInstancedInterleavedBuffer){for(var At=0;At<nt.locationSize;At++)S(nt.location+At,wt.meshPerAttribute);!0!==ae.isInstancedMesh&&void 0===Ue._maxInstanceCount&&(Ue._maxInstanceCount=wt.meshPerAttribute*wt.count)}else for(var Et=0;Et<nt.locationSize;Et++)b(nt.location+Et);X.bindBuffer(34962,gt);for(var Rt=0;Rt<nt.locationSize;Rt++)A(nt.location+Rt,dt/nt.locationSize,yt,ct,St*_t,(Ct+dt/nt.locationSize*Rt)*_t)}else{if(it.isInstancedBufferAttribute){for(var Bt=0;Bt<nt.locationSize;Bt++)S(nt.location+Bt,it.meshPerAttribute);!0!==ae.isInstancedMesh&&void 0===Ue._maxInstanceCount&&(Ue._maxInstanceCount=it.meshPerAttribute*it.count)}else for(var Ht=0;Ht<nt.locationSize;Ht++)b(nt.location+Ht);X.bindBuffer(34962,gt);for(var Wt=0;Wt<nt.locationSize;Wt++)A(nt.location+Wt,dt/nt.locationSize,yt,ct,dt*_t,dt/nt.locationSize*Wt*_t)}}else if(void 0!==et){var qt=et[tt];if(void 0!==qt)switch(qt.length){case 2:X.vertexAttrib2fv(nt.location,qt);break;case 3:X.vertexAttrib3fv(nt.location,qt);break;case 4:X.vertexAttrib4fv(nt.location,qt);break;default:X.vertexAttrib1fv(nt.location,qt)}}}}T()}(ae,je,tt,nt),null!==it&&X.bindBuffer(34963,ee.get(it).buffer))},reset:I,resetDefaultState:N,dispose:function E(){for(var X in I(),Ue){var $=Ue[X];for(var ee in $){var ne=$[ee];for(var ae in ne)p(ne[ae].object),delete ne[ae];delete $[ee]}delete Ue[X]}},releaseStatesOfGeometry:function _(X){if(void 0!==Ue[X.id]){var $=Ue[X.id];for(var ee in $){var ne=$[ee];for(var ae in ne)p(ne[ae].object),delete ne[ae];delete $[ee]}delete Ue[X.id]}},releaseStatesOfProgram:function C(X){for(var $ in Ue){var ee=Ue[$];if(void 0!==ee[X.id]){var ne=ee[X.id];for(var ae in ne)p(ne[ae].object),delete ne[ae];delete ee[X.id]}}},initAttributes:w,enableAttribute:b,disableUnusedAttributes:T}}function VD(X,$,ee,ne){var ae,de=ne.isWebGL2;this.setMode=function o(X){ae=X},this.render=function a($,ne){X.drawArrays(ae,$,ne),ee.update(ne,ae,1)},this.renderInstances=function l(ne,fe,Ue){if(0!==Ue){var je,Ke;if(de)je=X,Ke="drawArraysInstanced";else if(Ke="drawArraysInstancedANGLE",null===(je=$.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");je[Ke](ae,ne,fe,Ue),ee.update(fe,ae,Ue)}}}function HD(X,$,ee){var ne;function s($){if("highp"===$){if(X.getShaderPrecisionFormat(35633,36338).precision>0&&X.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";$="mediump"}return"mediump"===$&&X.getShaderPrecisionFormat(35633,36337).precision>0&&X.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var ae=typeof WebGL2RenderingContext<"u"&&X instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext<"u"&&X instanceof WebGL2ComputeRenderingContext,de=void 0!==ee.precision?ee.precision:"highp",fe=s(de);fe!==de&&(console.warn("THREE.WebGLRenderer:",de,"not supported, using",fe,"instead."),de=fe);var Ue=ae||$.has("WEBGL_draw_buffers"),je=!0===ee.logarithmicDepthBuffer,Ke=X.getParameter(34930),et=X.getParameter(35660),tt=X.getParameter(3379),nt=X.getParameter(34076),it=X.getParameter(34921),ct=X.getParameter(36347),dt=X.getParameter(36348),vt=X.getParameter(36349),gt=et>0,yt=ae||$.has("OES_texture_float");return{isWebGL2:ae,drawBuffers:Ue,getMaxAnisotropy:function n(){if(void 0!==ne)return ne;if(!0===$.has("EXT_texture_filter_anisotropic")){var ee=$.get("EXT_texture_filter_anisotropic");ne=X.getParameter(ee.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else ne=0;return ne},getMaxPrecision:s,precision:de,logarithmicDepthBuffer:je,maxTextures:Ke,maxVertexTextures:et,maxTextureSize:tt,maxCubemapSize:nt,maxAttributes:it,maxVertexUniforms:ct,maxVaryings:dt,maxFragmentUniforms:vt,vertexTextures:gt,floatFragmentTextures:yt,floatVertexTextures:gt&&yt,maxSamples:ae?X.getParameter(36183):0}}function WD(X){var $=this,ee=null,ne=0,ae=!1,de=!1,fe=new Sd,Ue=new ga,je={value:null,needsUpdate:!1};function c(){je.value!==ee&&(je.value=ee,je.needsUpdate=ne>0),$.numPlanes=ne,$.numIntersection=0}function h(X,ee,ne,ae){var de=null!==X?X.length:0,Ke=null;if(0!==de){if(Ke=je.value,!0!==ae||null===Ke){var et=ne+4*de,tt=ee.matrixWorldInverse;Ue.getNormalMatrix(tt),(null===Ke||Ke.length<et)&&(Ke=new Float32Array(et));for(var nt=0,it=ne;nt!==de;++nt,it+=4)fe.copy(X[nt]).applyMatrix4(tt,Ue),fe.normal.toArray(Ke,it),Ke[it+3]=fe.constant}je.value=Ke,je.needsUpdate=!0}return $.numPlanes=de,$.numIntersection=0,Ke}this.uniform=je,this.numPlanes=0,this.numIntersection=0,this.init=function(X,$,de){var fe=0!==X.length||$||0!==ne||ae;return ae=$,ee=h(X,de,0),ne=X.length,fe},this.beginShadows=function(){de=!0,h(null)},this.endShadows=function(){de=!1,c()},this.setState=function($,fe,Ue){var Ke=$.clippingPlanes,et=$.clipIntersection,tt=$.clipShadows,nt=X.get($);if(!ae||null===Ke||0===Ke.length||de&&!tt)de?h(null):c();else{var it=de?0:ne,ct=4*it,dt=nt.clippingState||null;je.value=dt,dt=h(Ke,fe,ct,Ue);for(var vt=0;vt!==ct;++vt)dt[vt]=ee[vt];nt.clippingState=dt,this.numIntersection=et?this.numPlanes:0,this.numPlanes+=it}}}function jD(X){var $=new WeakMap;function t(X,$){return 303===$?X.mapping=en:304===$&&(X.mapping=tn),X}function n(X){var ee=X.target;ee.removeEventListener("dispose",n);var ne=$.get(ee);void 0!==ne&&($.delete(ee),ne.dispose())}return{get:function r(ee){if(ee&&ee.isTexture&&!1===ee.isRenderTargetTexture){var ne=ee.mapping;if(303===ne||304===ne){if($.has(ee))return t($.get(ee).texture,ee.mapping);var ae=ee.image;if(ae&&ae.height>0){var de=new yd(ae.height/2);return de.fromEquirectangularTexture(X,ee),$.set(ee,de),ee.addEventListener("dispose",n),t(de.texture,ee.mapping)}return null}}return ee},dispose:function s(){$=new WeakMap}}}Fd.physical={uniforms:Qr([Fd.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new va(1,1)},clearcoatNormalMap:{value:null},sheen:{value:0},sheenColor:{value:new Ma(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new va},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new Ma(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new Ma(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Id.meshphysical_vert,fragmentShader:Id.meshphysical_frag};var Ud=function(X){_inherits(Co,X);var $=_createSuper(Co);function Co(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,de=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,fe=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,Ue=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;return _classCallCheck(this,Co),(X=$.call(this)).type="OrthographicCamera",X.zoom=1,X.view=null,X.left=ee,X.right=ne,X.top=ae,X.bottom=de,X.near=fe,X.far=Ue,X.updateProjectionMatrix(),X}return _createClass(Co,[{key:"copy",value:function copy(X,$){return _get(_getPrototypeOf(Co.prototype),"copy",this).call(this,X,$),this.left=X.left,this.right=X.right,this.top=X.top,this.bottom=X.bottom,this.near=X.near,this.far=X.far,this.zoom=X.zoom,this.view=null===X.view?null:Object.assign({},X.view),this}},{key:"setViewOffset",value:function setViewOffset(X,$,ee,ne,ae,de){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=X,this.view.fullHeight=$,this.view.offsetX=ee,this.view.offsetY=ne,this.view.width=ae,this.view.height=de,this.updateProjectionMatrix()}},{key:"clearViewOffset",value:function clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}},{key:"updateProjectionMatrix",value:function updateProjectionMatrix(){var X=(this.right-this.left)/(2*this.zoom),$=(this.top-this.bottom)/(2*this.zoom),ee=(this.right+this.left)/2,ne=(this.top+this.bottom)/2,ae=ee-X,de=ee+X,fe=ne+$,Ue=ne-$;if(null!==this.view&&this.view.enabled){var je=(this.right-this.left)/this.view.fullWidth/this.zoom,Ke=(this.top-this.bottom)/this.view.fullHeight/this.zoom;de=(ae+=je*this.view.offsetX)+je*this.view.width,Ue=(fe-=Ke*this.view.offsetY)-Ke*this.view.height}this.projectionMatrix.makeOrthographic(ae,de,fe,Ue,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}},{key:"toJSON",value:function toJSON(X){var $=_get(_getPrototypeOf(Co.prototype),"toJSON",this).call(this,X);return $.object.zoom=this.zoom,$.object.left=this.left,$.object.right=this.right,$.object.top=this.top,$.object.bottom=this.bottom,$.object.near=this.near,$.object.far=this.far,null!==this.view&&($.object.view=Object.assign({},this.view)),$}}]),Co}(ad);Ud.prototype.isOrthographicCamera=!0;var Vd=[.125,.215,.35,.446,.526,.582],Gd=20,Wd=new Ud,Jd=new Ma,Zd=null,Qd=(1+Math.sqrt(5))/2,Kd=1/Qd,$d=[new wo(1,1,1),new wo(-1,1,1),new wo(1,1,-1),new wo(-1,1,-1),new wo(0,Qd,Kd),new wo(0,Qd,-Kd),new wo(Kd,0,Qd),new wo(-Kd,0,Qd),new wo(Qd,Kd,0),new wo(-Qd,Kd,0)],ef=function(){function xf(X){_classCallCheck(this,xf),this._renderer=X,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}return _createClass(xf,[{key:"fromScene",value:function fromScene(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,ne=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;Zd=this._renderer.getRenderTarget(),this._setSize(256);var ae=this._allocateTargets();return ae.depthBuffer=!0,this._sceneToCubeUV(X,ee,ne,ae),$>0&&this._blur(ae,0,0,$),this._applyPMREM(ae),this._cleanup(ae),ae}},{key:"fromEquirectangular",value:function fromEquirectangular(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(X,$)}},{key:"fromCubemap",value:function fromCubemap(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(X,$)}},{key:"compileCubemapShader",value:function compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=x0(),this._compileMaterial(this._cubemapMaterial))}},{key:"compileEquirectangularShader",value:function compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=v0(),this._compileMaterial(this._equirectMaterial))}},{key:"dispose",value:function dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}},{key:"_setSize",value:function _setSize(X){this._lodMax=Math.floor(Math.log2(X)),this._cubeSize=Math.pow(2,this._lodMax)}},{key:"_dispose",value:function _dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(var X=0;X<this._lodPlanes.length;X++)this._lodPlanes[X].dispose()}},{key:"_cleanup",value:function _cleanup(X){this._renderer.setRenderTarget(Zd),X.scissorTest=!1,Yu(X,0,0,X.width,X.height)}},{key:"_fromTexture",value:function _fromTexture(X,$){X.mapping===en||X.mapping===tn?this._setSize(0===X.image.length?16:X.image[0].width||X.image[0].image.width):this._setSize(X.image.width/4),Zd=this._renderer.getRenderTarget();var ee=$||this._allocateTargets();return this._textureToCubeUV(X,ee),this._applyPMREM(ee),this._cleanup(ee),ee}},{key:"_allocateTargets",value:function _allocateTargets(){var X=3*Math.max(this._cubeSize,112),$=4*this._cubeSize,ee={magFilter:_n,minFilter:_n,generateMipmaps:!1,type:En,format:Pn,encoding:qr,depthBuffer:!1},ne=y0(X,$,ee);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==X){var ae;null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=y0(X,$,ee);var de=this._lodMax;ae=function qD(X){for(var $=[],ee=[],ne=[],ae=X,de=X-4+1+Vd.length,fe=0;fe<de;fe++){var Ue=Math.pow(2,ae);ee.push(Ue);var je=1/Ue;fe>X-4?je=Vd[fe-X+4-1]:0===fe&&(je=0),ne.push(je);for(var Ke=1/(Ue-2),et=-Ke,tt=1+Ke,nt=[et,et,tt,et,tt,tt,et,et,tt,tt,et,tt],it=6,ct=6,dt=3,vt=2,gt=1,yt=new Float32Array(dt*ct*it),_t=new Float32Array(vt*ct*it),wt=new Float32Array(gt*ct*it),St=0;St<it;St++){var Ct=St%3*2/3-1,At=St>2?0:-1,Et=[Ct,At,0,Ct+2/3,At,0,Ct+2/3,At+1,0,Ct,At,0,Ct+2/3,At+1,0,Ct,At+1,0];yt.set(Et,dt*ct*St),_t.set(nt,vt*ct*St);var Rt=[St,St,St,St,St,St];wt.set(Rt,gt*ct*St)}var Bt=new Wu;Bt.setAttribute("position",new Lu(yt,dt)),Bt.setAttribute("uv",new Lu(_t,vt)),Bt.setAttribute("faceIndex",new Lu(wt,gt)),$.push(Bt),ae>4&&ae--}return{lodPlanes:$,sizeLods:ee,sigmas:ne}}(de),this._sizeLods=ae.sizeLods,this._lodPlanes=ae.lodPlanes,this._sigmas=ae.sigmas,this._blurMaterial=function YD(X,$,ee){var ne=new Float32Array(Gd),ae=new wo(0,1,0);return new $h({name:"SphericalGaussianBlur",defines:{n:Gd,CUBEUV_TEXEL_WIDTH:1/$,CUBEUV_TEXEL_HEIGHT:1/ee,CUBEUV_MAX_MIP:"".concat(X,".0")},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:ne},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:ae}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}(de,X,$)}return ne}},{key:"_compileMaterial",value:function _compileMaterial(X){var $=new Oh(this._lodPlanes[0],X);this._renderer.compile($,Wd)}},{key:"_sceneToCubeUV",value:function _sceneToCubeUV(X,$,ee,ne){var ae=new cd(90,1,$,ee),de=[1,-1,1,1,1,1],fe=[1,1,1,-1,-1,-1],Ue=this._renderer,je=Ue.autoClear,Ke=Ue.toneMapping;Ue.getClearColor(Jd),Ue.toneMapping=0,Ue.autoClear=!1;var et=new Mu({name:"PMREM.Background",side:1,depthWrite:!1,depthTest:!1}),tt=new Oh(new Rh,et),nt=!1,it=X.background;it?it.isColor&&(et.color.copy(it),X.background=null,nt=!0):(et.color.copy(Jd),nt=!0);for(var ct=0;ct<6;ct++){var dt=ct%3;0===dt?(ae.up.set(0,de[ct],0),ae.lookAt(fe[ct],0,0)):1===dt?(ae.up.set(0,0,de[ct]),ae.lookAt(0,fe[ct],0)):(ae.up.set(0,de[ct],0),ae.lookAt(0,0,fe[ct]));var vt=this._cubeSize;Yu(ne,dt*vt,ct>2?vt:0,vt,vt),Ue.setRenderTarget(ne),nt&&Ue.render(tt,ae),Ue.render(X,ae)}tt.geometry.dispose(),tt.material.dispose(),Ue.toneMapping=Ke,Ue.autoClear=je,X.background=it}},{key:"_textureToCubeUV",value:function _textureToCubeUV(X,$){var ee=this._renderer,ne=X.mapping===en||X.mapping===tn;ne?(null===this._cubemapMaterial&&(this._cubemapMaterial=x0()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===X.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=v0());var ae=ne?this._cubemapMaterial:this._equirectMaterial,de=new Oh(this._lodPlanes[0],ae);ae.uniforms.envMap.value=X;var fe=this._cubeSize;Yu($,0,0,3*fe,2*fe),ee.setRenderTarget($),ee.render(de,Wd)}},{key:"_applyPMREM",value:function _applyPMREM(X){var $=this._renderer,ee=$.autoClear;$.autoClear=!1;for(var ne=1;ne<this._lodPlanes.length;ne++){var ae=Math.sqrt(this._sigmas[ne]*this._sigmas[ne]-this._sigmas[ne-1]*this._sigmas[ne-1]),de=$d[(ne-1)%$d.length];this._blur(X,ne-1,ne,ae,de)}$.autoClear=ee}},{key:"_blur",value:function _blur(X,$,ee,ne,ae){var de=this._pingPongRenderTarget;this._halfBlur(X,de,$,ee,ne,"latitudinal",ae),this._halfBlur(de,X,ee,ee,ne,"longitudinal",ae)}},{key:"_halfBlur",value:function _halfBlur(X,$,ee,ne,ae,de,fe){var Ue=this._renderer,je=this._blurMaterial;"latitudinal"!==de&&"longitudinal"!==de&&console.error("blur direction must be either latitudinal or longitudinal!");var Ke=new Oh(this._lodPlanes[ne],je),et=je.uniforms,tt=this._sizeLods[ee]-1,nt=isFinite(ae)?Math.PI/(2*tt):2*Math.PI/39,it=ae/nt,ct=isFinite(ae)?1+Math.floor(3*it):Gd;ct>Gd&&console.warn("sigmaRadians, ".concat(ae,", is too large and will clip, as it requested ").concat(ct," samples when the maximum is set to ").concat(Gd));for(var dt=[],vt=0,gt=0;gt<Gd;++gt){var yt=gt/it,_t=Math.exp(-yt*yt/2);dt.push(_t),0===gt?vt+=_t:gt<ct&&(vt+=2*_t)}for(var wt=0;wt<dt.length;wt++)dt[wt]=dt[wt]/vt;et.envMap.value=X.texture,et.samples.value=ct,et.weights.value=dt,et.latitudinal.value="latitudinal"===de,fe&&(et.poleAxis.value=fe);var St=this._lodMax;et.dTheta.value=nt,et.mipInt.value=St-ee;var Ct=this._sizeLods[ne];Yu($,3*Ct*(ne>St-4?ne-St+4:0),4*(this._cubeSize-Ct),3*Ct,2*Ct),Ue.setRenderTarget($),Ue.render(Ke,Wd)}}]),xf}();function y0(X,$,ee){var ne=new ro(X,$,ee);return ne.texture.mapping=un,ne.texture.name="PMREM.cubeUv",ne.scissorTest=!0,ne}function Yu(X,$,ee,ne,ae){X.viewport.set($,ee,ne,ae),X.scissor.set($,ee,ne,ae)}function v0(){return new $h({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function x0(){return new $h({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:0,depthTest:!1,depthWrite:!1})}function XD(X){var $=new WeakMap,ee=null;function s(X){var ee=X.target;ee.removeEventListener("dispose",s);var ne=$.get(ee);void 0!==ne&&($.delete(ee),ne.dispose())}return{get:function r(ne){if(ne&&ne.isTexture){var ae=ne.mapping,de=303===ae||304===ae,fe=ae===en||ae===tn;if(de||fe){if(ne.isRenderTargetTexture&&!0===ne.needsPMREMUpdate){ne.needsPMREMUpdate=!1;var Ue=$.get(ne);return null===ee&&(ee=new ef(X)),Ue=de?ee.fromEquirectangular(ne,Ue):ee.fromCubemap(ne,Ue),$.set(ne,Ue),Ue.texture}if($.has(ne))return $.get(ne).texture;var je=ne.image;if(de&&je&&je.height>0||fe&&je&&function n(X){for(var $=0,ee=6,ne=0;ne<ee;ne++)void 0!==X[ne]&&$++;return $===ee}(je)){null===ee&&(ee=new ef(X));var Ke=de?ee.fromEquirectangular(ne):ee.fromCubemap(ne);return $.set(ne,Ke),ne.addEventListener("dispose",s),Ke.texture}return null}}return ne},dispose:function o(){$=new WeakMap,null!==ee&&(ee.dispose(),ee=null)}}}function QD(X){var $={};function t(ee){if(void 0!==$[ee])return $[ee];var ne;switch(ee){case"WEBGL_depth_texture":ne=X.getExtension("WEBGL_depth_texture")||X.getExtension("MOZ_WEBGL_depth_texture")||X.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":ne=X.getExtension("EXT_texture_filter_anisotropic")||X.getExtension("MOZ_EXT_texture_filter_anisotropic")||X.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":ne=X.getExtension("WEBGL_compressed_texture_s3tc")||X.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||X.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":ne=X.getExtension("WEBGL_compressed_texture_pvrtc")||X.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:ne=X.getExtension(ee)}return $[ee]=ne,ne}return{has:function has(X){return null!==t(X)},init:function init(X){X.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function get(X){var $=t(X);return null===$&&console.warn("THREE.WebGLRenderer: "+X+" extension not supported."),$}}}function JD(X,$,ee,ne){var ae={},de=new WeakMap;function o(X){var fe=X.target;for(var Ue in null!==fe.index&&$.remove(fe.index),fe.attributes)$.remove(fe.attributes[Ue]);fe.removeEventListener("dispose",o),delete ae[fe.id];var je=de.get(fe);je&&($.remove(je),de.delete(fe)),ne.releaseStatesOfGeometry(fe),!0===fe.isInstancedBufferGeometry&&delete fe._maxInstanceCount,ee.memory.geometries--}function c(X){var ee=[],ne=X.index,ae=X.attributes.position,fe=0;if(null!==ne){var Ue=ne.array;fe=ne.version;for(var je=0,Ke=Ue.length;je<Ke;je+=3){var et=Ue[je+0],tt=Ue[je+1],nt=Ue[je+2];ee.push(et,tt,tt,nt,nt,et)}}else{var it=ae.array;fe=ae.version;for(var ct=0,dt=it.length/3-1;ct<dt;ct+=3){var vt=ct+0,gt=ct+1,yt=ct+2;ee.push(vt,gt,gt,yt,yt,vt)}}var _t=new(vb(ee)?Ru:Ou)(ee,1);_t.version=fe;var wt=de.get(X);wt&&$.remove(wt),de.set(X,_t)}return{get:function a(X,$){return!0===ae[$.id]||($.addEventListener("dispose",o),ae[$.id]=!0,ee.memory.geometries++),$},update:function l(X){var ee=X.attributes;for(var ne in ee)$.update(ee[ne],34962);var ae=X.morphAttributes;for(var de in ae)for(var fe=ae[de],Ue=0,je=fe.length;Ue<je;Ue++)$.update(fe[Ue],34962)},getWireframeAttribute:function h(X){var $=de.get(X);if($){var ee=X.index;null!==ee&&$.version<ee.version&&c(X)}else c(X);return de.get(X)}}}function KD(X,$,ee,ne){var ae,de,fe,Ue=ne.isWebGL2;this.setMode=function o(X){ae=X},this.setIndex=function c(X){de=X.type,fe=X.bytesPerElement},this.render=function h($,ne){X.drawElements(ae,ne,de,$*fe),ee.update(ne,ae,1)},this.renderInstances=function u(ne,je,Ke){if(0!==Ke){var et,tt;if(Ue)et=X,tt="drawElementsInstanced";else if(tt="drawElementsInstancedANGLE",null===(et=$.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");et[tt](ae,je,de,ne*fe,Ke),ee.update(je,ae,Ke)}}}function ZD(X){var $={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:$,programs:null,autoReset:!0,reset:function n(){$.frame++,$.calls=0,$.triangles=0,$.points=0,$.lines=0},update:function r(X,ee,ne){switch($.calls++,ee){case 4:$.triangles+=ne*(X/3);break;case 1:$.lines+=ne*(X/2);break;case 3:$.lines+=ne*(X-1);break;case 2:$.lines+=ne*X;break;case 0:$.points+=ne*X;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",ee)}}}}function $D(X,$){return X[0]-$[0]}function eP(X,$){return Math.abs($[1])-Math.abs(X[1])}function qm(X,$){var ee=1,ne=$.isInterleavedBufferAttribute?$.data.array:$.array;ne instanceof Int8Array?ee=127:ne instanceof Int16Array?ee=32767:ne instanceof Int32Array?ee=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",ne),X.divideScalar(ee)}function tP(X,$,ee){for(var ne={},ae=new Float32Array(8),de=new WeakMap,fe=new to,Ue=[],je=0;je<8;je++)Ue[je]=[je,0];return{update:function l(je,Ke,et,tt){var nt=je.morphTargetInfluences;if(!0===$.isWebGL2){var it=Ke.morphAttributes.position||Ke.morphAttributes.normal||Ke.morphAttributes.color,ct=void 0!==it?it.length:0,dt=de.get(Ke);if(void 0===dt||dt.count!==ct){void 0!==dt&&dt.texture.dispose();var vt=void 0!==Ke.morphAttributes.position,gt=void 0!==Ke.morphAttributes.normal,yt=void 0!==Ke.morphAttributes.color,_t=Ke.morphAttributes.position||[],wt=Ke.morphAttributes.normal||[],St=Ke.morphAttributes.color||[],Ct=0;!0===vt&&(Ct=1),!0===gt&&(Ct=2),!0===yt&&(Ct=3);var At=Ke.attributes.position.count*Ct,Et=1;At>$.maxTextureSize&&(Et=Math.ceil(At/$.maxTextureSize),At=$.maxTextureSize);var Rt=new Float32Array(At*Et*4*ct),Bt=new fo(Rt,At,Et,ct);Bt.type=Mn,Bt.needsUpdate=!0;for(var Ht=4*Ct,Wt=0;Wt<ct;Wt++)for(var qt=_t[Wt],Zt=wt[Wt],Xt=St[Wt],Qt=At*Et*4*Wt,en=0;en<qt.count;en++){var tn=en*Ht;!0===vt&&(fe.fromBufferAttribute(qt,en),!0===qt.normalized&&qm(fe,qt),Rt[Qt+tn+0]=fe.x,Rt[Qt+tn+1]=fe.y,Rt[Qt+tn+2]=fe.z,Rt[Qt+tn+3]=0),!0===gt&&(fe.fromBufferAttribute(Zt,en),!0===Zt.normalized&&qm(fe,Zt),Rt[Qt+tn+4]=fe.x,Rt[Qt+tn+5]=fe.y,Rt[Qt+tn+6]=fe.z,Rt[Qt+tn+7]=0),!0===yt&&(fe.fromBufferAttribute(Xt,en),!0===Xt.normalized&&qm(fe,Xt),Rt[Qt+tn+8]=fe.x,Rt[Qt+tn+9]=fe.y,Rt[Qt+tn+10]=fe.z,Rt[Qt+tn+11]=4===Xt.itemSize?fe.w:1)}dt={count:ct,texture:Bt,size:new va(At,Et)},de.set(Ke,dt),Ke.addEventListener("dispose",(function k(){Bt.dispose(),de.delete(Ke),Ke.removeEventListener("dispose",k)}))}for(var un=0,hn=0;hn<nt.length;hn++)un+=nt[hn];var dn=Ke.morphTargetsRelative?1:1-un;tt.getUniforms().setValue(X,"morphTargetBaseInfluence",dn),tt.getUniforms().setValue(X,"morphTargetInfluences",nt),tt.getUniforms().setValue(X,"morphTargetsTexture",dt.texture,ee),tt.getUniforms().setValue(X,"morphTargetsTextureSize",dt.size)}else{var mn=void 0===nt?0:nt.length,gn=ne[Ke.id];if(void 0===gn||gn.length!==mn){gn=[];for(var _n=0;_n<mn;_n++)gn[_n]=[_n,0];ne[Ke.id]=gn}for(var wn=0;wn<mn;wn++){var Sn=gn[wn];Sn[0]=wn,Sn[1]=nt[wn]}gn.sort(eP);for(var Cn=0;Cn<8;Cn++)Cn<mn&&gn[Cn][1]?(Ue[Cn][0]=gn[Cn][0],Ue[Cn][1]=gn[Cn][1]):(Ue[Cn][0]=Number.MAX_SAFE_INTEGER,Ue[Cn][1]=0);Ue.sort($D);for(var An=Ke.morphAttributes.position,En=Ke.morphAttributes.normal,Tn=0,Pn=0;Pn<8;Pn++){var Dn=Ue[Pn],Ln=Dn[0],On=Dn[1];Ln!==Number.MAX_SAFE_INTEGER&&On?(An&&Ke.getAttribute("morphTarget"+Pn)!==An[Ln]&&Ke.setAttribute("morphTarget"+Pn,An[Ln]),En&&Ke.getAttribute("morphNormal"+Pn)!==En[Ln]&&Ke.setAttribute("morphNormal"+Pn,En[Ln]),ae[Pn]=On,Tn+=On):(An&&!0===Ke.hasAttribute("morphTarget"+Pn)&&Ke.deleteAttribute("morphTarget"+Pn),En&&!0===Ke.hasAttribute("morphNormal"+Pn)&&Ke.deleteAttribute("morphNormal"+Pn),ae[Pn]=0)}var In=Ke.morphTargetsRelative?1:1-Tn;tt.getUniforms().setValue(X,"morphTargetBaseInfluence",In),tt.getUniforms().setValue(X,"morphTargetInfluences",ae)}}}}function rP(X,$,ee,ne){var ae=new WeakMap;function a(X){var $=X.target;$.removeEventListener("dispose",a),ee.remove($.instanceMatrix),null!==$.instanceColor&&ee.remove($.instanceColor)}return{update:function s(X){var de=ne.render.frame,fe=X.geometry,Ue=$.get(X,fe);return ae.get(Ue)!==de&&($.update(Ue),ae.set(Ue,de)),X.isInstancedMesh&&(!1===X.hasEventListener("dispose",a)&&X.addEventListener("dispose",a),ee.update(X.instanceMatrix,34962),null!==X.instanceColor&&ee.update(X.instanceColor,34962)),Ue},dispose:function o(){ae=new WeakMap}}}var of=new eo,sf=new fo,lf=new mo,uf=new vd,cf=[],df=[],ff=new Float32Array(16),pf=new Float32Array(9),$f=new Float32Array(4);function Qa(X,$,ee){var ne=X[0];if(ne<=0||ne>0)return X;var ae=$*ee,de=cf[ae];if(void 0===de&&(de=new Float32Array(ae),cf[ae]=de),0!==$){ne.toArray(de,0);for(var fe=1,Ue=0;fe!==$;++fe)Ue+=ee,X[fe].toArray(de,Ue)}return de}function nn(X,$){if(X.length!==$.length)return!1;for(var ee=0,ne=X.length;ee<ne;ee++)if(X[ee]!==$[ee])return!1;return!0}function sn(X,$){for(var ee=0,ne=$.length;ee<ne;ee++)X[ee]=$[ee]}function ed(X,$){var ee=df[$];void 0===ee&&(ee=new Int32Array($),df[$]=ee);for(var ne=0;ne!==$;++ne)ee[ne]=X.allocateTextureUnit();return ee}function nP(X,$){var ee=this.cache;ee[0]!==$&&(X.uniform1f(this.addr,$),ee[0]=$)}function iP(X,$){var ee=this.cache;if(void 0!==$.x)(ee[0]!==$.x||ee[1]!==$.y)&&(X.uniform2f(this.addr,$.x,$.y),ee[0]=$.x,ee[1]=$.y);else{if(nn(ee,$))return;X.uniform2fv(this.addr,$),sn(ee,$)}}function sP(X,$){var ee=this.cache;if(void 0!==$.x)(ee[0]!==$.x||ee[1]!==$.y||ee[2]!==$.z)&&(X.uniform3f(this.addr,$.x,$.y,$.z),ee[0]=$.x,ee[1]=$.y,ee[2]=$.z);else if(void 0!==$.r)(ee[0]!==$.r||ee[1]!==$.g||ee[2]!==$.b)&&(X.uniform3f(this.addr,$.r,$.g,$.b),ee[0]=$.r,ee[1]=$.g,ee[2]=$.b);else{if(nn(ee,$))return;X.uniform3fv(this.addr,$),sn(ee,$)}}function oP(X,$){var ee=this.cache;if(void 0!==$.x)(ee[0]!==$.x||ee[1]!==$.y||ee[2]!==$.z||ee[3]!==$.w)&&(X.uniform4f(this.addr,$.x,$.y,$.z,$.w),ee[0]=$.x,ee[1]=$.y,ee[2]=$.z,ee[3]=$.w);else{if(nn(ee,$))return;X.uniform4fv(this.addr,$),sn(ee,$)}}function aP(X,$){var ee=this.cache,ne=$.elements;if(void 0===ne){if(nn(ee,$))return;X.uniformMatrix2fv(this.addr,!1,$),sn(ee,$)}else{if(nn(ee,ne))return;$f.set(ne),X.uniformMatrix2fv(this.addr,!1,$f),sn(ee,ne)}}function lP(X,$){var ee=this.cache,ne=$.elements;if(void 0===ne){if(nn(ee,$))return;X.uniformMatrix3fv(this.addr,!1,$),sn(ee,$)}else{if(nn(ee,ne))return;pf.set(ne),X.uniformMatrix3fv(this.addr,!1,pf),sn(ee,ne)}}function cP(X,$){var ee=this.cache,ne=$.elements;if(void 0===ne){if(nn(ee,$))return;X.uniformMatrix4fv(this.addr,!1,$),sn(ee,$)}else{if(nn(ee,ne))return;ff.set(ne),X.uniformMatrix4fv(this.addr,!1,ff),sn(ee,ne)}}function hP(X,$){var ee=this.cache;ee[0]!==$&&(X.uniform1i(this.addr,$),ee[0]=$)}function uP(X,$){var ee=this.cache;nn(ee,$)||(X.uniform2iv(this.addr,$),sn(ee,$))}function fP(X,$){var ee=this.cache;nn(ee,$)||(X.uniform3iv(this.addr,$),sn(ee,$))}function dP(X,$){var ee=this.cache;nn(ee,$)||(X.uniform4iv(this.addr,$),sn(ee,$))}function pP(X,$){var ee=this.cache;ee[0]!==$&&(X.uniform1ui(this.addr,$),ee[0]=$)}function mP(X,$){var ee=this.cache;nn(ee,$)||(X.uniform2uiv(this.addr,$),sn(ee,$))}function gP(X,$){var ee=this.cache;nn(ee,$)||(X.uniform3uiv(this.addr,$),sn(ee,$))}function yP(X,$){var ee=this.cache;nn(ee,$)||(X.uniform4uiv(this.addr,$),sn(ee,$))}function vP(X,$,ee){var ne=this.cache,ae=ee.allocateTextureUnit();ne[0]!==ae&&(X.uniform1i(this.addr,ae),ne[0]=ae),ee.setTexture2D($||of,ae)}function xP(X,$,ee){var ne=this.cache,ae=ee.allocateTextureUnit();ne[0]!==ae&&(X.uniform1i(this.addr,ae),ne[0]=ae),ee.setTexture3D($||lf,ae)}function bP(X,$,ee){var ne=this.cache,ae=ee.allocateTextureUnit();ne[0]!==ae&&(X.uniform1i(this.addr,ae),ne[0]=ae),ee.setTextureCube($||uf,ae)}function wP(X,$,ee){var ne=this.cache,ae=ee.allocateTextureUnit();ne[0]!==ae&&(X.uniform1i(this.addr,ae),ne[0]=ae),ee.setTexture2DArray($||sf,ae)}function MP(X,$){X.uniform1fv(this.addr,$)}function AP(X,$){var ee=Qa($,this.size,2);X.uniform2fv(this.addr,ee)}function TP(X,$){var ee=Qa($,this.size,3);X.uniform3fv(this.addr,ee)}function EP(X,$){var ee=Qa($,this.size,4);X.uniform4fv(this.addr,ee)}function _P(X,$){var ee=Qa($,this.size,4);X.uniformMatrix2fv(this.addr,!1,ee)}function CP(X,$){var ee=Qa($,this.size,9);X.uniformMatrix3fv(this.addr,!1,ee)}function DP(X,$){var ee=Qa($,this.size,16);X.uniformMatrix4fv(this.addr,!1,ee)}function PP(X,$){X.uniform1iv(this.addr,$)}function LP(X,$){X.uniform2iv(this.addr,$)}function IP(X,$){X.uniform3iv(this.addr,$)}function RP(X,$){X.uniform4iv(this.addr,$)}function BP(X,$){X.uniform1uiv(this.addr,$)}function NP(X,$){X.uniform2uiv(this.addr,$)}function OP(X,$){X.uniform3uiv(this.addr,$)}function FP(X,$){X.uniform4uiv(this.addr,$)}function UP(X,$,ee){var ne=$.length,ae=ed(ee,ne);X.uniform1iv(this.addr,ae);for(var de=0;de!==ne;++de)ee.setTexture2D($[de]||of,ae[de])}function zP(X,$,ee){var ne=$.length,ae=ed(ee,ne);X.uniform1iv(this.addr,ae);for(var de=0;de!==ne;++de)ee.setTexture3D($[de]||lf,ae[de])}function GP(X,$,ee){var ne=$.length,ae=ed(ee,ne);X.uniform1iv(this.addr,ae);for(var de=0;de!==ne;++de)ee.setTextureCube($[de]||uf,ae[de])}function kP(X,$,ee){var ne=$.length,ae=ed(ee,ne);X.uniform1iv(this.addr,ae);for(var de=0;de!==ne;++de)ee.setTexture2DArray($[de]||sf,ae[de])}function HP(X,$,ee){this.id=X,this.addr=ee,this.cache=[],this.setValue=function SP(X){switch(X){case 5126:return nP;case 35664:return iP;case 35665:return sP;case 35666:return oP;case 35674:return aP;case 35675:return lP;case 35676:return cP;case 5124:case 35670:return hP;case 35667:case 35671:return uP;case 35668:case 35672:return fP;case 35669:case 35673:return dP;case 5125:return pP;case 36294:return mP;case 36295:return gP;case 36296:return yP;case 35678:case 36198:case 36298:case 36306:case 35682:return vP;case 35679:case 36299:case 36307:return xP;case 35680:case 36300:case 36308:case 36293:return bP;case 36289:case 36303:case 36311:case 36292:return wP}}($.type)}function WP(X,$,ee){this.id=X,this.addr=ee,this.cache=[],this.size=$.size,this.setValue=function VP(X){switch(X){case 5126:return MP;case 35664:return AP;case 35665:return TP;case 35666:return EP;case 35674:return _P;case 35675:return CP;case 35676:return DP;case 5124:case 35670:return PP;case 35667:case 35671:return LP;case 35668:case 35672:return IP;case 35669:case 35673:return RP;case 5125:return BP;case 36294:return NP;case 36295:return OP;case 36296:return FP;case 35678:case 36198:case 36298:case 36306:case 35682:return UP;case 35679:case 36299:case 36307:return zP;case 35680:case 36300:case 36308:case 36293:return GP;case 36289:case 36303:case 36311:case 36292:return kP}}($.type)}function Tb(X){this.id=X,this.seq=[],this.map={}}Tb.prototype.setValue=function(X,$,ee){for(var ne=this.seq,ae=0,de=ne.length;ae!==de;++ae){var fe=ne[ae];fe.setValue(X,$[fe.id],ee)}};var ep=/(\w+)(\])?(\[|\.)?/g;function T0(X,$){X.seq.push($),X.map[$.id]=$}function jP(X,$,ee){var ne=X.name,ae=ne.length;for(ep.lastIndex=0;;){var de=ep.exec(ne),fe=ep.lastIndex,Ue=de[1],je="]"===de[2],Ke=de[3];if(je&&(Ue|=0),void 0===Ke||"["===Ke&&fe+2===ae){T0(ee,void 0===Ke?new HP(Ue,X,$):new WP(Ue,X,$));break}var et=ee.map[Ue];void 0===et&&T0(ee,et=new Tb(Ue)),ee=et}}function Is(X,$){this.seq=[],this.map={};for(var ee=X.getProgramParameter($,35718),ne=0;ne<ee;++ne){var ae=X.getActiveUniform($,ne);jP(ae,X.getUniformLocation($,ae.name),this)}}function E0(X,$,ee){var ne=X.createShader($);return X.shaderSource(ne,ee),X.compileShader(ne),ne}Is.prototype.setValue=function(X,$,ee,ne){var ae=this.map[$];void 0!==ae&&ae.setValue(X,ee,ne)},Is.prototype.setOptional=function(X,$,ee){var ne=$[ee];void 0!==ne&&this.setValue(X,ee,ne)},Is.upload=function(X,$,ee,ne){for(var ae=0,de=$.length;ae!==de;++ae){var fe=$[ae],Ue=ee[fe.id];!1!==Ue.needsUpdate&&fe.setValue(X,Ue.value,ne)}},Is.seqWithValue=function(X,$){for(var ee=[],ne=0,ae=X.length;ne!==ae;++ne){var de=X[ne];de.id in $&&ee.push(de)}return ee};var tp=0;function _0(X,$,ee){var ne=X.getShaderParameter($,35713),ae=X.getShaderInfoLog($).trim();if(ne&&""===ae)return"";var de=/ERROR: 0:(\d+)/.exec(ae);if(de){var fe=parseInt(de[0]);return ee.toUpperCase()+"\n\n"+ae+"\n\n"+function YP(X,$){for(var ee=X.split("\n"),ne=[],ae=Math.max($-6,0),de=Math.min($+6,ee.length),fe=ae;fe<de;fe++)ne.push(fe+1+": "+ee[fe]);return ne.join("\n")}(X.getShaderSource($),fe)}return ae}function QP(X,$){var ee=function XP(X){switch(X){case qr:return["Linear","( value )"];case Xr:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",X),["Linear","( value )"]}}($);return"vec4 "+X+"( vec4 value ) { return LinearTo"+ee[0]+ee[1]+"; }"}function JP(X,$){var ee;switch($){case 1:ee="Linear";break;case 2:ee="Reinhard";break;case 3:ee="OptimizedCineon";break;case 4:ee="ACESFilmic";break;case 5:ee="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",$),ee="Linear"}return"vec3 "+X+"( vec3 color ) { return "+ee+"ToneMapping( color ); }"}function Nc(X){return""!==X}function C0(X,$){return X.replace(/NUM_DIR_LIGHTS/g,$.numDirLights).replace(/NUM_SPOT_LIGHTS/g,$.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,$.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,$.numPointLights).replace(/NUM_HEMI_LIGHTS/g,$.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,$.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,$.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,$.numPointLightShadows)}function D0(X,$){return X.replace(/NUM_CLIPPING_PLANES/g,$.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,$.numClippingPlanes-$.numClipIntersection)}var np=/^[ \t]*#include +<([\w\d./]+)>/gm;function ug(X){return X.replace(np,tL)}function tL(X,$){var ee=Id[$];if(void 0===ee)throw new Error("Can not resolve #include <"+$+">");return ug(ee)}var rp=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,ip=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function P0(X){return X.replace(ip,Eb).replace(rp,iL)}function iL(X,$,ee,ne){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Eb(X,$,ee,ne)}function Eb(X,$,ee,ne){for(var ae="",de=parseInt($);de<parseInt(ee);de++)ae+=ne.replace(/\[\s*i\s*\]/g,"[ "+de+" ]").replace(/UNROLLED_LOOP_INDEX/g,de);return ae}function L0(X){var $="precision "+X.precision+" float;\nprecision "+X.precision+" int;";return"highp"===X.precision?$+="\n#define HIGH_PRECISION":"mediump"===X.precision?$+="\n#define MEDIUM_PRECISION":"lowp"===X.precision&&($+="\n#define LOW_PRECISION"),$}function hL(X,$,ee,ne){var ae,de,fe=X.getContext(),Ue=ee.defines,je=ee.vertexShader,Ke=ee.fragmentShader,et=function sL(X){var $="SHADOWMAP_TYPE_BASIC";return 1===X.shadowMapType?$="SHADOWMAP_TYPE_PCF":2===X.shadowMapType?$="SHADOWMAP_TYPE_PCF_SOFT":3===X.shadowMapType&&($="SHADOWMAP_TYPE_VSM"),$}(ee),tt=function oL(X){var $="ENVMAP_TYPE_CUBE";if(X.envMap)switch(X.envMapMode){case en:case tn:$="ENVMAP_TYPE_CUBE";break;case un:$="ENVMAP_TYPE_CUBE_UV"}return $}(ee),nt=function aL(X){var $="ENVMAP_MODE_REFLECTION";X.envMap&&X.envMapMode===tn&&($="ENVMAP_MODE_REFRACTION");return $}(ee),it=function lL(X){var $="ENVMAP_BLENDING_NONE";if(X.envMap)switch(X.combine){case 0:$="ENVMAP_BLENDING_MULTIPLY";break;case 1:$="ENVMAP_BLENDING_MIX";break;case 2:$="ENVMAP_BLENDING_ADD"}return $}(ee),ct=function cL(X){var $=X.envMapCubeUVHeight;if(null===$)return null;var ee=Math.log2($)-2,ne=1/$;return{texelWidth:1/(3*Math.max(Math.pow(2,ee),112)),texelHeight:ne,maxMip:ee}}(ee),dt=ee.isWebGL2?"":function KP(X){return[X.extensionDerivatives||X.envMapCubeUVHeight||X.bumpMap||X.tangentSpaceNormalMap||X.clearcoatNormalMap||X.flatShading||"physical"===X.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(X.extensionFragDepth||X.logarithmicDepthBuffer)&&X.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",X.extensionDrawBuffers&&X.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(X.extensionShaderTextureLOD||X.envMap||X.transmission)&&X.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Nc).join("\n")}(ee),vt=function ZP(X){var $=[];for(var ee in X){var ne=X[ee];!1!==ne&&$.push("#define "+ee+" "+ne)}return $.join("\n")}(Ue),gt=fe.createProgram(),yt=ee.glslVersion?"#version "+ee.glslVersion+"\n":"";ee.isRawShaderMaterial?((ae=[vt].filter(Nc).join("\n")).length>0&&(ae+="\n"),(de=[dt,vt].filter(Nc).join("\n")).length>0&&(de+="\n")):(ae=[L0(ee),"#define SHADER_NAME "+ee.shaderName,vt,ee.instancing?"#define USE_INSTANCING":"",ee.instancingColor?"#define USE_INSTANCING_COLOR":"",ee.supportsVertexTextures?"#define VERTEX_TEXTURES":"",ee.useFog&&ee.fog?"#define USE_FOG":"",ee.useFog&&ee.fogExp2?"#define FOG_EXP2":"",ee.map?"#define USE_MAP":"",ee.envMap?"#define USE_ENVMAP":"",ee.envMap?"#define "+nt:"",ee.lightMap?"#define USE_LIGHTMAP":"",ee.aoMap?"#define USE_AOMAP":"",ee.emissiveMap?"#define USE_EMISSIVEMAP":"",ee.bumpMap?"#define USE_BUMPMAP":"",ee.normalMap?"#define USE_NORMALMAP":"",ee.normalMap&&ee.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",ee.normalMap&&ee.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",ee.clearcoatMap?"#define USE_CLEARCOATMAP":"",ee.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",ee.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",ee.displacementMap&&ee.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",ee.specularMap?"#define USE_SPECULARMAP":"",ee.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",ee.specularColorMap?"#define USE_SPECULARCOLORMAP":"",ee.roughnessMap?"#define USE_ROUGHNESSMAP":"",ee.metalnessMap?"#define USE_METALNESSMAP":"",ee.alphaMap?"#define USE_ALPHAMAP":"",ee.transmission?"#define USE_TRANSMISSION":"",ee.transmissionMap?"#define USE_TRANSMISSIONMAP":"",ee.thicknessMap?"#define USE_THICKNESSMAP":"",ee.sheenColorMap?"#define USE_SHEENCOLORMAP":"",ee.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",ee.vertexTangents?"#define USE_TANGENT":"",ee.vertexColors?"#define USE_COLOR":"",ee.vertexAlphas?"#define USE_COLOR_ALPHA":"",ee.vertexUvs?"#define USE_UV":"",ee.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",ee.flatShading?"#define FLAT_SHADED":"",ee.skinning?"#define USE_SKINNING":"",ee.morphTargets?"#define USE_MORPHTARGETS":"",ee.morphNormals&&!1===ee.flatShading?"#define USE_MORPHNORMALS":"",ee.morphColors&&ee.isWebGL2?"#define USE_MORPHCOLORS":"",ee.morphTargetsCount>0&&ee.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",ee.morphTargetsCount>0&&ee.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+ee.morphTextureStride:"",ee.morphTargetsCount>0&&ee.isWebGL2?"#define MORPHTARGETS_COUNT "+ee.morphTargetsCount:"",ee.doubleSided?"#define DOUBLE_SIDED":"",ee.flipSided?"#define FLIP_SIDED":"",ee.shadowMapEnabled?"#define USE_SHADOWMAP":"",ee.shadowMapEnabled?"#define "+et:"",ee.sizeAttenuation?"#define USE_SIZEATTENUATION":"",ee.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",ee.logarithmicDepthBuffer&&ee.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Nc).join("\n"),de=[dt,L0(ee),"#define SHADER_NAME "+ee.shaderName,vt,ee.useFog&&ee.fog?"#define USE_FOG":"",ee.useFog&&ee.fogExp2?"#define FOG_EXP2":"",ee.map?"#define USE_MAP":"",ee.matcap?"#define USE_MATCAP":"",ee.envMap?"#define USE_ENVMAP":"",ee.envMap?"#define "+tt:"",ee.envMap?"#define "+nt:"",ee.envMap?"#define "+it:"",ct?"#define CUBEUV_TEXEL_WIDTH "+ct.texelWidth:"",ct?"#define CUBEUV_TEXEL_HEIGHT "+ct.texelHeight:"",ct?"#define CUBEUV_MAX_MIP "+ct.maxMip+".0":"",ee.lightMap?"#define USE_LIGHTMAP":"",ee.aoMap?"#define USE_AOMAP":"",ee.emissiveMap?"#define USE_EMISSIVEMAP":"",ee.bumpMap?"#define USE_BUMPMAP":"",ee.normalMap?"#define USE_NORMALMAP":"",ee.normalMap&&ee.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",ee.normalMap&&ee.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",ee.clearcoat?"#define USE_CLEARCOAT":"",ee.clearcoatMap?"#define USE_CLEARCOATMAP":"",ee.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",ee.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",ee.specularMap?"#define USE_SPECULARMAP":"",ee.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",ee.specularColorMap?"#define USE_SPECULARCOLORMAP":"",ee.roughnessMap?"#define USE_ROUGHNESSMAP":"",ee.metalnessMap?"#define USE_METALNESSMAP":"",ee.alphaMap?"#define USE_ALPHAMAP":"",ee.alphaTest?"#define USE_ALPHATEST":"",ee.sheen?"#define USE_SHEEN":"",ee.sheenColorMap?"#define USE_SHEENCOLORMAP":"",ee.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",ee.transmission?"#define USE_TRANSMISSION":"",ee.transmissionMap?"#define USE_TRANSMISSIONMAP":"",ee.thicknessMap?"#define USE_THICKNESSMAP":"",ee.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",ee.vertexTangents?"#define USE_TANGENT":"",ee.vertexColors||ee.instancingColor?"#define USE_COLOR":"",ee.vertexAlphas?"#define USE_COLOR_ALPHA":"",ee.vertexUvs?"#define USE_UV":"",ee.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",ee.gradientMap?"#define USE_GRADIENTMAP":"",ee.flatShading?"#define FLAT_SHADED":"",ee.doubleSided?"#define DOUBLE_SIDED":"",ee.flipSided?"#define FLIP_SIDED":"",ee.shadowMapEnabled?"#define USE_SHADOWMAP":"",ee.shadowMapEnabled?"#define "+et:"",ee.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",ee.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",ee.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",ee.logarithmicDepthBuffer&&ee.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",0!==ee.toneMapping?"#define TONE_MAPPING":"",0!==ee.toneMapping?Id.tonemapping_pars_fragment:"",0!==ee.toneMapping?JP("toneMapping",ee.toneMapping):"",ee.dithering?"#define DITHERING":"",ee.opaque?"#define OPAQUE":"",Id.encodings_pars_fragment,QP("linearToOutputTexel",ee.outputEncoding),ee.useDepthPacking?"#define DEPTH_PACKING "+ee.depthPacking:"","\n"].filter(Nc).join("\n")),je=D0(je=C0(je=ug(je),ee),ee),Ke=D0(Ke=C0(Ke=ug(Ke),ee),ee),je=P0(je),Ke=P0(Ke),ee.isWebGL2&&!0!==ee.isRawShaderMaterial&&(yt="#version 300 es\n",ae=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+ae,de=["#define varying in",ee.glslVersion===Zi?"":"layout(location = 0) out highp vec4 pc_fragColor;",ee.glslVersion===Zi?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+de);var _t,wt,St=yt+de+Ke,Ct=E0(fe,35633,yt+ae+je),At=E0(fe,35632,St);if(fe.attachShader(gt,Ct),fe.attachShader(gt,At),void 0!==ee.index0AttributeName?fe.bindAttribLocation(gt,0,ee.index0AttributeName):!0===ee.morphTargets&&fe.bindAttribLocation(gt,0,"position"),fe.linkProgram(gt),X.debug.checkShaderErrors){var Et=fe.getProgramInfoLog(gt).trim(),Rt=fe.getShaderInfoLog(Ct).trim(),Bt=fe.getShaderInfoLog(At).trim(),Ht=!0,Wt=!0;if(!1===fe.getProgramParameter(gt,35714)){Ht=!1;var qt=_0(fe,Ct,"vertex"),Zt=_0(fe,At,"fragment");console.error("THREE.WebGLProgram: Shader Error "+fe.getError()+" - VALIDATE_STATUS "+fe.getProgramParameter(gt,35715)+"\n\nProgram Info Log: "+Et+"\n"+qt+"\n"+Zt)}else""!==Et?console.warn("THREE.WebGLProgram: Program Info Log:",Et):(""===Rt||""===Bt)&&(Wt=!1);Wt&&(this.diagnostics={runnable:Ht,programLog:Et,vertexShader:{log:Rt,prefix:ae},fragmentShader:{log:Bt,prefix:de}})}return fe.deleteShader(Ct),fe.deleteShader(At),this.getUniforms=function(){return void 0===_t&&(_t=new Is(fe,gt)),_t},this.getAttributes=function(){return void 0===wt&&(wt=function $P(X,$){for(var ee={},ne=X.getProgramParameter($,35721),ae=0;ae<ne;ae++){var de=X.getActiveAttrib($,ae),fe=de.name,Ue=1;35674===de.type&&(Ue=2),35675===de.type&&(Ue=3),35676===de.type&&(Ue=4),ee[fe]={type:de.type,location:X.getAttribLocation($,fe),locationSize:Ue}}return ee}(fe,gt)),wt},this.destroy=function(){ne.releaseStatesOfProgram(this),fe.deleteProgram(gt),this.program=void 0},this.name=ee.shaderName,this.id=tp++,this.cacheKey=$,this.usedTimes=1,this.program=gt,this.vertexShader=Ct,this.fragmentShader=At,this}var ap=0,op=function(){function fg(){_classCallCheck(this,fg),this.shaderCache=new Map,this.materialCache=new Map}return _createClass(fg,[{key:"update",value:function update(X){var $=X.vertexShader,ee=X.fragmentShader,ne=this._getShaderStage($),ae=this._getShaderStage(ee),de=this._getShaderCacheForMaterial(X);return!1===de.has(ne)&&(de.add(ne),ne.usedTimes++),!1===de.has(ae)&&(de.add(ae),ae.usedTimes++),this}},{key:"remove",value:function remove(X){var $,ee=this.materialCache.get(X),ne=(0,je.Z)(ee);try{for(ne.s();!($=ne.n()).done;){var ae=$.value;ae.usedTimes--,0===ae.usedTimes&&this.shaderCache.delete(ae.code)}}catch(de){ne.e(de)}finally{ne.f()}return this.materialCache.delete(X),this}},{key:"getVertexShaderID",value:function getVertexShaderID(X){return this._getShaderStage(X.vertexShader).id}},{key:"getFragmentShaderID",value:function getFragmentShaderID(X){return this._getShaderStage(X.fragmentShader).id}},{key:"dispose",value:function dispose(){this.shaderCache.clear(),this.materialCache.clear()}},{key:"_getShaderCacheForMaterial",value:function _getShaderCacheForMaterial(X){var $=this.materialCache;return!1===$.has(X)&&$.set(X,new Set),$.get(X)}},{key:"_getShaderStage",value:function _getShaderStage(X){var $=this.shaderCache;if(!1===$.has(X)){var ee=new sp(X);$.set(X,ee)}return $.get(X)}}]),fg}(),sp=_createClass((function dg(X){_classCallCheck(this,dg),this.id=ap++,this.code=X,this.usedTimes=0}));function fL(X,$,ee,ne,ae,de,fe){var Ue=new Ks,je=new op,Ke=[],et=ae.isWebGL2,tt=ae.logarithmicDepthBuffer,nt=ae.vertexTextures,it=ae.precision,ct={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};return{getParameters:function m(de,Ue,Ke,dt,vt){var gt=dt.fog,yt=vt.geometry,_t=de.isMeshStandardMaterial?dt.environment:null,wt=(de.isMeshStandardMaterial?ee:$).get(de.envMap||_t),St=wt&&wt.mapping===un?wt.image.height:null,Ct=ct[de.type];null!==de.precision&&((it=ae.getMaxPrecision(de.precision))!==de.precision&&console.warn("THREE.WebGLProgram.getParameters:",de.precision,"not supported, using",it,"instead."));var At,Et,Rt,Bt,Ht=yt.morphAttributes.position||yt.morphAttributes.normal||yt.morphAttributes.color,Wt=void 0!==Ht?Ht.length:0,qt=0;if(void 0!==yt.morphAttributes.position&&(qt=1),void 0!==yt.morphAttributes.normal&&(qt=2),void 0!==yt.morphAttributes.color&&(qt=3),Ct){var Zt=Fd[Ct];At=Zt.vertexShader,Et=Zt.fragmentShader}else At=de.vertexShader,Et=de.fragmentShader,je.update(de),Rt=je.getVertexShaderID(de),Bt=je.getFragmentShaderID(de);var Xt=X.getRenderTarget(),Qt=de.alphaTest>0,en=de.clearcoat>0;return{isWebGL2:et,shaderID:Ct,shaderName:de.type,vertexShader:At,fragmentShader:Et,defines:de.defines,customVertexShaderID:Rt,customFragmentShaderID:Bt,isRawShaderMaterial:!0===de.isRawShaderMaterial,glslVersion:de.glslVersion,precision:it,instancing:!0===vt.isInstancedMesh,instancingColor:!0===vt.isInstancedMesh&&null!==vt.instanceColor,supportsVertexTextures:nt,outputEncoding:null===Xt?X.outputEncoding:!0===Xt.isXRRenderTarget?Xt.texture.encoding:qr,map:!!de.map,matcap:!!de.matcap,envMap:!!wt,envMapMode:wt&&wt.mapping,envMapCubeUVHeight:St,lightMap:!!de.lightMap,aoMap:!!de.aoMap,emissiveMap:!!de.emissiveMap,bumpMap:!!de.bumpMap,normalMap:!!de.normalMap,objectSpaceNormalMap:1===de.normalMapType,tangentSpaceNormalMap:0===de.normalMapType,decodeVideoTexture:!!de.map&&!0===de.map.isVideoTexture&&de.map.encoding===Xr,clearcoat:en,clearcoatMap:en&&!!de.clearcoatMap,clearcoatRoughnessMap:en&&!!de.clearcoatRoughnessMap,clearcoatNormalMap:en&&!!de.clearcoatNormalMap,displacementMap:!!de.displacementMap,roughnessMap:!!de.roughnessMap,metalnessMap:!!de.metalnessMap,specularMap:!!de.specularMap,specularIntensityMap:!!de.specularIntensityMap,specularColorMap:!!de.specularColorMap,opaque:!1===de.transparent&&1===de.blending,alphaMap:!!de.alphaMap,alphaTest:Qt,gradientMap:!!de.gradientMap,sheen:de.sheen>0,sheenColorMap:!!de.sheenColorMap,sheenRoughnessMap:!!de.sheenRoughnessMap,transmission:de.transmission>0,transmissionMap:!!de.transmissionMap,thicknessMap:!!de.thicknessMap,combine:de.combine,vertexTangents:!!de.normalMap&&!!yt.attributes.tangent,vertexColors:de.vertexColors,vertexAlphas:!0===de.vertexColors&&!!yt.attributes.color&&4===yt.attributes.color.itemSize,vertexUvs:!!de.map||!!de.bumpMap||!!de.normalMap||!!de.specularMap||!!de.alphaMap||!!de.emissiveMap||!!de.roughnessMap||!!de.metalnessMap||!!de.clearcoatMap||!!de.clearcoatRoughnessMap||!!de.clearcoatNormalMap||!!de.displacementMap||!!de.transmissionMap||!!de.thicknessMap||!!de.specularIntensityMap||!!de.specularColorMap||!!de.sheenColorMap||!!de.sheenRoughnessMap,uvsVertexOnly:!(de.map||de.bumpMap||de.normalMap||de.specularMap||de.alphaMap||de.emissiveMap||de.roughnessMap||de.metalnessMap||de.clearcoatNormalMap||de.transmission>0||de.transmissionMap||de.thicknessMap||de.specularIntensityMap||de.specularColorMap||de.sheen>0||de.sheenColorMap||de.sheenRoughnessMap)&&!!de.displacementMap,fog:!!gt,useFog:!0===de.fog,fogExp2:gt&&gt.isFogExp2,flatShading:!!de.flatShading,sizeAttenuation:de.sizeAttenuation,logarithmicDepthBuffer:tt,skinning:!0===vt.isSkinnedMesh,morphTargets:void 0!==yt.morphAttributes.position,morphNormals:void 0!==yt.morphAttributes.normal,morphColors:void 0!==yt.morphAttributes.color,morphTargetsCount:Wt,morphTextureStride:qt,numDirLights:Ue.directional.length,numPointLights:Ue.point.length,numSpotLights:Ue.spot.length,numRectAreaLights:Ue.rectArea.length,numHemiLights:Ue.hemi.length,numDirLightShadows:Ue.directionalShadowMap.length,numPointLightShadows:Ue.pointShadowMap.length,numSpotLightShadows:Ue.spotShadowMap.length,numClippingPlanes:fe.numPlanes,numClipIntersection:fe.numIntersection,dithering:de.dithering,shadowMapEnabled:X.shadowMap.enabled&&Ke.length>0,shadowMapType:X.shadowMap.type,toneMapping:de.toneMapped?X.toneMapping:0,physicallyCorrectLights:X.physicallyCorrectLights,premultipliedAlpha:de.premultipliedAlpha,doubleSided:2===de.side,flipSided:1===de.side,useDepthPacking:!!de.depthPacking,depthPacking:de.depthPacking||0,index0AttributeName:de.index0AttributeName,extensionDerivatives:de.extensions&&de.extensions.derivatives,extensionFragDepth:de.extensions&&de.extensions.fragDepth,extensionDrawBuffers:de.extensions&&de.extensions.drawBuffers,extensionShaderTextureLOD:de.extensions&&de.extensions.shaderTextureLOD,rendererExtensionFragDepth:et||ne.has("EXT_frag_depth"),rendererExtensionDrawBuffers:et||ne.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:et||ne.has("EXT_shader_texture_lod"),customProgramCacheKey:de.customProgramCacheKey()}},getProgramCacheKey:function g($){var ee=[];if($.shaderID?ee.push($.shaderID):(ee.push($.customVertexShaderID),ee.push($.customFragmentShaderID)),void 0!==$.defines)for(var ne in $.defines)ee.push(ne),ee.push($.defines[ne]);return!1===$.isRawShaderMaterial&&(function v(X,$){X.push($.precision),X.push($.outputEncoding),X.push($.envMapMode),X.push($.envMapCubeUVHeight),X.push($.combine),X.push($.vertexUvs),X.push($.fogExp2),X.push($.sizeAttenuation),X.push($.morphTargetsCount),X.push($.morphAttributeCount),X.push($.numDirLights),X.push($.numPointLights),X.push($.numSpotLights),X.push($.numHemiLights),X.push($.numRectAreaLights),X.push($.numDirLightShadows),X.push($.numPointLightShadows),X.push($.numSpotLightShadows),X.push($.shadowMapType),X.push($.toneMapping),X.push($.numClippingPlanes),X.push($.numClipIntersection),X.push($.depthPacking)}(ee,$),function y(X,$){Ue.disableAll(),$.isWebGL2&&Ue.enable(0),$.supportsVertexTextures&&Ue.enable(1),$.instancing&&Ue.enable(2),$.instancingColor&&Ue.enable(3),$.map&&Ue.enable(4),$.matcap&&Ue.enable(5),$.envMap&&Ue.enable(6),$.lightMap&&Ue.enable(7),$.aoMap&&Ue.enable(8),$.emissiveMap&&Ue.enable(9),$.bumpMap&&Ue.enable(10),$.normalMap&&Ue.enable(11),$.objectSpaceNormalMap&&Ue.enable(12),$.tangentSpaceNormalMap&&Ue.enable(13),$.clearcoat&&Ue.enable(14),$.clearcoatMap&&Ue.enable(15),$.clearcoatRoughnessMap&&Ue.enable(16),$.clearcoatNormalMap&&Ue.enable(17),$.displacementMap&&Ue.enable(18),$.specularMap&&Ue.enable(19),$.roughnessMap&&Ue.enable(20),$.metalnessMap&&Ue.enable(21),$.gradientMap&&Ue.enable(22),$.alphaMap&&Ue.enable(23),$.alphaTest&&Ue.enable(24),$.vertexColors&&Ue.enable(25),$.vertexAlphas&&Ue.enable(26),$.vertexUvs&&Ue.enable(27),$.vertexTangents&&Ue.enable(28),$.uvsVertexOnly&&Ue.enable(29),$.fog&&Ue.enable(30),X.push(Ue.mask),Ue.disableAll(),$.useFog&&Ue.enable(0),$.flatShading&&Ue.enable(1),$.logarithmicDepthBuffer&&Ue.enable(2),$.skinning&&Ue.enable(3),$.morphTargets&&Ue.enable(4),$.morphNormals&&Ue.enable(5),$.morphColors&&Ue.enable(6),$.premultipliedAlpha&&Ue.enable(7),$.shadowMapEnabled&&Ue.enable(8),$.physicallyCorrectLights&&Ue.enable(9),$.doubleSided&&Ue.enable(10),$.flipSided&&Ue.enable(11),$.useDepthPacking&&Ue.enable(12),$.dithering&&Ue.enable(13),$.specularIntensityMap&&Ue.enable(14),$.specularColorMap&&Ue.enable(15),$.transmission&&Ue.enable(16),$.transmissionMap&&Ue.enable(17),$.thicknessMap&&Ue.enable(18),$.sheen&&Ue.enable(19),$.sheenColorMap&&Ue.enable(20),$.sheenRoughnessMap&&Ue.enable(21),$.decodeVideoTexture&&Ue.enable(22),$.opaque&&Ue.enable(23),X.push(Ue.mask)}(ee,$),ee.push(X.outputEncoding)),ee.push($.customProgramCacheKey),ee.join()},getUniforms:function w(X){var $,ee=ct[X.type];if(ee){var ne=Fd[ee];$=Nh.clone(ne.uniforms)}else $=X.uniforms;return $},acquireProgram:function b($,ee){for(var ne,ae=0,fe=Ke.length;ae<fe;ae++){var Ue=Ke[ae];if(Ue.cacheKey===ee){++(ne=Ue).usedTimes;break}}return void 0===ne&&(ne=new hL(X,ee,$,de),Ke.push(ne)),ne},releaseProgram:function S(X){if(0===--X.usedTimes){var $=Ke.indexOf(X);Ke[$]=Ke[Ke.length-1],Ke.pop(),X.destroy()}},releaseShaderCache:function T(X){je.remove(X)},programs:Ke,dispose:function A(){je.dispose()}}}function dL(){var X=new WeakMap;return{get:function e($){var ee=X.get($);return void 0===ee&&(ee={},X.set($,ee)),ee},remove:function t($){X.delete($)},update:function r($,ee,ne){X.get($)[ee]=ne},dispose:function n(){X=new WeakMap}}}function pL(X,$){return X.groupOrder!==$.groupOrder?X.groupOrder-$.groupOrder:X.renderOrder!==$.renderOrder?X.renderOrder-$.renderOrder:X.material.id!==$.material.id?X.material.id-$.material.id:X.z!==$.z?X.z-$.z:X.id-$.id}function I0(X,$){return X.groupOrder!==$.groupOrder?X.groupOrder-$.groupOrder:X.renderOrder!==$.renderOrder?X.renderOrder-$.renderOrder:X.z!==$.z?$.z-X.z:X.id-$.id}function R0(){var X=[],$=0,ee=[],ne=[],ae=[];function o(ee,ne,ae,de,fe,Ue){var je=X[$];return void 0===je?(je={id:ee.id,object:ee,geometry:ne,material:ae,groupOrder:de,renderOrder:ee.renderOrder,z:fe,group:Ue},X[$]=je):(je.id=ee.id,je.object=ee,je.geometry=ne,je.material=ae,je.groupOrder=de,je.renderOrder=ee.renderOrder,je.z=fe,je.group=Ue),$++,je}return{opaque:ee,transmissive:ne,transparent:ae,init:function s(){$=0,ee.length=0,ne.length=0,ae.length=0},push:function a(X,$,de,fe,Ue,je){var Ke=o(X,$,de,fe,Ue,je);de.transmission>0?ne.push(Ke):!0===de.transparent?ae.push(Ke):ee.push(Ke)},unshift:function l(X,$,de,fe,Ue,je){var Ke=o(X,$,de,fe,Ue,je);de.transmission>0?ne.unshift(Ke):!0===de.transparent?ae.unshift(Ke):ee.unshift(Ke)},finish:function h(){for(var ee=$,ne=X.length;ee<ne;ee++){var ae=X[ee];if(null===ae.id)break;ae.id=null,ae.object=null,ae.geometry=null,ae.material=null,ae.group=null}},sort:function c(X,$){ee.length>1&&ee.sort(X||pL),ne.length>1&&ne.sort($||I0),ae.length>1&&ae.sort($||I0)}}}function mL(){var X=new WeakMap;return{get:function e($,ee){var ne;return!1===X.has($)?(ne=new R0,X.set($,[ne])):ee>=X.get($).length?(ne=new R0,X.get($).push(ne)):ne=X.get($)[ee],ne},dispose:function t(){X=new WeakMap}}}function gL(){var X={};return{get:function get($){if(void 0!==X[$.id])return X[$.id];var ee;switch($.type){case"DirectionalLight":ee={direction:new wo,color:new Ma};break;case"SpotLight":ee={position:new wo,direction:new wo,color:new Ma,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":ee={position:new wo,color:new Ma,distance:0,decay:0};break;case"HemisphereLight":ee={direction:new wo,skyColor:new Ma,groundColor:new Ma};break;case"RectAreaLight":ee={color:new Ma,position:new wo,halfWidth:new wo,halfHeight:new wo}}return X[$.id]=ee,ee}}}var lp=0;function xL(X,$){return($.castShadow?1:0)-(X.castShadow?1:0)}function bL(X,$){for(var ee=new gL,ne=function yL(){var X={};return{get:function get($){if(void 0!==X[$.id])return X[$.id];var ee;switch($.type){case"DirectionalLight":case"SpotLight":ee={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new va};break;case"PointLight":ee={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new va,shadowCameraNear:1,shadowCameraFar:1e3}}return X[$.id]=ee,ee}}}(),ae={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},de=0;de<9;de++)ae.probe.push(new wo);var fe=new wo,Ue=new Ds,je=new Ds;return{setup:function l(de,fe){for(var Ue=0,je=0,Ke=0,et=0;et<9;et++)ae.probe[et].set(0,0,0);var tt=0,nt=0,it=0,ct=0,dt=0,vt=0,gt=0,yt=0;de.sort(xL);for(var _t=!0!==fe?Math.PI:1,wt=0,St=de.length;wt<St;wt++){var Ct=de[wt],At=Ct.color,Et=Ct.intensity,Rt=Ct.distance,Bt=Ct.shadow&&Ct.shadow.map?Ct.shadow.map.texture:null;if(Ct.isAmbientLight)Ue+=At.r*Et*_t,je+=At.g*Et*_t,Ke+=At.b*Et*_t;else if(Ct.isLightProbe)for(var Ht=0;Ht<9;Ht++)ae.probe[Ht].addScaledVector(Ct.sh.coefficients[Ht],Et);else if(Ct.isDirectionalLight){var Wt=ee.get(Ct);if(Wt.color.copy(Ct.color).multiplyScalar(Ct.intensity*_t),Ct.castShadow){var qt=Ct.shadow,Zt=ne.get(Ct);Zt.shadowBias=qt.bias,Zt.shadowNormalBias=qt.normalBias,Zt.shadowRadius=qt.radius,Zt.shadowMapSize=qt.mapSize,ae.directionalShadow[tt]=Zt,ae.directionalShadowMap[tt]=Bt,ae.directionalShadowMatrix[tt]=Ct.shadow.matrix,vt++}ae.directional[tt]=Wt,tt++}else if(Ct.isSpotLight){var Xt=ee.get(Ct);if(Xt.position.setFromMatrixPosition(Ct.matrixWorld),Xt.color.copy(At).multiplyScalar(Et*_t),Xt.distance=Rt,Xt.coneCos=Math.cos(Ct.angle),Xt.penumbraCos=Math.cos(Ct.angle*(1-Ct.penumbra)),Xt.decay=Ct.decay,Ct.castShadow){var Qt=Ct.shadow,en=ne.get(Ct);en.shadowBias=Qt.bias,en.shadowNormalBias=Qt.normalBias,en.shadowRadius=Qt.radius,en.shadowMapSize=Qt.mapSize,ae.spotShadow[it]=en,ae.spotShadowMap[it]=Bt,ae.spotShadowMatrix[it]=Ct.shadow.matrix,yt++}ae.spot[it]=Xt,it++}else if(Ct.isRectAreaLight){var tn=ee.get(Ct);tn.color.copy(At).multiplyScalar(Et),tn.halfWidth.set(.5*Ct.width,0,0),tn.halfHeight.set(0,.5*Ct.height,0),ae.rectArea[ct]=tn,ct++}else if(Ct.isPointLight){var un=ee.get(Ct);if(un.color.copy(Ct.color).multiplyScalar(Ct.intensity*_t),un.distance=Ct.distance,un.decay=Ct.decay,Ct.castShadow){var hn=Ct.shadow,dn=ne.get(Ct);dn.shadowBias=hn.bias,dn.shadowNormalBias=hn.normalBias,dn.shadowRadius=hn.radius,dn.shadowMapSize=hn.mapSize,dn.shadowCameraNear=hn.camera.near,dn.shadowCameraFar=hn.camera.far,ae.pointShadow[nt]=dn,ae.pointShadowMap[nt]=Bt,ae.pointShadowMatrix[nt]=Ct.shadow.matrix,gt++}ae.point[nt]=un,nt++}else if(Ct.isHemisphereLight){var mn=ee.get(Ct);mn.skyColor.copy(Ct.color).multiplyScalar(Et*_t),mn.groundColor.copy(Ct.groundColor).multiplyScalar(Et*_t),ae.hemi[dt]=mn,dt++}}ct>0&&($.isWebGL2||!0===X.has("OES_texture_float_linear")?(ae.rectAreaLTC1=Nd.LTC_FLOAT_1,ae.rectAreaLTC2=Nd.LTC_FLOAT_2):!0===X.has("OES_texture_half_float_linear")?(ae.rectAreaLTC1=Nd.LTC_HALF_1,ae.rectAreaLTC2=Nd.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),ae.ambient[0]=Ue,ae.ambient[1]=je,ae.ambient[2]=Ke;var gn=ae.hash;(gn.directionalLength!==tt||gn.pointLength!==nt||gn.spotLength!==it||gn.rectAreaLength!==ct||gn.hemiLength!==dt||gn.numDirectionalShadows!==vt||gn.numPointShadows!==gt||gn.numSpotShadows!==yt)&&(ae.directional.length=tt,ae.spot.length=it,ae.rectArea.length=ct,ae.point.length=nt,ae.hemi.length=dt,ae.directionalShadow.length=vt,ae.directionalShadowMap.length=vt,ae.pointShadow.length=gt,ae.pointShadowMap.length=gt,ae.spotShadow.length=yt,ae.spotShadowMap.length=yt,ae.directionalShadowMatrix.length=vt,ae.pointShadowMatrix.length=gt,ae.spotShadowMatrix.length=yt,gn.directionalLength=tt,gn.pointLength=nt,gn.spotLength=it,gn.rectAreaLength=ct,gn.hemiLength=dt,gn.numDirectionalShadows=vt,gn.numPointShadows=gt,gn.numSpotShadows=yt,ae.version=lp++)},setupView:function c(X,$){for(var ee=0,ne=0,de=0,Ke=0,et=0,tt=$.matrixWorldInverse,nt=0,it=X.length;nt<it;nt++){var ct=X[nt];if(ct.isDirectionalLight){var dt=ae.directional[ee];dt.direction.setFromMatrixPosition(ct.matrixWorld),fe.setFromMatrixPosition(ct.target.matrixWorld),dt.direction.sub(fe),dt.direction.transformDirection(tt),ee++}else if(ct.isSpotLight){var vt=ae.spot[de];vt.position.setFromMatrixPosition(ct.matrixWorld),vt.position.applyMatrix4(tt),vt.direction.setFromMatrixPosition(ct.matrixWorld),fe.setFromMatrixPosition(ct.target.matrixWorld),vt.direction.sub(fe),vt.direction.transformDirection(tt),de++}else if(ct.isRectAreaLight){var gt=ae.rectArea[Ke];gt.position.setFromMatrixPosition(ct.matrixWorld),gt.position.applyMatrix4(tt),je.identity(),Ue.copy(ct.matrixWorld),Ue.premultiply(tt),je.extractRotation(Ue),gt.halfWidth.set(.5*ct.width,0,0),gt.halfHeight.set(0,.5*ct.height,0),gt.halfWidth.applyMatrix4(je),gt.halfHeight.applyMatrix4(je),Ke++}else if(ct.isPointLight){var yt=ae.point[ne];yt.position.setFromMatrixPosition(ct.matrixWorld),yt.position.applyMatrix4(tt),ne++}else if(ct.isHemisphereLight){var _t=ae.hemi[et];_t.direction.setFromMatrixPosition(ct.matrixWorld),_t.direction.transformDirection(tt),et++}}},state:ae}}function B0(X,$){var ee=new bL(X,$),ne=[],ae=[];return{init:function s(){ne.length=0,ae.length=0},state:{lightsArray:ne,shadowsArray:ae,lights:ee},setupLights:function l(X){ee.setup(ne,X)},setupLightsView:function c(X){ee.setupView(ne,X)},pushLight:function o(X){ne.push(X)},pushShadow:function a(X){ae.push(X)}}}function wL(X,$){var ee=new WeakMap;return{get:function r(ne){var ae,de=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return!1===ee.has(ne)?(ae=new B0(X,$),ee.set(ne,[ae])):de>=ee.get(ne).length?(ae=new B0(X,$),ee.get(ne).push(ae)):ae=ee.get(ne)[de],ae},dispose:function n(){ee=new WeakMap}}}var up=function(X){_inherits(Qc,X);var $=_createSuper(Qc);function Qc(X){var ee;return _classCallCheck(this,Qc),(ee=$.call(this)).type="MeshDepthMaterial",ee.depthPacking=Kr,ee.map=null,ee.alphaMap=null,ee.displacementMap=null,ee.displacementScale=1,ee.displacementBias=0,ee.wireframe=!1,ee.wireframeLinewidth=1,ee.setValues(X),ee}return _createClass(Qc,[{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Qc.prototype),"copy",this).call(this,X),this.depthPacking=X.depthPacking,this.map=X.map,this.alphaMap=X.alphaMap,this.displacementMap=X.displacementMap,this.displacementScale=X.displacementScale,this.displacementBias=X.displacementBias,this.wireframe=X.wireframe,this.wireframeLinewidth=X.wireframeLinewidth,this}}]),Qc}(Au);up.prototype.isMeshDepthMaterial=!0;var hp=function(X){_inherits(Jc,X);var $=_createSuper(Jc);function Jc(X){var ee;return _classCallCheck(this,Jc),(ee=$.call(this)).type="MeshDistanceMaterial",ee.referencePosition=new wo,ee.nearDistance=1,ee.farDistance=1e3,ee.map=null,ee.alphaMap=null,ee.displacementMap=null,ee.displacementScale=1,ee.displacementBias=0,ee.setValues(X),ee}return _createClass(Jc,[{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Jc.prototype),"copy",this).call(this,X),this.referencePosition.copy(X.referencePosition),this.nearDistance=X.nearDistance,this.farDistance=X.farDistance,this.map=X.map,this.alphaMap=X.alphaMap,this.displacementMap=X.displacementMap,this.displacementScale=X.displacementScale,this.displacementBias=X.displacementBias,this}}]),Jc}(Au);hp.prototype.isMeshDistanceMaterial=!0;function _b(X,$,ee){var ne=new Od,ae=new va,de=new va,fe=new to,Ue=new up({depthPacking:3201}),je=new hp,Ke={},et=ee.maxTextureSize,tt={0:1,1:0,2:2},nt=new $h({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new va},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),it=nt.clone();it.defines.HORIZONTAL_PASS=1;var ct=new Wu;ct.setAttribute("position",new Lu(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));var dt=new Oh(ct,nt),vt=this;function v(ee,ne){var ae=$.update(dt);nt.defines.VSM_SAMPLES!==ee.blurSamples&&(nt.defines.VSM_SAMPLES=ee.blurSamples,it.defines.VSM_SAMPLES=ee.blurSamples,nt.needsUpdate=!0,it.needsUpdate=!0),nt.uniforms.shadow_pass.value=ee.map.texture,nt.uniforms.resolution.value=ee.mapSize,nt.uniforms.radius.value=ee.radius,X.setRenderTarget(ee.mapPass),X.clear(),X.renderBufferDirect(ne,null,ae,nt,dt,null),it.uniforms.shadow_pass.value=ee.mapPass.texture,it.uniforms.resolution.value=ee.mapSize,it.uniforms.radius.value=ee.radius,X.setRenderTarget(ee.map),X.clear(),X.renderBufferDirect(ne,null,ae,it,dt,null)}function y($,ee,ne,ae,de,fe){var et=null,nt=!0===ne.isPointLight?$.customDistanceMaterial:$.customDepthMaterial;if(et=void 0!==nt?nt:!0===ne.isPointLight?je:Ue,X.localClippingEnabled&&!0===ee.clipShadows&&0!==ee.clippingPlanes.length||ee.displacementMap&&0!==ee.displacementScale||ee.alphaMap&&ee.alphaTest>0){var it=et.uuid,ct=ee.uuid,dt=Ke[it];void 0===dt&&(dt={},Ke[it]=dt);var vt=dt[ct];void 0===vt&&(vt=et.clone(),dt[ct]=vt),et=vt}return et.visible=ee.visible,et.wireframe=ee.wireframe,et.side=3===fe?null!==ee.shadowSide?ee.shadowSide:ee.side:null!==ee.shadowSide?ee.shadowSide:tt[ee.side],et.alphaMap=ee.alphaMap,et.alphaTest=ee.alphaTest,et.clipShadows=ee.clipShadows,et.clippingPlanes=ee.clippingPlanes,et.clipIntersection=ee.clipIntersection,et.displacementMap=ee.displacementMap,et.displacementScale=ee.displacementScale,et.displacementBias=ee.displacementBias,et.wireframeLinewidth=ee.wireframeLinewidth,et.linewidth=ee.linewidth,!0===ne.isPointLight&&!0===et.isMeshDistanceMaterial&&(et.referencePosition.setFromMatrixPosition(ne.matrixWorld),et.nearDistance=ae,et.farDistance=de),et}function w(ee,ae,de,fe,Ue){if(!1!==ee.visible){if(ee.layers.test(ae.layers)&&(ee.isMesh||ee.isLine||ee.isPoints)&&(ee.castShadow||ee.receiveShadow&&3===Ue)&&(!ee.frustumCulled||ne.intersectsObject(ee))){ee.modelViewMatrix.multiplyMatrices(de.matrixWorldInverse,ee.matrixWorld);var je=$.update(ee),Ke=ee.material;if(Array.isArray(Ke))for(var et=je.groups,tt=0,nt=et.length;tt<nt;tt++){var it=et[tt],ct=Ke[it.materialIndex];if(ct&&ct.visible){var dt=y(ee,ct,fe,de.near,de.far,Ue);X.renderBufferDirect(de,null,je,dt,ee,it)}}else if(Ke.visible){var vt=y(ee,Ke,fe,de.near,de.far,Ue);X.renderBufferDirect(de,null,je,vt,ee,null)}}for(var gt=ee.children,yt=0,_t=gt.length;yt<_t;yt++)w(gt[yt],ae,de,fe,Ue)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function($,ee,Ue){if(!1!==vt.enabled&&(!1!==vt.autoUpdate||!1!==vt.needsUpdate)&&0!==$.length){var je=X.getRenderTarget(),Ke=X.getActiveCubeFace(),tt=X.getActiveMipmapLevel(),nt=X.state;nt.setBlending(0),nt.buffers.color.setClear(1,1,1,1),nt.buffers.depth.setTest(!0),nt.setScissorTest(!1);for(var it=0,ct=$.length;it<ct;it++){var dt=$[it],gt=dt.shadow;if(void 0!==gt){if(!1!==gt.autoUpdate||!1!==gt.needsUpdate){ae.copy(gt.mapSize);var yt=gt.getFrameExtents();if(ae.multiply(yt),de.copy(gt.mapSize),(ae.x>et||ae.y>et)&&(ae.x>et&&(de.x=Math.floor(et/yt.x),ae.x=de.x*yt.x,gt.mapSize.x=de.x),ae.y>et&&(de.y=Math.floor(et/yt.y),ae.y=de.y*yt.y,gt.mapSize.y=de.y)),null===gt.map&&!gt.isPointLightShadow&&3===this.type&&(gt.map=new ro(ae.x,ae.y),gt.map.texture.name=dt.name+".shadowMap",gt.mapPass=new ro(ae.x,ae.y),gt.camera.updateProjectionMatrix()),null===gt.map){var _t={minFilter:gn,magFilter:gn,format:Pn};gt.map=new ro(ae.x,ae.y,_t),gt.map.texture.name=dt.name+".shadowMap",gt.camera.updateProjectionMatrix()}X.setRenderTarget(gt.map),X.clear();for(var wt=gt.getViewportCount(),St=0;St<wt;St++){var Ct=gt.getViewport(St);fe.set(de.x*Ct.x,de.y*Ct.y,de.x*Ct.z,de.y*Ct.w),nt.viewport(fe),gt.updateMatrices(dt,St),ne=gt.getFrustum(),w(ee,Ue,gt.camera,dt,this.type)}!gt.isPointLightShadow&&3===this.type&&v(gt,Ue),gt.needsUpdate=!1}}else console.warn("THREE.WebGLShadowMap:",dt,"has no shadow.")}vt.needsUpdate=!1,X.setRenderTarget(je,Ke,tt)}}}function AL(X,$,ee){var ae,de,fe=ee.isWebGL2;var Ue=new function n(){var $=!1,ee=new to,ne=null,ae=new to(0,0,0,0);return{setMask:function setMask(ee){ne!==ee&&!$&&(X.colorMask(ee,ee,ee,ee),ne=ee)},setLocked:function setLocked(X){$=X},setClear:function setClear($,ne,de,fe,Ue){!0===Ue&&($*=fe,ne*=fe,de*=fe),ee.set($,ne,de,fe),!1===ae.equals(ee)&&(X.clearColor($,ne,de,fe),ae.copy(ee))},reset:function reset(){$=!1,ne=null,ae.set(-1,0,0,0)}}},je=new function s(){var $=!1,ee=null,ne=null,ae=null;return{setTest:function setTest(X){X?J(2929):W(2929)},setMask:function setMask(ne){ee!==ne&&!$&&(X.depthMask(ne),ee=ne)},setFunc:function setFunc($){if(ne!==$){if($)switch($){case 0:X.depthFunc(512);break;case 1:X.depthFunc(519);break;case 2:X.depthFunc(513);break;case 3:default:X.depthFunc(515);break;case 4:X.depthFunc(514);break;case 5:X.depthFunc(518);break;case 6:X.depthFunc(516);break;case 7:X.depthFunc(517)}else X.depthFunc(515);ne=$}},setLocked:function setLocked(X){$=X},setClear:function setClear($){ae!==$&&(X.clearDepth($),ae=$)},reset:function reset(){$=!1,ee=null,ne=null,ae=null}}},Ke=new function o(){var $=!1,ee=null,ne=null,ae=null,de=null,fe=null,Ue=null,je=null,Ke=null;return{setTest:function setTest(X){$||(X?J(2960):W(2960))},setMask:function setMask(ne){ee!==ne&&!$&&(X.stencilMask(ne),ee=ne)},setFunc:function setFunc($,ee,fe){(ne!==$||ae!==ee||de!==fe)&&(X.stencilFunc($,ee,fe),ne=$,ae=ee,de=fe)},setOp:function setOp($,ee,ne){(fe!==$||Ue!==ee||je!==ne)&&(X.stencilOp($,ee,ne),fe=$,Ue=ee,je=ne)},setLocked:function setLocked(X){$=X},setClear:function setClear($){Ke!==$&&(X.clearStencil($),Ke=$)},reset:function reset(){$=!1,ee=null,ne=null,ae=null,de=null,fe=null,Ue=null,je=null,Ke=null}}},et={},tt={},nt=new WeakMap,it=[],ct=null,dt=!1,vt=null,gt=null,yt=null,_t=null,wt=null,St=null,Ct=null,At=!1,Et=null,Rt=null,Bt=null,Ht=null,Wt=null,qt=X.getParameter(35661),Zt=!1,Xt=0,en=X.getParameter(7938);-1!==en.indexOf("WebGL")?(Xt=parseFloat(/^WebGL (\d)/.exec(en)[1]),Zt=Xt>=1):-1!==en.indexOf("OpenGL ES")&&(Xt=parseFloat(/^OpenGL ES (\d)/.exec(en)[1]),Zt=Xt>=2);var tn=null,un={},hn=X.getParameter(3088),dn=X.getParameter(2978),mn=(new to).fromArray(hn),gn=(new to).fromArray(dn);function j($,ee,ne){var ae=new Uint8Array(4),de=X.createTexture();X.bindTexture($,de),X.texParameteri($,10241,9728),X.texParameteri($,10240,9728);for(var fe=0;fe<ne;fe++)X.texImage2D(ee+fe,0,6408,1,1,0,6408,5121,ae);return de}var _n={};function J($){!0!==et[$]&&(X.enable($),et[$]=!0)}function W($){!1!==et[$]&&(X.disable($),et[$]=!1)}_n[3553]=j(3553,3553,1),_n[34067]=j(34067,34069,6),Ue.setClear(0,0,0,1),je.setClear(1),Ke.setClear(0),J(2929),je.setFunc(3),Z(!1),ce(1),J(2884),K(0);var wn=(ae={},(0,ne.Z)(ae,Qt,32774),(0,ne.Z)(ae,101,32778),(0,ne.Z)(ae,102,32779),ae);if(fe)wn[103]=32775,wn[104]=32776;else{var Sn=$.get("EXT_blend_minmax");null!==Sn&&(wn[103]=Sn.MIN_EXT,wn[104]=Sn.MAX_EXT)}var Cn=(de={},(0,ne.Z)(de,200,0),(0,ne.Z)(de,201,1),(0,ne.Z)(de,202,768),(0,ne.Z)(de,204,770),(0,ne.Z)(de,210,776),(0,ne.Z)(de,208,774),(0,ne.Z)(de,206,772),(0,ne.Z)(de,203,769),(0,ne.Z)(de,205,771),(0,ne.Z)(de,209,775),(0,ne.Z)(de,207,773),de);function K($,ee,ne,ae,de,fe,Ue,je){if(0!==$){if(!1===dt&&(J(3042),dt=!0),5===$)de=de||ee,fe=fe||ne,Ue=Ue||ae,(ee!==gt||de!==wt)&&(X.blendEquationSeparate(wn[ee],wn[de]),gt=ee,wt=de),(ne!==yt||ae!==_t||fe!==St||Ue!==Ct)&&(X.blendFuncSeparate(Cn[ne],Cn[ae],Cn[fe],Cn[Ue]),yt=ne,_t=ae,St=fe,Ct=Ue),vt=$,At=null;else if($!==vt||je!==At){if((gt!==Qt||wt!==Qt)&&(X.blendEquation(32774),gt=Qt,wt=Qt),je)switch($){case 1:X.blendFuncSeparate(1,771,1,771);break;case 2:X.blendFunc(1,1);break;case 3:X.blendFuncSeparate(0,769,0,1);break;case 4:X.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",$)}else switch($){case 1:X.blendFuncSeparate(770,771,1,771);break;case 2:X.blendFunc(770,1);break;case 3:X.blendFuncSeparate(0,769,0,1);break;case 4:X.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",$)}yt=null,_t=null,St=null,Ct=null,vt=$,At=je}}else!0===dt&&(W(3042),dt=!1)}function Z($){Et!==$&&($?X.frontFace(2304):X.frontFace(2305),Et=$)}function ce($){0!==$?(J(2884),$!==Rt&&(1===$?X.cullFace(1029):2===$?X.cullFace(1028):X.cullFace(1032))):W(2884),Rt=$}function pe($,ee,ne){$?(J(32823),(Ht!==ee||Wt!==ne)&&(X.polygonOffset(ee,ne),Ht=ee,Wt=ne)):W(32823)}function me($){void 0===$&&($=33984+qt-1),tn!==$&&(X.activeTexture($),tn=$)}return{buffers:{color:Ue,depth:je,stencil:Ke},enable:J,disable:W,bindFramebuffer:function ge($,ee){return tt[$]!==ee&&(X.bindFramebuffer($,ee),tt[$]=ee,fe&&(36009===$&&(tt[36160]=ee),36160===$&&(tt[36009]=ee)),!0)},drawBuffers:function oe(ne,ae){var de=it,fe=!1;if(ne)if(void 0===(de=nt.get(ae))&&(de=[],nt.set(ae,de)),ne.isWebGLMultipleRenderTargets){var Ue=ne.texture;if(de.length!==Ue.length||36064!==de[0]){for(var je=0,Ke=Ue.length;je<Ke;je++)de[je]=36064+je;de.length=Ue.length,fe=!0}}else 36064!==de[0]&&(de[0]=36064,fe=!0);else 1029!==de[0]&&(de[0]=1029,fe=!0);fe&&(ee.isWebGL2?X.drawBuffers(de):$.get("WEBGL_draw_buffers").drawBuffersWEBGL(de))},useProgram:function le($){return ct!==$&&(X.useProgram($),ct=$,!0)},setBlending:K,setMaterial:function V(X,$){2===X.side?W(2884):J(2884);var ee=1===X.side;$&&(ee=!ee),Z(ee),1===X.blending&&!1===X.transparent?K(0):K(X.blending,X.blendEquation,X.blendSrc,X.blendDst,X.blendEquationAlpha,X.blendSrcAlpha,X.blendDstAlpha,X.premultipliedAlpha),je.setFunc(X.depthFunc),je.setTest(X.depthTest),je.setMask(X.depthWrite),Ue.setMask(X.colorWrite);var ne=X.stencilWrite;Ke.setTest(ne),ne&&(Ke.setMask(X.stencilWriteMask),Ke.setFunc(X.stencilFunc,X.stencilRef,X.stencilFuncMask),Ke.setOp(X.stencilFail,X.stencilZFail,X.stencilZPass)),pe(X.polygonOffset,X.polygonOffsetFactor,X.polygonOffsetUnits),!0===X.alphaToCoverage?J(32926):W(32926)},setFlipSided:Z,setCullFace:ce,setLineWidth:function se($){$!==Bt&&(Zt&&X.lineWidth($),Bt=$)},setPolygonOffset:pe,setScissorTest:function ve(X){X?J(3089):W(3089)},activeTexture:me,bindTexture:function Pe($,ee){null===tn&&me();var ne=un[tn];void 0===ne&&(ne={type:void 0,texture:void 0},un[tn]=ne),(ne.type!==$||ne.texture!==ee)&&(X.bindTexture($,ee||_n[$]),ne.type=$,ne.texture=ee)},unbindTexture:function ke(){var $=un[tn];void 0!==$&&void 0!==$.type&&(X.bindTexture($.type,null),$.type=void 0,$.texture=void 0)},compressedTexImage2D:function L(){try{X.compressedTexImage2D.apply(X,arguments)}catch(Sn){console.error("THREE.WebGLState:",Sn)}},texImage2D:function Fe(){try{X.texImage2D.apply(X,arguments)}catch(Sn){console.error("THREE.WebGLState:",Sn)}},texImage3D:function ue(){try{X.texImage3D.apply(X,arguments)}catch(Sn){console.error("THREE.WebGLState:",Sn)}},texStorage2D:function Se(){try{X.texStorage2D.apply(X,arguments)}catch(Sn){console.error("THREE.WebGLState:",Sn)}},texStorage3D:function Ie(){try{X.texStorage3D.apply(X,arguments)}catch(Sn){console.error("THREE.WebGLState:",Sn)}},texSubImage2D:function D(){try{X.texSubImage2D.apply(X,arguments)}catch(Sn){console.error("THREE.WebGLState:",Sn)}},texSubImage3D:function re(){try{X.texSubImage3D.apply(X,arguments)}catch(Sn){console.error("THREE.WebGLState:",Sn)}},compressedTexSubImage2D:function ye(){try{X.compressedTexSubImage2D.apply(X,arguments)}catch(Sn){console.error("THREE.WebGLState:",Sn)}},scissor:function rt($){!1===mn.equals($)&&(X.scissor($.x,$.y,$.z,$.w),mn.copy($))},viewport:function st($){!1===gn.equals($)&&(X.viewport($.x,$.y,$.z,$.w),gn.copy($))},reset:function Ee(){X.disable(3042),X.disable(2884),X.disable(2929),X.disable(32823),X.disable(3089),X.disable(2960),X.disable(32926),X.blendEquation(32774),X.blendFunc(1,0),X.blendFuncSeparate(1,0,1,0),X.colorMask(!0,!0,!0,!0),X.clearColor(0,0,0,0),X.depthMask(!0),X.depthFunc(513),X.clearDepth(1),X.stencilMask(4294967295),X.stencilFunc(519,0,4294967295),X.stencilOp(7680,7680,7680),X.clearStencil(0),X.cullFace(1029),X.frontFace(2305),X.polygonOffset(0,0),X.activeTexture(33984),X.bindFramebuffer(36160,null),!0===fe&&(X.bindFramebuffer(36009,null),X.bindFramebuffer(36008,null)),X.useProgram(null),X.lineWidth(1),X.scissor(0,0,X.canvas.width,X.canvas.height),X.viewport(0,0,X.canvas.width,X.canvas.height),et={},tn=null,un={},tt={},nt=new WeakMap,it=[],ct=null,dt=!1,vt=null,gt=null,yt=null,_t=null,wt=null,St=null,Ct=null,At=!1,Et=null,Rt=null,Bt=null,Ht=null,Wt=null,mn.set(0,0,X.canvas.width,X.canvas.height),gn.set(0,0,X.canvas.width,X.canvas.height),Ue.reset(),je.reset(),Ke.reset()}}}function TL(X,$,ee,ae,de,fe,Ue){var je,Ke,et,tt=de.isWebGL2,nt=de.maxTextures,it=de.maxCubemapSize,ct=de.maxTextureSize,dt=de.maxSamples,vt=$.has("WEBGL_multisampled_render_to_texture")?$.get("WEBGL_multisampled_render_to_texture"):null,gt=/OculusBrowser/g.test(navigator.userAgent),yt=new WeakMap,_t=new WeakMap,wt=!1;try{wt=typeof OffscreenCanvas<"u"&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(Et){}function y(X,$){return wt?new OffscreenCanvas(X,$):jc("canvas")}function w(X,$,ee,ne){var ae=1;if((X.width>ne||X.height>ne)&&(ae=ne/Math.max(X.width,X.height)),ae<1||!0===$){if(typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&X instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&X instanceof ImageBitmap){var de=$?mf:Math.floor,fe=de(ae*X.width),Ue=de(ae*X.height);void 0===et&&(et=y(fe,Ue));var je=ee?y(fe,Ue):et;return je.width=fe,je.height=Ue,je.getContext("2d").drawImage(X,0,0,fe,Ue),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+X.width+"x"+X.height+") to ("+fe+"x"+Ue+")."),je}return"data"in X&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+X.width+"x"+X.height+")."),X}return X}function b(X){return og(X.width)&&og(X.height)}function T(X,$){return X.generateMipmaps&&$&&X.minFilter!==gn&&X.minFilter!==_n}function A($){X.generateMipmap($)}function x(ee,ne,ae,de){var fe=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(!1===tt)return ne;if(null!==ee){if(void 0!==X[ee])return X[ee];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ee+"'")}var Ue=ne;return 6403===ne&&(5126===ae&&(Ue=33326),5131===ae&&(Ue=33325),5121===ae&&(Ue=33321)),33319===ne&&(5126===ae&&(Ue=33328),5131===ae&&(Ue=33327),5121===ae&&(Ue=33323)),6408===ne&&(5126===ae&&(Ue=34836),5131===ae&&(Ue=34842),5121===ae&&(Ue=de===Xr&&!1===fe?35907:32856),32819===ae&&(Ue=32854),32820===ae&&(Ue=32855)),(33325===Ue||33326===Ue||33327===Ue||33328===Ue||34842===Ue||34836===Ue)&&$.get("EXT_color_buffer_float"),Ue}function E(X,$,ee){return!0===T(X,ee)||X.isFramebufferTexture&&X.minFilter!==gn&&X.minFilter!==_n?Math.log2(Math.max($.width,$.height))+1:void 0!==X.mipmaps&&X.mipmaps.length>0?X.mipmaps.length:X.isCompressedTexture&&Array.isArray(X.image)?$.mipmaps.length:1}function _(X){return X===gn||1004===X||1005===X?9728:9729}function C(X){var $=X.target;$.removeEventListener("dispose",C),function N(X){var $=ae.get(X);if(void 0===$.__webglInit)return;var ee=X.source,ne=_t.get(ee);if(ne){var de=ne[$.__cacheKey];de.usedTimes--,0===de.usedTimes&&R(X),0===Object.keys(ne).length&&_t.delete(ee)}ae.remove(X)}($),$.isVideoTexture&&yt.delete($)}function I($){var ee=$.target;ee.removeEventListener("dispose",I),function k($){var ee=$.texture,ne=ae.get($),de=ae.get(ee);if(void 0!==de.__webglTexture&&(X.deleteTexture(de.__webglTexture),Ue.memory.textures--),$.depthTexture&&$.depthTexture.dispose(),$.isWebGLCubeRenderTarget)for(var fe=0;fe<6;fe++)X.deleteFramebuffer(ne.__webglFramebuffer[fe]),ne.__webglDepthbuffer&&X.deleteRenderbuffer(ne.__webglDepthbuffer[fe]);else X.deleteFramebuffer(ne.__webglFramebuffer),ne.__webglDepthbuffer&&X.deleteRenderbuffer(ne.__webglDepthbuffer),ne.__webglMultisampledFramebuffer&&X.deleteFramebuffer(ne.__webglMultisampledFramebuffer),ne.__webglColorRenderbuffer&&X.deleteRenderbuffer(ne.__webglColorRenderbuffer),ne.__webglDepthRenderbuffer&&X.deleteRenderbuffer(ne.__webglDepthRenderbuffer);if($.isWebGLMultipleRenderTargets)for(var je=0,Ke=ee.length;je<Ke;je++){var et=ae.get(ee[je]);et.__webglTexture&&(X.deleteTexture(et.__webglTexture),Ue.memory.textures--),ae.remove(ee[je])}ae.remove(ee),ae.remove($)}(ee)}function R($){var ee=ae.get($);X.deleteTexture(ee.__webglTexture);var ne=$.source;delete _t.get(ne)[ee.__cacheKey],Ue.memory.textures--}var St=0;function F(X,$){var ne=ae.get(X);if(X.isVideoTexture&&function Pe(X){var $=Ue.render.frame;yt.get(X)!==$&&(yt.set(X,$),X.update())}(X),!1===X.isRenderTargetTexture&&X.version>0&&ne.__version!==X.version){var de=X.image;if(null===de)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==de.complete)return void oe(ne,X,$);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}ee.activeTexture(33984+$),ee.bindTexture(3553,ne.__webglTexture)}var Ct=(je={},(0,ne.Z)(je,hn,10497),(0,ne.Z)(je,dn,33071),(0,ne.Z)(je,mn,33648),je),At=(Ke={},(0,ne.Z)(Ke,gn,9728),(0,ne.Z)(Ke,1004,9984),(0,ne.Z)(Ke,1005,9986),(0,ne.Z)(Ke,_n,9729),(0,ne.Z)(Ke,1007,9985),(0,ne.Z)(Ke,wn,9987),Ke);function W(ee,ne,fe){if(fe?(X.texParameteri(ee,10242,Ct[ne.wrapS]),X.texParameteri(ee,10243,Ct[ne.wrapT]),(32879===ee||35866===ee)&&X.texParameteri(ee,32882,Ct[ne.wrapR]),X.texParameteri(ee,10240,At[ne.magFilter]),X.texParameteri(ee,10241,At[ne.minFilter])):(X.texParameteri(ee,10242,33071),X.texParameteri(ee,10243,33071),(32879===ee||35866===ee)&&X.texParameteri(ee,32882,33071),(ne.wrapS!==dn||ne.wrapT!==dn)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),X.texParameteri(ee,10240,_(ne.magFilter)),X.texParameteri(ee,10241,_(ne.minFilter)),ne.minFilter!==gn&&ne.minFilter!==_n&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),!0===$.has("EXT_texture_filter_anisotropic")){var Ue=$.get("EXT_texture_filter_anisotropic");if(ne.type===Mn&&!1===$.has("OES_texture_float_linear")||!1===tt&&ne.type===En&&!1===$.has("OES_texture_half_float_linear"))return;(ne.anisotropy>1||ae.get(ne).__currentAnisotropy)&&(X.texParameterf(ee,Ue.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(ne.anisotropy,de.getMaxAnisotropy())),ae.get(ne).__currentAnisotropy=ne.anisotropy)}}function ge($,ee){var ne=!1;void 0===$.__webglInit&&($.__webglInit=!0,ee.addEventListener("dispose",C));var ae=ee.source,de=_t.get(ae);void 0===de&&(de={},_t.set(ae,de));var fe=function Y(X){var $=[];return $.push(X.wrapS),$.push(X.wrapT),$.push(X.magFilter),$.push(X.minFilter),$.push(X.anisotropy),$.push(X.internalFormat),$.push(X.format),$.push(X.type),$.push(X.generateMipmaps),$.push(X.premultiplyAlpha),$.push(X.flipY),$.push(X.unpackAlignment),$.push(X.encoding),$.join()}(ee);if(fe!==$.__cacheKey){void 0===de[fe]&&(de[fe]={texture:X.createTexture(),usedTimes:0},Ue.memory.textures++,ne=!0),de[fe].usedTimes++;var je=de[$.__cacheKey];void 0!==je&&(de[$.__cacheKey].usedTimes--,0===je.usedTimes&&R(ee)),$.__cacheKey=fe,$.__webglTexture=de[fe].texture}return ne}function oe($,ne,ae){var de=3553;ne.isDataArrayTexture&&(de=35866),ne.isData3DTexture&&(de=32879);var Ue=ge($,ne),je=ne.source;if(ee.activeTexture(33984+ae),ee.bindTexture(de,$.__webglTexture),je.version!==je.__currentVersion||!0===Ue){X.pixelStorei(37440,ne.flipY),X.pixelStorei(37441,ne.premultiplyAlpha),X.pixelStorei(3317,ne.unpackAlignment),X.pixelStorei(37443,0);var Ke=function S(X){return!tt&&(X.wrapS!==dn||X.wrapT!==dn||X.minFilter!==gn&&X.minFilter!==_n)}(ne)&&!1===b(ne.image),et=w(ne.image,Ke,!1,ct),nt=b(et=ke(ne,et))||tt,it=fe.convert(ne.format,ne.encoding),dt=fe.convert(ne.type),vt=x(ne.internalFormat,it,dt,ne.encoding,ne.isVideoTexture);W(de,ne,nt);var gt,yt=ne.mipmaps,_t=tt&&!0!==ne.isVideoTexture,wt=void 0===$.__version||!0===Ue,St=E(ne,et,nt);if(ne.isDepthTexture)vt=6402,tt?vt=ne.type===Mn?36012:ne.type===An?33190:ne.type===Tn?35056:33189:ne.type===Mn&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),ne.format===Dn&&6402===vt&&ne.type!==Cn&&ne.type!==An&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),ne.type=Cn,dt=fe.convert(ne.type)),ne.format===Ln&&6402===vt&&(vt=34041,ne.type!==Tn&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),ne.type=Tn,dt=fe.convert(ne.type))),wt&&(_t?ee.texStorage2D(3553,1,vt,et.width,et.height):ee.texImage2D(3553,0,vt,et.width,et.height,0,it,dt,null));else if(ne.isDataTexture)if(yt.length>0&&nt){_t&&wt&&ee.texStorage2D(3553,St,vt,yt[0].width,yt[0].height);for(var Ct=0,At=yt.length;Ct<At;Ct++)gt=yt[Ct],_t?ee.texSubImage2D(3553,Ct,0,0,gt.width,gt.height,it,dt,gt.data):ee.texImage2D(3553,Ct,vt,gt.width,gt.height,0,it,dt,gt.data);ne.generateMipmaps=!1}else _t?(wt&&ee.texStorage2D(3553,St,vt,et.width,et.height),ee.texSubImage2D(3553,0,0,0,et.width,et.height,it,dt,et.data)):ee.texImage2D(3553,0,vt,et.width,et.height,0,it,dt,et.data);else if(ne.isCompressedTexture){_t&&wt&&ee.texStorage2D(3553,St,vt,yt[0].width,yt[0].height);for(var Et=0,Rt=yt.length;Et<Rt;Et++)gt=yt[Et],ne.format!==Pn?null!==it?_t?ee.compressedTexSubImage2D(3553,Et,0,0,gt.width,gt.height,it,gt.data):ee.compressedTexImage2D(3553,Et,vt,gt.width,gt.height,0,gt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):_t?ee.texSubImage2D(3553,Et,0,0,gt.width,gt.height,it,dt,gt.data):ee.texImage2D(3553,Et,vt,gt.width,gt.height,0,it,dt,gt.data)}else if(ne.isDataArrayTexture)_t?(wt&&ee.texStorage3D(35866,St,vt,et.width,et.height,et.depth),ee.texSubImage3D(35866,0,0,0,0,et.width,et.height,et.depth,it,dt,et.data)):ee.texImage3D(35866,0,vt,et.width,et.height,et.depth,0,it,dt,et.data);else if(ne.isData3DTexture)_t?(wt&&ee.texStorage3D(32879,St,vt,et.width,et.height,et.depth),ee.texSubImage3D(32879,0,0,0,0,et.width,et.height,et.depth,it,dt,et.data)):ee.texImage3D(32879,0,vt,et.width,et.height,et.depth,0,it,dt,et.data);else if(ne.isFramebufferTexture){if(wt)if(_t)ee.texStorage2D(3553,St,vt,et.width,et.height);else for(var Bt=et.width,Ht=et.height,Wt=0;Wt<St;Wt++)ee.texImage2D(3553,Wt,vt,Bt,Ht,0,it,dt,null),Bt>>=1,Ht>>=1}else if(yt.length>0&&nt){_t&&wt&&ee.texStorage2D(3553,St,vt,yt[0].width,yt[0].height);for(var qt=0,Zt=yt.length;qt<Zt;qt++)gt=yt[qt],_t?ee.texSubImage2D(3553,qt,0,0,it,dt,gt):ee.texImage2D(3553,qt,vt,it,dt,gt);ne.generateMipmaps=!1}else _t?(wt&&ee.texStorage2D(3553,St,vt,et.width,et.height),ee.texSubImage2D(3553,0,0,0,it,dt,et)):ee.texImage2D(3553,0,vt,it,dt,et);T(ne,nt)&&A(de),je.__currentVersion=je.version,ne.onUpdate&&ne.onUpdate(ne)}$.__version=ne.version}function H($,ne,de,Ue,je){var Ke=fe.convert(de.format,de.encoding),et=fe.convert(de.type),tt=x(de.internalFormat,Ke,et,de.encoding);ae.get(ne).__hasExternalTextures||(32879===je||35866===je?ee.texImage3D(je,0,tt,ne.width,ne.height,ne.depth,0,Ke,et,null):ee.texImage2D(je,0,tt,ne.width,ne.height,0,Ke,et,null)),ee.bindFramebuffer(36160,$),me(ne)?vt.framebufferTexture2DMultisampleEXT(36160,Ue,je,ae.get(de).__webglTexture,0,ve(ne)):X.framebufferTexture2D(36160,Ue,je,ae.get(de).__webglTexture,0),ee.bindFramebuffer(36160,null)}function he($,ee,ne){if(X.bindRenderbuffer(36161,$),ee.depthBuffer&&!ee.stencilBuffer){var ae=33189;if(ne||me(ee)){var de=ee.depthTexture;de&&de.isDepthTexture&&(de.type===Mn?ae=36012:de.type===An&&(ae=33190));var Ue=ve(ee);me(ee)?vt.renderbufferStorageMultisampleEXT(36161,Ue,ae,ee.width,ee.height):X.renderbufferStorageMultisample(36161,Ue,ae,ee.width,ee.height)}else X.renderbufferStorage(36161,ae,ee.width,ee.height);X.framebufferRenderbuffer(36160,36096,36161,$)}else if(ee.depthBuffer&&ee.stencilBuffer){var je=ve(ee);ne&&!1===me(ee)?X.renderbufferStorageMultisample(36161,je,35056,ee.width,ee.height):me(ee)?vt.renderbufferStorageMultisampleEXT(36161,je,35056,ee.width,ee.height):X.renderbufferStorage(36161,34041,ee.width,ee.height),X.framebufferRenderbuffer(36160,33306,36161,$)}else{var Ke=!0===ee.isWebGLMultipleRenderTargets?ee.texture[0]:ee.texture,et=fe.convert(Ke.format,Ke.encoding),tt=fe.convert(Ke.type),nt=x(Ke.internalFormat,et,tt,Ke.encoding),it=ve(ee);ne&&!1===me(ee)?X.renderbufferStorageMultisample(36161,it,nt,ee.width,ee.height):me(ee)?vt.renderbufferStorageMultisampleEXT(36161,it,nt,ee.width,ee.height):X.renderbufferStorage(36161,nt,ee.width,ee.height)}X.bindRenderbuffer(36161,null)}function V($){var ne=ae.get($),de=!0===$.isWebGLCubeRenderTarget;if($.depthTexture&&!ne.__autoAllocateDepthBuffer){if(de)throw new Error("target.depthTexture not supported in Cube render targets");!function K($,ne){if(ne&&ne.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(ee.bindFramebuffer(36160,$),!ne.depthTexture||!ne.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!ae.get(ne.depthTexture).__webglTexture||ne.depthTexture.image.width!==ne.width||ne.depthTexture.image.height!==ne.height)&&(ne.depthTexture.image.width=ne.width,ne.depthTexture.image.height=ne.height,ne.depthTexture.needsUpdate=!0),F(ne.depthTexture,0);var de=ae.get(ne.depthTexture).__webglTexture,fe=ve(ne);if(ne.depthTexture.format===Dn)me(ne)?vt.framebufferTexture2DMultisampleEXT(36160,36096,3553,de,0,fe):X.framebufferTexture2D(36160,36096,3553,de,0);else{if(ne.depthTexture.format!==Ln)throw new Error("Unknown depthTexture format");me(ne)?vt.framebufferTexture2DMultisampleEXT(36160,33306,3553,de,0,fe):X.framebufferTexture2D(36160,33306,3553,de,0)}}(ne.__webglFramebuffer,$)}else if(de){ne.__webglDepthbuffer=[];for(var fe=0;fe<6;fe++)ee.bindFramebuffer(36160,ne.__webglFramebuffer[fe]),ne.__webglDepthbuffer[fe]=X.createRenderbuffer(),he(ne.__webglDepthbuffer[fe],$,!1)}else ee.bindFramebuffer(36160,ne.__webglFramebuffer),ne.__webglDepthbuffer=X.createRenderbuffer(),he(ne.__webglDepthbuffer,$,!1);ee.bindFramebuffer(36160,null)}function ve(X){return Math.min(dt,X.samples)}function me(X){var ee=ae.get(X);return tt&&X.samples>0&&!0===$.has("WEBGL_multisampled_render_to_texture")&&!1!==ee.__useRenderToTexture}function ke(X,ee){var ne=X.encoding,ae=X.format,de=X.type;return!0===X.isCompressedTexture||!0===X.isVideoTexture||X.format===$i||ne!==qr&&(ne===Xr?!1===tt?!0===$.has("EXT_sRGB")&&ae===Pn?(X.format=$i,X.minFilter=_n,X.generateMipmaps=!1):ee=Da.sRGBToLinear(ee):(ae!==Pn||de!==Sn)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ne)),ee}this.allocateTextureUnit=function Q(){var X=St;return X>=nt&&console.warn("THREE.WebGLTextures: Trying to use "+X+" texture units while this GPU supports only "+nt),St+=1,X},this.resetTextureUnits=function te(){St=0},this.setTexture2D=F,this.setTexture2DArray=function z(X,$){var ne=ae.get(X);X.version>0&&ne.__version!==X.version?oe(ne,X,$):(ee.activeTexture(33984+$),ee.bindTexture(35866,ne.__webglTexture))},this.setTexture3D=function O(X,$){var ne=ae.get(X);X.version>0&&ne.__version!==X.version?oe(ne,X,$):(ee.activeTexture(33984+$),ee.bindTexture(32879,ne.__webglTexture))},this.setTextureCube=function j($,ne){var de=ae.get($);$.version>0&&de.__version!==$.version?function le($,ne,ae){if(6!==ne.image.length)return;var de=ge($,ne),Ue=ne.source;if(ee.activeTexture(33984+ae),ee.bindTexture(34067,$.__webglTexture),Ue.version!==Ue.__currentVersion||!0===de){X.pixelStorei(37440,ne.flipY),X.pixelStorei(37441,ne.premultiplyAlpha),X.pixelStorei(3317,ne.unpackAlignment),X.pixelStorei(37443,0);for(var je=ne.isCompressedTexture||ne.image[0].isCompressedTexture,Ke=ne.image[0]&&ne.image[0].isDataTexture,et=[],nt=0;nt<6;nt++)et[nt]=je||Ke?Ke?ne.image[nt].image:ne.image[nt]:w(ne.image[nt],!1,!0,it),et[nt]=ke(ne,et[nt]);var ct,dt=et[0],vt=b(dt)||tt,gt=fe.convert(ne.format,ne.encoding),yt=fe.convert(ne.type),_t=x(ne.internalFormat,gt,yt,ne.encoding),wt=tt&&!0!==ne.isVideoTexture,St=void 0===$.__version,Ct=E(ne,dt,vt);if(W(34067,ne,vt),je){wt&&St&&ee.texStorage2D(34067,Ct,_t,dt.width,dt.height);for(var At=0;At<6;At++){ct=et[At].mipmaps;for(var Et=0;Et<ct.length;Et++){var Rt=ct[Et];ne.format!==Pn?null!==gt?wt?ee.compressedTexSubImage2D(34069+At,Et,0,0,Rt.width,Rt.height,gt,Rt.data):ee.compressedTexImage2D(34069+At,Et,_t,Rt.width,Rt.height,0,Rt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):wt?ee.texSubImage2D(34069+At,Et,0,0,Rt.width,Rt.height,gt,yt,Rt.data):ee.texImage2D(34069+At,Et,_t,Rt.width,Rt.height,0,gt,yt,Rt.data)}}}else{ct=ne.mipmaps,wt&&St&&(ct.length>0&&Ct++,ee.texStorage2D(34067,Ct,_t,et[0].width,et[0].height));for(var Bt=0;Bt<6;Bt++)if(Ke){wt?ee.texSubImage2D(34069+Bt,0,0,0,et[Bt].width,et[Bt].height,gt,yt,et[Bt].data):ee.texImage2D(34069+Bt,0,_t,et[Bt].width,et[Bt].height,0,gt,yt,et[Bt].data);for(var Ht=0;Ht<ct.length;Ht++){var Wt=ct[Ht].image[Bt].image;wt?ee.texSubImage2D(34069+Bt,Ht+1,0,0,Wt.width,Wt.height,gt,yt,Wt.data):ee.texImage2D(34069+Bt,Ht+1,_t,Wt.width,Wt.height,0,gt,yt,Wt.data)}}else{wt?ee.texSubImage2D(34069+Bt,0,0,0,gt,yt,et[Bt]):ee.texImage2D(34069+Bt,0,_t,gt,yt,et[Bt]);for(var qt=0;qt<ct.length;qt++){var Zt=ct[qt];wt?ee.texSubImage2D(34069+Bt,qt+1,0,0,gt,yt,Zt.image[Bt]):ee.texImage2D(34069+Bt,qt+1,_t,gt,yt,Zt.image[Bt])}}}T(ne,vt)&&A(34067),Ue.__currentVersion=Ue.version,ne.onUpdate&&ne.onUpdate(ne)}$.__version=ne.version}(de,$,ne):(ee.activeTexture(33984+ne),ee.bindTexture(34067,de.__webglTexture))},this.rebindTextures=function Z(X,$,ee){var ne=ae.get(X);void 0!==$&&H(ne.__webglFramebuffer,X,X.texture,36064,3553),void 0!==ee&&V(X)},this.setupRenderTarget=function ce($){var ne=$.texture,je=ae.get($),Ke=ae.get(ne);$.addEventListener("dispose",I),!0!==$.isWebGLMultipleRenderTargets&&(void 0===Ke.__webglTexture&&(Ke.__webglTexture=X.createTexture()),Ke.__version=ne.version,Ue.memory.textures++);var et=!0===$.isWebGLCubeRenderTarget,nt=!0===$.isWebGLMultipleRenderTargets,it=b($)||tt;if(et){je.__webglFramebuffer=[];for(var ct=0;ct<6;ct++)je.__webglFramebuffer[ct]=X.createFramebuffer()}else if(je.__webglFramebuffer=X.createFramebuffer(),nt)if(de.drawBuffers)for(var dt=$.texture,vt=0,gt=dt.length;vt<gt;vt++){var yt=ae.get(dt[vt]);void 0===yt.__webglTexture&&(yt.__webglTexture=X.createTexture(),Ue.memory.textures++)}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");else if(tt&&$.samples>0&&!1===me($)){je.__webglMultisampledFramebuffer=X.createFramebuffer(),je.__webglColorRenderbuffer=X.createRenderbuffer(),X.bindRenderbuffer(36161,je.__webglColorRenderbuffer);var _t=fe.convert(ne.format,ne.encoding),wt=fe.convert(ne.type),St=x(ne.internalFormat,_t,wt,ne.encoding),Ct=ve($);X.renderbufferStorageMultisample(36161,Ct,St,$.width,$.height),ee.bindFramebuffer(36160,je.__webglMultisampledFramebuffer),X.framebufferRenderbuffer(36160,36064,36161,je.__webglColorRenderbuffer),X.bindRenderbuffer(36161,null),$.depthBuffer&&(je.__webglDepthRenderbuffer=X.createRenderbuffer(),he(je.__webglDepthRenderbuffer,$,!0)),ee.bindFramebuffer(36160,null)}if(et){ee.bindTexture(34067,Ke.__webglTexture),W(34067,ne,it);for(var At=0;At<6;At++)H(je.__webglFramebuffer[At],$,ne,36064,34069+At);T(ne,it)&&A(34067),ee.unbindTexture()}else if(nt){for(var Et=$.texture,Rt=0,Bt=Et.length;Rt<Bt;Rt++){var Ht=Et[Rt],Wt=ae.get(Ht);ee.bindTexture(3553,Wt.__webglTexture),W(3553,Ht,it),H(je.__webglFramebuffer,$,Ht,36064+Rt,3553),T(Ht,it)&&A(3553)}ee.unbindTexture()}else{var qt=3553;($.isWebGL3DRenderTarget||$.isWebGLArrayRenderTarget)&&(tt?qt=$.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),ee.bindTexture(qt,Ke.__webglTexture),W(qt,ne,it),H(je.__webglFramebuffer,$,ne,36064,qt),T(ne,it)&&A(qt),ee.unbindTexture()}$.depthBuffer&&V($)},this.updateRenderTargetMipmap=function se(X){for(var $=b(X)||tt,ne=!0===X.isWebGLMultipleRenderTargets?X.texture:[X.texture],de=0,fe=ne.length;de<fe;de++){var Ue=ne[de];if(T(Ue,$)){var je=X.isWebGLCubeRenderTarget?34067:3553,Ke=ae.get(Ue).__webglTexture;ee.bindTexture(je,Ke),A(je),ee.unbindTexture()}}},this.updateMultisampleRenderTarget=function pe($){if(tt&&$.samples>0&&!1===me($)){var ne=$.width,de=$.height,fe=16384,Ue=[36064],je=$.stencilBuffer?33306:36096;$.depthBuffer&&Ue.push(je);var Ke=ae.get($),et=void 0!==Ke.__ignoreDepthValues&&Ke.__ignoreDepthValues;!1===et&&($.depthBuffer&&(fe|=256),$.stencilBuffer&&(fe|=1024)),ee.bindFramebuffer(36008,Ke.__webglMultisampledFramebuffer),ee.bindFramebuffer(36009,Ke.__webglFramebuffer),!0===et&&(X.invalidateFramebuffer(36008,[je]),X.invalidateFramebuffer(36009,[je])),X.blitFramebuffer(0,0,ne,de,0,0,ne,de,fe,9728),gt&&X.invalidateFramebuffer(36008,Ue),ee.bindFramebuffer(36008,null),ee.bindFramebuffer(36009,Ke.__webglMultisampledFramebuffer)}},this.setupDepthRenderbuffer=V,this.setupFrameBufferTexture=H,this.useMultisampledRTT=me}function EL(X,$,ee){var ne=ee.isWebGL2;return{convert:function n(ee){var ae,de=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(ee===Sn)return 5121;if(1017===ee)return 32819;if(1018===ee)return 32820;if(1010===ee)return 5120;if(1011===ee)return 5122;if(ee===Cn)return 5123;if(1013===ee)return 5124;if(ee===An)return 5125;if(ee===Mn)return 5126;if(ee===En)return ne?5131:null!==(ae=$.get("OES_texture_half_float"))?ae.HALF_FLOAT_OES:null;if(1021===ee)return 6406;if(ee===Pn)return 6408;if(1024===ee)return 6409;if(1025===ee)return 6410;if(ee===Dn)return 6402;if(ee===Ln)return 34041;if(1028===ee)return 6403;if(1022===ee)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(ee===$i)return null!==(ae=$.get("EXT_sRGB"))?ae.SRGB_ALPHA_EXT:null;if(1029===ee)return 36244;if(1030===ee)return 33319;if(1031===ee)return 33320;if(1033===ee)return 36249;if(ee===On||ee===In||ee===Fn||ee===Wn)if(de===Xr){if(null===(ae=$.get("WEBGL_compressed_texture_s3tc_srgb")))return null;if(ee===On)return ae.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(ee===In)return ae.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(ee===Fn)return ae.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(ee===Wn)return ae.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(null===(ae=$.get("WEBGL_compressed_texture_s3tc")))return null;if(ee===On)return ae.COMPRESSED_RGB_S3TC_DXT1_EXT;if(ee===In)return ae.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(ee===Fn)return ae.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(ee===Wn)return ae.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(ee===Yn||ee===Jn||ee===Zn||ee===Kn){if(null===(ae=$.get("WEBGL_compressed_texture_pvrtc")))return null;if(ee===Yn)return ae.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(ee===Jn)return ae.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(ee===Zn)return ae.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(ee===Kn)return ae.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===ee)return null!==(ae=$.get("WEBGL_compressed_texture_etc1"))?ae.COMPRESSED_RGB_ETC1_WEBGL:null;if(ee===$n||ee===nr){if(null===(ae=$.get("WEBGL_compressed_texture_etc")))return null;if(ee===$n)return de===Xr?ae.COMPRESSED_SRGB8_ETC2:ae.COMPRESSED_RGB8_ETC2;if(ee===nr)return de===Xr?ae.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:ae.COMPRESSED_RGBA8_ETC2_EAC}if(ee===ir||ee===ar||ee===or||ee===hr||ee===dr||ee===fr||ee===vr||ee===yr||ee===br||ee===_r||ee===wr||ee===Cr||ee===Ar||ee===Mr){if(null===(ae=$.get("WEBGL_compressed_texture_astc")))return null;if(ee===ir)return de===Xr?ae.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:ae.COMPRESSED_RGBA_ASTC_4x4_KHR;if(ee===ar)return de===Xr?ae.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:ae.COMPRESSED_RGBA_ASTC_5x4_KHR;if(ee===or)return de===Xr?ae.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:ae.COMPRESSED_RGBA_ASTC_5x5_KHR;if(ee===hr)return de===Xr?ae.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:ae.COMPRESSED_RGBA_ASTC_6x5_KHR;if(ee===dr)return de===Xr?ae.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:ae.COMPRESSED_RGBA_ASTC_6x6_KHR;if(ee===fr)return de===Xr?ae.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:ae.COMPRESSED_RGBA_ASTC_8x5_KHR;if(ee===vr)return de===Xr?ae.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:ae.COMPRESSED_RGBA_ASTC_8x6_KHR;if(ee===yr)return de===Xr?ae.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:ae.COMPRESSED_RGBA_ASTC_8x8_KHR;if(ee===br)return de===Xr?ae.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:ae.COMPRESSED_RGBA_ASTC_10x5_KHR;if(ee===_r)return de===Xr?ae.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:ae.COMPRESSED_RGBA_ASTC_10x6_KHR;if(ee===wr)return de===Xr?ae.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:ae.COMPRESSED_RGBA_ASTC_10x8_KHR;if(ee===Cr)return de===Xr?ae.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:ae.COMPRESSED_RGBA_ASTC_10x10_KHR;if(ee===Ar)return de===Xr?ae.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:ae.COMPRESSED_RGBA_ASTC_12x10_KHR;if(ee===Mr)return de===Xr?ae.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:ae.COMPRESSED_RGBA_ASTC_12x12_KHR}if(ee===Er){if(null===(ae=$.get("EXT_texture_compression_bptc")))return null;if(ee===Er)return de===Xr?ae.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:ae.COMPRESSED_RGBA_BPTC_UNORM_EXT}return ee===Tn?ne?34042:null!==(ae=$.get("WEBGL_depth_texture"))?ae.UNSIGNED_INT_24_8_WEBGL:null:void 0!==X[ee]?X[ee]:null}}}var pp=function(X){_inherits(bf,X);var $=_createSuper(bf);function bf(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return _classCallCheck(this,bf),(X=$.call(this)).cameras=ee,X}return _createClass(bf)}(cd);pp.prototype.isArrayCamera=!0;var bp=function(X){_inherits(ts,X);var $=_createSuper(ts);function ts(){var X;return _classCallCheck(this,ts),(X=$.call(this)).type="Group",X}return _createClass(ts)}(ru);bp.prototype.isGroup=!0;var kp={type:"move"},Up=function(){function Uc(){_classCallCheck(this,Uc),this._targetRay=null,this._grip=null,this._hand=null}return _createClass(Uc,[{key:"getHandSpace",value:function getHandSpace(){return null===this._hand&&(this._hand=new bp,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}},{key:"getTargetRaySpace",value:function getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new bp,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new wo,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new wo),this._targetRay}},{key:"getGripSpace",value:function getGripSpace(){return null===this._grip&&(this._grip=new bp,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new wo,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new wo),this._grip}},{key:"dispatchEvent",value:function dispatchEvent(X){return null!==this._targetRay&&this._targetRay.dispatchEvent(X),null!==this._grip&&this._grip.dispatchEvent(X),null!==this._hand&&this._hand.dispatchEvent(X),this}},{key:"disconnect",value:function disconnect(X){return this.dispatchEvent({type:"disconnected",data:X}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}},{key:"update",value:function update(X,$,ee){var ne=null,ae=null,de=null,fe=this._targetRay,Ue=this._grip,Ke=this._hand;if(X&&"visible-blurred"!==$.session.visibilityState)if(null!==fe&&(null!==(ne=$.getPose(X.targetRaySpace,ee))&&(fe.matrix.fromArray(ne.transform.matrix),fe.matrix.decompose(fe.position,fe.rotation,fe.scale),ne.linearVelocity?(fe.hasLinearVelocity=!0,fe.linearVelocity.copy(ne.linearVelocity)):fe.hasLinearVelocity=!1,ne.angularVelocity?(fe.hasAngularVelocity=!0,fe.angularVelocity.copy(ne.angularVelocity)):fe.hasAngularVelocity=!1,this.dispatchEvent(kp))),Ke&&X.hand){de=!0;var et,tt=(0,je.Z)(X.hand.values());try{for(tt.s();!(et=tt.n()).done;){var nt=et.value,it=$.getJointPose(nt,ee);if(void 0===Ke.joints[nt.jointName]){var ct=new bp;ct.matrixAutoUpdate=!1,ct.visible=!1,Ke.joints[nt.jointName]=ct,Ke.add(ct)}var dt=Ke.joints[nt.jointName];null!==it&&(dt.matrix.fromArray(it.transform.matrix),dt.matrix.decompose(dt.position,dt.rotation,dt.scale),dt.jointRadius=it.radius),dt.visible=null!==it}}catch(_t){tt.e(_t)}finally{tt.f()}var vt=Ke.joints["index-finger-tip"],gt=Ke.joints["thumb-tip"],yt=vt.position.distanceTo(gt.position);Ke.inputState.pinching&&yt>.025?(Ke.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:X.handedness,target:this})):!Ke.inputState.pinching&&yt<=.015&&(Ke.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:X.handedness,target:this}))}else null!==Ue&&X.gripSpace&&(null!==(ae=$.getPose(X.gripSpace,ee))&&(Ue.matrix.fromArray(ae.transform.matrix),Ue.matrix.decompose(Ue.position,Ue.rotation,Ue.scale),ae.linearVelocity?(Ue.hasLinearVelocity=!0,Ue.linearVelocity.copy(ae.linearVelocity)):Ue.hasLinearVelocity=!1,ae.angularVelocity?(Ue.hasAngularVelocity=!0,Ue.angularVelocity.copy(ae.angularVelocity)):Ue.hasAngularVelocity=!1));return null!==fe&&(fe.visible=null!==ne),null!==Ue&&(Ue.visible=null!==ae),null!==Ke&&(Ke.visible=null!==de),this}}]),Uc}(),Gp=function(X){_inherits(oi,X);var $=_createSuper(oi);function oi(X,ee,ne,ae,de,fe,Ue,je,Ke,et){var tt;if(_classCallCheck(this,oi),(et=void 0!==et?et:Dn)!==Dn&&et!==Ln)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");return void 0===ne&&et===Dn&&(ne=Cn),void 0===ne&&et===Ln&&(ne=Tn),(tt=$.call(this,null,ae,de,fe,Ue,je,et,ne,Ke)).image={width:X,height:ee},tt.magFilter=void 0!==Ue?Ue:gn,tt.minFilter=void 0!==je?je:gn,tt.flipY=!1,tt.generateMipmaps=!1,tt}return _createClass(oi)}(eo);Gp.prototype.isDepthTexture=!0;var qp=function(X){_inherits(pg,X);var $=_createSuper(pg);function pg(X,ee){var ne;_classCallCheck(this,pg);var ae=_assertThisInitialized(ne=$.call(this)),fe=null,Ue=1,je=null,Ke="local-floor",tt=null,nt=null,it=null,ct=null,dt=null,vt=null,gt=ee.getContextAttributes(),yt=null,_t=null,wt=[],St=new Map,Ct=new cd;Ct.layers.enable(1),Ct.viewport=new to;var At=new cd;At.layers.enable(2),At.viewport=new to;var Et=[Ct,At],Rt=new pp;Rt.layers.enable(1),Rt.layers.enable(2);var Bt=null,Ht=null;function E(X){var $=St.get(X.inputSource);$&&$.dispatchEvent({type:X.type,data:X.inputSource})}function _(){St.forEach((function(X,$){X.disconnect($)})),St.clear(),Bt=null,Ht=null,X.setRenderTarget(yt),dt=null,ct=null,it=null,fe=null,_t=null,Xt.stop(),ae.isPresenting=!1,ae.dispatchEvent({type:"sessionend"})}function C(X){for(var $=fe.inputSources,ee=0;ee<$.length;ee++){var ne="right"===$[ee].handedness?1:0;St.set($[ee],wt[ne])}for(var ae=0;ae<X.removed.length;ae++){var de=X.removed[ae],Ue=St.get(de);Ue&&(Ue.dispatchEvent({type:"disconnected",data:de}),St.delete(de))}for(var je=0;je<X.added.length;je++){var Ke=X.added[je],et=St.get(Ke);et&&et.dispatchEvent({type:"connected",data:Ke})}}ne.cameraAutoUpdate=!0,ne.enabled=!1,ne.isPresenting=!1,ne.getController=function(X){var $=wt[X];return void 0===$&&($=new Up,wt[X]=$),$.getTargetRaySpace()},ne.getControllerGrip=function(X){var $=wt[X];return void 0===$&&($=new Up,wt[X]=$),$.getGripSpace()},ne.getHand=function(X){var $=wt[X];return void 0===$&&($=new Up,wt[X]=$),$.getHandSpace()},ne.setFramebufferScaleFactor=function(X){Ue=X,!0===ae.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},ne.setReferenceSpaceType=function(X){Ke=X,!0===ae.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},ne.getReferenceSpace=function(){return tt||je},ne.setReferenceSpace=function(X){tt=X},ne.getBaseLayer=function(){return null!==ct?ct:dt},ne.getBinding=function(){return it},ne.getFrame=function(){return vt},ne.getSession=function(){return fe},ne.setSession=function(){var $=(0,de.Z)(et().mark((function _callee($){var ne,de,tt,nt,vt;return et().wrap((function _callee$(et){for(;;)switch(et.prev=et.next){case 0:if(null===(fe=$)){et.next=34;break}if(yt=X.getRenderTarget(),fe.addEventListener("select",E),fe.addEventListener("selectstart",E),fe.addEventListener("selectend",E),fe.addEventListener("squeeze",E),fe.addEventListener("squeezestart",E),fe.addEventListener("squeezeend",E),fe.addEventListener("end",_),fe.addEventListener("inputsourceschange",C),et.t0=!0!==gt.xrCompatible,!et.t0){et.next=14;break}return et.next=14,ee.makeXRCompatible();case 14:if(void 0!==fe.renderState.layers&&!1!==X.capabilities.isWebGL2){et.next=19;break}ne={antialias:void 0!==fe.renderState.layers||gt.antialias,alpha:gt.alpha,depth:gt.depth,stencil:gt.stencil,framebufferScaleFactor:Ue},dt=new XRWebGLLayer(fe,ee,ne),fe.updateRenderState({baseLayer:dt}),_t=new ro(dt.framebufferWidth,dt.framebufferHeight,{format:Pn,type:Sn,encoding:X.outputEncoding}),et.next=25;break;case 19:de=null,tt=null,nt=null,gt.depth&&(nt=gt.stencil?35056:33190,de=gt.stencil?Ln:Dn,tt=gt.stencil?Tn:Cn),vt={colorFormat:X.outputEncoding===Xr?35907:32856,depthFormat:nt,scaleFactor:Ue},it=new XRWebGLBinding(fe,ee),ct=it.createProjectionLayer(vt),fe.updateRenderState({layers:[ct]}),_t=new ro(ct.textureWidth,ct.textureHeight,{format:Pn,type:Sn,depthTexture:new Gp(ct.textureWidth,ct.textureHeight,tt,void 0,void 0,void 0,void 0,void 0,void 0,de),stencilBuffer:gt.stencil,encoding:X.outputEncoding,samples:gt.antialias?4:0}),X.properties.get(_t).__ignoreDepthValues=ct.ignoreDepthValues;case 25:return _t.isXRRenderTarget=!0,this.setFoveation(1),et.next=29,fe.requestReferenceSpace(Ke);case 29:je=et.sent,Xt.setContext(fe),Xt.start(),ae.isPresenting=!0,ae.dispatchEvent({type:"sessionstart"});case 34:case"end":return et.stop()}}),_callee,this)})));return function(X){return $.apply(this,arguments)}}();var Wt=new wo,qt=new wo;function k(X,$){null===$?X.matrixWorld.copy(X.matrix):X.matrixWorld.multiplyMatrices($.matrixWorld,X.matrix),X.matrixWorldInverse.copy(X.matrixWorld).invert()}ne.updateCamera=function(X){if(null!==fe){Rt.near=At.near=Ct.near=X.near,Rt.far=At.far=Ct.far=X.far,(Bt!==Rt.near||Ht!==Rt.far)&&(fe.updateRenderState({depthNear:Rt.near,depthFar:Rt.far}),Bt=Rt.near,Ht=Rt.far);var $=X.parent,ee=Rt.cameras;k(Rt,$);for(var ne=0;ne<ee.length;ne++)k(ee[ne],$);Rt.matrixWorld.decompose(Rt.position,Rt.quaternion,Rt.scale),X.position.copy(Rt.position),X.quaternion.copy(Rt.quaternion),X.scale.copy(Rt.scale),X.matrix.copy(Rt.matrix),X.matrixWorld.copy(Rt.matrixWorld);for(var ae=X.children,de=0,Ue=ae.length;de<Ue;de++)ae[de].updateMatrixWorld(!0);2===ee.length?function R(X,$,ee){Wt.setFromMatrixPosition($.matrixWorld),qt.setFromMatrixPosition(ee.matrixWorld);var ne=Wt.distanceTo(qt),ae=$.projectionMatrix.elements,de=ee.projectionMatrix.elements,fe=ae[14]/(ae[10]-1),Ue=ae[14]/(ae[10]+1),je=(ae[9]+1)/ae[5],Ke=(ae[9]-1)/ae[5],et=(ae[8]-1)/ae[0],tt=(de[8]+1)/de[0],nt=fe*et,it=fe*tt,ct=ne/(-et+tt),dt=ct*-et;$.matrixWorld.decompose(X.position,X.quaternion,X.scale),X.translateX(dt),X.translateZ(ct),X.matrixWorld.compose(X.position,X.quaternion,X.scale),X.matrixWorldInverse.copy(X.matrixWorld).invert();var vt=fe+ct,gt=Ue+ct,yt=nt-dt,_t=it+(ne-dt),wt=je*Ue/gt*vt,St=Ke*Ue/gt*vt;X.projectionMatrix.makePerspective(yt,_t,wt,St,vt,gt)}(Rt,Ct,At):Rt.projectionMatrix.copy(Ct.projectionMatrix)}},ne.getCamera=function(){return Rt},ne.getFoveation=function(){return null!==ct?ct.fixedFoveation:null!==dt?dt.fixedFoveation:void 0},ne.setFoveation=function(X){null!==ct&&(ct.fixedFoveation=X),null!==dt&&void 0!==dt.fixedFoveation&&(dt.fixedFoveation=X)};var Zt=null;var Xt=new bb;return Xt.setAnimationLoop((function te($,ee){if(nt=ee.getViewerPose(tt||je),vt=ee,null!==nt){var ne=nt.views;null!==dt&&(X.setRenderTargetFramebuffer(_t,dt.framebuffer),X.setRenderTarget(_t));var ae=!1;ne.length!==Rt.cameras.length&&(Rt.cameras.length=0,ae=!0);for(var de=0;de<ne.length;de++){var Ue=ne[de],Ke=null;if(null!==dt)Ke=dt.getViewport(Ue);else{var et=it.getViewSubImage(ct,Ue);Ke=et.viewport,0===de&&(X.setRenderTargetTextures(_t,et.colorTexture,ct.ignoreDepthValues?void 0:et.depthStencilTexture),X.setRenderTarget(_t))}var gt=Et[de];gt.matrix.fromArray(Ue.transform.matrix),gt.projectionMatrix.fromArray(Ue.projectionMatrix),gt.viewport.set(Ke.x,Ke.y,Ke.width,Ke.height),0===de&&Rt.matrix.copy(gt.matrix),!0===ae&&Rt.cameras.push(gt)}}for(var yt=fe.inputSources,Ct=0;Ct<wt.length;Ct++){var At=yt[Ct],Bt=St.get(At);void 0!==Bt&&Bt.update(At,ee,tt||je)}Zt&&Zt($,ee),vt=null})),ne.setAnimationLoop=function(X){Zt=X},ne.dispose=function(){},ne}return _createClass(pg)}(aa);function CL(X,$){function n(ee,ne){ee.opacity.value=ne.opacity,ne.color&&ee.diffuse.value.copy(ne.color),ne.emissive&&ee.emissive.value.copy(ne.emissive).multiplyScalar(ne.emissiveIntensity),ne.map&&(ee.map.value=ne.map),ne.alphaMap&&(ee.alphaMap.value=ne.alphaMap),ne.bumpMap&&(ee.bumpMap.value=ne.bumpMap,ee.bumpScale.value=ne.bumpScale,1===ne.side&&(ee.bumpScale.value*=-1)),ne.displacementMap&&(ee.displacementMap.value=ne.displacementMap,ee.displacementScale.value=ne.displacementScale,ee.displacementBias.value=ne.displacementBias),ne.emissiveMap&&(ee.emissiveMap.value=ne.emissiveMap),ne.normalMap&&(ee.normalMap.value=ne.normalMap,ee.normalScale.value.copy(ne.normalScale),1===ne.side&&ee.normalScale.value.negate()),ne.specularMap&&(ee.specularMap.value=ne.specularMap),ne.alphaTest>0&&(ee.alphaTest.value=ne.alphaTest);var ae,de,fe=$.get(ne).envMap;if(fe&&(ee.envMap.value=fe,ee.flipEnvMap.value=fe.isCubeTexture&&!1===fe.isRenderTargetTexture?-1:1,ee.reflectivity.value=ne.reflectivity,ee.ior.value=ne.ior,ee.refractionRatio.value=ne.refractionRatio),ne.lightMap){ee.lightMap.value=ne.lightMap;var Ue=!0!==X.physicallyCorrectLights?Math.PI:1;ee.lightMapIntensity.value=ne.lightMapIntensity*Ue}ne.aoMap&&(ee.aoMap.value=ne.aoMap,ee.aoMapIntensity.value=ne.aoMapIntensity),ne.map?ae=ne.map:ne.specularMap?ae=ne.specularMap:ne.displacementMap?ae=ne.displacementMap:ne.normalMap?ae=ne.normalMap:ne.bumpMap?ae=ne.bumpMap:ne.roughnessMap?ae=ne.roughnessMap:ne.metalnessMap?ae=ne.metalnessMap:ne.alphaMap?ae=ne.alphaMap:ne.emissiveMap?ae=ne.emissiveMap:ne.clearcoatMap?ae=ne.clearcoatMap:ne.clearcoatNormalMap?ae=ne.clearcoatNormalMap:ne.clearcoatRoughnessMap?ae=ne.clearcoatRoughnessMap:ne.specularIntensityMap?ae=ne.specularIntensityMap:ne.specularColorMap?ae=ne.specularColorMap:ne.transmissionMap?ae=ne.transmissionMap:ne.thicknessMap?ae=ne.thicknessMap:ne.sheenColorMap?ae=ne.sheenColorMap:ne.sheenRoughnessMap&&(ae=ne.sheenRoughnessMap),void 0!==ae&&(ae.isWebGLRenderTarget&&(ae=ae.texture),!0===ae.matrixAutoUpdate&&ae.updateMatrix(),ee.uvTransform.value.copy(ae.matrix)),ne.aoMap?de=ne.aoMap:ne.lightMap&&(de=ne.lightMap),void 0!==de&&(de.isWebGLRenderTarget&&(de=de.texture),!0===de.matrixAutoUpdate&&de.updateMatrix(),ee.uv2Transform.value.copy(de.matrix))}return{refreshFogUniforms:function t(X,$){X.fogColor.value.copy($.color),$.isFog?(X.fogNear.value=$.near,X.fogFar.value=$.far):$.isFogExp2&&(X.fogDensity.value=$.density)},refreshMaterialUniforms:function r(X,ee,ne,ae,de){ee.isMeshBasicMaterial||ee.isMeshLambertMaterial?n(X,ee):ee.isMeshToonMaterial?(n(X,ee),function h(X,$){$.gradientMap&&(X.gradientMap.value=$.gradientMap)}(X,ee)):ee.isMeshPhongMaterial?(n(X,ee),function c(X,$){X.specular.value.copy($.specular),X.shininess.value=Math.max($.shininess,1e-4)}(X,ee)):ee.isMeshStandardMaterial?(n(X,ee),function u(X,ee){X.roughness.value=ee.roughness,X.metalness.value=ee.metalness,ee.roughnessMap&&(X.roughnessMap.value=ee.roughnessMap),ee.metalnessMap&&(X.metalnessMap.value=ee.metalnessMap),$.get(ee).envMap&&(X.envMapIntensity.value=ee.envMapIntensity)}(X,ee),ee.isMeshPhysicalMaterial&&function f(X,$,ee){X.ior.value=$.ior,$.sheen>0&&(X.sheenColor.value.copy($.sheenColor).multiplyScalar($.sheen),X.sheenRoughness.value=$.sheenRoughness,$.sheenColorMap&&(X.sheenColorMap.value=$.sheenColorMap),$.sheenRoughnessMap&&(X.sheenRoughnessMap.value=$.sheenRoughnessMap)),$.clearcoat>0&&(X.clearcoat.value=$.clearcoat,X.clearcoatRoughness.value=$.clearcoatRoughness,$.clearcoatMap&&(X.clearcoatMap.value=$.clearcoatMap),$.clearcoatRoughnessMap&&(X.clearcoatRoughnessMap.value=$.clearcoatRoughnessMap),$.clearcoatNormalMap&&(X.clearcoatNormalScale.value.copy($.clearcoatNormalScale),X.clearcoatNormalMap.value=$.clearcoatNormalMap,1===$.side&&X.clearcoatNormalScale.value.negate())),$.transmission>0&&(X.transmission.value=$.transmission,X.transmissionSamplerMap.value=ee.texture,X.transmissionSamplerSize.value.set(ee.width,ee.height),$.transmissionMap&&(X.transmissionMap.value=$.transmissionMap),X.thickness.value=$.thickness,$.thicknessMap&&(X.thicknessMap.value=$.thicknessMap),X.attenuationDistance.value=$.attenuationDistance,X.attenuationColor.value.copy($.attenuationColor)),X.specularIntensity.value=$.specularIntensity,X.specularColor.value.copy($.specularColor),$.specularIntensityMap&&(X.specularIntensityMap.value=$.specularIntensityMap),$.specularColorMap&&(X.specularColorMap.value=$.specularColorMap)}(X,ee,de)):ee.isMeshMatcapMaterial?(n(X,ee),function d(X,$){$.matcap&&(X.matcap.value=$.matcap)}(X,ee)):ee.isMeshDepthMaterial?n(X,ee):ee.isMeshDistanceMaterial?(n(X,ee),function p(X,$){X.referencePosition.value.copy($.referencePosition),X.nearDistance.value=$.nearDistance,X.farDistance.value=$.farDistance}(X,ee)):ee.isMeshNormalMaterial?n(X,ee):ee.isLineBasicMaterial?(function s(X,$){X.diffuse.value.copy($.color),X.opacity.value=$.opacity}(X,ee),ee.isLineDashedMaterial&&function o(X,$){X.dashSize.value=$.dashSize,X.totalSize.value=$.dashSize+$.gapSize,X.scale.value=$.scale}(X,ee)):ee.isPointsMaterial?function a(X,$,ee,ne){var ae;X.diffuse.value.copy($.color),X.opacity.value=$.opacity,X.size.value=$.size*ee,X.scale.value=.5*ne,$.map&&(X.map.value=$.map),$.alphaMap&&(X.alphaMap.value=$.alphaMap),$.alphaTest>0&&(X.alphaTest.value=$.alphaTest),$.map?ae=$.map:$.alphaMap&&(ae=$.alphaMap),void 0!==ae&&(!0===ae.matrixAutoUpdate&&ae.updateMatrix(),X.uvTransform.value.copy(ae.matrix))}(X,ee,ne,ae):ee.isSpriteMaterial?function l(X,$){var ee;X.diffuse.value.copy($.color),X.opacity.value=$.opacity,X.rotation.value=$.rotation,$.map&&(X.map.value=$.map),$.alphaMap&&(X.alphaMap.value=$.alphaMap),$.alphaTest>0&&(X.alphaTest.value=$.alphaTest),$.map?ee=$.map:$.alphaMap&&(ee=$.alphaMap),void 0!==ee&&(!0===ee.matrixAutoUpdate&&ee.updateMatrix(),X.uvTransform.value.copy(ee.matrix))}(X,ee):ee.isShadowMaterial?(X.color.value.copy(ee.color),X.opacity.value=ee.opacity):ee.isShaderMaterial&&(ee.uniformsNeedUpdate=!1)}}}function DL(){var X=jc("canvas");return X.style.display="block",X}function Pt(){var X,$=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ee=void 0!==$.canvas?$.canvas:DL(),ne=void 0!==$.context?$.context:null,ae=void 0===$.depth||$.depth,de=void 0===$.stencil||$.stencil,fe=void 0!==$.antialias&&$.antialias,Ue=void 0===$.premultipliedAlpha||$.premultipliedAlpha,je=void 0!==$.preserveDrawingBuffer&&$.preserveDrawingBuffer,Ke=void 0!==$.powerPreference?$.powerPreference:"default",et=void 0!==$.failIfMajorPerformanceCaveat&&$.failIfMajorPerformanceCaveat;X=null!==ne?ne.getContextAttributes().alpha:void 0!==$.alpha&&$.alpha;var tt=null,nt=null,it=[],ct=[];this.domElement=ee,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=qr,this.physicallyCorrectLights=!1,this.toneMapping=0,this.toneMappingExposure=1;var dt=this,vt=!1,gt=0,yt=0,_t=null,wt=-1,St=null,Ct=new to,At=new to,Et=null,Rt=ee.width,Bt=ee.height,Wt=1,qt=null,Zt=null,Xt=new to(0,0,Rt,Bt),Qt=new to(0,0,Rt,Bt),en=!1,tn=new Od,un=!1,hn=!1,dn=null,mn=new Ds,gn=new va,_n=new wo,Cn={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function J(){return null===_t?Wt:1}var An,Tn,Dn,Ln,On,In,Fn,Wn,Yn,Jn,Zn,Kn,$n,nr,ir,ar,or,hr,dr,fr,vr,yr,br,_r=ne;function ge(X,$){for(var ne=0;ne<X.length;ne++){var ae=X[ne],de=ee.getContext(ae,$);if(null!==de)return de}return null}try{var wr={alpha:!0,depth:ae,stencil:de,antialias:fe,premultipliedAlpha:Ue,preserveDrawingBuffer:je,powerPreference:Ke,failIfMajorPerformanceCaveat:et};if("setAttribute"in ee&&ee.setAttribute("data-engine","three.js r".concat(Ht)),ee.addEventListener("webglcontextlost",U,!1),ee.addEventListener("webglcontextrestored",Me,!1),null===_r){var Cr=["webgl2","webgl","experimental-webgl"];if(!0===dt.isWebGL1Renderer&&Cr.shift(),null===(_r=ge(Cr,wr)))throw ge(Cr)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===_r.getShaderPrecisionFormat&&(_r.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(wr){throw console.error("THREE.WebGLRenderer: "+wr.message),wr}function st(){An=new QD(_r),Tn=new HD(_r,An,$),An.init(Tn),yr=new EL(_r,An,Tn),Dn=new AL(_r,An,Tn),Ln=new ZD(_r),On=new dL,In=new TL(_r,An,Dn,On,Tn,yr,Ln),Fn=new jD(dt),Wn=new XD(dt),Yn=new f_(_r,Tn),br=new kD(_r,An,Yn,Tn),Jn=new JD(_r,Yn,Ln,br),Zn=new rP(_r,Jn,Yn,Ln),dr=new tP(_r,Tn,In),ar=new WD(On),Kn=new fL(dt,Fn,Wn,An,Tn,br,ar),$n=new CL(dt,On),nr=new mL,ir=new wL(An,Tn),hr=new GD(dt,Fn,Dn,Zn,X,Ue),or=new _b(dt,Zn,Tn),fr=new VD(_r,An,Ln,Tn),vr=new KD(_r,An,Ln,Tn),Ln.programs=Kn.programs,dt.capabilities=Tn,dt.extensions=An,dt.properties=On,dt.renderLists=nr,dt.shadowMap=or,dt.state=Dn,dt.info=Ln}st();var Ar=new qp(dt,_r);function U(X){X.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),vt=!0}function Me(){console.log("THREE.WebGLRenderer: Context Restored."),vt=!1;var X=Ln.autoReset,$=or.enabled,ee=or.autoUpdate,ne=or.needsUpdate,ae=or.type;st(),Ln.autoReset=X,or.enabled=$,or.autoUpdate=ee,or.needsUpdate=ne,or.type=ae}function De(X){var $=X.target;$.removeEventListener("dispose",De),Ze($)}function Ze(X){Oe(X),On.remove(X)}function Oe(X){var $=On.get(X).programs;void 0!==$&&($.forEach((function(X){Kn.releaseProgram(X)})),X.isShaderMaterial&&Kn.releaseShaderCache(X))}this.xr=Ar,this.getContext=function(){return _r},this.getContextAttributes=function(){return _r.getContextAttributes()},this.forceContextLoss=function(){var X=An.get("WEBGL_lose_context");X&&X.loseContext()},this.forceContextRestore=function(){var X=An.get("WEBGL_lose_context");X&&X.restoreContext()},this.getPixelRatio=function(){return Wt},this.setPixelRatio=function(X){void 0!==X&&(Wt=X,this.setSize(Rt,Bt,!1))},this.getSize=function(X){return X.set(Rt,Bt)},this.setSize=function(X,$,ne){Ar.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Rt=X,Bt=$,ee.width=Math.floor(X*Wt),ee.height=Math.floor($*Wt),!1!==ne&&(ee.style.width=X+"px",ee.style.height=$+"px"),this.setViewport(0,0,X,$))},this.getDrawingBufferSize=function(X){return X.set(Rt*Wt,Bt*Wt).floor()},this.setDrawingBufferSize=function(X,$,ne){Rt=X,Bt=$,Wt=ne,ee.width=Math.floor(X*ne),ee.height=Math.floor($*ne),this.setViewport(0,0,X,$)},this.getCurrentViewport=function(X){return X.copy(Ct)},this.getViewport=function(X){return X.copy(Xt)},this.setViewport=function(X,$,ee,ne){X.isVector4?Xt.set(X.x,X.y,X.z,X.w):Xt.set(X,$,ee,ne),Dn.viewport(Ct.copy(Xt).multiplyScalar(Wt).floor())},this.getScissor=function(X){return X.copy(Qt)},this.setScissor=function(X,$,ee,ne){X.isVector4?Qt.set(X.x,X.y,X.z,X.w):Qt.set(X,$,ee,ne),Dn.scissor(At.copy(Qt).multiplyScalar(Wt).floor())},this.getScissorTest=function(){return en},this.setScissorTest=function(X){Dn.setScissorTest(en=X)},this.setOpaqueSort=function(X){qt=X},this.setTransparentSort=function(X){Zt=X},this.getClearColor=function(X){return X.copy(hr.getClearColor())},this.setClearColor=function(){hr.setClearColor.apply(hr,arguments)},this.getClearAlpha=function(){return hr.getClearAlpha()},this.setClearAlpha=function(){hr.setClearAlpha.apply(hr,arguments)},this.clear=function(){var X=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],$=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],ee=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],ne=0;X&&(ne|=16384),$&&(ne|=256),ee&&(ne|=1024),_r.clear(ne)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){ee.removeEventListener("webglcontextlost",U,!1),ee.removeEventListener("webglcontextrestored",Me,!1),nr.dispose(),ir.dispose(),On.dispose(),Fn.dispose(),Wn.dispose(),Zn.dispose(),br.dispose(),Kn.dispose(),Ar.dispose(),Ar.removeEventListener("sessionstart",$e),Ar.removeEventListener("sessionend",lt),dn&&(dn.dispose(),dn=null),Er.stop()},this.renderBufferDirect=function(X,$,ee,ne,ae,de){null===$&&($=Cn);var fe=ae.isMesh&&ae.matrixWorld.determinant()<0,Ue=pt(X,$,ee,ne,ae);Dn.setMaterial(ne,fe);var je=ee.index,Ke=ee.attributes.position;if(null===je){if(void 0===Ke||0===Ke.count)return}else if(0===je.count)return;var et=1;!0===ne.wireframe&&(je=Jn.getWireframeAttribute(ee),et=2),br.setup(ae,ne,Ue,ee,je);var tt,nt=fr;null!==je&&(tt=Yn.get(je),(nt=vr).setIndex(tt));var it=null!==je?je.count:Ke.count,ct=ee.drawRange.start*et,dt=ee.drawRange.count*et,vt=null!==de?de.start*et:0,gt=null!==de?de.count*et:1/0,yt=Math.max(ct,vt),_t=Math.min(it,ct+dt,vt+gt)-1,wt=Math.max(0,_t-yt+1);if(0!==wt){if(ae.isMesh)!0===ne.wireframe?(Dn.setLineWidth(ne.wireframeLinewidth*J()),nt.setMode(1)):nt.setMode(4);else if(ae.isLine){var St=ne.linewidth;void 0===St&&(St=1),Dn.setLineWidth(St*J()),ae.isLineSegments?nt.setMode(1):ae.isLineLoop?nt.setMode(2):nt.setMode(3)}else ae.isPoints?nt.setMode(0):ae.isSprite&&nt.setMode(4);if(ae.isInstancedMesh)nt.renderInstances(yt,wt,ae.count);else if(ee.isInstancedBufferGeometry){var Ct=Math.min(ee.instanceCount,ee._maxInstanceCount);nt.renderInstances(yt,wt,Ct)}else nt.render(yt,wt)}},this.compile=function(X,$){(nt=ir.get(X)).init(),ct.push(nt),X.traverseVisible((function(X){X.isLight&&X.layers.test($.layers)&&(nt.pushLight(X),X.castShadow&&nt.pushShadow(X))})),nt.setupLights(dt.physicallyCorrectLights),X.traverse((function($){var ee=$.material;if(ee)if(Array.isArray(ee))for(var ne=0;ne<ee.length;ne++){ut(ee[ne],X,$)}else ut(ee,X,$)})),ct.pop(),nt=null};var Mr=null;function Te(X){Mr&&Mr(X)}function $e(){Er.stop()}function lt(){Er.start()}var Er=new bb;function Ut(X,$,ee,ne){if(!1!==X.visible){if(X.layers.test($.layers))if(X.isGroup)ee=X.renderOrder;else if(X.isLOD)!0===X.autoUpdate&&X.update($);else if(X.isLight)nt.pushLight(X),X.castShadow&&nt.pushShadow(X);else if(X.isSprite){if(!X.frustumCulled||tn.intersectsSprite(X)){ne&&_n.setFromMatrixPosition(X.matrixWorld).applyMatrix4(mn);var ae=Zn.update(X),de=X.material;de.visible&&tt.push(X,ae,de,ee,_n.z,null)}}else if((X.isMesh||X.isLine||X.isPoints)&&(X.isSkinnedMesh&&X.skeleton.frame!==Ln.render.frame&&(X.skeleton.update(),X.skeleton.frame=Ln.render.frame),!X.frustumCulled||tn.intersectsObject(X))){ne&&_n.setFromMatrixPosition(X.matrixWorld).applyMatrix4(mn);var fe=Zn.update(X),Ue=X.material;if(Array.isArray(Ue))for(var je=fe.groups,Ke=0,et=je.length;Ke<et;Ke++){var it=je[Ke],ct=Ue[it.materialIndex];ct&&ct.visible&&tt.push(X,fe,ct,ee,_n.z,it)}else Ue.visible&&tt.push(X,fe,Ue,ee,_n.z,null)}for(var dt=X.children,vt=0,gt=dt.length;vt<gt;vt++)Ut(dt[vt],$,ee,ne)}}function Ur(X,$,ee,ne){var ae=X.opaque,de=X.transmissive,fe=X.transparent;nt.setupLightsView(ee),de.length>0&&ia(ae,$,ee),ne&&Dn.viewport(Ct.copy(ne)),ae.length>0&&Nn(ae,$,ee),de.length>0&&Nn(de,$,ee),fe.length>0&&Nn(fe,$,ee),Dn.buffers.depth.setTest(!0),Dn.buffers.depth.setMask(!0),Dn.buffers.color.setMask(!0),Dn.setPolygonOffset(!1)}function ia(X,$,ee){var ne=Tn.isWebGL2;null===dn&&(dn=new ro(1,1,{generateMipmaps:!0,type:An.has("EXT_color_buffer_half_float")?En:Sn,minFilter:wn,samples:ne&&!0===fe?4:0})),dt.getDrawingBufferSize(gn),ne?dn.setSize(gn.x,gn.y):dn.setSize(mf(gn.x),mf(gn.y));var ae=dt.getRenderTarget();dt.setRenderTarget(dn),dt.clear();var de=dt.toneMapping;dt.toneMapping=0,Nn(X,$,ee),dt.toneMapping=de,In.updateMultisampleRenderTarget(dn),In.updateRenderTargetMipmap(dn),dt.setRenderTarget(ae)}function Nn(X,$,ee){for(var ne=!0===$.isScene?$.overrideMaterial:null,ae=0,de=X.length;ae<de;ae++){var fe=X[ae],Ue=fe.object,je=fe.geometry,Ke=null===ne?fe.material:ne,et=fe.group;Ue.layers.test(ee.layers)&&at(Ue,$,ee,je,Ke,et)}}function at(X,$,ee,ne,ae,de){X.onBeforeRender(dt,$,ee,ne,ae,de),X.modelViewMatrix.multiplyMatrices(ee.matrixWorldInverse,X.matrixWorld),X.normalMatrix.getNormalMatrix(X.modelViewMatrix),ae.onBeforeRender(dt,$,ee,ne,X,de),!0===ae.transparent&&2===ae.side?(ae.side=1,ae.needsUpdate=!0,dt.renderBufferDirect(ee,$,ne,ae,X,de),ae.side=0,ae.needsUpdate=!0,dt.renderBufferDirect(ee,$,ne,ae,X,de),ae.side=2):dt.renderBufferDirect(ee,$,ne,ae,X,de),X.onAfterRender(dt,$,ee,ne,ae,de)}function ut(X,$,ee){!0!==$.isScene&&($=Cn);var ne=On.get(X),ae=nt.state.lights,de=nt.state.shadowsArray,fe=ae.state.version,Ue=Kn.getParameters(X,ae.state,de,$,ee),je=Kn.getProgramCacheKey(Ue),Ke=ne.programs;ne.environment=X.isMeshStandardMaterial?$.environment:null,ne.fog=$.fog,ne.envMap=(X.isMeshStandardMaterial?Wn:Fn).get(X.envMap||ne.environment),void 0===Ke&&(X.addEventListener("dispose",De),Ke=new Map,ne.programs=Ke);var et=Ke.get(je);if(void 0!==et){if(ne.currentProgram===et&&ne.lightsStateVersion===fe)return ft(X,Ue),et}else Ue.uniforms=Kn.getUniforms(X),X.onBuild(ee,Ue,dt),X.onBeforeCompile(Ue,dt),et=Kn.acquireProgram(Ue,je),Ke.set(je,et),ne.uniforms=Ue.uniforms;var tt=ne.uniforms;(!X.isShaderMaterial&&!X.isRawShaderMaterial||!0===X.clipping)&&(tt.clippingPlanes=ar.uniform),ft(X,Ue),ne.needsLights=It(X),ne.lightsStateVersion=fe,ne.needsLights&&(tt.ambientLightColor.value=ae.state.ambient,tt.lightProbe.value=ae.state.probe,tt.directionalLights.value=ae.state.directional,tt.directionalLightShadows.value=ae.state.directionalShadow,tt.spotLights.value=ae.state.spot,tt.spotLightShadows.value=ae.state.spotShadow,tt.rectAreaLights.value=ae.state.rectArea,tt.ltc_1.value=ae.state.rectAreaLTC1,tt.ltc_2.value=ae.state.rectAreaLTC2,tt.pointLights.value=ae.state.point,tt.pointLightShadows.value=ae.state.pointShadow,tt.hemisphereLights.value=ae.state.hemi,tt.directionalShadowMap.value=ae.state.directionalShadowMap,tt.directionalShadowMatrix.value=ae.state.directionalShadowMatrix,tt.spotShadowMap.value=ae.state.spotShadowMap,tt.spotShadowMatrix.value=ae.state.spotShadowMatrix,tt.pointShadowMap.value=ae.state.pointShadowMap,tt.pointShadowMatrix.value=ae.state.pointShadowMatrix);var it=et.getUniforms(),ct=Is.seqWithValue(it.seq,tt);return ne.currentProgram=et,ne.uniformsList=ct,et}function ft(X,$){var ee=On.get(X);ee.outputEncoding=$.outputEncoding,ee.instancing=$.instancing,ee.skinning=$.skinning,ee.morphTargets=$.morphTargets,ee.morphNormals=$.morphNormals,ee.morphColors=$.morphColors,ee.morphTargetsCount=$.morphTargetsCount,ee.numClippingPlanes=$.numClippingPlanes,ee.numIntersection=$.numClipIntersection,ee.vertexAlphas=$.vertexAlphas,ee.vertexTangents=$.vertexTangents,ee.toneMapping=$.toneMapping}function pt(X,$,ee,ne,ae){!0!==$.isScene&&($=Cn),In.resetTextureUnits();var de=$.fog,fe=ne.isMeshStandardMaterial?$.environment:null,Ue=null===_t?dt.outputEncoding:!0===_t.isXRRenderTarget?_t.texture.encoding:qr,je=(ne.isMeshStandardMaterial?Wn:Fn).get(ne.envMap||fe),Ke=!0===ne.vertexColors&&!!ee.attributes.color&&4===ee.attributes.color.itemSize,et=!!ne.normalMap&&!!ee.attributes.tangent,tt=!!ee.morphAttributes.position,it=!!ee.morphAttributes.normal,ct=!!ee.morphAttributes.color,vt=ne.toneMapped?dt.toneMapping:0,gt=ee.morphAttributes.position||ee.morphAttributes.normal||ee.morphAttributes.color,yt=void 0!==gt?gt.length:0,Ct=On.get(ne),At=nt.state.lights;if(!0===un&&(!0===hn||X!==St)){var Et=X===St&&ne.id===wt;ar.setState(ne,X,Et)}var Rt=!1;ne.version===Ct.__version?(Ct.needsLights&&Ct.lightsStateVersion!==At.state.version||Ct.outputEncoding!==Ue||ae.isInstancedMesh&&!1===Ct.instancing||!ae.isInstancedMesh&&!0===Ct.instancing||ae.isSkinnedMesh&&!1===Ct.skinning||!ae.isSkinnedMesh&&!0===Ct.skinning||Ct.envMap!==je||!0===ne.fog&&Ct.fog!==de||void 0!==Ct.numClippingPlanes&&(Ct.numClippingPlanes!==ar.numPlanes||Ct.numIntersection!==ar.numIntersection)||Ct.vertexAlphas!==Ke||Ct.vertexTangents!==et||Ct.morphTargets!==tt||Ct.morphNormals!==it||Ct.morphColors!==ct||Ct.toneMapping!==vt||!0===Tn.isWebGL2&&Ct.morphTargetsCount!==yt)&&(Rt=!0):(Rt=!0,Ct.__version=ne.version);var Ht=Ct.currentProgram;!0===Rt&&(Ht=ut(ne,$,ae));var qt=!1,Zt=!1,Xt=!1,Qt=Ht.getUniforms(),en=Ct.uniforms;if(Dn.useProgram(Ht.program)&&(qt=!0,Zt=!0,Xt=!0),ne.id!==wt&&(wt=ne.id,Zt=!0),qt||St!==X){if(Qt.setValue(_r,"projectionMatrix",X.projectionMatrix),Tn.logarithmicDepthBuffer&&Qt.setValue(_r,"logDepthBufFC",2/(Math.log(X.far+1)/Math.LN2)),St!==X&&(St=X,Zt=!0,Xt=!0),ne.isShaderMaterial||ne.isMeshPhongMaterial||ne.isMeshToonMaterial||ne.isMeshStandardMaterial||ne.envMap){var tn=Qt.map.cameraPosition;void 0!==tn&&tn.setValue(_r,_n.setFromMatrixPosition(X.matrixWorld))}(ne.isMeshPhongMaterial||ne.isMeshToonMaterial||ne.isMeshLambertMaterial||ne.isMeshBasicMaterial||ne.isMeshStandardMaterial||ne.isShaderMaterial)&&Qt.setValue(_r,"isOrthographic",!0===X.isOrthographicCamera),(ne.isMeshPhongMaterial||ne.isMeshToonMaterial||ne.isMeshLambertMaterial||ne.isMeshBasicMaterial||ne.isMeshStandardMaterial||ne.isShaderMaterial||ne.isShadowMaterial||ae.isSkinnedMesh)&&Qt.setValue(_r,"viewMatrix",X.matrixWorldInverse)}if(ae.isSkinnedMesh){Qt.setOptional(_r,ae,"bindMatrix"),Qt.setOptional(_r,ae,"bindMatrixInverse");var mn=ae.skeleton;mn&&(Tn.floatVertexTextures?(null===mn.boneTexture&&mn.computeBoneTexture(),Qt.setValue(_r,"boneTexture",mn.boneTexture,In),Qt.setValue(_r,"boneTextureSize",mn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}var gn=ee.morphAttributes;return(void 0!==gn.position||void 0!==gn.normal||void 0!==gn.color&&!0===Tn.isWebGL2)&&dr.update(ae,ee,ne,Ht),(Zt||Ct.receiveShadow!==ae.receiveShadow)&&(Ct.receiveShadow=ae.receiveShadow,Qt.setValue(_r,"receiveShadow",ae.receiveShadow)),Zt&&(Qt.setValue(_r,"toneMappingExposure",dt.toneMappingExposure),Ct.needsLights&&xt(en,Xt),de&&!0===ne.fog&&$n.refreshFogUniforms(en,de),$n.refreshMaterialUniforms(en,ne,Wt,Bt,dn),Is.upload(_r,Ct.uniformsList,en,In)),ne.isShaderMaterial&&!0===ne.uniformsNeedUpdate&&(Is.upload(_r,Ct.uniformsList,en,In),ne.uniformsNeedUpdate=!1),ne.isSpriteMaterial&&Qt.setValue(_r,"center",ae.center),Qt.setValue(_r,"modelViewMatrix",ae.modelViewMatrix),Qt.setValue(_r,"normalMatrix",ae.normalMatrix),Qt.setValue(_r,"modelMatrix",ae.matrixWorld),Ht}function xt(X,$){X.ambientLightColor.needsUpdate=$,X.lightProbe.needsUpdate=$,X.directionalLights.needsUpdate=$,X.directionalLightShadows.needsUpdate=$,X.pointLights.needsUpdate=$,X.pointLightShadows.needsUpdate=$,X.spotLights.needsUpdate=$,X.spotLightShadows.needsUpdate=$,X.rectAreaLights.needsUpdate=$,X.hemisphereLights.needsUpdate=$}function It(X){return X.isMeshLambertMaterial||X.isMeshToonMaterial||X.isMeshPhongMaterial||X.isMeshStandardMaterial||X.isShadowMaterial||X.isShaderMaterial&&!0===X.lights}Er.setAnimationLoop(Te),typeof self<"u"&&Er.setContext(self),this.setAnimationLoop=function(X){Mr=X,Ar.setAnimationLoop(X),null===X?Er.stop():Er.start()},Ar.addEventListener("sessionstart",$e),Ar.addEventListener("sessionend",lt),this.render=function(X,$){if(void 0===$||!0===$.isCamera){if(!0!==vt){!0===X.autoUpdate&&X.updateMatrixWorld(),null===$.parent&&$.updateMatrixWorld(),!0===Ar.enabled&&!0===Ar.isPresenting&&(!0===Ar.cameraAutoUpdate&&Ar.updateCamera($),$=Ar.getCamera()),!0===X.isScene&&X.onBeforeRender(dt,X,$,_t),(nt=ir.get(X,ct.length)).init(),ct.push(nt),mn.multiplyMatrices($.projectionMatrix,$.matrixWorldInverse),tn.setFromProjectionMatrix(mn),hn=this.localClippingEnabled,un=ar.init(this.clippingPlanes,hn,$),(tt=nr.get(X,it.length)).init(),it.push(tt),Ut(X,$,0,dt.sortObjects),tt.finish(),!0===dt.sortObjects&&tt.sort(qt,Zt),!0===un&&ar.beginShadows();var ee=nt.state.shadowsArray;if(or.render(ee,X,$),!0===un&&ar.endShadows(),!0===this.info.autoReset&&this.info.reset(),hr.render(tt,X),nt.setupLights(dt.physicallyCorrectLights),$.isArrayCamera)for(var ne=$.cameras,ae=0,de=ne.length;ae<de;ae++){var fe=ne[ae];Ur(tt,X,fe,fe.viewport)}else Ur(tt,X,$);null!==_t&&(In.updateMultisampleRenderTarget(_t),In.updateRenderTargetMipmap(_t)),!0===X.isScene&&X.onAfterRender(dt,X,$),br.resetDefaultState(),wt=-1,St=null,ct.pop(),nt=ct.length>0?ct[ct.length-1]:null,it.pop(),tt=it.length>0?it[it.length-1]:null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.getActiveCubeFace=function(){return gt},this.getActiveMipmapLevel=function(){return yt},this.getRenderTarget=function(){return _t},this.setRenderTargetTextures=function(X,$,ee){On.get(X.texture).__webglTexture=$,On.get(X.depthTexture).__webglTexture=ee;var ne=On.get(X);ne.__hasExternalTextures=!0,ne.__hasExternalTextures&&(ne.__autoAllocateDepthBuffer=void 0===ee,ne.__autoAllocateDepthBuffer||!0===An.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ne.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(X,$){var ee=On.get(X);ee.__webglFramebuffer=$,ee.__useDefaultFramebuffer=void 0===$},this.setRenderTarget=function(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_t=X,gt=$,yt=ee;var ne=!0;if(X){var ae=On.get(X);void 0!==ae.__useDefaultFramebuffer?(Dn.bindFramebuffer(36160,null),ne=!1):void 0===ae.__webglFramebuffer?In.setupRenderTarget(X):ae.__hasExternalTextures&&In.rebindTextures(X,On.get(X.texture).__webglTexture,On.get(X.depthTexture).__webglTexture)}var de=null,fe=!1,Ue=!1;if(X){var je=X.texture;(je.isData3DTexture||je.isDataArrayTexture)&&(Ue=!0);var Ke=On.get(X).__webglFramebuffer;X.isWebGLCubeRenderTarget?(de=Ke[$],fe=!0):de=Tn.isWebGL2&&X.samples>0&&!1===In.useMultisampledRTT(X)?On.get(X).__webglMultisampledFramebuffer:Ke,Ct.copy(X.viewport),At.copy(X.scissor),Et=X.scissorTest}else Ct.copy(Xt).multiplyScalar(Wt).floor(),At.copy(Qt).multiplyScalar(Wt).floor(),Et=en;if(Dn.bindFramebuffer(36160,de)&&Tn.drawBuffers&&ne&&Dn.drawBuffers(X,de),Dn.viewport(Ct),Dn.scissor(At),Dn.setScissorTest(Et),fe){var et=On.get(X.texture);_r.framebufferTexture2D(36160,36064,34069+$,et.__webglTexture,ee)}else if(Ue){var tt=On.get(X.texture),nt=$||0;_r.framebufferTextureLayer(36160,36064,tt.__webglTexture,ee||0,nt)}wt=-1},this.readRenderTargetPixels=function(X,$,ee,ne,ae,de,fe){if(X&&X.isWebGLRenderTarget){var Ue=On.get(X).__webglFramebuffer;if(X.isWebGLCubeRenderTarget&&void 0!==fe&&(Ue=Ue[fe]),Ue){Dn.bindFramebuffer(36160,Ue);try{var je=X.texture,Ke=je.format,et=je.type;if(Ke!==Pn&&yr.convert(Ke)!==_r.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");var tt=et===En&&(An.has("EXT_color_buffer_half_float")||Tn.isWebGL2&&An.has("EXT_color_buffer_float"));if(et!==Sn&&yr.convert(et)!==_r.getParameter(35738)&&(et!==Mn||!(Tn.isWebGL2||An.has("OES_texture_float")||An.has("WEBGL_color_buffer_float")))&&!tt)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");$>=0&&$<=X.width-ne&&ee>=0&&ee<=X.height-ae&&_r.readPixels($,ee,ne,ae,yr.convert(Ke),yr.convert(et),de)}finally{var nt=null!==_t?On.get(_t).__webglFramebuffer:null;Dn.bindFramebuffer(36160,nt)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(X,$){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(!0===$.isFramebufferTexture){var ne=Math.pow(2,-ee),ae=Math.floor($.image.width*ne),de=Math.floor($.image.height*ne);In.setTexture2D($,0),_r.copyTexSubImage2D(3553,ee,0,0,X.x,X.y,ae,de),Dn.unbindTexture()}else console.error("THREE.WebGLRenderer: copyFramebufferToTexture() can only be used with FramebufferTexture.")},this.copyTextureToTexture=function(X,$,ee){var ne=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,ae=$.image.width,de=$.image.height,fe=yr.convert(ee.format),Ue=yr.convert(ee.type);In.setTexture2D(ee,0),_r.pixelStorei(37440,ee.flipY),_r.pixelStorei(37441,ee.premultiplyAlpha),_r.pixelStorei(3317,ee.unpackAlignment),$.isDataTexture?_r.texSubImage2D(3553,ne,X.x,X.y,ae,de,fe,Ue,$.image.data):$.isCompressedTexture?_r.compressedTexSubImage2D(3553,ne,X.x,X.y,$.mipmaps[0].width,$.mipmaps[0].height,fe,$.mipmaps[0].data):_r.texSubImage2D(3553,ne,X.x,X.y,fe,Ue,$.image),0===ne&&ee.generateMipmaps&&_r.generateMipmap(3553),Dn.unbindTexture()},this.copyTextureToTexture3D=function(X,$,ee,ne){var ae=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(dt.isWebGL1Renderer)console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");else{var de,fe=X.max.x-X.min.x+1,Ue=X.max.y-X.min.y+1,je=X.max.z-X.min.z+1,Ke=yr.convert(ne.format),et=yr.convert(ne.type);if(ne.isData3DTexture)In.setTexture3D(ne,0),de=32879;else{if(!ne.isDataArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");In.setTexture2DArray(ne,0),de=35866}_r.pixelStorei(37440,ne.flipY),_r.pixelStorei(37441,ne.premultiplyAlpha),_r.pixelStorei(3317,ne.unpackAlignment);var tt=_r.getParameter(3314),nt=_r.getParameter(32878),it=_r.getParameter(3316),ct=_r.getParameter(3315),vt=_r.getParameter(32877),gt=ee.isCompressedTexture?ee.mipmaps[0]:ee.image;_r.pixelStorei(3314,gt.width),_r.pixelStorei(32878,gt.height),_r.pixelStorei(3316,X.min.x),_r.pixelStorei(3315,X.min.y),_r.pixelStorei(32877,X.min.z),ee.isDataTexture||ee.isData3DTexture?_r.texSubImage3D(de,ae,$.x,$.y,$.z,fe,Ue,je,Ke,et,gt.data):ee.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),_r.compressedTexSubImage3D(de,ae,$.x,$.y,$.z,fe,Ue,je,Ke,gt.data)):_r.texSubImage3D(de,ae,$.x,$.y,$.z,fe,Ue,je,Ke,et,gt),_r.pixelStorei(3314,tt),_r.pixelStorei(32878,nt),_r.pixelStorei(3316,it),_r.pixelStorei(3315,ct),_r.pixelStorei(32877,vt),0===ae&&ne.generateMipmaps&&_r.generateMipmap(de),Dn.unbindTexture()}},this.initTexture=function(X){In.setTexture2D(X,0),Dn.unbindTexture()},this.resetState=function(){gt=0,yt=0,_t=null,Dn.reset(),br.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}Pt.prototype.isWebGLRenderer=!0;var Yp=function(X){_inherits(mg,X);var $=_createSuper(mg);function mg(){return _classCallCheck(this,mg),$.apply(this,arguments)}return _createClass(mg)}(Pt);Yp.prototype.isWebGL1Renderer=!0;var Jp=function(){function Kc(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;_classCallCheck(this,Kc),this.name="",this.color=new Ma(X),this.density=$}return _createClass(Kc,[{key:"clone",value:function clone(){return new Kc(this.color,this.density)}},{key:"toJSON",value:function toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}]),Kc}();Jp.prototype.isFogExp2=!0;var Qp=function(){function Do(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;_classCallCheck(this,Do),this.name="",this.color=new Ma(X),this.near=$,this.far=ee}return _createClass(Do,[{key:"clone",value:function clone(){return new Do(this.color,this.near,this.far)}},{key:"toJSON",value:function toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}]),Do}();Qp.prototype.isFog=!0;var nv=function(X){_inherits(on,X);var $=_createSuper(on);function on(){var X;return _classCallCheck(this,on),(X=$.call(this)).type="Scene",X.background=null,X.environment=null,X.fog=null,X.overrideMaterial=null,X.autoUpdate=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:_assertThisInitialized(X)})),X}return _createClass(on,[{key:"copy",value:function copy(X,$){return _get(_getPrototypeOf(on.prototype),"copy",this).call(this,X,$),null!==X.background&&(this.background=X.background.clone()),null!==X.environment&&(this.environment=X.environment.clone()),null!==X.fog&&(this.fog=X.fog.clone()),null!==X.overrideMaterial&&(this.overrideMaterial=X.overrideMaterial.clone()),this.autoUpdate=X.autoUpdate,this.matrixAutoUpdate=X.matrixAutoUpdate,this}},{key:"toJSON",value:function toJSON(X){var $=_get(_getPrototypeOf(on.prototype),"toJSON",this).call(this,X);return null!==this.fog&&($.object.fog=this.fog.toJSON()),$}}]),on}(ru);nv.prototype.isScene=!0;var ov=function(){function ss(X,$){_classCallCheck(this,ss),this.array=X,this.stride=$,this.count=void 0!==X?X.length/$:0,this.usage=Di,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Un()}return _createClass(ss,[{key:"onUploadCallback",value:function onUploadCallback(){}},{key:"needsUpdate",set:function set(X){!0===X&&this.version++}},{key:"setUsage",value:function setUsage(X){return this.usage=X,this}},{key:"copy",value:function copy(X){return this.array=new X.array.constructor(X.array),this.count=X.count,this.stride=X.stride,this.usage=X.usage,this}},{key:"copyAt",value:function copyAt(X,$,ee){X*=this.stride,ee*=$.stride;for(var ne=0,ae=this.stride;ne<ae;ne++)this.array[X+ne]=$.array[ee+ne];return this}},{key:"set",value:function set(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(X,$),this}},{key:"clone",value:function clone(X){void 0===X.arrayBuffers&&(X.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Un()),void 0===X.arrayBuffers[this.array.buffer._uuid]&&(X.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);var $=new this.array.constructor(X.arrayBuffers[this.array.buffer._uuid]),ee=new this.constructor($,this.stride);return ee.setUsage(this.usage),ee}},{key:"onUpload",value:function onUpload(X){return this.onUploadCallback=X,this}},{key:"toJSON",value:function toJSON(X){return void 0===X.arrayBuffers&&(X.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Un()),void 0===X.arrayBuffers[this.array.buffer._uuid]&&(X.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}]),ss}();ov.prototype.isInterleavedBuffer=!0;var sv=new wo,lv=function(){function _i(X,$,ee){var ne=arguments.length>3&&void 0!==arguments[3]&&arguments[3];_classCallCheck(this,_i),this.name="",this.data=X,this.itemSize=$,this.offset=ee,this.normalized=!0===ne}return _createClass(_i,[{key:"count",get:function get(){return this.data.count}},{key:"array",get:function get(){return this.data.array}},{key:"needsUpdate",set:function set(X){this.data.needsUpdate=X}},{key:"applyMatrix4",value:function applyMatrix4(X){for(var $=0,ee=this.data.count;$<ee;$++)sv.fromBufferAttribute(this,$),sv.applyMatrix4(X),this.setXYZ($,sv.x,sv.y,sv.z);return this}},{key:"applyNormalMatrix",value:function applyNormalMatrix(X){for(var $=0,ee=this.count;$<ee;$++)sv.fromBufferAttribute(this,$),sv.applyNormalMatrix(X),this.setXYZ($,sv.x,sv.y,sv.z);return this}},{key:"transformDirection",value:function transformDirection(X){for(var $=0,ee=this.count;$<ee;$++)sv.fromBufferAttribute(this,$),sv.transformDirection(X),this.setXYZ($,sv.x,sv.y,sv.z);return this}},{key:"setX",value:function setX(X,$){return this.data.array[X*this.data.stride+this.offset]=$,this}},{key:"setY",value:function setY(X,$){return this.data.array[X*this.data.stride+this.offset+1]=$,this}},{key:"setZ",value:function setZ(X,$){return this.data.array[X*this.data.stride+this.offset+2]=$,this}},{key:"setW",value:function setW(X,$){return this.data.array[X*this.data.stride+this.offset+3]=$,this}},{key:"getX",value:function getX(X){return this.data.array[X*this.data.stride+this.offset]}},{key:"getY",value:function getY(X){return this.data.array[X*this.data.stride+this.offset+1]}},{key:"getZ",value:function getZ(X){return this.data.array[X*this.data.stride+this.offset+2]}},{key:"getW",value:function getW(X){return this.data.array[X*this.data.stride+this.offset+3]}},{key:"setXY",value:function setXY(X,$,ee){return X=X*this.data.stride+this.offset,this.data.array[X+0]=$,this.data.array[X+1]=ee,this}},{key:"setXYZ",value:function setXYZ(X,$,ee,ne){return X=X*this.data.stride+this.offset,this.data.array[X+0]=$,this.data.array[X+1]=ee,this.data.array[X+2]=ne,this}},{key:"setXYZW",value:function setXYZW(X,$,ee,ne,ae){return X=X*this.data.stride+this.offset,this.data.array[X+0]=$,this.data.array[X+1]=ee,this.data.array[X+2]=ne,this.data.array[X+3]=ae,this}},{key:"clone",value:function clone(X){if(void 0===X){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");for(var $=[],ee=0;ee<this.count;ee++)for(var ne=ee*this.data.stride+this.offset,ae=0;ae<this.itemSize;ae++)$.push(this.data.array[ne+ae]);return new Lu(new this.array.constructor($),this.itemSize,this.normalized)}return void 0===X.interleavedBuffers&&(X.interleavedBuffers={}),void 0===X.interleavedBuffers[this.data.uuid]&&(X.interleavedBuffers[this.data.uuid]=this.data.clone(X)),new _i(X.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}},{key:"toJSON",value:function toJSON(X){if(void 0===X){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");for(var $=[],ee=0;ee<this.count;ee++)for(var ne=ee*this.data.stride+this.offset,ae=0;ae<this.itemSize;ae++)$.push(this.data.array[ne+ae]);return{itemSize:this.itemSize,type:this.array.constructor.name,array:$,normalized:this.normalized}}return void 0===X.interleavedBuffers&&(X.interleavedBuffers={}),void 0===X.interleavedBuffers[this.data.uuid]&&(X.interleavedBuffers[this.data.uuid]=this.data.toJSON(X)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}]),_i}();lv.prototype.isInterleavedBufferAttribute=!0;var _v=function(X){_inherits(Zc,X);var $=_createSuper(Zc);function Zc(X){var ee;return _classCallCheck(this,Zc),(ee=$.call(this)).type="SpriteMaterial",ee.color=new Ma(16777215),ee.map=null,ee.alphaMap=null,ee.rotation=0,ee.sizeAttenuation=!0,ee.transparent=!0,ee.fog=!0,ee.setValues(X),ee}return _createClass(Zc,[{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Zc.prototype),"copy",this).call(this,X),this.color.copy(X.color),this.map=X.map,this.alphaMap=X.alphaMap,this.rotation=X.rotation,this.sizeAttenuation=X.sizeAttenuation,this.fog=X.fog,this}}]),Zc}(Au);_v.prototype.isSpriteMaterial=!0;var Sv,kv=new wo,Cv=new wo,Pv=new wo,Dv=new va,Ov=new va,Bv=new Ds,Uv=new wo,Vv=new wo,Gv=new wo,qv=new va,Jv=new va,Kv=new va,em=function(X){_inherits(gg,X);var $=_createSuper(gg);function gg(X){var ee;if(_classCallCheck(this,gg),(ee=$.call(this)).type="Sprite",void 0===Sv){Sv=new Wu;var ne=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),ae=new ov(ne,5);Sv.setIndex([0,1,2,0,2,3]),Sv.setAttribute("position",new lv(ae,3,0,!1)),Sv.setAttribute("uv",new lv(ae,2,3,!1))}return ee.geometry=Sv,ee.material=void 0!==X?X:new _v,ee.center=new va(.5,.5),_possibleConstructorReturn(ee)}return _createClass(gg,[{key:"raycast",value:function raycast(X,$){null===X.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Cv.setFromMatrixScale(this.matrixWorld),Bv.copy(X.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(X.camera.matrixWorldInverse,this.matrixWorld),Pv.setFromMatrixPosition(this.modelViewMatrix),X.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Cv.multiplyScalar(-Pv.z);var ee,ne,ae=this.material.rotation;0!==ae&&(ne=Math.cos(ae),ee=Math.sin(ae));var de=this.center;Ju(Uv.set(-.5,-.5,0),Pv,de,Cv,ee,ne),Ju(Vv.set(.5,-.5,0),Pv,de,Cv,ee,ne),Ju(Gv.set(.5,.5,0),Pv,de,Cv,ee,ne),qv.set(0,0),Jv.set(1,0),Kv.set(1,1);var fe=X.ray.intersectTriangle(Uv,Vv,Gv,!1,kv);if(null!==fe||(Ju(Vv.set(-.5,.5,0),Pv,de,Cv,ee,ne),Jv.set(0,1),null!==(fe=X.ray.intersectTriangle(Uv,Gv,Vv,!1,kv)))){var Ue=X.ray.origin.distanceTo(kv);Ue<X.near||Ue>X.far||$.push({distance:Ue,point:kv.clone(),uv:ku.getUV(kv,Uv,Vv,Gv,qv,Jv,Kv,new va),face:null,object:this})}}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(gg.prototype),"copy",this).call(this,X),void 0!==X.center&&this.center.copy(X.center),this.material=X.material,this}}]),gg}(ru);function Ju(X,$,ee,ne,ae,de){Dv.subVectors(X,ee).addScalar(.5).multiply(ne),void 0!==ae?(Ov.x=de*Dv.x-ae*Dv.y,Ov.y=ae*Dv.x+de*Dv.y):Ov.copy(Dv),X.copy($),X.x+=Ov.x,X.y+=Ov.y,X.applyMatrix4(Bv)}em.prototype.isSprite=!0;var tm=new wo,lm=new to,pm=new to,vm=new wo,mm=new Ds,gm=function(X){_inherits(wf,X);var $=_createSuper(wf);function wf(X,ee){var ne;return _classCallCheck(this,wf),(ne=$.call(this,X,ee)).type="SkinnedMesh",ne.bindMode="attached",ne.bindMatrix=new Ds,ne.bindMatrixInverse=new Ds,ne}return _createClass(wf,[{key:"copy",value:function copy(X){return _get(_getPrototypeOf(wf.prototype),"copy",this).call(this,X),this.bindMode=X.bindMode,this.bindMatrix.copy(X.bindMatrix),this.bindMatrixInverse.copy(X.bindMatrixInverse),this.skeleton=X.skeleton,this}},{key:"bind",value:function bind(X,$){this.skeleton=X,void 0===$&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),$=this.matrixWorld),this.bindMatrix.copy($),this.bindMatrixInverse.copy($).invert()}},{key:"pose",value:function pose(){this.skeleton.pose()}},{key:"normalizeSkinWeights",value:function normalizeSkinWeights(){for(var X=new to,$=this.geometry.attributes.skinWeight,ee=0,ne=$.count;ee<ne;ee++){X.fromBufferAttribute($,ee);var ae=1/X.manhattanLength();ae!==1/0?X.multiplyScalar(ae):X.set(1,0,0,0),$.setXYZW(ee,X.x,X.y,X.z,X.w)}}},{key:"updateMatrixWorld",value:function updateMatrixWorld(X){_get(_getPrototypeOf(wf.prototype),"updateMatrixWorld",this).call(this,X),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}},{key:"boneTransform",value:function boneTransform(X,$){var ee=this.skeleton,ne=this.geometry;lm.fromBufferAttribute(ne.attributes.skinIndex,X),pm.fromBufferAttribute(ne.attributes.skinWeight,X),tm.copy($).applyMatrix4(this.bindMatrix),$.set(0,0,0);for(var ae=0;ae<4;ae++){var de=pm.getComponent(ae);if(0!==de){var fe=lm.getComponent(ae);mm.multiplyMatrices(ee.bones[fe].matrixWorld,ee.boneInverses[fe]),$.addScaledVector(vm.copy(tm).applyMatrix4(mm),de)}}return $.applyMatrix4(this.bindMatrixInverse)}}]),wf}(Oh);gm.prototype.isSkinnedMesh=!0,function(X){_inherits(yg,X);var $=_createSuper(yg);function yg(){var X;return _classCallCheck(this,yg),(X=$.call(this)).type="Bone",X}return _createClass(yg)}(ru).prototype.isBone=!0;var ym=function(X){_inherits(Sf,X);var $=_createSuper(Sf);function Sf(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,de=arguments.length>3?arguments[3]:void 0,fe=arguments.length>4?arguments[4]:void 0,Ue=arguments.length>5?arguments[5]:void 0,je=arguments.length>6?arguments[6]:void 0,Ke=arguments.length>7?arguments[7]:void 0,et=arguments.length>8&&void 0!==arguments[8]?arguments[8]:gn,tt=arguments.length>9&&void 0!==arguments[9]?arguments[9]:gn,nt=arguments.length>10?arguments[10]:void 0,it=arguments.length>11?arguments[11]:void 0;return _classCallCheck(this,Sf),(X=$.call(this,null,Ue,je,Ke,et,tt,de,fe,nt,it)).image={data:ee,width:ne,height:ae},X.generateMipmaps=!1,X.flipY=!1,X.unpackAlignment=1,X}return _createClass(Sf)}(eo);ym.prototype.isDataTexture=!0;var xm=function(X){_inherits(Oa,X);var $=_createSuper(Oa);function Oa(X,ee,ne){var ae,de=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return _classCallCheck(this,Oa),"number"==typeof ne&&(de=ne,ne=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),(ae=$.call(this,X,ee,ne)).meshPerAttribute=de,ae}return _createClass(Oa,[{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Oa.prototype),"copy",this).call(this,X),this.meshPerAttribute=X.meshPerAttribute,this}},{key:"toJSON",value:function toJSON(){var X=_get(_getPrototypeOf(Oa.prototype),"toJSON",this).call(this);return X.meshPerAttribute=this.meshPerAttribute,X.isInstancedBufferAttribute=!0,X}}]),Oa}(Lu);xm.prototype.isInstancedBufferAttribute=!0;var _m=new Ds,wm=new Ds,Sm=[],km=new Oh,Mm=function(X){_inherits(vg,X);var $=_createSuper(vg);function vg(X,ee,ne){var ae;return _classCallCheck(this,vg),(ae=$.call(this,X,ee)).instanceMatrix=new xm(new Float32Array(16*ne),16),ae.instanceColor=null,ae.count=ne,ae.frustumCulled=!1,ae}return _createClass(vg,[{key:"copy",value:function copy(X){return _get(_getPrototypeOf(vg.prototype),"copy",this).call(this,X),this.instanceMatrix.copy(X.instanceMatrix),null!==X.instanceColor&&(this.instanceColor=X.instanceColor.clone()),this.count=X.count,this}},{key:"getColorAt",value:function getColorAt(X,$){$.fromArray(this.instanceColor.array,3*X)}},{key:"getMatrixAt",value:function getMatrixAt(X,$){$.fromArray(this.instanceMatrix.array,16*X)}},{key:"raycast",value:function raycast(X,$){var ee=this.matrixWorld,ne=this.count;if(km.geometry=this.geometry,km.material=this.material,void 0!==km.material)for(var ae=0;ae<ne;ae++){this.getMatrixAt(ae,_m),wm.multiplyMatrices(ee,_m),km.matrixWorld=wm,km.raycast(X,Sm);for(var de=0,fe=Sm.length;de<fe;de++){var Ue=Sm[de];Ue.instanceId=ae,Ue.object=this,$.push(Ue)}Sm.length=0}}},{key:"setColorAt",value:function setColorAt(X,$){null===this.instanceColor&&(this.instanceColor=new xm(new Float32Array(3*this.instanceMatrix.count),3)),$.toArray(this.instanceColor.array,3*X)}},{key:"setMatrixAt",value:function setMatrixAt(X,$){$.toArray(this.instanceMatrix.array,16*X)}},{key:"updateMorphTargets",value:function updateMorphTargets(){}},{key:"dispose",value:function dispose(){this.dispatchEvent({type:"dispose"})}}]),vg}(Oh);Mm.prototype.isInstancedMesh=!0;var Em=function(X){_inherits(kr,X);var $=_createSuper(kr);function kr(X){var ee;return _classCallCheck(this,kr),(ee=$.call(this)).type="LineBasicMaterial",ee.color=new Ma(16777215),ee.linewidth=1,ee.linecap="round",ee.linejoin="round",ee.fog=!0,ee.setValues(X),ee}return _createClass(kr,[{key:"copy",value:function copy(X){return _get(_getPrototypeOf(kr.prototype),"copy",this).call(this,X),this.color.copy(X.color),this.linewidth=X.linewidth,this.linecap=X.linecap,this.linejoin=X.linejoin,this.fog=X.fog,this}}]),kr}(Au);Em.prototype.isLineBasicMaterial=!0;var Pm=new wo,Dm=new wo,Lm=new Ds,Om=new Ps,Rm=new _s,Bm=function(X){_inherits(os,X);var $=_createSuper(os);function os(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Wu,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Em;return _classCallCheck(this,os),(X=$.call(this)).type="Line",X.geometry=ee,X.material=ne,X.updateMorphTargets(),X}return _createClass(os,[{key:"copy",value:function copy(X){return _get(_getPrototypeOf(os.prototype),"copy",this).call(this,X),this.material=X.material,this.geometry=X.geometry,this}},{key:"computeLineDistances",value:function computeLineDistances(){var X=this.geometry;if(X.isBufferGeometry)if(null===X.index){for(var $=X.attributes.position,ee=[0],ne=1,ae=$.count;ne<ae;ne++)Pm.fromBufferAttribute($,ne-1),Dm.fromBufferAttribute($,ne),ee[ne]=ee[ne-1],ee[ne]+=Pm.distanceTo(Dm);X.setAttribute("lineDistance",new Iu(ee,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else X.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}},{key:"raycast",value:function raycast(X,$){var ee=this.geometry,ne=this.matrixWorld,ae=X.params.Line.threshold,de=ee.drawRange;if(null===ee.boundingSphere&&ee.computeBoundingSphere(),Rm.copy(ee.boundingSphere),Rm.applyMatrix4(ne),Rm.radius+=ae,!1!==X.ray.intersectsSphere(Rm)){Lm.copy(ne).invert(),Om.copy(X.ray).applyMatrix4(Lm);var fe=ae/((this.scale.x+this.scale.y+this.scale.z)/3),Ue=fe*fe,je=new wo,Ke=new wo,et=new wo,tt=new wo,nt=this.isLineSegments?2:1;if(ee.isBufferGeometry){var it=ee.index,ct=ee.attributes.position;if(null!==it)for(var dt=Math.max(0,de.start),vt=Math.min(it.count,de.start+de.count)-1;dt<vt;dt+=nt){var gt=it.getX(dt),yt=it.getX(dt+1);if(je.fromBufferAttribute(ct,gt),Ke.fromBufferAttribute(ct,yt),!(Om.distanceSqToSegment(je,Ke,tt,et)>Ue)){tt.applyMatrix4(this.matrixWorld);var _t=X.ray.origin.distanceTo(tt);_t<X.near||_t>X.far||$.push({distance:_t,point:et.clone().applyMatrix4(this.matrixWorld),index:dt,face:null,faceIndex:null,object:this})}}else for(var wt=Math.max(0,de.start),St=Math.min(ct.count,de.start+de.count)-1;wt<St;wt+=nt)if(je.fromBufferAttribute(ct,wt),Ke.fromBufferAttribute(ct,wt+1),!(Om.distanceSqToSegment(je,Ke,tt,et)>Ue)){tt.applyMatrix4(this.matrixWorld);var Ct=X.ray.origin.distanceTo(tt);Ct<X.near||Ct>X.far||$.push({distance:Ct,point:et.clone().applyMatrix4(this.matrixWorld),index:wt,face:null,faceIndex:null,object:this})}}else ee.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function updateMorphTargets(){var X=this.geometry;if(X.isBufferGeometry){var $=X.morphAttributes,ee=Object.keys($);if(ee.length>0){var ne=$[ee[0]];if(void 0!==ne){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var ae=0,de=ne.length;ae<de;ae++){var fe=ne[ae].name||String(ae);this.morphTargetInfluences.push(0),this.morphTargetDictionary[fe]=ae}}}}else{var Ue=X.morphTargets;void 0!==Ue&&Ue.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),os}(ru);Bm.prototype.isLine=!0;var Im=new wo,zm=new wo,Nm=function(X){_inherits(ai,X);var $=_createSuper(ai);function ai(X,ee){var ne;return _classCallCheck(this,ai),(ne=$.call(this,X,ee)).type="LineSegments",ne}return _createClass(ai,[{key:"computeLineDistances",value:function computeLineDistances(){var X=this.geometry;if(X.isBufferGeometry)if(null===X.index){for(var $=X.attributes.position,ee=[],ne=0,ae=$.count;ne<ae;ne+=2)Im.fromBufferAttribute($,ne),zm.fromBufferAttribute($,ne+1),ee[ne]=0===ne?0:ee[ne-1],ee[ne+1]=ee[ne]+Im.distanceTo(zm);X.setAttribute("lineDistance",new Iu(ee,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else X.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}]),ai}(Bm);Nm.prototype.isLineSegments=!0;var Fm=function(X){_inherits(xg,X);var $=_createSuper(xg);function xg(X,ee){var ne;return _classCallCheck(this,xg),(ne=$.call(this,X,ee)).type="LineLoop",ne}return _createClass(xg)}(Bm);Fm.prototype.isLineLoop=!0;var Um=function(X){_inherits($c,X);var $=_createSuper($c);function $c(X){var ee;return _classCallCheck(this,$c),(ee=$.call(this)).type="PointsMaterial",ee.color=new Ma(16777215),ee.map=null,ee.alphaMap=null,ee.size=1,ee.sizeAttenuation=!0,ee.fog=!0,ee.setValues(X),ee}return _createClass($c,[{key:"copy",value:function copy(X){return _get(_getPrototypeOf($c.prototype),"copy",this).call(this,X),this.color.copy(X.color),this.map=X.map,this.alphaMap=X.alphaMap,this.size=X.size,this.sizeAttenuation=X.sizeAttenuation,this.fog=X.fog,this}}]),$c}(Au);Um.prototype.isPointsMaterial=!0;var Vm=new Ds,Hm=new Ps,jm=new _s,Gm=new wo,Wm=function(X){_inherits(wg,X);var $=_createSuper(wg);function wg(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Wu,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Um;return _classCallCheck(this,wg),(X=$.call(this)).type="Points",X.geometry=ee,X.material=ne,X.updateMorphTargets(),X}return _createClass(wg,[{key:"copy",value:function copy(X){return _get(_getPrototypeOf(wg.prototype),"copy",this).call(this,X),this.material=X.material,this.geometry=X.geometry,this}},{key:"raycast",value:function raycast(X,$){var ee=this.geometry,ne=this.matrixWorld,ae=X.params.Points.threshold,de=ee.drawRange;if(null===ee.boundingSphere&&ee.computeBoundingSphere(),jm.copy(ee.boundingSphere),jm.applyMatrix4(ne),jm.radius+=ae,!1!==X.ray.intersectsSphere(jm)){Vm.copy(ne).invert(),Hm.copy(X.ray).applyMatrix4(Vm);var fe=ae/((this.scale.x+this.scale.y+this.scale.z)/3),Ue=fe*fe;if(ee.isBufferGeometry){var je=ee.index,Ke=ee.attributes.position;if(null!==je)for(var et=Math.max(0,de.start),tt=Math.min(je.count,de.start+de.count);et<tt;et++){var nt=je.getX(et);Gm.fromBufferAttribute(Ke,nt),Q0(Gm,nt,Ue,ne,X,$,this)}else for(var it=Math.max(0,de.start),ct=Math.min(Ke.count,de.start+de.count);it<ct;it++)Gm.fromBufferAttribute(Ke,it),Q0(Gm,it,Ue,ne,X,$,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}}},{key:"updateMorphTargets",value:function updateMorphTargets(){var X=this.geometry;if(X.isBufferGeometry){var $=X.morphAttributes,ee=Object.keys($);if(ee.length>0){var ne=$[ee[0]];if(void 0!==ne){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var ae=0,de=ne.length;ae<de;ae++){var fe=ne[ae].name||String(ae);this.morphTargetInfluences.push(0),this.morphTargetDictionary[fe]=ae}}}}else{var Ue=X.morphTargets;void 0!==Ue&&Ue.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}]),wg}(ru);function Q0(X,$,ee,ne,ae,de,fe){var Ue=Hm.distanceSqToPoint(X);if(Ue<ee){var je=new wo;Hm.closestPointToPoint(X,je),je.applyMatrix4(ne);var Ke=ae.ray.origin.distanceTo(je);if(Ke<ae.near||Ke>ae.far)return;de.push({distance:Ke,distanceToRay:Math.sqrt(Ue),point:je,index:$,face:null,object:fe})}}Wm.prototype.isPoints=!0;var Ym=function(X){_inherits(eh,X);var $=_createSuper(eh);function eh(X,ee,ne,ae,de,fe,Ue,je,Ke){var et;_classCallCheck(this,eh),(et=$.call(this,X,ee,ne,ae,de,fe,Ue,je,Ke)).minFilter=void 0!==fe?fe:_n,et.magFilter=void 0!==de?de:_n,et.generateMipmaps=!1;var tt=_assertThisInitialized(et);return"requestVideoFrameCallback"in X&&X.requestVideoFrameCallback((function u(){tt.needsUpdate=!0,X.requestVideoFrameCallback(u)})),et}return _createClass(eh,[{key:"clone",value:function clone(){return new this.constructor(this.image).copy(this)}},{key:"update",value:function update(){var X=this.image;"requestVideoFrameCallback"in X===!1&&X.readyState>=X.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}]),eh}(eo);Ym.prototype.isVideoTexture=!0;var Jm=function(X){_inherits(Sg,X);var $=_createSuper(Sg);function Sg(X,ee,ne){var ae;return _classCallCheck(this,Sg),(ae=$.call(this,{width:X,height:ee})).format=ne,ae.magFilter=gn,ae.minFilter=gn,ae.generateMipmaps=!1,ae.needsUpdate=!0,ae}return _createClass(Sg)}(eo);Jm.prototype.isFramebufferTexture=!0;var Zm=function(X){_inherits(Mg,X);var $=_createSuper(Mg);function Mg(X,ee,ne,ae,de,fe,Ue,je,Ke,et,tt,nt){var it;return _classCallCheck(this,Mg),(it=$.call(this,null,fe,Ue,je,Ke,et,ae,de,tt,nt)).image={width:ee,height:ne},it.mipmaps=X,it.flipY=!1,it.generateMipmaps=!1,it}return _createClass(Mg)}(eo);Zm.prototype.isCompressedTexture=!0;var Xm=function(X){_inherits(Ag,X);var $=_createSuper(Ag);function Ag(X,ee,ne,ae,de,fe,Ue,je,Ke){var et;return _classCallCheck(this,Ag),(et=$.call(this,X,ee,ne,ae,de,fe,Ue,je,Ke)).needsUpdate=!0,et}return _createClass(Ag)}(eo);Xm.prototype.isCanvasTexture=!0;var Qm=function(){function xn(){_classCallCheck(this,xn),this.type="Curve",this.arcLengthDivisions=200}return _createClass(xn,[{key:"getPoint",value:function getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}},{key:"getPointAt",value:function getPointAt(X,$){var ee=this.getUtoTmapping(X);return this.getPoint(ee,$)}},{key:"getPoints",value:function getPoints(){for(var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,$=[],ee=0;ee<=X;ee++)$.push(this.getPoint(ee/X));return $}},{key:"getSpacedPoints",value:function getSpacedPoints(){for(var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,$=[],ee=0;ee<=X;ee++)$.push(this.getPointAt(ee/X));return $}},{key:"getLength",value:function getLength(){var X=this.getLengths();return X[X.length-1]}},{key:"getLengths",value:function getLengths(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===X+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var $,ee=[],ne=this.getPoint(0),ae=0;ee.push(0);for(var de=1;de<=X;de++)ae+=($=this.getPoint(de/X)).distanceTo(ne),ee.push(ae),ne=$;return this.cacheArcLengths=ee,ee}},{key:"updateArcLengths",value:function updateArcLengths(){this.needsUpdate=!0,this.getLengths()}},{key:"getUtoTmapping",value:function getUtoTmapping(X,$){var ee,ne=this.getLengths(),ae=0,de=ne.length;ee=$||X*ne[de-1];for(var fe,Ue=0,je=de-1;Ue<=je;)if((fe=ne[ae=Math.floor(Ue+(je-Ue)/2)]-ee)<0)Ue=ae+1;else{if(!(fe>0)){je=ae;break}je=ae-1}if(ne[ae=je]===ee)return ae/(de-1);var Ke=ne[ae];return(ae+(ee-Ke)/(ne[ae+1]-Ke))/(de-1)}},{key:"getTangent",value:function getTangent(X,$){var ee=X-1e-4,ne=X+1e-4;ee<0&&(ee=0),ne>1&&(ne=1);var ae=this.getPoint(ee),de=this.getPoint(ne),fe=$||(ae.isVector2?new va:new wo);return fe.copy(de).sub(ae).normalize(),fe}},{key:"getTangentAt",value:function getTangentAt(X,$){var ee=this.getUtoTmapping(X);return this.getTangent(ee,$)}},{key:"computeFrenetFrames",value:function computeFrenetFrames(X,$){for(var ee=new wo,ne=[],ae=[],de=[],fe=new wo,Ue=new Ds,je=0;je<=X;je++){var Ke=je/X;ne[je]=this.getTangentAt(Ke,new wo)}ae[0]=new wo,de[0]=new wo;var et=Number.MAX_VALUE,tt=Math.abs(ne[0].x),nt=Math.abs(ne[0].y),it=Math.abs(ne[0].z);tt<=et&&(et=tt,ee.set(1,0,0)),nt<=et&&(et=nt,ee.set(0,1,0)),it<=et&&ee.set(0,0,1),fe.crossVectors(ne[0],ee).normalize(),ae[0].crossVectors(ne[0],fe),de[0].crossVectors(ne[0],ae[0]);for(var ct=1;ct<=X;ct++){if(ae[ct]=ae[ct-1].clone(),de[ct]=de[ct-1].clone(),fe.crossVectors(ne[ct-1],ne[ct]),fe.length()>Number.EPSILON){fe.normalize();var dt=Math.acos(xr(ne[ct-1].dot(ne[ct]),-1,1));ae[ct].applyMatrix4(Ue.makeRotationAxis(fe,dt))}de[ct].crossVectors(ne[ct],ae[ct])}if(!0===$){var vt=Math.acos(xr(ae[0].dot(ae[X]),-1,1));vt/=X,ne[0].dot(fe.crossVectors(ae[0],ae[X]))>0&&(vt=-vt);for(var gt=1;gt<=X;gt++)ae[gt].applyMatrix4(Ue.makeRotationAxis(ne[gt],vt*gt)),de[gt].crossVectors(ne[gt],ae[gt])}return{tangents:ne,normals:ae,binormals:de}}},{key:"clone",value:function clone(){return(new this.constructor).copy(this)}},{key:"copy",value:function copy(X){return this.arcLengthDivisions=X.arcLengthDivisions,this}},{key:"toJSON",value:function toJSON(){var X={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return X.arcLengthDivisions=this.arcLengthDivisions,X.type=this.type,X}},{key:"fromJSON",value:function fromJSON(X){return this.arcLengthDivisions=X.arcLengthDivisions,this}}]),xn}(),Km=function(X){_inherits(Us,X);var $=_createSuper(Us);function Us(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,de=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,fe=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,Ue=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,je=arguments.length>6&&void 0!==arguments[6]&&arguments[6],Ke=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;return _classCallCheck(this,Us),(X=$.call(this)).type="EllipseCurve",X.aX=ee,X.aY=ne,X.xRadius=ae,X.yRadius=de,X.aStartAngle=fe,X.aEndAngle=Ue,X.aClockwise=je,X.aRotation=Ke,X}return _createClass(Us,[{key:"getPoint",value:function getPoint(X,$){for(var ee=$||new va,ne=2*Math.PI,ae=this.aEndAngle-this.aStartAngle,de=Math.abs(ae)<Number.EPSILON;ae<0;)ae+=ne;for(;ae>ne;)ae-=ne;ae<Number.EPSILON&&(ae=de?0:ne),!0===this.aClockwise&&!de&&(ae===ne?ae=-ne:ae-=ne);var fe=this.aStartAngle+X*ae,Ue=this.aX+this.xRadius*Math.cos(fe),je=this.aY+this.yRadius*Math.sin(fe);if(0!==this.aRotation){var Ke=Math.cos(this.aRotation),et=Math.sin(this.aRotation),tt=Ue-this.aX,nt=je-this.aY;Ue=tt*Ke-nt*et+this.aX,je=tt*et+nt*Ke+this.aY}return ee.set(Ue,je)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Us.prototype),"copy",this).call(this,X),this.aX=X.aX,this.aY=X.aY,this.xRadius=X.xRadius,this.yRadius=X.yRadius,this.aStartAngle=X.aStartAngle,this.aEndAngle=X.aEndAngle,this.aClockwise=X.aClockwise,this.aRotation=X.aRotation,this}},{key:"toJSON",value:function toJSON(){var X=_get(_getPrototypeOf(Us.prototype),"toJSON",this).call(this);return X.aX=this.aX,X.aY=this.aY,X.xRadius=this.xRadius,X.yRadius=this.yRadius,X.aStartAngle=this.aStartAngle,X.aEndAngle=this.aEndAngle,X.aClockwise=this.aClockwise,X.aRotation=this.aRotation,X}},{key:"fromJSON",value:function fromJSON(X){return _get(_getPrototypeOf(Us.prototype),"fromJSON",this).call(this,X),this.aX=X.aX,this.aY=X.aY,this.xRadius=X.xRadius,this.yRadius=X.yRadius,this.aStartAngle=X.aStartAngle,this.aEndAngle=X.aEndAngle,this.aClockwise=X.aClockwise,this.aRotation=X.aRotation,this}}]),Us}(Qm);Km.prototype.isEllipseCurve=!0;var $m=function(X){_inherits(Mf,X);var $=_createSuper(Mf);function Mf(X,ee,ne,ae,de,fe){var Ue;return _classCallCheck(this,Mf),(Ue=$.call(this,X,ee,ne,ne,ae,de,fe)).type="ArcCurve",Ue}return _createClass(Mf)}(Km);function ry(){var X=0,$=0,ee=0,ne=0;function n(ae,de,fe,Ue){X=ae,$=fe,ee=-3*ae+3*de-2*fe-Ue,ne=2*ae-2*de+fe+Ue}return{initCatmullRom:function initCatmullRom(X,$,ee,ne,ae){n($,ee,ae*(ee-X),ae*(ne-$))},initNonuniformCatmullRom:function initNonuniformCatmullRom(X,$,ee,ne,ae,de,fe){var Ue=($-X)/ae-(ee-X)/(ae+de)+(ee-$)/de,je=(ee-$)/de-(ne-$)/(de+fe)+(ne-ee)/fe;n($,ee,Ue*=de,je*=de)},calc:function calc(ae){var de=ae*ae;return X+$*ae+ee*de+ne*(de*ae)}}}$m.prototype.isArcCurve=!0;var eg=new wo,tg=new ry,rg=new ry,ig=new ry,sg=function(X){_inherits(Af,X);var $=_createSuper(Af);function Af(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],ne=arguments.length>1&&void 0!==arguments[1]&&arguments[1],ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",de=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;return _classCallCheck(this,Af),(X=$.call(this)).type="CatmullRomCurve3",X.points=ee,X.closed=ne,X.curveType=ae,X.tension=de,X}return _createClass(Af,[{key:"getPoint",value:function getPoint(X){var $,ee,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new wo,ae=ne,de=this.points,fe=de.length,Ue=(fe-(this.closed?0:1))*X,je=Math.floor(Ue),Ke=Ue-je;this.closed?je+=je>0?0:(Math.floor(Math.abs(je)/fe)+1)*fe:0===Ke&&je===fe-1&&(je=fe-2,Ke=1),this.closed||je>0?$=de[(je-1)%fe]:(eg.subVectors(de[0],de[1]).add(de[0]),$=eg);var et=de[je%fe],tt=de[(je+1)%fe];if(this.closed||je+2<fe?ee=de[(je+2)%fe]:(eg.subVectors(de[fe-1],de[fe-2]).add(de[fe-1]),ee=eg),"centripetal"===this.curveType||"chordal"===this.curveType){var nt="chordal"===this.curveType?.5:.25,it=Math.pow($.distanceToSquared(et),nt),ct=Math.pow(et.distanceToSquared(tt),nt),dt=Math.pow(tt.distanceToSquared(ee),nt);ct<1e-4&&(ct=1),it<1e-4&&(it=ct),dt<1e-4&&(dt=ct),tg.initNonuniformCatmullRom($.x,et.x,tt.x,ee.x,it,ct,dt),rg.initNonuniformCatmullRom($.y,et.y,tt.y,ee.y,it,ct,dt),ig.initNonuniformCatmullRom($.z,et.z,tt.z,ee.z,it,ct,dt)}else"catmullrom"===this.curveType&&(tg.initCatmullRom($.x,et.x,tt.x,ee.x,this.tension),rg.initCatmullRom($.y,et.y,tt.y,ee.y,this.tension),ig.initCatmullRom($.z,et.z,tt.z,ee.z,this.tension));return ae.set(tg.calc(Ke),rg.calc(Ke),ig.calc(Ke)),ae}},{key:"copy",value:function copy(X){_get(_getPrototypeOf(Af.prototype),"copy",this).call(this,X),this.points=[];for(var $=0,ee=X.points.length;$<ee;$++){var ne=X.points[$];this.points.push(ne.clone())}return this.closed=X.closed,this.curveType=X.curveType,this.tension=X.tension,this}},{key:"toJSON",value:function toJSON(){var X=_get(_getPrototypeOf(Af.prototype),"toJSON",this).call(this);X.points=[];for(var $=0,ee=this.points.length;$<ee;$++){var ne=this.points[$];X.points.push(ne.toArray())}return X.closed=this.closed,X.curveType=this.curveType,X.tension=this.tension,X}},{key:"fromJSON",value:function fromJSON(X){_get(_getPrototypeOf(Af.prototype),"fromJSON",this).call(this,X),this.points=[];for(var $=0,ee=X.points.length;$<ee;$++){var ne=X.points[$];this.points.push((new wo).fromArray(ne))}return this.closed=X.closed,this.curveType=X.curveType,this.tension=X.tension,this}}]),Af}(Qm);function J0(X,$,ee,ne,ae){var de=.5*(ne-$),fe=.5*(ae-ee),Ue=X*X;return(2*ee-2*ne+de+fe)*(X*Ue)+(-3*ee+3*ne-2*de-fe)*Ue+de*X+ee}function zc(X,$,ee,ne){return function LL(X,$){var ee=1-X;return ee*ee*$}(X,$)+function IL(X,$){return 2*(1-X)*X*$}(X,ee)+function RL(X,$){return X*X*$}(X,ne)}function Gc(X,$,ee,ne,ae){return function BL(X,$){var ee=1-X;return ee*ee*ee*$}(X,$)+function NL(X,$){var ee=1-X;return 3*ee*ee*X*$}(X,ee)+function OL(X,$){return 3*(1-X)*X*X*$}(X,ne)+function FL(X,$){return X*X*X*$}(X,ae)}sg.prototype.isCatmullRomCurve3=!0;var bg=function(X){_inherits(an,X);var $=_createSuper(an);function an(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new va,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new va,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new va,de=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new va;return _classCallCheck(this,an),(X=$.call(this)).type="CubicBezierCurve",X.v0=ee,X.v1=ne,X.v2=ae,X.v3=de,X}return _createClass(an,[{key:"getPoint",value:function getPoint(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new va,ee=$,ne=this.v0,ae=this.v1,de=this.v2,fe=this.v3;return ee.set(Gc(X,ne.x,ae.x,de.x,fe.x),Gc(X,ne.y,ae.y,de.y,fe.y)),ee}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(an.prototype),"copy",this).call(this,X),this.v0.copy(X.v0),this.v1.copy(X.v1),this.v2.copy(X.v2),this.v3.copy(X.v3),this}},{key:"toJSON",value:function toJSON(){var X=_get(_getPrototypeOf(an.prototype),"toJSON",this).call(this);return X.v0=this.v0.toArray(),X.v1=this.v1.toArray(),X.v2=this.v2.toArray(),X.v3=this.v3.toArray(),X}},{key:"fromJSON",value:function fromJSON(X){return _get(_getPrototypeOf(an.prototype),"fromJSON",this).call(this,X),this.v0.fromArray(X.v0),this.v1.fromArray(X.v1),this.v2.fromArray(X.v2),this.v3.fromArray(X.v3),this}}]),an}(Qm);bg.prototype.isCubicBezierCurve=!0;var $g=function(X){_inherits(Tf,X);var $=_createSuper(Tf);function Tf(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new wo,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new wo,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new wo,de=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new wo;return _classCallCheck(this,Tf),(X=$.call(this)).type="CubicBezierCurve3",X.v0=ee,X.v1=ne,X.v2=ae,X.v3=de,X}return _createClass(Tf,[{key:"getPoint",value:function getPoint(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new wo,ee=$,ne=this.v0,ae=this.v1,de=this.v2,fe=this.v3;return ee.set(Gc(X,ne.x,ae.x,de.x,fe.x),Gc(X,ne.y,ae.y,de.y,fe.y),Gc(X,ne.z,ae.z,de.z,fe.z)),ee}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Tf.prototype),"copy",this).call(this,X),this.v0.copy(X.v0),this.v1.copy(X.v1),this.v2.copy(X.v2),this.v3.copy(X.v3),this}},{key:"toJSON",value:function toJSON(){var X=_get(_getPrototypeOf(Tf.prototype),"toJSON",this).call(this);return X.v0=this.v0.toArray(),X.v1=this.v1.toArray(),X.v2=this.v2.toArray(),X.v3=this.v3.toArray(),X}},{key:"fromJSON",value:function fromJSON(X){return _get(_getPrototypeOf(Tf.prototype),"fromJSON",this).call(this,X),this.v0.fromArray(X.v0),this.v1.fromArray(X.v1),this.v2.fromArray(X.v2),this.v3.fromArray(X.v3),this}}]),Tf}(Qm);$g.prototype.isCubicBezierCurve3=!0;var ty=function(X){_inherits(ln,X);var $=_createSuper(ln);function ln(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new va,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new va;return _classCallCheck(this,ln),(X=$.call(this)).type="LineCurve",X.v1=ee,X.v2=ne,X}return _createClass(ln,[{key:"getPoint",value:function getPoint(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new va,ee=$;return 1===X?ee.copy(this.v2):(ee.copy(this.v2).sub(this.v1),ee.multiplyScalar(X).add(this.v1)),ee}},{key:"getPointAt",value:function getPointAt(X,$){return this.getPoint(X,$)}},{key:"getTangent",value:function getTangent(X,$){var ee=$||new va;return ee.copy(this.v2).sub(this.v1).normalize(),ee}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(ln.prototype),"copy",this).call(this,X),this.v1.copy(X.v1),this.v2.copy(X.v2),this}},{key:"toJSON",value:function toJSON(){var X=_get(_getPrototypeOf(ln.prototype),"toJSON",this).call(this);return X.v1=this.v1.toArray(),X.v2=this.v2.toArray(),X}},{key:"fromJSON",value:function fromJSON(X){return _get(_getPrototypeOf(ln.prototype),"fromJSON",this).call(this,X),this.v1.fromArray(X.v1),this.v2.fromArray(X.v2),this}}]),ln}(Qm);ty.prototype.isLineCurve=!0;var ny=function(X){_inherits(th,X);var $=_createSuper(th);function th(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new wo,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new wo;return _classCallCheck(this,th),(X=$.call(this)).type="LineCurve3",X.isLineCurve3=!0,X.v1=ee,X.v2=ne,X}return _createClass(th,[{key:"getPoint",value:function getPoint(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new wo,ee=$;return 1===X?ee.copy(this.v2):(ee.copy(this.v2).sub(this.v1),ee.multiplyScalar(X).add(this.v1)),ee}},{key:"getPointAt",value:function getPointAt(X,$){return this.getPoint(X,$)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(th.prototype),"copy",this).call(this,X),this.v1.copy(X.v1),this.v2.copy(X.v2),this}},{key:"toJSON",value:function toJSON(){var X=_get(_getPrototypeOf(th.prototype),"toJSON",this).call(this);return X.v1=this.v1.toArray(),X.v2=this.v2.toArray(),X}},{key:"fromJSON",value:function fromJSON(X){return _get(_getPrototypeOf(th.prototype),"fromJSON",this).call(this,X),this.v1.fromArray(X.v1),this.v2.fromArray(X.v2),this}}]),th}(Qm),iy=function(X){_inherits(kn,X);var $=_createSuper(kn);function kn(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new va,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new va,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new va;return _classCallCheck(this,kn),(X=$.call(this)).type="QuadraticBezierCurve",X.v0=ee,X.v1=ne,X.v2=ae,X}return _createClass(kn,[{key:"getPoint",value:function getPoint(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new va,ee=$,ne=this.v0,ae=this.v1,de=this.v2;return ee.set(zc(X,ne.x,ae.x,de.x),zc(X,ne.y,ae.y,de.y)),ee}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(kn.prototype),"copy",this).call(this,X),this.v0.copy(X.v0),this.v1.copy(X.v1),this.v2.copy(X.v2),this}},{key:"toJSON",value:function toJSON(){var X=_get(_getPrototypeOf(kn.prototype),"toJSON",this).call(this);return X.v0=this.v0.toArray(),X.v1=this.v1.toArray(),X.v2=this.v2.toArray(),X}},{key:"fromJSON",value:function fromJSON(X){return _get(_getPrototypeOf(kn.prototype),"fromJSON",this).call(this,X),this.v0.fromArray(X.v0),this.v1.fromArray(X.v1),this.v2.fromArray(X.v2),this}}]),kn}(Qm);iy.prototype.isQuadraticBezierCurve=!0;var sy=function(X){_inherits(Ef,X);var $=_createSuper(Ef);function Ef(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new wo,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new wo,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new wo;return _classCallCheck(this,Ef),(X=$.call(this)).type="QuadraticBezierCurve3",X.v0=ee,X.v1=ne,X.v2=ae,X}return _createClass(Ef,[{key:"getPoint",value:function getPoint(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new wo,ee=$,ne=this.v0,ae=this.v1,de=this.v2;return ee.set(zc(X,ne.x,ae.x,de.x),zc(X,ne.y,ae.y,de.y),zc(X,ne.z,ae.z,de.z)),ee}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Ef.prototype),"copy",this).call(this,X),this.v0.copy(X.v0),this.v1.copy(X.v1),this.v2.copy(X.v2),this}},{key:"toJSON",value:function toJSON(){var X=_get(_getPrototypeOf(Ef.prototype),"toJSON",this).call(this);return X.v0=this.v0.toArray(),X.v1=this.v1.toArray(),X.v2=this.v2.toArray(),X}},{key:"fromJSON",value:function fromJSON(X){return _get(_getPrototypeOf(Ef.prototype),"fromJSON",this).call(this,X),this.v0.fromArray(X.v0),this.v1.fromArray(X.v1),this.v2.fromArray(X.v2),this}}]),Ef}(Qm);sy.prototype.isQuadraticBezierCurve3=!0;var ly=function(X){_inherits(Po,X);var $=_createSuper(Po);function Po(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return _classCallCheck(this,Po),(X=$.call(this)).type="SplineCurve",X.points=ee,X}return _createClass(Po,[{key:"getPoint",value:function getPoint(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new va,ee=$,ne=this.points,ae=(ne.length-1)*X,de=Math.floor(ae),fe=ae-de,Ue=ne[0===de?de:de-1],je=ne[de],Ke=ne[de>ne.length-2?ne.length-1:de+1],et=ne[de>ne.length-3?ne.length-1:de+2];return ee.set(J0(fe,Ue.x,je.x,Ke.x,et.x),J0(fe,Ue.y,je.y,Ke.y,et.y)),ee}},{key:"copy",value:function copy(X){_get(_getPrototypeOf(Po.prototype),"copy",this).call(this,X),this.points=[];for(var $=0,ee=X.points.length;$<ee;$++){var ne=X.points[$];this.points.push(ne.clone())}return this}},{key:"toJSON",value:function toJSON(){var X=_get(_getPrototypeOf(Po.prototype),"toJSON",this).call(this);X.points=[];for(var $=0,ee=this.points.length;$<ee;$++){var ne=this.points[$];X.points.push(ne.toArray())}return X}},{key:"fromJSON",value:function fromJSON(X){_get(_getPrototypeOf(Po.prototype),"fromJSON",this).call(this,X),this.points=[];for(var $=0,ee=X.points.length;$<ee;$++){var ne=X.points[$];this.points.push((new va).fromArray(ne))}return this}}]),Po}(Qm);ly.prototype.isSplineCurve=!0;var uy=Object.freeze({__proto__:null,ArcCurve:$m,CatmullRomCurve3:sg,CubicBezierCurve:bg,CubicBezierCurve3:$g,EllipseCurve:Km,LineCurve:ty,LineCurve3:ny,QuadraticBezierCurve:iy,QuadraticBezierCurve3:sy,SplineCurve:ly}),cy=function(X){_inherits(Tg,X);var $=_createSuper(Tg);function Tg(){var X;return _classCallCheck(this,Tg),(X=$.call(this)).type="CurvePath",X.curves=[],X.autoClose=!1,X}return _createClass(Tg,[{key:"add",value:function add(X){this.curves.push(X)}},{key:"closePath",value:function closePath(){var X=this.curves[0].getPoint(0),$=this.curves[this.curves.length-1].getPoint(1);X.equals($)||this.curves.push(new ty($,X))}},{key:"getPoint",value:function getPoint(X,$){for(var ee=X*this.getLength(),ne=this.getCurveLengths(),ae=0;ae<ne.length;){if(ne[ae]>=ee){var de=ne[ae]-ee,fe=this.curves[ae],Ue=fe.getLength(),je=0===Ue?0:1-de/Ue;return fe.getPointAt(je,$)}ae++}return null}},{key:"getLength",value:function getLength(){var X=this.getCurveLengths();return X[X.length-1]}},{key:"updateArcLengths",value:function updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}},{key:"getCurveLengths",value:function getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var X=[],$=0,ee=0,ne=this.curves.length;ee<ne;ee++)$+=this.curves[ee].getLength(),X.push($);return this.cacheLengths=X,X}},{key:"getSpacedPoints",value:function getSpacedPoints(){for(var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40,$=[],ee=0;ee<=X;ee++)$.push(this.getPoint(ee/X));return this.autoClose&&$.push($[0]),$}},{key:"getPoints",value:function getPoints(){for(var X,$=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12,ee=[],ne=0,ae=this.curves;ne<ae.length;ne++)for(var de=ae[ne],fe=de.isEllipseCurve?2*$:de.isLineCurve||de.isLineCurve3?1:de.isSplineCurve?$*de.points.length:$,Ue=de.getPoints(fe),je=0;je<Ue.length;je++){var Ke=Ue[je];X&&X.equals(Ke)||(ee.push(Ke),X=Ke)}return this.autoClose&&ee.length>1&&!ee[ee.length-1].equals(ee[0])&&ee.push(ee[0]),ee}},{key:"copy",value:function copy(X){_get(_getPrototypeOf(Tg.prototype),"copy",this).call(this,X),this.curves=[];for(var $=0,ee=X.curves.length;$<ee;$++){var ne=X.curves[$];this.curves.push(ne.clone())}return this.autoClose=X.autoClose,this}},{key:"toJSON",value:function toJSON(){var X=_get(_getPrototypeOf(Tg.prototype),"toJSON",this).call(this);X.autoClose=this.autoClose,X.curves=[];for(var $=0,ee=this.curves.length;$<ee;$++){var ne=this.curves[$];X.curves.push(ne.toJSON())}return X}},{key:"fromJSON",value:function fromJSON(X){_get(_getPrototypeOf(Tg.prototype),"fromJSON",this).call(this,X),this.autoClose=X.autoClose,this.curves=[];for(var $=0,ee=X.curves.length;$<ee;$++){var ne=X.curves[$];this.curves.push((new uy[ne.type]).fromJSON(ne))}return this}}]),Tg}(Qm),hy=function(X){_inherits(Fa,X);var $=_createSuper(Fa);function Fa(X){var ee;return _classCallCheck(this,Fa),(ee=$.call(this)).type="Path",ee.currentPoint=new va,X&&ee.setFromPoints(X),ee}return _createClass(Fa,[{key:"setFromPoints",value:function setFromPoints(X){this.moveTo(X[0].x,X[0].y);for(var $=1,ee=X.length;$<ee;$++)this.lineTo(X[$].x,X[$].y);return this}},{key:"moveTo",value:function moveTo(X,$){return this.currentPoint.set(X,$),this}},{key:"lineTo",value:function lineTo(X,$){var ee=new ty(this.currentPoint.clone(),new va(X,$));return this.curves.push(ee),this.currentPoint.set(X,$),this}},{key:"quadraticCurveTo",value:function quadraticCurveTo(X,$,ee,ne){var ae=new iy(this.currentPoint.clone(),new va(X,$),new va(ee,ne));return this.curves.push(ae),this.currentPoint.set(ee,ne),this}},{key:"bezierCurveTo",value:function bezierCurveTo(X,$,ee,ne,ae,de){var fe=new bg(this.currentPoint.clone(),new va(X,$),new va(ee,ne),new va(ae,de));return this.curves.push(fe),this.currentPoint.set(ae,de),this}},{key:"splineThru",value:function splineThru(X){var $=[this.currentPoint.clone()].concat(X),ee=new ly($);return this.curves.push(ee),this.currentPoint.copy(X[X.length-1]),this}},{key:"arc",value:function arc(X,$,ee,ne,ae,de){var fe=this.currentPoint.x,Ue=this.currentPoint.y;return this.absarc(X+fe,$+Ue,ee,ne,ae,de),this}},{key:"absarc",value:function absarc(X,$,ee,ne,ae,de){return this.absellipse(X,$,ee,ee,ne,ae,de),this}},{key:"ellipse",value:function ellipse(X,$,ee,ne,ae,de,fe,Ue){var je=this.currentPoint.x,Ke=this.currentPoint.y;return this.absellipse(X+je,$+Ke,ee,ne,ae,de,fe,Ue),this}},{key:"absellipse",value:function absellipse(X,$,ee,ne,ae,de,fe,Ue){var je=new Km(X,$,ee,ne,ae,de,fe,Ue);if(this.curves.length>0){var Ke=je.getPoint(0);Ke.equals(this.currentPoint)||this.lineTo(Ke.x,Ke.y)}this.curves.push(je);var et=je.getPoint(1);return this.currentPoint.copy(et),this}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Fa.prototype),"copy",this).call(this,X),this.currentPoint.copy(X.currentPoint),this}},{key:"toJSON",value:function toJSON(){var X=_get(_getPrototypeOf(Fa.prototype),"toJSON",this).call(this);return X.currentPoint=this.currentPoint.toArray(),X}},{key:"fromJSON",value:function fromJSON(X){return _get(_getPrototypeOf(Fa.prototype),"fromJSON",this).call(this,X),this.currentPoint.fromArray(X.currentPoint),this}}]),Fa}(cy),fy=function(X){_inherits(Ua,X);var $=_createSuper(Ua);function Ua(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new va(0,.5),new va(.5,0),new va(0,-.5)],ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,de=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;_classCallCheck(this,Ua),(X=$.call(this)).type="LatheGeometry",X.parameters={points:ee,segments:ne,phiStart:ae,phiLength:de},ne=Math.floor(ne),de=xr(de,0,2*Math.PI);for(var fe=[],Ue=[],je=[],Ke=[],et=[],tt=1/ne,nt=new wo,it=new va,ct=new wo,dt=new wo,vt=new wo,gt=0,yt=0,_t=0;_t<=ee.length-1;_t++)switch(_t){case 0:gt=ee[_t+1].x-ee[_t].x,yt=ee[_t+1].y-ee[_t].y,ct.x=1*yt,ct.y=-gt,ct.z=0*yt,vt.copy(ct),ct.normalize(),Ke.push(ct.x,ct.y,ct.z);break;case ee.length-1:Ke.push(vt.x,vt.y,vt.z);break;default:gt=ee[_t+1].x-ee[_t].x,yt=ee[_t+1].y-ee[_t].y,ct.x=1*yt,ct.y=-gt,ct.z=0*yt,dt.copy(ct),ct.x+=vt.x,ct.y+=vt.y,ct.z+=vt.z,ct.normalize(),Ke.push(ct.x,ct.y,ct.z),vt.copy(dt)}for(var wt=0;wt<=ne;wt++)for(var St=ae+wt*tt*de,Ct=Math.sin(St),At=Math.cos(St),Et=0;Et<=ee.length-1;Et++){nt.x=ee[Et].x*Ct,nt.y=ee[Et].y,nt.z=ee[Et].x*At,Ue.push(nt.x,nt.y,nt.z),it.x=wt/ne,it.y=Et/(ee.length-1),je.push(it.x,it.y);var Rt=Ke[3*Et+0]*Ct,Bt=Ke[3*Et+1],Ht=Ke[3*Et+0]*At;et.push(Rt,Bt,Ht)}for(var Wt=0;Wt<ne;Wt++)for(var qt=0;qt<ee.length-1;qt++){var Zt=qt+Wt*ee.length,Xt=Zt,Qt=Zt+ee.length,en=Zt+ee.length+1,tn=Zt+1;fe.push(Xt,Qt,tn),fe.push(en,tn,Qt)}return X.setIndex(fe),X.setAttribute("position",new Iu(Ue,3)),X.setAttribute("uv",new Iu(je,2)),X.setAttribute("normal",new Iu(et,3)),X}return _createClass(Ua,null,[{key:"fromJSON",value:function fromJSON(X){return new Ua(X.points,X.segments,X.phiStart,X.phiLength)}}]),Ua}(Wu),py=function(X){_inherits(Lo,X);var $=_createSuper(Lo);function Lo(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,de=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,fe=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,Ue=arguments.length>5&&void 0!==arguments[5]&&arguments[5],je=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,Ke=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;_classCallCheck(this,Lo),(X=$.call(this)).type="CylinderGeometry",X.parameters={radiusTop:ee,radiusBottom:ne,height:ae,radialSegments:de,heightSegments:fe,openEnded:Ue,thetaStart:je,thetaLength:Ke};var et=_assertThisInitialized(X);de=Math.floor(de),fe=Math.floor(fe);var tt=[],nt=[],it=[],ct=[],dt=0,vt=[],gt=ae/2,yt=0;function y(){for(var X=new wo,$=new wo,Ue=0,_t=(ne-ee)/ae,wt=0;wt<=fe;wt++){for(var St=[],Ct=wt/fe,At=Ct*(ne-ee)+ee,Et=0;Et<=de;Et++){var Rt=Et/de,Bt=Rt*Ke+je,Ht=Math.sin(Bt),Wt=Math.cos(Bt);$.x=At*Ht,$.y=-Ct*ae+gt,$.z=At*Wt,nt.push($.x,$.y,$.z),X.set(Ht,_t,Wt).normalize(),it.push(X.x,X.y,X.z),ct.push(Rt,1-Ct),St.push(dt++)}vt.push(St)}for(var qt=0;qt<de;qt++)for(var Zt=0;Zt<fe;Zt++){var Xt=vt[Zt][qt],Qt=vt[Zt+1][qt],en=vt[Zt+1][qt+1],tn=vt[Zt][qt+1];tt.push(Xt,Qt,tn),tt.push(Qt,en,tn),Ue+=6}et.addGroup(yt,Ue,0),yt+=Ue}function w(X){for(var $=dt,ae=new va,fe=new wo,Ue=0,vt=!0===X?ee:ne,_t=!0===X?1:-1,wt=1;wt<=de;wt++)nt.push(0,gt*_t,0),it.push(0,_t,0),ct.push(.5,.5),dt++;for(var St=dt,Ct=0;Ct<=de;Ct++){var At=Ct/de*Ke+je,Et=Math.cos(At),Rt=Math.sin(At);fe.x=vt*Rt,fe.y=gt*_t,fe.z=vt*Et,nt.push(fe.x,fe.y,fe.z),it.push(0,_t,0),ae.x=.5*Et+.5,ae.y=.5*Rt*_t+.5,ct.push(ae.x,ae.y),dt++}for(var Bt=0;Bt<de;Bt++){var Ht=$+Bt,Wt=St+Bt;!0===X?tt.push(Wt,Wt+1,Ht):tt.push(Wt+1,Wt,Ht),Ue+=3}et.addGroup(yt,Ue,!0===X?1:2),yt+=Ue}return y(),!1===Ue&&(ee>0&&w(!0),ne>0&&w(!1)),X.setIndex(tt),X.setAttribute("position",new Iu(nt,3)),X.setAttribute("normal",new Iu(it,3)),X.setAttribute("uv",new Iu(ct,2)),X}return _createClass(Lo,null,[{key:"fromJSON",value:function fromJSON(X){return new Lo(X.radiusTop,X.radiusBottom,X.height,X.radialSegments,X.heightSegments,X.openEnded,X.thetaStart,X.thetaLength)}}]),Lo}(Wu),vy=function(X){_inherits(za,X);var $=_createSuper(za);function za(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,de=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,fe=arguments.length>4&&void 0!==arguments[4]&&arguments[4],Ue=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,je=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;return _classCallCheck(this,za),(X=$.call(this,0,ee,ne,ae,de,fe,Ue,je)).type="ConeGeometry",X.parameters={radius:ee,height:ne,radialSegments:ae,heightSegments:de,openEnded:fe,thetaStart:Ue,thetaLength:je},X}return _createClass(za,null,[{key:"fromJSON",value:function fromJSON(X){return new za(X.radius,X.height,X.radialSegments,X.heightSegments,X.openEnded,X.thetaStart,X.thetaLength)}}]),za}(py),my=function(X){_inherits(Ga,X);var $=_createSuper(Ga);function Ga(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,de=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;_classCallCheck(this,Ga),(X=$.call(this)).type="PolyhedronGeometry",X.parameters={vertices:ee,indices:ne,radius:ae,detail:de};var fe=[],Ue=[];function a(X){for(var $=new wo,ee=new wo,ae=new wo,de=0;de<ne.length;de+=3)d(ne[de+0],$),d(ne[de+1],ee),d(ne[de+2],ae),l($,ee,ae,X)}function l(X,$,ee,ne){for(var ae=ne+1,de=[],fe=0;fe<=ae;fe++){de[fe]=[];for(var Ue=X.clone().lerp(ee,fe/ae),je=$.clone().lerp(ee,fe/ae),Ke=ae-fe,et=0;et<=Ke;et++)de[fe][et]=0===et&&fe===ae?Ue:Ue.clone().lerp(je,et/Ke)}for(var tt=0;tt<ae;tt++)for(var nt=0;nt<2*(ae-tt)-1;nt++){var it=Math.floor(nt/2);nt%2===0?(f(de[tt][it+1]),f(de[tt+1][it]),f(de[tt][it])):(f(de[tt][it+1]),f(de[tt+1][it+1]),f(de[tt+1][it]))}}function c(X){for(var $=new wo,ee=0;ee<fe.length;ee+=3)$.x=fe[ee+0],$.y=fe[ee+1],$.z=fe[ee+2],$.normalize().multiplyScalar(X),fe[ee+0]=$.x,fe[ee+1]=$.y,fe[ee+2]=$.z}function h(){for(var X=new wo,$=0;$<fe.length;$+=3){X.x=fe[$+0],X.y=fe[$+1],X.z=fe[$+2];var ee=g(X)/2/Math.PI+.5,ne=v(X)/Math.PI+.5;Ue.push(ee,1-ne)}p(),u()}function u(){for(var X=0;X<Ue.length;X+=6){var $=Ue[X+0],ee=Ue[X+2],ne=Ue[X+4],ae=Math.max($,ee,ne),de=Math.min($,ee,ne);ae>.9&&de<.1&&($<.2&&(Ue[X+0]+=1),ee<.2&&(Ue[X+2]+=1),ne<.2&&(Ue[X+4]+=1))}}function f(X){fe.push(X.x,X.y,X.z)}function d(X,$){var ne=3*X;$.x=ee[ne+0],$.y=ee[ne+1],$.z=ee[ne+2]}function p(){for(var X=new wo,$=new wo,ee=new wo,ne=new wo,ae=new va,de=new va,je=new va,Ke=0,et=0;Ke<fe.length;Ke+=9,et+=6){X.set(fe[Ke+0],fe[Ke+1],fe[Ke+2]),$.set(fe[Ke+3],fe[Ke+4],fe[Ke+5]),ee.set(fe[Ke+6],fe[Ke+7],fe[Ke+8]),ae.set(Ue[et+0],Ue[et+1]),de.set(Ue[et+2],Ue[et+3]),je.set(Ue[et+4],Ue[et+5]),ne.copy(X).add($).add(ee).divideScalar(3);var tt=g(ne);m(ae,et+0,X,tt),m(de,et+2,$,tt),m(je,et+4,ee,tt)}}function m(X,$,ee,ne){ne<0&&1===X.x&&(Ue[$]=X.x-1),0===ee.x&&0===ee.z&&(Ue[$]=ne/2/Math.PI+.5)}function g(X){return Math.atan2(X.z,-X.x)}function v(X){return Math.atan2(-X.y,Math.sqrt(X.x*X.x+X.z*X.z))}return a(de),c(ae),h(),X.setAttribute("position",new Iu(fe,3)),X.setAttribute("normal",new Iu(fe.slice(),3)),X.setAttribute("uv",new Iu(Ue,2)),0===de?X.computeVertexNormals():X.normalizeNormals(),X}return _createClass(Ga,null,[{key:"fromJSON",value:function fromJSON(X){return new Ga(X.vertices,X.indices,X.radius,X.details)}}]),Ga}(Wu),gy=function(X){_inherits(ka,X);var $=_createSuper(ka);function ka(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,ka);var ae=(1+Math.sqrt(5))/2,de=1/ae,fe=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-de,-ae,0,-de,ae,0,de,-ae,0,de,ae,-de,-ae,0,-de,ae,0,de,-ae,0,de,ae,0,-ae,0,-de,ae,0,-de,-ae,0,de,ae,0,de],Ue=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];return(X=$.call(this,fe,Ue,ee,ne)).type="DodecahedronGeometry",X.parameters={radius:ee,detail:ne},X}return _createClass(ka,null,[{key:"fromJSON",value:function fromJSON(X){return new ka(X.radius,X.detail)}}]),ka}(my),yy=(new wo,new wo,new wo,new ku,function(X){_inherits(rn,X);var $=_createSuper(rn);function rn(X){var ee;return _classCallCheck(this,rn),(ee=$.call(this,X)).uuid=Un(),ee.type="Shape",ee.holes=[],ee}return _createClass(rn,[{key:"getPointsHoles",value:function getPointsHoles(X){for(var $=[],ee=0,ne=this.holes.length;ee<ne;ee++)$[ee]=this.holes[ee].getPoints(X);return $}},{key:"extractPoints",value:function extractPoints(X){return{shape:this.getPoints(X),holes:this.getPointsHoles(X)}}},{key:"copy",value:function copy(X){_get(_getPrototypeOf(rn.prototype),"copy",this).call(this,X),this.holes=[];for(var $=0,ee=X.holes.length;$<ee;$++){var ne=X.holes[$];this.holes.push(ne.clone())}return this}},{key:"toJSON",value:function toJSON(){var X=_get(_getPrototypeOf(rn.prototype),"toJSON",this).call(this);X.uuid=this.uuid,X.holes=[];for(var $=0,ee=this.holes.length;$<ee;$++){var ne=this.holes[$];X.holes.push(ne.toJSON())}return X}},{key:"fromJSON",value:function fromJSON(X){_get(_getPrototypeOf(rn.prototype),"fromJSON",this).call(this,X),this.uuid=X.uuid,this.holes=[];for(var $=0,ee=X.holes.length;$<ee;$++){var ne=X.holes[$];this.holes.push((new hy).fromJSON(ne))}return this}}]),rn}(hy)),by=function triangulate(X,$){var ee,ne,ae,de,fe,Ue,je,Ke=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,et=$&&$.length,tt=et?$[0]*Ke:X.length,nt=Pb(X,0,tt,Ke,!0),it=[];if(!nt||nt.next===nt.prev)return it;if(et&&(nt=HL(X,$,nt,Ke)),X.length>80*Ke){ee=ae=X[0],ne=de=X[1];for(var ct=Ke;ct<tt;ct+=Ke)(fe=X[ct])<ee&&(ee=fe),(Ue=X[ct+1])<ne&&(ne=Ue),fe>ae&&(ae=fe),Ue>de&&(de=Ue);je=0!==(je=Math.max(ae-ee,de-ne))?1/je:0}return rh(nt,it,Ke,ee,ne,je),it};function Pb(X,$,ee,ne,ae){var de,fe;if(ae===function e2(X,$,ee,ne){for(var ae=0,de=$,fe=ee-ne;de<ee;de+=ne)ae+=(X[fe]-X[de])*(X[de+1]+X[fe+1]),fe=de;return ae}(X,$,ee,ne)>0)for(de=$;de<ee;de+=ne)fe=K0(de,X[de],X[de+1],fe);else for(de=ee-ne;de>=$;de-=ne)fe=K0(de,X[de],X[de+1],fe);return fe&&td(fe,fe.next)&&(ih(fe),fe=fe.next),fe}function zs(X,$){if(!X)return X;$||($=X);var ee,ne=X;do{if(ee=!1,ne.steiner||!td(ne,ne.next)&&0!==tr(ne.prev,ne,ne.next))ne=ne.next;else{if(ih(ne),(ne=$=ne.prev)===ne.next)break;ee=!0}}while(ee||ne!==$);return $}function rh(X,$,ee,ne,ae,de,fe){if(X){!fe&&de&&function XL(X,$,ee,ne){var ae=X;do{null===ae.z&&(ae.z=Eg(ae.x,ae.y,$,ee,ne)),ae.prevZ=ae.prev,ae.nextZ=ae.next,ae=ae.next}while(ae!==X);ae.prevZ.nextZ=null,ae.prevZ=null,function QL(X){var $,ee,ne,ae,de,fe,Ue,je,Ke=1;do{for(ee=X,X=null,de=null,fe=0;ee;){for(fe++,ne=ee,Ue=0,$=0;$<Ke&&(Ue++,ne=ne.nextZ);$++);for(je=Ke;Ue>0||je>0&&ne;)0!==Ue&&(0===je||!ne||ee.z<=ne.z)?(ae=ee,ee=ee.nextZ,Ue--):(ae=ne,ne=ne.nextZ,je--),de?de.nextZ=ae:X=ae,ae.prevZ=de,de=ae;ee=ne}de.nextZ=null,Ke*=2}while(fe>1);return X}(ae)}(X,ne,ae,de);for(var Ue,je,Ke=X;X.prev!==X.next;)if(Ue=X.prev,je=X.next,de?GL(X,ne,ae,de):zL(X))$.push(Ue.i/ee),$.push(X.i/ee),$.push(je.i/ee),ih(X),X=je.next,Ke=je.next;else if((X=je)===Ke){fe?1===fe?rh(X=kL(zs(X),$,ee),$,ee,ne,ae,de,2):2===fe&&VL(X,$,ee,ne,ae,de):rh(zs(X),$,ee,ne,ae,de,1);break}}}function zL(X){var $=X.prev,ee=X,ne=X.next;if(tr($,ee,ne)>=0)return!1;for(var ae=X.next.next;ae!==X.prev;){if(Pa($.x,$.y,ee.x,ee.y,ne.x,ne.y,ae.x,ae.y)&&tr(ae.prev,ae,ae.next)>=0)return!1;ae=ae.next}return!0}function GL(X,$,ee,ne){var ae=X.prev,de=X,fe=X.next;if(tr(ae,de,fe)>=0)return!1;for(var Ue=ae.x<de.x?ae.x<fe.x?ae.x:fe.x:de.x<fe.x?de.x:fe.x,je=ae.y<de.y?ae.y<fe.y?ae.y:fe.y:de.y<fe.y?de.y:fe.y,Ke=ae.x>de.x?ae.x>fe.x?ae.x:fe.x:de.x>fe.x?de.x:fe.x,et=ae.y>de.y?ae.y>fe.y?ae.y:fe.y:de.y>fe.y?de.y:fe.y,tt=Eg(Ue,je,$,ee,ne),nt=Eg(Ke,et,$,ee,ne),it=X.prevZ,ct=X.nextZ;it&&it.z>=tt&&ct&&ct.z<=nt;){if(it!==X.prev&&it!==X.next&&Pa(ae.x,ae.y,de.x,de.y,fe.x,fe.y,it.x,it.y)&&tr(it.prev,it,it.next)>=0||(it=it.prevZ,ct!==X.prev&&ct!==X.next&&Pa(ae.x,ae.y,de.x,de.y,fe.x,fe.y,ct.x,ct.y)&&tr(ct.prev,ct,ct.next)>=0))return!1;ct=ct.nextZ}for(;it&&it.z>=tt;){if(it!==X.prev&&it!==X.next&&Pa(ae.x,ae.y,de.x,de.y,fe.x,fe.y,it.x,it.y)&&tr(it.prev,it,it.next)>=0)return!1;it=it.prevZ}for(;ct&&ct.z<=nt;){if(ct!==X.prev&&ct!==X.next&&Pa(ae.x,ae.y,de.x,de.y,fe.x,fe.y,ct.x,ct.y)&&tr(ct.prev,ct,ct.next)>=0)return!1;ct=ct.nextZ}return!0}function kL(X,$,ee){var ne=X;do{var ae=ne.prev,de=ne.next.next;!td(ae,de)&&Lb(ae,ne,ne.next,de)&&nh(ae,de)&&nh(de,ae)&&($.push(ae.i/ee),$.push(ne.i/ee),$.push(de.i/ee),ih(ne),ih(ne.next),ne=X=de),ne=ne.next}while(ne!==X);return zs(ne)}function VL(X,$,ee,ne,ae,de){var fe=X;do{for(var Ue=fe.next.next;Ue!==fe.prev;){if(fe.i!==Ue.i&&KL(fe,Ue)){var je=Ib(fe,Ue);return fe=zs(fe,fe.next),je=zs(je,je.next),rh(fe,$,ee,ne,ae,de),void rh(je,$,ee,ne,ae,de)}Ue=Ue.next}fe=fe.next}while(fe!==X)}function HL(X,$,ee,ne){var ae,de,fe,Ue=[];for(ae=0,de=$.length;ae<de;ae++)(fe=Pb(X,$[ae]*ne,ae<de-1?$[ae+1]*ne:X.length,ne,!1))===fe.next&&(fe.steiner=!0),Ue.push(JL(fe));for(Ue.sort(WL),ae=0;ae<Ue.length;ae++)jL(Ue[ae],ee),ee=zs(ee,ee.next);return ee}function WL(X,$){return X.x-$.x}function jL(X,$){if($=function qL(X,$){var ee,ne=$,ae=X.x,de=X.y,fe=-1/0;do{if(de<=ne.y&&de>=ne.next.y&&ne.next.y!==ne.y){var Ue=ne.x+(de-ne.y)*(ne.next.x-ne.x)/(ne.next.y-ne.y);if(Ue<=ae&&Ue>fe){if(fe=Ue,Ue===ae){if(de===ne.y)return ne;if(de===ne.next.y)return ne.next}ee=ne.x<ne.next.x?ne:ne.next}}ne=ne.next}while(ne!==$);if(!ee)return null;if(ae===fe)return ee;var je,Ke=ee,et=ee.x,tt=ee.y,nt=1/0;ne=ee;do{ae>=ne.x&&ne.x>=et&&ae!==ne.x&&Pa(de<tt?ae:fe,de,et,tt,de<tt?fe:ae,de,ne.x,ne.y)&&(je=Math.abs(de-ne.y)/(ae-ne.x),nh(ne,X)&&(je<nt||je===nt&&(ne.x>ee.x||ne.x===ee.x&&YL(ee,ne)))&&(ee=ne,nt=je)),ne=ne.next}while(ne!==Ke);return ee}(X,$),$){var ee=Ib($,X);zs($,$.next),zs(ee,ee.next)}}function YL(X,$){return tr(X.prev,X,$.prev)<0&&tr($.next,X,X.next)<0}function Eg(X,$,ee,ne,ae){return(X=1431655765&((X=858993459&((X=252645135&((X=16711935&((X=32767*(X-ee)*ae)|X<<8))|X<<4))|X<<2))|X<<1))|($=1431655765&(($=858993459&(($=252645135&(($=16711935&(($=32767*($-ne)*ae)|$<<8))|$<<4))|$<<2))|$<<1))<<1}function JL(X){var $=X,ee=X;do{($.x<ee.x||$.x===ee.x&&$.y<ee.y)&&(ee=$),$=$.next}while($!==X);return ee}function Pa(X,$,ee,ne,ae,de,fe,Ue){return(ae-fe)*($-Ue)-(X-fe)*(de-Ue)>=0&&(X-fe)*(ne-Ue)-(ee-fe)*($-Ue)>=0&&(ee-fe)*(de-Ue)-(ae-fe)*(ne-Ue)>=0}function KL(X,$){return X.next.i!==$.i&&X.prev.i!==$.i&&!function ZL(X,$){var ee=X;do{if(ee.i!==X.i&&ee.next.i!==X.i&&ee.i!==$.i&&ee.next.i!==$.i&&Lb(ee,ee.next,X,$))return!0;ee=ee.next}while(ee!==X);return!1}(X,$)&&(nh(X,$)&&nh($,X)&&function $L(X,$){var ee=X,ne=!1,ae=(X.x+$.x)/2,de=(X.y+$.y)/2;do{ee.y>de!=ee.next.y>de&&ee.next.y!==ee.y&&ae<(ee.next.x-ee.x)*(de-ee.y)/(ee.next.y-ee.y)+ee.x&&(ne=!ne),ee=ee.next}while(ee!==X);return ne}(X,$)&&(tr(X.prev,X,$.prev)||tr(X,$.prev,$))||td(X,$)&&tr(X.prev,X,X.next)>0&&tr($.prev,$,$.next)>0)}function tr(X,$,ee){return($.y-X.y)*(ee.x-$.x)-($.x-X.x)*(ee.y-$.y)}function td(X,$){return X.x===$.x&&X.y===$.y}function Lb(X,$,ee,ne){var ae=nf(tr(X,$,ee)),de=nf(tr(X,$,ne)),fe=nf(tr(ee,ne,X)),Ue=nf(tr(ee,ne,$));return!!(ae!==de&&fe!==Ue||0===ae&&rf(X,ee,$)||0===de&&rf(X,ne,$)||0===fe&&rf(ee,X,ne)||0===Ue&&rf(ee,$,ne))}function rf(X,$,ee){return $.x<=Math.max(X.x,ee.x)&&$.x>=Math.min(X.x,ee.x)&&$.y<=Math.max(X.y,ee.y)&&$.y>=Math.min(X.y,ee.y)}function nf(X){return X>0?1:X<0?-1:0}function nh(X,$){return tr(X.prev,X,X.next)<0?tr(X,$,X.next)>=0&&tr(X,X.prev,$)>=0:tr(X,$,X.prev)<0||tr(X,X.next,$)<0}function Ib(X,$){var ee=new _g(X.i,X.x,X.y),ne=new _g($.i,$.x,$.y),ae=X.next,de=$.prev;return X.next=$,$.prev=X,ee.next=ae,ae.prev=ee,ne.next=ee,ee.prev=ne,de.next=ne,ne.prev=de,ne}function K0(X,$,ee,ne){var ae=new _g(X,$,ee);return ne?(ae.next=ne.next,ae.prev=ne,ne.next.prev=ae,ne.next=ae):(ae.prev=ae,ae.next=ae),ae}function ih(X){X.next.prev=X.prev,X.prev.next=X.next,X.prevZ&&(X.prevZ.nextZ=X.nextZ),X.nextZ&&(X.nextZ.prevZ=X.prevZ)}function _g(X,$,ee){this.i=X,this.x=$,this.y=ee,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}var ky=function(){function ni(){_classCallCheck(this,ni)}return _createClass(ni,null,[{key:"area",value:function area(X){for(var $=X.length,ee=0,ne=$-1,ae=0;ae<$;ne=ae++)ee+=X[ne].x*X[ae].y-X[ae].x*X[ne].y;return.5*ee}},{key:"isClockWise",value:function isClockWise(X){return ni.area(X)<0}},{key:"triangulateShape",value:function triangulateShape(X,$){var ee=[],ne=[],ae=[];Z0(X),$0(ee,X);var de=X.length;$.forEach(Z0);for(var fe=0;fe<$.length;fe++)ne.push(de),de+=$[fe].length,$0(ee,$[fe]);for(var Ue=by(ee,ne),je=0;je<Ue.length;je+=3)ae.push(Ue.slice(je,je+3));return ae}}]),ni}();function Z0(X){var $=X.length;$>2&&X[$-1].equals(X[0])&&X.pop()}function $0(X,$){for(var ee=0;ee<$.length;ee++)X.push($[ee].x),X.push($[ee].y)}var Cy=function(X){_inherits(Gs,X);var $=_createSuper(Gs);function Gs(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new yy([new va(.5,.5),new va(-.5,.5),new va(-.5,-.5),new va(.5,-.5)]),ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,Gs),(X=$.call(this)).type="ExtrudeGeometry",X.parameters={shapes:ee,options:ne},ee=Array.isArray(ee)?ee:[ee];for(var ae=_assertThisInitialized(X),de=[],fe=[],Ue=0,je=ee.length;Ue<je;Ue++){var Ke=ee[Ue];o(Ke)}function o(X){var $=[],ee=void 0!==ne.curveSegments?ne.curveSegments:12,Ue=void 0!==ne.steps?ne.steps:1,je=void 0!==ne.depth?ne.depth:1,Ke=void 0===ne.bevelEnabled||ne.bevelEnabled,et=void 0!==ne.bevelThickness?ne.bevelThickness:.2,tt=void 0!==ne.bevelSize?ne.bevelSize:et-.1,nt=void 0!==ne.bevelOffset?ne.bevelOffset:0,it=void 0!==ne.bevelSegments?ne.bevelSegments:3,ct=ne.extrudePath,dt=void 0!==ne.UVGenerator?ne.UVGenerator:Py;void 0!==ne.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),je=ne.amount);var vt,gt,yt,_t,wt,St=!1;ct&&(vt=ct.getSpacedPoints(Ue),St=!0,Ke=!1,gt=ct.computeFrenetFrames(Ue,!1),yt=new wo,_t=new wo,wt=new wo),Ke||(it=0,et=0,tt=0,nt=0);var Ct=X.extractPoints(ee),At=Ct.shape,Et=Ct.holes;if(!ky.isClockWise(At)){At=At.reverse();for(var Rt=0,Bt=Et.length;Rt<Bt;Rt++){var Ht=Et[Rt];ky.isClockWise(Ht)&&(Et[Rt]=Ht.reverse())}}for(var Wt=ky.triangulateShape(At,Et),qt=At,Zt=0,Xt=Et.length;Zt<Xt;Zt++){var Qt=Et[Zt];At=At.concat(Qt)}function k(X,$,ee){return $||console.error("THREE.ExtrudeGeometry: vec does not exist"),$.clone().multiplyScalar(ee).add(X)}var en=At.length,tn=Wt.length;function Q(X,$,ee){var ne,ae,de,fe=X.x-$.x,Ue=X.y-$.y,je=ee.x-X.x,Ke=ee.y-X.y,et=fe*fe+Ue*Ue,tt=fe*Ke-Ue*je;if(Math.abs(tt)>Number.EPSILON){var nt=Math.sqrt(et),it=Math.sqrt(je*je+Ke*Ke),ct=$.x-Ue/nt,dt=$.y+fe/nt,vt=((ee.x-Ke/it-ct)*Ke-(ee.y+je/it-dt)*je)/(fe*Ke-Ue*je),gt=(ne=ct+fe*vt-X.x)*ne+(ae=dt+Ue*vt-X.y)*ae;if(gt<=2)return new va(ne,ae);de=Math.sqrt(gt/2)}else{var yt=!1;fe>Number.EPSILON?je>Number.EPSILON&&(yt=!0):fe<-Number.EPSILON?je<-Number.EPSILON&&(yt=!0):Math.sign(Ue)===Math.sign(Ke)&&(yt=!0),yt?(ne=-Ue,ae=fe,de=Math.sqrt(et)):(ne=fe,ae=Ue,de=Math.sqrt(et/2))}return new va(ne/de,ae/de)}for(var un=[],hn=0,dn=qt.length,mn=dn-1,gn=hn+1;hn<dn;hn++,mn++,gn++)mn===dn&&(mn=0),gn===dn&&(gn=0),un[hn]=Q(qt[hn],qt[mn],qt[gn]);for(var _n,wn=[],Sn=un.concat(),Cn=0,An=Et.length;Cn<An;Cn++){var Mn=Et[Cn];_n=[];for(var En=0,Tn=Mn.length,Pn=Tn-1,Dn=En+1;En<Tn;En++,Pn++,Dn++)Pn===Tn&&(Pn=0),Dn===Tn&&(Dn=0),_n[En]=Q(Mn[En],Mn[Pn],Mn[Dn]);wn.push(_n),Sn=Sn.concat(_n)}for(var Ln=0;Ln<it;Ln++){for(var On=Ln/it,In=et*Math.cos(On*Math.PI/2),Fn=tt*Math.sin(On*Math.PI/2)+nt,Wn=0,Yn=qt.length;Wn<Yn;Wn++){var Jn=k(qt[Wn],un[Wn],Fn);ge(Jn.x,Jn.y,-In)}for(var Zn=0,Kn=Et.length;Zn<Kn;Zn++){var $n=Et[Zn];_n=wn[Zn];for(var nr=0,ir=$n.length;nr<ir;nr++){var ar=k($n[nr],_n[nr],Fn);ge(ar.x,ar.y,-In)}}}for(var or=tt+nt,hr=0;hr<en;hr++){var dr=Ke?k(At[hr],Sn[hr],or):At[hr];St?(_t.copy(gt.normals[0]).multiplyScalar(dr.x),yt.copy(gt.binormals[0]).multiplyScalar(dr.y),wt.copy(vt[0]).add(_t).add(yt),ge(wt.x,wt.y,wt.z)):ge(dr.x,dr.y,0)}for(var fr=1;fr<=Ue;fr++)for(var vr=0;vr<en;vr++){var yr=Ke?k(At[vr],Sn[vr],or):At[vr];St?(_t.copy(gt.normals[fr]).multiplyScalar(yr.x),yt.copy(gt.binormals[fr]).multiplyScalar(yr.y),wt.copy(vt[fr]).add(_t).add(yt),ge(wt.x,wt.y,wt.z)):ge(yr.x,yr.y,je/Ue*fr)}for(var br=it-1;br>=0;br--){for(var _r=br/it,wr=et*Math.cos(_r*Math.PI/2),Cr=tt*Math.sin(_r*Math.PI/2)+nt,Ar=0,Mr=qt.length;Ar<Mr;Ar++){var Er=k(qt[Ar],un[Ar],Cr);ge(Er.x,Er.y,je+wr)}for(var Tr=0,Pr=Et.length;Tr<Pr;Tr++){var Dr=Et[Tr];_n=wn[Tr];for(var Br=0,Ir=Dr.length;Br<Ir;Br++){var zr=k(Dr[Br],_n[Br],Cr);St?ge(zr.x,zr.y+vt[Ue-1].y,vt[Ue-1].x+wr):ge(zr.x,zr.y,je+wr)}}}function W(X,$){for(var ee=X.length;--ee>=0;){var ne=ee,ae=ee-1;ae<0&&(ae=X.length-1);for(var de=0,fe=Ue+2*it;de<fe;de++){var je=en*de,Ke=en*(de+1);le($+ne+je,$+ae+je,$+ae+Ke,$+ne+Ke)}}}function ge(X,ee,ne){$.push(X),$.push(ee),$.push(ne)}function oe(X,$,ee){H(X),H($),H(ee);var ne=de.length/3,fe=dt.generateTopUV(ae,de,ne-3,ne-2,ne-1);he(fe[0]),he(fe[1]),he(fe[2])}function le(X,$,ee,ne){H(X),H($),H(ne),H($),H(ee),H(ne);var fe=de.length/3,Ue=dt.generateSideWallUV(ae,de,fe-6,fe-3,fe-2,fe-1);he(Ue[0]),he(Ue[1]),he(Ue[3]),he(Ue[1]),he(Ue[2]),he(Ue[3])}function H(X){de.push($[3*X+0]),de.push($[3*X+1]),de.push($[3*X+2])}function he(X){fe.push(X.x),fe.push(X.y)}(function q(){var X=de.length/3;if(Ke){for(var $=0,ee=en*$,ne=0;ne<tn;ne++){var fe=Wt[ne];oe(fe[2]+ee,fe[1]+ee,fe[0]+ee)}ee=en*($=Ue+2*it);for(var je=0;je<tn;je++){var et=Wt[je];oe(et[0]+ee,et[1]+ee,et[2]+ee)}}else{for(var tt=0;tt<tn;tt++){var nt=Wt[tt];oe(nt[2],nt[1],nt[0])}for(var ct=0;ct<tn;ct++){var dt=Wt[ct];oe(dt[0]+en*Ue,dt[1]+en*Ue,dt[2]+en*Ue)}}ae.addGroup(X,de.length/3-X,0)})(),function J(){var X=de.length/3,$=0;W(qt,$),$+=qt.length;for(var ee=0,ne=Et.length;ee<ne;ee++){var fe=Et[ee];W(fe,$),$+=fe.length}ae.addGroup(X,de.length/3-X,1)}()}return X.setAttribute("position",new Iu(de,3)),X.setAttribute("uv",new Iu(fe,2)),X.computeVertexNormals(),X}return _createClass(Gs,[{key:"toJSON",value:function toJSON(){var X=_get(_getPrototypeOf(Gs.prototype),"toJSON",this).call(this);return function r2(X,$,ee){if(ee.shapes=[],Array.isArray(X))for(var ne=0,ae=X.length;ne<ae;ne++){var de=X[ne];ee.shapes.push(de.uuid)}else ee.shapes.push(X.uuid);return void 0!==$.extrudePath&&(ee.options.extrudePath=$.extrudePath.toJSON()),ee}(this.parameters.shapes,this.parameters.options,X)}}],[{key:"fromJSON",value:function fromJSON(X,$){for(var ee=[],ne=0,ae=X.shapes.length;ne<ae;ne++){var de=$[X.shapes[ne]];ee.push(de)}var fe=X.options.extrudePath;return void 0!==fe&&(X.options.extrudePath=(new uy[fe.type]).fromJSON(fe)),new Gs(ee,X.options)}}]),Gs}(Wu),Py={generateTopUV:function generateTopUV(X,$,ee,ne,ae){var de=$[3*ee],fe=$[3*ee+1],Ue=$[3*ne],je=$[3*ne+1],Ke=$[3*ae],et=$[3*ae+1];return[new va(de,fe),new va(Ue,je),new va(Ke,et)]},generateSideWallUV:function generateSideWallUV(X,$,ee,ne,ae,de){var fe=$[3*ee],Ue=$[3*ee+1],je=$[3*ee+2],Ke=$[3*ne],et=$[3*ne+1],tt=$[3*ne+2],nt=$[3*ae],it=$[3*ae+1],ct=$[3*ae+2],dt=$[3*de],vt=$[3*de+1],gt=$[3*de+2];return Math.abs(Ue-et)<Math.abs(fe-Ke)?[new va(fe,1-je),new va(Ke,1-tt),new va(nt,1-ct),new va(dt,1-gt)]:[new va(Ue,1-je),new va(et,1-tt),new va(it,1-ct),new va(vt,1-gt)]}};var Dy=function(X){_inherits(Va,X);var $=_createSuper(Va);function Va(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;_classCallCheck(this,Va);var ae=(1+Math.sqrt(5))/2,de=[-1,ae,0,1,ae,0,-1,-ae,0,1,-ae,0,0,-1,ae,0,1,ae,0,-1,-ae,0,1,-ae,ae,0,-1,ae,0,1,-ae,0,-1,-ae,0,1],fe=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];return(X=$.call(this,de,fe,ee,ne)).type="IcosahedronGeometry",X.parameters={radius:ee,detail:ne},X}return _createClass(Va,null,[{key:"fromJSON",value:function fromJSON(X){return new Va(X.radius,X.detail)}}]),Va}(my),Ly=function(X){_inherits(Io,X);var $=_createSuper(Io);function Io(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new yy([new va(0,.5),new va(-.5,-.5),new va(.5,-.5)]),ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;_classCallCheck(this,Io),(X=$.call(this)).type="ShapeGeometry",X.parameters={shapes:ee,curveSegments:ne};var ae=[],de=[],fe=[],Ue=[],je=0,Ke=0;if(!1===Array.isArray(ee))c(ee);else for(var et=0;et<ee.length;et++)c(ee[et]),X.addGroup(je,Ke,et),je+=Ke,Ke=0;function c(X){var $=de.length/3,ee=X.extractPoints(ne),je=ee.shape,et=ee.holes;!1===ky.isClockWise(je)&&(je=je.reverse());for(var tt=0,nt=et.length;tt<nt;tt++){var it=et[tt];!0===ky.isClockWise(it)&&(et[tt]=it.reverse())}for(var ct=ky.triangulateShape(je,et),dt=0,vt=et.length;dt<vt;dt++){var gt=et[dt];je=je.concat(gt)}for(var yt=0,_t=je.length;yt<_t;yt++){var wt=je[yt];de.push(wt.x,wt.y,0),fe.push(0,0,1),Ue.push(wt.x,wt.y)}for(var St=0,Ct=ct.length;St<Ct;St++){var At=ct[St],Et=At[0]+$,Rt=At[1]+$,Bt=At[2]+$;ae.push(Et,Rt,Bt),Ke+=3}}return X.setIndex(ae),X.setAttribute("position",new Iu(de,3)),X.setAttribute("normal",new Iu(fe,3)),X.setAttribute("uv",new Iu(Ue,2)),X}return _createClass(Io,[{key:"toJSON",value:function toJSON(){var X=_get(_getPrototypeOf(Io.prototype),"toJSON",this).call(this);return function n2(X,$){if($.shapes=[],Array.isArray(X))for(var ee=0,ne=X.length;ee<ne;ee++){var ae=X[ee];$.shapes.push(ae.uuid)}else $.shapes.push(X.uuid);return $}(this.parameters.shapes,X)}}],[{key:"fromJSON",value:function fromJSON(X,$){for(var ee=[],ne=0,ae=X.shapes.length;ne<ae;ne++){var de=$[X.shapes[ne]];ee.push(de)}return new Io(ee,X.curveSegments)}}]),Io}(Wu);var Oy=function(X){_inherits(Ro,X);var $=_createSuper(Ro);function Ro(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,de=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,fe=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,Ue=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,je=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;_classCallCheck(this,Ro),(X=$.call(this)).type="SphereGeometry",X.parameters={radius:ee,widthSegments:ne,heightSegments:ae,phiStart:de,phiLength:fe,thetaStart:Ue,thetaLength:je},ne=Math.max(3,Math.floor(ne)),ae=Math.max(2,Math.floor(ae));for(var Ke=Math.min(Ue+je,Math.PI),et=0,tt=[],nt=new wo,it=new wo,ct=[],dt=[],vt=[],gt=[],yt=0;yt<=ae;yt++){var _t=[],wt=yt/ae,St=0;0==yt&&0==Ue?St=.5/ne:yt==ae&&Ke==Math.PI&&(St=-.5/ne);for(var Ct=0;Ct<=ne;Ct++){var At=Ct/ne;nt.x=-ee*Math.cos(de+At*fe)*Math.sin(Ue+wt*je),nt.y=ee*Math.cos(Ue+wt*je),nt.z=ee*Math.sin(de+At*fe)*Math.sin(Ue+wt*je),dt.push(nt.x,nt.y,nt.z),it.copy(nt).normalize(),vt.push(it.x,it.y,it.z),gt.push(At+St,1-wt),_t.push(et++)}tt.push(_t)}for(var Et=0;Et<ae;Et++)for(var Rt=0;Rt<ne;Rt++){var Bt=tt[Et][Rt+1],Ht=tt[Et][Rt],Wt=tt[Et+1][Rt],qt=tt[Et+1][Rt+1];(0!==Et||Ue>0)&&ct.push(Bt,Ht,qt),(Et!==ae-1||Ke<Math.PI)&&ct.push(Ht,Wt,qt)}return X.setIndex(ct),X.setAttribute("position",new Iu(dt,3)),X.setAttribute("normal",new Iu(vt,3)),X.setAttribute("uv",new Iu(gt,2)),X}return _createClass(Ro,null,[{key:"fromJSON",value:function fromJSON(X){return new Ro(X.radius,X.widthSegments,X.heightSegments,X.phiStart,X.phiLength,X.thetaStart,X.thetaLength)}}]),Ro}(Wu),Iy=function(X){_inherits(Ha,X);var $=_createSuper(Ha);function Ha(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,de=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,fe=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,Ue=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;_classCallCheck(this,Ha),(X=$.call(this)).type="TorusKnotGeometry",X.parameters={radius:ee,tube:ne,tubularSegments:ae,radialSegments:de,p:fe,q:Ue},ae=Math.floor(ae),de=Math.floor(de);for(var je=[],Ke=[],et=[],tt=[],nt=new wo,it=new wo,ct=new wo,dt=new wo,vt=new wo,gt=new wo,yt=new wo,_t=0;_t<=ae;++_t){var wt=_t/ae*fe*Math.PI*2;y(wt,fe,Ue,ee,ct),y(wt+.01,fe,Ue,ee,dt),gt.subVectors(dt,ct),yt.addVectors(dt,ct),vt.crossVectors(gt,yt),yt.crossVectors(vt,gt),vt.normalize(),yt.normalize();for(var St=0;St<=de;++St){var Ct=St/de*Math.PI*2,At=-ne*Math.cos(Ct),Et=ne*Math.sin(Ct);nt.x=ct.x+(At*yt.x+Et*vt.x),nt.y=ct.y+(At*yt.y+Et*vt.y),nt.z=ct.z+(At*yt.z+Et*vt.z),Ke.push(nt.x,nt.y,nt.z),it.subVectors(nt,ct).normalize(),et.push(it.x,it.y,it.z),tt.push(_t/ae),tt.push(St/de)}}for(var Rt=1;Rt<=ae;Rt++)for(var Bt=1;Bt<=de;Bt++){var Ht=(de+1)*(Rt-1)+(Bt-1),Wt=(de+1)*Rt+(Bt-1),qt=(de+1)*Rt+Bt,Zt=(de+1)*(Rt-1)+Bt;je.push(Ht,Wt,Zt),je.push(Wt,qt,Zt)}function y(X,$,ee,ne,ae){var de=Math.cos(X),fe=Math.sin(X),Ue=ee/$*X,je=Math.cos(Ue);ae.x=ne*(2+je)*.5*de,ae.y=ne*(2+je)*fe*.5,ae.z=ne*Math.sin(Ue)*.5}return X.setIndex(je),X.setAttribute("position",new Iu(Ke,3)),X.setAttribute("normal",new Iu(et,3)),X.setAttribute("uv",new Iu(tt,2)),X}return _createClass(Ha,null,[{key:"fromJSON",value:function fromJSON(X){return new Ha(X.radius,X.tube,X.tubularSegments,X.radialSegments,X.p,X.q)}}]),Ha}(Wu),zy=function(X){_inherits(_f,X);var $=_createSuper(_f);function _f(X){var ee;return _classCallCheck(this,_f),(ee=$.call(this)).type="ShadowMaterial",ee.color=new Ma(0),ee.transparent=!0,ee.fog=!0,ee.setValues(X),ee}return _createClass(_f,[{key:"copy",value:function copy(X){return _get(_getPrototypeOf(_f.prototype),"copy",this).call(this,X),this.color.copy(X.color),this.fog=X.fog,this}}]),_f}(Au);zy.prototype.isShadowMaterial=!0;var Ny=function(X){_inherits(Cf,X);var $=_createSuper(Cf);function Cf(X){var ee;return _classCallCheck(this,Cf),(ee=$.call(this,X)).type="RawShaderMaterial",ee}return _createClass(Cf)}($h);Ny.prototype.isRawShaderMaterial=!0;var Fy=function(X){_inherits(sh,X);var $=_createSuper(sh);function sh(X){var ee;return _classCallCheck(this,sh),(ee=$.call(this)).defines={STANDARD:""},ee.type="MeshStandardMaterial",ee.color=new Ma(16777215),ee.roughness=1,ee.metalness=0,ee.map=null,ee.lightMap=null,ee.lightMapIntensity=1,ee.aoMap=null,ee.aoMapIntensity=1,ee.emissive=new Ma(0),ee.emissiveIntensity=1,ee.emissiveMap=null,ee.bumpMap=null,ee.bumpScale=1,ee.normalMap=null,ee.normalMapType=0,ee.normalScale=new va(1,1),ee.displacementMap=null,ee.displacementScale=1,ee.displacementBias=0,ee.roughnessMap=null,ee.metalnessMap=null,ee.alphaMap=null,ee.envMap=null,ee.envMapIntensity=1,ee.wireframe=!1,ee.wireframeLinewidth=1,ee.wireframeLinecap="round",ee.wireframeLinejoin="round",ee.flatShading=!1,ee.fog=!0,ee.setValues(X),ee}return _createClass(sh,[{key:"copy",value:function copy(X){return _get(_getPrototypeOf(sh.prototype),"copy",this).call(this,X),this.defines={STANDARD:""},this.color.copy(X.color),this.roughness=X.roughness,this.metalness=X.metalness,this.map=X.map,this.lightMap=X.lightMap,this.lightMapIntensity=X.lightMapIntensity,this.aoMap=X.aoMap,this.aoMapIntensity=X.aoMapIntensity,this.emissive.copy(X.emissive),this.emissiveMap=X.emissiveMap,this.emissiveIntensity=X.emissiveIntensity,this.bumpMap=X.bumpMap,this.bumpScale=X.bumpScale,this.normalMap=X.normalMap,this.normalMapType=X.normalMapType,this.normalScale.copy(X.normalScale),this.displacementMap=X.displacementMap,this.displacementScale=X.displacementScale,this.displacementBias=X.displacementBias,this.roughnessMap=X.roughnessMap,this.metalnessMap=X.metalnessMap,this.alphaMap=X.alphaMap,this.envMap=X.envMap,this.envMapIntensity=X.envMapIntensity,this.wireframe=X.wireframe,this.wireframeLinewidth=X.wireframeLinewidth,this.wireframeLinecap=X.wireframeLinecap,this.wireframeLinejoin=X.wireframeLinejoin,this.flatShading=X.flatShading,this.fog=X.fog,this}}]),sh}(Au);Fy.prototype.isMeshStandardMaterial=!0;var Uy=function(X){_inherits(Df,X);var $=_createSuper(Df);function Df(X){var ee;return _classCallCheck(this,Df),(ee=$.call(this)).defines={STANDARD:"",PHYSICAL:""},ee.type="MeshPhysicalMaterial",ee.clearcoatMap=null,ee.clearcoatRoughness=0,ee.clearcoatRoughnessMap=null,ee.clearcoatNormalScale=new va(1,1),ee.clearcoatNormalMap=null,ee.ior=1.5,Object.defineProperty(_assertThisInitialized(ee),"reflectivity",{get:function get(){return xr(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function set(X){this.ior=(1+.4*X)/(1-.4*X)}}),ee.sheenColor=new Ma(0),ee.sheenColorMap=null,ee.sheenRoughness=1,ee.sheenRoughnessMap=null,ee.transmissionMap=null,ee.thickness=0,ee.thicknessMap=null,ee.attenuationDistance=0,ee.attenuationColor=new Ma(1,1,1),ee.specularIntensity=1,ee.specularIntensityMap=null,ee.specularColor=new Ma(1,1,1),ee.specularColorMap=null,ee._sheen=0,ee._clearcoat=0,ee._transmission=0,ee.setValues(X),ee}return _createClass(Df,[{key:"sheen",get:function get(){return this._sheen},set:function set(X){this._sheen>0!=X>0&&this.version++,this._sheen=X}},{key:"clearcoat",get:function get(){return this._clearcoat},set:function set(X){this._clearcoat>0!=X>0&&this.version++,this._clearcoat=X}},{key:"transmission",get:function get(){return this._transmission},set:function set(X){this._transmission>0!=X>0&&this.version++,this._transmission=X}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Df.prototype),"copy",this).call(this,X),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=X.clearcoat,this.clearcoatMap=X.clearcoatMap,this.clearcoatRoughness=X.clearcoatRoughness,this.clearcoatRoughnessMap=X.clearcoatRoughnessMap,this.clearcoatNormalMap=X.clearcoatNormalMap,this.clearcoatNormalScale.copy(X.clearcoatNormalScale),this.ior=X.ior,this.sheen=X.sheen,this.sheenColor.copy(X.sheenColor),this.sheenColorMap=X.sheenColorMap,this.sheenRoughness=X.sheenRoughness,this.sheenRoughnessMap=X.sheenRoughnessMap,this.transmission=X.transmission,this.transmissionMap=X.transmissionMap,this.thickness=X.thickness,this.thicknessMap=X.thicknessMap,this.attenuationDistance=X.attenuationDistance,this.attenuationColor.copy(X.attenuationColor),this.specularIntensity=X.specularIntensity,this.specularIntensityMap=X.specularIntensityMap,this.specularColor.copy(X.specularColor),this.specularColorMap=X.specularColorMap,this}}]),Df}(Fy);Uy.prototype.isMeshPhysicalMaterial=!0;var Vy=function(X){_inherits(Pf,X);var $=_createSuper(Pf);function Pf(X){var ee;return _classCallCheck(this,Pf),(ee=$.call(this)).type="MeshPhongMaterial",ee.color=new Ma(16777215),ee.specular=new Ma(1118481),ee.shininess=30,ee.map=null,ee.lightMap=null,ee.lightMapIntensity=1,ee.aoMap=null,ee.aoMapIntensity=1,ee.emissive=new Ma(0),ee.emissiveIntensity=1,ee.emissiveMap=null,ee.bumpMap=null,ee.bumpScale=1,ee.normalMap=null,ee.normalMapType=0,ee.normalScale=new va(1,1),ee.displacementMap=null,ee.displacementScale=1,ee.displacementBias=0,ee.specularMap=null,ee.alphaMap=null,ee.envMap=null,ee.combine=0,ee.reflectivity=1,ee.refractionRatio=.98,ee.wireframe=!1,ee.wireframeLinewidth=1,ee.wireframeLinecap="round",ee.wireframeLinejoin="round",ee.flatShading=!1,ee.fog=!0,ee.setValues(X),ee}return _createClass(Pf,[{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Pf.prototype),"copy",this).call(this,X),this.color.copy(X.color),this.specular.copy(X.specular),this.shininess=X.shininess,this.map=X.map,this.lightMap=X.lightMap,this.lightMapIntensity=X.lightMapIntensity,this.aoMap=X.aoMap,this.aoMapIntensity=X.aoMapIntensity,this.emissive.copy(X.emissive),this.emissiveMap=X.emissiveMap,this.emissiveIntensity=X.emissiveIntensity,this.bumpMap=X.bumpMap,this.bumpScale=X.bumpScale,this.normalMap=X.normalMap,this.normalMapType=X.normalMapType,this.normalScale.copy(X.normalScale),this.displacementMap=X.displacementMap,this.displacementScale=X.displacementScale,this.displacementBias=X.displacementBias,this.specularMap=X.specularMap,this.alphaMap=X.alphaMap,this.envMap=X.envMap,this.combine=X.combine,this.reflectivity=X.reflectivity,this.refractionRatio=X.refractionRatio,this.wireframe=X.wireframe,this.wireframeLinewidth=X.wireframeLinewidth,this.wireframeLinecap=X.wireframeLinecap,this.wireframeLinejoin=X.wireframeLinejoin,this.flatShading=X.flatShading,this.fog=X.fog,this}}]),Pf}(Au);Vy.prototype.isMeshPhongMaterial=!0;var Hy=function(X){_inherits(Lf,X);var $=_createSuper(Lf);function Lf(X){var ee;return _classCallCheck(this,Lf),(ee=$.call(this)).defines={TOON:""},ee.type="MeshToonMaterial",ee.color=new Ma(16777215),ee.map=null,ee.gradientMap=null,ee.lightMap=null,ee.lightMapIntensity=1,ee.aoMap=null,ee.aoMapIntensity=1,ee.emissive=new Ma(0),ee.emissiveIntensity=1,ee.emissiveMap=null,ee.bumpMap=null,ee.bumpScale=1,ee.normalMap=null,ee.normalMapType=0,ee.normalScale=new va(1,1),ee.displacementMap=null,ee.displacementScale=1,ee.displacementBias=0,ee.alphaMap=null,ee.wireframe=!1,ee.wireframeLinewidth=1,ee.wireframeLinecap="round",ee.wireframeLinejoin="round",ee.fog=!0,ee.setValues(X),ee}return _createClass(Lf,[{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Lf.prototype),"copy",this).call(this,X),this.color.copy(X.color),this.map=X.map,this.gradientMap=X.gradientMap,this.lightMap=X.lightMap,this.lightMapIntensity=X.lightMapIntensity,this.aoMap=X.aoMap,this.aoMapIntensity=X.aoMapIntensity,this.emissive.copy(X.emissive),this.emissiveMap=X.emissiveMap,this.emissiveIntensity=X.emissiveIntensity,this.bumpMap=X.bumpMap,this.bumpScale=X.bumpScale,this.normalMap=X.normalMap,this.normalMapType=X.normalMapType,this.normalScale.copy(X.normalScale),this.displacementMap=X.displacementMap,this.displacementScale=X.displacementScale,this.displacementBias=X.displacementBias,this.alphaMap=X.alphaMap,this.wireframe=X.wireframe,this.wireframeLinewidth=X.wireframeLinewidth,this.wireframeLinecap=X.wireframeLinecap,this.wireframeLinejoin=X.wireframeLinejoin,this.fog=X.fog,this}}]),Lf}(Au);Hy.prototype.isMeshToonMaterial=!0;var jy=function(X){_inherits(If,X);var $=_createSuper(If);function If(X){var ee;return _classCallCheck(this,If),(ee=$.call(this)).type="MeshNormalMaterial",ee.bumpMap=null,ee.bumpScale=1,ee.normalMap=null,ee.normalMapType=0,ee.normalScale=new va(1,1),ee.displacementMap=null,ee.displacementScale=1,ee.displacementBias=0,ee.wireframe=!1,ee.wireframeLinewidth=1,ee.flatShading=!1,ee.setValues(X),ee}return _createClass(If,[{key:"copy",value:function copy(X){return _get(_getPrototypeOf(If.prototype),"copy",this).call(this,X),this.bumpMap=X.bumpMap,this.bumpScale=X.bumpScale,this.normalMap=X.normalMap,this.normalMapType=X.normalMapType,this.normalScale.copy(X.normalScale),this.displacementMap=X.displacementMap,this.displacementScale=X.displacementScale,this.displacementBias=X.displacementBias,this.wireframe=X.wireframe,this.wireframeLinewidth=X.wireframeLinewidth,this.flatShading=X.flatShading,this}}]),If}(Au);jy.prototype.isMeshNormalMaterial=!0;var Gy=function(X){_inherits(Rf,X);var $=_createSuper(Rf);function Rf(X){var ee;return _classCallCheck(this,Rf),(ee=$.call(this)).type="MeshLambertMaterial",ee.color=new Ma(16777215),ee.map=null,ee.lightMap=null,ee.lightMapIntensity=1,ee.aoMap=null,ee.aoMapIntensity=1,ee.emissive=new Ma(0),ee.emissiveIntensity=1,ee.emissiveMap=null,ee.specularMap=null,ee.alphaMap=null,ee.envMap=null,ee.combine=0,ee.reflectivity=1,ee.refractionRatio=.98,ee.wireframe=!1,ee.wireframeLinewidth=1,ee.wireframeLinecap="round",ee.wireframeLinejoin="round",ee.fog=!0,ee.setValues(X),ee}return _createClass(Rf,[{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Rf.prototype),"copy",this).call(this,X),this.color.copy(X.color),this.map=X.map,this.lightMap=X.lightMap,this.lightMapIntensity=X.lightMapIntensity,this.aoMap=X.aoMap,this.aoMapIntensity=X.aoMapIntensity,this.emissive.copy(X.emissive),this.emissiveMap=X.emissiveMap,this.emissiveIntensity=X.emissiveIntensity,this.specularMap=X.specularMap,this.alphaMap=X.alphaMap,this.envMap=X.envMap,this.combine=X.combine,this.reflectivity=X.reflectivity,this.refractionRatio=X.refractionRatio,this.wireframe=X.wireframe,this.wireframeLinewidth=X.wireframeLinewidth,this.wireframeLinecap=X.wireframeLinecap,this.wireframeLinejoin=X.wireframeLinejoin,this.fog=X.fog,this}}]),Rf}(Au);Gy.prototype.isMeshLambertMaterial=!0;var Wy=function(X){_inherits(Bf,X);var $=_createSuper(Bf);function Bf(X){var ee;return _classCallCheck(this,Bf),(ee=$.call(this)).defines={MATCAP:""},ee.type="MeshMatcapMaterial",ee.color=new Ma(16777215),ee.matcap=null,ee.map=null,ee.bumpMap=null,ee.bumpScale=1,ee.normalMap=null,ee.normalMapType=0,ee.normalScale=new va(1,1),ee.displacementMap=null,ee.displacementScale=1,ee.displacementBias=0,ee.alphaMap=null,ee.flatShading=!1,ee.fog=!0,ee.setValues(X),ee}return _createClass(Bf,[{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Bf.prototype),"copy",this).call(this,X),this.defines={MATCAP:""},this.color.copy(X.color),this.matcap=X.matcap,this.map=X.map,this.bumpMap=X.bumpMap,this.bumpScale=X.bumpScale,this.normalMap=X.normalMap,this.normalMapType=X.normalMapType,this.normalScale.copy(X.normalScale),this.displacementMap=X.displacementMap,this.displacementScale=X.displacementScale,this.displacementBias=X.displacementBias,this.alphaMap=X.alphaMap,this.flatShading=X.flatShading,this.fog=X.fog,this}}]),Bf}(Au);Wy.prototype.isMeshMatcapMaterial=!0;var qy=function(X){_inherits(Nf,X);var $=_createSuper(Nf);function Nf(X){var ee;return _classCallCheck(this,Nf),(ee=$.call(this)).type="LineDashedMaterial",ee.scale=1,ee.dashSize=3,ee.gapSize=1,ee.setValues(X),ee}return _createClass(Nf,[{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Nf.prototype),"copy",this).call(this,X),this.scale=X.scale,this.dashSize=X.dashSize,this.gapSize=X.gapSize,this}}]),Nf}(Em);qy.prototype.isLineDashedMaterial=!0;var Yy={ShadowMaterial:zy,SpriteMaterial:_v,RawShaderMaterial:Ny,ShaderMaterial:$h,PointsMaterial:Um,MeshPhysicalMaterial:Uy,MeshStandardMaterial:Fy,MeshPhongMaterial:Vy,MeshToonMaterial:Hy,MeshNormalMaterial:jy,MeshLambertMaterial:Gy,MeshDepthMaterial:up,MeshDistanceMaterial:hp,MeshBasicMaterial:Mu,MeshMatcapMaterial:Wy,LineDashedMaterial:qy,LineBasicMaterial:Em,Material:Au};Au.fromType=function(X){return new Yy[X]};var Jy={arraySlice:function arraySlice(X,$,ee){return Jy.isTypedArray(X)?new X.constructor(X.subarray($,void 0!==ee?ee:X.length)):X.slice($,ee)},convertArray:function convertArray(X,$,ee){return!X||!ee&&X.constructor===$?X:"number"==typeof $.BYTES_PER_ELEMENT?new $(X):Array.prototype.slice.call(X)},isTypedArray:function isTypedArray(X){return ArrayBuffer.isView(X)&&!(X instanceof DataView)},getKeyframeOrder:function getKeyframeOrder(X){for(var $=X.length,ee=new Array($),ne=0;ne!==$;++ne)ee[ne]=ne;return ee.sort((function e($,ee){return X[$]-X[ee]})),ee},sortedArray:function sortedArray(X,$,ee){for(var ne=X.length,ae=new X.constructor(ne),de=0,fe=0;fe!==ne;++de)for(var Ue=ee[de]*$,je=0;je!==$;++je)ae[fe++]=X[Ue+je];return ae},flattenJSON:function flattenJSON(X,$,ee,ne){for(var ae=1,de=X[0];void 0!==de&&void 0===de[ne];)de=X[ae++];if(void 0!==de){var fe=de[ne];if(void 0!==fe)if(Array.isArray(fe))do{void 0!==(fe=de[ne])&&($.push(de.time),ee.push.apply(ee,fe)),de=X[ae++]}while(void 0!==de);else if(void 0!==fe.toArray)do{void 0!==(fe=de[ne])&&($.push(de.time),fe.toArray(ee,ee.length)),de=X[ae++]}while(void 0!==de);else do{void 0!==(fe=de[ne])&&($.push(de.time),ee.push(fe)),de=X[ae++]}while(void 0!==de)}},subclip:function subclip(X,$,ee,ne){var ae=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30,de=X.clone();de.name=$;for(var fe=[],Ue=0;Ue<de.tracks.length;++Ue){for(var je=de.tracks[Ue],Ke=je.getValueSize(),et=[],tt=[],nt=0;nt<je.times.length;++nt){var it=je.times[nt]*ae;if(!(it<ee||it>=ne)){et.push(je.times[nt]);for(var ct=0;ct<Ke;++ct)tt.push(je.values[nt*Ke+ct])}}0!==et.length&&(je.times=Jy.convertArray(et,je.times.constructor),je.values=Jy.convertArray(tt,je.values.constructor),fe.push(je))}de.tracks=fe;for(var dt=1/0,vt=0;vt<de.tracks.length;++vt)dt>de.tracks[vt].times[0]&&(dt=de.tracks[vt].times[0]);for(var gt=0;gt<de.tracks.length;++gt)de.tracks[gt].shift(-1*dt);return de.resetDuration(),de},makeClipAdditive:function makeClipAdditive(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:X,ne=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;ne<=0&&(ne=30);for(var ae=ee.tracks.length,de=$/ne,fe=function _loop2($){var ne=ee.tracks[$],ae=ne.ValueTypeName;if("bool"===ae||"string"===ae)return"continue";var fe=X.tracks.find((function(X){return X.name===ne.name&&X.ValueTypeName===ae}));if(void 0===fe)return"continue";var Ue=0,je=ne.getValueSize();ne.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(Ue=je/3);var Ke=0,et=fe.getValueSize();fe.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(Ke=et/3);var tt=ne.times.length-1,nt=void 0;if(de<=ne.times[0]){var it=Ue,ct=je-Ue;nt=Jy.arraySlice(ne.values,it,ct)}else if(de>=ne.times[tt]){var dt=tt*je+Ue,vt=dt+je-Ue;nt=Jy.arraySlice(ne.values,dt,vt)}else{var gt=ne.createInterpolant(),yt=Ue,_t=je-Ue;gt.evaluate(de),nt=Jy.arraySlice(gt.resultBuffer,yt,_t)}"quaternion"===ae&&(new xo).fromArray(nt).normalize().conjugate().toArray(nt);for(var wt=fe.times.length,St=0;St<wt;++St){var Ct=St*et+Ke;if("quaternion"===ae)xo.multiplyQuaternionsFlat(fe.values,Ct,nt,0,fe.values,Ct);else for(var At=et-2*Ke,Et=0;Et<At;++Et)fe.values[Ct+Et]-=nt[Et]}},Ue=0;Ue<ae;++Ue)fe(Ue);return X.blendMode=Vr,X}},Zy=function(){function Ci(X,$,ee,ne){_classCallCheck(this,Ci),this.parameterPositions=X,this._cachedIndex=0,this.resultBuffer=void 0!==ne?ne:new $.constructor(ee),this.sampleValues=$,this.valueSize=ee,this.settings=null,this.DefaultSettings_={}}return _createClass(Ci,[{key:"evaluate",value:function evaluate(X){var $=this.parameterPositions,ee=this._cachedIndex,ne=$[ee],ae=$[ee-1];e:{t:{var de;n:{r:if(!(X<ne)){for(var fe=ee+2;;){if(void 0===ne){if(X<ae)break r;return ee=$.length,this._cachedIndex=ee,this.afterEnd_(ee-1,X,ae)}if(ee===fe)break;if(ae=ne,X<(ne=$[++ee]))break t}de=$.length;break n}if(X>=ae)break e;var Ue=$[1];X<Ue&&(ee=2,ae=Ue);for(var je=ee-2;;){if(void 0===ae)return this._cachedIndex=0,this.beforeStart_(0,X,ne);if(ee===je)break;if(ne=ae,X>=(ae=$[--ee-1]))break t}de=ee,ee=0}for(;ee<de;){var Ke=ee+de>>>1;X<$[Ke]?de=Ke:ee=Ke+1}if(ne=$[ee],void 0===(ae=$[ee-1]))return this._cachedIndex=0,this.beforeStart_(0,X,ne);if(void 0===ne)return ee=$.length,this._cachedIndex=ee,this.afterEnd_(ee-1,ae,X)}this._cachedIndex=ee,this.intervalChanged_(ee,ae,ne)}return this.interpolate_(ee,ae,X,ne)}},{key:"getSettings_",value:function getSettings_(){return this.settings||this.DefaultSettings_}},{key:"copySampleValue_",value:function copySampleValue_(X){for(var $=this.resultBuffer,ee=this.sampleValues,ne=this.valueSize,ae=X*ne,de=0;de!==ne;++de)$[de]=ee[ae+de];return $}},{key:"interpolate_",value:function interpolate_(){throw new Error("call to abstract method")}},{key:"intervalChanged_",value:function intervalChanged_(){}}]),Ci}();Zy.prototype.beforeStart_=Zy.prototype.copySampleValue_,Zy.prototype.afterEnd_=Zy.prototype.copySampleValue_;var Xy=function(X){_inherits(Cg,X);var $=_createSuper(Cg);function Cg(X,ee,ne,ae){var de;return _classCallCheck(this,Cg),(de=$.call(this,X,ee,ne,ae))._weightPrev=-0,de._offsetPrev=-0,de._weightNext=-0,de._offsetNext=-0,de.DefaultSettings_={endingStart:Br,endingEnd:Br},de}return _createClass(Cg,[{key:"intervalChanged_",value:function intervalChanged_(X,$,ee){var ne=this.parameterPositions,ae=X-2,de=X+1,fe=ne[ae],Ue=ne[de];if(void 0===fe)switch(this.getSettings_().endingStart){case Ir:ae=X,fe=2*$-ee;break;case zr:fe=$+ne[ae=ne.length-2]-ne[ae+1];break;default:ae=X,fe=ee}if(void 0===Ue)switch(this.getSettings_().endingEnd){case Ir:de=X,Ue=2*ee-$;break;case zr:de=1,Ue=ee+ne[1]-ne[0];break;default:de=X-1,Ue=$}var je=.5*(ee-$),Ke=this.valueSize;this._weightPrev=je/($-fe),this._weightNext=je/(Ue-ee),this._offsetPrev=ae*Ke,this._offsetNext=de*Ke}},{key:"interpolate_",value:function interpolate_(X,$,ee,ne){for(var ae=this.resultBuffer,de=this.sampleValues,fe=this.valueSize,Ue=X*fe,je=Ue-fe,Ke=this._offsetPrev,et=this._offsetNext,tt=this._weightPrev,nt=this._weightNext,it=(ee-$)/(ne-$),ct=it*it,dt=ct*it,vt=-tt*dt+2*tt*ct-tt*it,gt=(1+tt)*dt+(-1.5-2*tt)*ct+(-.5+tt)*it+1,yt=(-1-nt)*dt+(1.5+nt)*ct+.5*it,_t=nt*dt-nt*ct,wt=0;wt!==fe;++wt)ae[wt]=vt*de[Ke+wt]+gt*de[je+wt]+yt*de[Ue+wt]+_t*de[et+wt];return ae}}]),Cg}(Zy),$y=function(X){_inherits(Of,X);var $=_createSuper(Of);function Of(X,ee,ne,ae){return _classCallCheck(this,Of),$.call(this,X,ee,ne,ae)}return _createClass(Of,[{key:"interpolate_",value:function interpolate_(X,$,ee,ne){for(var ae=this.resultBuffer,de=this.sampleValues,fe=this.valueSize,Ue=X*fe,je=Ue-fe,Ke=(ee-$)/(ne-$),et=1-Ke,tt=0;tt!==fe;++tt)ae[tt]=de[je+tt]*et+de[Ue+tt]*Ke;return ae}}]),Of}(Zy),nb=function(X){_inherits(Dg,X);var $=_createSuper(Dg);function Dg(X,ee,ne,ae){return _classCallCheck(this,Dg),$.call(this,X,ee,ne,ae)}return _createClass(Dg,[{key:"interpolate_",value:function interpolate_(X){return this.copySampleValue_(X-1)}}]),Dg}(Zy),ob=function(){function Vn(X,$,ee,ne){if(_classCallCheck(this,Vn),void 0===X)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===$||0===$.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+X);this.name=X,this.times=Jy.convertArray($,this.TimeBufferType),this.values=Jy.convertArray(ee,this.ValueBufferType),this.setInterpolation(ne||this.DefaultInterpolation)}return _createClass(Vn,[{key:"InterpolantFactoryMethodDiscrete",value:function InterpolantFactoryMethodDiscrete(X){return new nb(this.times,this.values,this.getValueSize(),X)}},{key:"InterpolantFactoryMethodLinear",value:function InterpolantFactoryMethodLinear(X){return new $y(this.times,this.values,this.getValueSize(),X)}},{key:"InterpolantFactoryMethodSmooth",value:function InterpolantFactoryMethodSmooth(X){return new Xy(this.times,this.values,this.getValueSize(),X)}},{key:"setInterpolation",value:function setInterpolation(X){var $;switch(X){case Tr:$=this.InterpolantFactoryMethodDiscrete;break;case Pr:$=this.InterpolantFactoryMethodLinear;break;case Dr:$=this.InterpolantFactoryMethodSmooth}if(void 0===$){var ee="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(X===this.DefaultInterpolation)throw new Error(ee);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",ee),this}return this.createInterpolant=$,this}},{key:"getInterpolation",value:function getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Tr;case this.InterpolantFactoryMethodLinear:return Pr;case this.InterpolantFactoryMethodSmooth:return Dr}}},{key:"getValueSize",value:function getValueSize(){return this.values.length/this.times.length}},{key:"shift",value:function shift(X){if(0!==X)for(var $=this.times,ee=0,ne=$.length;ee!==ne;++ee)$[ee]+=X;return this}},{key:"scale",value:function scale(X){if(1!==X)for(var $=this.times,ee=0,ne=$.length;ee!==ne;++ee)$[ee]*=X;return this}},{key:"trim",value:function trim(X,$){for(var ee=this.times,ne=ee.length,ae=0,de=ne-1;ae!==ne&&ee[ae]<X;)++ae;for(;-1!==de&&ee[de]>$;)--de;if(++de,0!==ae||de!==ne){ae>=de&&(ae=(de=Math.max(de,1))-1);var fe=this.getValueSize();this.times=Jy.arraySlice(ee,ae,de),this.values=Jy.arraySlice(this.values,ae*fe,de*fe)}return this}},{key:"validate",value:function validate(){var X=!0,$=this.getValueSize();$-Math.floor($)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),X=!1);var ee=this.times,ne=this.values,ae=ee.length;0===ae&&(console.error("THREE.KeyframeTrack: Track is empty.",this),X=!1);for(var de=null,fe=0;fe!==ae;fe++){var Ue=ee[fe];if("number"==typeof Ue&&isNaN(Ue)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,fe,Ue),X=!1;break}if(null!==de&&de>Ue){console.error("THREE.KeyframeTrack: Out of order keys.",this,fe,Ue,de),X=!1;break}de=Ue}if(void 0!==ne&&Jy.isTypedArray(ne))for(var je=0,Ke=ne.length;je!==Ke;++je){var et=ne[je];if(isNaN(et)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,je,et),X=!1;break}}return X}},{key:"optimize",value:function optimize(){for(var X=Jy.arraySlice(this.times),$=Jy.arraySlice(this.values),ee=this.getValueSize(),ne=this.getInterpolation()===Dr,ae=X.length-1,de=1,fe=1;fe<ae;++fe){var Ue=!1,je=X[fe];if(je!==X[fe+1]&&(1!==fe||je!==X[0]))if(ne)Ue=!0;else for(var Ke=fe*ee,et=Ke-ee,tt=Ke+ee,nt=0;nt!==ee;++nt){var it=$[Ke+nt];if(it!==$[et+nt]||it!==$[tt+nt]){Ue=!0;break}}if(Ue){if(fe!==de){X[de]=X[fe];for(var ct=fe*ee,dt=de*ee,vt=0;vt!==ee;++vt)$[dt+vt]=$[ct+vt]}++de}}if(ae>0){X[de]=X[ae];for(var gt=ae*ee,yt=de*ee,_t=0;_t!==ee;++_t)$[yt+_t]=$[gt+_t];++de}return de!==X.length?(this.times=Jy.arraySlice(X,0,de),this.values=Jy.arraySlice($,0,de*ee)):(this.times=X,this.values=$),this}},{key:"clone",value:function clone(){var X=Jy.arraySlice(this.times,0),$=Jy.arraySlice(this.values,0),ee=new(0,this.constructor)(this.name,X,$);return ee.createInterpolant=this.createInterpolant,ee}}],[{key:"toJSON",value:function toJSON(X){var $,ee=X.constructor;if(ee.toJSON!==this.toJSON)$=ee.toJSON(X);else{$={name:X.name,times:Jy.convertArray(X.times,Array),values:Jy.convertArray(X.values,Array)};var ne=X.getInterpolation();ne!==X.DefaultInterpolation&&($.interpolation=ne)}return $.type=X.ValueTypeName,$}}]),Vn}();ob.prototype.TimeBufferType=Float32Array,ob.prototype.ValueBufferType=Float32Array,ob.prototype.DefaultInterpolation=Pr;var lb=function(X){_inherits(ks,X);var $=_createSuper(ks);function ks(){return _classCallCheck(this,ks),$.apply(this,arguments)}return _createClass(ks)}(ob);lb.prototype.ValueTypeName="bool",lb.prototype.ValueBufferType=Array,lb.prototype.DefaultInterpolation=Tr,lb.prototype.InterpolantFactoryMethodLinear=void 0,lb.prototype.InterpolantFactoryMethodSmooth=void 0;var cb=function(X){_inherits(Ff,X);var $=_createSuper(Ff);function Ff(){return _classCallCheck(this,Ff),$.apply(this,arguments)}return _createClass(Ff)}(ob);cb.prototype.ValueTypeName="color";var pb=function(X){_inherits(Wa,X);var $=_createSuper(Wa);function Wa(){return _classCallCheck(this,Wa),$.apply(this,arguments)}return _createClass(Wa)}(ob);pb.prototype.ValueTypeName="number";var yb=function(X){_inherits(Pg,X);var $=_createSuper(Pg);function Pg(X,ee,ne,ae){return _classCallCheck(this,Pg),$.call(this,X,ee,ne,ae)}return _createClass(Pg,[{key:"interpolate_",value:function interpolate_(X,$,ee,ne){for(var ae=this.resultBuffer,de=this.sampleValues,fe=this.valueSize,Ue=(ee-$)/(ne-$),je=X*fe,Ke=je+fe;je!==Ke;je+=4)xo.slerpFlat(ae,0,de,je-fe,de,je,Ue);return ae}}]),Pg}(Zy),kb=function(X){_inherits(Bo,X);var $=_createSuper(Bo);function Bo(){return _classCallCheck(this,Bo),$.apply(this,arguments)}return _createClass(Bo,[{key:"InterpolantFactoryMethodLinear",value:function InterpolantFactoryMethodLinear(X){return new yb(this.times,this.values,this.getValueSize(),X)}}]),Bo}(ob);kb.prototype.ValueTypeName="quaternion",kb.prototype.DefaultInterpolation=Pr,kb.prototype.InterpolantFactoryMethodSmooth=void 0;var zb=function(X){_inherits(Vs,X);var $=_createSuper(Vs);function Vs(){return _classCallCheck(this,Vs),$.apply(this,arguments)}return _createClass(Vs)}(ob);zb.prototype.ValueTypeName="string",zb.prototype.ValueBufferType=Array,zb.prototype.DefaultInterpolation=Tr,zb.prototype.InterpolantFactoryMethodLinear=void 0,zb.prototype.InterpolantFactoryMethodSmooth=void 0;var Nb=function(X){_inherits(ja,X);var $=_createSuper(ja);function ja(){return _classCallCheck(this,ja),$.apply(this,arguments)}return _createClass(ja)}(ob);Nb.prototype.ValueTypeName="vector";var Hb=function(){function Uf(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,ee=arguments.length>2?arguments[2]:void 0,ne=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Fr;_classCallCheck(this,Uf),this.name=X,this.tracks=ee,this.duration=$,this.blendMode=ne,this.uuid=Un(),this.duration<0&&this.resetDuration()}return _createClass(Uf,[{key:"resetDuration",value:function resetDuration(){for(var X=0,$=0,ee=this.tracks.length;$!==ee;++$){var ne=this.tracks[$];X=Math.max(X,ne.times[ne.times.length-1])}return this.duration=X,this}},{key:"trim",value:function trim(){for(var X=0;X<this.tracks.length;X++)this.tracks[X].trim(0,this.duration);return this}},{key:"validate",value:function validate(){for(var X=!0,$=0;$<this.tracks.length;$++)X=X&&this.tracks[$].validate();return X}},{key:"optimize",value:function optimize(){for(var X=0;X<this.tracks.length;X++)this.tracks[X].optimize();return this}},{key:"clone",value:function clone(){for(var X=[],$=0;$<this.tracks.length;$++)X.push(this.tracks[$].clone());return new this.constructor(this.name,this.duration,X,this.blendMode)}},{key:"toJSON",value:function toJSON(){return this.constructor.toJSON(this)}}],[{key:"parse",value:function parse(X){for(var $=[],ee=X.tracks,ne=1/(X.fps||1),ae=0,de=ee.length;ae!==de;++ae)$.push(o2(ee[ae]).scale(ne));var fe=new this(X.name,X.duration,$,X.blendMode);return fe.uuid=X.uuid,fe}},{key:"toJSON",value:function toJSON(X){for(var $=[],ee=X.tracks,ne={name:X.name,duration:X.duration,tracks:$,uuid:X.uuid,blendMode:X.blendMode},ae=0,de=ee.length;ae!==de;++ae)$.push(ob.toJSON(ee[ae]));return ne}},{key:"CreateFromMorphTargetSequence",value:function CreateFromMorphTargetSequence(X,$,ee,ne){for(var ae=$.length,de=[],fe=0;fe<ae;fe++){var Ue=[],je=[];Ue.push((fe+ae-1)%ae,fe,(fe+1)%ae),je.push(0,1,0);var Ke=Jy.getKeyframeOrder(Ue);Ue=Jy.sortedArray(Ue,1,Ke),je=Jy.sortedArray(je,1,Ke),!ne&&0===Ue[0]&&(Ue.push(ae),je.push(je[0])),de.push(new pb(".morphTargetInfluences["+$[fe].name+"]",Ue,je).scale(1/ee))}return new this(X,-1,de)}},{key:"findByName",value:function findByName(X,$){var ee=X;if(!Array.isArray(X)){var ne=X;ee=ne.geometry&&ne.geometry.animations||ne.animations}for(var ae=0;ae<ee.length;ae++)if(ee[ae].name===$)return ee[ae];return null}},{key:"CreateClipsFromMorphTargetSequences",value:function CreateClipsFromMorphTargetSequences(X,$,ee){for(var ne={},ae=/^([\w-]*?)([\d]+)$/,de=0,fe=X.length;de<fe;de++){var Ue=X[de],je=Ue.name.match(ae);if(je&&je.length>1){var Ke=je[1],et=ne[Ke];et||(ne[Ke]=et=[]),et.push(Ue)}}var tt=[];for(var nt in ne)tt.push(this.CreateFromMorphTargetSequence(nt,ne[nt],$,ee));return tt}},{key:"parseAnimation",value:function parseAnimation(X,$){if(!X)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var ee=function r(X,$,ee,ne,ae){if(0!==ee.length){var de=[],fe=[];Jy.flattenJSON(ee,de,fe,ne),0!==de.length&&ae.push(new X($,de,fe))}},ne=[],ae=X.name||"default",de=X.fps||30,fe=X.blendMode,Ue=X.length||-1,je=X.hierarchy||[],Ke=0;Ke<je.length;Ke++){var et=je[Ke].keys;if(et&&0!==et.length)if(et[0].morphTargets){var tt={},nt=void 0;for(nt=0;nt<et.length;nt++)if(et[nt].morphTargets)for(var it=0;it<et[nt].morphTargets.length;it++)tt[et[nt].morphTargets[it]]=-1;for(var ct in tt){for(var dt=[],vt=[],gt=0;gt!==et[nt].morphTargets.length;++gt){var yt=et[nt];dt.push(yt.time),vt.push(yt.morphTarget===ct?1:0)}ne.push(new pb(".morphTargetInfluence["+ct+"]",dt,vt))}Ue=tt.length*de}else{var _t=".bones["+$[Ke].name+"]";ee(Nb,_t+".position",et,"pos",ne),ee(kb,_t+".quaternion",et,"rot",ne),ee(Nb,_t+".scale",et,"scl",ne)}}return 0===ne.length?null:new this(ae,Ue,ne,fe)}}]),Uf}();function o2(X){if(void 0===X.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var $=function s2(X){switch(X.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return pb;case"vector":case"vector2":case"vector3":case"vector4":return Nb;case"color":return cb;case"quaternion":return kb;case"bool":case"boolean":return lb;case"string":return zb}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+X)}(X.type);if(void 0===X.times){var ee=[],ne=[];Jy.flattenJSON(X.keys,ee,ne,"value"),X.times=ee,X.values=ne}return void 0!==$.parse?$.parse(X):new $(X.name,X.times,X.values,X.interpolation)}var Qb={enabled:!1,files:{},add:function add(X,$){!1!==this.enabled&&(this.files[X]=$)},get:function get(X){if(!1!==this.enabled)return this.files[X]},remove:function remove(X){delete this.files[X]},clear:function clear(){this.files={}}},Kb=_createClass((function No(X,$,ee){_classCallCheck(this,No);var ne,ae=this,de=!1,fe=0,Ue=0,je=[];this.onStart=void 0,this.onLoad=X,this.onProgress=$,this.onError=ee,this.itemStart=function(X){Ue++,!1===de&&void 0!==ae.onStart&&ae.onStart(X,fe,Ue),de=!0},this.itemEnd=function(X){fe++,void 0!==ae.onProgress&&ae.onProgress(X,fe,Ue),fe===Ue&&(de=!1,void 0!==ae.onLoad&&ae.onLoad())},this.itemError=function(X){void 0!==ae.onError&&ae.onError(X)},this.resolveURL=function(X){return ne?ne(X):X},this.setURLModifier=function(X){return ne=X,this},this.addHandler=function(X,$){return je.push(X,$),this},this.removeHandler=function(X){var $=je.indexOf(X);return-1!==$&&je.splice($,2),this},this.getHandler=function(X){for(var $=0,ee=je.length;$<ee;$+=2){var ne=je[$],ae=je[$+1];if(ne.global&&(ne.lastIndex=0),ne.test(X))return ae}return null}})),$b=new Kb,tx=function(){function cn(X){_classCallCheck(this,cn),this.manager=void 0!==X?X:$b,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}return _createClass(cn,[{key:"load",value:function load(){}},{key:"loadAsync",value:function loadAsync(X,$){var ee=this;return new Promise((function(ne,ae){ee.load(X,ne,$,ae)}))}},{key:"parse",value:function parse(){}},{key:"setCrossOrigin",value:function setCrossOrigin(X){return this.crossOrigin=X,this}},{key:"setWithCredentials",value:function setWithCredentials(X){return this.withCredentials=X,this}},{key:"setPath",value:function setPath(X){return this.path=X,this}},{key:"setResourcePath",value:function setResourcePath(X){return this.resourcePath=X,this}},{key:"setRequestHeader",value:function setRequestHeader(X){return this.requestHeader=X,this}}]),cn}(),ux={},hx=function(X){_inherits(as,X);var $=_createSuper(as);function as(X){return _classCallCheck(this,as),$.call(this,X)}return _createClass(as,[{key:"load",value:function load(X,$,ee,ne){var ae=this;void 0===X&&(X=""),void 0!==this.path&&(X=this.path+X),X=this.manager.resolveURL(X);var de=Qb.get(X);if(void 0!==de)return this.manager.itemStart(X),setTimeout((function(){$&&$(de),ae.manager.itemEnd(X)}),0),de;if(void 0===ux[X]){ux[X]=[],ux[X].push({onLoad:$,onProgress:ee,onError:ne});var fe=new Request(X,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),Ue=this.mimeType,je=this.responseType;fetch(fe).then((function($){if(200===$.status||0===$.status){if(0===$.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||void 0===$.body||void 0===$.body.getReader)return $;var ee=ux[X],ne=$.body.getReader(),ae=$.headers.get("Content-Length"),de=ae?parseInt(ae):0,fe=0!==de,Ue=0,je=new ReadableStream({start:function start(X){!function y(){ne.read().then((function($){var ne=$.done,ae=$.value;if(ne)X.close();else{Ue+=ae.byteLength;for(var je=new ProgressEvent("progress",{lengthComputable:fe,loaded:Ue,total:de}),Ke=0,et=ee.length;Ke<et;Ke++){var tt=ee[Ke];tt.onProgress&&tt.onProgress(je)}X.enqueue(ae),y()}}))}()}});return new Response(je)}throw Error('fetch for "'.concat($.url,'" responded with ').concat($.status,": ").concat($.statusText))})).then((function(X){switch(je){case"arraybuffer":return X.arrayBuffer();case"blob":return X.blob();case"document":return X.text().then((function(X){return(new DOMParser).parseFromString(X,Ue)}));case"json":return X.json();default:if(void 0===Ue)return X.text();var $=/charset="?([^;"\s]*)"?/i.exec(Ue),ee=$&&$[1]?$[1].toLowerCase():void 0,ne=new TextDecoder(ee);return X.arrayBuffer().then((function(X){return ne.decode(X)}))}})).then((function($){Qb.add(X,$);var ee=ux[X];delete ux[X];for(var ne=0,ae=ee.length;ne<ae;ne++){var de=ee[ne];de.onLoad&&de.onLoad($)}})).catch((function($){var ee=ux[X];if(void 0===ee)throw ae.manager.itemError(X),$;delete ux[X];for(var ne=0,de=ee.length;ne<de;ne++){var fe=ee[ne];fe.onError&&fe.onError($)}ae.manager.itemError(X)})).finally((function(){ae.manager.itemEnd(X)})),this.manager.itemStart(X)}else ux[X].push({onLoad:$,onProgress:ee,onError:ne})}},{key:"setResponseType",value:function setResponseType(X){return this.responseType=X,this}},{key:"setMimeType",value:function setMimeType(X){return this.mimeType=X,this}}]),as}(tx),fx=function(X){_inherits(zf,X);var $=_createSuper(zf);function zf(X){return _classCallCheck(this,zf),$.call(this,X)}return _createClass(zf,[{key:"load",value:function load(X,$,ee,ne){void 0!==this.path&&(X=this.path+X),X=this.manager.resolveURL(X);var ae=this,de=Qb.get(X);if(void 0!==de)return ae.manager.itemStart(X),setTimeout((function(){$&&$(de),ae.manager.itemEnd(X)}),0),de;var fe=jc("img");function l(){h(),Qb.add(X,this),$&&$(this),ae.manager.itemEnd(X)}function c($){h(),ne&&ne($),ae.manager.itemError(X),ae.manager.itemEnd(X)}function h(){fe.removeEventListener("load",l,!1),fe.removeEventListener("error",c,!1)}return fe.addEventListener("load",l,!1),fe.addEventListener("error",c,!1),"data:"!==X.slice(0,5)&&void 0!==this.crossOrigin&&(fe.crossOrigin=this.crossOrigin),ae.manager.itemStart(X),fe.src=X,fe}}]),zf}(tx),vx=function(X){_inherits(Lg,X);var $=_createSuper(Lg);function Lg(X){return _classCallCheck(this,Lg),$.call(this,X)}return _createClass(Lg,[{key:"load",value:function load(X,$,ee,ne){var ae=new vd,de=new fx(this.manager);de.setCrossOrigin(this.crossOrigin),de.setPath(this.path);var fe=0;function l(ee){de.load(X[ee],(function(X){ae.images[ee]=X,6===++fe&&(ae.needsUpdate=!0,$&&$(ae))}),void 0,ne)}for(var Ue=0;Ue<X.length;++Ue)l(Ue);return ae}}]),Lg}(tx),mx=function(X){_inherits(Ig,X);var $=_createSuper(Ig);function Ig(X){return _classCallCheck(this,Ig),$.call(this,X)}return _createClass(Ig,[{key:"load",value:function load(X,$,ee,ne){var ae=new eo,de=new fx(this.manager);return de.setCrossOrigin(this.crossOrigin),de.setPath(this.path),de.load(X,(function(X){ae.image=X,ae.needsUpdate=!0,void 0!==$&&$(ae)}),ee,ne),ae}}]),Ig}(tx),gx=function(X){_inherits(bn,X);var $=_createSuper(bn);function bn(X){var ee,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return _classCallCheck(this,bn),(ee=$.call(this)).type="Light",ee.color=new Ma(X),ee.intensity=ne,ee}return _createClass(bn,[{key:"dispose",value:function dispose(){}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(bn.prototype),"copy",this).call(this,X),this.color.copy(X.color),this.intensity=X.intensity,this}},{key:"toJSON",value:function toJSON(X){var $=_get(_getPrototypeOf(bn.prototype),"toJSON",this).call(this,X);return $.object.color=this.color.getHex(),$.object.intensity=this.intensity,void 0!==this.groundColor&&($.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&($.object.distance=this.distance),void 0!==this.angle&&($.object.angle=this.angle),void 0!==this.decay&&($.object.decay=this.decay),void 0!==this.penumbra&&($.object.penumbra=this.penumbra),void 0!==this.shadow&&($.object.shadow=this.shadow.toJSON()),$}}]),bn}(ru);gx.prototype.isLight=!0;var yx=function(X){_inherits(Hs,X);var $=_createSuper(Hs);function Hs(X,ee,ne){var ae;return _classCallCheck(this,Hs),(ae=$.call(this,X,ne)).type="HemisphereLight",ae.position.copy(ru.DefaultUp),ae.updateMatrix(),ae.groundColor=new Ma(ee),ae}return _createClass(Hs,[{key:"copy",value:function copy(X){return gx.prototype.copy.call(this,X),this.groundColor.copy(X.groundColor),this}}]),Hs}(gx);yx.prototype.isHemisphereLight=!0;var bx=new Ds,_x=new wo,kx=new wo,Cx=function(){function oh(X){_classCallCheck(this,oh),this.camera=X,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new va(512,512),this.map=null,this.mapPass=null,this.matrix=new Ds,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Od,this._frameExtents=new va(1,1),this._viewportCount=1,this._viewports=[new to(0,0,1,1)]}return _createClass(oh,[{key:"getViewportCount",value:function getViewportCount(){return this._viewportCount}},{key:"getFrustum",value:function getFrustum(){return this._frustum}},{key:"updateMatrices",value:function updateMatrices(X){var $=this.camera,ee=this.matrix;_x.setFromMatrixPosition(X.matrixWorld),$.position.copy(_x),kx.setFromMatrixPosition(X.target.matrixWorld),$.lookAt(kx),$.updateMatrixWorld(),bx.multiplyMatrices($.projectionMatrix,$.matrixWorldInverse),this._frustum.setFromProjectionMatrix(bx),ee.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),ee.multiply($.projectionMatrix),ee.multiply($.matrixWorldInverse)}},{key:"getViewport",value:function getViewport(X){return this._viewports[X]}},{key:"getFrameExtents",value:function getFrameExtents(){return this._frameExtents}},{key:"dispose",value:function dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}},{key:"copy",value:function copy(X){return this.camera=X.camera.clone(),this.bias=X.bias,this.radius=X.radius,this.mapSize.copy(X.mapSize),this}},{key:"clone",value:function clone(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function toJSON(){var X={};return 0!==this.bias&&(X.bias=this.bias),0!==this.normalBias&&(X.normalBias=this.normalBias),1!==this.radius&&(X.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(X.mapSize=this.mapSize.toArray()),X.camera=this.camera.toJSON(!1).object,delete X.camera.matrix,X}}]),oh}(),Ax=function(X){_inherits(Gf,X);var $=_createSuper(Gf);function Gf(){var X;return _classCallCheck(this,Gf),(X=$.call(this,new cd(50,1,.5,500))).focus=1,X}return _createClass(Gf,[{key:"updateMatrices",value:function updateMatrices(X){var $=this.camera,ee=2*ha*X.angle*this.focus,ne=this.mapSize.width/this.mapSize.height,ae=X.distance||$.far;(ee!==$.fov||ne!==$.aspect||ae!==$.far)&&($.fov=ee,$.aspect=ne,$.far=ae,$.updateProjectionMatrix()),_get(_getPrototypeOf(Gf.prototype),"updateMatrices",this).call(this,X)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Gf.prototype),"copy",this).call(this,X),this.focus=X.focus,this}}]),Gf}(Cx);Ax.prototype.isSpotLightShadow=!0;var Ex=function(X){_inherits(ah,X);var $=_createSuper(ah);function ah(X,ee){var ne,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,de=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,fe=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,Ue=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;return _classCallCheck(this,ah),(ne=$.call(this,X,ee)).type="SpotLight",ne.position.copy(ru.DefaultUp),ne.updateMatrix(),ne.target=new ru,ne.distance=ae,ne.angle=de,ne.penumbra=fe,ne.decay=Ue,ne.shadow=new Ax,ne}return _createClass(ah,[{key:"power",get:function get(){return this.intensity*Math.PI},set:function set(X){this.intensity=X/Math.PI}},{key:"dispose",value:function dispose(){this.shadow.dispose()}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(ah.prototype),"copy",this).call(this,X),this.distance=X.distance,this.angle=X.angle,this.penumbra=X.penumbra,this.decay=X.decay,this.target=X.target.clone(),this.shadow=X.shadow.clone(),this}}]),ah}(gx);Ex.prototype.isSpotLight=!0;var Px=new Ds,Dx=new wo,Lx=new wo,Ox=function(X){_inherits(kf,X);var $=_createSuper(kf);function kf(){var X;return _classCallCheck(this,kf),(X=$.call(this,new cd(90,1,.5,500)))._frameExtents=new va(4,2),X._viewportCount=6,X._viewports=[new to(2,1,1,1),new to(0,1,1,1),new to(3,1,1,1),new to(1,1,1,1),new to(3,0,1,1),new to(1,0,1,1)],X._cubeDirections=[new wo(1,0,0),new wo(-1,0,0),new wo(0,0,1),new wo(0,0,-1),new wo(0,1,0),new wo(0,-1,0)],X._cubeUps=[new wo(0,1,0),new wo(0,1,0),new wo(0,1,0),new wo(0,1,0),new wo(0,0,1),new wo(0,0,-1)],X}return _createClass(kf,[{key:"updateMatrices",value:function updateMatrices(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,ee=this.camera,ne=this.matrix,ae=X.distance||ee.far;ae!==ee.far&&(ee.far=ae,ee.updateProjectionMatrix()),Dx.setFromMatrixPosition(X.matrixWorld),ee.position.copy(Dx),Lx.copy(ee.position),Lx.add(this._cubeDirections[$]),ee.up.copy(this._cubeUps[$]),ee.lookAt(Lx),ee.updateMatrixWorld(),ne.makeTranslation(-Dx.x,-Dx.y,-Dx.z),Px.multiplyMatrices(ee.projectionMatrix,ee.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Px)}}]),kf}(Cx);Ox.prototype.isPointLightShadow=!0;var Rx=function(X){_inherits(lh,X);var $=_createSuper(lh);function lh(X,ee){var ne,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,de=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return _classCallCheck(this,lh),(ne=$.call(this,X,ee)).type="PointLight",ne.distance=ae,ne.decay=de,ne.shadow=new Ox,ne}return _createClass(lh,[{key:"power",get:function get(){return 4*this.intensity*Math.PI},set:function set(X){this.intensity=X/(4*Math.PI)}},{key:"dispose",value:function dispose(){this.shadow.dispose()}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(lh.prototype),"copy",this).call(this,X),this.distance=X.distance,this.decay=X.decay,this.shadow=X.shadow.clone(),this}}]),lh}(gx);Rx.prototype.isPointLight=!0;var Bx=function(X){_inherits(Vf,X);var $=_createSuper(Vf);function Vf(){return _classCallCheck(this,Vf),$.call(this,new Ud(-5,5,5,-5,.5,500))}return _createClass(Vf)}(Cx);Bx.prototype.isDirectionalLightShadow=!0;var Ix=function(X){_inherits(ch,X);var $=_createSuper(ch);function ch(X,ee){var ne;return _classCallCheck(this,ch),(ne=$.call(this,X,ee)).type="DirectionalLight",ne.position.copy(ru.DefaultUp),ne.updateMatrix(),ne.target=new ru,ne.shadow=new Bx,ne}return _createClass(ch,[{key:"dispose",value:function dispose(){this.shadow.dispose()}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(ch.prototype),"copy",this).call(this,X),this.target=X.target.clone(),this.shadow=X.shadow.clone(),this}}]),ch}(gx);Ix.prototype.isDirectionalLight=!0;var zx=function(X){_inherits(Rg,X);var $=_createSuper(Rg);function Rg(X,ee){var ne;return _classCallCheck(this,Rg),(ne=$.call(this,X,ee)).type="AmbientLight",ne}return _createClass(Rg)}(gx);zx.prototype.isAmbientLight=!0;var Nx=function(X){_inherits(Bg,X);var $=_createSuper(Bg);function Bg(X,ee){var ne,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,de=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;return _classCallCheck(this,Bg),(ne=$.call(this,X,ee)).type="RectAreaLight",ne.width=ae,ne.height=de,ne}return _createClass(Bg,[{key:"power",get:function get(){return this.intensity*this.width*this.height*Math.PI},set:function set(X){this.intensity=X/(this.width*this.height*Math.PI)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Bg.prototype),"copy",this).call(this,X),this.width=X.width,this.height=X.height,this}},{key:"toJSON",value:function toJSON(X){var $=_get(_getPrototypeOf(Bg.prototype),"toJSON",this).call(this,X);return $.object.width=this.width,$.object.height=this.height,$}}]),Bg}(gx);Nx.prototype.isRectAreaLight=!0;var Fx=function(){function Hf(){_classCallCheck(this,Hf),this.coefficients=[];for(var X=0;X<9;X++)this.coefficients.push(new wo)}return _createClass(Hf,[{key:"set",value:function set(X){for(var $=0;$<9;$++)this.coefficients[$].copy(X[$]);return this}},{key:"zero",value:function zero(){for(var X=0;X<9;X++)this.coefficients[X].set(0,0,0);return this}},{key:"getAt",value:function getAt(X,$){var ee=X.x,ne=X.y,ae=X.z,de=this.coefficients;return $.copy(de[0]).multiplyScalar(.282095),$.addScaledVector(de[1],.488603*ne),$.addScaledVector(de[2],.488603*ae),$.addScaledVector(de[3],.488603*ee),$.addScaledVector(de[4],ee*ne*1.092548),$.addScaledVector(de[5],ne*ae*1.092548),$.addScaledVector(de[6],.315392*(3*ae*ae-1)),$.addScaledVector(de[7],ee*ae*1.092548),$.addScaledVector(de[8],.546274*(ee*ee-ne*ne)),$}},{key:"getIrradianceAt",value:function getIrradianceAt(X,$){var ee=X.x,ne=X.y,ae=X.z,de=this.coefficients;return $.copy(de[0]).multiplyScalar(.886227),$.addScaledVector(de[1],1.023328*ne),$.addScaledVector(de[2],1.023328*ae),$.addScaledVector(de[3],1.023328*ee),$.addScaledVector(de[4],.858086*ee*ne),$.addScaledVector(de[5],.858086*ne*ae),$.addScaledVector(de[6],.743125*ae*ae-.247708),$.addScaledVector(de[7],.858086*ee*ae),$.addScaledVector(de[8],.429043*(ee*ee-ne*ne)),$}},{key:"add",value:function add(X){for(var $=0;$<9;$++)this.coefficients[$].add(X.coefficients[$]);return this}},{key:"addScaledSH",value:function addScaledSH(X,$){for(var ee=0;ee<9;ee++)this.coefficients[ee].addScaledVector(X.coefficients[ee],$);return this}},{key:"scale",value:function scale(X){for(var $=0;$<9;$++)this.coefficients[$].multiplyScalar(X);return this}},{key:"lerp",value:function lerp(X,$){for(var ee=0;ee<9;ee++)this.coefficients[ee].lerp(X.coefficients[ee],$);return this}},{key:"equals",value:function equals(X){for(var $=0;$<9;$++)if(!this.coefficients[$].equals(X.coefficients[$]))return!1;return!0}},{key:"copy",value:function copy(X){return this.set(X.coefficients)}},{key:"clone",value:function clone(){return(new this.constructor).copy(this)}},{key:"fromArray",value:function fromArray(X){for(var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,ee=this.coefficients,ne=0;ne<9;ne++)ee[ne].fromArray(X,$+3*ne);return this}},{key:"toArray",value:function toArray(){for(var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],$=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,ee=this.coefficients,ne=0;ne<9;ne++)ee[ne].toArray(X,$+3*ne);return X}}],[{key:"getBasisAt",value:function getBasisAt(X,$){var ee=X.x,ne=X.y,ae=X.z;$[0]=.282095,$[1]=.488603*ne,$[2]=.488603*ae,$[3]=.488603*ee,$[4]=1.092548*ee*ne,$[5]=1.092548*ne*ae,$[6]=.315392*(3*ae*ae-1),$[7]=1.092548*ee*ae,$[8]=.546274*(ee*ee-ne*ne)}}]),Hf}();Fx.prototype.isSphericalHarmonics3=!0;var Ux=function(X){_inherits(hh,X);var $=_createSuper(hh);function hh(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Fx,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return _classCallCheck(this,hh),(X=$.call(this,void 0,ne)).sh=ee,X}return _createClass(hh,[{key:"copy",value:function copy(X){return _get(_getPrototypeOf(hh.prototype),"copy",this).call(this,X),this.sh.copy(X.sh),this}},{key:"fromJSON",value:function fromJSON(X){return this.intensity=X.intensity,this.sh.fromArray(X.sh),this}},{key:"toJSON",value:function toJSON(X){var $=_get(_getPrototypeOf(hh.prototype),"toJSON",this).call(this,X);return $.object.sh=this.sh.toArray(),$}}]),hh}(gx);Ux.prototype.isLightProbe=!0;var Vx=function(){function Ng(){_classCallCheck(this,Ng)}return _createClass(Ng,null,[{key:"decodeText",value:function decodeText(X){if(typeof TextDecoder<"u")return(new TextDecoder).decode(X);for(var $="",ee=0,ne=X.length;ee<ne;ee++)$+=String.fromCharCode(X[ee]);try{return decodeURIComponent(escape($))}catch(ae){return $}}},{key:"extractUrlBase",value:function extractUrlBase(X){var $=X.lastIndexOf("/");return-1===$?"./":X.slice(0,$+1)}},{key:"resolveURL",value:function resolveURL(X,$){return"string"!=typeof X||""===X?"":(/^https?:\/\//i.test($)&&/^\//.test(X)&&($=$.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(X)||/^data:.*,.*$/i.test(X)||/^blob:.*$/i.test(X)?X:$+X)}}]),Ng}(),Hx=function(X){_inherits(Wf,X);var $=_createSuper(Wf);function Wf(){var X;return _classCallCheck(this,Wf),(X=$.call(this)).type="InstancedBufferGeometry",X.instanceCount=1/0,X}return _createClass(Wf,[{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Wf.prototype),"copy",this).call(this,X),this.instanceCount=X.instanceCount,this}},{key:"clone",value:function clone(){return(new this.constructor).copy(this)}},{key:"toJSON",value:function toJSON(){var X=_get(_getPrototypeOf(Wf.prototype),"toJSON",this).call(this,this);return X.instanceCount=this.instanceCount,X.isInstancedBufferGeometry=!0,X}}]),Wf}(Wu);Hx.prototype.isInstancedBufferGeometry=!0;var jx=function(X){_inherits(Ws,X);var $=_createSuper(Ws);function Ws(X){return _classCallCheck(this,Ws),$.call(this,X)}return _createClass(Ws,[{key:"load",value:function load(X,$,ee,ne){var ae=this,de=new hx(ae.manager);de.setPath(ae.path),de.setRequestHeader(ae.requestHeader),de.setWithCredentials(ae.withCredentials),de.load(X,(function(ee){try{$(ae.parse(JSON.parse(ee)))}catch(lD){ne?ne(lD):console.error(lD),ae.manager.itemError(X)}}),ee,ne)}},{key:"parse",value:function parse(X){var $={},ee={};function n(X,ne){if(void 0!==$[ne])return $[ne];var ae=X.interleavedBuffers[ne],de=function s(X,$){if(void 0!==ee[$])return ee[$];var ne=X.arrayBuffers[$],ae=new Uint32Array(ne).buffer;return ee[$]=ae,ae}(X,ae.buffer),fe=_u(ae.type,de),Ue=new ov(fe,ae.stride);return Ue.uuid=ae.uuid,$[ne]=Ue,Ue}var ne=X.isInstancedBufferGeometry?new Hx:new Wu,ae=X.data.index;if(void 0!==ae){var de=_u(ae.type,ae.array);ne.setIndex(new Lu(de,1))}var fe=X.data.attributes;for(var Ue in fe){var je=fe[Ue],Ke=void 0;if(je.isInterleavedBufferAttribute){var et=n(X.data,je.data);Ke=new lv(et,je.itemSize,je.offset,je.normalized)}else{var tt=_u(je.type,je.array);Ke=new(je.isInstancedBufferAttribute?xm:Lu)(tt,je.itemSize,je.normalized)}void 0!==je.name&&(Ke.name=je.name),void 0!==je.usage&&Ke.setUsage(je.usage),void 0!==je.updateRange&&(Ke.updateRange.offset=je.updateRange.offset,Ke.updateRange.count=je.updateRange.count),ne.setAttribute(Ue,Ke)}var nt=X.data.morphAttributes;if(nt)for(var it in nt){for(var ct=nt[it],dt=[],vt=0,gt=ct.length;vt<gt;vt++){var yt=ct[vt],_t=void 0;if(yt.isInterleavedBufferAttribute){var wt=n(X.data,yt.data);_t=new lv(wt,yt.itemSize,yt.offset,yt.normalized)}else{var St=_u(yt.type,yt.array);_t=new Lu(St,yt.itemSize,yt.normalized)}void 0!==yt.name&&(_t.name=yt.name),dt.push(_t)}ne.morphAttributes[it]=dt}X.data.morphTargetsRelative&&(ne.morphTargetsRelative=!0);var Ct=X.data.groups||X.data.drawcalls||X.data.offsets;if(void 0!==Ct)for(var At=0,Et=Ct.length;At!==Et;++At){var Rt=Ct[At];ne.addGroup(Rt.start,Rt.count,Rt.materialIndex)}var Bt=X.data.boundingSphere;if(void 0!==Bt){var Ht=new wo;void 0!==Bt.center&&Ht.fromArray(Bt.center),ne.boundingSphere=new _s(Ht,Bt.radius)}return X.name&&(ne.name=X.name),X.userData&&(ne.userData=X.userData),ne}}]),Ws}(tx),Gx=function(X){_inherits(Og,X);var $=_createSuper(Og);function Og(X){var ee;return _classCallCheck(this,Og),ee=$.call(this,X),typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),ee.options={premultiplyAlpha:"none"},ee}return _createClass(Og,[{key:"setOptions",value:function setOptions(X){return this.options=X,this}},{key:"load",value:function load(X,$,ee,ne){void 0===X&&(X=""),void 0!==this.path&&(X=this.path+X),X=this.manager.resolveURL(X);var ae=this,de=Qb.get(X);if(void 0!==de)return ae.manager.itemStart(X),setTimeout((function(){$&&$(de),ae.manager.itemEnd(X)}),0),de;var fe={};fe.credentials="anonymous"===this.crossOrigin?"same-origin":"include",fe.headers=this.requestHeader,fetch(X,fe).then((function(X){return X.blob()})).then((function(X){return createImageBitmap(X,Object.assign(ae.options,{colorSpaceConversion:"none"}))})).then((function(ee){Qb.add(X,ee),$&&$(ee),ae.manager.itemEnd(X)})).catch((function($){ne&&ne($),ae.manager.itemError(X),ae.manager.itemEnd(X)})),ae.manager.itemStart(X)}}]),Og}(tx);Gx.prototype.isImageBitmapLoader=!0;var Wx,qx=function getContext(){return void 0===Wx&&(Wx=new(window.AudioContext||window.webkitAudioContext)),Wx},Yx=function(X){_inherits(Fg,X);var $=_createSuper(Fg);function Fg(X){return _classCallCheck(this,Fg),$.call(this,X)}return _createClass(Fg,[{key:"load",value:function load(X,$,ee,ne){var ae=this,de=new hx(this.manager);de.setResponseType("arraybuffer"),de.setPath(this.path),de.setRequestHeader(this.requestHeader),de.setWithCredentials(this.withCredentials),de.load(X,(function(ee){try{var de=ee.slice(0);qx().decodeAudioData(de,(function(X){$(X)}))}catch(lD){ne?ne(lD):console.error(lD),ae.manager.itemError(X)}}),ee,ne)}}]),Fg}(tx),Jx=function(X){_inherits(Ug,X);var $=_createSuper(Ug);function Ug(X,ee){var ne,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;_classCallCheck(this,Ug),ne=$.call(this,void 0,ae);var de=(new Ma).set(X),fe=(new Ma).set(ee),Ue=new wo(de.r,de.g,de.b),je=new wo(fe.r,fe.g,fe.b),Ke=Math.sqrt(Math.PI),et=Ke*Math.sqrt(.75);return ne.sh.coefficients[0].copy(Ue).add(je).multiplyScalar(Ke),ne.sh.coefficients[1].copy(Ue).sub(je).multiplyScalar(et),ne}return _createClass(Ug)}(Ux);Jx.prototype.isHemisphereLightProbe=!0;var Zx=function(X){_inherits(zg,X);var $=_createSuper(zg);function zg(X){var ee,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;_classCallCheck(this,zg),ee=$.call(this,void 0,ne);var ae=(new Ma).set(X);return ee.sh.coefficients[0].set(ae.r,ae.g,ae.b).multiplyScalar(2*Math.sqrt(Math.PI)),ee}return _createClass(zg)}(Ux);Zx.prototype.isAmbientLightProbe=!0;var Xx=function(){function jf(){var X=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];_classCallCheck(this,jf),this.autoStart=X,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}return _createClass(jf,[{key:"start",value:function start(){this.startTime=ib(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}},{key:"stop",value:function stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}},{key:"getElapsedTime",value:function getElapsedTime(){return this.getDelta(),this.elapsedTime}},{key:"getDelta",value:function getDelta(){var X=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var $=ib();X=($-this.oldTime)/1e3,this.oldTime=$,this.elapsedTime+=X}return X}}]),jf}();function ib(){return(typeof performance>"u"?Date:performance).now()}var Qx=function(X){_inherits(Gg,X);var $=_createSuper(Gg);function Gg(X){var ee;return _classCallCheck(this,Gg),(ee=$.call(this)).type="Audio",ee.listener=X,ee.context=X.context,ee.gain=ee.context.createGain(),ee.gain.connect(X.getInput()),ee.autoplay=!1,ee.buffer=null,ee.detune=0,ee.loop=!1,ee.loopStart=0,ee.loopEnd=0,ee.offset=0,ee.duration=void 0,ee.playbackRate=1,ee.isPlaying=!1,ee.hasPlaybackControl=!0,ee.source=null,ee.sourceType="empty",ee._startedAt=0,ee._progress=0,ee._connected=!1,ee.filters=[],ee}return _createClass(Gg,[{key:"getOutput",value:function getOutput(){return this.gain}},{key:"setNodeSource",value:function setNodeSource(X){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=X,this.connect(),this}},{key:"setMediaElementSource",value:function setMediaElementSource(X){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(X),this.connect(),this}},{key:"setMediaStreamSource",value:function setMediaStreamSource(X){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(X),this.connect(),this}},{key:"setBuffer",value:function setBuffer(X){return this.buffer=X,this.sourceType="buffer",this.autoplay&&this.play(),this}},{key:"play",value:function play(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){this._startedAt=this.context.currentTime+X;var $=this.context.createBufferSource();return $.buffer=this.buffer,$.loop=this.loop,$.loopStart=this.loopStart,$.loopEnd=this.loopEnd,$.onended=this.onEnded.bind(this),$.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=$,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")}},{key:"pause",value:function pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"stop",value:function stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"connect",value:function connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var X=1,$=this.filters.length;X<$;X++)this.filters[X-1].connect(this.filters[X]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}},{key:"disconnect",value:function disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var X=1,$=this.filters.length;X<$;X++)this.filters[X-1].disconnect(this.filters[X]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}},{key:"getFilters",value:function getFilters(){return this.filters}},{key:"setFilters",value:function setFilters(X){return X||(X=[]),!0===this._connected?(this.disconnect(),this.filters=X.slice(),this.connect()):this.filters=X.slice(),this}},{key:"setDetune",value:function setDetune(X){if(this.detune=X,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}},{key:"getDetune",value:function getDetune(){return this.detune}},{key:"getFilter",value:function getFilter(){return this.getFilters()[0]}},{key:"setFilter",value:function setFilter(X){return this.setFilters(X?[X]:[])}},{key:"setPlaybackRate",value:function setPlaybackRate(X){if(!1!==this.hasPlaybackControl)return this.playbackRate=X,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"getPlaybackRate",value:function getPlaybackRate(){return this.playbackRate}},{key:"onEnded",value:function onEnded(){this.isPlaying=!1}},{key:"getLoop",value:function getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}},{key:"setLoop",value:function setLoop(X){if(!1!==this.hasPlaybackControl)return this.loop=X,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}},{key:"setLoopStart",value:function setLoopStart(X){return this.loopStart=X,this}},{key:"setLoopEnd",value:function setLoopEnd(X){return this.loopEnd=X,this}},{key:"getVolume",value:function getVolume(){return this.gain.gain.value}},{key:"setVolume",value:function setVolume(X){return this.gain.gain.setTargetAtTime(X,this.context.currentTime,.01),this}}]),Gg}(ru),Kx=function(){function kg(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;_classCallCheck(this,kg),this.analyser=X.context.createAnalyser(),this.analyser.fftSize=$,this.data=new Uint8Array(this.analyser.frequencyBinCount),X.getOutput().connect(this.analyser)}return _createClass(kg,[{key:"getFrequencyData",value:function getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}},{key:"getAverageFrequency",value:function getAverageFrequency(){for(var X=0,$=this.getFrequencyData(),ee=0;ee<$.length;ee++)X+=$[ee];return X/$.length}}]),kg}(),$x=function(){function Vg(X,$,ee){var ne,ae,de;switch(_classCallCheck(this,Vg),this.binding=X,this.valueSize=ee,$){case"quaternion":ne=this._slerp,ae=this._slerpAdditive,de=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*ee),this._workIndex=5;break;case"string":case"bool":ne=this._select,ae=this._select,de=this._setAdditiveIdentityOther,this.buffer=new Array(5*ee);break;default:ne=this._lerp,ae=this._lerpAdditive,de=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*ee)}this._mixBufferRegion=ne,this._mixBufferRegionAdditive=ae,this._setIdentity=de,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}return _createClass(Vg,[{key:"accumulate",value:function accumulate(X,$){var ee=this.buffer,ne=this.valueSize,ae=X*ne+ne,de=this.cumulativeWeight;if(0===de){for(var fe=0;fe!==ne;++fe)ee[ae+fe]=ee[fe];de=$}else{var Ue=$/(de+=$);this._mixBufferRegion(ee,ae,0,Ue,ne)}this.cumulativeWeight=de}},{key:"accumulateAdditive",value:function accumulateAdditive(X){var $=this.buffer,ee=this.valueSize,ne=ee*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive($,ne,0,X,ee),this.cumulativeWeightAdditive+=X}},{key:"apply",value:function apply(X){var $=this.valueSize,ee=this.buffer,ne=X*$+$,ae=this.cumulativeWeight,de=this.cumulativeWeightAdditive,fe=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,ae<1){var Ue=$*this._origIndex;this._mixBufferRegion(ee,ne,Ue,1-ae,$)}de>0&&this._mixBufferRegionAdditive(ee,ne,this._addIndex*$,1,$);for(var je=$,Ke=$+$;je!==Ke;++je)if(ee[je]!==ee[je+$]){fe.setValue(ee,ne);break}}},{key:"saveOriginalState",value:function saveOriginalState(){var X=this.binding,$=this.buffer,ee=this.valueSize,ne=ee*this._origIndex;X.getValue($,ne);for(var ae=ee,de=ne;ae!==de;++ae)$[ae]=$[ne+ae%ee];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}},{key:"restoreOriginalState",value:function restoreOriginalState(){var X=3*this.valueSize;this.binding.setValue(this.buffer,X)}},{key:"_setAdditiveIdentityNumeric",value:function _setAdditiveIdentityNumeric(){for(var X=this._addIndex*this.valueSize,$=X+this.valueSize,ee=X;ee<$;ee++)this.buffer[ee]=0}},{key:"_setAdditiveIdentityQuaternion",value:function _setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}},{key:"_setAdditiveIdentityOther",value:function _setAdditiveIdentityOther(){for(var X=this._origIndex*this.valueSize,$=this._addIndex*this.valueSize,ee=0;ee<this.valueSize;ee++)this.buffer[$+ee]=this.buffer[X+ee]}},{key:"_select",value:function _select(X,$,ee,ne,ae){if(ne>=.5)for(var de=0;de!==ae;++de)X[$+de]=X[ee+de]}},{key:"_slerp",value:function _slerp(X,$,ee,ne){xo.slerpFlat(X,$,X,$,X,ee,ne)}},{key:"_slerpAdditive",value:function _slerpAdditive(X,$,ee,ne,ae){var de=this._workIndex*ae;xo.multiplyQuaternionsFlat(X,de,X,$,X,ee),xo.slerpFlat(X,$,X,$,X,de,ne)}},{key:"_lerp",value:function _lerp(X,$,ee,ne,ae){for(var de=1-ne,fe=0;fe!==ae;++fe){var Ue=$+fe;X[Ue]=X[Ue]*de+X[ee+fe]*ne}}},{key:"_lerpAdditive",value:function _lerpAdditive(X,$,ee,ne,ae){for(var de=0;de!==ae;++de){var fe=$+de;X[fe]=X[fe]+X[ee+de]*ne}}}]),Vg}(),e_="\\[\\]\\.:\\/",t_=new RegExp("["+e_+"]","g"),n_="[^"+e_+"]",r_="[^"+e_.replace("\\.","")+"]",i_=/((?:WC+[\/:])*)/.source.replace("WC",n_),o_=/(WCOD+)?/.source.replace("WCOD",r_),s_=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",n_),l_=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",n_),u_=new RegExp("^"+i_+o_+s_+l_+"$"),c_=["material","materials","bones"],h_=function(){function Hg(X,$,ee){_classCallCheck(this,Hg);var ne=ee||d_.parseTrackName($);this._targetGroup=X,this._bindings=X.subscribe_($,ne)}return _createClass(Hg,[{key:"getValue",value:function getValue(X,$){this.bind();var ee=this._targetGroup.nCachedObjects_,ne=this._bindings[ee];void 0!==ne&&ne.getValue(X,$)}},{key:"setValue",value:function setValue(X,$){for(var ee=this._bindings,ne=this._targetGroup.nCachedObjects_,ae=ee.length;ne!==ae;++ne)ee[ne].setValue(X,$)}},{key:"bind",value:function bind(){for(var X=this._bindings,$=this._targetGroup.nCachedObjects_,ee=X.length;$!==ee;++$)X[$].bind()}},{key:"unbind",value:function unbind(){for(var X=this._bindings,$=this._targetGroup.nCachedObjects_,ee=X.length;$!==ee;++$)X[$].unbind()}}]),Hg}(),d_=function(){function bt(X,$,ee){_classCallCheck(this,bt),this.path=$,this.parsedPath=ee||bt.parseTrackName($),this.node=bt.findNode(X,this.parsedPath.nodeName)||X,this.rootNode=X,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}return _createClass(bt,[{key:"_getValue_unavailable",value:function _getValue_unavailable(){}},{key:"_setValue_unavailable",value:function _setValue_unavailable(){}},{key:"_getValue_direct",value:function _getValue_direct(X,$){X[$]=this.targetObject[this.propertyName]}},{key:"_getValue_array",value:function _getValue_array(X,$){for(var ee=this.resolvedProperty,ne=0,ae=ee.length;ne!==ae;++ne)X[$++]=ee[ne]}},{key:"_getValue_arrayElement",value:function _getValue_arrayElement(X,$){X[$]=this.resolvedProperty[this.propertyIndex]}},{key:"_getValue_toArray",value:function _getValue_toArray(X,$){this.resolvedProperty.toArray(X,$)}},{key:"_setValue_direct",value:function _setValue_direct(X,$){this.targetObject[this.propertyName]=X[$]}},{key:"_setValue_direct_setNeedsUpdate",value:function _setValue_direct_setNeedsUpdate(X,$){this.targetObject[this.propertyName]=X[$],this.targetObject.needsUpdate=!0}},{key:"_setValue_direct_setMatrixWorldNeedsUpdate",value:function _setValue_direct_setMatrixWorldNeedsUpdate(X,$){this.targetObject[this.propertyName]=X[$],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_array",value:function _setValue_array(X,$){for(var ee=this.resolvedProperty,ne=0,ae=ee.length;ne!==ae;++ne)ee[ne]=X[$++]}},{key:"_setValue_array_setNeedsUpdate",value:function _setValue_array_setNeedsUpdate(X,$){for(var ee=this.resolvedProperty,ne=0,ae=ee.length;ne!==ae;++ne)ee[ne]=X[$++];this.targetObject.needsUpdate=!0}},{key:"_setValue_array_setMatrixWorldNeedsUpdate",value:function _setValue_array_setMatrixWorldNeedsUpdate(X,$){for(var ee=this.resolvedProperty,ne=0,ae=ee.length;ne!==ae;++ne)ee[ne]=X[$++];this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_arrayElement",value:function _setValue_arrayElement(X,$){this.resolvedProperty[this.propertyIndex]=X[$]}},{key:"_setValue_arrayElement_setNeedsUpdate",value:function _setValue_arrayElement_setNeedsUpdate(X,$){this.resolvedProperty[this.propertyIndex]=X[$],this.targetObject.needsUpdate=!0}},{key:"_setValue_arrayElement_setMatrixWorldNeedsUpdate",value:function _setValue_arrayElement_setMatrixWorldNeedsUpdate(X,$){this.resolvedProperty[this.propertyIndex]=X[$],this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_setValue_fromArray",value:function _setValue_fromArray(X,$){this.resolvedProperty.fromArray(X,$)}},{key:"_setValue_fromArray_setNeedsUpdate",value:function _setValue_fromArray_setNeedsUpdate(X,$){this.resolvedProperty.fromArray(X,$),this.targetObject.needsUpdate=!0}},{key:"_setValue_fromArray_setMatrixWorldNeedsUpdate",value:function _setValue_fromArray_setMatrixWorldNeedsUpdate(X,$){this.resolvedProperty.fromArray(X,$),this.targetObject.matrixWorldNeedsUpdate=!0}},{key:"_getValue_unbound",value:function _getValue_unbound(X,$){this.bind(),this.getValue(X,$)}},{key:"_setValue_unbound",value:function _setValue_unbound(X,$){this.bind(),this.setValue(X,$)}},{key:"bind",value:function bind(){var X=this.node,$=this.parsedPath,ee=$.objectName,ne=$.propertyName,ae=$.propertyIndex;if(X||(X=bt.findNode(this.rootNode,$.nodeName)||this.rootNode,this.node=X),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,X){if(ee){var de=$.objectIndex;switch(ee){case"materials":if(!X.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!X.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);X=X.material.materials;break;case"bones":if(!X.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);X=X.skeleton.bones;for(var fe=0;fe<X.length;fe++)if(X[fe].name===de){de=fe;break}break;default:if(void 0===X[ee])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);X=X[ee]}if(void 0!==de){if(void 0===X[de])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,X);X=X[de]}}var Ue=X[ne];if(void 0!==Ue){var je=this.Versioning.None;this.targetObject=X,void 0!==X.needsUpdate?je=this.Versioning.NeedsUpdate:void 0!==X.matrixWorldNeedsUpdate&&(je=this.Versioning.MatrixWorldNeedsUpdate);var Ke=this.BindingType.Direct;if(void 0!==ae){if("morphTargetInfluences"===ne){if(!X.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!X.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!X.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==X.morphTargetDictionary[ae]&&(ae=X.morphTargetDictionary[ae])}Ke=this.BindingType.ArrayElement,this.resolvedProperty=Ue,this.propertyIndex=ae}else void 0!==Ue.fromArray&&void 0!==Ue.toArray?(Ke=this.BindingType.HasFromToArray,this.resolvedProperty=Ue):Array.isArray(Ue)?(Ke=this.BindingType.EntireArray,this.resolvedProperty=Ue):this.propertyName=ne;this.getValue=this.GetterByBindingType[Ke],this.setValue=this.SetterByBindingTypeAndVersioning[Ke][je]}else{var et=$.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+et+"."+ne+" but it wasn't found.",X)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")}},{key:"unbind",value:function unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}],[{key:"create",value:function create(X,$,ee){return X&&X.isAnimationObjectGroup?new bt.Composite(X,$,ee):new bt(X,$,ee)}},{key:"sanitizeNodeName",value:function sanitizeNodeName(X){return X.replace(/\s/g,"_").replace(t_,"")}},{key:"parseTrackName",value:function parseTrackName(X){var $=u_.exec(X);if(null===$)throw new Error("PropertyBinding: Cannot parse trackName: "+X);var ee={nodeName:$[2],objectName:$[3],objectIndex:$[4],propertyName:$[5],propertyIndex:$[6]},ne=ee.nodeName&&ee.nodeName.lastIndexOf(".");if(void 0!==ne&&-1!==ne){var ae=ee.nodeName.substring(ne+1);-1!==c_.indexOf(ae)&&(ee.nodeName=ee.nodeName.substring(0,ne),ee.objectName=ae)}if(null===ee.propertyName||0===ee.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+X);return ee}},{key:"findNode",value:function findNode(X,$){if(void 0===$||""===$||"."===$||-1===$||$===X.name||$===X.uuid)return X;if(X.skeleton){var ee=X.skeleton.getBoneByName($);if(void 0!==ee)return ee}if(X.children){var ne=function _r4(X){for(var ee=0;ee<X.length;ee++){var ne=X[ee];if(ne.name===$||ne.uuid===$)return ne;var ae=_r4(ne.children);if(ae)return ae}return null}(X.children);if(ne)return ne}return null}}]),bt}();d_.Composite=h_,d_.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},d_.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},d_.prototype.GetterByBindingType=[d_.prototype._getValue_direct,d_.prototype._getValue_array,d_.prototype._getValue_arrayElement,d_.prototype._getValue_toArray],d_.prototype.SetterByBindingTypeAndVersioning=[[d_.prototype._setValue_direct,d_.prototype._setValue_direct_setNeedsUpdate,d_.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[d_.prototype._setValue_array,d_.prototype._setValue_array_setNeedsUpdate,d_.prototype._setValue_array_setMatrixWorldNeedsUpdate],[d_.prototype._setValue_arrayElement,d_.prototype._setValue_arrayElement_setNeedsUpdate,d_.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[d_.prototype._setValue_fromArray,d_.prototype._setValue_fromArray_setNeedsUpdate,d_.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];var p_=function(){function Wg(){_classCallCheck(this,Wg),this.uuid=Un(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var X={};this._indicesByUUID=X;for(var $=0,ee=arguments.length;$!==ee;++$)X[arguments[$].uuid]=$;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var ne=this;this.stats={objects:{get total(){return ne._objects.length},get inUse(){return this.total-ne.nCachedObjects_}},get bindingsPerObject(){return ne._bindings.length}}}return _createClass(Wg,[{key:"add",value:function add(){for(var X,$=this._objects,ee=this._indicesByUUID,ne=this._paths,ae=this._parsedPaths,de=this._bindings,fe=de.length,Ue=$.length,je=this.nCachedObjects_,Ke=0,et=arguments.length;Ke!==et;++Ke){var tt=arguments[Ke],nt=tt.uuid,it=ee[nt];if(void 0===it){it=Ue++,ee[nt]=it,$.push(tt);for(var ct=0,dt=fe;ct!==dt;++ct)de[ct].push(new d_(tt,ne[ct],ae[ct]))}else if(it<je){X=$[it];var vt=--je,gt=$[vt];ee[gt.uuid]=it,$[it]=gt,ee[nt]=vt,$[vt]=tt;for(var yt=0,_t=fe;yt!==_t;++yt){var wt=de[yt],St=wt[vt],Ct=wt[it];wt[it]=St,void 0===Ct&&(Ct=new d_(tt,ne[yt],ae[yt])),wt[vt]=Ct}}else $[it]!==X&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=je}},{key:"remove",value:function remove(){for(var X=this._objects,$=this._indicesByUUID,ee=this._bindings,ne=ee.length,ae=this.nCachedObjects_,de=0,fe=arguments.length;de!==fe;++de){var Ue=arguments[de],je=Ue.uuid,Ke=$[je];if(void 0!==Ke&&Ke>=ae){var et=ae++,tt=X[et];$[tt.uuid]=Ke,X[Ke]=tt,$[je]=et,X[et]=Ue;for(var nt=0,it=ne;nt!==it;++nt){var ct=ee[nt],dt=ct[et],vt=ct[Ke];ct[Ke]=dt,ct[et]=vt}}}this.nCachedObjects_=ae}},{key:"uncache",value:function uncache(){for(var X=this._objects,$=this._indicesByUUID,ee=this._bindings,ne=ee.length,ae=this.nCachedObjects_,de=X.length,fe=0,Ue=arguments.length;fe!==Ue;++fe){var je=arguments[fe],Ke=je.uuid,et=$[Ke];if(void 0!==et)if(delete $[Ke],et<ae){var tt=--ae,nt=X[tt],it=--de,ct=X[it];$[nt.uuid]=et,X[et]=nt,$[ct.uuid]=tt,X[tt]=ct,X.pop();for(var dt=0,vt=ne;dt!==vt;++dt){var gt=ee[dt],yt=gt[tt],_t=gt[it];gt[et]=yt,gt[tt]=_t,gt.pop()}}else{var wt=--de,St=X[wt];wt>0&&($[St.uuid]=et),X[et]=St,X.pop();for(var Ct=0,At=ne;Ct!==At;++Ct){var Et=ee[Ct];Et[et]=Et[wt],Et.pop()}}}this.nCachedObjects_=ae}},{key:"subscribe_",value:function subscribe_(X,$){var ee=this._bindingsIndicesByPath,ne=ee[X],ae=this._bindings;if(void 0!==ne)return ae[ne];var de=this._paths,fe=this._parsedPaths,Ue=this._objects,je=Ue.length,Ke=this.nCachedObjects_,et=new Array(je);ne=ae.length,ee[X]=ne,de.push(X),fe.push($),ae.push(et);for(var tt=Ke,nt=Ue.length;tt!==nt;++tt){var it=Ue[tt];et[tt]=new d_(it,X,$)}return et}},{key:"unsubscribe_",value:function unsubscribe_(X){var $=this._bindingsIndicesByPath,ee=$[X];if(void 0!==ee){var ne=this._paths,ae=this._parsedPaths,de=this._bindings,fe=de.length-1,Ue=de[fe];$[X[fe]]=ee,de[ee]=Ue,de.pop(),ae[ee]=ae[fe],ae.pop(),ne[ee]=ne[fe],ne.pop()}}}]),Wg}();p_.prototype.isAnimationObjectGroup=!0;var v_=function(){function jg(X,$){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,ne=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$.blendMode;_classCallCheck(this,jg),this._mixer=X,this._clip=$,this._localRoot=ee,this.blendMode=ne;for(var ae=$.tracks,de=ae.length,fe=new Array(de),Ue={endingStart:Br,endingEnd:Br},je=0;je!==de;++je){var Ke=ae[je].createInterpolant(null);fe[je]=Ke,Ke.settings=Ue}this._interpolantSettings=Ue,this._interpolants=fe,this._propertyBindings=new Array(de),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}return _createClass(jg,[{key:"play",value:function play(){return this._mixer._activateAction(this),this}},{key:"stop",value:function stop(){return this._mixer._deactivateAction(this),this.reset()}},{key:"reset",value:function reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}},{key:"isRunning",value:function isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}},{key:"isScheduled",value:function isScheduled(){return this._mixer._isActiveAction(this)}},{key:"startAt",value:function startAt(X){return this._startTime=X,this}},{key:"setLoop",value:function setLoop(X,$){return this.loop=X,this.repetitions=$,this}},{key:"setEffectiveWeight",value:function setEffectiveWeight(X){return this.weight=X,this._effectiveWeight=this.enabled?X:0,this.stopFading()}},{key:"getEffectiveWeight",value:function getEffectiveWeight(){return this._effectiveWeight}},{key:"fadeIn",value:function fadeIn(X){return this._scheduleFading(X,0,1)}},{key:"fadeOut",value:function fadeOut(X){return this._scheduleFading(X,1,0)}},{key:"crossFadeFrom",value:function crossFadeFrom(X,$,ee){if(X.fadeOut($),this.fadeIn($),ee){var ne=this._clip.duration,ae=X._clip.duration,de=ae/ne,fe=ne/ae;X.warp(1,de,$),this.warp(fe,1,$)}return this}},{key:"crossFadeTo",value:function crossFadeTo(X,$,ee){return X.crossFadeFrom(this,$,ee)}},{key:"stopFading",value:function stopFading(){var X=this._weightInterpolant;return null!==X&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(X)),this}},{key:"setEffectiveTimeScale",value:function setEffectiveTimeScale(X){return this.timeScale=X,this._effectiveTimeScale=this.paused?0:X,this.stopWarping()}},{key:"getEffectiveTimeScale",value:function getEffectiveTimeScale(){return this._effectiveTimeScale}},{key:"setDuration",value:function setDuration(X){return this.timeScale=this._clip.duration/X,this.stopWarping()}},{key:"syncWith",value:function syncWith(X){return this.time=X.time,this.timeScale=X.timeScale,this.stopWarping()}},{key:"halt",value:function halt(X){return this.warp(this._effectiveTimeScale,0,X)}},{key:"warp",value:function warp(X,$,ee){var ne=this._mixer,ae=ne.time,de=this.timeScale,fe=this._timeScaleInterpolant;null===fe&&(fe=ne._lendControlInterpolant(),this._timeScaleInterpolant=fe);var Ue=fe.parameterPositions,je=fe.sampleValues;return Ue[0]=ae,Ue[1]=ae+ee,je[0]=X/de,je[1]=$/de,this}},{key:"stopWarping",value:function stopWarping(){var X=this._timeScaleInterpolant;return null!==X&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(X)),this}},{key:"getMixer",value:function getMixer(){return this._mixer}},{key:"getClip",value:function getClip(){return this._clip}},{key:"getRoot",value:function getRoot(){return this._localRoot||this._mixer._root}},{key:"_update",value:function _update(X,$,ee,ne){if(this.enabled){var ae=this._startTime;if(null!==ae){var de=(X-ae)*ee;if(de<0||0===ee)return;this._startTime=null,$=ee*de}$*=this._updateTimeScale(X);var fe=this._updateTime($),Ue=this._updateWeight(X);if(Ue>0){var je=this._interpolants,Ke=this._propertyBindings;if(this.blendMode===Vr)for(var et=0,tt=je.length;et!==tt;++et)je[et].evaluate(fe),Ke[et].accumulateAdditive(Ue);else for(var nt=0,it=je.length;nt!==it;++nt)je[nt].evaluate(fe),Ke[nt].accumulate(ne,Ue)}}else this._updateWeight(X)}},{key:"_updateWeight",value:function _updateWeight(X){var $=0;if(this.enabled){$=this.weight;var ee=this._weightInterpolant;if(null!==ee){var ne=ee.evaluate(X)[0];$*=ne,X>ee.parameterPositions[1]&&(this.stopFading(),0===ne&&(this.enabled=!1))}}return this._effectiveWeight=$,$}},{key:"_updateTimeScale",value:function _updateTimeScale(X){var $=0;if(!this.paused){$=this.timeScale;var ee=this._timeScaleInterpolant;null!==ee&&($*=ee.evaluate(X)[0],X>ee.parameterPositions[1]&&(this.stopWarping(),0===$?this.paused=!0:this.timeScale=$))}return this._effectiveTimeScale=$,$}},{key:"_updateTime",value:function _updateTime(X){var $=this._clip.duration,ee=this.loop,ne=this.time+X,ae=this._loopCount,de=2202===ee;if(0===X)return-1===ae?ne:de&&1===(1&ae)?$-ne:ne;if(2200===ee){-1===ae&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(ne>=$)ne=$;else{if(!(ne<0)){this.time=ne;break e}ne=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=ne,this._mixer.dispatchEvent({type:"finished",action:this,direction:X<0?-1:1})}}else{if(-1===ae&&(X>=0?(ae=0,this._setEndings(!0,0===this.repetitions,de)):this._setEndings(0===this.repetitions,!0,de)),ne>=$||ne<0){var fe=Math.floor(ne/$);ne-=$*fe,ae+=Math.abs(fe);var Ue=this.repetitions-ae;if(Ue<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,ne=X>0?$:0,this.time=ne,this._mixer.dispatchEvent({type:"finished",action:this,direction:X>0?1:-1});else{if(1===Ue){var je=X<0;this._setEndings(je,!je,de)}else this._setEndings(!1,!1,de);this._loopCount=ae,this.time=ne,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:fe})}}else this.time=ne;if(de&&1===(1&ae))return $-ne}return ne}},{key:"_setEndings",value:function _setEndings(X,$,ee){var ne=this._interpolantSettings;ee?(ne.endingStart=Ir,ne.endingEnd=Ir):(ne.endingStart=X?this.zeroSlopeAtStart?Ir:Br:zr,ne.endingEnd=$?this.zeroSlopeAtEnd?Ir:Br:zr)}},{key:"_scheduleFading",value:function _scheduleFading(X,$,ee){var ne=this._mixer,ae=ne.time,de=this._weightInterpolant;null===de&&(de=ne._lendControlInterpolant(),this._weightInterpolant=de);var fe=de.parameterPositions,Ue=de.sampleValues;return fe[0]=ae,Ue[0]=$,fe[1]=ae+X,Ue[1]=ee,this}}]),jg}(),m_=function(X){_inherits(qg,X);var $=_createSuper(qg);function qg(X){var ee;return _classCallCheck(this,qg),(ee=$.call(this))._root=X,ee._initMemoryManager(),ee._accuIndex=0,ee.time=0,ee.timeScale=1,ee}return _createClass(qg,[{key:"_bindAction",value:function _bindAction(X,$){var ee=X._localRoot||this._root,ne=X._clip.tracks,ae=ne.length,de=X._propertyBindings,fe=X._interpolants,Ue=ee.uuid,je=this._bindingsByRootAndName,Ke=je[Ue];void 0===Ke&&(Ke={},je[Ue]=Ke);for(var et=0;et!==ae;++et){var tt=ne[et],nt=tt.name,it=Ke[nt];if(void 0!==it)++it.referenceCount,de[et]=it;else{if(void 0!==(it=de[et])){null===it._cacheIndex&&(++it.referenceCount,this._addInactiveBinding(it,Ue,nt));continue}var ct=$&&$._propertyBindings[et].binding.parsedPath;++(it=new $x(d_.create(ee,nt,ct),tt.ValueTypeName,tt.getValueSize())).referenceCount,this._addInactiveBinding(it,Ue,nt),de[et]=it}fe[et].resultBuffer=it.buffer}}},{key:"_activateAction",value:function _activateAction(X){if(!this._isActiveAction(X)){if(null===X._cacheIndex){var $=(X._localRoot||this._root).uuid,ee=X._clip.uuid,ne=this._actionsByClip[ee];this._bindAction(X,ne&&ne.knownActions[0]),this._addInactiveAction(X,ee,$)}for(var ae=X._propertyBindings,de=0,fe=ae.length;de!==fe;++de){var Ue=ae[de];0===Ue.useCount++&&(this._lendBinding(Ue),Ue.saveOriginalState())}this._lendAction(X)}}},{key:"_deactivateAction",value:function _deactivateAction(X){if(this._isActiveAction(X)){for(var $=X._propertyBindings,ee=0,ne=$.length;ee!==ne;++ee){var ae=$[ee];0===--ae.useCount&&(ae.restoreOriginalState(),this._takeBackBinding(ae))}this._takeBackAction(X)}}},{key:"_initMemoryManager",value:function _initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var X=this;this.stats={actions:{get total(){return X._actions.length},get inUse(){return X._nActiveActions}},bindings:{get total(){return X._bindings.length},get inUse(){return X._nActiveBindings}},controlInterpolants:{get total(){return X._controlInterpolants.length},get inUse(){return X._nActiveControlInterpolants}}}}},{key:"_isActiveAction",value:function _isActiveAction(X){var $=X._cacheIndex;return null!==$&&$<this._nActiveActions}},{key:"_addInactiveAction",value:function _addInactiveAction(X,$,ee){var ne=this._actions,ae=this._actionsByClip,de=ae[$];if(void 0===de)de={knownActions:[X],actionByRoot:{}},X._byClipCacheIndex=0,ae[$]=de;else{var fe=de.knownActions;X._byClipCacheIndex=fe.length,fe.push(X)}X._cacheIndex=ne.length,ne.push(X),de.actionByRoot[ee]=X}},{key:"_removeInactiveAction",value:function _removeInactiveAction(X){var $=this._actions,ee=$[$.length-1],ne=X._cacheIndex;ee._cacheIndex=ne,$[ne]=ee,$.pop(),X._cacheIndex=null;var ae=X._clip.uuid,de=this._actionsByClip,fe=de[ae],Ue=fe.knownActions,je=Ue[Ue.length-1],Ke=X._byClipCacheIndex;je._byClipCacheIndex=Ke,Ue[Ke]=je,Ue.pop(),X._byClipCacheIndex=null,delete fe.actionByRoot[(X._localRoot||this._root).uuid],0===Ue.length&&delete de[ae],this._removeInactiveBindingsForAction(X)}},{key:"_removeInactiveBindingsForAction",value:function _removeInactiveBindingsForAction(X){for(var $=X._propertyBindings,ee=0,ne=$.length;ee!==ne;++ee){var ae=$[ee];0===--ae.referenceCount&&this._removeInactiveBinding(ae)}}},{key:"_lendAction",value:function _lendAction(X){var $=this._actions,ee=X._cacheIndex,ne=this._nActiveActions++,ae=$[ne];X._cacheIndex=ne,$[ne]=X,ae._cacheIndex=ee,$[ee]=ae}},{key:"_takeBackAction",value:function _takeBackAction(X){var $=this._actions,ee=X._cacheIndex,ne=--this._nActiveActions,ae=$[ne];X._cacheIndex=ne,$[ne]=X,ae._cacheIndex=ee,$[ee]=ae}},{key:"_addInactiveBinding",value:function _addInactiveBinding(X,$,ee){var ne=this._bindingsByRootAndName,ae=this._bindings,de=ne[$];void 0===de&&(de={},ne[$]=de),de[ee]=X,X._cacheIndex=ae.length,ae.push(X)}},{key:"_removeInactiveBinding",value:function _removeInactiveBinding(X){var $=this._bindings,ee=X.binding,ne=ee.rootNode.uuid,ae=ee.path,de=this._bindingsByRootAndName,fe=de[ne],Ue=$[$.length-1],je=X._cacheIndex;Ue._cacheIndex=je,$[je]=Ue,$.pop(),delete fe[ae],0===Object.keys(fe).length&&delete de[ne]}},{key:"_lendBinding",value:function _lendBinding(X){var $=this._bindings,ee=X._cacheIndex,ne=this._nActiveBindings++,ae=$[ne];X._cacheIndex=ne,$[ne]=X,ae._cacheIndex=ee,$[ee]=ae}},{key:"_takeBackBinding",value:function _takeBackBinding(X){var $=this._bindings,ee=X._cacheIndex,ne=--this._nActiveBindings,ae=$[ne];X._cacheIndex=ne,$[ne]=X,ae._cacheIndex=ee,$[ee]=ae}},{key:"_lendControlInterpolant",value:function _lendControlInterpolant(){var X=this._controlInterpolants,$=this._nActiveControlInterpolants++,ee=X[$];return void 0===ee&&((ee=new $y(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer)).__cacheIndex=$,X[$]=ee),ee}},{key:"_takeBackControlInterpolant",value:function _takeBackControlInterpolant(X){var $=this._controlInterpolants,ee=X.__cacheIndex,ne=--this._nActiveControlInterpolants,ae=$[ne];X.__cacheIndex=ne,$[ne]=X,ae.__cacheIndex=ee,$[ee]=ae}},{key:"clipAction",value:function clipAction(X,$,ee){var ne=$||this._root,ae=ne.uuid,de="string"==typeof X?Hb.findByName(ne,X):X,fe=null!==de?de.uuid:X,Ue=this._actionsByClip[fe],je=null;if(void 0===ee&&(ee=null!==de?de.blendMode:Fr),void 0!==Ue){var Ke=Ue.actionByRoot[ae];if(void 0!==Ke&&Ke.blendMode===ee)return Ke;je=Ue.knownActions[0],null===de&&(de=je._clip)}if(null===de)return null;var et=new v_(this,de,$,ee);return this._bindAction(et,je),this._addInactiveAction(et,fe,ae),et}},{key:"existingAction",value:function existingAction(X,$){var ee=$||this._root,ne=ee.uuid,ae="string"==typeof X?Hb.findByName(ee,X):X,de=ae?ae.uuid:X,fe=this._actionsByClip[de];return void 0!==fe&&fe.actionByRoot[ne]||null}},{key:"stopAllAction",value:function stopAllAction(){for(var X=this._actions,$=this._nActiveActions-1;$>=0;--$)X[$].stop();return this}},{key:"update",value:function update(X){X*=this.timeScale;for(var $=this._actions,ee=this._nActiveActions,ne=this.time+=X,ae=Math.sign(X),de=this._accuIndex^=1,fe=0;fe!==ee;++fe)$[fe]._update(ne,X,ae,de);for(var Ue=this._bindings,je=this._nActiveBindings,Ke=0;Ke!==je;++Ke)Ue[Ke].apply(de);return this}},{key:"setTime",value:function setTime(X){this.time=0;for(var $=0;$<this._actions.length;$++)this._actions[$].time=0;return this.update(X)}},{key:"getRoot",value:function getRoot(){return this._root}},{key:"uncacheClip",value:function uncacheClip(X){var $=this._actions,ee=X.uuid,ne=this._actionsByClip,ae=ne[ee];if(void 0!==ae){for(var de=ae.knownActions,fe=0,Ue=de.length;fe!==Ue;++fe){var je=de[fe];this._deactivateAction(je);var Ke=je._cacheIndex,et=$[$.length-1];je._cacheIndex=null,je._byClipCacheIndex=null,et._cacheIndex=Ke,$[Ke]=et,$.pop(),this._removeInactiveBindingsForAction(je)}delete ne[ee]}}},{key:"uncacheRoot",value:function uncacheRoot(X){var $=X.uuid,ee=this._actionsByClip;for(var ne in ee){var ae=ee[ne].actionByRoot[$];void 0!==ae&&(this._deactivateAction(ae),this._removeInactiveAction(ae))}var de=this._bindingsByRootAndName[$];if(void 0!==de)for(var fe in de){var Ue=de[fe];Ue.restoreOriginalState(),this._removeInactiveBinding(Ue)}}},{key:"uncacheAction",value:function uncacheAction(X,$){var ee=this.existingAction(X,$);null!==ee&&(this._deactivateAction(ee),this._removeInactiveAction(ee))}}]),qg}(aa);m_.prototype._controlInterpolantsResultBuffer=new Float32Array(1);var g_=function(){function _e(X){_classCallCheck(this,_e),"string"==typeof X&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),X=arguments[1]),this.value=X}return _createClass(_e,[{key:"clone",value:function clone(){return new _e(void 0===this.value.clone?this.value:this.value.clone())}}]),_e}(),y_=function(X){_inherits(Yg,X);var $=_createSuper(Yg);function Yg(X,ee){var ne,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return _classCallCheck(this,Yg),(ne=$.call(this,X,ee)).meshPerAttribute=ae,ne}return _createClass(Yg,[{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Yg.prototype),"copy",this).call(this,X),this.meshPerAttribute=X.meshPerAttribute,this}},{key:"clone",value:function clone(X){var $=_get(_getPrototypeOf(Yg.prototype),"clone",this).call(this,X);return $.meshPerAttribute=this.meshPerAttribute,$}},{key:"toJSON",value:function toJSON(X){var $=_get(_getPrototypeOf(Yg.prototype),"toJSON",this).call(this,X);return $.isInstancedInterleavedBuffer=!0,$.meshPerAttribute=this.meshPerAttribute,$}}]),Yg}(ov);y_.prototype.isInstancedInterleavedBuffer=!0;var b_=function(){function Xg(X,$,ee,ne,ae){_classCallCheck(this,Xg),this.buffer=X,this.type=$,this.itemSize=ee,this.elementSize=ne,this.count=ae,this.version=0}return _createClass(Xg,[{key:"needsUpdate",set:function set(X){!0===X&&this.version++}},{key:"setBuffer",value:function setBuffer(X){return this.buffer=X,this}},{key:"setType",value:function setType(X,$){return this.type=X,this.elementSize=$,this}},{key:"setItemSize",value:function setItemSize(X){return this.itemSize=X,this}},{key:"setCount",value:function setCount(X){return this.count=X,this}}]),Xg}();b_.prototype.isGLBufferAttribute=!0;var x_=function(){function qf(X,$){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,ne=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;_classCallCheck(this,qf),this.ray=new Ps(X,$),this.near=ee,this.far=ne,this.camera=null,this.layers=new Ks,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}return _createClass(qf,[{key:"set",value:function set(X,$){this.ray.set(X,$)}},{key:"setFromCamera",value:function setFromCamera(X,$){$.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition($.matrixWorld),this.ray.direction.set(X.x,X.y,.5).unproject($).sub(this.ray.origin).normalize(),this.camera=$):$.isOrthographicCamera?(this.ray.origin.set(X.x,X.y,($.near+$.far)/($.near-$.far)).unproject($),this.ray.direction.set(0,0,-1).transformDirection($.matrixWorld),this.camera=$):console.error("THREE.Raycaster: Unsupported camera type: "+$.type)}},{key:"intersectObject",value:function intersectObject(X){var $=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return Qg(X,this,ee,$),ee.sort(sb),ee}},{key:"intersectObjects",value:function intersectObjects(X){for(var $=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],ne=0,ae=X.length;ne<ae;ne++)Qg(X[ne],this,ee,$);return ee.sort(sb),ee}}]),qf}();function sb(X,$){return X.distance-$.distance}function Qg(X,$,ee,ne){if(X.layers.test($.layers)&&X.raycast($,ee),!0===ne)for(var ae=X.children,de=0,fe=ae.length;de<fe;de++)Qg(ae[de],$,ee,!0)}var w_=function(){function uh(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,$=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return _classCallCheck(this,uh),this.radius=X,this.phi=$,this.theta=ee,this}return _createClass(uh,[{key:"set",value:function set(X,$,ee){return this.radius=X,this.phi=$,this.theta=ee,this}},{key:"copy",value:function copy(X){return this.radius=X.radius,this.phi=X.phi,this.theta=X.theta,this}},{key:"makeSafe",value:function makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}},{key:"setFromVector3",value:function setFromVector3(X){return this.setFromCartesianCoords(X.x,X.y,X.z)}},{key:"setFromCartesianCoords",value:function setFromCartesianCoords(X,$,ee){return this.radius=Math.sqrt(X*X+$*$+ee*ee),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(X,ee),this.phi=Math.acos(xr($/this.radius,-1,1))),this}},{key:"clone",value:function clone(){return(new this.constructor).copy(this)}}]),uh}(),S_=new va,k_=function(){function Oo(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new va(1/0,1/0),$=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new va(-1/0,-1/0);_classCallCheck(this,Oo),this.min=X,this.max=$}return _createClass(Oo,[{key:"set",value:function set(X,$){return this.min.copy(X),this.max.copy($),this}},{key:"setFromPoints",value:function setFromPoints(X){this.makeEmpty();for(var $=0,ee=X.length;$<ee;$++)this.expandByPoint(X[$]);return this}},{key:"setFromCenterAndSize",value:function setFromCenterAndSize(X,$){var ee=S_.copy($).multiplyScalar(.5);return this.min.copy(X).sub(ee),this.max.copy(X).add(ee),this}},{key:"clone",value:function clone(){return(new this.constructor).copy(this)}},{key:"copy",value:function copy(X){return this.min.copy(X.min),this.max.copy(X.max),this}},{key:"makeEmpty",value:function makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}},{key:"isEmpty",value:function isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}},{key:"getCenter",value:function getCenter(X){return this.isEmpty()?X.set(0,0):X.addVectors(this.min,this.max).multiplyScalar(.5)}},{key:"getSize",value:function getSize(X){return this.isEmpty()?X.set(0,0):X.subVectors(this.max,this.min)}},{key:"expandByPoint",value:function expandByPoint(X){return this.min.min(X),this.max.max(X),this}},{key:"expandByVector",value:function expandByVector(X){return this.min.sub(X),this.max.add(X),this}},{key:"expandByScalar",value:function expandByScalar(X){return this.min.addScalar(-X),this.max.addScalar(X),this}},{key:"containsPoint",value:function containsPoint(X){return!(X.x<this.min.x||X.x>this.max.x||X.y<this.min.y||X.y>this.max.y)}},{key:"containsBox",value:function containsBox(X){return this.min.x<=X.min.x&&X.max.x<=this.max.x&&this.min.y<=X.min.y&&X.max.y<=this.max.y}},{key:"getParameter",value:function getParameter(X,$){return $.set((X.x-this.min.x)/(this.max.x-this.min.x),(X.y-this.min.y)/(this.max.y-this.min.y))}},{key:"intersectsBox",value:function intersectsBox(X){return!(X.max.x<this.min.x||X.min.x>this.max.x||X.max.y<this.min.y||X.min.y>this.max.y)}},{key:"clampPoint",value:function clampPoint(X,$){return $.copy(X).clamp(this.min,this.max)}},{key:"distanceToPoint",value:function distanceToPoint(X){return S_.copy(X).clamp(this.min,this.max).sub(X).length()}},{key:"intersect",value:function intersect(X){return this.min.max(X.min),this.max.min(X.max),this}},{key:"union",value:function union(X){return this.min.min(X.min),this.max.max(X.max),this}},{key:"translate",value:function translate(X){return this.min.add(X),this.max.add(X),this}},{key:"equals",value:function equals(X){return X.min.equals(this.min)&&X.max.equals(this.max)}}]),Oo}();k_.prototype.isBox2=!0;var C_=new wo,A_=new wo,M_=function(){function Jr(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new wo,$=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new wo;_classCallCheck(this,Jr),this.start=X,this.end=$}return _createClass(Jr,[{key:"set",value:function set(X,$){return this.start.copy(X),this.end.copy($),this}},{key:"copy",value:function copy(X){return this.start.copy(X.start),this.end.copy(X.end),this}},{key:"getCenter",value:function getCenter(X){return X.addVectors(this.start,this.end).multiplyScalar(.5)}},{key:"delta",value:function delta(X){return X.subVectors(this.end,this.start)}},{key:"distanceSq",value:function distanceSq(){return this.start.distanceToSquared(this.end)}},{key:"distance",value:function distance(){return this.start.distanceTo(this.end)}},{key:"at",value:function at(X,$){return this.delta($).multiplyScalar(X).add(this.start)}},{key:"closestPointToPointParameter",value:function closestPointToPointParameter(X,$){C_.subVectors(X,this.start),A_.subVectors(this.end,this.start);var ee=A_.dot(A_),ne=A_.dot(C_)/ee;return $&&(ne=xr(ne,0,1)),ne}},{key:"closestPointToPoint",value:function closestPointToPoint(X,$,ee){var ne=this.closestPointToPointParameter(X,$);return this.delta(ee).multiplyScalar(ne).add(this.start)}},{key:"applyMatrix4",value:function applyMatrix4(X){return this.start.applyMatrix4(X),this.end.applyMatrix4(X),this}},{key:"equals",value:function equals(X){return X.start.equals(this.start)&&X.end.equals(this.end)}},{key:"clone",value:function clone(){return(new this.constructor).copy(this)}}]),Jr}(),E_=new wo,T_=function(X){_inherits(Yf,X);var $=_createSuper(Yf);function Yf(X,ee){var ne;_classCallCheck(this,Yf),(ne=$.call(this)).light=X,ne.light.updateMatrixWorld(),ne.matrix=X.matrixWorld,ne.matrixAutoUpdate=!1,ne.color=ee;for(var ae=new Wu,de=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],fe=0,Ue=1;fe<32;fe++,Ue++){var je=fe/32*Math.PI*2,Ke=Ue/32*Math.PI*2;de.push(Math.cos(je),Math.sin(je),1,Math.cos(Ke),Math.sin(Ke),1)}ae.setAttribute("position",new Iu(de,3));var et=new Em({fog:!1,toneMapped:!1});return ne.cone=new Nm(ae,et),ne.add(ne.cone),ne.update(),ne}return _createClass(Yf,[{key:"dispose",value:function dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}},{key:"update",value:function update(){this.light.updateMatrixWorld();var X=this.light.distance?this.light.distance:1e3,$=X*Math.tan(this.light.angle);this.cone.scale.set($,$,X),E_.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(E_),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}]),Yf}(ru),P_=new wo,D_=new Ds,L_=new Ds,O_=function(X){_inherits(Jg,X);var $=_createSuper(Jg);function Jg(X){var ee;_classCallCheck(this,Jg);for(var ne=Rb(X),ae=new Wu,de=[],fe=[],Ue=new Ma(0,0,1),je=new Ma(0,1,0),Ke=0;Ke<ne.length;Ke++){var et=ne[Ke];et.parent&&et.parent.isBone&&(de.push(0,0,0),de.push(0,0,0),fe.push(Ue.r,Ue.g,Ue.b),fe.push(je.r,je.g,je.b))}ae.setAttribute("position",new Iu(de,3)),ae.setAttribute("color",new Iu(fe,3));var tt=new Em({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});return(ee=$.call(this,ae,tt)).type="SkeletonHelper",ee.isSkeletonHelper=!0,ee.root=X,ee.bones=ne,ee.matrix=X.matrixWorld,ee.matrixAutoUpdate=!1,ee}return _createClass(Jg,[{key:"updateMatrixWorld",value:function updateMatrixWorld(X){var $=this.bones,ee=this.geometry,ne=ee.getAttribute("position");L_.copy(this.root.matrixWorld).invert();for(var ae=0,de=0;ae<$.length;ae++){var fe=$[ae];fe.parent&&fe.parent.isBone&&(D_.multiplyMatrices(L_,fe.matrixWorld),P_.setFromMatrixPosition(D_),ne.setXYZ(de,P_.x,P_.y,P_.z),D_.multiplyMatrices(L_,fe.parent.matrixWorld),P_.setFromMatrixPosition(D_),ne.setXYZ(de+1,P_.x,P_.y,P_.z),de+=2)}ee.getAttribute("position").needsUpdate=!0,_get(_getPrototypeOf(Jg.prototype),"updateMatrixWorld",this).call(this,X)}}]),Jg}(Nm);function Rb(X){var $=[];!0===X.isBone&&$.push(X);for(var ee=0;ee<X.children.length;ee++)$.push.apply($,Rb(X.children[ee]));return $}var R_=function(X){_inherits(Xf,X);var $=_createSuper(Xf);function Xf(X,ee,ne){var ae;_classCallCheck(this,Xf);var de=new Oy(ee,4,2),fe=new Mu({wireframe:!0,fog:!1,toneMapped:!1});return(ae=$.call(this,de,fe)).light=X,ae.light.updateMatrixWorld(),ae.color=ne,ae.type="PointLightHelper",ae.matrix=ae.light.matrixWorld,ae.matrixAutoUpdate=!1,ae.update(),ae}return _createClass(Xf,[{key:"dispose",value:function dispose(){this.geometry.dispose(),this.material.dispose()}},{key:"update",value:function update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}]),Xf}(Oh),B_=function(X){_inherits(Kg,X);var $=_createSuper(Kg);function Kg(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,de=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;_classCallCheck(this,Kg),ae=new Ma(ae),de=new Ma(de);for(var fe=ne/2,Ue=ee/ne,je=ee/2,Ke=[],et=[],tt=0,nt=0,it=-je;tt<=ne;tt++,it+=Ue){Ke.push(-je,0,it,je,0,it),Ke.push(it,0,-je,it,0,je);var ct=tt===fe?ae:de;ct.toArray(et,nt),nt+=3,ct.toArray(et,nt),nt+=3,ct.toArray(et,nt),nt+=3,ct.toArray(et,nt),nt+=3}var dt=new Wu;dt.setAttribute("position",new Iu(Ke,3)),dt.setAttribute("color",new Iu(et,3));var vt=new Em({vertexColors:!0,toneMapped:!1});return(X=$.call(this,dt,vt)).type="GridHelper",X}return _createClass(Kg)}(Nm),I_=new wo,z_=new wo,N_=new wo,F_=function(X){_inherits(Qf,X);var $=_createSuper(Qf);function Qf(X,ee,ne){var ae;_classCallCheck(this,Qf),(ae=$.call(this)).light=X,ae.light.updateMatrixWorld(),ae.matrix=X.matrixWorld,ae.matrixAutoUpdate=!1,ae.color=ne,void 0===ee&&(ee=1);var de=new Wu;de.setAttribute("position",new Iu([-ee,ee,0,ee,ee,0,ee,-ee,0,-ee,-ee,0,-ee,ee,0],3));var fe=new Em({fog:!1,toneMapped:!1});return ae.lightPlane=new Bm(de,fe),ae.add(ae.lightPlane),(de=new Wu).setAttribute("position",new Iu([0,0,0,0,0,1],3)),ae.targetLine=new Bm(de,fe),ae.add(ae.targetLine),ae.update(),ae}return _createClass(Qf,[{key:"dispose",value:function dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}},{key:"update",value:function update(){I_.setFromMatrixPosition(this.light.matrixWorld),z_.setFromMatrixPosition(this.light.target.matrixWorld),N_.subVectors(z_,I_),this.lightPlane.lookAt(z_),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(z_),this.targetLine.scale.z=N_.length()}}]),Qf}(ru),U_=new wo,V_=new ad,H_=function(X){_inherits(Hn,X);var $=_createSuper(Hn);function Hn(X){var ee;_classCallCheck(this,Hn);var ne=new Wu,ae=new Em({color:16777215,vertexColors:!0,toneMapped:!1}),de=[],fe=[],Ue={},je=new Ma(16755200),Ke=new Ma(16711680),et=new Ma(43775),tt=new Ma(16777215),nt=new Ma(3355443);function f(X,$,ee){d(X,ee),d($,ee)}function d(X,$){de.push(0,0,0),fe.push($.r,$.g,$.b),void 0===Ue[X]&&(Ue[X]=[]),Ue[X].push(de.length/3-1)}return f("n1","n2",je),f("n2","n4",je),f("n4","n3",je),f("n3","n1",je),f("f1","f2",je),f("f2","f4",je),f("f4","f3",je),f("f3","f1",je),f("n1","f1",je),f("n2","f2",je),f("n3","f3",je),f("n4","f4",je),f("p","n1",Ke),f("p","n2",Ke),f("p","n3",Ke),f("p","n4",Ke),f("u1","u2",et),f("u2","u3",et),f("u3","u1",et),f("c","t",tt),f("p","c",nt),f("cn1","cn2",nt),f("cn3","cn4",nt),f("cf1","cf2",nt),f("cf3","cf4",nt),ne.setAttribute("position",new Iu(de,3)),ne.setAttribute("color",new Iu(fe,3)),(ee=$.call(this,ne,ae)).type="CameraHelper",ee.camera=X,ee.camera.updateProjectionMatrix&&ee.camera.updateProjectionMatrix(),ee.matrix=X.matrixWorld,ee.matrixAutoUpdate=!1,ee.pointMap=Ue,ee.update(),ee}return _createClass(Hn,[{key:"update",value:function update(){var X=this.geometry,$=this.pointMap;V_.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),cr("c",$,X,V_,0,0,-1),cr("t",$,X,V_,0,0,1),cr("n1",$,X,V_,-1,-1,-1),cr("n2",$,X,V_,1,-1,-1),cr("n3",$,X,V_,-1,1,-1),cr("n4",$,X,V_,1,1,-1),cr("f1",$,X,V_,-1,-1,1),cr("f2",$,X,V_,1,-1,1),cr("f3",$,X,V_,-1,1,1),cr("f4",$,X,V_,1,1,1),cr("u1",$,X,V_,.7,1.1,-1),cr("u2",$,X,V_,-.7,1.1,-1),cr("u3",$,X,V_,0,2,-1),cr("cf1",$,X,V_,-1,0,1),cr("cf2",$,X,V_,1,0,1),cr("cf3",$,X,V_,0,-1,1),cr("cf4",$,X,V_,0,1,1),cr("cn1",$,X,V_,-1,0,-1),cr("cn2",$,X,V_,1,0,-1),cr("cn3",$,X,V_,0,-1,-1),cr("cn4",$,X,V_,0,1,-1),X.getAttribute("position").needsUpdate=!0}},{key:"dispose",value:function dispose(){this.geometry.dispose(),this.material.dispose()}}]),Hn}(Nm);function cr(X,$,ee,ne,ae,de,fe){U_.set(ae,de,fe).unproject(ne);var Ue=$[X];if(void 0!==Ue)for(var je=ee.getAttribute("position"),Ke=0,et=Ue.length;Ke<et;Ke++)je.setXYZ(Ue[Ke],U_.x,U_.y,U_.z)}for(var j_=function(X){_inherits(Fo,X);var $=_createSuper(Fo);function Fo(X){var ee,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;_classCallCheck(this,Fo);var ae=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),de=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],fe=new Wu;return fe.setIndex(new Lu(ae,1)),fe.setAttribute("position",new Iu(de,3)),(ee=$.call(this,fe,new Em({color:ne,toneMapped:!1}))).box=X,ee.type="Box3Helper",ee.geometry.computeBoundingSphere(),ee}return _createClass(Fo,[{key:"updateMatrixWorld",value:function updateMatrixWorld(X){var $=this.box;$.isEmpty()||($.getCenter(this.position),$.getSize(this.scale),this.scale.multiplyScalar(.5),_get(_getPrototypeOf(Fo.prototype),"updateMatrixWorld",this).call(this,X))}}]),Fo}(Nm),G_=function(X){_inherits(Jf,X);var $=_createSuper(Jf);function Jf(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;_classCallCheck(this,Jf);var ne=[0,0,0,ee,0,0,0,0,0,0,ee,0,0,0,0,0,0,ee],ae=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],de=new Wu;de.setAttribute("position",new Iu(ne,3)),de.setAttribute("color",new Iu(ae,3));var fe=new Em({vertexColors:!0,toneMapped:!1});return(X=$.call(this,de,fe)).type="AxesHelper",X}return _createClass(Jf,[{key:"setColors",value:function setColors(X,$,ee){var ne=new Ma,ae=this.geometry.attributes.color.array;return ne.set(X),ne.toArray(ae,0),ne.toArray(ae,3),ne.set($),ne.toArray(ae,6),ne.toArray(ae,9),ne.set(ee),ne.toArray(ae,12),ne.toArray(ae,15),this.geometry.attributes.color.needsUpdate=!0,this}},{key:"dispose",value:function dispose(){this.geometry.dispose(),this.material.dispose()}}]),Jf}(Nm),W_=function(){function Kf(){_classCallCheck(this,Kf),this.type="ShapePath",this.color=new Ma,this.subPaths=[],this.currentPath=null}return _createClass(Kf,[{key:"moveTo",value:function moveTo(X,$){return this.currentPath=new hy,this.subPaths.push(this.currentPath),this.currentPath.moveTo(X,$),this}},{key:"lineTo",value:function lineTo(X,$){return this.currentPath.lineTo(X,$),this}},{key:"quadraticCurveTo",value:function quadraticCurveTo(X,$,ee,ne){return this.currentPath.quadraticCurveTo(X,$,ee,ne),this}},{key:"bezierCurveTo",value:function bezierCurveTo(X,$,ee,ne,ae,de){return this.currentPath.bezierCurveTo(X,$,ee,ne,ae,de),this}},{key:"splineThru",value:function splineThru(X){return this.currentPath.splineThru(X),this}},{key:"toShapes",value:function toShapes(X,$){function r(X){for(var $=[],ee=0,ne=X.length;ee<ne;ee++){var ae=X[ee],de=new yy;de.curves=ae.curves,$.push(de)}return $}function n(X,$){for(var ee=$.length,ne=!1,ae=ee-1,de=0;de<ee;ae=de++){var fe=$[ae],Ue=$[de],je=Ue.x-fe.x,Ke=Ue.y-fe.y;if(Math.abs(Ke)>Number.EPSILON){if(Ke<0&&(fe=$[de],je=-je,Ue=$[ae],Ke=-Ke),X.y<fe.y||X.y>Ue.y)continue;if(X.y===fe.y){if(X.x===fe.x)return!0}else{var et=Ke*(X.x-fe.x)-je*(X.y-fe.y);if(0===et)return!0;if(et<0)continue;ne=!ne}}else{if(X.y!==fe.y)continue;if(Ue.x<=X.x&&X.x<=fe.x||fe.x<=X.x&&X.x<=Ue.x)return!0}}return ne}var ee=ky.isClockWise,ne=this.subPaths;if(0===ne.length)return[];if(!0===$)return r(ne);var ae,de,fe,Ue=[];if(1===ne.length)return de=ne[0],(fe=new yy).curves=de.curves,Ue.push(fe),Ue;var je=!ee(ne[0].getPoints());je=X?!je:je;var Ke,et,tt=[],nt=[],it=[],ct=0;nt[ct]=void 0,it[ct]=[];for(var dt=0,vt=ne.length;dt<vt;dt++)ae=ee(Ke=(de=ne[dt]).getPoints()),(ae=X?!ae:ae)?(!je&&nt[ct]&&ct++,nt[ct]={s:new yy,p:Ke},nt[ct].s.curves=de.curves,je&&ct++,it[ct]=[]):it[ct].push({h:de,p:Ke[0]});if(!nt[0])return r(ne);if(nt.length>1){for(var gt=!1,yt=0,_t=0,wt=nt.length;_t<wt;_t++)tt[_t]=[];for(var St=0,Ct=nt.length;St<Ct;St++)for(var At=it[St],Et=0;Et<At.length;Et++){for(var Rt=At[Et],Bt=!0,Ht=0;Ht<nt.length;Ht++)n(Rt.p,nt[Ht].p)&&(St!==Ht&&yt++,Bt?(Bt=!1,tt[Ht].push(Rt)):gt=!0);Bt&&tt[St].push(Rt)}yt>0&&!1===gt&&(it=tt)}for(var Wt=0,qt=nt.length;Wt<qt;Wt++){fe=nt[Wt].s,Ue.push(fe);for(var Zt=0,Xt=(et=it[Wt]).length;Zt<Xt;Zt++)fe.holes.push(et[Zt].h)}return Ue}}]),Kf}(),q_=new ArrayBuffer(4),Y_=(new Float32Array(q_),new Uint32Array(q_),new Uint32Array(512)),J_=new Uint32Array(512),Z_=0;Z_<256;++Z_){var X_=Z_-127;X_<-27?(Y_[Z_]=0,Y_[256|Z_]=32768,J_[Z_]=24,J_[256|Z_]=24):X_<-14?(Y_[Z_]=1024>>-X_-14,Y_[256|Z_]=1024>>-X_-14|32768,J_[Z_]=-X_-1,J_[256|Z_]=-X_-1):X_<=15?(Y_[Z_]=X_+15<<10,Y_[256|Z_]=X_+15<<10|32768,J_[Z_]=13,J_[256|Z_]=13):X_<128?(Y_[Z_]=31744,Y_[256|Z_]=64512,J_[Z_]=24,J_[256|Z_]=24):(Y_[Z_]=31744,Y_[256|Z_]=64512,J_[Z_]=13,J_[256|Z_]=13)}for(var Q_=new Uint32Array(2048),K_=new Uint32Array(64),$_=new Uint32Array(64),ew=1;ew<1024;++ew){for(var tw=ew<<13,nw=0;0===(8388608&tw);)tw<<=1,nw-=8388608;tw&=-8388609,nw+=947912704,Q_[ew]=tw|nw}for(var rw=1024;rw<2048;++rw)Q_[rw]=939524096+(rw-1024<<13);for(var iw=1;iw<31;++iw)K_[iw]=iw<<23;K_[31]=1199570944,K_[32]=2147483648;for(var aw=33;aw<63;++aw)K_[aw]=2147483648+(aw-32<<23);K_[63]=3347054592;for(var ow=1;ow<64;++ow)32!==ow&&($_[ow]=1024);Qm.create=function(X,$){return console.log("THREE.Curve.create() has been deprecated"),X.prototype=Object.create(Qm.prototype),X.prototype.constructor=X,X.prototype.getPoint=$,X},hy.prototype.fromPoints=function(X){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(X)},B_.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},O_.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},tx.prototype.extractUrlBase=function(X){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),Vx.extractUrlBase(X)},tx.Handlers={add:function add(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function get(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},k_.prototype.center=function(X){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(X)},k_.prototype.empty=function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},k_.prototype.isIntersectionBox=function(X){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(X)},k_.prototype.size=function(X){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(X)},Mo.prototype.center=function(X){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(X)},Mo.prototype.empty=function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Mo.prototype.isIntersectionBox=function(X){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(X)},Mo.prototype.isIntersectionSphere=function(X){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(X)},Mo.prototype.size=function(X){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(X)},Qs.prototype.toVector3=function(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")},_s.prototype.empty=function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()},Od.prototype.setFromMatrix=function(X){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(X)},M_.prototype.center=function(X){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(X)},ga.prototype.flattenToArrayOffset=function(X,$){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(X,$)},ga.prototype.multiplyVector3=function(X){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),X.applyMatrix3(this)},ga.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},ga.prototype.applyToBufferAttribute=function(X){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),X.applyMatrix3(this)},ga.prototype.applyToVector3Array=function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},ga.prototype.getInverse=function(X){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(X).invert()},Ds.prototype.extractPosition=function(X){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(X)},Ds.prototype.flattenToArrayOffset=function(X,$){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(X,$)},Ds.prototype.getPosition=function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new wo).setFromMatrixColumn(this,3)},Ds.prototype.setRotationFromQuaternion=function(X){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(X)},Ds.prototype.multiplyToArray=function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},Ds.prototype.multiplyVector3=function(X){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),X.applyMatrix4(this)},Ds.prototype.multiplyVector4=function(X){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),X.applyMatrix4(this)},Ds.prototype.multiplyVector3Array=function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},Ds.prototype.rotateAxis=function(X){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),X.transformDirection(this)},Ds.prototype.crossVector=function(X){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),X.applyMatrix4(this)},Ds.prototype.translate=function(){console.error("THREE.Matrix4: .translate() has been removed.")},Ds.prototype.rotateX=function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},Ds.prototype.rotateY=function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},Ds.prototype.rotateZ=function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},Ds.prototype.rotateByAxis=function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},Ds.prototype.applyToBufferAttribute=function(X){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),X.applyMatrix4(this)},Ds.prototype.applyToVector3Array=function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},Ds.prototype.makeFrustum=function(X,$,ee,ne,ae,de){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(X,$,ne,ee,ae,de)},Ds.prototype.getInverse=function(X){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(X).invert()},Sd.prototype.isIntersectionLine=function(X){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(X)},xo.prototype.multiplyVector3=function(X){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),X.applyQuaternion(this)},xo.prototype.inverse=function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()},Ps.prototype.isIntersectionBox=function(X){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(X)},Ps.prototype.isIntersectionPlane=function(X){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(X)},Ps.prototype.isIntersectionSphere=function(X){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(X)},ku.prototype.area=function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},ku.prototype.barycoordFromPoint=function(X,$){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(X,$)},ku.prototype.midpoint=function(X){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(X)},ku.prototypenormal=function(X){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(X)},ku.prototype.plane=function(X){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(X)},ku.barycoordFromPoint=function(X,$,ee,ne,ae){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),ku.getBarycoord(X,$,ee,ne,ae)},ku.normal=function(X,$,ee,ne){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),ku.getNormal(X,$,ee,ne)},yy.prototype.extractAllPoints=function(X){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(X)},yy.prototype.extrude=function(X){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new Cy(this,X)},yy.prototype.makeGeometry=function(X){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Ly(this,X)},va.prototype.fromAttribute=function(X,$,ee){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(X,$,ee)},va.prototype.distanceToManhattan=function(X){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(X)},va.prototype.lengthManhattan=function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},wo.prototype.setEulerFromRotationMatrix=function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},wo.prototype.setEulerFromQuaternion=function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},wo.prototype.getPositionFromMatrix=function(X){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(X)},wo.prototype.getScaleFromMatrix=function(X){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(X)},wo.prototype.getColumnFromMatrix=function(X,$){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn($,X)},wo.prototype.applyProjection=function(X){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(X)},wo.prototype.fromAttribute=function(X,$,ee){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(X,$,ee)},wo.prototype.distanceToManhattan=function(X){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(X)},wo.prototype.lengthManhattan=function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},to.prototype.fromAttribute=function(X,$,ee){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(X,$,ee)},to.prototype.lengthManhattan=function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()},ru.prototype.getChildByName=function(X){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(X)},ru.prototype.renderDepth=function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},ru.prototype.translate=function(X,$){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis($,X)},ru.prototype.getWorldRotation=function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},ru.prototype.applyMatrix=function(X){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(X)},Object.defineProperties(ru.prototype,{eulerOrder:{get:function get(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function set(X){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=X}},useQuaternion:{get:function get(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function set(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Oh.prototype.setDrawMode=function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")},Object.defineProperties(Oh.prototype,{drawMode:{get:function get(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),0},set:function set(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),gm.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},cd.prototype.setLens=function(X,$){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==$&&(this.filmGauge=$),this.setFocalLength(X)},Object.defineProperties(gx.prototype,{onlyShadow:{set:function set(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function set(X){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=X}},shadowCameraLeft:{set:function set(X){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=X}},shadowCameraRight:{set:function set(X){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=X}},shadowCameraTop:{set:function set(X){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=X}},shadowCameraBottom:{set:function set(X){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=X}},shadowCameraNear:{set:function set(X){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=X}},shadowCameraFar:{set:function set(X){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=X}},shadowCameraVisible:{set:function set(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function set(X){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=X}},shadowDarkness:{set:function set(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function set(X){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=X}},shadowMapHeight:{set:function set(X){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=X}}}),Object.defineProperties(Lu.prototype,{length:{get:function get(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function get(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Yi},set:function set(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Yi)}}}),Lu.prototype.setDynamic=function(X){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===X?Yi:Di),this},Lu.prototype.copyIndicesArray=function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},Lu.prototype.setArray=function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Wu.prototype.addIndex=function(X){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(X)},Wu.prototype.addAttribute=function(X,$){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),$&&$.isBufferAttribute||$&&$.isInterleavedBufferAttribute?"index"===X?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex($),this):this.setAttribute(X,$):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(X,new Lu(arguments[1],arguments[2])))},Wu.prototype.addDrawCall=function(X,$,ee){void 0!==ee&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(X,$)},Wu.prototype.clearDrawCalls=function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},Wu.prototype.computeOffsets=function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},Wu.prototype.removeAttribute=function(X){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(X)},Wu.prototype.applyMatrix=function(X){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(X)},Object.defineProperties(Wu.prototype,{drawcalls:{get:function get(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function get(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),ov.prototype.setDynamic=function(X){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===X?Yi:Di),this},ov.prototype.setArray=function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")},Cy.prototype.getArrays=function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},Cy.prototype.addShapeList=function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},Cy.prototype.addShape=function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")},nv.prototype.dispose=function(){console.error("THREE.Scene: .dispose() has been removed.")},g_.prototype.onUpdate=function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this},Object.defineProperties(Au.prototype,{wrapAround:{get:function get(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function set(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function get(){console.warn("THREE.Material: .overdraw has been removed.")},set:function set(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function get(){return console.warn("THREE.Material: .wrapRGB has been removed."),new Ma}},shading:{get:function get(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function set(X){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===X}},stencilMask:{get:function get(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function set(X){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=X}},vertexTangents:{get:function get(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")},set:function set(){console.warn("THREE."+this.type+": .vertexTangents has been removed.")}}}),Object.defineProperties($h.prototype,{derivatives:{get:function get(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function set(X){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=X}}}),Pt.prototype.clearTarget=function(X,$,ee,ne){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(X),this.clear($,ee,ne)},Pt.prototype.animate=function(X){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(X)},Pt.prototype.getCurrentRenderTarget=function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},Pt.prototype.getMaxAnisotropy=function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},Pt.prototype.getPrecision=function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},Pt.prototype.resetGLState=function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},Pt.prototype.supportsFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},Pt.prototype.supportsHalfFloatTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},Pt.prototype.supportsStandardDerivatives=function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},Pt.prototype.supportsCompressedTextureS3TC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},Pt.prototype.supportsCompressedTexturePVRTC=function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},Pt.prototype.supportsBlendMinMax=function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},Pt.prototype.supportsVertexTextures=function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},Pt.prototype.supportsInstancedArrays=function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},Pt.prototype.enableScissorTest=function(X){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(X)},Pt.prototype.initMaterial=function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},Pt.prototype.addPrePlugin=function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},Pt.prototype.addPostPlugin=function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},Pt.prototype.updateShadowMap=function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},Pt.prototype.setFaceCulling=function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},Pt.prototype.allocTextureUnit=function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},Pt.prototype.setTexture=function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},Pt.prototype.setTexture2D=function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},Pt.prototype.setTextureCube=function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},Pt.prototype.getActiveMipMapLevel=function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()},Object.defineProperties(Pt.prototype,{shadowMapEnabled:{get:function get(){return this.shadowMap.enabled},set:function set(X){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=X}},shadowMapType:{get:function get(){return this.shadowMap.type},set:function set(X){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=X}},shadowMapCullFace:{get:function get(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function set(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function get(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function get(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function get(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function set(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function get(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function set(X){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===X?Xr:qr}},toneMappingWhitePoint:{get:function get(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function set(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}},gammaFactor:{get:function get(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function set(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}}),Object.defineProperties(_b.prototype,{cullFace:{get:function get(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function set(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function get(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function set(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function get(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function set(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(ro.prototype,{wrapS:{get:function get(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function set(X){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=X}},wrapT:{get:function get(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function set(X){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=X}},magFilter:{get:function get(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function set(X){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=X}},minFilter:{get:function get(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function set(X){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=X}},anisotropy:{get:function get(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function set(X){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=X}},offset:{get:function get(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function set(X){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=X}},repeat:{get:function get(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function set(X){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=X}},format:{get:function get(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function set(X){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=X}},type:{get:function get(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function set(X){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=X}},generateMipmaps:{get:function get(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function set(X){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=X}}}),Qx.prototype.load=function(X){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var $=this;return(new Yx).load(X,(function(X){$.setBuffer(X)})),this},Kx.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},pd.prototype.updateCubeMap=function(X,$){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(X,$)},pd.prototype.clear=function(X,$,ee,ne){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(X,$,ee,ne)},Da.crossOrigin=void 0,Da.loadTexture=function(X,$,ee,ne){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var ae=new mx;ae.setCrossOrigin(this.crossOrigin);var de=ae.load(X,ee,void 0,ne);return $&&(de.mapping=$),de},Da.loadTextureCube=function(X,$,ee,ne){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var ae=new vx;ae.setCrossOrigin(this.crossOrigin);var de=ae.load(X,ee,void 0,ne);return $&&(de.mapping=$),de},Da.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Da.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};var sw=function(X){_inherits(Zf,X);var $=_createSuper(Zf);function Zf(X,ee,ne){var ae;return _classCallCheck(this,Zf),console.error('THREE.WebGLMultisampleRenderTarget has been removed. Use a normal render target and set the "samples" property to greater 0 to enable multisampling.'),(ae=$.call(this,X,ee,ne)).samples=4,ae}return _createClass(Zf)}(ro);typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ht}})),typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ht);var lw=".",uw=Symbol("target"),cw=Symbol("unsubscribe");function ph(X){return X instanceof Date||X instanceof Set||X instanceof Map||X instanceof WeakSet||X instanceof WeakMap||ArrayBuffer.isView(X)}function Ob(X){return("object"==typeof X?null===X:"function"!=typeof X)||X instanceof RegExp}var hw=Array.isArray;function zo(X){return"symbol"==typeof X}var dw={after:function after(X,$){return hw(X)?X.slice($.length):""===$?X:X.slice($.length+1)},concat:function concat(X,$){return hw(X)?(X=(0,ae.Z)(X),$&&X.push($),X):$&&void 0!==$.toString?(""!==X&&(X+=lw),zo($)?X+$.toString():X+$):X},initial:function initial(X){if(hw(X))return X.slice(0,-1);if(""===X)return X;var $=X.lastIndexOf(lw);return-1===$?"":X.slice(0,$)},last:function last(X){if(hw(X))return X[X.length-1]||"";if(""===X)return X;var $=X.lastIndexOf(lw);return-1===$?X:X.slice($+1)},walk:function walk(X,$){if(hw(X)){var ee,ne=(0,je.Z)(X);try{for(ne.s();!(ee=ne.n()).done;){$(ee.value)}}catch(fe){ne.e(fe)}finally{ne.f()}}else if(""!==X){var ae=0,de=X.indexOf(lw);if(-1===de)$(X);else for(;ae<X.length;)-1===de&&(de=X.length),$(X.slice(ae,de)),ae=de+1,de=X.indexOf(lw,ae)}},get:function get(X,$){return this.walk($,(function($){X&&(X=X[$])})),X}},fw=dw;function oy(X){return"object"==typeof X&&"function"==typeof X.next}function ay(X,$,ee,ne,ae){var de=X.next;if("entries"===$.name)X.next=function(){var X=de.call(this);return!1===X.done&&(X.value[0]=ae(X.value[0],$,X.value[0],ne),X.value[1]=ae(X.value[1],$,X.value[0],ne)),X};else if("values"===$.name){var fe=ee[uw].keys();X.next=function(){var X=de.call(this);return!1===X.done&&(X.value=ae(X.value,$,fe.next().value,ne)),X}}else X.next=function(){var X=de.call(this);return!1===X.done&&(X.value=ae(X.value,$,X.value,ne)),X};return X}function rd(X,$,ee){return X.isUnsubscribed||$.ignoreSymbols&&zo(ee)||$.ignoreUnderscores&&"_"===ee.charAt(0)||"ignoreKeys"in $&&$.ignoreKeys.includes(ee)}var pw=function(){function mh(X){_classCallCheck(this,mh),this._equals=X,this._proxyCache=new WeakMap,this._pathCache=new WeakMap,this.isUnsubscribed=!1}return _createClass(mh,[{key:"_getDescriptorCache",value:function _getDescriptorCache(){return void 0===this._descriptorCache&&(this._descriptorCache=new WeakMap),this._descriptorCache}},{key:"_getProperties",value:function _getProperties(X){var $=this._getDescriptorCache(),ee=$.get(X);return void 0===ee&&(ee={},$.set(X,ee)),ee}},{key:"_getOwnPropertyDescriptor",value:function _getOwnPropertyDescriptor(X,$){if(this.isUnsubscribed)return Reflect.getOwnPropertyDescriptor(X,$);var ee=this._getProperties(X),ne=ee[$];return void 0===ne&&(ne=Reflect.getOwnPropertyDescriptor(X,$),ee[$]=ne),ne}},{key:"getProxy",value:function getProxy(X,$,ee,ne){if(this.isUnsubscribed)return X;var ae=X[ne],de=ae||X;this._pathCache.set(de,$);var fe=this._proxyCache.get(de);return void 0===fe&&(fe=void 0===ae?new Proxy(X,ee):X,this._proxyCache.set(de,fe)),fe}},{key:"getPath",value:function getPath(X){return this.isUnsubscribed?void 0:this._pathCache.get(X)}},{key:"isDetached",value:function isDetached(X,$){return!Object.is(X,fw.get($,this.getPath(X)))}},{key:"defineProperty",value:function defineProperty(X,$,ee){return!!Reflect.defineProperty(X,$,ee)&&(this.isUnsubscribed||(this._getProperties(X)[$]=ee),!0)}},{key:"setProperty",value:function setProperty(X,$,ee,ne,ae){if(!this._equals(ae,ee)||!($ in X)){var de=this._getOwnPropertyDescriptor(X,$);return void 0!==de&&"set"in de?Reflect.set(X,$,ee,ne):Reflect.set(X,$,ee)}return!0}},{key:"deleteProperty",value:function deleteProperty(X,$,ee){if(Reflect.deleteProperty(X,$)){if(!this.isUnsubscribed){var ne=this._getDescriptorCache().get(X);ne&&(delete ne[$],this._pathCache.delete(ee))}return!0}return!1}},{key:"isSameDescriptor",value:function isSameDescriptor(X,$,ee){var ne=this._getOwnPropertyDescriptor($,ee);return void 0!==X&&void 0!==ne&&Object.is(X.value,ne.value)&&(X.writable||!1)===(ne.writable||!1)&&(X.enumerable||!1)===(ne.enumerable||!1)&&(X.configurable||!1)===(ne.configurable||!1)&&X.get===ne.get&&X.set===ne.set}},{key:"isGetInvariant",value:function isGetInvariant(X,$){var ee=this._getOwnPropertyDescriptor(X,$);return void 0!==ee&&!0!==ee.configurable&&!0!==ee.writable}},{key:"unsubscribe",value:function unsubscribe(){this._descriptorCache=null,this._pathCache=null,this._proxyCache=null,this.isUnsubscribed=!0}}]),mh}();function Ka(X){return"[object Object]"===toString.call(X)}function Za(){return!0}function qs(X,$){return X.length!==$.length||X.some((function(X,ee){return $[ee]!==X}))}var vw=new Set(["hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]),mw=new Set(["concat","includes","indexOf","join","keys","lastIndexOf"]),gw={push:Za,pop:Za,shift:Za,unshift:Za,copyWithin:qs,reverse:qs,sort:qs,splice:qs,flat:qs,fill:qs},yw=new Set([].concat((0,ae.Z)(vw),(0,ae.Z)(mw),(0,ae.Z)(Object.keys(gw))));function $a(X,$){if(X.size!==$.size)return!0;var ee,ne=(0,je.Z)(X);try{for(ne.s();!(ee=ne.n()).done;){var ae=ee.value;if(!$.has(ae))return!0}}catch(de){ne.e(de)}finally{ne.f()}return!1}var bw=["keys","values","entries"],xw=new Set(["has","toString"]),_w={add:$a,clear:$a,delete:$a,forEach:$a},ww=new Set([].concat((0,ae.Z)(xw),(0,ae.Z)(Object.keys(_w)),bw));function el(X,$){if(X.size!==$.size)return!0;var ee,ne,ae=(0,je.Z)(X);try{for(ae.s();!(ne=ae.n()).done;){var de=(0,fe.Z)(ne.value,2),Ue=de[0],Ke=de[1];if((ee=$.get(Ue))!==Ke||void 0===ee&&!$.has(Ue))return!0}}catch(et){ae.e(et)}finally{ae.f()}return!1}var Sw=new Set([].concat((0,ae.Z)(xw),["get"])),kw={set:el,clear:el,delete:el,forEach:el},Cw=new Set([].concat((0,ae.Z)(Sw),(0,ae.Z)(Object.keys(kw)),bw)),Aw=function(){function Rr(X,$,ee,ne){_classCallCheck(this,Rr),this._path=$,this._isChanged=!1,this._clonedCache=new Set,this._hasOnValidate=ne,this._changes=ne?[]:null,this.clone=void 0===$?X:this._shallowClone(X)}return _createClass(Rr,[{key:"_shallowClone",value:function _shallowClone(X){var $=this,ee=X;if(Ka(X))ee=Ct({},X);else if(hw(X))ee=(0,ae.Z)(X);else if(X instanceof Date)ee=new Date(X);else if(X instanceof Set)ee=new Set((0,ae.Z)(X).map((function(X){return $._shallowClone(X)})));else if(X instanceof Map){ee=new Map;var ne,de=(0,je.Z)(X.entries());try{for(de.s();!(ne=de.n()).done;){var Ue=(0,fe.Z)(ne.value,2),Ke=Ue[0],et=Ue[1];ee.set(Ke,this._shallowClone(et))}}catch(tt){de.e(tt)}finally{de.f()}}return this._clonedCache.add(ee),ee}},{key:"preferredThisArg",value:function preferredThisArg(X,$,ee,ne){return X?(hw(ne)?this._onIsChanged=gw[$]:ne instanceof Set?this._onIsChanged=_w[$]:ne instanceof Map&&(this._onIsChanged=kw[$]),ne):ee}},{key:"update",value:function update(X,$,ee){var ne=this,ae=fw.after(X,this._path);if("length"!==$){var de=this.clone;fw.walk(ae,(function(X){de&&de[X]&&(ne._clonedCache.has(de[X])||(de[X]=ne._shallowClone(de[X])),de=de[X])})),this._hasOnValidate&&this._changes.push({path:ae,property:$,previous:ee}),de&&de[$]&&(de[$]=ee)}this._isChanged=!0}},{key:"undo",value:function undo(X){for(var $,ee=this._changes.length-1;-1!==ee;ee--)$=this._changes[ee],fw.get(X,$.path)[$.property]=$.previous}},{key:"isChanged",value:function isChanged(X){return void 0===this._onIsChanged?this._isChanged:this._onIsChanged(this.clone,X)}}],[{key:"isHandledMethod",value:function isHandledMethod(X){return vw.has(X)}}]),Rr}(),Mw=function(X){_inherits(tl,X);var $=_createSuper(tl);function tl(){return _classCallCheck(this,tl),$.apply(this,arguments)}return _createClass(tl,null,[{key:"isHandledMethod",value:function isHandledMethod(X){return yw.has(X)}}]),tl}(Aw),Ew=function(X){_inherits(gh,X);var $=_createSuper(gh);function gh(){return _classCallCheck(this,gh),$.apply(this,arguments)}return _createClass(gh,[{key:"undo",value:function undo(X){X.setTime(this.clone.getTime())}},{key:"isChanged",value:function isChanged(X,$){return!$(this.clone.valueOf(),X.valueOf())}}]),gh}(Aw),Tw=function(X){_inherits(rl,X);var $=_createSuper(rl);function rl(){return _classCallCheck(this,rl),$.apply(this,arguments)}return _createClass(rl,[{key:"undo",value:function undo(X){var $,ee=(0,je.Z)(this.clone);try{for(ee.s();!($=ee.n()).done;){var ne=$.value;X.add(ne)}}catch(Ue){ee.e(Ue)}finally{ee.f()}var ae,de=(0,je.Z)(X);try{for(de.s();!(ae=de.n()).done;){var fe=ae.value;this.clone.has(fe)||X.delete(fe)}}catch(Ue){de.e(Ue)}finally{de.f()}}}],[{key:"isHandledMethod",value:function isHandledMethod(X){return ww.has(X)}}]),rl}(Aw),Pw=function(X){_inherits(nl,X);var $=_createSuper(nl);function nl(){return _classCallCheck(this,nl),$.apply(this,arguments)}return _createClass(nl,[{key:"undo",value:function undo(X){var $,ee=(0,je.Z)(this.clone.entries());try{for(ee.s();!($=ee.n()).done;){var ne=(0,fe.Z)($.value,2),ae=ne[0],de=ne[1];X.set(ae,de)}}catch(tt){ee.e(tt)}finally{ee.f()}var Ue,Ke=(0,je.Z)(X.keys());try{for(Ke.s();!(Ue=Ke.n()).done;){var et=Ue.value;this.clone.has(et)||X.delete(et)}}catch(tt){Ke.e(tt)}finally{Ke.f()}}}],[{key:"isHandledMethod",value:function isHandledMethod(X){return Cw.has(X)}}]),nl}(Aw),Dw=function(X){_inherits(yh,X);var $=_createSuper(yh);function yh(X,ee,ne,ae){var de;return _classCallCheck(this,yh),(de=$.call(this,void 0,ee,ne,ae))._arg1=ne[0],de._weakValue=X.has(de._arg1),de}return _createClass(yh,[{key:"isChanged",value:function isChanged(X){return this._weakValue!==X.has(this._arg1)}},{key:"undo",value:function undo(X){this._weakValue&&!X.has(this._arg1)?X.add(this._arg1):X.delete(this._arg1)}}]),yh}(Aw),Lw=function(X){_inherits(vh,X);var $=_createSuper(vh);function vh(X,ee,ne,ae){var de;return _classCallCheck(this,vh),(de=$.call(this,void 0,ee,ne,ae))._weakKey=ne[0],de._weakHas=X.has(de._weakKey),de._weakValue=X.get(de._weakKey),de}return _createClass(vh,[{key:"isChanged",value:function isChanged(X){return this._weakValue!==X.get(this._weakKey)}},{key:"undo",value:function undo(X){var $=X.has(this._weakKey);this._weakHas&&!$?X.set(this._weakKey,this._weakValue):!this._weakHas&&$?X.delete(this._weakKey):this._weakValue!==X.get(this._weakKey)&&X.set(this._weakKey,this._weakValue)}}]),vh}(Aw),Ow=function(){function ci(X){_classCallCheck(this,ci),this._stack=[],this._hasOnValidate=X}return _createClass(ci,[{key:"isCloning",get:function get(){return this._stack.length>0}},{key:"start",value:function start(X,$,ee){var ne=Aw;hw(X)?ne=Mw:X instanceof Date?ne=Ew:X instanceof Set?ne=Tw:X instanceof Map?ne=Pw:X instanceof WeakSet?ne=Dw:X instanceof WeakMap&&(ne=Lw),this._stack.push(new ne(X,$,ee,this._hasOnValidate))}},{key:"update",value:function update(X,$,ee){this._stack[this._stack.length-1].update(X,$,ee)}},{key:"preferredThisArg",value:function preferredThisArg(X,$,ee){var ne=X.name,ae=ci.isHandledMethod(ee,ne);return this._stack[this._stack.length-1].preferredThisArg(ae,ne,$,ee)}},{key:"isChanged",value:function isChanged(X,$,ee){return this._stack[this._stack.length-1].isChanged(X,$,ee)}},{key:"undo",value:function undo(X){void 0!==this._previousClone&&this._previousClone.undo(X)}},{key:"stop",value:function stop(){return this._previousClone=this._stack.pop(),this._previousClone.clone}}],[{key:"isHandledType",value:function isHandledType(X){return Ka(X)||hw(X)||ph(X)}},{key:"isHandledMethod",value:function isHandledMethod(X,$){return Ka(X)?Aw.isHandledMethod($):hw(X)?Mw.isHandledMethod($):X instanceof Set?Tw.isHandledMethod($):X instanceof Map?Pw.isHandledMethod($):ph(X)}}]),ci}(),Rw={equals:Object.is,isShallow:!1,pathAsArray:!1,ignoreSymbols:!1,ignoreUnderscores:!1,ignoreDetached:!1,details:!1},Bw=function dy(X,$){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};ee=Ct(Ct({},Rw),ee);var ne=Symbol("ProxyTarget"),ae=ee,de=ae.equals,fe=ae.isShallow,Ue=ae.ignoreDetached,je=ae.details,Ke=new pw(de),et="function"==typeof ee.onValidate,tt=new Ow(et),nt=function u(X,$,ne,ae,de){return!et||tt.isCloning||!0===ee.onValidate(fw.concat(Ke.getPath(X),$),ne,ae,de)},it=function f($,ne,ae,de){!rd(Ke,ee,ne)&&(!Ue||!Ke.isDetached($,X))&&ct(Ke.getPath($),ne,ae,de)},ct=function d(X,ee,ne,ae,de){tt.isCloning?tt.update(X,ee,ae):$(fw.concat(X,ee),ne,ae,de)},dt=function p(X){return X&&(X[ne]||X)},vt=function m($,ae,de,je){return Ob($)||"constructor"===de||fe&&!Ow.isHandledMethod(ae,de)||rd(Ke,ee,de)||Ke.isGetInvariant(ae,de)||Ue&&Ke.isDetached(ae,X)?$:(void 0===je&&(je=Ke.getPath(ae)),Ke.getProxy($,fw.concat(je,de),gt,ne))},gt={get:function get(X,$,ee){if(zo($)){if($===ne||$===uw)return X;if($===cw&&!Ke.isUnsubscribed&&0===Ke.getPath(X).length)return Ke.unsubscribe(),X}var ae=ph(X)?Reflect.get(X,$):Reflect.get(X,$,ee);return vt(ae,X,$)},set:function set(X,$,ee,ae){ee=dt(ee);var fe=X[ne]||X,Ue=fe[$];if(de(Ue,ee)&&$ in X)return!0;var je=nt(X,$,ee,Ue);return je&&Ke.setProperty(fe,$,ee,ae,Ue)?(it(X,$,X[$],Ue),!0):!je},defineProperty:function defineProperty(X,$,ee){if(!Ke.isSameDescriptor(ee,X,$)){var ne=X[$];nt(X,$,ee.value,ne)&&Ke.defineProperty(X,$,ee,ne)&&it(X,$,ee.value,ne)}return!0},deleteProperty:function deleteProperty(X,$){if(!Reflect.has(X,$))return!0;var ee=Reflect.get(X,$),ne=nt(X,$,void 0,ee);return ne&&Ke.deleteProperty(X,$,ee)?(it(X,$,void 0,ee),!0):!ne},apply:function apply($,ee,ae){var fe=ee[ne]||ee;if(Ke.isUnsubscribed)return Reflect.apply($,fe,ae);if((!1===je||!0!==je&&!je.includes($.name))&&Ow.isHandledType(fe)){var Ue=fw.initial(Ke.getPath($)),et=Ow.isHandledMethod(fe,$.name);tt.start(fe,Ue,ae);var it=Reflect.apply($,tt.preferredThisArg($,ee,fe),et?ae.map((function(X){return dt(X)})):ae),yt=tt.isChanged(fe,de),_t=tt.stop();if(Ow.isHandledType(it)&&et&&(ee instanceof Map&&"get"===$.name&&(Ue=fw.concat(Ue,ae[0])),it=Ke.getProxy(it,Ue,gt)),yt){var wt={name:$.name,args:ae,result:it},St=tt.isCloning?fw.initial(Ue):Ue,Ct=tt.isCloning?fw.last(Ue):"";nt(fw.get(X,St),Ct,fe,_t,wt)?ct(St,Ct,fe,_t,wt):tt.undo(fe)}return(ee instanceof Map||ee instanceof Set)&&oy(it)?ay(it,$,ee,Ue,vt):it}return Reflect.apply($,ee,ae)}},yt=Ke.getProxy(X,ee.pathAsArray?[]:"",gt);return $=$.bind(yt),et&&(ee.onValidate=ee.onValidate.bind(yt)),yt};Bw.target=function(X){return X&&X[uw]||X},Bw.unsubscribe=function(X){return X[cw]||X};var Iw=Bw,zw="object"==typeof ee.g&&ee.g&&ee.g.Object===Object&&ee.g,Nw="object"==typeof self&&self&&self.Object===Object&&self,Fw=zw||Nw||Function("return this")(),Uw=Fw.Symbol,Vw=Object.prototype,Hw=Vw.hasOwnProperty,jw=Vw.toString,Gw=Uw?Uw.toStringTag:void 0;var Ww=function C2(X){var $=Hw.call(X,Gw),ee=X[Gw];try{X[Gw]=void 0;var ne=!0}catch(de){}var ae=jw.call(X);return ne&&($?X[Gw]=ee:delete X[Gw]),ae},qw=Object.prototype.toString;var Yw=function L2(X){return qw.call(X)},Jw=Uw?Uw.toStringTag:void 0;var Zw=function B2(X){return null==X?void 0===X?"[object Undefined]":"[object Null]":Jw&&Jw in Object(X)?Ww(X):Yw(X)};var Xw=function N2(X){return null!=X&&"object"==typeof X};var Kw=function F2(X){return"symbol"==typeof X||Xw(X)&&"[object Symbol]"==Zw(X)};var $w=function U2(X,$){for(var ee=-1,ne=null==X?0:X.length,ae=Array(ne);++ee<ne;)ae[ee]=$(X[ee],ee,X);return ae},eS=Array.isArray,tS=Uw?Uw.prototype:void 0,nS=tS?tS.toString:void 0;var rS=function qb(X){if("string"==typeof X)return X;if(eS(X))return $w(X,qb)+"";if(Kw(X))return nS?nS.call(X):"";var $=X+"";return"0"==$&&1/X==-Infinity?"-0":$},iS=/\s/;var aS=function V2(X){for(var $=X.length;$--&&iS.test(X.charAt($)););return $},oS=/^\s+/;var sS=function W2(X){return X&&X.slice(0,aS(X)+1).replace(oS,"")};var lS=function j2(X){var $=typeof X;return null!=X&&("object"==$||"function"==$)},uS=/^[-+]0x[0-9a-f]+$/i,cS=/^0b[01]+$/i,hS=/^0o[0-7]+$/i,dS=parseInt;var fS=function J2(X){if("number"==typeof X)return X;if(Kw(X))return NaN;if(lS(X)){var $="function"==typeof X.valueOf?X.valueOf():X;X=lS($)?$+"":$}if("string"!=typeof X)return 0===X?X:+X;X=sS(X);var ee=cS.test(X);return ee||hS.test(X)?dS(X.slice(2),ee?2:8):uS.test(X)?NaN:+X};var pS=function K2(X){return X};var vS=function rI(X){if(!lS(X))return!1;var $=Zw(X);return"[object Function]"==$||"[object GeneratorFunction]"==$||"[object AsyncFunction]"==$||"[object Proxy]"==$},mS=Fw["__core-js_shared__"],gS=function(){var X=/[^.]+$/.exec(mS&&mS.keys&&mS.keys.IE_PROTO||"");return X?"Symbol(src)_1."+X:""}();var yS=function iI(X){return!!gS&&gS in X},bS=Function.prototype.toString;var xS=function aI(X){if(null!=X){try{return bS.call(X)}catch($){}try{return X+""}catch(ee){}}return""},_S=/^\[object .+?Constructor\]$/,wS=Function.prototype,SS=Object.prototype,kS=wS.toString,CS=SS.hasOwnProperty,AS=RegExp("^"+kS.call(CS).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var MS=function mI(X){return!(!lS(X)||yS(X))&&(vS(X)?AS:_S).test(xS(X))};var ES=function gI(X,$){return null==X?void 0:X[$]};var TS=function yI(X,$){var ee=ES(X,$);return MS(ee)?ee:void 0},PS=TS(Fw,"WeakMap"),DS=Object.create,LS=function(){function i(){}return function(X){if(!lS(X))return{};if(DS)return DS(X);i.prototype=X;var $=new i;return i.prototype=void 0,$}}(),OS=LS;var RS=function bI(X,$,ee){switch(ee.length){case 0:return X.call($);case 1:return X.call($,ee[0]);case 2:return X.call($,ee[0],ee[1]);case 3:return X.call($,ee[0],ee[1],ee[2])}return X.apply($,ee)};var BS=function wI(X,$){var ee=-1,ne=X.length;for($||($=Array(ne));++ee<ne;)$[ee]=X[ee];return $},IS=Date.now;var zS=function TI(X){var $=0,ee=0;return function(){var ne=IS(),ae=16-(ne-ee);if(ee=ne,ae>0){if(++$>=800)return arguments[0]}else $=0;return X.apply(void 0,arguments)}};var NS=function EI(X){return function(){return X}},FS=function(){try{var X=TS(Object,"defineProperty");return X({},"",{}),X}catch($){}}(),US=FS,VS=US?function(X,$){return US(X,"toString",{configurable:!0,enumerable:!1,value:NS($),writable:!0})}:pS,jS=zS(VS);var GS=function PI(X,$){for(var ee=-1,ne=null==X?0:X.length;++ee<ne&&!1!==$(X[ee],ee,X););return X},WS=/^(?:0|[1-9]\d*)$/;var qS=function RI(X,$){var ee=typeof X;return!!($=null==$?9007199254740991:$)&&("number"==ee||"symbol"!=ee&&WS.test(X))&&X>-1&&X%1==0&&X<$};var YS=function BI(X,$,ee){"__proto__"==$&&US?US(X,$,{configurable:!0,enumerable:!0,value:ee,writable:!0}):X[$]=ee};var JS=function NI(X,$){return X===$||X!==X&&$!==$},XS=Object.prototype.hasOwnProperty;var KS=function UI(X,$,ee){var ne=X[$];(!XS.call(X,$)||!JS(ne,ee)||void 0===ee&&!($ in X))&&YS(X,$,ee)};var nk=function zI(X,$,ee,ne){var ae=!ee;ee||(ee={});for(var de=-1,fe=$.length;++de<fe;){var Ue=$[de],je=ne?ne(ee[Ue],X[Ue],Ue,ee,X):void 0;void 0===je&&(je=X[Ue]),ae?YS(ee,Ue,je):KS(ee,Ue,je)}return ee},rk=Math.max;var ok=function GI(X,$,ee){return $=rk(void 0===$?X.length-1:$,0),function(){for(var ne=arguments,ae=-1,de=rk(ne.length-$,0),fe=Array(de);++ae<de;)fe[ae]=ne[$+ae];ae=-1;for(var Ue=Array($+1);++ae<$;)Ue[ae]=ne[ae];return Ue[$]=ee(fe),RS(X,this,Ue)}};var pk=function kI(X,$){return jS(ok(X,$,pS),X+"")};var vk=function HI(X){return"number"==typeof X&&X>-1&&X%1==0&&X<=9007199254740991};var _k=function WI(X){return null!=X&&vk(X.length)&&!vS(X)};var Ok=function jI(X,$,ee){if(!lS(ee))return!1;var ne=typeof $;return!!("number"==ne?_k(ee)&&qS($,ee.length):"string"==ne&&$ in ee)&&JS(ee[$],X)};var Fk=function qI(X){return pk((function($,ee){var ne=-1,ae=ee.length,de=ae>1?ee[ae-1]:void 0,fe=ae>2?ee[2]:void 0;for(de=X.length>3&&"function"==typeof de?(ae--,de):void 0,fe&&Ok(ee[0],ee[1],fe)&&(de=ae<3?void 0:de,ae=1),$=Object($);++ne<ae;){var Ue=ee[ne];Ue&&X($,Ue,ne,de)}return $}))},Vk=Object.prototype;var Wk=function XI(X){var $=X&&X.constructor;return X===("function"==typeof $&&$.prototype||Vk)};var qk=function QI(X,$){for(var ee=-1,ne=Array(X);++ee<X;)ne[ee]=$(ee);return ne};var Yk=function KI(X){return Xw(X)&&"[object Arguments]"==Zw(X)},Zk=Object.prototype,Xk=Zk.hasOwnProperty,$k=Zk.propertyIsEnumerable,eC=Yk(function(){return arguments}())?Yk:function(X){return Xw(X)&&Xk.call(X,"callee")&&!$k.call(X,"callee")},tC=eC;var nC=function tR(){return!1},rC="object"==typeof exports&&exports&&!exports.nodeType&&exports,iC=rC&&X&&!X.nodeType&&X,aC=iC&&iC.exports===rC?Fw.Buffer:void 0,oC=(aC?aC.isBuffer:void 0)||nC,sC={};sC["[object Float32Array]"]=sC["[object Float64Array]"]=sC["[object Int8Array]"]=sC["[object Int16Array]"]=sC["[object Int32Array]"]=sC["[object Uint8Array]"]=sC["[object Uint8ClampedArray]"]=sC["[object Uint16Array]"]=sC["[object Uint32Array]"]=!0,sC["[object Arguments]"]=sC["[object Array]"]=sC["[object ArrayBuffer]"]=sC["[object Boolean]"]=sC["[object DataView]"]=sC["[object Date]"]=sC["[object Error]"]=sC["[object Function]"]=sC["[object Map]"]=sC["[object Number]"]=sC["[object Object]"]=sC["[object RegExp]"]=sC["[object Set]"]=sC["[object String]"]=sC["[object WeakMap]"]=!1;var lC=function DR(X){return Xw(X)&&vk(X.length)&&!!sC[Zw(X)]};var uC=function PR(X){return function($){return X($)}},cC="object"==typeof exports&&exports&&!exports.nodeType&&exports,hC=cC&&X&&!X.nodeType&&X,dC=hC&&hC.exports===cC&&zw.process,fC=function(){try{return hC&&hC.require&&hC.require("util").types||dC&&dC.binding&&dC.binding("util")}catch(X){}}(),pC=fC&&fC.isTypedArray,vC=pC?uC(pC):lC,mC=Object.prototype.hasOwnProperty;var gC=function OR(X,$){var ee=eS(X),ne=!ee&&tC(X),ae=!ee&&!ne&&oC(X),de=!ee&&!ne&&!ae&&vC(X),fe=ee||ne||ae||de,Ue=fe?qk(X.length,String):[],je=Ue.length;for(var Ke in X)($||mC.call(X,Ke))&&(!fe||!("length"==Ke||ae&&("offset"==Ke||"parent"==Ke)||de&&("buffer"==Ke||"byteLength"==Ke||"byteOffset"==Ke)||qS(Ke,je)))&&Ue.push(Ke);return Ue};var yC=function FR(X,$){return function(ee){return X($(ee))}},bC=yC(Object.keys,Object),xC=Object.prototype.hasOwnProperty;var _C=function kR(X){if(!Wk(X))return bC(X);var $=[];for(var ee in Object(X))xC.call(X,ee)&&"constructor"!=ee&&$.push(ee);return $};var wC=function VR(X){return _k(X)?gC(X):_C(X)};var SC=function HR(X){var $=[];if(null!=X)for(var ee in Object(X))$.push(ee);return $},kC=Object.prototype.hasOwnProperty;var CC=function qR(X){if(!lS(X))return SC(X);var $=Wk(X),ee=[];for(var ne in X)"constructor"==ne&&($||!kC.call(X,ne))||ee.push(ne);return ee};var AC=function YR(X){return _k(X)?gC(X,!0):CC(X)},MC=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,EC=/^\w*$/;var TC=function JR(X,$){if(eS(X))return!1;var ee=typeof X;return!("number"!=ee&&"symbol"!=ee&&"boolean"!=ee&&null!=X&&!Kw(X))||(EC.test(X)||!MC.test(X)||null!=$&&X in Object($))},PC=TS(Object,"create");var DC=function ZR(){this.__data__=PC?PC(null):{},this.size=0};var LC=function $R(X){var $=this.has(X)&&delete this.__data__[X];return this.size-=$?1:0,$},OC=Object.prototype.hasOwnProperty;var RC=function nB(X){var $=this.__data__;if(PC){var ee=$[X];return"__lodash_hash_undefined__"===ee?void 0:ee}return OC.call($,X)?$[X]:void 0},BC=Object.prototype.hasOwnProperty;var IC=function oB(X){var $=this.__data__;return PC?void 0!==$[X]:BC.call($,X)};var zC=function lB(X,$){var ee=this.__data__;return this.size+=this.has(X)?0:1,ee[X]=PC&&void 0===$?"__lodash_hash_undefined__":$,this};function ul(X){var $=-1,ee=null==X?0:X.length;for(this.clear();++$<ee;){var ne=X[$];this.set(ne[0],ne[1])}}ul.prototype.clear=DC,ul.prototype.delete=LC,ul.prototype.get=RC,ul.prototype.has=IC,ul.prototype.set=zC;var NC=ul;var FC=function cB(){this.__data__=[],this.size=0};var UC=function hB(X,$){for(var ee=X.length;ee--;)if(JS(X[ee][0],$))return ee;return-1},VC=Array.prototype.splice;var HC=function dB(X){var $=this.__data__,ee=UC($,X);return!(ee<0)&&(ee==$.length-1?$.pop():VC.call($,ee,1),--this.size,!0)};var jC=function pB(X){var $=this.__data__,ee=UC($,X);return ee<0?void 0:$[ee][1]};var GC=function mB(X){return UC(this.__data__,X)>-1};var WC=function gB(X,$){var ee=this.__data__,ne=UC(ee,X);return ne<0?(++this.size,ee.push([X,$])):ee[ne][1]=$,this};function fl(X){var $=-1,ee=null==X?0:X.length;for(this.clear();++$<ee;){var ne=X[$];this.set(ne[0],ne[1])}}fl.prototype.clear=FC,fl.prototype.delete=HC,fl.prototype.get=jC,fl.prototype.has=GC,fl.prototype.set=WC;var qC=fl,YC=TS(Fw,"Map");var JC=function vB(){this.size=0,this.__data__={hash:new NC,map:new(YC||qC),string:new NC}};var ZC=function xB(X){var $=typeof X;return"string"==$||"number"==$||"symbol"==$||"boolean"==$?"__proto__"!==X:null===X};var XC=function bB(X,$){var ee=X.__data__;return ZC($)?ee["string"==typeof $?"string":"hash"]:ee.map};var QC=function wB(X){var $=XC(this,X).delete(X);return this.size-=$?1:0,$};var KC=function SB(X){return XC(this,X).get(X)};var $C=function MB(X){return XC(this,X).has(X)};var eA=function AB(X,$){var ee=XC(this,X),ne=ee.size;return ee.set(X,$),this.size+=ee.size==ne?0:1,this};function dl(X){var $=-1,ee=null==X?0:X.length;for(this.clear();++$<ee;){var ne=X[$];this.set(ne[0],ne[1])}}dl.prototype.clear=JC,dl.prototype.delete=QC,dl.prototype.get=KC,dl.prototype.has=$C,dl.prototype.set=eA;var tA=dl;function xy(X,$){if("function"!=typeof X||null!=$&&"function"!=typeof $)throw new TypeError("Expected a function");var ee=function t(){var ee=arguments,ne=$?$.apply(this,ee):ee[0],ae=t.cache;if(ae.has(ne))return ae.get(ne);var de=X.apply(this,ee);return t.cache=ae.set(ne,de)||ae,de};return ee.cache=new(xy.Cache||tA),ee}xy.Cache=tA;var nA=xy;var rA=function _B(X){var $=nA(X,(function(X){return 500===ee.size&&ee.clear(),X})),ee=$.cache;return $},iA=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,aA=/\\(\\)?/g,oA=rA((function(X){var $=[];return 46===X.charCodeAt(0)&&$.push(""),X.replace(iA,(function(X,ee,ne,ae){$.push(ne?ae.replace(aA,"$1"):ee||X)})),$})),cA=oA;var hA=function LB(X){return null==X?"":rS(X)};var yA=function IB(X,$){return eS(X)?X:TC(X,$)?[X]:cA(hA(X))};var SA=function BB(X){if("string"==typeof X||Kw(X))return X;var $=X+"";return"0"==$&&1/X==-Infinity?"-0":$};var AA=function NB(X,$){for(var ee=0,ne=($=yA($,X)).length;null!=X&&ee<ne;)X=X[SA($[ee++])];return ee&&ee==ne?X:void 0};var MA=function OB(X,$){for(var ee=-1,ne=$.length,ae=X.length;++ee<ne;)X[ae+ee]=$[ee];return X},TA=Uw?Uw.isConcatSpreadable:void 0;var VA=function FB(X){return eS(X)||tC(X)||!!(TA&&X&&X[TA])};var HA=function Qw(X,$,ee,ne,ae){var de=-1,fe=X.length;for(ee||(ee=VA),ae||(ae=[]);++de<fe;){var Ue=X[de];$>0&&ee(Ue)?$>1?Qw(Ue,$-1,ee,ne,ae):MA(ae,Ue):ne||(ae[ae.length]=Ue)}return ae};var jA=function UB(X){return(null==X?0:X.length)?HA(X,1):[]};var XA=function zB(X){return jS(ok(X,void 0,jA),X+"")},iM=yC(Object.getPrototypeOf,Object),oM=Function.prototype,sM=Object.prototype,uM=oM.toString,dM=sM.hasOwnProperty,yM=uM.call(Object);var bM=function qB(X){if(!Xw(X)||"[object Object]"!=Zw(X))return!1;var $=iM(X);if(null===$)return!0;var ee=dM.call($,"constructor")&&$.constructor;return"function"==typeof ee&&ee instanceof ee&&uM.call(ee)==yM};var _M=function YB(X,$,ee){var ne=-1,ae=X.length;$<0&&($=-$>ae?0:ae+$),(ee=ee>ae?ae:ee)<0&&(ee+=ae),ae=$>ee?0:ee-$>>>0,$>>>=0;for(var de=Array(ae);++ne<ae;)de[ne]=X[ne+$];return de};var CM=function XB(){this.__data__=new qC,this.size=0};var AM=function QB(X){var $=this.__data__,ee=$.delete(X);return this.size=$.size,ee};var MM=function JB(X){return this.__data__.get(X)};var EM=function KB(X){return this.__data__.has(X)};var TM=function $B(X,$){var ee=this.__data__;if(ee instanceof qC){var ne=ee.__data__;if(!YC||ne.length<199)return ne.push([X,$]),this.size=++ee.size,this;ee=this.__data__=new tA(ne)}return ee.set(X,$),this.size=ee.size,this};function yl(X){var $=this.__data__=new qC(X);this.size=$.size}yl.prototype.clear=CM,yl.prototype.delete=AM,yl.prototype.get=MM,yl.prototype.has=EM,yl.prototype.set=TM;var PM=yl;var DM=function eN(X,$){return X&&nk($,wC($),X)};var LM=function tN(X,$){return X&&nk($,AC($),X)},OM="object"==typeof exports&&exports&&!exports.nodeType&&exports,BM=OM&&X&&!X.nodeType&&X,NM=BM&&BM.exports===OM?Fw.Buffer:void 0,jM=NM?NM.allocUnsafe:void 0;var qM=function nN(X,$){if($)return X.slice();var ee=X.length,ne=jM?jM(ee):new X.constructor(ee);return X.copy(ne),ne};var eE=function iN(X,$){for(var ee=-1,ne=null==X?0:X.length,ae=0,de=[];++ee<ne;){var fe=X[ee];$(fe,ee,X)&&(de[ae++]=fe)}return de};var tE=function sN(){return[]},nE=Object.prototype.propertyIsEnumerable,rE=Object.getOwnPropertySymbols,iE=rE?function(X){return null==X?[]:(X=Object(X),eE(rE(X),(function($){return nE.call(X,$)})))}:tE,aE=iE;var oE=function cN(X,$){return nk(X,aE(X),$)},sE=Object.getOwnPropertySymbols?function(X){for(var $=[];X;)MA($,aE(X)),X=iM(X);return $}:tE,lE=sE;var uE=function fN(X,$){return nk(X,lE(X),$)};var cE=function dN(X,$,ee){var ne=$(X);return eS(X)?ne:MA(ne,ee(X))};var hE=function pN(X){return cE(X,wC,aE)};var dE=function mN(X){return cE(X,AC,lE)},fE=TS(Fw,"DataView"),pE=TS(Fw,"Promise"),vE=TS(Fw,"Set"),mE="[object Map]",gE="[object Promise]",yE="[object Set]",bE="[object WeakMap]",xE="[object DataView]",_E=xS(fE),wE=xS(YC),SE=xS(pE),CE=xS(vE),AE=xS(PS),ME=Zw;(fE&&ME(new fE(new ArrayBuffer(1)))!=xE||YC&&ME(new YC)!=mE||pE&&ME(pE.resolve())!=gE||vE&&ME(new vE)!=yE||PS&&ME(new PS)!=bE)&&(ME=function ko(X){var $=Zw(X),ee="[object Object]"==$?X.constructor:void 0,ne=ee?xS(ee):"";if(ne)switch(ne){case _E:return xE;case wE:return mE;case SE:return gE;case CE:return yE;case AE:return bE}return $});var EE=ME,TE=Object.prototype.hasOwnProperty;var PE=function _N(X){var $=X.length,ee=new X.constructor($);return $&&"string"==typeof X[0]&&TE.call(X,"index")&&(ee.index=X.index,ee.input=X.input),ee},DE=Fw.Uint8Array;var LE=function DN(X){var $=new X.constructor(X.byteLength);return new DE($).set(new DE(X)),$};var RE=function PN(X,$){var ee=$?LE(X.buffer):X.buffer;return new X.constructor(ee,X.byteOffset,X.byteLength)},IE=/\w*$/;var JE=function IN(X){var $=new X.constructor(X.source,IE.exec(X));return $.lastIndex=X.lastIndex,$},ZE=Uw?Uw.prototype:void 0,KE=ZE?ZE.valueOf:void 0;var $E=function RN(X){return KE?Object(KE.call(X)):{}};var iT=function BN(X,$){var ee=$?LE(X.buffer):X.buffer;return new X.constructor(ee,X.byteOffset,X.length)};var aT=function e3(X,$,ee){var ne=X.constructor;switch($){case"[object ArrayBuffer]":return LE(X);case"[object Boolean]":case"[object Date]":return new ne(+X);case"[object DataView]":return RE(X,ee);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return iT(X,ee);case"[object Map]":case"[object Set]":return new ne;case"[object Number]":case"[object String]":return new ne(X);case"[object RegExp]":return JE(X);case"[object Symbol]":return $E(X)}};var pT=function t3(X){return"function"!=typeof X.constructor||Wk(X)?{}:OS(iM(X))};var vT=function n3(X){return Xw(X)&&"[object Map]"==EE(X)},yT=fC&&fC.isMap,bT=yT?uC(yT):vT;var xT=function o3(X){return Xw(X)&&"[object Set]"==EE(X)},_T=fC&&fC.isSet,wT=_T?uC(_T):xT,kT="[object Arguments]",MT="[object Function]",PT="[object Object]",DT={};DT[kT]=DT["[object Array]"]=DT["[object ArrayBuffer]"]=DT["[object DataView]"]=DT["[object Boolean]"]=DT["[object Date]"]=DT["[object Float32Array]"]=DT["[object Float64Array]"]=DT["[object Int8Array]"]=DT["[object Int16Array]"]=DT["[object Int32Array]"]=DT["[object Map]"]=DT["[object Number]"]=DT[PT]=DT["[object RegExp]"]=DT["[object Set]"]=DT["[object String]"]=DT["[object Symbol]"]=DT["[object Uint8Array]"]=DT["[object Uint8ClampedArray]"]=DT["[object Uint16Array]"]=DT["[object Uint32Array]"]=!0,DT["[object Error]"]=DT[MT]=DT["[object WeakMap]"]=!1;var LT=function Ld(X,$,ee,ne,ae,de){var fe,Ue=1&$,je=2&$,Ke=4&$;if(ee&&(fe=ae?ee(X,ne,ae,de):ee(X)),void 0!==fe)return fe;if(!lS(X))return X;var et=eS(X);if(et){if(fe=PE(X),!Ue)return BS(X,fe)}else{var tt=EE(X),nt=tt==MT||"[object GeneratorFunction]"==tt;if(oC(X))return qM(X,Ue);if(tt==PT||tt==kT||nt&&!ae){if(fe=je||nt?{}:pT(X),!Ue)return je?uE(X,LM(fe,X)):oE(X,DM(fe,X))}else{if(!DT[tt])return ae?X:{};fe=aT(X,tt,Ue)}}de||(de=new PM);var it=de.get(X);if(it)return it;de.set(X,fe),wT(X)?X.forEach((function(ne){fe.add(Ld(ne,$,ee,ne,X,de))})):bT(X)&&X.forEach((function(ne,ae){fe.set(ae,Ld(ne,$,ee,ae,X,de))}));var ct=et?void 0:(Ke?je?dE:hE:je?AC:wC)(X);return GS(ct||X,(function(ne,ae){ct&&(ne=X[ae=ne]),KS(fe,ae,Ld(ne,$,ee,ae,X,de))})),fe};var RT=function O3(X){return LT(X,5)};var BT=function F3(X){return function($,ee,ne){for(var ae=-1,de=Object($),fe=ne($),Ue=fe.length;Ue--;){var je=fe[X?Ue:++ae];if(!1===ee(de[je],je,de))break}return $}},IT=BT(),zT=function z3(){return Fw.Date.now()},UT=Math.max,VT=Math.min;var HT=function H3(X,$,ee){var ne,ae,de,fe,Ue,je,Ke=0,et=!1,tt=!1,nt=!0;if("function"!=typeof X)throw new TypeError("Expected a function");function d($){var ee=ne,de=ae;return ne=ae=void 0,Ke=$,fe=X.apply(de,ee)}function p(X){return Ke=X,Ue=setTimeout(v,$),et?d(X):fe}function g(X){var ee=X-je;return void 0===je||ee>=$||ee<0||tt&&X-Ke>=de}function v(){var X=zT();if(g(X))return y(X);Ue=setTimeout(v,function m(X){var ee=$-(X-je);return tt?VT(ee,de-(X-Ke)):ee}(X))}function y(X){return Ue=void 0,nt&&ne?d(X):(ne=ae=void 0,fe)}function S(){var X=zT(),ee=g(X);if(ne=arguments,ae=this,je=X,ee){if(void 0===Ue)return p(je);if(tt)return clearTimeout(Ue),Ue=setTimeout(v,$),d(je)}return void 0===Ue&&(Ue=setTimeout(v,$)),fe}return $=fS($)||0,lS(ee)&&(et=!!ee.leading,de=(tt="maxWait"in ee)?UT(fS(ee.maxWait)||0,$):de,nt="trailing"in ee?!!ee.trailing:nt),S.cancel=function w(){void 0!==Ue&&clearTimeout(Ue),Ke=0,ne=je=ae=Ue=void 0},S.flush=function b(){return void 0===Ue?fe:y(zT())},S};var jT=function W3(X,$,ee){(void 0!==ee&&!JS(X[$],ee)||void 0===ee&&!($ in X))&&YS(X,$,ee)};var GT=function j3(X){return Xw(X)&&_k(X)};var WT=function q3(X,$){if(("constructor"!==$||"function"!=typeof X[$])&&"__proto__"!=$)return X[$]};var qT=function Y3(X){return nk(X,AC(X))};var YT=function X3(X,$,ee,ne,ae,de,fe){var Ue=WT(X,ee),je=WT($,ee),Ke=fe.get(je);if(Ke)jT(X,ee,Ke);else{var et=de?de(Ue,je,ee+"",X,$,fe):void 0,tt=void 0===et;if(tt){var nt=eS(je),it=!nt&&oC(je),ct=!nt&&!it&&vC(je);et=je,nt||it||ct?eS(Ue)?et=Ue:GT(Ue)?et=BS(Ue):it?(tt=!1,et=qM(je,!0)):ct?(tt=!1,et=iT(je,!0)):et=[]:bM(je)||tC(je)?(et=Ue,tC(Ue)?et=qT(Ue):(!lS(Ue)||vS(Ue))&&(et=pT(je))):tt=!1}tt&&(fe.set(je,et),ae(et,je,ne,de,fe),fe.delete(je)),jT(X,ee,et)}};var JT=function HS(X,$,ee,ne,ae){X!==$&&IT($,(function(de,fe){if(ae||(ae=new PM),lS(de))YT(X,$,fe,ee,HS,ne,ae);else{var Ue=ne?ne(WT(X,fe),de,fe+"",X,$,ae):void 0;void 0===Ue&&(Ue=de),jT(X,fe,Ue)}}),AC)};var ZT=function Q3(X){var $=null==X?0:X.length;return $?X[$-1]:void 0};var XT=function J3(X,$){return $.length<2?X:AA(X,_M($,0,-1))},QT=Fk((function(X,$,ee){JT(X,$,ee)})),KT=QT;var $T=function Z3(X,$){return $=yA($,X),null==(X=XT(X,$))||delete X[SA(ZT($))]};var qP,eD,tD,nD,rD,iD,aD,oD,sD,lD,uD,cD,hD,dD,fD,pD,vD=function $3(X){return bM(X)?void 0:X},mD=XA((function(X,$){var ee={};if(null==X)return ee;var ne=!1;$=$w($,(function($){return $=yA($,X),ne||(ne=$.length>1),$})),nk(X,dE(X),ee),ne&&(ee=LT(ee,7,vD));for(var ae=$.length;ae--;)$T(ee,$[ae]);return ee})),gD=mD,yD=function QS(X){return new Promise((function($){return setTimeout($,X)}))},bD=(function iO(){!(typeof window>"u")&&window.navigator.userAgent.toLowerCase().includes(" electron/")}(),function sO(){return!(typeof window>"u")&&window.navigator.platform.toUpperCase().includes("MAC")}()),xD=function oO(){return!(typeof window>"u")&&(/iPad|iPhone|iPod/.test(window.navigator.userAgent)||bD&&"ontouchend"in document)}(),_D=function aO(){return!(typeof window>"u")&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}(),wD=function lO(){return!(typeof window>"u")&&("ontouchstart"in window||navigator.maxTouchPoints>0)}(),SD=function cO(){var X=navigator.userAgent,$=navigator.vendor;return/Safari/i.test(X)&&/Apple Computer/.test($)}();function _h(X){return bD?X.metaKey:X.ctrlKey}(eD=qP||(qP={})).all=["PerspectiveCamera","OrthographicCamera"],eD.is=function X_(X){return eD.all.includes(X)},(nD=tD||(tD={})).DefaultUp=[0,1,0],nD.DefaultTargetOffset=1e3,nD.defaultData={far:1e5,type:"OrthographicCamera",perspective:{near:5,fov:45,zoom:1},orthographic:{near:-1e5,zoom:1},up:nD.DefaultUp,isUpVectorFlipped:!1,targetOffset:nD.DefaultTargetOffset},nD.getZoom=function r(X){return"PerspectiveCamera"===X.type?X.perspective.zoom:X.orthographic.zoom},function(X){X.isEqual=function i(X,$){return X[0]===$[0]&&X[1]===$[1]},X.lerp=function e(X,$,ee){return[X[0]+($[0]-X[0])*ee,X[1]+($[1]-X[1])*ee]}}(rD||(rD={})),function(X){X.isEqual=function i(X,$){return X[0]===$[0]&&X[1]===$[1]&&X[2]===$[2]},X.add=function e(X,$){return[X[0]+$[0],X[1]+$[1],X[2]+$[2]]},X.sub=function t(X,$){return[X[0]-$[0],X[1]-$[1],X[2]-$[2]]},X.lerp=function r(X,$,ee){return[X[0]+($[0]-X[0])*ee,X[1]+($[1]-X[1])*ee,X[2]+($[2]-X[2])*ee]}}(iD||(iD={})),function(X){X.isEqual=function i(X,$){return X[0]===$[0]&&X[1]===$[1]&&X[2]===$[2]&&X[3]===$[3]},X.lerp=function e(X,$,ee){return[X[0]+($[0]-X[0])*ee,X[1]+($[1]-X[1])*ee,X[2]+($[2]-X[2])*ee,X[3]+($[3]-X[3])*ee]}}(aD||(aD={})),function(X){X.identity=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],X.isEqual=function e(X,$){for(var ee=0;ee<16;ee++)if(X[ee]!==$[ee])return!1;return!0},X.simplify=function t($){return null!=$?$:X.identity},X.applyMatrix4=function r(X,$){for(var ee=$.slice(0),ne=0,ae=$.length;ne<ae;ne+=3){var de=X[3]*$[ne]+X[7]*$[ne+1]+X[11]*$[ne+2]+X[15];ee[ne]=(X[0]*$[ne]+X[4]*$[ne+1]+X[8]*$[ne+2]+X[12])/de,ee[ne+1]=(X[1]*$[ne]+X[5]*$[ne+1]+X[9]*$[ne+2]+X[13])/de,ee[ne+2]=(X[2]*$[ne]+X[6]*$[ne+1]+X[10]*$[ne+2]+X[14])/de}return ee}}(oD||(oD={})),(lD=sD||(sD={})).white={r:1,g:1,b:1},lD.red={r:1,g:0,b:0},lD.black={r:0,g:0,b:0},lD.toRgb255a1=function r(X){return{r:Math.round(255*X.r),g:Math.round(255*X.g),b:Math.round(255*X.b),a:1}},lD.clone=function nD(X){return{r:X.r,g:X.g,b:X.b}},lD.fromHex=function s(X){return{r:((X=Math.floor(X))>>16&255)/255,g:(X>>8&255)/255,b:(255&X)/255}},lD.equals=function cD(X,$){return X.r===$.r&&X.g===$.g&&X.b===$.b},lD.lerp=function a(X,$,ee){return{r:X.r+($.r-X.r)*ee,g:X.g+($.g-X.g)*ee,b:X.b+($.b-X.b)*ee}},(cD=uD||(uD={})).white=At(Ct({},sD.white),{a:1}),cD.from0to1=function X_(X){return{r:X[0],g:X[1],b:X[2],a:X[3]}},cD.fromHexAndA=function eD(X,$){return At(Ct({},sD.fromHex(X)),{a:$})},cD.toRgb255a1=function r(X){return{r:Math.round(255*X.r),g:Math.round(255*X.g),b:Math.round(255*X.b),a:X.a}},cD.equals=function nD(X,$){return sD.equals(X,$)&&X.a===$.a},cD.lerp=function s(X,$,ee){return{r:X.r+($.r-X.r)*ee,g:X.g+($.g-X.g)*ee,b:X.b+($.b-X.b)*ee,a:X.a+($.a-X.a)*ee}},function(X){X.identity={position:[0,0,0],rotation:[0,0,0],scale:[1,1,1]}}(hD||(hD={})),function(X){X.defaultData={mass:1,stiffness:80,damping:10,velocity:0}}(dD||(dD={})),function(X){X.defaultData={control1:[.5,.05],control2:[.1,.3]}}(fD||(fD={})),function(X){X.defaultData=function i(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;return{type:"radial",hideBase:!1,count:3,radial:{radius:2*Math.max(X[0],X[1]),start:0,end:360,alignment:!1,axis:"y",scale:[1,1,1],rotation:[0,0,0],position:[0,0,0]},linear:{scale:[1,1,1],rotation:[0,0,0],position:[X[0]+X[0]*$,0,0]},grid:{count:[2,2,2],size:X.map((function(X){return X*(1+$)})),useCenter:!0}}}}(pD||(pD={}));var CD=function(){function jn(){_classCallCheck(this,jn)}return _createClass(jn,[{key:"modifyById",value:function modifyById(X,$){if(void 0===this[X])throw new Error("not expected");var ee=At(Ct({},this),(0,ne.Z)({},X,$));return Object.setPrototypeOf(ee,jn.prototype),ee}},{key:"add",value:function add(X,$){var ee,ne=this.runOp({type:1,id:X,data:$});return null!=(ee=null==ne?void 0:ne.data)?ee:this}},{key:"runOp",value:function runOp(X){var $=this;if(1===X.type){var ee,ae=$[X.id];ee=void 0===ae?{type:2,id:X.id}:{type:1,id:X.id,data:ae};var de=X.id,fe=X.data,Ue=At(Ct({},$),(0,ne.Z)({},de,fe));return Object.setPrototypeOf(Ue,jn.prototype),{data:Ue,actual:X,reverse:ee}}if(2===X.type){var je=X.id,Ke=$[je];if(void 0===Ke)return null;var et=Ct({},$);return Object.setPrototypeOf(et,jn.prototype),delete et[je],{data:et,actual:X,reverse:{type:1,id:je,data:Ke}}}throw new Error("illegal arg")}}]),jn}();function Dh(X){if(void 0===X.deepFreeze){var $,ee=Object.getOwnPropertyNames(X),ne=(0,je.Z)(ee);try{for(ne.s();!($=ne.n()).done;){var ae=X[$.value];ae&&"object"==typeof ae&&Dh(ae)}}catch(de){ne.e(de)}finally{ne.f()}return Object.freeze(X)}X.deepFreeze(X)}var AD=function(X){_inherits(zd,X);var $=_createSuper(zd);function zd(){return _classCallCheck(this,zd),$.apply(this,arguments)}return _createClass(zd)}(_wrapNativeSuper(Error));function Li(X,$,ee){if(void 0===X?void 0===$?(X=0,$=10):X=$-10:void 0===$&&($=X+10),X>$){var ne=X;X=$,$=ne}for(var ae=[],de=1/(ee+1),fe=0;fe<ee;fe++){var Ue=X+($-X)*(fe+.75+.5*Math.random())*de;ae.push(Ue)}return ae}function rM(X,$){var ee,ne=(0,je.Z)(X);try{for(ne.s();!(ee=ne.n()).done;){var ae=ee.value;$(ae.id,ae.data),rM(ae.children,$)}}catch(de){ne.e(de)}finally{ne.f()}}function nM(X,$){$(X.id,X.data);var ee,ne=(0,je.Z)(X.children);try{for(ne.s();!(ee=ne.n()).done;){nM(ee.value,$)}}catch(ae){ne.e(ae)}finally{ne.f()}}var MD,ED=function(X){_inherits(qn,X);var $=_createSuper(qn);function qn(){var X;_classCallCheck(this,qn);for(var ee=arguments.length,ne=new Array(ee),ae=0;ae<ee;ae++)ne[ae]=arguments[ae];return X=$.call.apply($,[this].concat(ne)),Object.setPrototypeOf(_assertThisInitialized(X),qn.prototype),X}return _createClass(qn,[{key:"deepFreeze",value:function deepFreeze(){for(var X=0;X<this.length;)Dh(this[X]),X++}},{key:"fillCaches0",value:function fillCaches0(X,$){this.objCaches.set(X.id,X),this.parentCaches.set(X.id,$);var ee,ne=(0,je.Z)(X.children);try{for(ne.s();!(ee=ne.n()).done;){var ae=ee.value;this.fillCaches0(ae,X.id)}}catch(de){ne.e(de)}finally{ne.f()}}},{key:"fillCaches",value:function fillCaches(){if(void 0===this.objCaches){this.objCaches=new Map,this.parentCaches=new Map;var X,$=(0,je.Z)(this);try{for($.s();!(X=$.n()).done;){var ee=X.value;this.fillCaches0(ee,null)}}catch(ne){$.e(ne)}finally{$.f()}}}},{key:"randomId",value:function randomId(){this.fillCaches();var X=Array.from(this.objCaches.keys());if(0!==X.length)return X[Math.max(0,Math.floor(Math.random()*X.length)-1)]}},{key:"isDescendantOf",value:function isDescendantOf(X,$){for(;X;){var ee=this.parent(X);if(ee===$)return!0;X=ee}return!1}},{key:"data",value:function data(X){var $;return null==($=this.get(X))?void 0:$.data}},{key:"has",value:function has(X){return void 0!==this.childrenOf(X)}},{key:"get",value:function get(X){return this.fillCaches(),this.objCaches.get(X)}},{key:"childrenOf",value:function childrenOf(X){var $;return null===X?this:null==($=this.get(X))?void 0:$.children}},{key:"traverseFrom",value:function traverseFrom(X,$){if(null===X)this.traverse($);else{var ee=this.get(X);ee&&nM(ee,$)}}},{key:"traverse",value:function traverse(X){rM(this,X)}},{key:"totalSize",value:function totalSize(){return this.fillCaches(),this.objCaches.size}},{key:"parent",value:function parent(X){return this.fillCaches(),this.parentCaches.get(X)}},{key:"childrenArray",value:function childrenArray(X){return null===X?this:this.get(X).children}},{key:"modifyById",value:function modifyById(X,$){if(void 0===this.get(X))throw new Error("not expected");var ee=this.parent(X),ne=this.childrenArray(ee),de=ne.findIndex((function($){return $.id===X}));if(de<0)throw new Error("not expected");var fe=ne[de];return(ne=(0,ae.Z)(ne))[de]=At(Ct({},fe),{data:$}),this.modifyArrayBy(ee,ne)}},{key:"modifyArrayBy",value:function modifyArrayBy(X,$){for(var ee=this,ne=X,de=$,fe=function _loop3(){var X=de,$=ne;if(void 0===(ne=ee.parent(ne)))throw new Error;var fe=(de=ee.childrenArray(ne)).findIndex((function(X){return X.id===$}));if(fe<0)throw new Error;(de=(0,ae.Z)(de))[fe]=At(Ct({},de[fe]),{children:X})};null!==ne;)fe();Object.setPrototypeOf(de,qn.prototype);var Ue=de;return Ue.fillCaches(),Ue}},{key:"runOp",value:function runOp(X){switch(X.type){case 7:return this.addOp(X);case 8:return this.deleteOp(X);case 9:return this.moveOp(X)}}},{key:"checkDuplicatedIdRec",value:function checkDuplicatedIdRec(X){var $=X.id,ee=X.children;if(void 0!==this.get($))return!0;var ne,ae=(0,je.Z)(ee);try{for(ae.s();!(ne=ae.n()).done;){var de=ne.value;if(this.checkDuplicatedIdRec(de))return!0}}catch(fe){ae.e(fe)}finally{ae.f()}return!1}},{key:"addOp",value:function addOp(X){var $=X.parent,ee=X.fi,ne=X.id,de=X.data,fe=X.children;if(null!==$&&void 0===this.get($))return null;if(this.checkDuplicatedIdRec(X))return null;var Ue=$,je=this.childrenArray(Ue),Ke={fi:ee,id:ne,data:de,children:fe};return(je=[].concat((0,ae.Z)(je),[Ke])).sort((function(X,$){return X.fi-$.fi})),X.localIndex=je.indexOf(Ke),{data:this.modifyArrayBy(Ue,je),actual:X,reverse:{type:8,id:ne}}}},{key:"deleteOp",value:function deleteOp(X){var $=X.id;if(null===this.get($))return null;var ee=this.parent($);if(void 0===ee)return null;var ne=this.childrenArray(ee),de=ne.findIndex((function(X){return X.id===$}));X.localIndex=de;var fe=(ne=(0,ae.Z)(ne)).splice(de,1)[0];return{data:this.modifyArrayBy(ee,ne),actual:X,reverse:At(Ct({type:7},fe),{parent:ee})}}},{key:"moveOp",value:function moveOp(X){var $=X.parent,ee=X.fi,ne=X.id;if(null!==$&&void 0===this.get($))return this.deleteOp({type:8,id:ne});if(null!==$)for(var de=$;null!==de;){if(void 0===de)throw new Error;if(de===ne)throw new AD("cyclic tree");de=this.parent(de)}var fe=this.parent(ne);if(void 0===fe)return null;var Ue=fe,je=this.childrenArray(fe),Ke=je.findIndex((function(X){return X.id===ne})),et=(je=(0,ae.Z)(je)).splice(Ke,1)[0],tt=this.modifyArrayBy(fe,je);fe=$,je=tt.childrenArray(fe);var nt=et.fi;return et=At(Ct({},et),{fi:ee}),(je=[].concat((0,ae.Z)(je),[et])).sort((function(X,$){return X.fi-$.fi})),X.localIndex=je.indexOf(et),{data:tt=tt.modifyArrayBy(fe,je),actual:X,reverse:{type:9,parent:Ue,fi:nt,id:ne}}}},{key:"previous",value:function previous(X,$){if(null===$){var ee=this.childrenArray(X);return 0===ee.length?null:ee[ee.length-1].id}var ne,ae=null,de=(0,je.Z)(this.childrenArray(X));try{for(de.s();!(ne=de.n()).done;){var fe=ne.value;if(fe.id===$)return ae;ae=fe.id}}catch(Ue){de.e(Ue)}finally{de.f()}return null}},{key:"traverseSortNext",value:function traverseSortNext(X){var $=this.parent(X);if(void 0!==$){var ee=this.childrenArray($),ne=ee.findIndex((function($){return $.id===X}))+1;if(ne<ee.length)return ee[ne].id;if($)return this.traverseSortNext($)}}},{key:"sortNext",value:function sortNext(X){var $=this.childrenArray(X);return $.length>0?$[0].id:this.traverseSortNext(X)}},{key:"traverseSortPrevious",value:function traverseSortPrevious(X){var $=this.childrenArray(X);return $.length>0?this.traverseSortPrevious($[$.length-1].id):X}},{key:"sortPrevious",value:function sortPrevious(X){var $=this.parent(X);if(void 0!==$){var ee=this.childrenArray($),ne=ee.findIndex((function($){return $.id===X}))-1;return ne>=0?this.traverseSortPrevious(ee[ne].id):$}}},{key:"getAllSorted",value:function getAllSorted(X){var $,ee=[],ne=(0,je.Z)(X);try{for(ne.s();!($=ne.n()).done;){var ae=$.value,de=this.getWithSortKey(ae.id);void 0!==de&&ee.push(Ct(Ct({},ae),de))}}catch(Ke){ne.e(Ke)}finally{ne.f()}ee.sort((function(X,$){return function $S(X,$){for(var ee=0;ee<X.length&&ee<$.length;){if(X[ee]<$[ee])return-1;if(X[ee]>$[ee])return 1;ee+=1}return ee!==$.length?-1:ee!==X.length?1:0}(X.sortKey,$.sortKey)}));for(var fe=0,Ue=ee;fe<Ue.length;fe++){delete Ue[fe].sortKey}return ee}},{key:"getWithSortKey",value:function getWithSortKey(X){var $=X,ee=[],ne=this.get($),ae=ne;if(void 0!==ne){for(;$;)ee.splice(0,0,ne.fi),null!==($=this.parent($))&&(ne=this.get($));return At(Ct({},ae),{sortKey:ee})}}},{key:"insertBeforeHelper",value:function insertBeforeHelper(X,$,ee){return this.insertAfterHelper(X,this.previous(X,$),ee)}},{key:"insertAfterHelper",value:function insertAfterHelper(X,$,ee){var ne=this.childrenArray(X);if(null===$){if(0===ne.length)return Li(0,ee,ee);var ae=ne[0].fi;return Li(ae-ee,ae,ee)}var de=this.get($);if(void 0===de||this.parent($)!==X)throw new Error("illegal args");var fe=ne.find((function(X){return X.fi>de.fi}));if(void 0===fe){var Ue=ne[ne.length-1].fi;return Li(Ue,Ue+ee,ee)}return Li(de.fi,fe.fi,ee)}}]),qn}(_wrapNativeSuper(Array));!function(X){X.runOp=function i(X,$){if(Array.isArray(X)){var ee=$.props,ne={},de=(0,ae.Z)(X),fe=!1;if(ee)for(var Ue=0,je=Object.keys(ee);Ue<je.length;Ue++){var Ke=je[Ue],et=parseInt(Ke);if(isNaN(et))throw new Error("wrong index");ne[Ke]=de[et],de[et]=ee[Ke],fe=!0}return fe?{data:de,actual:$,reverse:{type:0,props:ne}}:null}var tt=$.props,nt={},it=Ct({},X),ct=!1;if(tt)for(var dt=0,vt=Object.keys(tt);dt<vt.length;dt++){var gt=vt[dt];nt[gt]=it[gt];var yt=tt[gt];void 0===yt?delete it[gt]:it[gt]=yt,ct=!0}return ct?{data:it,actual:$,reverse:{type:0,props:nt}}:null}}(MD||(MD={}));var TD=function(X){_inherits(rr,X);var $=_createSuper(rr);function rr(){var X;_classCallCheck(this,rr);for(var ee=arguments.length,ne=new Array(ee),ae=0;ae<ee;ae++)ne[ae]=arguments[ae];return X=$.call.apply($,[this].concat(ne)),Object.setPrototypeOf(_assertThisInitialized(X),rr.prototype),X}return _createClass(rr,[{key:"deepFreeze",value:function deepFreeze(){for(var X=0;X<this.length;)Dh(this[X]),X++}},{key:"fillCaches0",value:function fillCaches0(X){this.objCaches.set(X.id,X)}},{key:"fillCaches",value:function fillCaches(){if(void 0===this.objCaches){this.objCaches=new Map,Object.getOwnPropertyDescriptor(this,"objCaches").enumerable=!1;var X,$=(0,je.Z)(this);try{for($.s();!(X=$.n()).done;){var ee=X.value;this.fillCaches0(ee)}}catch(ne){$.e(ne)}finally{$.f()}}}},{key:"randomId",value:function randomId(){this.fillCaches();var X=Array.from(this.objCaches.keys());if(0!==X.length)return X[Math.max(0,Math.floor(Math.random()*X.length)-1)]}},{key:"data",value:function data(X){var $;return null==($=this.get(X))?void 0:$.data}},{key:"get",value:function get(X){return this.fillCaches(),this.objCaches.get(X)}},{key:"modifyById",value:function modifyById(X,$){if(void 0===this.get(X))throw new Error("not expected");var ee=this,ne=ee.findIndex((function($){return $.id===X}));if(ne<0)throw new Error("not expected");var de=ee[ne];return(ee=(0,ae.Z)(ee))[ne]=At(Ct({},de),{data:$}),this.modifyArrayBy(ee)}},{key:"modifyArrayBy",value:function modifyArrayBy(X){Object.setPrototypeOf(X,rr.prototype);var $=X;return function tM(){return typeof process<"u"}()||$.fillCaches(),$}},{key:"runOp",value:function runOp(X){switch(X.type){case 4:return this.addOp(X);case 5:return this.deleteOp(X);case 6:return this.moveOp(X)}}},{key:"addOp",value:function addOp(X){var $=X.fi,ee=X.id,ne=this,de={fi:$,id:ee,data:X.data};return(ne=[].concat((0,ae.Z)(ne),[de])).sort((function(X,$){return X.fi-$.fi})),X.localIndex=ne.indexOf(de),{data:this.modifyArrayBy(ne),actual:X,reverse:{type:5,id:ee}}}},{key:"deleteOp",value:function deleteOp(X){var $=X.id,ee=this,ne=ee.findIndex((function(X){return X.id===$}));if(-1===ne)return null;X.localIndex=ne;var de=(ee=(0,ae.Z)(ee)).splice(ne,1)[0];return{data:this.modifyArrayBy(ee),actual:X,reverse:Ct({type:4},de)}}},{key:"moveOp",value:function moveOp(X){var $=X.fi,ee=X.id,ne=this,de=(ne=(0,ae.Z)(ne)).findIndex((function(X){return X.id===ee}));if(-1===de)return null;var fe=ne[de].fi,Ue=At(Ct({},ne[de]),{fi:$});return ne[de]=Ue,ne.sort((function(X,$){return X.fi-$.fi})),X.localIndex=ne.indexOf(Ue),{data:this.modifyArrayBy(ne),actual:X,reverse:{type:6,fi:fe,id:ee}}}},{key:"previous",value:function previous(X){if(null===X)return 0===this.length?null:this[this.length-1].id;var $,ee=null,ne=(0,je.Z)(this);try{for(ne.s();!($=ne.n()).done;){var ae=$.value;if(ae.id===X)return ee;ee=ae.id}}catch(de){ne.e(de)}finally{ne.f()}return null}},{key:"insertBeforeHelper",value:function insertBeforeHelper(X,$){return this.insertAfterHelper(this.previous(X),$)}},{key:"insertAfterHelper",value:function insertAfterHelper(X,$){var ee=this;if(null===X){if(0===ee.length)return Li(0,$,$);var ne=ee[0].fi;return Li(ne-$,ne,$)}var ae=this.get(X);if(void 0===ae)throw new Error("illegal args");var de=ee.find((function(X){return X.fi>ae.fi}));if(void 0===de){var fe=ee[ee.length-1].fi;return Li(fe,fe+$,$)}return Li(ae.fi,de.fi,$)}}]),rr}(_wrapNativeSuper(Array)),PD=Symbol(),DD=Symbol(),LD=function(){function Sl(){_classCallCheck(this,Sl)}return _createClass(Sl,[{key:"reportOp",value:function reportOp(X,$){var ee=this;if(null!==$){ee._current=$.data;for(var ne=[];!(ee instanceof eL);){var ae=ee._path,de=ee._current;if(""!==ae&&ne.splice(0,0,ae),null===(ee=ee._parent))return;ee.update(ae,de)}ee.push(ne,X,$.actual,$.reverse)}}},{key:"deleteChildren",value:function deleteChildren(X){if(this._children){var $=this._children[X];if($){var ee=$[DD];ee&&ee(),delete this._children[X]}}}}]),Sl}(),OD=function(X){_inherits(Sy,X);var $=_createSuper(Sy);function Sy(X,ee,ne){var ae;return _classCallCheck(this,Sy),(ae=$.call(this))._parent=X,ae._path=ee,ae._current=ne,ae}return _createClass(Sy,[{key:"update",value:function update(X,$){if(Array.isArray(this._current)){if("string"==typeof X&&(X=parseInt(X),isNaN(X)))throw new Error("Invalid path");this._current=(0,ae.Z)(this._current),this._current[X]=$}else this._current=At(Ct({},this._current),(0,ne.Z)({},X,$))}},{key:"runOp",value:function runOp(X){this.reportOp(X,MD.runOp(this._current,X))}}]),Sy}(LD),RD=function(X){_inherits(My,X);var $=_createSuper(My);function My(X,ee,ne){var ae;return _classCallCheck(this,My),(ae=$.call(this))._parent=X,ae._path=ee,ae._current=ne,ae}return _createClass(My,[{key:"update",value:function update(X,$){this._current=At(Ct({},this._current),(0,ne.Z)({},X,$)),Object.setPrototypeOf(this._current,CD.prototype)}},{key:"runOp",value:function runOp(X){this.reportOp(X,this._current.runOp(X))}}]),My}(LD),BD={get:function get(X,$){if($===DD)return function(){X._parent=null};if($===PD)return X._current;var ee=X._current,ne=X._children;if("push"===$&&Array.isArray(ee))throw new Error("not supported to expand array");var ae=void 0===ne?void 0:ne[$];if(void 0!==ae)return ae;var de=ee[$],fe=Hd(X,$,de);return fe!==de?(void 0===ne&&(ne={},X._children=ne),ne[$]=fe,fe):de},has:function has(X,$){return $ in X._current},ownKeys:function ownKeys(X){return Reflect.ownKeys(X._current)},defineProperty:function defineProperty(){throw Error("not supported")},getPrototypeOf:function getPrototypeOf(X){return Object.getPrototypeOf(X._current)},setPrototypeOf:function setPrototypeOf(){throw Error("not supported")},getOwnPropertyDescriptor:function getOwnPropertyDescriptor(X,$){var ee=X._current,ne=Reflect.getOwnPropertyDescriptor(ee,$);return ne&&{writable:!0,configurable:!0,enumerable:ne.enumerable,value:ee[$]}}},ID=At(Ct({},BD),{set:function set(X,$,ee){var ae,de={type:0,props:(0,ne.Z)({},$,null!=(ae=Ey(ee))?ae:ee)};return X.deleteChildren($),X.runOp(de),!0},deleteProperty:function deleteProperty(X,$){var ee={type:0,props:(0,ne.Z)({},$,void 0)};return X.deleteChildren($),X.runOp(ee),!0}}),zD=At(Ct({},BD),{set:function set(X,$,ee){return void 0===ee?this.deleteProperty(X,$):(X.deleteChildren($),X.runOp({type:1,id:$,data:ee})),!0},deleteProperty:function deleteProperty(X,$){return X.runOp({type:2,id:$}),!0}}),ND=function(X){_inherits(Ml,X);var $=_createSuper(Ml);function Ml(X,ee,ne){var ae;return _classCallCheck(this,Ml),(ae=$.call(this))._children={},ae._parent=X,ae._path=ee,ae._current=ne,ae[DD]=function(){ae._parent=null},ae}return _createClass(Ml,[{key:"unproxy",value:function unproxy(){return this._current}},{key:"update",value:function update(X,$){this._current=this._current.modifyById(X,$)}},{key:"runOp",value:function runOp(X){this.reportOp(X,this._current.runOp(X))}},{key:"randomId",value:function randomId(){return this._current.randomId()}},{key:"isDescendantOf",value:function isDescendantOf(X,$){return this._current.isDescendantOf(X,$)}},{key:"childrenOf",value:function childrenOf(X){return this._current.childrenOf(X)}},{key:"traverse",value:function traverse(X){var $=this;this._current.traverse((function(ee,ne){X(ee,$.data(ee))}))}},{key:"get",value:function get(X){return this._current.get(X)}},{key:"parent",value:function parent(X){return this._current.parent(X)}},{key:"data",value:function data(X){var $,ee=this._current,ne=this._children,ae=void 0===ne?void 0:ne[X];if(void 0!==ae)return ae;var de=null==($=ee.get(X))?void 0:$.data,fe=Hd(this,X,de);return fe!==de?(void 0===ne&&(ne={},this._children=ne),ne[X]=fe,fe):de}},{key:"add",value:function add(X,$,ee,ne,ae){this.runOp({type:7,parent:X,fi:$,id:ee,data:ne,children:ae})}},{key:"move",value:function move(X,$,ee){this.runOp({type:9,parent:X,fi:$,id:ee})}},{key:"insertAfter",value:function insertAfter(X,$,ee){for(var ne=this._current.insertAfterHelper(X,$,ee.length),ae=0;ae<ee.length;ae++){var de=ee[ae];this.add(X,ne[ae],de.id,de.data,de.children)}}},{key:"insertBefore",value:function insertBefore(X,$,ee){for(var ne=this._current.insertBeforeHelper(X,$,ee.length),ae=0;ae<ee.length;ae++){var de=ee[ae];this.add(X,ne[ae],de.id,de.data,de.children)}}},{key:"moveAfter",value:function moveAfter(X,$,ee){for(var ne=this._current.insertAfterHelper(X,$,ee.length),ae=0;ae<ee.length;ae++){var de=ee[ae];this.move(X,ne[ae],de)}}},{key:"moveBefore",value:function moveBefore(X,$,ee){for(var ne=this._current.insertBeforeHelper(X,$,ee.length),ae=0;ae<ee.length;ae++){var de=ee[ae];this.move(X,ne[ae],de)}}},{key:"delete",value:function _delete(X){this.deleteChildren(X),this.runOp({type:8,id:X})}},{key:"sortNext",value:function sortNext(X){return this._current.sortNext(X)}},{key:"sortPrevious",value:function sortPrevious(X){return this._current.sortPrevious(X)}},{key:"getAllSorted",value:function getAllSorted(X){return this._current.getAllSorted(X)}}]),Ml}(LD),FD=function(X){_inherits(Al,X);var $=_createSuper(Al);function Al(X,ee,ne){var ae;return _classCallCheck(this,Al),(ae=$.call(this))._children={},ae._parent=X,ae._path=ee,ae._current=ne,ae[DD]=function(){ae._parent=null},ae}return _createClass(Al,[{key:"unproxy",value:function unproxy(){return this._current}},{key:"length",get:function get(){return this._current.length}},{key:"forEach",value:function forEach(X){for(var $=this.length,ee=0;ee<$;ee++){var ne=this._current[ee].id;X(this.data(this._current[ee].id),ne)}}},{key:"update",value:function update(X,$){this._current=this._current.modifyById(X,$)}},{key:"randomId",value:function randomId(){return this._current.randomId()}},{key:"get",value:function get(X){return At(Ct({},this._current.get(X)),{data:this.data(X)})}},{key:"data",value:function data(X){var $,ee=this._current,ne=this._children,ae=void 0===ne?void 0:ne[X];if(void 0!==ae)return ae;var de=null==($=ee.get(X))?void 0:$.data,fe=Hd(this,X,de);return fe!==de?(void 0===ne&&(ne={},this._children=ne),ne[X]=fe,fe):de}},{key:"runOp",value:function runOp(X){this.reportOp(X,this._current.runOp(X))}},{key:"add",value:function add(X,$,ee){this.runOp({type:4,fi:X,id:$,data:ee})}},{key:"move",value:function move(X,$){this.runOp({type:6,fi:X,id:$})}},{key:"insertAfter",value:function insertAfter(X,$){for(var ee=this._current.insertAfterHelper(X,$.length),ne=0;ne<$.length;ne++){var ae=$[ne];this.add(ee[ne],ae.id,ae.data)}}},{key:"insertBefore",value:function insertBefore(X,$){for(var ee=this._current.insertBeforeHelper(X,$.length),ne=0;ne<$.length;ne++){var ae=$[ne];this.add(ee[ne],ae.id,ae.data)}}},{key:"moveAfter",value:function moveAfter(X,$){for(var ee=this._current.insertAfterHelper(X,$.length),ne=0;ne<$.length;ne++){var ae=$[ne];this.move(ee[ne],ae)}}},{key:"moveBefore",value:function moveBefore(X,$){for(var ee=this._current.insertBeforeHelper(X,$.length),ne=0;ne<$.length;ne++){var ae=$[ne];this.move(ee[ne],ae)}}},{key:"delete",value:function _delete(X){this.deleteChildren(X),this.runOp({type:5,id:X})}}]),Al}(LD);function wy(X,$,ee){if(X.length>0){var ne=X[X.length-1];if(0===ne.type&&0===$.type&&UD.equal(ne.path,ee))return void Object.assign(ne.props,$.props)}X.push(At(Ct({},$),{path:ee}))}var UD,eL=function(){function kd(X){_classCallCheck(this,kd),this.ts=[],this.actual=[],this.reverse=[],this._current=X}return _createClass(kd,[{key:"update",value:function update(X,$){if(""!==X)throw new Error("");this._current=$}},{key:"push",value:function push(X,$,ee,ne){wy(this.ts,$,X),wy(this.actual,ee,X),wy(this.reverse,ne,X)}},{key:"result",value:function result(){return{data:this._current,ts:this.ts,actual:this.actual,reverse:this.reverse.reverse()}}}]),kd}();function Hd(X,$,ee){return ee instanceof ED?new ND(X,$,ee):ee instanceof TD?new FD(X,$,ee):ee instanceof CD?new Proxy(new RD(X,$,ee),zD):null!==ee&&"object"==typeof ee?function eM(X){return X instanceof Uint8Array||X instanceof Uint16Array||X instanceof Uint32Array||X instanceof Int8Array||X instanceof Int16Array||X instanceof Int32Array||X instanceof Float32Array||X instanceof Float64Array}(ee)?ee:new Proxy(new OD(X,$,ee),ID):ee}function Ay(X){var $=new eL(X);return[Hd($,"",X),$]}function Ty(X,$){var ee=Ay(X),ne=(0,fe.Z)(ee,2),ae=ne[0],de=ne[1];return $(ae),de.result()}function Ey(X){return X instanceof ND||X instanceof FD?X._current:null!==X&&"object"==typeof X?X[PD]:X}!function(X){function t(X,$){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return $.length<=ee?X:(X instanceof ED||X instanceof ND)&&"string"==typeof $[ee]||(X instanceof TD||X instanceof FD)&&"string"==typeof $[ee]?t(X.data($[ee]),$,ee+1):"number"==typeof $[ee]&&Array.isArray(X)||"string"==typeof $[ee]&&"object"==typeof X?t(X[$[ee]],$,ee+1):void 0}X.equal=function i(X,$){if($.length!==X.length)return!1;for(var ee=0;ee<X.length;){if(X[ee]!==$[ee])return!1;ee+=1}return!0},X.removeOverridden=function e(X,$,ee){var ne=t(ee,X);if(void 0!==ne&&"object"==typeof ne&&null!==ne){var ae=Ct({},$);return Object.keys(ne).forEach((function(X){delete ae[X]})),ae}return $},X.zoom=t}(UD||(UD={}));var nL,rL=_createClass((function jd(){_classCallCheck(this,jd)})),uL=function(X){_inherits(Ph,X);var $=_createSuper(Ph);function Ph(X){var ee;return _classCallCheck(this,Ph),(ee=$.call(this)).id=X,ee}return _createClass(Ph)}(rL),vL=function(X){_inherits(Lh,X);var $=_createSuper(Lh);function Lh(X){var ee;return _classCallCheck(this,Lh),(ee=$.call(this)).data=X,ee}return _createClass(Lh)}(rL);try{nL=new TextDecoder}catch(mY){}var _L,SL,ML,PL,UL,eO,tO,nO=0,rO=[],uO=rO,hO=0,dO={},fO=0,pO=0,vO=[],mO={useRecords:!1,mapsAsObjects:!0},gO=_createClass((function Ih(){_classCallCheck(this,Ih)})),yO=new gO;yO.name="MessagePack 0xC1";var bO=!1,xO=function(){function Ri(X){_classCallCheck(this,Ri),X&&(!1===X.useRecords&&void 0===X.mapsAsObjects&&(X.mapsAsObjects=!0),X.structures?X.structures.sharedLength=X.structures.length:X.getStructures&&((X.structures=[]).uninitialized=!0,X.structures.sharedLength=0)),Object.assign(this,X)}return _createClass(Ri,[{key:"unpack",value:function unpack(X,$){var ee=this;if(_L)return vM((function(){return Yd(),ee?ee.unpack(X,$):Ri.prototype.unpack.call(mO,X,$)}));SL=$>-1?$:X.length,nO=0,hO=0,pO=0,PL=null,uO=rO,UL=null,_L=X;try{tO=X.dataView||(X.dataView=new DataView(X.buffer,X.byteOffset,X.byteLength))}catch(r){throw _L=null,X instanceof Uint8Array?r:new Error("Source must be a Uint8Array or Buffer but was a "+(X&&"object"==typeof X?X.constructor.name:typeof X))}if(this instanceof Ri){if(dO=this,this.structures)return ML=this.structures,qd();(!ML||ML.length>0)&&(ML=[])}else dO=mO,(!ML||ML.length>0)&&(ML=[]);return qd()}},{key:"unpackMultiple",value:function unpackMultiple(X,$){var ee,ne=0;try{bO=!0;var ae=X.length,de=this?this.unpack(X,ae):UO.unpack(X,ae);if(!$){for(ee=[de];nO<ae;)ne=nO,ee.push(qd());return ee}for($(de);nO<ae;)if(ne=nO,!1===$(qd()))return}catch(ae){throw ae.lastPosition=ne,ae.values=ee,ae}finally{bO=!1,Yd()}}},{key:"_mergeStructures",value:function _mergeStructures(X,$){for(var ee=0,ne=(X=X||[]).length;ee<ne;ee++){var ae=X[ee];ae&&(ae.isShared=!0,ee>=32&&(ae.highByte=ee-32>>5))}for(var de in X.sharedLength=X.length,$||[])if(de>=0){var fe=X[de],Ue=$[de];Ue&&(fe&&((X.restoreStructures||(X.restoreStructures=[]))[de]=fe),X[de]=Ue)}return this.structures=X}},{key:"decode",value:function decode(X,$){return this.unpack(X,$)}}]),Ri}();function qd(){try{if(!dO.trusted&&!bO){var X=ML.sharedLength||0;X<ML.length&&(ML.length=X)}var $=lr();if(nO==SL)ML.restoreStructures&&aM(),ML=null,_L=null,eO&&(eO=null);else{if(nO>SL){var ee=new Error("Unexpected end of MessagePack data");throw ee.incomplete=!0,ee}if(!bO)throw new Error("Data read, but end of buffer not reached")}return $}catch(la){throw ML.restoreStructures&&aM(),Yd(),(la instanceof RangeError||la.message.startsWith("Unexpected end of buffer"))&&(la.incomplete=!0),la}}function aM(){for(var X in ML.restoreStructures)ML[X]=ML.restoreStructures[X];ML.restoreStructures=null}function lr(){var X,$=_L[nO++];if($<160){if($<128){if($<64)return $;var ee=ML[63&$]||dO.getStructures&&pM()[63&$];return ee?(ee.read||(ee.read=Ry(ee,63&$)),ee.read()):$}if($<144){if($-=128,dO.mapsAsObjects){for(var ne={},ae=0;ae<$;ae++)ne[gM()]=lr();return ne}for(var de=new Map,fe=0;fe<$;fe++)de.set(lr(),lr());return de}$-=144;for(var Ue=new Array($),je=0;je<$;je++)Ue[je]=lr();return Ue}if($<192){var Ke=$-160;if(pO>=nO)return PL.slice(nO-fO,(nO+=Ke)-fO);if(0==pO&&SL<140){var et=Ke<16?By(Ke):mM(Ke);if(null!=et)return et}return CO(Ke)}switch($){case 192:return null;case 193:return UL?(X=lr())>0?UL[1].slice(UL.position1,UL.position1+=X):UL[0].slice(UL.position0,UL.position0-=X):yO;case 194:return!1;case 195:return!0;case 196:return _y(_L[nO++]);case 197:return X=tO.getUint16(nO),nO+=2,_y(X);case 198:return X=tO.getUint32(nO),nO+=4,_y(X);case 199:return jo(_L[nO++]);case 200:return X=tO.getUint16(nO),nO+=2,jo(X);case 201:return X=tO.getUint32(nO),nO+=4,jo(X);case 202:if(X=tO.getFloat32(nO),dO.useFloat32>2){var tt=IO[(127&_L[nO])<<1|_L[nO+1]>>7];return nO+=4,(tt*X+(X>0?.5:-.5)>>0)/tt}return nO+=4,X;case 203:return X=tO.getFloat64(nO),nO+=8,X;case 204:return _L[nO++];case 205:return X=tO.getUint16(nO),nO+=2,X;case 206:return X=tO.getUint32(nO),nO+=4,X;case 207:return dO.int64AsNumber?(X=4294967296*tO.getUint32(nO),X+=tO.getUint32(nO+4)):X=tO.getBigUint64(nO),nO+=8,X;case 208:return tO.getInt8(nO++);case 209:return X=tO.getInt16(nO),nO+=2,X;case 210:return X=tO.getInt32(nO),nO+=4,X;case 211:return dO.int64AsNumber?(X=4294967296*tO.getInt32(nO),X+=tO.getUint32(nO+4)):X=tO.getBigInt64(nO),nO+=8,X;case 212:if(114==(X=_L[nO++]))return LO(63&_L[nO++]);var nt=vO[X];if(nt)return nt.read?(nO++,nt.read(lr())):nt.noBuffer?(nO++,nt()):nt(_L.subarray(nO,++nO));throw new Error("Unknown extension "+X);case 213:return 114==(X=_L[nO])?(nO++,LO(63&_L[nO++],_L[nO++])):jo(2);case 214:return jo(4);case 215:return jo(8);case 216:return jo(16);case 217:return X=_L[nO++],pO>=nO?PL.slice(nO-fO,(nO+=X)-fO):AO(X);case 218:return X=tO.getUint16(nO),pO>=(nO+=2)?PL.slice(nO-fO,(nO+=X)-fO):MO(X);case 219:return X=tO.getUint32(nO),pO>=(nO+=4)?PL.slice(nO-fO,(nO+=X)-fO):EO(X);case 220:return X=tO.getUint16(nO),nO+=2,cM(X);case 221:return X=tO.getUint32(nO),nO+=4,cM(X);case 222:return X=tO.getUint16(nO),nO+=2,hM(X);case 223:return X=tO.getUint32(nO),nO+=4,hM(X);default:if($>=224)return $-256;if(void 0===$){var it=new Error("Unexpected end of MessagePack data");throw it.incomplete=!0,it}throw new Error("Unknown MessagePack token "+$)}}var _O=/^[a-zA-Z_$][a-zA-Z\d_$]*$/;function Ry(X,$){function t(){if(t.count++>2){var ee=X.read=new Function("r","return function(){return {"+X.map((function(X){return _O.test(X)?X+":r()":"["+JSON.stringify(X)+"]:r()"})).join(",")+"}}")(lr);return 0===X.highByte&&(X.read=kO($,X.read)),ee()}for(var ne={},ae=0,de=X.length;ae<de;ae++){ne[X[ae]]=lr()}return ne}return t.count=0,0===X.highByte?kO($,t):t}var kO=function lM(X,$){return function(){var ee=_L[nO++];if(0===ee)return $();var ne=X<32?-(X+(ee<<5)):X+(ee<<5),ae=ML[ne]||pM()[ne];if(!ae)throw new Error("Record id is not defined for "+ne);return ae.read||(ae.read=Ry(ae,X)),ae.read()}};function pM(){var X=vM((function(){return _L=null,dO.getStructures()}));return ML=dO._mergeStructures(X,ML)}var CO=Xd,AO=Xd,MO=Xd,EO=Xd;function Xd(X){var $;if(X<16&&($=By(X)))return $;if(X>64&&nL)return nL.decode(_L.subarray(nO,nO+=X));var ee=nO+X,ne=[];for($="";nO<ee;){var ae=_L[nO++];if(0===(128&ae))ne.push(ae);else if(192===(224&ae)){var de=63&_L[nO++];ne.push((31&ae)<<6|de)}else if(224===(240&ae)){var fe=63&_L[nO++],Ue=63&_L[nO++];ne.push((31&ae)<<12|fe<<6|Ue)}else if(240===(248&ae)){var je=(7&ae)<<18|(63&_L[nO++])<<12|(63&_L[nO++])<<6|63&_L[nO++];je>65535&&(je-=65536,ne.push(je>>>10&1023|55296),je=56320|1023&je),ne.push(je)}else ne.push(ae);ne.length>=4096&&($+=TO.apply(String,ne),ne.length=0)}return ne.length>0&&($+=TO.apply(String,ne)),$}function cM(X){for(var $=new Array(X),ee=0;ee<X;ee++)$[ee]=lr();return $}function hM(X){if(dO.mapsAsObjects){for(var $={},ee=0;ee<X;ee++)$[gM()]=lr();return $}for(var ne=new Map,ae=0;ae<X;ae++)ne.set(lr(),lr());return ne}var TO=String.fromCharCode;function mM(X){for(var $=nO,ee=new Array(X),ne=0;ne<X;ne++){var ae=_L[nO++];if((128&ae)>0)return void(nO=$);ee[ne]=ae}return TO.apply(String,ee)}function By(X){if(X<4){if(X<2){if(0===X)return"";var $=_L[nO++];return(128&$)>1?void(nO-=1):TO($)}var ee=_L[nO++],ne=_L[nO++];if((128&ee)>0||(128&ne)>0)return void(nO-=2);if(X<3)return TO(ee,ne);var ae=_L[nO++];return(128&ae)>0?void(nO-=3):TO(ee,ne,ae)}var de=_L[nO++],fe=_L[nO++],Ue=_L[nO++],je=_L[nO++];if((128&de)>0||(128&fe)>0||(128&Ue)>0||(128&je)>0)nO-=4;else{if(X<6){if(4===X)return TO(de,fe,Ue,je);var Ke=_L[nO++];return(128&Ke)>0?void(nO-=5):TO(de,fe,Ue,je,Ke)}if(X<8){var et=_L[nO++],tt=_L[nO++];if((128&et)>0||(128&tt)>0)return void(nO-=6);if(X<7)return TO(de,fe,Ue,je,et,tt);var nt=_L[nO++];return(128&nt)>0?void(nO-=7):TO(de,fe,Ue,je,et,tt,nt)}var it=_L[nO++],ct=_L[nO++],dt=_L[nO++],vt=_L[nO++];if((128&it)>0||(128&ct)>0||(128&dt)>0||(128&vt)>0)nO-=8;else{if(X<10){if(8===X)return TO(de,fe,Ue,je,it,ct,dt,vt);var gt=_L[nO++];return(128&gt)>0?void(nO-=9):TO(de,fe,Ue,je,it,ct,dt,vt,gt)}if(X<12){var yt=_L[nO++],_t=_L[nO++];if((128&yt)>0||(128&_t)>0)return void(nO-=10);if(X<11)return TO(de,fe,Ue,je,it,ct,dt,vt,yt,_t);var wt=_L[nO++];return(128&wt)>0?void(nO-=11):TO(de,fe,Ue,je,it,ct,dt,vt,yt,_t,wt)}var St=_L[nO++],Ct=_L[nO++],At=_L[nO++],Et=_L[nO++];if((128&St)>0||(128&Ct)>0||(128&At)>0||(128&Et)>0)nO-=12;else{if(X<14){if(12===X)return TO(de,fe,Ue,je,it,ct,dt,vt,St,Ct,At,Et);var Rt=_L[nO++];return(128&Rt)>0?void(nO-=13):TO(de,fe,Ue,je,it,ct,dt,vt,St,Ct,At,Et,Rt)}var Bt=_L[nO++],Ht=_L[nO++];if(!((128&Bt)>0||(128&Ht)>0)){if(X<15)return TO(de,fe,Ue,je,it,ct,dt,vt,St,Ct,At,Et,Bt,Ht);var Wt=_L[nO++];return(128&Wt)>0?void(nO-=15):TO(de,fe,Ue,je,it,ct,dt,vt,St,Ct,At,Et,Bt,Ht,Wt)}nO-=14}}}}function _y(X){return dO.copyBuffers?Uint8Array.prototype.slice.call(_L,nO,nO+=X):_L.subarray(nO,nO+=X)}function jo(X){var $=_L[nO++];if(vO[$])return vO[$](_L.subarray(nO,nO+=X));throw new Error("Unknown extension type "+$)}var DO=new Array(4096);function gM(){var X=_L[nO++];if(!(X>=160&&X<192))return nO--,lr();if(X-=160,pO>=nO)return PL.slice(nO-fO,(nO+=X)-fO);if(!(0==pO&&SL<180))return CO(X);var $,ee=4095&(X<<5^(X>1?tO.getUint16(nO):X>0?_L[nO]:0)),ne=DO[ee],ae=nO,de=nO+X-3,fe=0;if(ne&&ne.bytes==X){for(;ae<de;){if(($=tO.getUint32(ae))!=ne[fe++]){ae=1879048192;break}ae+=4}for(de+=3;ae<de;)if(($=_L[ae++])!=ne[fe++]){ae=1879048192;break}if(ae===de)return nO=ae,ne.string;de-=3,ae=nO}for(ne=[],DO[ee]=ne,ne.bytes=X;ae<de;)$=tO.getUint32(ae),ne.push($),ae+=4;for(de+=3;ae<de;)$=_L[ae++],ne.push($);var Ue=X<16?By(X):mM(X);return ne.string=null!=Ue?Ue:CO(X)}var LO=function fM(X,$){var ee=lr(),ne=X;void 0!==$&&(X=X<32?-(($<<5)+X):($<<5)+X,ee.highByte=$);var ae=ML[X];return ae&&ae.isShared&&((ML.restoreStructures||(ML.restoreStructures=[]))[X]=ae),ML[X]=ee,ee.read=Ry(ee,ne),ee.read()},RO="object"==typeof self?self:ee.g;vO[0]=function(){},vO[0].noBuffer=!0,vO[101]=function(){var X=lr();return(RO[X[0]]||Error)(X[1])},vO[105]=function(X){var $=tO.getUint32(nO-4);eO||(eO=new Map);var ee,ne=_L[nO],ae={target:ee=ne>=144&&ne<160||220==ne||221==ne?[]:{}};eO.set($,ae);var de=lr();return ae.used?Object.assign(ee,de):(ae.target=de,de)},vO[112]=function(X){var $=tO.getUint32(nO-4),ee=eO.get($);return ee.used=!0,ee.target},vO[115]=function(){return new Set(lr())};var BO=["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64","BigInt64","BigUint64"].map((function(X){return X+"Array"}));function vM(X){var $,ee=SL,ne=nO,de=hO,fe=fO,Ue=pO,je=PL,Ke=uO,et=eO,tt=UL,nt=new Uint8Array(_L.slice(0,SL)),it=ML,ct=ML.slice(0,ML.length),dt=dO,vt=bO,gt=X();return SL=ee,nO=ne,hO=de,fO=fe,pO=Ue,PL=je,uO=Ke,eO=et,UL=tt,_L=nt,bO=vt,($=ML=it).splice.apply($,[0,ML.length].concat((0,ae.Z)(ct))),dO=dt,tO=new DataView(_L.buffer,_L.byteOffset,_L.byteLength),gt}function Yd(){_L=null,eO=null,ML=null}vO[116]=function(X){var $=X[0],ee=BO[$];if(!ee)throw new Error("Could not find typed array for code "+$);return new RO[ee](Uint8Array.prototype.slice.call(X,1).buffer)},vO[120]=function(){var X=lr();return new RegExp(X[0],X[1])},vO[98]=function(X){var $=(X[0]<<24)+(X[1]<<16)+(X[2]<<8)+X[3],ee=nO;nO+=$-4,(UL=[lr(),lr()]).position0=0,UL.position1=0;var ne=nO;nO=ee;try{return lr()}finally{nO=ne}},vO[255]=function(X){return 4==X.length?new Date(1e3*(16777216*X[0]+(X[1]<<16)+(X[2]<<8)+X[3])):8==X.length?new Date(((X[0]<<22)+(X[1]<<14)+(X[2]<<6)+(X[3]>>2))/1e6+1e3*(4294967296*(3&X[3])+16777216*X[4]+(X[5]<<16)+(X[6]<<8)+X[7])):12==X.length?new Date(((X[0]<<24)+(X[1]<<16)+(X[2]<<8)+X[3])/1e6+1e3*((128&X[4]?-281474976710656:0)+1099511627776*X[6]+4294967296*X[7]+16777216*X[8]+(X[9]<<16)+(X[10]<<8)+X[11])):new Date("invalid")};for(var IO=new Array(147),zO=0;zO<256;zO++)IO[zO]=+("1e"+Math.floor(45.15-.30103*zO));var NO,UO=new xO({useRecords:!1}),jO=(UO.unpack,UO.unpackMultiple,UO.unpack,new Float32Array(1));new Uint8Array(jO.buffer,0,4);try{NO=new TextEncoder}catch(gY){}var GO,WO,qO,YO,ZO,XO=typeof Buffer<"u",KO=XO?Buffer.allocUnsafeSlow:Uint8Array,$O=XO?Buffer:Uint8Array,eR=XO?4294967296:2144337920,nR=0,rR=null,iR=/[\u0080-\uFFFF]/,aR=Symbol("record-id"),oR=function(X){_inherits(qo,X);var $=_createSuper(qo);function qo(X){var ee;_classCallCheck(this,qo),(ee=$.call(this,X)).offset=0;var ne,ae,de,Ue,Ke,et=0,tt=$O.prototype.utf8Write?function(X,$,ee){return qO.utf8Write(X,$,ee)}:!(!NO||!NO.encodeInto)&&function(X,$){return NO.encodeInto(X,qO.subarray($)).written},nt=_assertThisInitialized(ee);X||(X={});var it=X&&X.sequential,ct=X.structures||X.saveStructures,dt=X.maxSharedStructures;if(null==dt&&(dt=ct?32:0),dt>8160)throw new Error("Maximum maxSharedStructure is 8160");var vt=X.maxOwnStructures;null==vt&&(vt=ct?32:64),it&&!X.saveStructures&&(ee.structures=[]);var gt=dt>32||vt+dt>64,yt=dt+64,_t=dt+vt+64;if(_t>8256)throw new Error("Maximum maxSharedStructure + maxOwnStructure is 8192");var wt=[],St=0,Ct=0;ee.pack=ee.encode=function(X,$){if(qO||(qO=new KO(8192),YO=new DataView(qO.buffer,0,8192),nR=0),(ZO=qO.length-10)-nR<2048?(qO=new KO(qO.length),YO=new DataView(qO.buffer,0,qO.length),ZO=qO.length-10,nR=0):nR=nR+7&2147483640,ne=nR,Ke=nt.structuredClone?new Map:null,nt.bundleStrings?(rR=["",""],qO[nR++]=214,qO[nR++]=98,rR.position=nR-ne,nR+=4):rR=null,ae=nt.structures){ae.uninitialized&&(ae=nt._mergeStructures(nt.getStructures()));var ee=ae.sharedLength||0;if(ee>dt)throw new Error("Shared structures is larger than maximum shared structures, try increasing maxSharedStructures to "+ae.sharedLength);if(!ae.transitions){ae.transitions=Object.create(null);for(var fe=0;fe<ee;fe++){var je=ae[fe];if(je){for(var tt=void 0,ct=ae.transitions,vt=0,gt=je.length;vt<gt;vt++){var yt=je[vt];(tt=ct[yt])||(tt=ct[yt]=Object.create(null)),ct=tt}ct[aR]=fe+64}}et=ee}it||(ae.nextId=ee+64)}de&&(de=!1),Ue=ae||[];try{if(At(X),rR){YO.setUint32(rR.position+ne,nR-rR.position-ne);var _t=rR;rR=null,At(_t[0]),At(_t[1])}if(nt.offset=nR,Ke&&Ke.idsToInsert){(nR+=6*Ke.idsToInsert.length)>ZO&&Rt(nR),nt.offset=nR;var Et=function SO(X,$){var ee,ne=6*$.length,ae=X.length-ne;for($.sort((function(X,$){return X.offset>$.offset?1:-1}));ee=$.pop();){var de=ee.offset,fe=ee.id;X.copyWithin(de+ne,de,ae);var Ue=de+(ne-=6);X[Ue++]=214,X[Ue++]=105,X[Ue++]=fe>>24,X[Ue++]=fe>>16&255,X[Ue++]=fe>>8&255,X[Ue++]=255&fe,ae=de}return X}(qO.subarray(ne,nR),Ke.idsToInsert);return Ke=null,Et}return $&pR?(qO.start=ne,qO.end=nR,qO):qO.subarray(ne,nR)}finally{if(ae){if(Ct<10&&Ct++,St>1e4)ae.transitions=null,Ct=0,St=0,wt.length>0&&(wt=[]);else if(wt.length>0&&!it){for(var Bt=0,Ht=wt.length;Bt<Ht;Bt++)wt[Bt][aR]=0;wt=[]}if(de&&nt.saveStructures){var Wt=ae.sharedLength||dt;ae.length>Wt&&(ae=ae.slice(0,Wt));var qt=qO.subarray(ne,nR);return!1===nt.saveStructures(ae,et)?(nt._mergeStructures(nt.getStructures()),nt.pack(X)):(et=Wt,qt)}}$&vR&&(nR=ne)}};var At=function S(X){nR>ZO&&(qO=Rt(nR));var $,ae=typeof X;if("string"===ae){var de,Ue=X.length;if(rR&&Ue>=8&&Ue<4096){var et=iR.test(X);return rR[et?0:1]+=X,qO[nR++]=193,void S(et?-Ue:Ue)}de=Ue<32?1:Ue<256?2:Ue<65536?3:5;var nt=3*Ue;if(nR+nt>ZO&&(qO=Rt(nR+nt)),Ue<64||!tt){var it,ct,dt,vt=nR+de;for(it=0;it<Ue;it++)(ct=X.charCodeAt(it))<128?qO[vt++]=ct:ct<2048?(qO[vt++]=ct>>6|192,qO[vt++]=63&ct|128):55296===(64512&ct)&&56320===(64512&(dt=X.charCodeAt(it+1)))?(ct=65536+((1023&ct)<<10)+(1023&dt),it++,qO[vt++]=ct>>18|240,qO[vt++]=ct>>12&63|128,qO[vt++]=ct>>6&63|128,qO[vt++]=63&ct|128):(qO[vt++]=ct>>12|224,qO[vt++]=ct>>6&63|128,qO[vt++]=63&ct|128);$=vt-nR-de}else $=tt(X,nR+de,nt);$<32?qO[nR++]=160|$:$<256?(de<2&&qO.copyWithin(nR+2,nR+1,nR+1+$),qO[nR++]=217,qO[nR++]=$):$<65536?(de<3&&qO.copyWithin(nR+3,nR+2,nR+2+$),qO[nR++]=218,qO[nR++]=$>>8,qO[nR++]=255&$):(de<5&&qO.copyWithin(nR+5,nR+3,nR+3+$),qO[nR++]=219,YO.setUint32(nR,$),nR+=4),nR+=$}else if("number"===ae)if(X>>>0===X)X<64?qO[nR++]=X:X<256?(qO[nR++]=204,qO[nR++]=X):X<65536?(qO[nR++]=205,qO[nR++]=X>>8,qO[nR++]=255&X):(qO[nR++]=206,YO.setUint32(nR,X),nR+=4);else if(X>>0===X)X>=-32?qO[nR++]=256+X:X>=-128?(qO[nR++]=208,qO[nR++]=X+256):X>=-32768?(qO[nR++]=209,YO.setInt16(nR,X),nR+=2):(qO[nR++]=210,YO.setInt32(nR,X),nR+=4);else{var gt;if((gt=ee.useFloat32)>0&&X<4294967296&&X>=-2147483648){var yt;if(qO[nR++]=202,YO.setFloat32(nR,X),gt<4||(yt=X*IO[(127&qO[nR])<<1|qO[nR+1]>>7])>>0===yt)return void(nR+=4);nR--}qO[nR++]=203,YO.setFloat64(nR,X),nR+=8}else if("object"===ae)if(X){if(Ke){var _t=Ke.get(X);if(_t){if(!_t.id){var wt=Ke.idsToInsert||(Ke.idsToInsert=[]);_t.id=wt.push(_t)}return qO[nR++]=214,qO[nR++]=112,YO.setUint32(nR,_t.id),void(nR+=4)}Ke.set(X,{offset:nR-ne})}var St=X.constructor;if(St===Object)Et(X,!0);else if(St===Array){($=X.length)<16?qO[nR++]=144|$:$<65536?(qO[nR++]=220,qO[nR++]=$>>8,qO[nR++]=255&$):(qO[nR++]=221,YO.setUint32(nR,$),nR+=4);for(var Ct=0;Ct<$;Ct++)S(X[Ct])}else if(St===Map){($=X.size)<16?qO[nR++]=128|$:$<65536?(qO[nR++]=222,qO[nR++]=$>>8,qO[nR++]=255&$):(qO[nR++]=223,YO.setUint32(nR,$),nR+=4);var At,Bt=(0,je.Z)(X);try{for(Bt.s();!(At=Bt.n()).done;){var Ht=(0,fe.Z)(At.value,2),Wt=Ht[0],qt=Ht[1];S(Wt),S(qt)}}catch(tn){Bt.e(tn)}finally{Bt.f()}}else{for(var Zt=0,Xt=GO.length;Zt<Xt;Zt++){var Qt=WO[Zt];if(X instanceof Qt){var en=function(){var $=GO[Zt];if($.write)return $.type&&(qO[nR++]=212,qO[nR++]=$.type,qO[nR++]=0),S($.write.call(_assertThisInitialized(ee),X)),{v:void 0};var ne=qO,ae=YO,de=nR;qO=null;var fe=void 0;try{fe=$.pack.call(_assertThisInitialized(ee),X,(function(X){return qO=ne,ne=null,(nR+=X)>ZO&&Rt(nR),{target:qO,targetView:YO,position:nR-X}}),S)}finally{ne&&(YO=ae,nR=de,ZO=(qO=ne).length-10)}return fe&&(fe.length+nR>ZO&&Rt(fe.length+nR),nR=wO(fe,qO,nR,$.type)),{v:void 0}}();if("object"===typeof en)return en.v}}Et(X,!X.hasOwnProperty)}}else qO[nR++]=192;else if("boolean"===ae)qO[nR++]=X?195:194;else if("bigint"===ae){if(X<BigInt(1)<<BigInt(63)&&X>=-(BigInt(1)<<BigInt(63)))qO[nR++]=211,YO.setBigInt64(nR,X);else if(X<BigInt(1)<<BigInt(64)&&X>0)qO[nR++]=207,YO.setBigUint64(nR,X);else{if(!ee.largeBigIntToFloat)throw new RangeError(X+" was too large to fit in MessagePack 64-bit integer format, set largeBigIntToFloat to convert to float-64");qO[nR++]=203,YO.setFloat64(nR,Number(X))}nR+=8}else if("undefined"===ae)ee.encodeUndefinedAsNil?qO[nR++]=192:(qO[nR++]=212,qO[nR++]=0,qO[nR++]=0);else{if("function"!==ae)throw new Error("Unknown type: "+ae);S(ee.writeFunction&&ee.writeFunction())}},Et=!1===ee.useRecords?ee.variableMapSize?function(X){var $,ee=Object.keys(X),ne=ee.length;ne<16?qO[nR++]=128|ne:ne<65536?(qO[nR++]=222,qO[nR++]=ne>>8,qO[nR++]=255&ne):(qO[nR++]=223,YO.setUint32(nR,ne),nR+=4);for(var ae=0;ae<ne;ae++)At($=ee[ae]),At(X[$])}:function(X,$){qO[nR++]=222;var ee=nR-ne;nR+=2;var ae=0;for(var de in X)($||X.hasOwnProperty(de))&&(At(de),At(X[de]),ae++);qO[ee+++ne]=ae>>8,qO[ee+ne]=255&ae}:function(X){for(var $,ne=Object.keys(X),ae=Ue.transitions||(Ue.transitions=Object.create(null)),fe=0,je=0,Ke=ne.length;je<Ke;je++){var et=ne[je];($=ae[et])||($=ae[et]=Object.create(null),fe++),ae=$}var tt=ae[aR];if(tt)tt>=96&&gt?(qO[nR++]=96+(31&(tt-=96)),qO[nR++]=tt>>5):qO[nR++]=tt;else{(tt=Ue.nextId)||(tt=64),tt<yt&&ee.shouldShareStructure&&!ee.shouldShareStructure(ne)?((tt=Ue.nextOwnId)<_t||(tt=yt),Ue.nextOwnId=tt+1):(tt>=_t&&(tt=yt),Ue.nextId=tt+1);var nt=ne.highByte=tt>=96&&gt?tt-96>>5:-1;ae[aR]=tt,Ue[tt-64]=ne,tt<yt?(ne.isShared=!0,Ue.sharedLength=tt-63,de=!0,nt>=0?(qO[nR++]=96+(31&tt),qO[nR++]=nt):qO[nR++]=tt):(nt>=0?(qO[nR++]=213,qO[nR++]=114,qO[nR++]=96+(31&tt),qO[nR++]=nt):(qO[nR++]=212,qO[nR++]=114,qO[nR++]=tt),fe&&(St+=Ct*fe),wt.length>=vt&&(wt.shift()[aR]=0),wt.push(ae),At(ne))}for(var it=0,ct=ne.length;it<ct;it++)At(X[ne[it]])},Rt=function A(X){var $;if(X>16777216){if(X-ne>eR)throw new Error("Packed buffer would be larger than maximum buffer size");$=Math.min(eR,4096*Math.round(Math.max((X-ne)*(X>67108864?1.25:2),4194304)/4096))}else $=1+(Math.max(X-ne<<2,qO.length-1)>>12)<<12;var ee=new KO($);return YO=new DataView(ee.buffer,0,$),qO.copy?qO.copy(ee,0,ne,X):ee.set(qO.slice(ne,X)),nR-=ne,ne=0,ZO=ee.length-10,qO=ee};return ee}return _createClass(qo,[{key:"useBuffer",value:function useBuffer(X){qO=X,YO=new DataView(qO.buffer,qO.byteOffset,qO.byteLength),nR=0}}]),qo}(xO);function wM(X,$,ee,ne){var ae=X.byteLength;if(ae+1<256){var de=ee(4+ae),fe=de.target,Ue=de.position;fe[Ue++]=199,fe[Ue++]=ae+1}else if(ae+1<65536){var je=ee(5+ae);fe=je.target,Ue=je.position;fe[Ue++]=200,fe[Ue++]=ae+1>>8,fe[Ue++]=ae+1&255}else{var Ke=ee(7+ae),et=(fe=Ke.target,Ue=Ke.position,Ke.targetView);fe[Ue++]=201,et.setUint32(Ue,ae+1),Ue+=4}fe[Ue++]=116,fe[Ue++]=$,fe.set(new Uint8Array(X.buffer,X.byteOffset,X.byteLength),Ue)}function SM(X,$){var ee=X.byteLength;if(ee<256){var ne=$(ee+2),ae=ne.target,de=ne.position;ae[de++]=196,ae[de++]=ee}else if(ee<65536){var fe=$(ee+3);ae=fe.target,de=fe.position;ae[de++]=197,ae[de++]=ee>>8,ae[de++]=255&ee}else{var Ue=$(ee+5),je=(ae=Ue.target,de=Ue.position,Ue.targetView);ae[de++]=198,je.setUint32(de,ee),de+=4}ae.set(X,de)}function wO(X,$,ee,ne){var ae=X.length;switch(ae){case 1:$[ee++]=212;break;case 2:$[ee++]=213;break;case 4:$[ee++]=214;break;case 8:$[ee++]=215;break;case 16:$[ee++]=216;break;default:ae<256?($[ee++]=199,$[ee++]=ae):ae<65536?($[ee++]=200,$[ee++]=ae>>8,$[ee++]=255&ae):($[ee++]=201,$[ee++]=ae>>24,$[ee++]=ae>>16&255,$[ee++]=ae>>8&255,$[ee++]=255&ae)}return $[ee++]=ne,$.set(X,ee),ee+=ae}function Yo(X){if(X.Class){if(!X.pack&&!X.write)throw new Error("Extension has no pack or write function");if(X.pack&&!X.type)throw new Error("Extension has no type (numeric code to identify the extension)");WO.unshift(X.Class),GO.unshift(X)}!function xM(X){X.unpack?vO[X.type]=X.unpack:vO[X.type]=X}(X)}WO=[Date,Set,Error,RegExp,ArrayBuffer,Object.getPrototypeOf(Uint8Array.prototype).constructor,gO],GO=[{pack:function pack(X,$,ee){var ne=X.getTime()/1e3;if((this.useTimestamp32||0===X.getMilliseconds())&&ne>=0&&ne<4294967296){var ae=$(6),de=ae.target,fe=ae.targetView,Ue=ae.position;de[Ue++]=214,de[Ue++]=255,fe.setUint32(Ue,ne)}else if(ne>0&&ne<17179869184){var je=$(10),Ke=je.target,et=je.targetView,tt=je.position;Ke[tt++]=215,Ke[tt++]=255,et.setUint32(tt,4e6*X.getMilliseconds()+(ne/1e3/4294967296>>0)),et.setUint32(tt+4,ne)}else if(isNaN(ne)){if(this.onInvalidDate)return $(0),ee(this.onInvalidDate());var nt=$(3),it=nt.target,ct=(nt.targetView,nt.position);it[ct++]=212,it[ct++]=255,it[ct++]=255}else{var dt=$(15),vt=dt.target,gt=dt.targetView,yt=dt.position;vt[yt++]=199,vt[yt++]=12,vt[yt++]=255,gt.setUint32(yt,1e6*X.getMilliseconds()),gt.setBigInt64(yt+4,BigInt(Math.floor(ne)))}}},{pack:function pack(X,$,ee){var ne=Array.from(X),ae=$(this.structuredClone?3:0),de=ae.target,fe=ae.position;this.structuredClone&&(de[fe++]=212,de[fe++]=115,de[fe++]=0),ee(ne)}},{pack:function pack(X,$,ee){var ne=$(this.structuredClone?3:0),ae=ne.target,de=ne.position;this.structuredClone&&(ae[de++]=212,ae[de++]=101,ae[de++]=0),ee([X.name,X.message])}},{pack:function pack(X,$,ee){var ne=$(this.structuredClone?3:0),ae=ne.target,de=ne.position;this.structuredClone&&(ae[de++]=212,ae[de++]=120,ae[de++]=0),ee([X.source,X.flags])}},{pack:function pack(X,$){this.structuredClone?wM(X,16,$):SM(XO?Buffer.from(X):new Uint8Array(X),$)}},{pack:function pack(X,$){var ee=X.constructor;ee!==$O&&this.structuredClone?wM(X,BO.indexOf(ee.name),$):SM(X,$)}},{pack:function pack(X,$){var ee=$(1);ee.target[ee.position]=193}}];var sR,lR,uR,cR,hR,dR,fR=new oR({useRecords:!1}),pR=(fR.pack,fR.pack,512),vR=1024,mR=new oR({structuredClone:!0});Yo({Class:CD.prototype.constructor,type:1,write:function write(X){return Ct({},X)},read:function read(X){return Object.setPrototypeOf(X,CD.prototype),X}}),Yo({Class:TD.prototype.constructor,type:2,write:function write(X){return(0,ae.Z)(X)},read:function read(X){return Object.setPrototypeOf(X,TD.prototype),X}}),Yo({Class:ED.prototype.constructor,type:3,write:function write(X){return(0,ae.Z)(X)},read:function read(X){return Object.setPrototypeOf(X,ED.prototype),X}}),Yo({Class:uL.prototype.constructor,type:4,write:function write(X){return X.id},read:function read(X){return new uL(X)}}),Yo({Class:vL.prototype.constructor,type:5,write:function write(X){return X.data},read:function read(X){return new vL(X)}}),function(X){function i(X){return mR.pack(X)}X.serialize=i,X.deserialize=function e(X){return mR.unpack(X)},X.checksum=function t(X){return function PO(X){var $=0;if(0===X.length)return $;for(var ee=0;ee<X.length;ee++)$=($<<5)-$+X[ee],$&=$;return $}(i(X)).toString()}}(sR||(sR={})),function(X){X.all=["PointLight","SpotLight","DirectionalLight","HemisphereLight"],X.is=function e($){return X.all.includes($)}}(lR||(lR={})),function(X){X.defaultData=function i(X){return function e(X){if("PointLight"===X)return{type:X,color:uD.white,intensity:1,distance:2e3,decay:1,shadows:!0,shadowResolution:1024,shadowRadius:1,depth:2500,helper:!0};if("SpotLight"===X)return{type:X,color:uD.white,intensity:1,distance:2e3,decay:1,shadows:!0,penumbra:0,angle:30/180*Math.PI,depth:2500,helper:!0};if("DirectionalLight"===X)return{type:X,color:uD.white,intensity:1,shadows:!0,size:2500,depth:2500,helper:!0};throw new Error("not implemented")}(X)}}(uR||(uR={})),function(X){X.defaultData={castShadow:!0,receiveShadow:!0},X.equals=function e(X,$){return X.castShadow===$.castShadow&&X.receiveShadow===$.receiveShadow}}(cR||(cR={})),function(X){X.defaultData={flatShading:!1,wireframe:!1,side:0},X.equals=function e(X,$){return X.flatShading===$.flatShading&&X.side===$.side&&X.wireframe===$.wireframe}}(hR||(hR={})),function(X){X.defaultData=At(Ct(Ct({},hR.defaultData),cR.defaultData),{cloner:null,booleanExclude:null})}(dR||(dR={}));var gR,r,yR=function(X){return X[X.Left=1]="Left",X[X.Right=2]="Right",X[X.Center=3]="Center",X[X.Justify=4]="Justify",X}(yR||{}),bR=((r=bR||{})[r.Top=1]="Top",r[r.Center=2]="Center",r[r.Bottom=3]="Bottom",r),xR=function(X){return X[X.None=1]="None",X[X.Upper=2]="Upper",X[X.Lower=3]="Lower",X}(xR||{});!function(X){X.defaultData={width:100,height:100,horizontalAlign:1,verticalAlign:1,fontSize:16,lineHeight:1.5,letterSpacing:1,text:"",textTransform:1,color:uD.fromHexAndA(6974058,1),alpha:1,font:"roboto_regular"}}(gR||(gR={}));var _R,wR,SR,CR,AR,MR,ER,TR,LR,RR,BR,IR,zR,NR,UR=["mode","gradientType","noiseType","displacementType","projection","cnormal","crop","axis","side"];function RM(X){for(var $=arguments.length>1&&void 0!==arguments[1]&&arguments[1],ee=null!==X[0].index,ne=new Set(Object.keys(X[0].attributes)),ae=new Set(Object.keys(X[0].morphAttributes)),de={},fe={},Ue=X[0].morphTargetsRelative,je=new Wu,Ke=0,et=0;et<X.length;++et){var tt=X[et],nt=0;if(ee!==(null!==tt.index))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+et+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(var it in tt.attributes){if(!ne.has(it))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+et+'. All geometries must have compatible attributes; make sure "'+it+'" attribute exists among all geometries, or in none of them.'),null;void 0===de[it]&&(de[it]=[]),de[it].push(tt.attributes[it]),nt++}if(nt!==ne.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+et+". Make sure all geometries have the same number of attributes."),null;if(Ue!==tt.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+et+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(var ct in tt.morphAttributes){if(!ae.has(ct))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+et+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===fe[ct]&&(fe[ct]=[]),fe[ct].push(tt.morphAttributes[ct])}if(je.userData.mergedUserData=je.userData.mergedUserData||[],je.userData.mergedUserData.push(tt.userData),$){var dt=void 0;if(ee)dt=tt.index.count;else{if(void 0===tt.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+et+". The geometry must have either an index or a position attribute"),null;dt=tt.attributes.position.count}je.addGroup(Ke,dt,et),Ke+=dt}}if(ee){for(var vt=0,gt=[],yt=0;yt<X.length;++yt){for(var _t=X[yt].index,wt=0;wt<_t.count;++wt)gt.push(_t.getX(wt)+vt);vt+=X[yt].attributes.position.count}je.setIndex(gt)}for(var St in de){var Ct=IM(de[St]);if(!Ct)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+St+" attribute."),null;je.setAttribute(St,Ct)}for(var At in fe){var Et=fe[At][0].length;if(0===Et)break;je.morphAttributes=je.morphAttributes||{},je.morphAttributes[At]=[];for(var Rt=0;Rt<Et;++Rt){for(var Bt=[],Ht=0;Ht<fe[At].length;++Ht)Bt.push(fe[At][Ht][Rt]);var Wt=IM(Bt);if(!Wt)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+At+" morphAttribute."),null;je.morphAttributes[At].push(Wt)}}return je}function IM(X){for(var $,ee,ne,ae=0,de=0;de<X.length;++de){var fe=X[de];if(fe.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(void 0===$&&($=fe.array.constructor),$!==fe.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===ee&&(ee=fe.itemSize),ee!==fe.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===ne&&(ne=fe.normalized),ne!==fe.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;ae+=fe.array.length}for(var Ue=new $(ae),je=0,Ke=0;Ke<X.length;++Ke)Ue.set(X[Ke].array,je),je+=X[Ke].array.length;return new Lu(Ue,ee,ne)}!function(X){X.defaultData=function i(X,$){return"light"===X&&$?function e(X){switch(X){case"basic":return{type:"light",category:"basic",alpha:1,visible:!0,mode:0};case"phong":return{category:"phong",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1,visible:!0,mode:0};case"toon":return{category:"toon",specular:{r:.2,g:.2,b:.2},shininess:10,type:"light",alpha:1,visible:!0,mode:0};case"lambert":return{category:"lambert",emissive:{r:0,g:0,b:0,a:1},type:"light",alpha:1,visible:!0,mode:0};case"physical":return{category:"physical",roughness:.2,metalness:.2,reflectivity:.2,type:"light",alpha:1,visible:!0,mode:0}}}($):function t(X){switch(X){case"texture":return{alpha:1,visible:!0,size:[128,128],mode:0,axis:"x",side:2,type:"texture",projection:0,texture:{image:"image_0",wrapping:1001,repeat:[1,1],offset:[0,0]},crop:!0};case"color":return{type:"color",alpha:1,visible:!0,mode:0,color:sD.fromHex(4737101)};case"depth":return{type:"depth",alpha:1,visible:!0,mode:0,gradientType:1,smooth:!1,isVector:!0,isWorldSpace:!1,origin:[0,0,0],direction:[1,0,0],colors:[[1,1,1,1],[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,near:50,far:200};case"normal":return{type:"normal",alpha:1,visible:!0,mode:0,cnormal:[1,1,1]};case"gradient":return{type:"gradient",alpha:1,visible:!0,mode:0,gradientType:0,smooth:!1,colors:[[0,0,0,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1],[1,1,1,1]],steps:[0,1,1,1,1,1,1,1,1,1],num:2,angle:0,offset:[0,0],morph:[0,0]};case"noise":return{type:"noise",alpha:1,visible:!0,mode:0,size:[100,100,100],noiseType:0,scale:1,move:1,colorA:At(Ct({},sD.fromHex(6710886)),{a:1}),colorB:At(Ct({},sD.fromHex(6710886)),{a:1}),colorC:At(Ct({},sD.fromHex(16777215)),{a:1}),colorD:At(Ct({},sD.fromHex(16777215)),{a:1}),distortion:[1,1],fA:[1.7,9.2],fB:[8.3,2.8]};case"fresnel":return{type:"fresnel",alpha:1,visible:!0,mode:0,color:uD.fromHexAndA(16777215,1),bias:.1,scale:1,intensity:2,factor:1};case"rainbow":return{type:"rainbow",alpha:1,visible:!0,mode:0,filmThickness:30,movement:0,wavelengths:[0,0,0],noiseStrength:0,noiseScale:1,offset:[0,0,0]};case"matcap":return{type:"matcap",alpha:1,visible:!0,mode:0,texture:{image:"matcap_0",wrapping:1001,repeat:[1,1],offset:[0,0]}};case"transmission":return{type:"transmission",alpha:1,visible:!0,mode:0,thickness:10,ior:1.5,roughness:1};case"displace":return{type:"displace",displacementType:"noise",noiseType:0,scale:10,movement:1,offset:[0,0,0],intensity:8,visible:!0}}}(X)}}(_R||(_R={})),function(X){function t(X){var $,ee=0,ne=(0,je.Z)(X.layers);try{for(ne.s();!($=ne.n()).done;){var ae=$.value;"alpha"in ae.data&&"light"!==ae.data.type&&"fresnel"!==ae.data.type&&(ee+=(1-ee)*ae.data.alpha)}}catch(de){ne.e(de)}finally{ne.f()}return ee<1}function s(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"layer1",ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"layer2",ne=new TD;return ne.push({fi:0,data:_R.defaultData("light",X),id:$}),ne.push({fi:1,data:_R.defaultData("color"),id:ee}),{layers:ne}}X.isMergable=function i(X){return!X.layers.some((function(X){if("texture"===X.data.type&&0!==X.data.projection||"depth"===X.data.type&&!X.data.isWorldSpace||"noise"===X.data.type||"displace"===X.data.type)return!0}))&&!t(X)},X.getHash=function e(X){var $="";return X.layers.forEach((function(X){Object.entries(X.data).forEach((function(X){var ee=(0,fe.Z)(X,2),ne=ee[0],ae=ee[1];$+="".concat(ne).concat(ae),Array.isArray(ae)?ae.forEach((function(X){return $+="".concat(X)})):"object"==typeof ae?Object.values(ae).forEach((function(X){$+="".concat("number"==typeof X?X.toFixed(4):X)})):$+="".concat(ae)}))})),$},X.isTransparent=t,X.defaultEmptyData=function r(){return{layers:new TD}},X.defaultData=function n(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"layer1",$=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"layer2";return s("phong",X,$)},X.defaultTwoLayerData=s,X.defaultTwoLayerTextureData=function o(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"basic",ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"layer1",ne=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"layer2",ae=_R.defaultData("texture");Object.assign(ae.texture,{image:X});var de=new TD;return de.push({fi:0,data:ae,id:ee}),de.push({fi:1,data:_R.defaultData("light",$),id:ne}),{layers:de}}}(wR||(wR={})),function(X){X.defaultData=function i(){return{points:new TD,roundness:0,shapeHoles:[],isClosed:!1}}}(SR||(SR={})),function(X){X.is2DParametricMesh=function i(X){return"PolygonGeometry"===X||"RectangleGeometry"===X||"StarGeometry"===X||"TriangleGeometry"===X||"EllipseGeometry"===X}}(CR||(CR={})),function(X){X.defaultData=function i(X){if("RectangleGeometry"===X)return{width:320,height:320,type:X,cornerRadius:[0,0,0,0],cornerType:0,depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if("VectorGeometry"===X)return{width:1,height:1,type:X,subdivisions:12,shape:SR.defaultData(),depth:0,extrudeBevelSize:0,extrudeBevelSegments:1};if("BooleanGeometry"===X)return{type:X,operation:2,width:0,height:0,depth:0};throw new Error("not implemented")}}(AR||(AR={})),function(X){X.identity=At(Ct({},hD.identity),{hiddenMatrix:oD.identity}),X.fromObject=function e(X){return{position:X.position,rotation:X.rotation,scale:X.scale,hiddenMatrix:X.hiddenMatrix}},X.merge=function t(X,$){return{position:(null==$?void 0:$.position)||X.position,rotation:(null==$?void 0:$.rotation)||X.rotation,scale:(null==$?void 0:$.scale)||X.scale,hiddenMatrix:(null==$?void 0:$.hiddenMatrix)||X.hiddenMatrix}},X.diff=function r(X,$){return{position:iD.isEqual(X.position,$.position)?null:$.position,rotation:iD.isEqual(X.rotation,$.rotation)?null:$.rotation,scale:iD.isEqual(X.scale,$.scale)?null:$.scale,hiddenMatrix:oD.isEqual(X.hiddenMatrix,$.hiddenMatrix)?null:$.hiddenMatrix}}}(MR||(MR={})),function(X){X.defaultData=Ct({states:new TD,events:new TD,visible:!0,raycastLock:!1},MR.identity)}(ER||(ER={})),function(X){X.defaultData=Ct({type:"Empty"},ER.defaultData)}(TR||(TR={})),function(X){X.defaultData=Ct(Ct({type:"Mesh"},ER.defaultData),dR.defaultData)}(LR||(LR={})),function(X){X.defaultData=Ct(Ct({type:"TextFrame"},ER.defaultData),gR.defaultData)}(RR||(RR={})),function(X){X.defaultData=Ct(Ct(Ct({},ER.defaultData),MR.identity),tD.defaultData)}(BR||(BR={})),function(X){X.defaultData=function i(X){return Ct(Ct({},ER.defaultData),uR.defaultData(X))}}(IR||(IR={})),function(X){X.defaultCamera=Ct({position:[0,0,1e3],scale:[1,1,1],rotation:[0,0,0],hiddenMatrix:oD.identity,name:"Play Camera",visible:!0,raycastLock:!1,states:new TD,events:new TD},tD.defaultData),X.defaultMeshObject=At(Ct(Ct({name:"Rectangle"},ER.defaultData),LR.defaultData),{geometry:AR.defaultData("RectangleGeometry"),material:wR.defaultTwoLayerData("basic","layer1","layer2")}),X.defaultBooleanObject=At(Ct(Ct({name:"Boolean"},ER.defaultData),LR.defaultData),{geometry:AR.defaultData("BooleanGeometry"),material:wR.defaultTwoLayerData("phong","layer1","layer2")})}(zR||(zR={})),function(X){function i(X,$){if(void 0===$)return X;var ee=Ct({},X);return"material"in ee&&"material"in $&&$.material&&(ee.material=Ty(ee.material,(function(X){if("string"!=typeof X)for(var ee=0,ne=Object.entries($.material.layers);ee<ne.length;ee++){var ae=(0,fe.Z)(ne[ee],2),de=ae[0],Ue=ae[1],je=X.layers.data(de);je&&KT(je,Ue)}})).data),ee.materials&&$.materials&&(ee.materials=Ty(ee.materials,(function(X){for(var ne,ae,de=0;de<ee.materials.length;de++){var Ue=$.materials[de];if("string"!=typeof Ue)for(var je=0,Ke=Object.entries(Ue.layers);je<Ke.length;je++){var et=(0,fe.Z)(Ke[je],2),tt=et[0],nt=et[1],it=null==(ae=null==(ne=X[de])?void 0:ne.layers)?void 0:ae.data(tt);it&&KT(it,nt)}}})).data),ee}X.patchMaterialState=i,X.patch=function e(X,$){var ee,ne;if(void 0===$)return X;var ae=Ct({},X);if(Object.assign(ae,MR.merge(ae,$)),qP.is(X.type)){ae.orthographic=Ct({},ae.orthographic),ae.perspective=Ct({},ae.perspective);var de=$;void 0!==(null==(ee=de.orthographic)?void 0:ee.zoom)&&(ae.orthographic.zoom=de.orthographic.zoom),void 0!==(null==(ne=de.perspective)?void 0:ne.zoom)&&(ae.perspective.zoom=de.perspective.zoom)}else if("Mesh"===X.type)ae.geometry=Ct({},ae.geometry),Object.assign(ae.geometry,$.geometry),ae=i(ae,$);else if(lR.is(X.type)){var fe=$;void 0!==ae.intensity&&(ae.intensity=fe.intensity),void 0!==fe.color&&("string"==typeof fe.color?ae.color=fe.color:ae.color=sD.clone(fe.color))}return ae}}(NR||(NR={}));var jR={type:"change"},GR={type:"changeZoom"},WR={type:"changePan"},XR={type:"start"},QR={type:"end"},KR=new xo,eB=new va,tB=2*Math.PI,rB=2,iB=.125,aB=1,sB=.1,uB=function(X){_inherits(cp,X);var $=_createSuper(cp);function cp(X,ee){var ne;return _classCallCheck(this,cp),(ne=$.call(this)).object=X,ne.domElement=ee,ne.enabled=!0,ne.useKeyEvents=!0,ne.enableDamping=!1,ne.enableZoom=!0,ne.enableRotate=!0,ne.enablePan=!0,ne.autoRotate=!1,ne.rotationLimitsMode=0,ne.panLimitsMode=0,ne.rotationSoftLimit=2,ne.panSoftLimit=2,ne.hoverRotatePanMode=0,ne.zoomLimitsEnabled=!1,ne.preventScroll=!0,ne.mouseButtons=[0,5],ne.mouseButtonsPlay=[3,4,5],ne.touches=[null,Xt,qt],ne.offset=new wo,ne.eye=new wo,ne.lastPosition=new wo,ne.lastQuaternion=new xo,ne.current=new va,ne.overShoot=new va,ne.overRatio=new va,ne.spherical=new w_,ne.sphericalDelta=new w_,ne.panOffset=new wo,ne.panLeftV=new wo,ne.panUpV=new wo,ne.panV=new wo,ne.rotateStart=new va,ne.rotateEnd=new va,ne.rotateDelta=new va,ne.panStart=new va,ne.panEnd=new va,ne.panDelta=new va,ne.dollyStart=new va,ne.dollyEnd=new va,ne.dollyDelta=new va,ne.rotationRangeFactor=new va,ne.panRangeFactor=new va,ne.state=-1,ne.zoomChanged=!1,ne.isPointerDown=!1,ne.isFirstHover=!0,ne.isThetaFlipped=!1,ne.prevScale=0,ne.scale=1,ne.gesture=!1,ne.timer=-1,ne.timerHover=-1,ne.minDistance=0,ne.maxDistance=1/0,ne.minZoom=0,ne.maxZoom=1/0,ne.minPhi=0,ne.maxPhi=Math.PI,ne.minTheta=-1/0,ne.maxTheta=1/0,ne.minH=0,ne.maxH=Math.PI,ne.minV=-1/0,ne.maxV=1/0,ne.autoRotateClockwise=!0,ne.isPanOverShoot=!1,ne.isRotateOverShoot=!1,ne.update=function(){var X=ne.object.position;ne.offset.copy(X).sub(ne.target),ne.spherical.setFromVector3(ne.offset),ne.object.isUpVectorFlipped&&(ne.spherical.phi*=-1,ne.spherical.theta-=Math.PI),ne.autoRotate&&-1===ne.state&&ne.rotateLeft((!0===ne.autoRotateClockwise?1:-1)*ne.getAutoRotationAngle()),0!==ne.rotationLimitsMode&&ne.applyLimits(ne.sphericalDelta,ne.rotationLimitsMode,ne.rotationSoftLimit,ne.maxTheta,ne.minTheta,ne.maxPhi,ne.minPhi,ne.rotationRangeFactor),2!==ne.rotationLimitsMode&&(ne.spherical.phi+=ne.sphericalDelta.phi),(1!==ne.rotationLimitsMode||!0===ne.autoRotate)&&(ne.spherical.theta+=ne.sphericalDelta.theta),ne.spherical.radius*=ne.scale,ne.zoomLimitsEnabled&&(ne.spherical.radius=Math.max(ne.minDistance,Math.min(ne.maxDistance,ne.spherical.radius))),0!==ne.panLimitsMode&&(ne.target.applyQuaternion(KR.copy(ne.object.quaternion).invert()),ne.panOffset.applyQuaternion(KR),ne.applyLimits(ne.panOffset,ne.panLimitsMode,ne.panSoftLimit,ne.maxH,ne.minH,ne.maxV,ne.minV,ne.panRangeFactor),ne.target.applyQuaternion(ne.object.quaternion),ne.panOffset.applyQuaternion(ne.object.quaternion)),2===ne.panLimitsMode&&(ne.panOffset.y=0),1===ne.panLimitsMode&&(ne.panOffset.x=0),-1!==ne.state||ne.gesture?(ne.target.add(ne.panOffset),ne.panOffset.set(0,0,0)):(ne.panOffset.multiplyScalar(1-iB),ne.target.add(ne.panOffset)),ne.offset.setFromSpherical(ne.spherical),X.copy(ne.target).add(ne.offset);var $=ne.spherical.phi%tB;return ne.eye.copy(ne.offset).normalize(),ne.object.up.copy(ru.DefaultUp).applyAxisAngle(ne.eye,ne.object.angleOffsetFromUp),$>0&&$>Math.PI||$<0&&$>-Math.PI?(ne.object.up.negate(),ne.object.lookAt(ne.target),ne.object.isUpVectorFlipped=!0):(ne.object.lookAt(ne.target),ne.object.isUpVectorFlipped=!1),-1===ne.state||!0===ne.enableDamping?(ne.sphericalDelta.theta*=1-iB,ne.sphericalDelta.phi*=1-iB):ne.sphericalDelta.set(0,0,0),ne.scale=1,ne.zoomChanged||ne.lastPosition.distanceToSquared(ne.object.position)>.01||8*(1-ne.lastQuaternion.dot(ne.object.quaternion))>1e-8?(ne.dispatchEvent(jR),ne.lastPosition.copy(ne.object.position),ne.lastQuaternion.copy(ne.object.quaternion),ne.zoomChanged=!1,!0):(ne.isPanOverShoot=!1,ne.isRotateOverShoot=!1,ne.sphericalDelta.set(0,0,0),ne.panOffset.set(0,0,0),!1)},ne.onPointerDown=function(X){!1!==ne.enabled&&(ne.isPointerDown=!0,0===fB.length&&(ne.domElement.ownerDocument.addEventListener("pointermove",ne.onPointerMove),ne.domElement.ownerDocument.addEventListener("pointerup",ne.onPointerUp)),function FO(X){fB.push(X)}(X),"touch"===X.pointerType?ne.onPointerDownTouch(X):ne.onPointerDownMouse(X))},ne.onPointerMove=function(X){!1!==ne.enabled&&("touch"===X.pointerType?ne.onPointerMoveTouch(X):ne.onPointerMoveMouse(X))},ne.onPointerUp=function(X){UM(X),ne.isPointerDown=!1,0===fB.length&&(ne.domElement.ownerDocument.removeEventListener("pointermove",ne.onPointerMove),ne.domElement.ownerDocument.removeEventListener("pointerup",ne.onPointerUp)),ne.dispatchEvent(QR),ne.state=-1},ne.onPointerCancel=function(X){UM(X)},ne.onPointerDownMouse=function(X){switch(ne.useKeyEvents?ne.mouseButtons[X.button]:ne.mouseButtonsPlay[X.button]){case 0:if(!0!==X.altKey||X.shiftKey||_h(X)){if(" "===ne.key){if(!1===ne.enablePan)return;ne.handleMouseDownPan(X),ne.state=2}}else{if(!1===ne.enableRotate)return;ne.handleMouseDownRotate(X),ne.state=0}break;case 4:if(!1===ne.enablePan)return;ne.handleMouseDownPan(X),ne.state=2;break;case 3:if(_h(X)||X.shiftKey){if(!1===ne.enablePan)return;ne.handleMouseDownPan(X),ne.state=2}else{if(!1===ne.enableRotate)return;ne.handleMouseDownRotate(X),ne.state=0}break;case 5:if(_h(X)||X.shiftKey){if(!1===ne.enableRotate)return;ne.handleMouseDownRotate(X),ne.state=0}else{if(!1===ne.enablePan)return;ne.handleMouseDownPan(X),ne.state=2}break;default:ne.state=-1}-1!==ne.state&&ne.dispatchEvent(XR)},ne.onPointerMoveMouse=function(X){switch(ne.state){case 0:if(!1===ne.enableRotate)return;ne.handleMouseMoveRotate(X);break;case 1:if(!1===ne.enableZoom)return;ne.handleMouseMoveDolly(X);break;case 2:if(!1===ne.enablePan)return;ne.handleMouseMovePan(X)}},ne.onPointerDownTouch=function(X){switch(zM(X),ne.touches[fB.length-1]){case Wt:if(!1===ne.enableRotate)return void(ne.state=-1);ne.handleTouchStartRotate(),ne.state=3;break;case qt:if(!1===ne.enablePan)return void(ne.state=-1);ne.handleTouchStartPan(),ne.state=4;break;case Zt:if(!1===ne.enableZoom&&!1===ne.enablePan)return;ne.handleTouchStartDollyPan(),ne.state=5;break;case Xt:if(!1===ne.enableZoom&&!1===ne.enableRotate)return;ne.handleTouchStartDollyRotate(),ne.state=6;break;default:ne.state=-1}-1!==ne.state&&ne.dispatchEvent(XR)},ne.onPointerMoveTouch=function(X){switch(zM(X),ne.state){case 3:if(!1===ne.enableRotate)return;ne.handleTouchMoveRotate(X),ne.update();break;case 4:if(!1===ne.enablePan)return;ne.handleTouchMovePan(X),ne.update();break;case 5:if(!1===ne.enableZoom&&!1===ne.enablePan)return;ne.handleTouchMoveDollyPan(X),ne.update();break;case 6:if(!1===ne.enableZoom&&!1===ne.enableRotate)return;ne.handleTouchMoveDollyRotate(X),ne.update();break;default:ne.state=-1}},ne.dispatchEndDebounced=HT((function(){return ne.dispatchEvent(QR)}),33),ne.onMouseWheel=function(X){!1===ne.enabled||!1===ne.enableZoom&&!1===ne.enablePan||((ne.domElement.clientHeight===document.body.clientHeight&&ne.domElement.clientWidth===document.body.clientWidth||ne.preventScroll)&&X.preventDefault(),ne.dispatchEvent(XR),ne.handleMouseWheel(X),ne.dispatchEndDebounced())},ne.onGesture=function(X){if(!1!==ne.enabled)if(X.preventDefault(),"gesturechange"===X.type){if(!1===ne.enableZoom)return;ne.dispatchEvent(XR),X.scale>ne.prevScale?ne.dollyIn(ne.getZoomScale()):X.scale<ne.prevScale&&ne.dollyOut(ne.getZoomScale()),ne.prevScale=X.scale,ne.update()}else ne.dispatchEvent(QR)},ne.onContextMenu=function(X){!1!==ne.enabled&&X.preventDefault()},ne.onTouchMove=function(X){(X.touches.length>1||ne.preventScroll)&&X.preventDefault()},ne.onTouchEnd=function(X){X.preventDefault()},ne.onKeyDown=function(X){!1!==ne.enabled&&(ne.key=X.key)},ne.onKeyUp=function(){!1!==ne.enabled&&(ne.key=void 0,-1!==ne.state&&ne.onPointerUp(fB[0]))},ne.onPointerHover=function(X){if(!(wD||!1===ne.enabled||-1!==ne.state||2===ne.hoverRotatePanMode&&ne.isPanOverShoot||1===ne.hoverRotatePanMode&&ne.isRotateOverShoot)){if(window.clearTimeout(ne.timerHover),ne.isPointerDown=!0,ne.isFirstHover){var $={clientX:window.innerWidth/2,clientY:window.innerHeight/2};2===ne.hoverRotatePanMode?ne.handleMouseDownPan($):1===ne.hoverRotatePanMode&&ne.handleMouseDownRotate($),ne.isFirstHover=!1}2===ne.hoverRotatePanMode?ne.handleMouseMovePan(X,sB):1===ne.hoverRotatePanMode&&ne.handleMouseMoveRotate(X,sB),ne.timerHover=window.setTimeout((function(){ne.isPointerDown=!1}),30)}},ne.object=X,ne.domElement=ee,ne.target=ne.object.getTarget(),ne.target0=ne.target.clone(),ne.position0=ne.object.position.clone(),ne.zoom0=ne.object.zoom,ne.connect(),ne.update(),ne}return _createClass(cp,[{key:"reset",value:function reset(){this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(jR),this.isFirstHover=!0,this.update(),this.state=-1}},{key:"resetTo",value:function resetTo(X,$,ee){this.target.copy(X),this.object.position.copy($),this.object.zoom=ee,this.object.updateProjectionMatrix(),this.dispatchEvent(jR),this.update(),this.state=-1}},{key:"fromJSON",value:function fromJSON(X){this.setEnableDampingSpeed(X.enableDamping),this.enablePan=X.enablePan,this.enableZoom=X.enableZoom,this.enableRotate=X.enableRotate,this.rotationLimitsMode=X.rotationLimitsMode,this.panLimitsMode=X.panLimitsMode,this.panSoftLimit=X.panSoftLimit,this.rotationSoftLimit=X.rotationSoftLimit,this.hoverRotatePanMode=X.hoverRotatePanMode,this.isFirstHover=!0,0!==this.hoverRotatePanMode&&this.domElement.addEventListener("pointermove",this.onPointerHover),sB=Math.pow(X.hoverRotatePanStrength/100,2),this.zoomLimitsEnabled=X.zoomLimitsEnabled,this.minZoom=X.zoomLimits.min,this.maxZoom=Math.max(X.zoomLimits.min,X.zoomLimits.max),this.minDistance=1e3/X.zoomLimits.max,this.maxDistance=Math.max(this.minDistance,1e3/X.zoomLimits.min),this.autoRotate=X.autoRotate,rB=X.autoRotateSpeed,this.autoRotateClockwise=X.autoRotateClockwise;var $=this.object.getTarget().applyQuaternion(KR.copy(this.object.quaternion).invert());this.minV=-X.panVerticalOffset.min+$.y,this.maxV=X.panVerticalOffset.max+$.y,this.minH=-X.panHorizontalOffset.min+$.x,this.maxH=X.panHorizontalOffset.max+$.x,this.panRangeFactor.set(this.maxH-this.minH,this.maxV-this.minV).divideScalar(2),this.rotationRangeFactor.setScalar(Math.PI).divideScalar(4),this.minPhi=no(this.spherical.phi-X.rotationVerticalOffset.min),this.maxPhi=no(this.spherical.phi+X.rotationVerticalOffset.max),this.minTheta=no(this.spherical.theta-X.rotationHorizontalOffset.min),this.maxTheta=no(this.spherical.theta+X.rotationHorizontalOffset.max),this.isThetaFlipped=this.minTheta>this.maxTheta,this.preventScroll=X.preventScroll,1===X.orbitTouches&&(this.touches[0]=Wt),1===X.panTouches&&(this.touches[0]=qt),2===X.orbitTouches&&(this.touches[1]=Xt),2===X.panTouches&&(this.touches[1]=Zt),3===X.orbitTouches&&(this.touches[2]=Wt),3===X.panTouches&&(this.touches[2]=qt)}},{key:"connect",value:function connect(){this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointercancel",this.onPointerCancel),this.domElement.addEventListener("wheel",this.onMouseWheel),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),xD||(this.domElement.addEventListener("gesturestart",this.onGesture),this.domElement.addEventListener("gesturechange",this.onGesture),this.domElement.addEventListener("gestureend",this.onGesture)),this.domElement.addEventListener("touchmove",this.onTouchMove),this.domElement.addEventListener("touchend",this.onTouchEnd)}},{key:"dispose",value:function dispose(){this.domElement.removeEventListener("contextmenu",this.onContextMenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("pointercancel",this.onPointerCancel),this.domElement.removeEventListener("wheel",this.onMouseWheel),window.removeEventListener("keydown",this.onKeyDown,!1),window.removeEventListener("keyup",this.onKeyUp,!1),this.domElement.removeEventListener("pointermove",this.onPointerHover),xD||(this.domElement.removeEventListener("gesturestart",this.onGesture),this.domElement.removeEventListener("gesturechange",this.onGesture),this.domElement.removeEventListener("gestureend",this.onGesture)),this.domElement.removeEventListener("touchmove",this.onTouchMove),this.domElement.removeEventListener("touchend",this.onTouchEnd),this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp)}},{key:"applyLimits",value:function applyLimits(X,$,ee,ne,ae,de,fe,Ue){var je,Ke,et;this.overShoot.set(0,0),X instanceof wo?(je=X.x,Ke=X.y,this.current.set(this.target.x,this.target.y),et=!0):(je=X.theta,Ke=X.phi,this.current.set(no(this.spherical.theta),no(this.spherical.phi)),et=!1),0===ee&&(this.current.x+=je,this.current.y+=Ke),(3===$||2===$)&&(!et&&this.isThetaFlipped?this.current.x>ne&&this.current.x<0?this.overShoot.x=ne-this.current.x:this.current.x<ae&&this.current.x>0&&(this.overShoot.x=ae-this.current.x):this.current.x>ne?this.overShoot.x=ne-this.current.x:this.current.x<ae&&(this.overShoot.x=ae-this.current.x),ne===ae&&(je=0)),(3===$||1===$)&&(this.current.y>de?this.overShoot.y=de-this.current.y:this.current.y<fe&&(this.overShoot.y=fe-this.current.y),de===fe&&(Ke=0)),et||(this.overShoot.x=no(this.overShoot.x),this.overShoot.y=no(this.overShoot.y)),0!==ee?(this.overRatio.copy(this.overShoot).divide(Ue),this.overRatio.x=Math.min(Math.abs(this.overRatio.x),1),this.overRatio.y=Math.min(Math.abs(this.overRatio.y),1),1===ee&&(this.overRatio.x=FM(Math.abs(this.overRatio.x)),this.overRatio.y=FM(Math.abs(this.overRatio.y))),this.isPointerDown||1===ee?2===ee&&(this.overRatio.x>.9||this.overRatio.y>.9)?this.isPointerDown=!1:(je*this.overShoot.x<0&&(je*=1-this.overRatio.x),Ke*this.overShoot.y<0&&(Ke*=1-this.overRatio.y)):2===ee&&(!et&&(this.overRatio.x>.002||this.overRatio.y>.002)||et&&(Math.abs(this.overShoot.x)>2||Math.abs(this.overShoot.y)>2)?(je=.05*this.overShoot.x,Ke=.05*this.overShoot.y,et?this.isPanOverShoot=!0:this.isRotateOverShoot=!0):et?this.isPanOverShoot=!1:this.isRotateOverShoot=!1)):(je+=this.overShoot.x,Ke+=this.overShoot.y),X instanceof wo?(X.x=je,X.y=Ke):(X.theta=je,X.phi=Ke)}},{key:"setEnableDampingSpeed",value:function setEnableDampingSpeed(X){this.enableDamping=X,aB=!0===X?.2:1}},{key:"stopDamping",value:function stopDamping(){this.sphericalDelta.theta=0,this.sphericalDelta.phi=0}},{key:"getAutoRotationAngle",value:function getAutoRotationAngle(){return 2*Math.PI/60/60*rB}},{key:"getZoomScale",value:function getZoomScale(){return Math.pow(.95,2)}},{key:"rotateLeft",value:function rotateLeft(X){this.sphericalDelta.theta-=X}},{key:"rotateUp",value:function rotateUp(X){this.sphericalDelta.phi-=X}},{key:"panLeft",value:function panLeft(X,$){this.panLeftV.setFromMatrixColumn($,0),this.panLeftV.multiplyScalar(-X),this.panOffset.add(this.panLeftV)}},{key:"panUp",value:function panUp(X,$){this.panUpV.setFromMatrixColumn($,1),this.panUpV.multiplyScalar(X),this.panOffset.add(this.panUpV)}},{key:"pan",value:function pan(X,$){var ee=this.domElement;if(ee&&this.object.isPerspectiveCamera){var ne=this.object.position;this.panV.copy(ne).sub(this.target);var ae=this.panV.length();ae*=Math.tan(this.object.fov/2*Math.PI/180),this.panLeft(2*X*ae/ee.clientHeight,this.object.matrix),this.panUp(2*$*ae/ee.clientHeight,this.object.matrix)}else ee&&this.object.isOrthographicCamera&&(this.panLeft(X*(this.object.right-this.object.left)/this.object.zoom/ee.clientWidth,this.object.matrix),this.panUp($*(this.object.top-this.object.bottom)/this.object.zoom/ee.clientHeight,this.object.matrix));this.dispatchEvent(WR)}},{key:"dollyOut",value:function dollyOut(X){this.object.isPerspectiveCamera?this.scale/=X:this.object.isOrthographicCamera&&(this.object.zoom*=X,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(GR)}},{key:"dollyIn",value:function dollyIn(X){this.object.isPerspectiveCamera?this.scale*=X:this.object.isOrthographicCamera&&(this.object.zoom/=X,this.zoomLimitsEnabled&&(this.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom))),this.object.updateProjectionMatrix(),this.zoomChanged=!0),this.dispatchEvent(GR)}},{key:"zoomOut",value:function zoomOut(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getZoomScale();this.dispatchEvent(XR),this.dollyOut(X),this.dispatchEvent(QR)}},{key:"zoomIn",value:function zoomIn(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getZoomScale();this.dispatchEvent(XR),this.dollyIn(X),this.dispatchEvent(QR)}},{key:"handleMouseDownRotate",value:function handleMouseDownRotate(X){this.rotateStart.set(X.clientX,X.clientY)}},{key:"handleMouseDownDolly",value:function handleMouseDownDolly(X){this.dollyStart.set(X.clientX,X.clientY)}},{key:"handleMouseDownPan",value:function handleMouseDownPan(X){this.panStart.set(X.clientX,X.clientY)}},{key:"handleMouseMoveRotate",value:function handleMouseMoveRotate(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.rotateEnd.set(X.clientX,X.clientY),this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(aB*$).rotateAround(eB,-this.object.angleOffsetFromUp);var ee=this.domElement;this.rotateLeft(2*Math.PI*this.rotateDelta.x/ee.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/ee.clientHeight),this.rotateStart.copy(this.rotateEnd),this.update()}},{key:"handleMouseMoveDolly",value:function handleMouseMoveDolly(X){this.dollyEnd.set(X.clientX,X.clientY),this.dollyDelta.subVectors(this.dollyEnd,this.dollyStart),this.dollyDelta.y>0?this.dollyOut(this.getZoomScale()):this.dollyDelta.y<0&&this.dollyIn(this.getZoomScale()),this.dollyStart.copy(this.dollyEnd),this.update()}},{key:"handleMouseMovePan",value:function handleMouseMovePan(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.panEnd.set(X.clientX,X.clientY),this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(1*$),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd),this.update()}},{key:"handleMouseWheel",value:function handleMouseWheel(X){var $=this;if(!1===_D&&!1===_h(X)&&!0===function OO(X){return 0===X.wheelDeltaY||0===X.deltaY?!(bD&&X.shiftKey&&Math.abs(X.wheelDeltaX)>=120)&&(X.wheelDeltaX?X.wheelDeltaX===-3*X.deltaX:0===X.deltaMode):X.wheelDeltaY?X.wheelDeltaY===-3*X.deltaY:0===X.deltaMode}(X)){if(!1===this.enablePan)return;this.gesture?(this.panDelta.set(-X.deltaX,-X.deltaY).multiplyScalar(1),this.panDelta.x=Math.min(Math.abs(this.panDelta.x),100)*(this.panDelta.x<0?-1:1),this.panDelta.y=Math.min(Math.abs(this.panDelta.y),100)*(this.panDelta.y<0?-1:1),X.altKey?this.pan(0,this.panDelta.y):X.shiftKey?this.pan(this.panDelta.x,0):this.pan(this.panDelta.x,this.panDelta.y),this.update()):(this.gesture=!0,this.isPointerDown=!0),window.clearTimeout(this.timer),this.timer=window.setTimeout((function(){$.gesture=!1,$.isPointerDown=!1}),30)}else{if(!1===this.enableZoom)return;0===X.deltaY?X.deltaX<0?this.dollyIn(this.getZoomScale()):X.deltaX>0&&this.dollyOut(this.getZoomScale()):X.deltaY<0?this.dollyIn(this.getZoomScale()):X.deltaY>0&&this.dollyOut(this.getZoomScale()),this.update(),this.gesture=!1,this.isPointerDown=!1}}},{key:"handleTouchStartRotate",value:function handleTouchStartRotate(){if(2===fB.length){var X=.5*(fB[0].pageX+fB[1].pageX),$=.5*(fB[0].pageY+fB[1].pageY);this.rotateStart.set(X,$)}else this.rotateStart.set(fB[0].pageX,fB[0].pageY)}},{key:"handleTouchStartPan",value:function handleTouchStartPan(){if(2===fB.length){var X=.5*(fB[0].pageX+fB[1].pageX),$=.5*(fB[0].pageY+fB[1].pageY);this.panStart.set(X,$)}else this.panStart.set(fB[0].pageX,fB[0].pageY)}},{key:"handleTouchStartDolly",value:function handleTouchStartDolly(){var X=fB[0].pageX-fB[1].pageX,$=fB[0].pageY-fB[1].pageY,ee=Math.sqrt(X*X+$*$);this.dollyStart.set(0,ee)}},{key:"handleTouchStartDollyPan",value:function handleTouchStartDollyPan(){this.enableZoom&&this.handleTouchStartDolly(),this.enablePan&&this.handleTouchStartPan()}},{key:"handleTouchStartDollyRotate",value:function handleTouchStartDollyRotate(){this.enableZoom&&this.handleTouchStartDolly(),this.enableRotate&&this.handleTouchStartRotate()}},{key:"handleTouchMoveRotate",value:function handleTouchMoveRotate(X){if(2===fB.length){var $=Qy(X),ee=.5*(X.pageX+$.x),ne=.5*(X.pageY+$.y);this.rotateEnd.set(ee,ne)}else{if(X.pointerId!==fB[0].pointerId)return;this.rotateEnd.set(X.pageX,X.pageY)}this.rotateDelta.subVectors(this.rotateEnd,this.rotateStart).multiplyScalar(aB);var ae=this.domElement;ae&&(this.rotateLeft(2*Math.PI*this.rotateDelta.x/ae.clientHeight),this.rotateUp(2*Math.PI*this.rotateDelta.y/ae.clientHeight)),this.rotateStart.copy(this.rotateEnd)}},{key:"handleTouchMovePan",value:function handleTouchMovePan(X){if(2===fB.length){var $=Qy(X),ee=.5*(X.pageX+$.x),ne=.5*(X.pageY+$.y);this.panEnd.set(ee,ne)}else{if(X.pointerId!==fB[0].pointerId)return;this.panEnd.set(X.pageX,X.pageY)}this.panDelta.subVectors(this.panEnd,this.panStart).multiplyScalar(1),this.pan(this.panDelta.x,this.panDelta.y),this.panStart.copy(this.panEnd)}},{key:"handleTouchMoveDolly",value:function handleTouchMoveDolly(X){var $=Qy(X),ee=X.pageX-$.x,ne=X.pageY-$.y,ae=Math.sqrt(ee*ee+ne*ne);this.dollyEnd.set(0,ae),this.dollyDelta.set(0,Math.pow(this.dollyEnd.y/this.dollyStart.y,2)),this.dollyOut(this.dollyDelta.y),this.dollyStart.copy(this.dollyEnd)}},{key:"handleTouchMoveDollyPan",value:function handleTouchMoveDollyPan(X){this.enableZoom&&this.handleTouchMoveDolly(X),this.enablePan&&this.handleTouchMovePan(X)}},{key:"handleTouchMoveDollyRotate",value:function handleTouchMoveDollyRotate(X){this.enableZoom&&this.handleTouchMoveDolly(X),this.enableRotate&&this.handleTouchMoveRotate(X)}}]),cp}(aa);function no(X){for(var $=2*Math.PI;X<=-Math.PI;)X+=$;for(;X>Math.PI;)X-=$;return X}function FM(X){return 1-Math.pow(1-X,4)}var fB=[],yB={};function UM(X){delete yB[X.pointerId];for(var $=0;$<fB.length;$++)if(fB[$].pointerId===X.pointerId)return void fB.splice($,1)}function zM(X){var $=yB[X.pointerId];void 0===$&&($=new va,yB[X.pointerId]=$),$.set(X.pageX,X.pageY)}function Qy(X){var $=X.pointerId===fB[0].pointerId?fB[1]:fB[0];return yB[$.pointerId]}var kB=function(X){_inherits(io,X);var $=_createSuper(io);function io(){var X;return _classCallCheck(this,io),(X=$.call(this)).layers.enable(3),X}return _createClass(io,[{key:"setFromCamera",value:function setFromCamera(X,$){$.isOrthographicCamera?(this.ray.origin.set(X.x,X.y,-1).unproject($),this.ray.direction.set(0,0,-1).transformDirection($.matrixWorld),this.camera=$):$.isPerspectiveCamera?(this.ray.origin.set(X.x,X.y,-1).unproject($),this.ray.direction.set(X.x,X.y,.5).unproject($).sub(this.ray.origin).normalize(),this.camera=$):console.error("Raycaster: Unsupported camera type.")}},{key:"intersectVisibleObjects",value:function intersectVisibleObjects(X){var $=this,ee=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],ne=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return X.forEach((function(X){X.visible&&$.intersectObject(X,ee,ne)})),ne}},{key:"createRaycastLineHelper",value:function createRaycastLineHelper(){var X=new Em({color:65280,linewidth:10}),$=new wo(this.ray.origin.x,this.ray.origin.y,this.ray.origin.z),ee=new wo(this.ray.direction.x,this.ray.direction.y,this.ray.direction.z),ne=this.camera.far-this.camera.near,ae=(new wo).addVectors($,ee.multiplyScalar(ne)),de=new Wu;return de.setFromPoints([$,ae]),new Bm(de,X)}}]),io}(x_),CB=function(){function kM(){_classCallCheck(this,kM)}return _createClass(kM,null,[{key:"create",value:function create(X){return this.build(this.normalizeInputs(X))}},{key:"normalizeInputs",value:function normalizeInputs(X,$){var ee,ne,ae,de,fe,Ue=Object.assign({},null!=(ee=null==$?void 0:$.parameters)?ee:{width:100,radialSegments:64,heightSegments:1,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadius:0,cornerSegments:8,hollow:0},X.parameters),je=Ue.width/2,Ke=null!=(ne=Ue.radiusTop)?ne:je,et=null!=(ae=Ue.radiusBottom)?ae:je;return Ke===et?(Ke=je,et=je):Ke>et?et=et*je/(Ke=je):(Ke=Ke*je/et,et=je),{parameters:Object.assign(Ue,{width:Math.abs(Ue.width),height:Math.abs(null!=(de=Ue.height)?de:Ue.width),depth:Math.abs(null!=(fe=Ue.depth)?fe:Ue.width),radiusTop:Ke,radiusBottom:et})}}},{key:"build",value:function build(X){var $,ee=X.parameters,ne=ee.width,ae=ee.depth,de=ee.height,fe=ee.radialSegments,Ue=ee.heightSegments,je=ee.openEnded,Ke=ee.thetaStart,et=ee.thetaLength,tt=ee.radiusTop,nt=ee.radiusBottom,it=ee.cornerRadius,ct=ee.cornerSegments,dt=ee.hollow;return($=it||dt?new EB(tt,nt,de,fe,Ue,je,Ke,et*Math.PI/180,it,it,ct,dt):new py(tt,nt,de,fe,Ue,je,Ke,et*Math.PI/180)).scale(1,1,ae/ne),Object.assign($,{userData:At(Ct({},X),{type:"CylinderGeometry"})})}}]),kM}();function so(X,$,ee){ee.x=X.x*$.x,ee.y=X.y,ee.z=X.x*$.y}function GM(X){return new va(X.y,-X.x)}var EB=function(X){_inherits(Uh,X);var $=_createSuper(Uh);function Uh(X,ee,ne,de,fe,Ue,Ke,et,tt,nt,it,ct){var dt,vt=arguments.length>12&&void 0!==arguments[12]&&arguments[12];_classCallCheck(this,Uh),(dt=$.call(this)).type="RoundedCylinderBufferGeometry",X=void 0!==X?X:1,ee=void 0!==ee?ee:1,ne=ne||1,de=Math.floor(de)||8,fe=Math.floor(fe)||1,Ue=void 0!==Ue&&Ue,Ke=void 0!==Ke?Ke:0,et=void 0!==et?et:2*Math.PI,Ue&&(tt=0,nt=0);var gt=[],yt=[],_t=[],wt=[],St=0,Ct=ne/2,At=new wo,Et=new wo;vt&&0==X&&(X=tt),vt&&0==ee&&(ee=nt);var Rt=new va(X,Ct),Bt=new va(ee,-Ct),Ht=null,Wt=null,qt=null,Zt=null,Xt=Rt.clone().sub(Bt),Qt=0,en=0,tn=0;ct>0&&(Qt=Math.min(X,ee)*(1-ct),en=X-Qt,tn=ee-Qt);var un=Rt.clone();un.x-=Qt;var hn=Math.PI-Xt.angle(),dn=Xt.angle(),mn=Math.tan(dn/2),gn=Math.tan(hn/2),_n=mn+gn,wn=ct?_n:gn,Sn=ct?_n:mn;if(tt=Math.min(tt,(X-en)/wn,Xt.length()/_n),nt=Math.min(nt,(ee-tn)/Sn,Xt.length()/_n),tt>0){var Cn=tt/mn;Ht=Rt.clone().sub(new va(Cn,tt)),ct&&((qt=Ht.clone()).x-=Qt-_n*tt),Rt.sub(Xt.clone().setLength(Cn))}if(nt>0){var An=nt/gn;Wt=Bt.clone().sub(new va(An,-nt)),Bt.add(Xt.clone().setLength(An)),ct&&((Zt=Wt.clone()).x-=Qt-_n*nt,un.sub(Xt.clone().setLength(An)))}for(var Mn=(Xt=Rt.clone().sub(Bt)).length()<.5,En=[],Tn=0;Tn<=de;Tn++){var Pn=[],Dn=Tn/de,Ln=Dn*et+Ke,On=new va(Math.sin(Ln),Math.cos(Ln));Zt&&Wt?(W(Pn,Dn,On,hn,nt,Zt,-1,!0),W(Pn,Dn,On,dn,nt,Wt,-1,!1)):Wt?(ge(Pn,On,Wt.x,0,-1),W(Pn,Dn,On,dn,nt,Wt,-1,!1)):Ue||ge(Pn,On,ee,tn,-1);var In=GM(Xt).normalize();if(so(In,On,At),!Mn)for(var Fn=0;Fn<=fe;Fn++){var Wn=Fn/fe,Yn=Xt.clone().multiplyScalar(Wn).add(Bt);so(Yn,On,Et),yt.push(Et.x,Et.y,Et.z),_t.push(At.x,At.y,At.z),wt.push(Dn,.5+Et.y/ne),Pn.push(St++)}if(qt&&Ht?(W(Pn,Dn,On,hn,tt,Ht,1,!1),W(Pn,Dn,On,dn,tt,qt,1,!0)):Ht?(W(Pn,Dn,On,hn,tt,Ht,1,!1),ge(Pn,On,Ht.x,0,1)):Ue||ge(Pn,On,X,en,1),ct&&!Mn){var Jn=GM(Xt).multiplyScalar(-1).normalize();so(Jn,On,At);for(var Zn=0;Zn<=fe;Zn++){var Kn=Zn/fe,$n=Xt.clone().multiplyScalar(-Kn).add(un);so($n,On,Et),yt.push(Et.x,Et.y,Et.z),_t.push(At.x,At.y,At.z),wt.push(Dn,.5+Et.y/ne),Pn.push(St++)}}ct&&!Ue&&Pn.push(Pn[0]),En.push(Pn)}for(var nr=0;nr<En.length-1;nr++)for(var ir=0;ir<En[0].length-1;ir++)if(!Ue||!ct||ir!=fe){var ar=En[nr][ir],or=En[nr+1][ir],hr=En[nr+1][ir+1],dr=En[nr][ir+1],fr=yt[3*hr+0],vr=yt[3*hr+2];gt.push(ar,or,dr),(0!=fr||0!=vr)&&gt.push(or,hr,dr)}function W(X,$,ee,ae,de,fe,Ue,je){for(var Ke=0;Ke<it+1;Ke++){var et=Ke/it,tt=Ue<0?et:1-et;je&&(tt-=1),tt*=ae;var nt=new va(Math.sin(tt),Math.cos(tt)*Ue);so(nt.clone().multiplyScalar(de).add(fe),ee,Et),yt.push(Et.x,Et.y,Et.z),so(nt,ee,At),_t.push(At.x,At.y,At.z),wt.push($,.5+Et.y/ne),X.push(St++)}}function ge(X,$,ee,ne,ae){var de=new wo,fe=new va,Ue=[ee,ne];ae<0&&Ue.reverse();for(var je=0,Ke=Ue;je<Ke.length;je++){var et=Ke[je];fe.set(et,Ct*ae),so(fe,$,de),yt.push(de.x,de.y,de.z),_t.push(0,ae,0),wt.push(.5,.5),X.push(St++)}}function oe($,ne,de){var fe=new va(Math.sin(de),Math.cos(de)),Ue=new va(-Math.cos(de),Math.sin(de)),Ke=new wo,et=$<0?function(X,$,ee){return gt.push(X,$,ee)}:function(X,$,ee){return gt.push(X,ee,$)};so(new va((X+ee+en+tn)/4,0),fe,Ke),yt.push(Ke.x,Ke.y,Ke.z),_t.push(Ue.x,0,Ue.y),wt.push(.5,.5);var tt,nt=St++,it=(0,je.Z)(ne);try{for(it.s();!(tt=it.n()).done;){var ct=tt.value,dt=yt.slice(3*ct,3*ct+3);yt.push.apply(yt,(0,ae.Z)(dt)),_t.push(Ue.x,0,Ue.y);var vt=wt.slice(2*ct,2*ct+2);wt.push.apply(wt,(0,ae.Z)(vt)),St++}}catch(At){it.e(At)}finally{it.f()}for(var Ct=nt+1;Ct<St-1;Ct++)et(nt,Ct,Ct+1);et(nt,St-1,nt+1)}return et<2*Math.PI&&(oe(-1,En[0],Ke),oe(1,En[En.length-1],Ke+et)),dt.setIndex(gt),dt.setAttribute("position",new Iu(yt,3)),dt.setAttribute("normal",new Iu(_t,3)),dt.setAttribute("uv",new Iu(wt,2)),dt}return _createClass(Uh)}(Wu),TB=function(){function VM(){_classCallCheck(this,VM)}return _createClass(VM,null,[{key:"create",value:function create(X){return this.build(this.normalizeInputs(X))}},{key:"normalizeInputs",value:function normalizeInputs(X,$){var ee,ne,ae,de=Object.assign({},null!=(ee=null==$?void 0:$.parameters)?ee:{width:100,radialSegments:32,heightSegments:8,openEnded:!1,thetaStart:0,thetaLength:360,cornerRadiusTop:0,cornerRadiusBottom:0,cornerSegments:8},X.parameters);return{parameters:Object.assign(de,{width:Math.abs(de.width),height:Math.abs(null!=(ne=de.height)?ne:de.width),depth:Math.abs(null!=(ae=de.depth)?ae:de.width)})}}},{key:"build",value:function build(X){var $,ee=X.parameters,ne=ee.width,ae=ee.depth,de=ee.height,fe=ee.radialSegments,Ue=ee.heightSegments,je=ee.openEnded,Ke=ee.thetaStart,et=ee.thetaLength,tt=ee.cornerRadiusTop,nt=ee.cornerRadiusBottom,it=ee.cornerSegments;return($=tt>0||nt>0||et<360?new EB(0,ne/2,de,fe,Ue,je,Ke,et*Math.PI/180,tt,nt,it,0,!0):new vy(ne/2,de,fe,Ue,je)).scale(1,1,ae/ne),Object.assign($,{userData:At(Ct({},X),{type:"ConeGeometry"})})}}]),VM}(),PB=function(){function HM(){_classCallCheck(this,HM)}return _createClass(HM,null,[{key:"create",value:function create(X){return this.build(this.normalizeInputs(X))}},{key:"normalizeInputs",value:function normalizeInputs(X,$){var ee,ne,ae,de=Object.assign({},null!=(ee=null==$?void 0:$.parameters)?ee:{width:100,widthSegments:1,heightSegments:1,depthSegments:1,cornerRadius:0,cornerSegments:8},X.parameters);return{parameters:Object.assign(de,{width:Math.abs(de.width),height:Math.abs(null!=(ne=de.height)?ne:de.width),depth:Math.abs(null!=(ae=de.depth)?ae:de.width)})}}},{key:"build",value:function build(X){var $,ee=X.parameters,ne=ee.width,ae=ee.height,de=ee.depth,fe=ee.widthSegments,Ue=ee.heightSegments,je=ee.depthSegments,Ke=ee.cornerRadius,et=ee.cornerSegments;return $=0==Ke?new Rh(ne,ae,de,fe,Ue,je):new RB(ne,ae,de,fe,Ue,je,Ke,et),Object.assign($,{userData:At(Ct({},X),{type:"CubeGeometry"})})}}]),HM}(),DB=Math.PI/2,RB=function(X){_inherits(Ky,X);var $=_createSuper(Ky);function Ky(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,de=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,fe=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,Ue=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,je=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,Ke=arguments.length>7&&void 0!==arguments[7]?arguments[7]:4;_classCallCheck(this,Ky),(X=$.call(this)).type="BoxBufferGeometry";var et=_assertThisInitialized(X);de=Math.floor(de),fe=Math.floor(fe),Ue=Math.floor(Ue),Ke=Math.floor(Ke),je=Math.min(je,ee/2,ne/2,ae/2);var tt=[],nt=[],it=[],ct=[],dt=0,vt=0;function g(X,$,ee,ne,ae,de,fe,Ue,Ke,gt,yt){for(var _t=(de-2*je)/Ke,wt=(fe-2*je)/gt,St=de/2-je,Ct=fe/2-je,At=Ue/2,Et=Ke+1,Rt=gt+1,Bt=0,Ht=0,Wt=new wo,qt=0;qt<Rt;qt++)for(var Zt=qt*wt-Ct,Xt=0;Xt<Et;Xt++){var Qt=Xt*_t-St;Wt[X]=Qt*ne,Wt[$]=Zt*ae,Wt[ee]=At,nt.push(Wt.x,Wt.y,Wt.z),Wt[X]=0,Wt[$]=0,Wt[ee]=Ue>0?1:-1,it.push(Wt.x,Wt.y,Wt.z),ct.push(Xt/Ke),ct.push(1-qt/gt),Bt+=1}for(var en=0;en<gt;en++)for(var tn=0;tn<Ke;tn++){var un=dt+tn+Et*en,hn=dt+tn+Et*(en+1),dn=dt+(tn+1)+Et*(en+1),mn=dt+(tn+1)+Et*en;tt.push(un,hn,mn),tt.push(hn,dn,mn),Ht+=6}et.addGroup(vt,Ht,yt),vt+=Ht,dt+=Bt}function v(X,$,ee,ne,ae,de,fe,Ue,gt,yt,_t){for(var wt=(fe-2*je)/yt,St=fe/2-je,Ct=Ue/2-je,At=gt/2,Et=yt+1,Rt=0,Bt=0,Ht=new wo,Wt=new wo,qt=0;qt<Ke+1;qt++){var Zt=qt/Ke*DB,Xt=Math.sin(Zt)*je,Qt=(1-Math.cos(Zt))*je,en=Math.sin(Zt),tn=Math.cos(Zt);Ht[$]=(Ct+Xt)*ae,Ht[ee]=(At-Qt)*de,Wt[X]=0,Wt[$]=en*Math.sign(Ht[$]),Wt[ee]=tn*Math.sign(Ht[ee]);for(var un=0;un<Et;un++){var hn=un*wt-St;Ht[X]=hn*ne,nt.push(Ht.x,Ht.y,Ht.z),it.push(Wt.x,Wt.y,Wt.z),ct.push(un/yt),ct.push(0),Rt+=1}}for(var dn=0;dn<Ke;dn++)for(var mn=0;mn<yt;mn++){var gn=dt+mn+Et*dn,_n=dt+mn+Et*(dn+1),wn=dt+(mn+1)+Et*(dn+1),Sn=dt+(mn+1)+Et*dn;tt.push(gn,_n,Sn),tt.push(_n,wn,Sn),Bt+=6}et.addGroup(vt,Bt,_t),vt+=Bt,dt+=Rt}function y(X,$,de){var fe=new wo,Ue=new wo(ee/2,ne/2,ae/2);Ue.subScalar(je);for(var et=[],vt=X*$*de>0?function(X,$,ee){return tt.push(X,$,ee)}:function(X,$,ee){return tt.push(X,ee,$)},gt=0;gt<=Ke;gt++){for(var yt=[],_t=DB*(1-gt/Ke),wt=Math.cos(_t),St=Math.sin(_t),Ct=0,At=0;At<=gt;At++){var Et=Math.cos(Ct),Rt=Math.sin(Ct);fe.x=wt*Et,fe.y=St,fe.z=wt*Rt;var Bt=Ue.clone().addScaledVector(fe,je);nt.push(X*Bt.x,$*Bt.y,de*Bt.z),it.push(X*fe.x,$*fe.y,de*fe.z),ct.push(0,0),yt.push(dt++),Ct+=DB/gt}et.push(yt)}for(var Ht=et.length-1,Wt=0;Wt<Ht;Wt++){var qt=et[Wt],Zt=et[Wt+1],Xt=qt.length-1;vt(qt[0],Zt[1],Zt[0]);for(var Qt=1;Qt<=Xt;Qt++)vt(qt[Qt-1],qt[Qt],Zt[Qt]),vt(qt[Qt],Zt[Qt+1],Zt[Qt])}}return g("z","y","x",-1,-1,ae,ne,ee,Ue,fe,0),g("z","y","x",1,-1,ae,ne,-ee,Ue,fe,1),g("x","z","y",1,1,ee,ae,ne,de,Ue,2),g("x","z","y",1,-1,ee,ae,-ne,de,Ue,3),g("x","y","z",1,-1,ee,ne,ae,de,fe,4),g("x","y","z",-1,-1,ee,ne,-ae,de,fe,5),je>0&&(v("z","y","x",-1,-1,1,ae,ne,ee,Ue,0),v("z","y","x",1,-1,-1,ae,ne,ee,Ue,1),v("z","y","x",-1,1,-1,ae,ne,ee,Ue,1),v("z","y","x",1,1,1,ae,ne,ee,Ue,0),v("x","y","z",-1,-1,-1,ee,ne,ae,de,0),v("x","y","z",1,-1,1,ee,ne,ae,de,1),v("x","y","z",-1,1,1,ee,ne,ae,de,0),v("x","y","z",1,1,-1,ee,ne,ae,de,1),v("y","x","z",-1,-1,1,ne,ee,ae,fe,0),v("y","x","z",1,-1,-1,ne,ee,ae,fe,1),v("y","x","z",1,1,1,ne,ee,ae,fe,1),v("y","x","z",-1,1,-1,ne,ee,ae,fe,0),y(1,1,1),y(-1,1,1),y(1,-1,1),y(-1,-1,1),y(1,1,-1),y(-1,1,-1),y(1,-1,-1),y(-1,-1,-1)),X.setIndex(tt),X.setAttribute("position",new Iu(nt,3)),X.setAttribute("normal",new Iu(it,3)),X.setAttribute("uv",new Iu(ct,2)),X}return _createClass(Ky)}(Wu),VB=function(X){_inherits(oo,X);var $=_createSuper(oo);function oo(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],de=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",Ue=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,je=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2,Ke=arguments.length>5&&void 0!==arguments[5]?arguments[5]:4;_classCallCheck(this,oo),(X=$.call(this)).type="PolyhedronGeometryRound";var et=[],tt=[],nt=[];return h(),u(),X.setAttribute("position",new Iu(et,3)),X.setAttribute("normal",new Iu(nt,3)),X.setAttribute("uv",new Iu(tt,2)),_possibleConstructorReturn(X);function h(){var X;0==(je=Math.min(.99999,je))&&(Ke=0);for(var $={IcosahedronGeometry:5,DodecahedronGeometry:3,HexahedronGeometry:3,OctahedronGeometry:4,TetrahedronGeometry:3}[de],tt=new wo,it=tt.clone(),ct=new ku,dt=je*Ue,vt=Ue-dt,gt=Ke+1,yt=new wo,_t=function S(X,$){return yt.subVectors(X,$).normalize()},wt=function T(X,$){return Array(X).fill(void 0).map($)},St=wt(ee.length/3,(function(X,$){return(new wo).fromArray(ee,3*$).setLength(Ue)})),Ct=[],At=1e6,Et=function _loop4($){for(var ee=St[$],ae=[],de=void 0,Ue=void 0,je=void 0,Ke=1e10,et=-1;-1!=(et=ne.indexOf($,et+1));){var tt=et-et%3;de=ne[tt+(et+1)%3],Ue=ne[tt+(et+2)%3],je=ee.distanceToSquared(St[de]),Ke=Math.min(Ke,je),ae.push([de,Ue,je])}Ke+=1e-6;for(var nt=[],it=0,ct=ae.length,dt=0;dt<ct;dt++){var vt=(0,fe.Z)(ae[it],3);de=vt[0],Ue=vt[1],je=vt[2];var gt=1==(null==(X=Ct[de])?void 0:X.includes($));je<=Ke&&nt.push(de+ +gt*At),it=ae.findIndex((function(X){return X[0]==Ue}))}Ct.push(nt)},Rt=0;Rt<St.length;Rt++)Et(Rt);for(var Bt,Ht,Wt=[],qt=0,Zt=0,Xt=3==$,Qt=0;Qt<=Ke;Qt++){Bt=Qt*(Qt+1)/2,Ht=(Qt+1)*(Qt+2)/2;for(var en=0;en<Ke-Qt;en++){var tn,un;qt=(tn=[Bt+en+Qt+2,Ht+en+Qt+3])[0],Zt=tn[1],Wt.push.apply(Wt,[Bt,Ht].concat((0,ae.Z)(Xt?[Zt,Bt]:[qt,Ht]),[Zt,qt])),Bt=(un=[qt,Zt])[0],Ht=un[1]}Wt.push(Bt,Ht,Bt+Ke+2)}for(var hn=tt.clone(),dn=tt.clone(),mn=tt.clone(),gn=tt.clone(),_n=tt.clone(),wn=[],Sn=wt(St.length,(function(){return wt($,(function(){return tt.clone()}))})),Cn=0;Cn<St.length;Cn++){tt.copy(St[Cn]).normalize(),hn.copy(tt).multiplyScalar(vt);for(var An=Ct[Cn],Mn=0;Mn<An.length;Mn++){var En=An[Mn],Tn=An[(Mn+1)%$];ct.setFromPointsAndIndices(St,Cn,En%At,Tn%At),ct.b.sub(ct.a).setLength(1e10).add(ct.a),ct.c.sub(ct.a).setLength(1e10).add(ct.a),ct.closestPointToPoint(hn,Sn[Cn][Mn])}var Pn=[],Dn=[],Ln=[],On=new wo;0==Ke&&(0,ae.Z)(Sn[Cn]).reduce((function(X,$){return X.add($)}),On).multiplyScalar(1/$);for(var In=0;In<$;In++){var Fn=[],Wn=(In-1+$)%$,Yn=Sn[Cn][Wn],Jn=Sn[Cn][In];tt.copy(Yn).sub(hn),it.copy(Jn).sub(hn);var Zn=hn.angleTo(tt),Kn=tt.angleTo(it),$n=Math.cos(Zn)*dt;0==Ke?dn.copy(On):dn.copy(hn).setLength(vt+$n),Dn.push($n);for(var nr=[dn,Yn,Jn],ir=0;ir<2;ir++){var ar=nr[ir],or=nr[ir+1];gn.subVectors(ar,hn),_n.subVectors(or,hn),mn.crossVectors(gn,_n).normalize();for(var hr=0;hr<gt;hr++){var dr=[Zn,Kn][ir]*hr/gt;tt.copy(gn).applyAxisAngle(mn,dr).add(hn),Pn.push(tt.clone()),ir&&(_t(tt,hn),Fn.push([0==hr?ar:tt.clone(),yt.clone()]))}ir&&(_t(or,hn),Fn.push([or,yt.clone()]))}Ln.push(Fn)}wn.push(Ln);for(var fr=2*gt,vr=function _loop5(X){for(var ee=fr*X,ne=fr*((X+1)%$),de=[Pn[ee]],fe=1;fe<gt;fe++){gn=Pn[ee+fe],_n=Pn[ne+fe],de.push(gn);for(var Ue=1,je=fe-2+1;Ue<=je;Ue++)tt.lerpVectors(gn,_n,Ue/(je+1)),tt.sub(hn).setLength(Dn[X]).add(hn),de.push(tt.clone());de.push(_n)}for(var Ke=0;Ke<gt;Ke++)de.push(Pn[Ke+gt+ee]);de.push(Pn[ne+gt]);var it=Wt.map((function(X){return de[X]}));et.push.apply(et,(0,ae.Z)(it.map((function(X){return[X.x,X.y,X.z]})).flat())),nt.push.apply(nt,(0,ae.Z)(it.map((function(X){return _t(X,hn),[yt.x,yt.y,yt.z]})).flat()))},yr=0;yr<$;yr++)vr(yr)}for(var br=[],_r=function _loop6(X){for(var ee=0;ee<$;ee++){var ne=Ct[X][ee];if(ne<At){for(var ae=Ct[ne].findIndex((function($){return $%At==X})),de=wn[X][ee],fe=wn[ne][ae],Ue=0;Ue<gt;Ue++){var je=de[Ue],Ke=fe[gt-Ue],tt=de[Ue+1];[je,Ke,tt,tt,Ke,fe[gt-(Ue+1)]].forEach((function(X){et.push(X[0].x,X[0].y,X[0].z),nt.push(X[1].x,X[1].y,X[1].z)}))}br.push(de[0][0],fe[gt][0],de[gt][0],fe[0][0])}}},wr=0;wr<Ct.length;wr++)_r(wr);for(;br.length;){var Cr,Ar=void 0,Mr=void 0,Er=void 0,Tr=br.splice(0,2),Pr=(0,fe.Z)(Tr,2);Cr=Pr[0],Ar=Pr[1];for(var Dr=[Cr];Cr!=Ar;)Dr.push(Ar),Er=(Mr=br.indexOf(Ar))%2,Ar=br.splice(Mr-Er,2)[1-Er];yt.subVectors(Dr[0],Dr[1]).cross(tt.subVectors(Dr[0],Dr[2])).normalize();var Br=yt.dot(Dr[0])<0;Br&&yt.negate();for(var Ir=1;Ir<=Dr.length-2;Ir++)[Dr[Ir+ +Br],Dr[Ir+1-+Br],Dr[0]].forEach((function(X){et.push(X.x,X.y,X.z),nt.push(yt.x,yt.y,yt.z)}))}}function u(){for(var X=new wo,$=0;$<et.length;$+=3){X.x=et[$+0],X.y=et[$+1],X.z=et[$+2];var ee=S(X)/2/Math.PI+.5,ne=T(X)/Math.PI+.5;tt.push(ee,1-ne)}for(var ae=new wo,de=new wo,fe=new wo,Ue=new wo,je=new va,Ke=new va,nt=new va,it=function b(X,$,ee,ne){ne<0&&1===X.x&&(tt[$]=X.x-1),0===ee.x&&0===ee.z&&(tt[$]=ne/2/Math.PI+.5)},ct=0,dt=0;ct<et.length;ct+=9,dt+=6){ae.set(et[ct+0],et[ct+1],et[ct+2]),de.set(et[ct+3],et[ct+4],et[ct+5]),fe.set(et[ct+6],et[ct+7],et[ct+8]),je.set(tt[dt+0],tt[dt+1]),Ke.set(tt[dt+2],tt[dt+3]),nt.set(tt[dt+4],tt[dt+5]),Ue.copy(ae).add(de).add(fe).divideScalar(3);var vt=S(Ue);it(je,dt+0,ae,vt),it(Ke,dt+2,de,vt),it(nt,dt+4,fe,vt)}for(var gt=0;gt<tt.length;gt+=6){var yt=tt[gt+0],_t=tt[gt+2],wt=tt[gt+4],St=Math.max(yt,_t,wt),Ct=Math.min(yt,_t,wt);St>.9&&Ct<.1&&(yt<.2&&(tt[gt+0]+=1),_t<.2&&(tt[gt+2]+=1),wt<.2&&(tt[gt+4]+=1))}function S(X){return Math.atan2(X.z,-X.x)}function T(X){return Math.atan2(-X.y,Math.sqrt(X.x*X.x+X.z*X.z))}}}return _createClass(oo,null,[{key:"fromJSON",value:function fromJSON(X){return new oo(X.vertices,X.indices,X.radius,X.corner,X.cornerSides)}}]),oo}(Wu),HB=function(){function WM(){_classCallCheck(this,WM)}return _createClass(WM,null,[{key:"create",value:function create(X){return this.build(this.normalizeInputs(X))}},{key:"normalizeInputs",value:function normalizeInputs(X,$){var ee,ne,ae,de=Object.assign({},null!=(ee=null==$?void 0:$.parameters)?ee:{width:100,detail:0,corner:0,cornerSides:4},X.parameters);return{parameters:Object.assign(de,{width:Math.abs(de.width),height:Math.abs(null!=(ne=de.height)?ne:de.width),depth:Math.abs(null!=(ae=de.depth)?ae:de.width)})}}},{key:"build",value:function build(X){var $=X.parameters,ee=$.width,ne=$.height,ae=$.depth,de=$.detail,fe=$.corner,Ue=$.cornerSides,je=0===de&&0!==fe?new jB(.5*ee,fe,Ue):new gy(.5*ee,de);return je.scale(1,ne/ee,ae/ee),Object.assign(je,{userData:At(Ct({},X),{type:"DodecahedronGeometry"})})}}]),WM}(),jB=function(X){_inherits(zh,X);var $=_createSuper(zh);function zh(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;_classCallCheck(this,zh);var de=(1+Math.sqrt(5))/2,fe=1/de,Ue=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-fe,-de,0,-fe,de,0,fe,-de,0,fe,de,-fe,-de,0,-fe,de,0,fe,-de,0,fe,de,0,-de,0,-fe,de,0,-fe,-de,0,fe,de,0,fe],je=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],Ke="DodecahedronGeometry";return(X=$.call(this,Ue,je,Ke,ee,ne,ae)).type=Ke,X}return _createClass(zh,null,[{key:"fromJSON",value:function fromJSON(X){return new zh(X.radius,X.corner,X.cornerSides)}}]),zh}(VB),GB=1e-12,WB=function(){function Dl(X){_classCallCheck(this,Dl),this.position=new va,this.startPosition=new va,this.uuid=da.generateUUID(),this.position=X.clone()}return _createClass(Dl,[{key:"start",value:function start(){this.reset()}},{key:"reset",value:function reset(){this.startPosition.copy(this.position)}},{key:"applyOffset",value:function applyOffset(X){this.position.copy(this.startPosition).add(X)}},{key:"copy",value:function copy(X){return this.position.copy(X.position),this.startPosition.copy(X.startPosition),this}},{key:"clone",value:function clone(){return new Dl(this.position).copy(this)}},{key:"toJSON",value:function toJSON(){return[this.position.x,this.position.y]}}]),Dl}(),ZB=function(X){_inherits(Pl,X);var $=_createSuper(Pl);function Pl(X){var ee;return _classCallCheck(this,Pl),(ee=$.call(this,X.position)).parent=X,ee}return _createClass(Pl,[{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Pl.prototype),"copy",this).call(this,X),this}},{key:"clone",value:function clone(){return new Pl(this.parent).copy(this)}}]),Pl}(WB),eI=function(X){_inherits(ui,X);var $=_createSuper(ui);function ui(X,ee){var ne;return _classCallCheck(this,ui),(ne=$.call(this,ee)).controls=[],ne.roundness=0,ne.areControlsDirectionsMirrored=!0,ne.uuid=X,ne.controls.push(new ZB(_assertThisInitialized(ne)),new ZB(_assertThisInitialized(ne))),ne}return _createClass(ui,[{key:"getOppositeControl",value:function getOppositeControl(X){var $=this.controls.indexOf(X);return 0===$?this.controls[1]:1===$?this.controls[0]:null}},{key:"applyOffsetToControls",value:function applyOffsetToControls(X){for(var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,ee=0,ne=this.controls.length;ee<ne;ee++){var ae=this.controls[ee];this.position.distanceTo(ae.position)<=$?ae.position.copy(this.position):ae.applyOffset(X)}}},{key:"controlsMoved",value:function controlsMoved(){return!(this.position.equals(this.controls[0].position)&&this.position.equals(this.controls[1].position))}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(ui.prototype),"copy",this).call(this,X),this.controls[0].copy(X.controls[0]),this.controls[1].copy(X.controls[1]),this.roundness=X.roundness,this.uuid=X.uuid,this}},{key:"clone",value:function clone(){return new ui(this.uuid,this.position).copy(this)}},{key:"toJSON",value:function toJSON(){return _get(_getPrototypeOf(ui.prototype),"toJSON",this).call(this).concat(this.controls[0].toJSON(),this.controls[1].toJSON(),[this.roundness])}}],[{key:"create",value:function create(X,$){var ee,ne,de=new ui(X,_construct(va,(0,ae.Z)($.position)));return(ee=de.controls[0].position).set.apply(ee,(0,ae.Z)($.controlPrevious.position)),(ne=de.controls[1].position).set.apply(ne,(0,ae.Z)($.controlNext.position)),de.roundness=$.roundness,de.areControlsDirectionsMirrored=$.areControlsDirectionsMirrored,de}}]),ui}(WB),tI=new va,nI=new va,oI=new va,sI=new va,lI=new va,uI=new va,cI=new wo,hI=new wo;function YM(X){var $=new va;$.addVectors(X.v0,tI.subVectors(X.v1,X.v0).multiplyScalar(2/3));var ee=new va;return ee.addVectors(X.v2,nI.subVectors(X.v1,X.v2).multiplyScalar(2/3)),new bg(X.v0,$,ee,X.v2)}function kh(X,$){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.EPSILON;return Math.abs(X-$)<ee}function VO(X,$){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.EPSILON;return X.distanceTo($)<ee}function HO(X,$){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.EPSILON;return X.distanceTo($)<ee}function ev(X,$,ee){var ne=Math.sqrt(Math.pow($.x-X.x,2)+Math.pow($.y-X.y,2)),ae=Math.sqrt(Math.pow($.x-ee.x,2)+Math.pow($.y-ee.y,2)),de=Math.sqrt(Math.pow(ee.x-X.x,2)+Math.pow(ee.y-X.y,2));return Math.acos((ae*ae+ne*ne-de*de)/(2*ae*ne))}function XM(X,$,ee,ne,ae){var de=Math.sqrt(Math.pow($.x-X.x,2)+Math.pow($.y-X.y,2)),fe=(X.y+$.y)/2,Ue=(X.x+$.x)/2,je=Math.sqrt(Math.pow(ee,2)-Math.pow(de/2,2))*(X.y-$.y)/de,Ke=Math.sqrt(Math.pow(ee,2)-Math.pow(de/2,2))*($.x-X.x)/de;return ne.set(Ue+je,fe+Ke),ae.set(Ue-je,fe-Ke),[ne,ae]}function QM(X,$,ee){return X.distanceTo(ee)<$.distanceTo(ee)?$:X}function JM(X,$,ee,ne,ae,de){var fe,Ue=$.x-X.x,je=$.y-X.y,Ke=ee.x-X.x,et=ee.y-X.y,tt=Math.sqrt((Ue+Ke)*(Ue+Ke)+(je+et)*(je+et));return ev($,X,ee)>Math.PI&&(tt*=-1),fe=kh(et,je)?(je+et)*(ne/tt-.5)*8/3/(Ue-Ke):(Ue+Ke)*(ne/tt-.5)*8/3/(et-je),ae.set($.x-fe*je,$.y+fe*Ue),de.set(ee.x+fe*et,ee.y-fe*Ke),[ae,de]}function tv(X,$){return X.position.equals(X.controls[1].position)&&$.position.equals($.controls[0].position)}function ZM(X,$){for(var ee,ne=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,ae=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],de=hI.set(0,0,0),fe=0,Ue=[],je=0;je<$.length;je++){var Ke=$[je],et=tI,tt=ao(Ke,ne);Ue.push(tt);for(var nt=0;nt<=tt;nt++)if(Ke instanceof bg||Ke instanceof iy||Ke instanceof ty){if(Ke.getPoint(nt/tt,et),de.set(et.x,et.y,0),void 0!==ee&&HO(ee,de))continue;void 0===ee&&(ee=cI),ee.copy(de),X.setXYZ(fe,de.x,de.y,de.z),fe++}}return ae&&fe>1&&!(X.getX(fe-1)===X.getX(0)&&X.getY(fe-1)===X.getY(0)&&X.getZ(fe-1)===X.getZ(0))&&(X.setXYZ(fe,X.getX(0),X.getY(0),X.getZ(0)),fe++),X}function $M(X,$,ee){for(var ne=arguments.length>3&&void 0!==arguments[3]?arguments[3]:12,ae=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],de=hI.set(0,0,0),fe=0,Ue=[],je=0;je<$.length;je++)if(!1!==ee[je]){var Ke=void 0,et=$[je],tt=tI,nt=ao(et,ne);Ue.push(nt);for(var it=0;it<=nt;it++)if(et instanceof bg||et instanceof iy||et instanceof ty){if(et.getPoint(it/nt,tt),de.set(tt.x,tt.y,0),null!=Ke&&Ke.equals(de))continue;void 0===Ke?Ke=cI:(X.setXYZ(fe,Ke.x,Ke.y,Ke.z),fe++,X.setXYZ(fe,de.x,de.y,de.z),fe++),Ke.copy(de)}}return ae&&fe>1&&!(X.getX(fe-1)===X.getX(0)&&X.getY(fe-1)===X.getY(0)&&X.getZ(fe-1)===X.getZ(0))&&(X.setXYZ(fe,X.getX(0),X.getY(0),X.getZ(0)),fe++),Ue}function rv(X){for(var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,ee=arguments.length>2&&void 0!==arguments[2]&&arguments[2],ne=[],ae=0,de=X.length;ae<de;ae++){var fe=X[ae],Ue=0;if(ee&&void 0!==fe.roundedCurveCorner){var je=.5*ao(fe.roundedCurveCorner,$);ae>0&&(ne[ae-1]+=je),Ue+=je}void 0!==fe.curveAfter&&(Ue+=ao(fe.curveAfter,$)),ne.push(Ue)}return X.length>0&&ee&&void 0!==X[0].roundedCurveCorner&&(ne[X.length-1]+=.5*ao(X[0].roundedCurveCorner,$)),ne}function ao(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;return X&&X instanceof Km?2*$:X&&(X instanceof ty||X instanceof ny)?1:X&&X instanceof ly?$*X.points.length:$}function e1(X,$){for(var ee,ne=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,ae=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],de=0,fe=0;fe<$.length;fe++)for(var Ue=$[fe],je=ao(Ue,ne),Ke=tI,et=0;et<=je;et++)if(Ue instanceof bg||Ue instanceof iy||Ue instanceof ty){if(Ue.getPoint(et/je,Ke),void 0!==ee&&VO(ee,Ke,GB))continue;void 0===ee&&(ee=nI),ee.copy(Ke),X.push(Ke.x,Ke.y),de++}return kh(X[0],X[X.length-2],GB)&&kh(X[1],X[X.length-1],GB)&&(X.pop(),X.pop()),ae&&de>1&&!(kh(X[de-1],X[1],GB)&&kh(X[de-2],X[0],GB))&&(X.push(X[0],X[1]),de++),X}var dI,fI,pI=new va,vI=new va,xI=new va,_I=new va,SI=new va,CI=new va,AI=function(X){_inherits(Tt,X);var $=_createSuper(Tt);function Tt(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return _classCallCheck(this,Tt),(X=$.call(this)).points=[],X.shapeHoles=[],X.eventDispatcher=new aa,X.plane=new Sd(new wo(0,0,-1)),X.subdivision=0,X.controlSnapDistance=4,X.pointIDs=0,X.isMesh2D=!1,X._roundness=0,X.isClosed=!1,X.useCubicForRoundedCorners=!0,X.uuid=da.generateUUID(),X.needsUpdate=!1,X.roundedCurves=[],X._width=ee,X._height=ne,X}return _createClass(Tt,[{key:"width",get:function get(){return this._width}},{key:"height",get:function get(){return this._height}},{key:"roundness",get:function get(){return this._roundness},set:function set(X){if(this._roundness!==X){this._roundness=X;for(var $=0,ee=this.points.length;$<ee;$++)this.points[$].roundness=X;this.needsUpdate=!0}}},{key:"getPointsIndexesByIds",value:function getPointsIndexesByIds(X){var $=this;return X.map((function(X){return $.getPointIndexById(X)})).filter((function(X){return X>=0}))}},{key:"getPointIndexById",value:function getPointIndexById(X){var $=this.points.length,ee=this.points.findIndex((function($){return $.uuid===X}));if(ee<0)for(var ne=$,ae=0,de=this.shapeHoles.length;ae<de;ae++){var fe=this.shapeHoles[ae],Ue=fe.points.length-1,je=fe.getPointIndexById(X);if(!(je<0))return je+ne;ne+=Ue}return ee}},{key:"getLineIndexById",value:function getLineIndexById(X){return this.getPointIndexById(X)}},{key:"getBezierPoint",value:function getBezierPoint(X){if(X<=this.points.length-1)return this.points[X];if(this.shapeHoles.length>0)for(var $=0,ee=this.shapeHoles.length;$<ee;$++){var ne=this.shapeHoles[$],ae=X-this.points.length;if(ae<=ne.points.length-1)return ne.points[ae]}throw new Error("This shape does not have a point for this index: "+X)}},{key:"getBezierPointIndex",value:function getBezierPointIndex(X){var $=this.points.indexOf(X);if($>=0)return $;if($=this.points.length,this.shapeHoles.length>0)for(var ee=0,ne=this.shapeHoles.length;ee<ne;ee++){var ae=this.shapeHoles[ee],de=ae.points.indexOf(X);if(de>=0)return $+de;$+=ae.points.length}return-1}},{key:"getAllPoints",value:function getAllPoints(){var X,$=(X=[]).concat.apply(X,(0,ae.Z)(this.shapeHoles.map((function(X){return X.points}))));return[].concat((0,ae.Z)(this.points),(0,ae.Z)($))}},{key:"applySize",value:function applySize(X,$){0===X&&(X=.001),0===$&&($=.001),this._width=X,this._height=$}},{key:"applyScale",value:function applyScale(X,$){for(var ee=pI.set(X,$),ne=0,ae=this.points.length;ne<ae;ne++){var de=this.points[ne];de.position.multiply(ee),de.controls[0].position.multiply(ee),de.controls[1].position.multiply(ee)}for(var fe=0,Ue=this.shapeHoles.length;fe<Ue;fe++)this.shapeHoles[fe].applyScale(X,$);this._update(!1)}},{key:"createPoint",value:function createPoint(X){var $,ee=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,ne=arguments.length>2&&void 0!==arguments[2]?arguments[2]:da.generateUUID();$=X instanceof va?X:new va(X,ee);var ae=new eI(ne,$);return ae.roundness=this.roundness,ae}},{key:"addPoint",value:function addPoint(X){this.points.push(X),this.needsUpdate=!0}},{key:"addPointAt",value:function addPointAt(X,$){this.points.splice($,0,X),this.needsUpdate=!0}},{key:"getPointByUuid",value:function getPointByUuid(X){for(var $=0,ee=this.points.length;$<ee;$++){var ne=this.points[$];if(ne.uuid===X)return ne}for(var ae=0,de=this.shapeHoles.length;ae<de;ae++){var fe=this.shapeHoles[ae].getPointByUuid(X);if(fe)return fe}}},{key:"getFirstPoint",value:function getFirstPoint(){return this.points[0]}},{key:"getLastPoint",value:function getLastPoint(){return this.points[this.points.length-1]}},{key:"removePoint",value:function removePoint(X){var $=this.points.indexOf(X);$>=0&&this.points.splice($,1),this.needsUpdate=!0}},{key:"removePointById",value:function removePointById(X){var $=this.points.find((function($){return $.uuid===X}));$&&this.removePoint($)}},{key:"update",value:function update(){for(var X=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],$=0,ee=this.shapeHoles.length;$<ee;$++)this.shapeHoles[$].update(!1);this._update(X)}},{key:"extractShapePointsToBuffer",value:function extractShapePointsToBuffer(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,ee=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.subdivision=$,void 0===this.curveDivisions&&this.computeCurveDivisions($);var ne=ee?this.roundedCurveDivisions:this.curveDivisions;return ZM(X,ee?this.roundedCurves:this.curves,$,this.autoClose),ne.reduce((function(X,$){return X+$}),0)+1}},{key:"computeCurveDivisions",value:function computeCurveDivisions(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;return this.curveDivisions=rv(this.points,X,!1),this.roundedCurveDivisions=rv(this.points,X,!0),this.curveDivisions}},{key:"extractFilteredShapePointsToBuffer",value:function extractFilteredShapePointsToBuffer(X,$){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12;return 2*$M(X,this.curves,$,ee,this.autoClose).reduce((function(X,$){return X+$}),0)}},{key:"extractShapePointsToFlatArray",value:function extractShapePointsToFlatArray(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;return this.subdivision=$,void 0===this.curveDivisions&&this.computeCurveDivisions($),e1(X,this.roundedCurves,$,this.autoClose)}},{key:"getCurveIndexFromVertexId",value:function getCurveIndexFromVertexId(X){var $=arguments.length>1&&void 0!==arguments[1]&&arguments[1],ee=0;void 0===this.curveDivisions&&this.computeCurveDivisions(this.subdivision);var ne=$?this.roundedCurveDivisions:this.curveDivisions,ae=0;$&&void 0!==this.points[0].roundedCurveCorner&&(ae=.5*ao(this.points[0].roundedCurveCorner,this.subdivision));var de=X-ae;de<0&&(de+=ne.reduce((function(X,$){return X+$}),0));for(var fe=0,Ue=ne.length;fe<Ue;fe++){var je=ne[fe];if(de<ee+je)return[fe,(de-ee+1)/je];ee+=je}return[0,1]}},{key:"getCurveT",value:function getCurveT(X,$,ee){var ne=this.points[X],ae=this.points[X>=this.points.length-1?0:X+1],de=this.curveDivisions,fe=de[X];if(tv(ne,ae)){var Ue=ne.position.distanceTo(ae.position);return ne.position.distanceTo(pI.set(ee.x,ee.y))/Ue}for(var je=0,Ke=0;Ke<X;Ke++)je+=de[Ke];return($-je)/fe}},{key:"dispose",value:function dispose(){this.eventDispatcher=null}},{key:"_applyCurveForPoint",value:function _applyCurveForPoint(X,$){tv($,X)?this.lineTo(X.position.x,X.position.y):this.bezierCurveTo($.controls[1].position.x,$.controls[1].position.y,X.controls[0].position.x,X.controls[0].position.y,X.position.x,X.position.y);var ee=this.curves[this.curves.length-1];X.curveBefore=ee,$.curveAfter=ee;var ne=ee.clone();X.roundedCurveBefore=ne,$.roundedCurveAfter=ne,X.roundedCurveCorner=void 0,this.roundedCurves.push(ne)}},{key:"_update",value:function _update(){var X,$=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.curves=[],this.roundedCurves=[],this.points.length){for(var ee=0,ne=this.points.length;ee<ne;ee++){var ae=this.points[ee];if(0===ee)this.moveTo(ae.position.x,ae.position.y);else{var de=this.points[ee-1];this._applyCurveForPoint(ae,de)}}var Ue=this.getLastPoint();if(null!=Ue&&Ue.curveAfter&&(Ue.curveAfter=void 0),this.isClosed){var je=this.points[0],Ke=this.points[this.points.length-1];this._applyCurveForPoint(je,Ke)}if(this.points.length>2)for(var et=0,tt=0,nt=this.points.length;tt<nt;tt++){var it=this.points[tt],ct=it.roundness;if(!it.controlsMoved()&&ct>0){var dt=it.curveBefore,vt=it.curveAfter;if(void 0===dt||void 0===vt)continue;var gt=it.roundedCurveBefore,yt=it.roundedCurveAfter,_t=dt.getLength(),wt=vt.getLength(),St=Math.min(ct,.499*_t),Ct=Math.min(ct,.499*wt),At=Math.min(St,Ct),Et=1-At/_t,Rt=At/wt,Bt=dt.getPointAt(Et,pI),Ht=vt.getPointAt(Rt,vI);this._subSplitCurve(dt,gt,Et,Bt,void 0),this._subSplitCurve(vt,yt,Rt,void 0,Ht);var Wt=void 0;if(this.useCubicForRoundedCorners){var qt=ev(Bt,it.position,Ht)/2,Zt=Math.tan(qt)*Bt.distanceTo(it.position),Xt=XM(Bt,Ht,Zt,xI,_I),Qt=(0,fe.Z)(Xt,2),en=Qt[0],tn=Qt[1],un=QM(en,tn,it.position),hn=JM(un,Bt,Ht,Zt,SI,CI),dn=(0,fe.Z)(hn,2),mn=dn[0],gn=dn[1];Wt=new bg(Bt.clone(),mn.clone(),gn.clone(),Ht.clone())}else Wt=new iy(Bt.clone(),it.position.clone(),Ht.clone());it.roundedCurveCorner=Wt,this.roundedCurves.splice(tt+et,0,Wt),et++}}$&&(null==(X=this.eventDispatcher)||X.dispatchEvent({type:"update"}))}}},{key:"_subSplitCurve",value:function _subSplitCurve(X,$,ee,ne,ae){if(!(X instanceof ty)){var de=X,fe=$,Ue=de.getUtoTmapping(ee,0),je=function KM(X,$,ee,ne){var ae=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.5,de=tI.subVectors($,X).multiplyScalar(ae).add(X),fe=nI.subVectors(ee,$).multiplyScalar(ae).add($),Ue=oI.subVectors(ne,ee).multiplyScalar(ae).add(ee),je=de,Ke=sI.subVectors(fe,de).multiplyScalar(ae).add(de),et=lI.subVectors(Ue,fe).multiplyScalar(ae).add(fe),tt=Ue,nt=uI.subVectors(et,Ke).multiplyScalar(ae).add(Ke);return[X.x,X.y,je.x,je.y,Ke.x,Ke.y,nt.x,nt.y,et.x,et.y,tt.x,tt.y,ne.x,ne.y]}(de.v0,de.v1,de.v2,de.v3,Ue);return void 0!==ne&&(fe.v0.set(je[0],je[1]),fe.v1.set(je[2],je[3]),fe.v2.set(je[4],je[5]),fe.v3.set(je[6],je[7])),void 0!==ae&&(fe.v0.set(je[6],je[7]),fe.v1.set(je[8],je[9]),fe.v2.set(je[10],je[11]),fe.v3.set(je[12],je[13])),fe}return void 0!==ne&&$.v2.copy(ne),void 0!==ae&&$.v1.copy(ae),$}},{key:"clone",value:function clone(){var X=new Tt(this._width,this._height);return X.points=this.points.map((function(X){return X.clone()})),X.isClosed=this.isClosed,X.roundness=this.roundness,X.isMesh2D=this.isMesh2D,X.shapeHoles=this.shapeHoles.map((function(X){return X.clone()})),X}},{key:"toJSON",value:function toJSON(){return{points:this.points.reduce((function(X,$){return X.concat($.toJSON())}),[]),shapeHoles:this.shapeHoles.map((function(X){return X.toJSON()})),isClosed:this.isClosed,roundness:this.roundness}}},{key:"fromJSON",value:function fromJSON(X){var $;this.points=[],this.pointIDs=0;for(var ee=X.points.length/7,ne=0;ne<ee;ne++){var ae=7*ne,de=X.points[ae+0],fe=X.points[ae+1],Ue=X.points[ae+2],je=X.points[ae+3],Ke=X.points[ae+4],et=X.points[ae+5],tt=X.points[ae+6],nt=new eI(da.generateUUID(),new va(de,fe));nt.controls[0].position.set(Ue,je),nt.controls[1].position.set(Ke,et),nt.roundness=tt,this.points.push(nt)}return this.shapeHoles=null!=($=X.shapeHoles)&&$.length?X.shapeHoles.map((function(X){var $=new Tt;return $.fromJSON(X),$})):[],this.isClosed=X.isClosed,this._roundness=X.roundness,this._update(),this}},{key:"fromShape",value:function fromShape(X){var $=this,ee=function r(X,$){$ instanceof bg&&$.v3.equals(X.position)&&X.controls[0].position.copy($.v2)};return this.points=function n(X){var ne,ae,de=[];for(ne=0,ae=X.length;ne<ae;ne++)X[ne]instanceof iy&&(X[ne]=YM(X[ne]));for(ne=0,ae=X.length;ne<ae;ne++){var fe=X[ne],Ue=ne>0?X[ne-1]:null,je=void 0;fe instanceof bg?(je=$.createPoint(fe.v0)).controls[1].position.copy(fe.v1):fe instanceof ty&&(je=$.createPoint(fe.v1)),void 0!==je&&(null!==Ue&&ee(je,Ue),de.push(je))}var Ke=X[X.length-1],et=!1;return Ke instanceof bg?Ke.v3.equals(de[0].position)&&(de[0].controls[0].position.copy(Ke.v2),et=!0):Ke instanceof ty&&Ke.v2.equals(de[0].position)&&(et=!0),$.isClosed=et,de}(X.curves),X instanceof yy&&(this.shapeHoles=X.holes.map((function(X){var $=new Tt;return $.fromShape(X),$}))),this.update(),this}}],[{key:"createFromState",value:function createFromState(X,$,ee){var ne=new Tt;return ne.isClosed=X.isClosed,ne.points=X.points.map((function(X){return eI.create(X.id,X.data)})),"number"==typeof X.roundness&&(ne.roundness=X.roundness),ne.shapeHoles=X.shapeHoles.map((function(X){return Tt.createFromState(X)})),void 0!==$&&void 0!==ee&&ne.applySize($,ee),ne.update(),ne}}]),Tt}(yy),MI=2*Math.PI;function iv(X,$,ee,ne,ae){return{x:X.x*$+ne,y:X.y*ee+ae}}function QO(X,$){var ee=1.5707963267948966===$?.551915024494:-1.5707963267948966===$?-.551915024494:1.3333333333333333*Math.tan($/4),ne=Math.cos(X),ae=Math.sin(X),de=Math.cos(X+$),fe=Math.sin(X+$);return[{x:ne-ae*ee,y:ae+ne*ee},{x:de+fe*ee,y:fe-de*ee},{x:de,y:fe}]}function t1(X,$,ee,ne){var ae=X*ne-$*ee<0?-1:1,de=Math.min(1,Math.max(-1,X*ee+$*ne));return ae*Math.acos(de)}function r1(X){var $=X.px,ee=X.py,ne=X.cx,ae=X.cy,de=X.rx,fe=X.ry,Ue=X.largeArcFlag,je=X.sweepFlag,Ke=[];if(0===de||0===fe)return[];var et=($-ne)/2,tt=(ee-ae)/2;if(0===et&&0===tt)return[];de=Math.abs(de),fe=Math.abs(fe);var nt=Math.pow(et,2)/Math.pow(de,2)+Math.pow(tt,2)/Math.pow(fe,2);nt>1&&(de*=Math.sqrt(nt),fe*=Math.sqrt(nt));var it=function JO(X,$,ee,ne,ae,de,fe,Ue,je,Ke){var et=Math.pow(ae,2),tt=Math.pow(de,2),nt=Math.pow(fe,2),it=Math.pow(Ue,2),ct=et*tt-et*it-tt*nt;ct<0&&(ct=0),ct/=et*it+tt*nt;var dt=(ct=Math.sqrt(ct)*(je===Ke?-1:1))*ae/de*Ue,vt=ct*-de/ae*fe,gt=dt+(X+ee)/2,yt=vt+($+ne)/2,_t=(fe-dt)/ae,wt=(Ue-vt)/de,St=(-fe-dt)/ae,Ct=(-Ue-vt)/de,At=t1(1,0,_t,wt),Et=t1(_t,wt,St,Ct);return!Ke&&Et>0&&(Et-=MI),Ke&&Et<0&&(Et+=MI),{centerx:gt,centery:yt,ang1:At,ang2:Et}}($,ee,ne,ae,de,fe,et,tt,Ue,je),ct=it.ang1,dt=it.ang2,vt=it.centerx,gt=it.centery,yt=Math.abs(dt)/(MI/4);Math.abs(1-yt)<1e-7&&(yt=1);var _t=Math.max(Math.ceil(yt),1);dt/=_t;for(var wt=0;wt<_t;wt++)Ke.push(QO(ct,dt)),ct+=dt;return Ke.map((function(X){var $=iv(X[0],de,fe,vt,gt),ee=$.x,ne=$.y,ae=iv(X[1],de,fe,vt,gt),Ue=ae.x,je=ae.y,Ke=iv(X[2],de,fe,vt,gt);return{x1:ee,y1:ne,x2:Ue,y2:je,x:Ke.x,y:Ke.y}}))}function qe(X,$){if(!X)throw $||"Assertion Failed!"}!function(X){X[X.ODD=0]="ODD",X[X.NONZERO=1]="NONZERO",X[X.POSITIVE=2]="POSITIVE",X[X.NEGATIVE=3]="NEGATIVE",X[X.ABS_GEQ_TWO=4]="ABS_GEQ_TWO"}(dI||(dI={})),function(X){X[X.POLYGONS=0]="POLYGONS",X[X.CONNECTED_POLYGONS=1]="CONNECTED_POLYGONS",X[X.BOUNDARY_CONTOURS=2]="BOUNDARY_CONTOURS"}(fI||(fI={}));var DI=function(){function i(){}return i.vertEq=function(X,$){return X.s===$.s&&X.t===$.t},i.vertLeq=function(X,$){return X.s<$.s||X.s===$.s&&X.t<=$.t},i.transLeq=function(X,$){return X.t<$.t||X.t===$.t&&X.s<=$.s},i.edgeGoesLeft=function(X){return i.vertLeq(X.Dst,X.Org)},i.edgeGoesRight=function(X){return i.vertLeq(X.Org,X.Dst)},i.vertL1dist=function(X,$){return Math.abs(X.s-$.s)+Math.abs(X.t-$.t)},i.edgeEval=function(X,$,ee){qe(i.vertLeq(X,$)&&i.vertLeq($,ee));var ne=$.s-X.s,ae=ee.s-$.s;return ne+ae>0?ne<ae?$.t-X.t+(X.t-ee.t)*(ne/(ne+ae)):$.t-ee.t+(ee.t-X.t)*(ae/(ne+ae)):0},i.edgeSign=function(X,$,ee){qe(i.vertLeq(X,$)&&i.vertLeq($,ee));var ne=$.s-X.s,ae=ee.s-$.s;return ne+ae>0?($.t-ee.t)*ne+($.t-X.t)*ae:0},i.transEval=function(X,$,ee){qe(i.transLeq(X,$)&&i.transLeq($,ee));var ne=$.t-X.t,ae=ee.t-$.t;return ne+ae>0?ne<ae?$.s-X.s+(X.s-ee.s)*(ne/(ne+ae)):$.s-ee.s+(ee.s-X.s)*(ae/(ne+ae)):0},i.transSign=function(X,$,ee){qe(i.transLeq(X,$)&&i.transLeq($,ee));var ne=$.t-X.t,ae=ee.t-$.t;return ne+ae>0?($.s-ee.s)*ne+($.s-X.s)*ae:0},i.vertCCW=function(X,$,ee){return X.s*($.t-ee.t)+$.s*(ee.t-X.t)+ee.s*(X.t-$.t)>=0},i.interpolate=function(X,$,ee,ne){return(X=X<0?0:X)<=(ee=ee<0?0:ee)?0===ee?($+ne)/2:$+X/(X+ee)*(ne-$):ne+ee/(X+ee)*($-ne)},i.intersect=function(X,$,ee,ne,ae){var de,fe,Ue;i.vertLeq(X,$)||(Ue=X,X=$,$=Ue),i.vertLeq(ee,ne)||(Ue=ee,ee=ne,ne=Ue),i.vertLeq(X,ee)||(Ue=X,X=ee,ee=Ue,Ue=$,$=ne,ne=Ue),i.vertLeq(ee,$)?i.vertLeq($,ne)?((de=i.edgeEval(X,ee,$))+(fe=i.edgeEval(ee,$,ne))<0&&(de=-de,fe=-fe),ae.s=i.interpolate(de,ee.s,fe,$.s)):((de=i.edgeSign(X,ee,$))+(fe=-i.edgeSign(X,ne,$))<0&&(de=-de,fe=-fe),ae.s=i.interpolate(de,ee.s,fe,ne.s)):ae.s=(ee.s+$.s)/2,i.transLeq(X,$)||(Ue=X,X=$,$=Ue),i.transLeq(ee,ne)||(Ue=ee,ee=ne,ne=Ue),i.transLeq(X,ee)||(Ue=X,X=ee,ee=Ue,Ue=$,$=ne,ne=Ue),i.transLeq(ee,$)?i.transLeq($,ne)?((de=i.transEval(X,ee,$))+(fe=i.transEval(ee,$,ne))<0&&(de=-de,fe=-fe),ae.t=i.interpolate(de,ee.t,fe,$.t)):((de=i.transSign(X,ee,$))+(fe=-i.transSign(X,ne,$))<0&&(de=-de,fe=-fe),ae.t=i.interpolate(de,ee.t,fe,ne.t)):ae.t=(ee.t+$.t)/2},i}(),LI=function la(){this.next=null,this.prev=null,this.anEdge=null,this.trail=null,this.n=0,this.marked=!1,this.inside=!1},OI=function(){function i(X){this.side=X,this.next=null,this.Org=null,this.Sym=null,this.Onext=null,this.Lnext=null,this.Lface=null,this.activeRegion=null,this.winding=0}return Object.defineProperty(i.prototype,"Rface",{get:function get(){return this.Sym.Lface},set:function set(X){this.Sym.Lface=X},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Dst",{get:function get(){return this.Sym.Org},set:function set(X){this.Sym.Org=X},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Oprev",{get:function get(){return this.Sym.Lnext},set:function set(X){this.Sym.Lnext=X},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Lprev",{get:function get(){return this.Onext.Sym},set:function set(X){this.Onext.Sym=X},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Dprev",{get:function get(){return this.Lnext.Sym},set:function set(X){this.Lnext.Sym=X},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Rprev",{get:function get(){return this.Sym.Onext},set:function set(X){this.Sym.Onext=X},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Dnext",{get:function get(){return this.Sym.Onext.Sym},set:function set(X){this.Sym.Onext.Sym=X},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"Rnext",{get:function get(){return this.Sym.Lnext.Sym},set:function set(X){this.Sym.Lnext.Sym=X},enumerable:!0,configurable:!0}),i}(),II=function la(){this.next=null,this.prev=null,this.anEdge=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=0,this.n=0,this.idx=0},FI=function(){function i(){var X=new II,$=new LI,ee=new OI(0),ne=new OI(1);X.next=X.prev=X,X.anEdge=null,$.next=$.prev=$,ee.next=ee,ee.Sym=ne,ne.next=ne,ne.Sym=ee,this.vHead=X,this.fHead=$,this.eHead=ee,this.eHeadSym=ne}return i.prototype.makeEdge_=function(X){var $=new OI(0),ee=new OI(1);X.Sym.side<X.side&&(X=X.Sym);var ne=X.Sym.next;return ee.next=ne,ne.Sym.next=$,$.next=X,X.Sym.next=ee,$.Sym=ee,$.Onext=$,$.Lnext=ee,$.Org=null,$.Lface=null,$.winding=0,$.activeRegion=null,ee.Sym=$,ee.Onext=ee,ee.Lnext=$,ee.Org=null,ee.Lface=null,ee.winding=0,ee.activeRegion=null,$},i.prototype.splice_=function(X,$){var ee=X.Onext,ne=$.Onext;ee.Sym.Lnext=$,ne.Sym.Lnext=X,X.Onext=ne,$.Onext=ee},i.prototype.makeVertex_=function(X,$,ee){var ne=X;qe(ne,"Vertex can't be null!");var ae=ee.prev;ne.prev=ae,ae.next=ne,ne.next=ee,ee.prev=ne,ne.anEdge=$;var de=$;do{de.Org=ne,de=de.Onext}while(de!==$)},i.prototype.makeFace_=function(X,$,ee){var ne=X;qe(ne,"Face can't be null");var ae=ee.prev;ne.prev=ae,ae.next=ne,ne.next=ee,ee.prev=ne,ne.anEdge=$,ne.trail=null,ne.marked=!1,ne.inside=ee.inside;var de=$;do{de.Lface=ne,de=de.Lnext}while(de!==$)},i.prototype.killEdge_=function(X){X.Sym.side<X.side&&(X=X.Sym);var $=X.next,ee=X.Sym.next;$.Sym.next=ee,ee.Sym.next=$},i.prototype.killVertex_=function(X,$){var ee=X.anEdge,ne=ee;do{ne.Org=$,ne=ne.Onext}while(ne!==ee);var ae=X.prev,de=X.next;de.prev=ae,ae.next=de},i.prototype.killFace_=function(X,$){var ee=X.anEdge,ne=ee;do{ne.Lface=$,ne=ne.Lnext}while(ne!==ee);var ae=X.prev,de=X.next;de.prev=ae,ae.next=de},i.prototype.makeEdge=function(){var X=new II,$=new II,ee=new LI,ne=this.makeEdge_(this.eHead);return this.makeVertex_(X,ne,this.vHead),this.makeVertex_($,ne.Sym,this.vHead),this.makeFace_(ee,ne,this.fHead),ne},i.prototype.splice=function(X,$){var ee=!1,ne=!1;if(X!==$){if($.Org!==X.Org&&(ne=!0,this.killVertex_($.Org,X.Org)),$.Lface!==X.Lface&&(ee=!0,this.killFace_($.Lface,X.Lface)),this.splice_($,X),!ne){var ae=new II;this.makeVertex_(ae,$,X.Org),X.Org.anEdge=X}if(!ee){var de=new LI;this.makeFace_(de,$,X.Lface),X.Lface.anEdge=X}}},i.prototype.delete=function(X){var $=X.Sym,ee=!1;if(X.Lface!==X.Rface&&(ee=!0,this.killFace_(X.Lface,X.Rface)),X.Onext===X)this.killVertex_(X.Org,null);else if(X.Rface.anEdge=X.Oprev,X.Org.anEdge=X.Onext,this.splice_(X,X.Oprev),!ee){var ne=new LI;this.makeFace_(ne,X,X.Lface)}$.Onext===$?(this.killVertex_($.Org,null),this.killFace_($.Lface,null)):(X.Lface.anEdge=$.Oprev,$.Org.anEdge=$.Onext,this.splice_($,$.Oprev)),this.killEdge_(X)},i.prototype.addEdgeVertex=function(X){var $=this.makeEdge_(X),ee=$.Sym;this.splice_($,X.Lnext),$.Org=X.Dst;var ne=new II;return this.makeVertex_(ne,ee,$.Org),$.Lface=ee.Lface=X.Lface,$},i.prototype.splitEdge=function(X){var $=this.addEdgeVertex(X).Sym;return this.splice_(X.Sym,X.Sym.Oprev),this.splice_(X.Sym,$),X.Dst=$.Org,$.Dst.anEdge=$.Sym,$.Rface=X.Rface,$.winding=X.winding,$.Sym.winding=X.Sym.winding,$.idx=X.idx,$.Sym.idx=X.Sym.idx,$},i.prototype.connect=function(X,$){var ee=!1,ne=this.makeEdge_(X),ae=ne.Sym;if($.Lface!==X.Lface&&(ee=!0,this.killFace_($.Lface,X.Lface)),this.splice_(ne,X.Lnext),this.splice_(ae,$),ne.Org=X.Dst,ae.Org=$.Org,ne.Lface=ae.Lface=X.Lface,X.Lface.anEdge=ae,!ee){var de=new LI;this.makeFace_(de,ne,X.Lface)}return ne},i.prototype.zapFace=function(X){var $,ee,ne,ae,de,fe=X.anEdge;ee=fe.Lnext;do{ee=($=ee).Lnext,$.Lface=null,null===$.Rface&&($.Onext===$?this.killVertex_($.Org,null):($.Org.anEdge=$.Onext,this.splice_($,$.Oprev)),(ne=$.Sym).Onext===ne?this.killVertex_(ne.Org,null):(ne.Org.anEdge=ne.Onext,this.splice_(ne,ne.Oprev)),this.killEdge_($))}while($!=fe);ae=X.prev,(de=X.next).prev=ae,ae.next=de},i.prototype.countFaceVerts_=function(X){var $=X.anEdge,ee=0;do{ee++,$=$.Lnext}while($!==X.anEdge);return ee},i.prototype.mergeConvexFaces=function(X){var $,ee,ne,ae,de;for($=this.fHead.next;$!==this.fHead;$=$.next)if($.inside)for(de=(ee=$.anEdge).Org;ne=ee.Lnext,(ae=ee.Sym)&&ae.Lface&&ae.Lface.inside&&(this.countFaceVerts_($)+this.countFaceVerts_(ae.Lface)-2<=X&&DI.vertCCW(ee.Lprev.Org,ee.Org,ae.Lnext.Lnext.Org)&&DI.vertCCW(ae.Lprev.Org,ae.Org,ee.Lnext.Lnext.Org)&&(ne=ae.Lnext,this.delete(ae),ee=null,ae=null)),!ee||ee.Lnext.Org!==de;)ee=ne;return!0},i.prototype.check=function(){var X,$,ee,ne,ae,de,fe=this.fHead,Ue=this.vHead,je=this.eHead;for($=fe,$=fe;(X=$.next)!==fe;$=X){qe(X.prev===$),ae=X.anEdge;do{qe(ae.Sym!==ae),qe(ae.Sym.Sym===ae),qe(ae.Lnext.Onext.Sym===ae),qe(ae.Onext.Sym.Lnext===ae),qe(ae.Lface===X),ae=ae.Lnext}while(ae!==X.anEdge)}for(qe(X.prev===$&&null===X.anEdge),ne=Ue,ne=Ue;(ee=ne.next)!==Ue;ne=ee){qe(ee.prev===ne),ae=ee.anEdge;do{qe(ae.Sym!==ae),qe(ae.Sym.Sym===ae),qe(ae.Lnext.Onext.Sym===ae),qe(ae.Onext.Sym.Lnext===ae),qe(ae.Org===ee),ae=ae.Onext}while(ae!==ee.anEdge)}for(qe(ee.prev===ne&&null===ee.anEdge),de=je,de=je;(ae=de.next)!==je;de=ae)qe(ae.Sym.next===de.Sym),qe(ae.Sym!==ae),qe(ae.Sym.Sym===ae),qe(null!==ae.Org),qe(null!==ae.Dst),qe(ae.Lnext.Onext.Sym===ae),qe(ae.Onext.Sym.Lnext===ae);qe(ae.Sym.next===de.Sym&&ae.Sym===this.eHeadSym&&ae.Sym.Sym===ae&&null===ae.Org&&null===ae.Dst&&null===ae.Lface&&null===ae.Rface)},i}(),VI=function la(){this.handle=null},YI=function la(){this.key=null,this.node=0},JI=function(){function i(X,$){this.leq=$,this.max=0,this.nodes=[],this.handles=[],this.initialized=!1,this.freeList=0,this.size=0,this.max=X,this.nodes=[],this.handles=[];for(var ee=0;ee<X+1;ee++)this.nodes[ee]=new VI,this.handles[ee]=new YI;this.initialized=!1,this.nodes[1].handle=1,this.handles[1].key=null}return i.prototype.floatDown_=function(X){var $,ee,ne,ae=this.nodes,de=this.handles;for($=ae[X].handle;;){if((ne=X<<1)<this.size&&this.leq(de[ae[ne+1].handle].key,de[ae[ne].handle].key)&&++ne,qe(ne<=this.max),ee=ae[ne].handle,ne>this.size||this.leq(de[$].key,de[ee].key)){ae[X].handle=$,de[$].node=X;break}ae[X].handle=ee,de[ee].node=X,X=ne}},i.prototype.floatUp_=function(X){var $,ee,ne,ae=this.nodes,de=this.handles;for($=ae[X].handle;;){if(ee=ae[ne=X>>1].handle,0===ne||this.leq(de[ee].key,de[$].key)){ae[X].handle=$,de[$].node=X;break}ae[X].handle=ee,de[ee].node=X,X=ne}},i.prototype.init=function(){for(var X=this.size;X>=1;--X)this.floatDown_(X);this.initialized=!0},i.prototype.min=function(){return this.handles[this.nodes[1].handle].key},i.prototype.insert=function(X){var $,ee;if(2*($=++this.size)>this.max){var ne,ae;for(this.max*=2,ae=this.nodes.length,this.nodes.length=this.max+1,ne=ae;ne<this.nodes.length;ne++)this.nodes[ne]=new VI;for(ae=this.handles.length,this.handles.length=this.max+1,ne=ae;ne<this.handles.length;ne++)this.handles[ne]=new YI}return 0===this.freeList?ee=$:(ee=this.freeList,this.freeList=this.handles[ee].node),this.nodes[$].handle=ee,this.handles[ee].node=$,this.handles[ee].key=X,this.initialized&&this.floatUp_($),ee},i.prototype.extractMin=function(){var X=this.nodes,$=this.handles,ee=X[1].handle,ne=$[ee].key;return this.size>0&&(X[1].handle=X[this.size].handle,$[X[1].handle].node=1,$[ee].key=null,$[ee].node=this.freeList,this.freeList=ee,--this.size,this.size>0&&this.floatDown_(1)),ne},i.prototype.delete=function(X){var $,ee=this.nodes,ne=this.handles;qe(X>=1&&X<=this.max&&null!==ne[X].key),ee[$=ne[X].node].handle=ee[this.size].handle,ne[ee[$].handle].node=$,--this.size,$<=this.size&&($<=1||this.leq(ne[ee[$>>1].handle].key,ne[ee[$].handle].key)?this.floatDown_($):this.floatUp_($)),ne[X].key=null,ne[X].node=this.freeList,this.freeList=X},i}(),ZI=function la(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1},$I=function la(){this.key=null,this.next=null,this.prev=null},ez=function(){function i(X,$){this.frame=X,this.leq=$,this.head=new $I,this.head.next=this.head,this.head.prev=this.head}return i.prototype.min=function(){return this.head.next},i.prototype.max=function(){return this.head.prev},i.prototype.insert=function(X){return this.insertBefore(this.head,X)},i.prototype.search=function(X){var $=this.head;do{$=$.next}while(null!==$.key&&!this.leq(this.frame,X,$.key));return $},i.prototype.insertBefore=function(X,$){do{X=X.prev}while(null!==X.key&&!this.leq(this.frame,X.key,$));var ee=new $I;return ee.key=$,ee.next=X.next,X.next.prev=ee,ee.prev=X,X.next=ee,ee},i.prototype.delete=function(X){X.next.prev=X.prev,X.prev.next=X.next},i}(),tz=function(){function i(){}return i.regionBelow=function(X){return X.nodeUp.prev.key},i.regionAbove=function(X){return X.nodeUp.next.key},i.debugEvent=function(X){},i.addWinding=function(X,$){X.winding+=$.winding,X.Sym.winding+=$.Sym.winding},i.edgeLeq=function(X,$,ee){var ne=X.event,ae=$.eUp,de=ee.eUp;return ae.Dst===ne?de.Dst===ne?DI.vertLeq(ae.Org,de.Org)?DI.edgeSign(de.Dst,ae.Org,de.Org)<=0:DI.edgeSign(ae.Dst,de.Org,ae.Org)>=0:DI.edgeSign(de.Dst,ne,de.Org)<=0:de.Dst===ne?DI.edgeSign(ae.Dst,ne,ae.Org)>=0:DI.edgeEval(ae.Dst,ne,ae.Org)>=DI.edgeEval(de.Dst,ne,de.Org)},i.deleteRegion=function(X,$){$.fixUpperEdge&&qe(0===$.eUp.winding),$.eUp.activeRegion=null,X.dict.delete($.nodeUp)},i.fixUpperEdge=function(X,$,ee){qe($.fixUpperEdge),X.mesh.delete($.eUp),$.fixUpperEdge=!1,$.eUp=ee,ee.activeRegion=$},i.topLeftRegion=function(X,$){var ee,ne=$.eUp.Org;do{$=i.regionAbove($)}while($.eUp.Org===ne);if($.fixUpperEdge){if(null===(ee=X.mesh.connect(i.regionBelow($).eUp.Sym,$.eUp.Lnext)))return null;i.fixUpperEdge(X,$,ee),$=i.regionAbove($)}return $},i.topRightRegion=function(X){var $=X.eUp.Dst;do{X=i.regionAbove(X)}while(X.eUp.Dst===$);return X},i.addRegionBelow=function(X,$,ee){var ne=new ZI;return ne.eUp=ee,ne.nodeUp=X.dict.insertBefore($.nodeUp,ne),ne.fixUpperEdge=!1,ne.sentinel=!1,ne.dirty=!1,ee.activeRegion=ne,ne},i.isWindingInside=function(X,$){switch(X.windingRule){case dI.ODD:return 0!==(1&$);case dI.NONZERO:return 0!==$;case dI.POSITIVE:return $>0;case dI.NEGATIVE:return $<0;case dI.ABS_GEQ_TWO:return $>=2||$<=-2}throw new Error("Invalid winding rulle")},i.computeWinding=function(X,$){$.windingNumber=i.regionAbove($).windingNumber+$.eUp.winding,$.inside=i.isWindingInside(X,$.windingNumber)},i.finishRegion=function(X,$){var ee=$.eUp,ne=ee.Lface;ne.inside=$.inside,ne.anEdge=ee,i.deleteRegion(X,$)},i.finishLeftRegions=function(X,$,ee){for(var ne,ae=null,de=$,fe=$.eUp;de!==ee;){if(de.fixUpperEdge=!1,(ne=(ae=i.regionBelow(de)).eUp).Org!=fe.Org){if(!ae.fixUpperEdge){i.finishRegion(X,de);break}ne=X.mesh.connect(fe.Lprev,ne.Sym),i.fixUpperEdge(X,ae,ne)}fe.Onext!==ne&&(X.mesh.splice(ne.Oprev,ne),X.mesh.splice(fe,ne)),i.finishRegion(X,de),fe=ae.eUp,de=ae}return fe},i.addRightEdges=function(X,$,ee,ne,ae,de){var fe,Ue,je,Ke,et=!0;je=ee;do{qe(DI.vertLeq(je.Org,je.Dst)),i.addRegionBelow(X,$,je.Sym),je=je.Onext}while(je!==ne);for(null===ae&&(ae=i.regionBelow($).eUp.Rprev),Ue=$,Ke=ae;(je=(fe=i.regionBelow(Ue)).eUp.Sym).Org===Ke.Org;)je.Onext!==Ke&&(X.mesh.splice(je.Oprev,je),X.mesh.splice(Ke.Oprev,je)),fe.windingNumber=Ue.windingNumber-je.winding,fe.inside=i.isWindingInside(X,fe.windingNumber),Ue.dirty=!0,!et&&i.checkForRightSplice(X,Ue)&&(i.addWinding(je,Ke),i.deleteRegion(X,Ue),X.mesh.delete(Ke)),et=!1,Ue=fe,Ke=je;Ue.dirty=!0,qe(Ue.windingNumber-je.winding===fe.windingNumber),de&&i.walkDirtyRegions(X,Ue)},i.spliceMergeVertices=function(X,$,ee){X.mesh.splice($,ee)},i.vertexWeights=function(X,$,ee){var ne=DI.vertL1dist($,X),ae=DI.vertL1dist(ee,X),de=.5*ae/(ne+ae),fe=.5*ne/(ne+ae);X.coords[0]+=de*$.coords[0]+fe*ee.coords[0],X.coords[1]+=de*$.coords[1]+fe*ee.coords[1],X.coords[2]+=de*$.coords[2]+fe*ee.coords[2]},i.getIntersectData=function(X,$,ee,ne,ae,de){$.coords[0]=$.coords[1]=$.coords[2]=0,$.idx=-1,i.vertexWeights($,ee,ne),i.vertexWeights($,ae,de)},i.checkForRightSplice=function(X,$){var ee=i.regionBelow($),ne=$.eUp,ae=ee.eUp;if(DI.vertLeq(ne.Org,ae.Org)){if(DI.edgeSign(ae.Dst,ne.Org,ae.Org)>0)return!1;DI.vertEq(ne.Org,ae.Org)?ne.Org!==ae.Org&&(X.pq.delete(ne.Org.pqHandle),i.spliceMergeVertices(X,ae.Oprev,ne)):(X.mesh.splitEdge(ae.Sym),X.mesh.splice(ne,ae.Oprev),$.dirty=ee.dirty=!0)}else{if(DI.edgeSign(ne.Dst,ae.Org,ne.Org)<0)return!1;i.regionAbove($).dirty=$.dirty=!0,X.mesh.splitEdge(ne.Sym),X.mesh.splice(ae.Oprev,ne)}return!0},i.checkForLeftSplice=function(X,$){var ee,ne=i.regionBelow($),ae=$.eUp,de=ne.eUp;if(qe(!DI.vertEq(ae.Dst,de.Dst)),DI.vertLeq(ae.Dst,de.Dst)){if(DI.edgeSign(ae.Dst,de.Dst,ae.Org)<0)return!1;i.regionAbove($).dirty=$.dirty=!0,ee=X.mesh.splitEdge(ae),X.mesh.splice(de.Sym,ee),ee.Lface.inside=$.inside}else{if(DI.edgeSign(de.Dst,ae.Dst,de.Org)>0)return!1;$.dirty=ne.dirty=!0,ee=X.mesh.splitEdge(de),X.mesh.splice(ae.Lnext,de.Sym),ee.Rface.inside=$.inside}return!0},i.checkForIntersect=function(X,$){var ee,ne,ae=i.regionBelow($),de=$.eUp,fe=ae.eUp,Ue=de.Org,je=fe.Org,Ke=de.Dst,et=fe.Dst,tt=new II;if(qe(!DI.vertEq(et,Ke)),qe(DI.edgeSign(Ke,X.event,Ue)<=0),qe(DI.edgeSign(et,X.event,je)>=0),qe(Ue!==X.event&&je!==X.event),qe(!$.fixUpperEdge&&!ae.fixUpperEdge),Ue===je||Math.min(Ue.t,Ke.t)>Math.max(je.t,et.t))return!1;if(DI.vertLeq(Ue,je)){if(DI.edgeSign(et,Ue,je)>0)return!1}else if(DI.edgeSign(Ke,je,Ue)<0)return!1;return i.debugEvent(X),DI.intersect(Ke,Ue,et,je,tt),qe(Math.min(Ue.t,Ke.t)<=tt.t),qe(tt.t<=Math.max(je.t,et.t)),qe(Math.min(et.s,Ke.s)<=tt.s),qe(tt.s<=Math.max(je.s,Ue.s)),DI.vertLeq(tt,X.event)&&(tt.s=X.event.s,tt.t=X.event.t),ee=DI.vertLeq(Ue,je)?Ue:je,DI.vertLeq(ee,tt)&&(tt.s=ee.s,tt.t=ee.t),DI.vertEq(tt,Ue)||DI.vertEq(tt,je)?(i.checkForRightSplice(X,$),!1):!DI.vertEq(Ke,X.event)&&DI.edgeSign(Ke,X.event,tt)>=0||!DI.vertEq(et,X.event)&&DI.edgeSign(et,X.event,tt)<=0?et===X.event?(X.mesh.splitEdge(de.Sym),X.mesh.splice(fe.Sym,de),$=i.topLeftRegion(X,$),de=i.regionBelow($).eUp,i.finishLeftRegions(X,i.regionBelow($),ae),i.addRightEdges(X,$,de.Oprev,de,de,!0),!0):Ke===X.event?(X.mesh.splitEdge(fe.Sym),X.mesh.splice(de.Lnext,fe.Oprev),ae=$,$=i.topRightRegion($),ne=i.regionBelow($).eUp.Rprev,ae.eUp=fe.Oprev,fe=i.finishLeftRegions(X,ae,null),i.addRightEdges(X,$,fe.Onext,de.Rprev,ne,!0),!0):(DI.edgeSign(Ke,X.event,tt)>=0&&(i.regionAbove($).dirty=$.dirty=!0,X.mesh.splitEdge(de.Sym),de.Org.s=X.event.s,de.Org.t=X.event.t),DI.edgeSign(et,X.event,tt)<=0&&($.dirty=ae.dirty=!0,X.mesh.splitEdge(fe.Sym),fe.Org.s=X.event.s,fe.Org.t=X.event.t),!1):(X.mesh.splitEdge(de.Sym),X.mesh.splitEdge(fe.Sym),X.mesh.splice(fe.Oprev,de),de.Org.s=tt.s,de.Org.t=tt.t,de.Org.pqHandle=X.pq.insert(de.Org),i.getIntersectData(X,de.Org,Ue,Ke,je,et),i.regionAbove($).dirty=$.dirty=ae.dirty=!0,!1)},i.walkDirtyRegions=function(X,$){for(var ee,ne,ae=i.regionBelow($);;){for(;ae.dirty;)$=ae,ae=i.regionBelow(ae);if(!$.dirty&&(ae=$,null===($=i.regionAbove($))||!$.dirty))return;if($.dirty=!1,ee=$.eUp,ne=ae.eUp,ee.Dst!==ne.Dst&&i.checkForLeftSplice(X,$)&&(ae.fixUpperEdge?(i.deleteRegion(X,ae),X.mesh.delete(ne),ne=(ae=i.regionBelow($)).eUp):$.fixUpperEdge&&(i.deleteRegion(X,$),X.mesh.delete(ee),ee=($=i.regionAbove(ae)).eUp)),ee.Org!==ne.Org)if(ee.Dst===ne.Dst||$.fixUpperEdge||ae.fixUpperEdge||ee.Dst!==X.event&&ne.Dst!==X.event)i.checkForRightSplice(X,$);else if(i.checkForIntersect(X,$))return;ee.Org===ne.Org&&ee.Dst===ne.Dst&&(i.addWinding(ne,ee),i.deleteRegion(X,$),X.mesh.delete(ee),$=i.regionAbove(ae))}},i.connectRightVertex=function(X,$,ee){var ne,ae=ee.Onext,de=i.regionBelow($),fe=$.eUp,Ue=de.eUp,je=!1;fe.Dst!==Ue.Dst&&i.checkForIntersect(X,$),DI.vertEq(fe.Org,X.event)&&(X.mesh.splice(ae.Oprev,fe),$=i.topLeftRegion(X,$),ae=i.regionBelow($).eUp,i.finishLeftRegions(X,i.regionBelow($),de),je=!0),DI.vertEq(Ue.Org,X.event)&&(X.mesh.splice(ee,Ue.Oprev),ee=i.finishLeftRegions(X,de,null),je=!0),je?i.addRightEdges(X,$,ee.Onext,ae,ae,!0):(ne=DI.vertLeq(Ue.Org,fe.Org)?Ue.Oprev:fe,ne=X.mesh.connect(ee.Lprev,ne),i.addRightEdges(X,$,ne,ne.Onext,ne.Onext,!1),ne.Sym.activeRegion.fixUpperEdge=!0,i.walkDirtyRegions(X,$))},i.connectLeftDegenerate=function(X,$,ee){var ne,ae,de,fe,Ue;return ne=$.eUp,DI.vertEq(ne.Org,ee)?(qe(!1),void i.spliceMergeVertices(X,ne,ee.anEdge)):DI.vertEq(ne.Dst,ee)?(qe(!1),$=i.topRightRegion($),ae=fe=(de=(Ue=i.regionBelow($)).eUp.Sym).Onext,Ue.fixUpperEdge&&(qe(ae!==de),i.deleteRegion(X,Ue),X.mesh.delete(de),de=ae.Oprev),X.mesh.splice(ee.anEdge,de),DI.edgeGoesLeft(ae)||(ae=null),void i.addRightEdges(X,$,de.Onext,fe,ae,!0)):(X.mesh.splitEdge(ne.Sym),$.fixUpperEdge&&(X.mesh.delete(ne.Onext),$.fixUpperEdge=!1),X.mesh.splice(ee.anEdge,ne),void i.sweepEvent(X,ee))},i.connectLeftVertex=function(X,$){var ee,ne,ae,de,fe,Ue,je=new ZI;if(je.eUp=$.anEdge.Sym,ee=X.dict.search(je).key,ne=i.regionBelow(ee)){if(de=ee.eUp,fe=ne.eUp,0===DI.edgeSign(de.Dst,$,de.Org))return void i.connectLeftDegenerate(X,ee,$);if(ae=DI.vertLeq(fe.Dst,de.Dst)?ee:ne,ee.inside||ae.fixUpperEdge){if(ae===ee)Ue=X.mesh.connect($.anEdge.Sym,de.Lnext);else Ue=X.mesh.connect(fe.Dnext,$.anEdge).Sym;ae.fixUpperEdge?i.fixUpperEdge(X,ae,Ue):i.computeWinding(X,i.addRegionBelow(X,ee,Ue)),i.sweepEvent(X,$)}else i.addRightEdges(X,ee,$.anEdge,$.anEdge,null,!0)}},i.sweepEvent=function(X,$){X.event=$,i.debugEvent(X);for(var ee=$.anEdge;null===ee.activeRegion;)if((ee=ee.Onext)===$.anEdge)return void i.connectLeftVertex(X,$);var ne=i.topLeftRegion(X,ee.activeRegion);qe(null!==ne);var ae=i.regionBelow(ne),de=ae.eUp,fe=i.finishLeftRegions(X,ae,null);fe.Onext===de?i.connectRightVertex(X,ne,fe):i.addRightEdges(X,ne,fe.Onext,de,de,!0)},i.addSentinel=function(X,$,ee,ne){var ae=new ZI,de=X.mesh.makeEdge();de.Org.s=ee,de.Org.t=ne,de.Dst.s=$,de.Dst.t=ne,X.event=de.Dst,ae.eUp=de,ae.windingNumber=0,ae.inside=!1,ae.fixUpperEdge=!1,ae.sentinel=!0,ae.dirty=!1,ae.nodeUp=X.dict.insert(ae)},i.initEdgeDict=function(X){X.dict=new ez(X,i.edgeLeq);var $=X.bmax[0]-X.bmin[0],ee=X.bmax[1]-X.bmin[1],ne=X.bmin[0]-$,ae=X.bmax[0]+$,de=X.bmin[1]-ee,fe=X.bmax[1]+ee;i.addSentinel(X,ne,ae,de),i.addSentinel(X,ne,ae,fe)},i.doneEdgeDict=function(X){for(var $,ee=0;null!==($=X.dict.min().key);)$.sentinel||(qe($.fixUpperEdge),qe(1===++ee)),qe(0===$.windingNumber),i.deleteRegion(X,$)},i.removeDegenerateEdges=function(X){var $,ee,ne,ae=X.mesh.eHead;for($=ae.next;$!==ae;$=ee)ee=$.next,ne=$.Lnext,DI.vertEq($.Org,$.Dst)&&$.Lnext.Lnext!==$&&(i.spliceMergeVertices(X,ne,$),X.mesh.delete($),ne=($=ne).Lnext),ne.Lnext===$&&(ne!==$&&((ne===ee||ne===ee.Sym)&&(ee=ee.next),X.mesh.delete(ne)),($===ee||$===ee.Sym)&&(ee=ee.next),X.mesh.delete($))},i.initPriorityQ=function(X){var $,ee,ne,ae=0;for(ee=(ne=X.mesh.vHead).next;ee!==ne;ee=ee.next)ae++;for(ae+=8,$=X.pq=new JI(ae,DI.vertLeq),ee=(ne=X.mesh.vHead).next;ee!==ne;ee=ee.next)ee.pqHandle=$.insert(ee);return ee===ne&&($.init(),!0)},i.donePriorityQ=function(X){X.pq=null},i.removeDegenerateFaces=function(X,$){var ee,ne,ae;for(ee=$.fHead.next;ee!==$.fHead;ee=ne)ne=ee.next,qe((ae=ee.anEdge).Lnext!==ae),ae.Lnext.Lnext===ae&&(i.addWinding(ae.Onext,ae),X.mesh.delete(ae));return!0},i.computeInterior=function(X,$){var ee,ne;if(void 0===$&&($=!0),i.removeDegenerateEdges(X),!i.initPriorityQ(X))return!1;for(i.initEdgeDict(X);null!==(ee=X.pq.extractMin());){for(;null!==(ne=X.pq.min())&&DI.vertEq(ne,ee);)ne=X.pq.extractMin(),i.spliceMergeVertices(X,ee.anEdge,ne.anEdge);i.sweepEvent(X,ee)}return X.event=X.dict.min().key.eUp.Org,i.debugEvent(X),i.doneEdgeDict(X),i.donePriorityQ(X),!!i.removeDegenerateFaces(X,X.mesh)&&($&&X.mesh.check(),!0)},i}(),nz=function(){function i(){this.mesh=new FI,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.bmin=[0,0],this.bmax=[0,0],this.windingRule=dI.ODD,this.dict=null,this.pq=null,this.event=null,this.vertexIndexCounter=0,this.vertices=[],this.vertexIndices=[],this.vertexCount=0,this.elements=[],this.elementCount=0}return i.prototype.dot_=function(X,$){return X[0]*$[0]+X[1]*$[1]+X[2]*$[2]},i.prototype.normalize_=function(X){var $=X[0]*X[0]+X[1]*X[1]+X[2]*X[2];if(!$)throw"Zero-size vector!";$=Math.sqrt($),X[0]/=$,X[1]/=$,X[2]/=$},i.prototype.longAxis_=function(X){var $=0;return Math.abs(X[1])>Math.abs(X[0])&&($=1),Math.abs(X[2])>Math.abs(X[$])&&($=2),$},i.prototype.computeNormal_=function(X){var $,ee,ne,ae,de,fe,Ue=[0,0,0],je=[0,0,0],Ke=[0,0,0],et=[0,0,0],tt=[0,0,0],nt=[null,null,null],it=[null,null,null],ct=this.mesh.vHead;$=ct.next;for(var dt=0;dt<3;++dt)ae=$.coords[dt],je[dt]=ae,it[dt]=$,Ue[dt]=ae,nt[dt]=$;for($=ct.next;$!==ct;$=$.next)for(var vt=0;vt<3;++vt)(ae=$.coords[vt])<je[vt]&&(je[vt]=ae,it[vt]=$),ae>Ue[vt]&&(Ue[vt]=ae,nt[vt]=$);var gt=0;if(Ue[1]-je[1]>Ue[0]-je[0]&&(gt=1),Ue[2]-je[2]>Ue[gt]-je[gt]&&(gt=2),je[gt]>=Ue[gt])return X[0]=0,X[1]=0,void(X[2]=1);for(fe=0,ee=it[gt],ne=nt[gt],Ke[0]=ee.coords[0]-ne.coords[0],Ke[1]=ee.coords[1]-ne.coords[1],Ke[2]=ee.coords[2]-ne.coords[2],$=ct.next;$!==ct;$=$.next)et[0]=$.coords[0]-ne.coords[0],et[1]=$.coords[1]-ne.coords[1],et[2]=$.coords[2]-ne.coords[2],tt[0]=Ke[1]*et[2]-Ke[2]*et[1],tt[1]=Ke[2]*et[0]-Ke[0]*et[2],tt[2]=Ke[0]*et[1]-Ke[1]*et[0],(de=tt[0]*tt[0]+tt[1]*tt[1]+tt[2]*tt[2])>fe&&(fe=de,X[0]=tt[0],X[1]=tt[1],X[2]=tt[2]);fe<=0&&(X[0]=X[1]=X[2]=0,X[this.longAxis_(Ke)]=1)},i.prototype.checkOrientation_=function(){for(var X,$,ee=this.mesh.fHead,ne=this.mesh.vHead,ae=0,de=ee.next;de!==ee;de=de.next)if(!(($=de.anEdge).winding<=0))do{ae+=($.Org.s-$.Dst.s)*($.Org.t+$.Dst.t),$=$.Lnext}while($!==de.anEdge);if(ae<0){for(X=ne.next;X!==ne;X=X.next)X.t=-X.t;this.tUnit[0]=-this.tUnit[0],this.tUnit[1]=-this.tUnit[1],this.tUnit[2]=-this.tUnit[2]}},i.prototype.projectPolygon_=function(){var X,$,ee=this.mesh.vHead,ne=[0,0,0],ae=!1;ne[0]=this.normal[0],ne[1]=this.normal[1],ne[2]=this.normal[2],!ne[0]&&!ne[1]&&!ne[2]&&(this.computeNormal_(ne),ae=!0),X=this.sUnit,$=this.tUnit;var de=this.longAxis_(ne);X[de]=0,X[(de+1)%3]=1,X[(de+2)%3]=0,$[de]=0,$[(de+1)%3]=0,$[(de+2)%3]=ne[de]>0?1:-1;for(var fe=ee.next;fe!==ee;fe=fe.next)fe.s=this.dot_(fe.coords,X),fe.t=this.dot_(fe.coords,$);ae&&this.checkOrientation_();for(var Ue=!0,je=ee.next;je!==ee;je=je.next)Ue?(this.bmin[0]=this.bmax[0]=je.s,this.bmin[1]=this.bmax[1]=je.t,Ue=!1):(je.s<this.bmin[0]&&(this.bmin[0]=je.s),je.s>this.bmax[0]&&(this.bmax[0]=je.s),je.t<this.bmin[1]&&(this.bmin[1]=je.t),je.t>this.bmax[1]&&(this.bmax[1]=je.t))},i.prototype.addWinding_=function(X,$){X.winding+=$.winding,X.Sym.winding+=$.Sym.winding},i.prototype.tessellateMonoRegion_=function(X,$){var ee,ne;if((ee=$.anEdge).Lnext===ee||ee.Lnext.Lnext===ee)throw"Mono region invalid";for(;DI.vertLeq(ee.Dst,ee.Org);ee=ee.Lprev);for(;DI.vertLeq(ee.Org,ee.Dst);ee=ee.Lnext);ne=ee.Lprev;for(;ee.Lnext!==ne;)if(DI.vertLeq(ee.Dst,ne.Org)){for(;ne.Lnext!==ee&&(DI.edgeGoesLeft(ne.Lnext)||DI.edgeSign(ne.Org,ne.Dst,ne.Lnext.Dst)<=0);)ne=X.connect(ne.Lnext,ne).Sym;ne=ne.Lprev}else{for(;ne.Lnext!==ee&&(DI.edgeGoesRight(ee.Lprev)||DI.edgeSign(ee.Dst,ee.Org,ee.Lprev.Org)>=0);)ee=X.connect(ee,ee.Lprev).Sym;ee=ee.Lnext}if(ne.Lnext===ee)throw"Mono region invalid";for(;ne.Lnext.Lnext!==ee;)ne=X.connect(ne.Lnext,ne).Sym;return!0},i.prototype.tessellateInterior_=function(X){for(var $,ee=X.fHead.next;ee!==X.fHead;ee=$)if($=ee.next,ee.inside&&!this.tessellateMonoRegion_(X,ee))return!1;return!0},i.prototype.discardExterior_=function(X){for(var $,ee=X.fHead.next;ee!==X.fHead;ee=$)$=ee.next,ee.inside||X.zapFace(ee)},i.prototype.setWindingNumber_=function(X,$,ee){for(var ne,ae=X.eHead.next;ae!==X.eHead;ae=ne)ne=ae.next,ae.Rface.inside!==ae.Lface.inside?ae.winding=ae.Lface.inside?$:-$:ee?X.delete(ae):ae.winding=0},i.prototype.getNeighbourFace_=function(X){return X.Rface&&X.Rface.inside?X.Rface.n:-1},i.prototype.outputPolymesh_=function(X,$,ee,ne){var ae,de,fe=0,Ue=0;ee>3&&X.mergeConvexFaces(ee);for(var je=X.vHead.next;je!==X.vHead;je=je.next)je.n=-1;for(var Ke=X.fHead.next;Ke!==X.fHead;Ke=Ke.next)if(Ke.n=-1,Ke.inside){ae=Ke.anEdge,de=0;do{-1===(je=ae.Org).n&&(je.n=Ue,Ue++),de++,ae=ae.Lnext}while(ae!==Ke.anEdge);if(de>ee)throw"Face vertex greater that support polygon";Ke.n=fe,++fe}this.elementCount=fe,$===fI.CONNECTED_POLYGONS&&(fe*=2),this.elements=[],this.elements.length=fe*ee,this.vertexCount=Ue,this.vertices=[],this.vertices.length=Ue*ne,this.vertexIndices=[],this.vertexIndices.length=Ue;for(je=X.vHead.next;je!==X.vHead;je=je.next)if(-1!==je.n){var et=je.n*ne;this.vertices[et+0]=je.coords[0],this.vertices[et+1]=je.coords[1],ne>2&&(this.vertices[et+2]=je.coords[2]),this.vertexIndices[je.n]=je.idx}var tt=0;for(Ke=X.fHead.next;Ke!==X.fHead;Ke=Ke.next)if(Ke.inside){ae=Ke.anEdge,de=0;do{je=ae.Org;this.elements[tt++]=je.n,de++,ae=ae.Lnext}while(ae!==Ke.anEdge);for(var nt=de;nt<ee;++nt)this.elements[tt++]=-1;if($===fI.CONNECTED_POLYGONS){ae=Ke.anEdge;do{this.elements[tt++]=this.getNeighbourFace_(ae),ae=ae.Lnext}while(ae!==Ke.anEdge);for(var it=de;it<ee;++it)this.elements[tt++]=-1}}},i.prototype.outputContours_=function(X,$){var ee,ne,ae=0,de=0;this.vertexCount=0,this.elementCount=0;for(var fe=X.fHead.next;fe!==X.fHead;fe=fe.next)if(fe.inside){ne=ee=fe.anEdge;do{this.vertexCount++,ee=ee.Lnext}while(ee!==ne);this.elementCount++}this.elements=[],this.elements.length=2*this.elementCount,this.vertices=[],this.vertices.length=this.vertexCount*$,this.vertexIndices=[],this.vertexIndices.length=this.vertexCount;var Ue=0,je=0,Ke=0;ae=0;for(fe=X.fHead.next;fe!==X.fHead;fe=fe.next)if(fe.inside){de=0,ne=ee=fe.anEdge;do{this.vertices[Ue++]=ee.Org.coords[0],this.vertices[Ue++]=ee.Org.coords[1],$>2&&(this.vertices[Ue++]=ee.Org.coords[2]),this.vertexIndices[je++]=this.vertexIdCallback?this.vertexIdCallback(ee):ee.Org.idx,de++,ee=ee.Lnext}while(ee!==ne);this.elements[Ke++]=ae,this.elements[Ke++]=de,ae+=de}},i.prototype.addContour=function(X,$){null===this.mesh&&(this.mesh=new FI),X<2&&(X=2),X>3&&(X=3);for(var ee=null,ne=0;ne<$.length;ne+=X)null===ee?(ee=this.mesh.makeEdge(),this.mesh.splice(ee,ee.Sym)):(this.mesh.splitEdge(ee),ee=ee.Lnext),ee.Org.coords[0]=$[ne+0],ee.Org.coords[1]=$[ne+1],ee.Org.coords[2]=X>2?$[ne+2]:0,ee.Org.idx=this.vertexIndexCounter++,this.edgeCreateCallback&&this.edgeCreateCallback(ee),ee.winding=1,ee.Sym.winding=-1},i.prototype.tesselate=function(X,$,ee,ne,ae,de){if(void 0===X&&(X=dI.ODD),void 0===$&&($=fI.POLYGONS),void 0===de&&(de=!0),this.vertices=[],this.elements=[],this.vertexIndices=[],this.vertexIndexCounter=0,ae&&(this.normal[0]=ae[0],this.normal[1]=ae[1],this.normal[2]=ae[2]),this.windingRule=X,ne<2&&(ne=2),ne>3&&(ne=3),!this.mesh)return!1;this.projectPolygon_(),tz.computeInterior(this,de);var fe=this.mesh;return $===fI.BOUNDARY_CONTOURS?this.setWindingNumber_(fe,1,!0):this.tessellateInterior_(fe),de&&fe.check(),$===fI.BOUNDARY_CONTOURS?this.outputContours_(fe,ne):this.outputPolymesh_(fe,$,ee,ne),!0},i}();function Xo(X){var $=X.windingRule,ee=void 0===$?dI.ODD:$,ne=X.elementType,ae=void 0===ne?fI.POLYGONS:ne,de=X.polySize,fe=void 0===de?3:de,Ue=X.vertexSize,je=void 0===Ue?2:Ue,Ke=X.normal,et=void 0===Ke?[0,0,1]:Ke,tt=X.contours,nt=void 0===tt?[]:tt,it=X.strict,ct=void 0===it||it,dt=X.debug,vt=void 0!==dt&&dt;if(!nt&&ct)throw new Error("Contours can't be empty");if(nt){var gt=new nz;X.edgeCreateCallback&&(gt.edgeCreateCallback=X.edgeCreateCallback),X.vertexIdCallback&&(gt.vertexIdCallback=X.vertexIdCallback);for(var yt=0;yt<nt.length;yt++)gt.addContour(je||2,nt[yt]);return gt.tesselate(ee,ae,fe,je,et,ct),{vertices:gt.vertices,vertexIndices:gt.vertexIndices,vertexCount:gt.vertexCount,elements:gt.elements,elementCount:gt.elementCount,mesh:vt?gt.mesh:void 0}}}dI.ODD,dI.NONZERO,dI.POSITIVE,dI.NEGATIVE,dI.ABS_GEQ_TWO,fI.POLYGONS,fI.CONNECTED_POLYGONS,fI.BOUNDARY_CONTOURS;var rz=function(X){_inherits(Il,X);var $=_createSuper(Il);function Il(X){var ee,ne,de,fe,Ue=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,je=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_classCallCheck(this,Il),(ee=$.call(this)).type="ShapeGeometry",ee.windingRule=dI.ODD,ee.elementType=fI.POLYGONS,ee.polySize=3,ee.vertexSize=2,ee.strict=!0,ee._shape=X,ee._curveSegments=Ue,ee._triangulationOptions=Object.assign({windingRule:dI.ODD,elementType:fI.POLYGONS,polySize:3,vertexSize:2,strict:!0},je);for(var Ke,et,tt,nt=ee._shape.extractShapePointsToFlatArray([],ee._curveSegments),it=ee._shape.shapeHoles.map((function(X){return X.extractShapePointsToFlatArray([],ee._curveSegments)})),ct=!0,dt=!0,vt=0,gt=nt.length/2;vt<gt;vt++){var yt=2*vt,_t=nt[yt+0],wt=nt[yt+1];if(void 0!==et&&_t!==et&&(ct=!1),void 0!==tt&&wt!==tt&&(dt=!1),et=_t,tt=wt,!ct&&!dt)break}!ct&&!dt&&(Ke=Xo({contours:[nt].concat((0,ae.Z)(it)),windingRule:ee._triangulationOptions.windingRule,elementType:ee._triangulationOptions.elementType,polySize:ee._triangulationOptions.polySize,vertexSize:ee._triangulationOptions.vertexSize,strict:ee._triangulationOptions.strict}));var St=null!=(ne=null==Ke?void 0:Ke.vertexCount)?ne:1,Ct=null!=(de=null==Ke?void 0:Ke.elementCount)?de:1;if(ee._positionAttribute=new Lu(new Float32Array(3*St),3),ee._normalAttribute=new Lu(new Float32Array(3*St),3),ee._uvAttribute=new Lu(new Float32Array(2*St),2),ee._indexAttribute=new Lu(new Uint32Array(3*Ct),1),Ke){for(var At=1/0,Et=-1/0,Rt=1/0,Bt=-1/0,Ht=0,Wt=St;Ht<Wt;Ht++){var qt=2*Ht,Zt=Ke.vertices[qt+0],Xt=Ke.vertices[qt+1];Zt<At&&(At=Zt),Zt>Et&&(Et=Zt),Xt<Rt&&(Rt=Xt),Xt>Bt&&(Bt=Xt)}for(var Qt=Et-At,en=Bt-Rt,tn=0,un=St;tn<un;tn++){var hn=2*tn,dn=Ke.vertices[hn+0],mn=Ke.vertices[hn+1],gn=(dn-At)/Qt,_n=(mn-Rt)/en;ee._positionAttribute.setXYZ(tn,dn,mn,0),ee._normalAttribute.setXYZ(tn,0,0,1),ee._uvAttribute.setXY(tn,gn,_n)}for(var wn=0,Sn=Ct;wn<Sn;wn++){var Cn=3*wn,An=Ke.elements[Cn+0],Mn=Ke.elements[Cn+1],En=Ke.elements[Cn+2];ee._indexAttribute.setX(Cn+0,An),ee._indexAttribute.setX(Cn+1,Mn),ee._indexAttribute.setX(Cn+2,En)}}return ee.setAttribute("position",ee._positionAttribute),ee.setAttribute("normal",ee._normalAttribute),ee.setAttribute("uv",ee._uvAttribute),ee.setIndex(ee._indexAttribute),ee.setDrawRange(0,3*(null!=(fe=null==Ke?void 0:Ke.elementCount)?fe:1)),ee}return _createClass(Il,[{key:"clone",value:function clone(){var X=new Il(this._shape,this._curveSegments);return X.userData=RT(this.userData),X}}]),Il}(Wu),iz=function(){function fp(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:256,$=arguments.length>1&&void 0!==arguments[1]&&arguments[1];_classCallCheck(this,fp),this.capacity=X,this.size=0,this.debug=$,this.debug&&console.log("allocating with cap ".concat(X));var ee=X*fp.eSize;this.buffer=new ArrayBuffer(ee);var ne=Float32Array.BYTES_PER_ELEMENT,ae=0;this.positions=new Float32Array(this.buffer,ae*ne,3*X),ae+=3*X,this.normals=new Float32Array(this.buffer,ae*ne,3*X),ae+=3*X,this.uvs=new Float32Array(this.buffer,ae*ne,2*X)}return _createClass(fp,[{key:"realloc",value:function realloc(X){var $=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(X<this.size)throw Error("cannot shrink buffer");if(!(X<=this.capacity)||$){this.debug&&console.log("resizing from ".concat(this.capacity," \u2192 ").concat(X));var ee=X*fp.eSize,ne=new ArrayBuffer(ee),ae=Float32Array.BYTES_PER_ELEMENT,de=0,fe=new Float32Array(ne,de*ae,3*X);de+=3*X;var Ue=new Float32Array(ne,de*ae,3*X);de+=3*X;var je=new Float32Array(ne,de*ae,2*X);fe.set(this.positions.slice(0,3*this.size)),Ue.set(this.normals.slice(0,3*this.size)),je.set(this.uvs.slice(0,2*this.size)),this.buffer=ne,this.positions=fe,this.normals=Ue,this.uvs=je,this.capacity=X}}},{key:"get",value:function get(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,$=this.size+X;if($>this.capacity){for(var ee=this.capacity;$>ee;)ee*=2;this.realloc(ee)}var ne=this.size;return this.size=$,ne}},{key:"reserve",value:function reserve(X){var $=this.size+X;$>this.capacity&&this.realloc($)}},{key:"shrink",value:function shrink(){this.debug&&console.log("shrinking ".concat(this.capacity," \u2192 ").concat(this.size)),this.realloc(this.size,!0)}}]),fp}(),az=iz;az.eSize=8*Float32Array.BYTES_PER_ELEMENT;var oz=function av(X,$){return function(ee){var ne=(0,fe.Z)(ee,2),ae=ne[0],de=ne[1];return de<ae&&(de+=$),(X>=ae?X:X+$)<=de}},sz=function(X){_inherits(Rl,X);var $=_createSuper(Rl);function Rl(X,ee){var ne,de=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,Ue=arguments.length>3&&void 0!==arguments[3]?arguments[3]:12,je=arguments.length>4&&void 0!==arguments[4]?arguments[4]:3;_classCallCheck(this,Rl),(ne=$.call(this)).type="ShapeGeometry",ne.vertexCache={},ne._shape=X,ne._depth=ee,ne._bevel=de,ne._curveSegments=Ue,ne._bevelSegmentsInput=je,de<=0?(ne._bevelSize=0,ne._bevelSegments=0):(ne._bevelSize=Math.min(de,ee/2-1e-12),ne._bevelSegments=Math.floor(je));var Ke=ne._shape.extractShapePointsToFlatArray([],Ue),et=ne._shape.shapeHoles.map((function(X){for(var $=X.extractShapePointsToFlatArray([],Ue),ee=[],ne=$.length-1;ne>=1;ne-=2){var ae=$[ne-1],de=$[ne-0];ee.push(ae,de)}return ee})),tt=Xo({windingRule:dI.ODD,elementType:fI.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[Ke]}),nt=Xo({windingRule:dI.ODD,elementType:fI.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:(0,ae.Z)(et)});if(!tt)throw new Error("error generating geometry");var it=tt.elementCount;if(nt){tt.elementCount+=nt.elementCount;for(var ct=0;ct<nt.elements.length;ct++){var dt=nt.elements[ct],vt=ct%2===0?tt.vertexCount:0;tt.elements.push(dt+vt)}for(var gt=0;gt<nt.vertexIndices.length;gt++){var yt=nt.vertexIndices[gt],_t=tt.vertexCount;tt.vertexIndices.push(yt+_t)}for(var wt=0;wt<nt.vertices.length;wt++){var St=nt.vertices[wt];tt.vertices.push(St)}}for(var Ct=1/0,At=-1/0,Et=1/0,Rt=-1/0,Bt=0,Ht=tt.vertexCount;Bt<Ht;Bt++){var Wt=2*Bt,qt=tt.vertices[Wt+0],Zt=tt.vertices[Wt+1];qt<Ct&&(Ct=qt),qt>At&&(At=qt),Zt<Et&&(Et=Zt),Zt>Rt&&(Rt=Zt)}ne._minX=Ct,ne._minY=Et,ne._width=At-Ct,ne._height=Rt-Et;var Xt=2*tt.vertexCount*(2+ne._bevelSegments);ne._buffer=new az(Xt);for(var Qt=[],en=[],tn=tt.elementCount-1;tn>=0;tn--){var un=tn>=it,hn=2*tn,dn=tt.elements[hn+0],mn=tt.elements[hn+1],gn=dn+mn,_n={start:dn,count:mn,normals:[],continuous:[],concave:[]},wn=dn,Sn=gn-1,Cn=dn+1,An=ne._shape.roundedCurves.length;do{var Mn,En=wn-dn,Tn=tt.vertices[2*Sn+0],Pn=tt.vertices[2*Sn+1],Dn=tt.vertices[2*wn+0],Ln=tt.vertices[2*wn+1],On=tt.vertices[2*Cn+0],In=tt.vertices[2*Cn+1],Fn=Dn-Tn,Wn=Ln-Pn,Yn=Math.sqrt(Fn*Fn+Wn*Wn);Fn/=Yn,Wn/=Yn;var Jn=Dn-On,Zn=Ln-In,Kn=Math.sqrt(Jn*Jn+Zn*Zn);Jn/=Kn,Zn/=Kn,_n.normals[2*En+0]=-Zn,_n.normals[2*En+1]=Jn,_n.concave[En]=Fn*Zn-Wn*Jn>0;var $n=tt.vertexIndices[wn];if(Array.isArray($n))_n.continuous[En]=!1;else{var nr=ne._shape.getCurveIndexFromVertexId($n-1,!0),ir=(0,fe.Z)(nr,2),ar=ir[0],or=ir[1];if(or>0&&or<1)_n.continuous[En]=!0;else{var hr=1===or?ar+1:ar-1;hr=(hr+An)%An;var dr=1===or?0:1,fr=ne._shape.roundedCurves[ar].getTangent(or),vr=ne._shape.roundedCurves[hr].getTangent(dr);_n.continuous[En]=fr.dot(vr)>.95}}un&&(_n.normals[2*En+0]*=-1,_n.normals[2*En+1]*=-1),Sn=(Mn=[wn,Cn,Cn+1])[0],wn=Mn[1],(Cn=Mn[2])>=gn&&(Cn-=mn)}while(Cn!==dn+1);var yr=[];yr.push({bevelI:0,angle:0,size:0,boundary:{vertices:tt.vertices.slice(2*dn,2*gn),vertexCount:mn,vertexIndices:new Array(mn).fill(!0).map((function(X,$){return[$,$]})),elements:[0,mn],elementCount:1,mesh:null},reverseMap:[],insetPoints:tt.vertices.slice(2*dn,2*gn)});for(var br=function _loop7(X){for(var $=X/ne._bevelSegments*Math.PI/2,ee=(1-Math.cos($))*ne._bevelSize,ae=[],de=[],je=[],Ke=[],et=0,nt=0;nt<mn;nt++){var it=2*nt,ct=(nt-1+mn)%mn*2,dt=tt.vertices[2*_n.start+it+0],vt=tt.vertices[2*_n.start+it+1],gt=-_n.normals[ct+0]*ee,yt=-_n.normals[ct+1]*ee,_t=-_n.normals[it+0]*ee,wt=-_n.normals[it+1]*ee;if(_n.concave[nt]||!_n.concave[nt]&&un){var St=Math.atan2(yt,gt),Ct=Math.atan2(wt,_t);Ct>St&&(Ct-=2*Math.PI);var At=Ct-St;if(_n.continuous[nt]||un){var Et=St+At/2,Rt=Math.cos(Et)*ee,Bt=Math.sin(Et)*ee;ae[2*et+0]=dt+Rt*(un?-1:1),ae[2*et+1]=vt+Bt*(un?-1:1),Ke[et]=nt,et++}else for(var Ht=Math.max(1,Math.floor(Ue/4*Math.abs(At)/Math.PI)),Wt=0;Wt<=Ht;Wt++){var qt=St+At*(Wt/Ht),Zt=Math.cos(qt)*ee,Xt=Math.sin(qt)*ee;ae[2*et+0]=dt+Zt,ae[2*et+1]=vt+Xt,Ke[et]=nt,et++}}else ae[2*et+0]=dt+gt,ae[2*et+1]=vt+yt,Ke[et]=nt,de[nt]=et,ae[2*++et+0]=dt,ae[2*et+1]=vt,Ke[et]=nt,ae[2*++et+0]=dt+_t,ae[2*et+1]=vt+wt,Ke[et]=nt,je[nt]=et,et++}var Qt=Xo({windingRule:dI.POSITIVE,elementType:fI.BOUNDARY_CONTOURS,vertexSize:2,strict:!0,contours:[ae],edgeCreateCallback:function edgeCreateCallback(X){var $=X.Org.idx,ee=Ke[$],ne=Ke[($+1)%Ke.length];X.idx=[ee,ne],X.Sym.idx=[ne,ee]},vertexIdCallback:function vertexIdCallback(X){var $=X.Lprev.idx;return[$?$[1]:0,X.idx[0]]}});if(!Qt)throw console.log("Error"),new Error("error generating bevel geometry for ".concat(X,"'th loop"));if(!Qt.vertexCount)return"break";for(var en=0;en<Qt.vertexIndices.length;en++){var tn=(0,fe.Z)(Qt.vertexIndices[en],2),hn=tn[0],dn=tn[1];if(hn!==dn){var gn=dn;dn<hn&&(gn+=mn);for(var wn=hn;wn<gn;wn++){var Sn=wn%mn,Cn=(wn+1)%mn;if(!_n.continuous[Sn]||!_n.continuous[Cn]){Qt.vertexIndices[en]=[hn,Sn],Qt.vertexIndices.splice(en+1,0,[Cn,dn]),Qt.vertices.splice(2*(en+1),0,Qt.vertices[2*en],Qt.vertices[2*en+1]);break}}}}yr.push({bevelI:X,angle:$,size:ee,boundary:Qt,reverseMap:Ke,insetPoints:ae})},_r=1;_r<=ne._bevelSegments;_r++){var wr=br(_r);if("break"===wr)break}for(var Cr=function Y(X,$,ee){for(var ne=0,ae=X.boundary.vertexIndices.length;ne<ae&&ee(X.boundary.vertexIndices[$]);)$=($+1)%ae,ne++;return ne},Ar=Qt.length,Mr=1;Mr<yr.length;Mr++){var Er=yr[Mr-1],Tr=yr[Mr],Pr=Er.boundary.vertexIndices.length,Dr=Tr.boundary.vertexIndices.length;if(!Pr||!Dr)break;for(var Br=_n.concave.length,Ir=0,zr=oz(Ir,mn);!Er.boundary.vertexIndices.filter(zr).length||!Tr.boundary.vertexIndices.filter(zr).length;)Ir++,zr=oz(Ir,mn);var Fr=Er.boundary.vertexIndices.findIndex(zr),Vr=Tr.boundary.vertexIndices.findIndex(zr);do{Fr=(Fr+1)%Pr}while(zr(Er.boundary.vertexIndices[Fr]));do{Vr=(Vr+1)%Dr}while(zr(Tr.boundary.vertexIndices[Vr]));var qr=Ir=(Ir+1)%mn,Xr=ne.buildBevelVert(_n,Er,(Fr-1+Pr)%Pr),Kr=ne.buildBevelVert(_n,Tr,(Vr-1+Dr)%Dr),ei=Xr,li=Kr,Ei=void 0,Di=void 0,Yi=!1;do{var Zi=Cr(Er,Fr,zr=oz(Ir,mn)),$i=Cr(Tr,Vr,zr),aa=Yi;if(Yi=!1,Zi&&!$i){for(var sa=0;sa<Zi;sa++)Ei=ne.buildBevelVert(_n,Er,(Fr+sa)%Pr,sa/(Zi-1)),Qt.push(ei.topN,Ei.topP,li.topN),Qt.push(Ei.bottomP,ei.bottomN,li.bottomN),ei=Ei;Yi=!0}else if(!Zi&&$i)for(var la=0;la<$i;la++)Di=ne.buildBevelVert(_n,Tr,(Vr+la)%Dr,la/($i-1)),Qt.push(li.topN,ei.topP,Di.topP),Qt.push(ei.bottomP,li.bottomN,Di.bottomP),li=Di;else if(Zi&&$i)if(Ei=ne.buildBevelVert(_n,Er,Fr,0),Di=ne.buildBevelVert(_n,Tr,Vr,0),aa?(Qt.push(ei.topN,Di.topP,li.topN),Qt.push(ei.topN,Ei.topP,Di.topP),Qt.push(Di.bottomP,ei.bottomN,li.bottomN),Qt.push(Di.bottomP,Ei.bottomP,ei.bottomN)):(Qt.push(li.topN,ei.topN,Ei.topP),Qt.push(li.topN,Ei.topP,Di.topP),Qt.push(Ei.bottomP,ei.bottomN,li.bottomN),Qt.push(Ei.bottomP,li.bottomN,Di.bottomP)),ei=Ei,li=Di,Zi===$i)for(var ua=1;ua<Zi;ua++)Ei=ne.buildBevelVert(_n,Er,(Fr+ua)%Pr,ua/(Zi-1)),Di=ne.buildBevelVert(_n,Tr,(Vr+ua)%Dr,ua/($i-1)),Qt.push(ei.topN,Ei.topP,li.topN),Qt.push(li.topN,Ei.topP,Di.topP),Qt.push(Ei.bottomP,ei.bottomN,li.bottomN),Qt.push(Ei.bottomP,li.bottomN,Di.bottomP),ei=Ei,li=Di;else if(Zi>$i)for(var ca=Zi/$i,ha=0,da=1;da<Zi;da++)Ei=ne.buildBevelVert(_n,Er,(Fr+da)%Pr,da/(Zi-1)),Qt.push(ei.topN,Ei.topP,li.topN),Qt.push(Ei.bottomP,ei.bottomN,li.bottomN),ei=Ei,da>(ha+1)*ca&&(ha++,Di=ne.buildBevelVert(_n,Tr,(Vr+ha)%Dr,ha/($i-1)),Qt.push(li.topN,Ei.topP,Di.topP),Qt.push(Ei.bottomP,li.bottomN,Di.bottomP),li=Di);else for(var va=$i/Zi,ga=0,ya=1;ya<$i;ya++)Di=ne.buildBevelVert(_n,Tr,(Vr+ya)%Dr,ya/($i-1)),Qt.push(li.topN,Ei.topP,Di.topP),Qt.push(Ei.bottomP,li.bottomN,Di.bottomP),li=Di,ya>(ga+1)*va&&(ga++,Ei=ne.buildBevelVert(_n,Er,(Fr+ga)%Pr,ga/(Zi-1)),Qt.push(ei.topN,Ei.topP,li.topN),Qt.push(Ei.bottomP,ei.bottomN,li.bottomN),ei=Ei);Fr=(Fr+Zi)%Pr,Vr=(Vr+$i)%Dr,Ir=(Ir+1)%Br}while(Ir!==qr)}for(var ba=yr[0],xa=0,_a=ba.boundary.vertexCount;xa<_a;xa++){var wa=ne.buildBevelVert(_n,ba,xa),Ca=ne.buildBevelVert(_n,ba,(xa+1)%_a);Qt.push(Ca.topP,wa.topN,wa.bottomN),Qt.push(Ca.topP,wa.bottomN,Ca.bottomP)}if(un){for(var Aa=[],Ma=Qt.length-1;Ma>=Ar+2;Ma-=3){var Ea=Qt[Ma-2],Da=Qt[Ma-1],Ia=Qt[Ma-0];Aa.push(Ia,Da,Ea)}Qt.splice.apply(Qt,[Ar,Qt.length-Ar].concat(Aa))}if(un){for(var qa=[],eo=yr[yr.length-1].boundary.vertices.length-1;eo>=1;eo-=2){var to=yr[yr.length-1].boundary.vertices[eo-1],ro=yr[yr.length-1].boundary.vertices[eo-0];qa.push(to,ro)}en.push(qa)}if(!un){var fo=yr[yr.length-1],vo=Xo({windingRule:yr.length>1?dI.POSITIVE:dI.ODD,elementType:fI.POLYGONS,vertexSize:2,strict:!0,contours:[fo.insetPoints].concat(en)});if(!vo)throw new Error("Error generating geometry for surface");Object.assign(_assertThisInitialized(ne),{capStartIndex:Qt.length});for(var mo=0;mo<3*vo.elementCount;mo+=3){var go=ne.buildSurfaceVert(vo,vo.elements[mo+0]),bo=ne.buildSurfaceVert(vo,vo.elements[mo+1]),xo=ne.buildSurfaceVert(vo,vo.elements[mo+2]);Qt.push(go.top,bo.top,xo.top),Qt.push(xo.bottom,bo.bottom,go.bottom)}}ne.vertexCache={}}ne._buffer.shrink();var wo=new Lu(Uint32Array.from(Qt),1),So=new Lu(ne._buffer.positions,3),Ao=new Lu(ne._buffer.normals,3),Mo=new Lu(ne._buffer.uvs,2);return So.needsUpdate=!0,Ao.needsUpdate=!0,Mo.needsUpdate=!0,wo.needsUpdate=!0,ne.setAttribute("position",So),ne.setAttribute("normal",Ao),ne.setAttribute("uv",Mo),ne.setIndex(wo),ne}return _createClass(Rl,[{key:"buildSurfaceVert",value:function buildSurfaceVert(X,$){var ee=$.toString();if(ee in this.vertexCache)return this.vertexCache[ee];var ne=X.vertices[2*$+0],ae=X.vertices[2*$+1],de=(ne-this._minX)/this._width,fe=(ae-this._minY)/this._height,Ue=this._buffer.get(2),je=3*Ue,Ke=2*Ue,et={top:Ue+0,bottom:Ue+1};return this._buffer.positions[je+0]=ne,this._buffer.positions[je+1]=ae,this._buffer.positions[je+2]=this._depth,this._buffer.normals[je+0]=0,this._buffer.normals[je+1]=0,this._buffer.normals[je+2]=1,this._buffer.uvs[Ke+0]=de,this._buffer.uvs[Ke+1]=fe,this._buffer.positions[je+3]=ne,this._buffer.positions[je+4]=ae,this._buffer.positions[je+5]=0,this._buffer.normals[je+3]=0,this._buffer.normals[je+4]=0,this._buffer.normals[je+5]=-1,this._buffer.uvs[Ke+2]=de,this._buffer.uvs[Ke+3]=fe,this.vertexCache[ee]=et,et}},{key:"buildBevelVert",value:function buildBevelVert(X,$,ee){var ne=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,ae="".concat($.bevelI,":").concat(ee);if(ae in this.vertexCache)return this.vertexCache[ae];var de,Ue,je,Ke,et=(0,fe.Z)($.boundary.vertexIndices[ee],2),tt=et[0],nt=et[1];tt!==nt?(Ue=tt,de=nt,Ke=!1,je=X.continuous[Ue]&&X.continuous[de]):(Ue=((de=tt)-1+X.count)%X.count,Ke=X.concave[de]&&$.bevelI>0,je=X.continuous[de]||Ke);var it=Math.cos($.angle),ct=Math.sin($.angle),dt=2*ee,vt=2*de,gt=2*Ue,yt=$.boundary.vertices[dt+0],_t=$.boundary.vertices[dt+1],wt=(1-ct)*this._bevelSize,St=(yt-this._minX)/this._width,Ct=(_t-this._minY)/this._height,At=X.normals[vt+0],Et=X.normals[vt+1],Rt=X.normals[gt+0],Bt=X.normals[gt+1];if(Ke){var Ht=Rt-At,Wt=Bt-Et;At+=Ht*(1-ne),Et+=Wt*(1-ne);var qt=Math.sqrt(At*At+Et*Et);At/=qt,Et/=qt}var Zt=this._buffer.get(je?2:4),Xt=3*Zt,Qt=2*Zt,en={i:ee,fi:de,topP:Zt+0,topN:Zt+0,bottomP:Zt+1,bottomN:Zt+1};return this._buffer.positions[Xt+0]=yt,this._buffer.positions[Xt+1]=_t,this._buffer.positions[Xt+2]=this._depth-wt,this._buffer.normals[Xt+0]=At*it,this._buffer.normals[Xt+1]=Et*it,this._buffer.normals[Xt+2]=ct,this._buffer.uvs[Qt+0]=St,this._buffer.uvs[Qt+1]=Ct,this._buffer.positions[Xt+3]=yt,this._buffer.positions[Xt+4]=_t,this._buffer.positions[Xt+5]=wt,this._buffer.normals[Xt+3]=At*it,this._buffer.normals[Xt+4]=Et*it,this._buffer.normals[Xt+5]=-ct,this._buffer.uvs[Qt+2]=Ct,this._buffer.uvs[Qt+3]=St,je||(Zt+=2,Xt+=6,Qt+=4,en.topP=Zt+0,en.bottomP=Zt+1,this._buffer.positions[Xt+0]=yt,this._buffer.positions[Xt+1]=_t,this._buffer.positions[Xt+2]=this._depth-wt,this._buffer.normals[Xt+0]=Rt*it,this._buffer.normals[Xt+1]=Bt*it,this._buffer.normals[Xt+2]=ct,this._buffer.uvs[Qt+0]=St,this._buffer.uvs[Qt+1]=Ct,this._buffer.positions[Xt+3]=yt,this._buffer.positions[Xt+4]=_t,this._buffer.positions[Xt+5]=wt,this._buffer.normals[Xt+3]=Rt*it,this._buffer.normals[Xt+4]=Bt*it,this._buffer.normals[Xt+5]=-ct,this._buffer.uvs[Qt+2]=Ct,this._buffer.uvs[Qt+3]=St),this.vertexCache[ae]=en,en}},{key:"clone",value:function clone(){var X=new Rl(this._shape,this._depth,this._bevel,this._curveSegments,this._bevelSegmentsInput);return X.userData=RT(this.userData),X}}]),Rl}(Wu),lz=function(){function Hr(){_classCallCheck(this,Hr)}return _createClass(Hr,null,[{key:"create",value:function create(X){return this.build(this.normalizeInputs(X))}},{key:"normalizeInputs",value:function normalizeInputs(X,$){var ee,ne,ae,de,fe,Ue,je,Ke=Object.assign({},null!=(ee=null==$?void 0:$.parameters)?ee:{width:100,subdivisions:40,roundness:0,extrudeBevelSize:0,extrudeBevelSegments:3},X.parameters),et=Math.abs(Ke.width),tt=Math.abs(null!=(ne=Ke.height)?ne:Ke.width),nt=Math.abs(null!=(ae=Ke.depth)?ae:0),it=null!=(de=X.shape)?de:null==$?void 0:$.shape,ct=null!=(fe=null==it?void 0:it.roundness)?fe:Ke.roundness;void 0!==it&&(it instanceof AI?(it.width!==et||it.height!==tt)&&it.applySize(et,tt):it=new AI(et,tt).fromJSON(it),void 0!==(null==(Ue=X.parameters)?void 0:Ue.roundness)&&(null==(je=X.parameters)?void 0:je.roundness)>0&&it.update(!1));var dt=null!=it?it:new AI(et,tt);return{parameters:Object.assign(Ke,{width:et,height:tt,depth:nt,roundness:ct}),shape:dt}}},{key:"build",value:function build(X){var $,ee=X.parameters,ne=ee.depth,ae=ee.extrudeBevelSize,de=ee.extrudeBevelSegments,fe=ee.subdivisions,Ue=ee.roundness;return X.shape.roundness=Ue,$=ne<=0?new rz(X.shape,fe):new sz(X.shape,ne,ae,fe,de),Object.assign($,{userData:At(Ct({},X),{type:"VectorGeometry"})})}}]),Hr}(),uz=2*Math.PI,cz=function(){function c1(){_classCallCheck(this,c1)}return _createClass(c1,null,[{key:"create",value:function create(X){return this.build(this.normalizeInputs(X))}},{key:"normalizeInputs",value:function normalizeInputs(X,$){var ee,ne,ae,de=Object.assign({},null!=(ee=null==$?void 0:$.parameters)?ee:{width:100,depth:0,spikes:64,angle:360,innerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1},X.parameters);return{shape:X.shape&&X.shape instanceof AI?X.shape:new AI,parameters:Object.assign(de,{width:Math.abs(de.width),height:Math.abs(null!=(ne=de.height)?ne:de.width),depth:Math.abs(null!=(ae=de.depth)?ae:0)})}}},{key:"build",value:function build(X){var $=X.parameters,ee=$.width,ne=$.height,ae=$.spikes,de=$.angle,fe=$.innerRadius,Ue=$.depth,je=$.extrudeBevelSize,Ke=$.extrudeBevelSegments,et=X.shape,tt=function tF(X,$,ee,ne,ae,de){if(ne>=uz)return ae>30||ae%4===0?(function nF(X,$,ee){var ne=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,ae=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,de=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,fe=.5522847498,Ue=$*fe,je=ee*fe;X.addPoint(dp(ae-$,de,ae-$,de-je,ae-$,de+je)),X.addPoint(dp(ae,de+ee,ae-Ue,de+ee,ae+Ue,de+ee)),X.addPoint(dp(ae+$,de,ae+$,de+je,ae+$,de-je)),X.addPoint(dp(ae,de-ee,ae+Ue,de-ee,ae-Ue,de-ee)),ne>0&&u1(X,$,ee,ne)}(X,$,ee,de),Math.round(ae/4)):a1(X,ne,ae,$,ee,de);var fe={x:0,y:ee},Ue=ne+.5*Math.PI,je={x:Math.cos(Ue)*$,y:Math.sin(Ue)*ee},Ke=r1({px:fe.x,py:fe.y,cx:je.x,cy:je.y,rx:$,ry:ee,largeArcFlag:ne>Math.PI,sweepFlag:!0});return ae>30||ae%Ke.length===0?function rF(X,$,ee,ne,ae,de,fe,Ue){var je=Math.round(ae/ne.length);X.addPoint(Bl($,ee));for(var Ke=0,et=ne.length;Ke<et;Ke++){var tt=ne[Ke],nt=X.points[Ke],it=Bl(tt.x,tt.y);nt.controls[1].position.set(tt.x1,tt.y1),it.controls[0].position.set(tt.x2,tt.y2),X.addPoint(it)}return Ue>0?h1(X,de,fe,Ue):X.addPoint(Bl(0,0)),je}(X,fe.x,fe.y,Ke,ae,$,ee,de):a1(X,ne,ae,$,ee,de)}(et,.5*ee,.5*ne,de*Math.PI/180,ae,fe);et.isClosed=!0,et.update();var nt=lz.create({shape:et,parameters:{subdivisions:tt,depth:Ue,extrudeBevelSize:je,extrudeBevelSegments:Ke}});return Object.assign(nt,{userData:At(Ct({},X),{type:"EllipseGeometry"})})}}]),c1}();function a1(X,$,ee,ne,ae,de){for(var fe=-$/ee,Ue=0;Ue<=ee;Ue++){var je=fe*Ue,Ke=Math.sin(je)*ne,et=Math.cos(je)*ae;X.addPoint(Bl(Ke,et))}return $<uz?de>0?h1(X,ne,ae,de):X.addPoint(Bl(0,0)):(X.removePoint(X.points[X.points.length-1]),de>0&&u1(X,ne,ae,de)),1}function Bl(X,$){return new eI(da.generateUUID(),new va(X,$))}function dp(X,$,ee,ne,ae,de){var fe=Bl(X,$);return fe.controls[0].position.set(ee,ne),fe.controls[1].position.set(ae,de),fe}function h1(X,$,ee,ne){f1(X,$,ee,ne).forEach((function($){return X.addPoint($)}))}function u1(X,$,ee,ne){var ae=f1(X,$,ee,ne),de=new AI;ae.forEach((function(X){return de.addPoint(X)})),de.isClosed=!0,X.shapeHoles.push(de)}function f1(X,$,ee,ne){var ae=ne*$/100,de=ae*(Math.abs(ee)/Math.abs($)),fe=new va(ae/$,de/ee),Ue=X.points.map((function(X){var $=X.clone();return $.uuid=da.generateUUID(),$})).reverse();return Ue.forEach((function(X){X.position.multiply(fe);var $=X.controls[0].position.clone().multiply(fe),ee=X.controls[1].position.clone().multiply(fe);X.controls[0].position.copy(ee),X.controls[1].position.copy($)})),Ue}var hz=function(){function d1(){_classCallCheck(this,d1)}return _createClass(d1,null,[{key:"create",value:function create(X){return this.build(this.normalizeInputs(X))}},{key:"normalizeInputs",value:function normalizeInputs(X,$){var ee,ne,ae,de=Object.assign({},null!=(ee=null==$?void 0:$.parameters)?ee:{width:100,revolutions:2,segments:40,pathRadius:10,pathType:0,pathSegments:30,cornerRadius:30,cornerSegments:4},X.parameters),fe=Math.abs(de.width),Ue=Math.abs(null!=(ne=de.height)?ne:fe),je=Math.abs(null!=(ae=de.depth)?ae:fe),Ke=Math.abs(Math.min(fe,je))/2;return{parameters:Object.assign(de,{width:fe,height:Ue,depth:je,radius:Ke,segments:Math.round(de.segments),pathSegments:Math.round(de.pathSegments),cornerSegments:Math.round(de.cornerSegments)})}}},{key:"build",value:function build(X){var $=X.parameters,ee=$.width,ne=$.height,ae=$.depth,de=$.radius,fe=$.revolutions,Ue=$.segments,je=$.pathRadius,Ke=$.pathType,et=$.pathSegments,tt=$.cornerRadius,nt=$.cornerSegments,it=new mz(!1,ee,ne,ae,de,fe,Ue,je,Ke,et,tt,nt);return Object.assign(it,{userData:At(Ct({},X),{type:"HelixGeometry"})})}}]),d1}(),mz=function(X){_inherits(jh,X);var $=_createSuper(jh);function jh(){var X,ee=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],ne=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,ae=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,de=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,Ue=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,je=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1,Ke=arguments.length>9&&void 0!==arguments[9]?arguments[9]:1,et=arguments.length>10&&void 0!==arguments[10]?arguments[10]:1,tt=arguments.length>11&&void 0!==arguments[11]?arguments[11]:1;_classCallCheck(this,jh),X=$.call(this);var nt=ee&&1===de;nt&&(tt=0),et>100&&(et=100);var it,ct,dt,vt,gt,yt,_t,wt,St=function p(){return new wo},Ct=new wo,At=St(),Et=St(),Rt=St(),Bt=St(),Ht=St(),Wt=St(),qt=St(),Zt=St(),Xt=St(),Qt=St(),en=St(),tn=ne-2*je+.001,un=tn/de,hn=Math.ceil(Ue*de),dn=hn+1,mn=tn/hn,gn=-tn/2,_n=Ke+1,wn=2*Math.PI/Ke,Sn=Math.PI/2/tt,Cn=.01,An=Math.min((1-et/100)*je,je-Cn),Mn=je-An,En=0,Tn=2,Pn=tt*Tn+Tn,Dn=_n*Pn/Tn,Ln=Dn+_n*dn,On=_n*(dn+Pn),In=[3,3,2].map((function(X){return Array(On*X).fill(0)})),Fn=(0,fe.Z)(In,3),Wn=Fn[0],Yn=Fn[1],Jn=Fn[2],Zn=[],Kn=ae-je;function L(X,$){var ne=Math.PI/2;yt=$*mn,wt=2*Math.PI*(yt%un)/un+ne,yt+=gn,_t=Math.sin(wt)*Kn,gt=Math.cos(wt)*Kn,ee?X.set(gt,_t,yt):X.set(gt,yt,_t)}L(Ct,-1e-10),L(At,0),Bt.copy(Ct),L(Ct,1);for(var $n=Ct.distanceTo(At),nr=Mn+An,ir=$n*hn+2*nr,ar=An,or=ir-nr,hr=function _loop8(X){L(Et,X),en.subVectors(Et,Bt).normalize(),Bt.copy(Et),Xt.copy(Et).setComponent(+ee+1,0).normalize(),Qt.crossVectors(en,Xt).normalize();for(var $=0===X,ne=X===hn,ae=$?3*Math.PI/2:Sn,de=$?ar:or,fe=$?_n:Ln,Ue=$?0:On-_n,et=en.clone().multiplyScalar($?-Mn:Mn).add(Et),it=en.clone().multiplyScalar($?-1:1).normalize(),ct=0;ct<_n;ct++){var dt=ct*wn;if(Ht.addVectors(Ct.copy(Xt).multiplyScalar(je*Math.cos(dt)),At.copy(Qt).multiplyScalar(je*Math.sin(dt))),Wt.copy(Ht).normalize(),$||ne){nt||(En=Ue+ct,[0,1,2].forEach((function(X){Wn[3*En+X]=et.getComponent(X),Yn[3*En+X]=it.getComponent(X)})),Jn[2*En]=+ne,Jn[2*En+1]=ct/Ke),At.copy(Wt).multiplyScalar(An),Rt.addVectors(Et,At);for(var vt=0;vt<tt;vt++){var gt=vt*Sn+ae;qt.addVectors(Ct.copy(en).multiplyScalar(Mn*Math.sin(gt)),At.copy(Wt).multiplyScalar(Mn*Math.cos(gt))),Zt.copy(qt).normalize(),At.addVectors(Rt,qt),qt.normalize(),En=fe+vt*_n+ct,[0,1,2].forEach((function(X){Wn[3*En+X]=At.getComponent(X),Yn[3*En+X]=Zt.getComponent(X)}));var yt=+$+Math.sin(gt);Jn[2*En]=(de+Mn*yt)/ir,Jn[2*En+1]=ct/Ke}}At.addVectors(Et,Ht),En=Dn+X*_n+ct,[0,1,2].forEach((function(X){Wn[3*En+X]=At.getComponent(X),Yn[3*En+X]=Wt.getComponent(X)})),Jn[2*En]=(nr+X*$n)/ir,Jn[2*En+1]=ct/Ke}},dr=0;dr<=hn;dr++)hr(dr);for(var fr=dn+2*tt+Tn,vr=1,yr=nt?[vr,vr+dn-1]:[0,fr-1],br=(0,fe.Z)(yr,2),_r=br[0],wr=br[1],Cr=_r;Cr<=wr-1;Cr++)for(var Ar=nt&&Cr===wr-1,Mr=0;Mr<_n-1;Mr++)ct=(it=Cr*_n+Mr)+1,dt=(Ar?Mr:it)+_n,vt=(Ar?Mr+1:ct)+_n,0===Cr?Zn.push(ct,vt,dt):Cr===fr-2?Zn.push(it,ct,dt):Zn.push(it,ct,dt,ct,vt,dt);return X.setIndex(Zn),X.setAttribute("position",new Iu(Wn,3)),X.setAttribute("normal",new Iu(Yn,3)),X.setAttribute("uv",new Iu(Jn,2)),X}return _createClass(jh)}(Wu),yz=function(){function p1(){_classCallCheck(this,p1)}return _createClass(p1,null,[{key:"create",value:function create(X){return this.build(this.normalizeInputs(X))}},{key:"normalizeInputs",value:function normalizeInputs(X,$){var ee,ne,ae,de=Object.assign({},null!=(ee=null==$?void 0:$.parameters)?ee:{width:100,detail:0,corner:0,cornerSides:4},X.parameters);return{parameters:Object.assign(de,{width:Math.abs(de.width),height:Math.abs(null!=(ne=de.height)?ne:de.width),depth:Math.abs(null!=(ae=de.depth)?ae:de.width)})}}},{key:"build",value:function build(X){var $=X.parameters,ee=$.width,ne=$.height,ae=$.depth,de=$.detail,fe=$.corner,Ue=$.cornerSides,je=0===de&&0!==fe?new Gz(.5*ee,fe,Ue):new Dy(.5*ee,de);return je.scale(1,ne/ee,ae/ee),Object.assign(je,{userData:At(Ct({},X),{type:"IcosahedronGeometry"})})}}]),p1}(),Gz=function(X){_inherits(qh,X);var $=_createSuper(qh);function qh(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;_classCallCheck(this,qh);var de=(1+Math.sqrt(5))/2,fe=[-1,de,0,1,de,0,-1,-de,0,1,-de,0,0,-1,de,0,1,de,0,-1,-de,0,1,-de,de,0,-1,de,0,1,-de,0,-1,-de,0,1],Ue=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],je="IcosahedronGeometry";return(X=$.call(this,fe,Ue,je,ee,ne,ae)).type=je,X}return _createClass(qh,null,[{key:"fromJSON",value:function fromJSON(X){return new qh(X.radius,X.corner,X.cornerSides)}}]),qh}(VB),$z=function(){function m1(){_classCallCheck(this,m1)}return _createClass(m1,null,[{key:"create",value:function create(X){return this.build(this.normalizeInputs(X))}},{key:"normalizeInputs",value:function normalizeInputs(X,$){var ee,ne,ae,de,fe;(null!=(ne=null==(ee=X.parameters)?void 0:ee.points)?ne:[]).forEach((function(X){Array.isArray(X)&&(X.x=X[0],X.y=X[1])}));var Ue=Object.assign({},null!=(ae=null==$?void 0:$.parameters)?ae:{width:100,segments:64,verticalSegments:64,points:[{x:0,y:-50,id:0},{x:50,y:-50,id:1},{x:50,y:50,id:2},{x:0,y:50,id:3}]},X.parameters);return{parameters:Object.assign(Ue,{width:Math.abs(Ue.width),height:Math.abs(null!=(de=Ue.height)?de:Ue.width),depth:Math.abs(null!=(fe=Ue.depth)?fe:Ue.width)})}}},{key:"build",value:function build(X){var $=X.parameters,ee=$.points,ne=$.segments,ae=$.verticalSegments,de=new yy;de.moveTo(ee[0].x,ee[0].y),de.bezierCurveTo(ee[1].x,ee[1].y,ee[2].x,ee[2].y,ee[3].x,ee[3].y);var fe=new fy(de.extractPoints(ae).shape,ne);return fe.rotateZ(Math.PI),Object.assign(fe,{userData:At(Ct({},X),{type:"LatheGeometry"})})}}]),m1}(),rN=new Ds,aN=new ru,oN=new wo,lN=function(X){_inherits(lo,X);var $=_createSuper(lo);function lo(){var X;return _classCallCheck(this,lo),(X=$.call(this)).uuid=da.generateUUID(),X.name="",X.type="Geometry",X.vertices=[],X.colors=[],X.faces=[],X.faceVertexUvs=[[]],X.morphTargets=[],X.morphNormals=[],X.skinWeights=[],X.skinIndices=[],X.lineDistances=[],X.boundingBox=null,X.boundingSphere=null,X.elementsNeedUpdate=!1,X.verticesNeedUpdate=!1,X.uvsNeedUpdate=!1,X.normalsNeedUpdate=!1,X.colorsNeedUpdate=!1,X.lineDistancesNeedUpdate=!1,X.groupsNeedUpdate=!1,X}return _createClass(lo,[{key:"applyMatrix4",value:function applyMatrix4(X){for(var $=(new ga).getNormalMatrix(X),ee=0,ne=this.vertices.length;ee<ne;ee++)this.vertices[ee].applyMatrix4(X);for(var ae=0,de=this.faces.length;ae<de;ae++){var fe=this.faces[ae];fe.normal.applyMatrix3($).normalize();for(var Ue=0,je=fe.vertexNormals.length;Ue<je;Ue++)fe.vertexNormals[Ue].applyMatrix3($).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this}},{key:"rotateX",value:function rotateX(X){return rN.makeRotationX(X),this.applyMatrix4(rN),this}},{key:"rotateY",value:function rotateY(X){return rN.makeRotationY(X),this.applyMatrix4(rN),this}},{key:"rotateZ",value:function rotateZ(X){return rN.makeRotationZ(X),this.applyMatrix4(rN),this}},{key:"translate",value:function translate(X,$,ee){return rN.makeTranslation(X,$,ee),this.applyMatrix4(rN),this}},{key:"scale",value:function scale(X,$,ee){return rN.makeScale(X,$,ee),this.applyMatrix4(rN),this}},{key:"lookAt",value:function lookAt(X){return aN.lookAt(X),aN.updateMatrix(),this.applyMatrix4(aN.matrix),this}},{key:"fromBufferGeometry",value:function fromBufferGeometry(X){var $=this,ee=null!==X.index?X.index:void 0,ne=X.attributes;if(void 0===ne.position)return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."),this;var ae=ne.position,de=ne.normal,fe=ne.color,Ue=ne.uv,je=ne.uv2;void 0!==je&&(this.faceVertexUvs[1]=[]);for(var Ke=0;Ke<ae.count;Ke++)$.vertices.push((new wo).fromBufferAttribute(ae,Ke)),void 0!==fe&&$.colors.push((new Ma).fromBufferAttribute(fe,Ke));function h(X,ee,ne,ae){var Ke=void 0===fe?[]:[$.colors[X].clone(),$.colors[ee].clone(),$.colors[ne].clone()],et=void 0===de?[]:[(new wo).fromBufferAttribute(de,X),(new wo).fromBufferAttribute(de,ee),(new wo).fromBufferAttribute(de,ne)],tt=new hN(X,ee,ne,et,Ke,ae);$.faces.push(tt),void 0!==Ue&&$.faceVertexUvs[0].push([(new va).fromBufferAttribute(Ue,X),(new va).fromBufferAttribute(Ue,ee),(new va).fromBufferAttribute(Ue,ne)]),void 0!==je&&$.faceVertexUvs[1].push([(new va).fromBufferAttribute(je,X),(new va).fromBufferAttribute(je,ee),(new va).fromBufferAttribute(je,ne)])}var et=X.groups;if(et.length>0)for(var tt=0;tt<et.length;tt++)for(var nt=et[tt],it=nt.start,ct=it,dt=it+nt.count;ct<dt;ct+=3)void 0!==ee?h(ee.getX(ct),ee.getX(ct+1),ee.getX(ct+2),nt.materialIndex):h(ct,ct+1,ct+2,nt.materialIndex);else if(void 0!==ee)for(var vt=0;vt<ee.count;vt+=3)h(ee.getX(vt),ee.getX(vt+1),ee.getX(vt+2));else for(var gt=0;gt<ae.count;gt+=3)h(gt,gt+1,gt+2);return this.computeFaceNormals(),null!==X.boundingBox&&(this.boundingBox=X.boundingBox.clone()),null!==X.boundingSphere&&(this.boundingSphere=X.boundingSphere.clone()),this}},{key:"center",value:function center(){return this.computeBoundingBox(),this.boundingBox.getCenter(oN).negate(),this.translate(oN.x,oN.y,oN.z),this}},{key:"normalize",value:function normalize(){this.computeBoundingSphere();var X=this.boundingSphere.center,$=this.boundingSphere.radius,ee=0===$?1:1/$,ne=new Ds;return ne.set(ee,0,0,-ee*X.x,0,ee,0,-ee*X.y,0,0,ee,-ee*X.z,0,0,0,1),this.applyMatrix4(ne),this}},{key:"computeFaceNormals",value:function computeFaceNormals(){for(var X=new wo,$=new wo,ee=0,ne=this.faces.length;ee<ne;ee++){var ae=this.faces[ee],de=this.vertices[ae.a],fe=this.vertices[ae.b],Ue=this.vertices[ae.c];X.subVectors(Ue,fe),$.subVectors(de,fe),X.cross($),X.normalize(),ae.normal.copy(X)}}},{key:"computeVertexNormals",value:function computeVertexNormals(){for(var X=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],$=new Array(this.vertices.length),ee=0,ne=this.vertices.length;ee<ne;ee++)$[ee]=new wo;if(X)for(var ae=new wo,de=new wo,fe=0,Ue=this.faces.length;fe<Ue;fe++){var je=this.faces[fe],Ke=this.vertices[je.a],et=this.vertices[je.b],tt=this.vertices[je.c];ae.subVectors(tt,et),de.subVectors(Ke,et),ae.cross(de),$[je.a].add(ae),$[je.b].add(ae),$[je.c].add(ae)}else{this.computeFaceNormals();for(var nt=0,it=this.faces.length;nt<it;nt++){var ct=this.faces[nt];$[ct.a].add(ct.normal),$[ct.b].add(ct.normal),$[ct.c].add(ct.normal)}}for(var dt=0,vt=this.vertices.length;dt<vt;dt++)$[dt].normalize();for(var gt=0,yt=this.faces.length;gt<yt;gt++){var _t=this.faces[gt],wt=_t.vertexNormals;3===wt.length?(wt[0].copy($[_t.a]),wt[1].copy($[_t.b]),wt[2].copy($[_t.c])):(wt[0]=$[_t.a].clone(),wt[1]=$[_t.b].clone(),wt[2]=$[_t.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}},{key:"computeFlatVertexNormals",value:function computeFlatVertexNormals(){this.computeFaceNormals();for(var X=0,$=this.faces.length;X<$;X++){var ee=this.faces[X],ne=ee.vertexNormals;3===ne.length?(ne[0].copy(ee.normal),ne[1].copy(ee.normal),ne[2].copy(ee.normal)):(ne[0]=ee.normal.clone(),ne[1]=ee.normal.clone(),ne[2]=ee.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)}},{key:"computeMorphNormals",value:function computeMorphNormals(){for(var X=0,$=this.faces.length;X<$;X++){var ee=this.faces[X];ee.__originalFaceNormal?ee.__originalFaceNormal.copy(ee.normal):ee.__originalFaceNormal=ee.normal.clone(),ee.__originalVertexNormals||(ee.__originalVertexNormals=[]);for(var ne=0,ae=ee.vertexNormals.length;ne<ae;ne++)ee.__originalVertexNormals[ne]?ee.__originalVertexNormals[ne].copy(ee.vertexNormals[ne]):ee.__originalVertexNormals[ne]=ee.vertexNormals[ne].clone()}var de=new lo;de.faces=this.faces;for(var fe=0,Ue=this.morphTargets.length;fe<Ue;fe++){if(!this.morphNormals[fe]){this.morphNormals[fe]={},this.morphNormals[fe].faceNormals=[],this.morphNormals[fe].vertexNormals=[];for(var je=this.morphNormals[fe].faceNormals,Ke=this.morphNormals[fe].vertexNormals,et=0,tt=this.faces.length;et<tt;et++){var nt=new wo,it={a:new wo,b:new wo,c:new wo};je.push(nt),Ke.push(it)}}var ct=this.morphNormals[fe];de.vertices=this.morphTargets[fe].vertices,de.computeFaceNormals(),de.computeVertexNormals();for(var dt=0,vt=this.faces.length;dt<vt;dt++){var gt=this.faces[dt],yt=ct.faceNormals[dt],_t=ct.vertexNormals[dt];yt.copy(gt.normal),_t.a.copy(gt.vertexNormals[0]),_t.b.copy(gt.vertexNormals[1]),_t.c.copy(gt.vertexNormals[2])}}for(var wt=0,St=this.faces.length;wt<St;wt++){var Ct=this.faces[wt];Ct.normal=Ct.__originalFaceNormal,Ct.vertexNormals=Ct.__originalVertexNormals}}},{key:"computeBoundingBox",value:function computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Mo),this.boundingBox.setFromPoints(this.vertices)}},{key:"computeBoundingSphere",value:function computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new _s),this.boundingSphere.setFromPoints(this.vertices)}},{key:"merge",value:function merge(X,$){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(X&&X.isGeometry){var ne,ae=this.vertices.length,de=this.vertices,fe=X.vertices,Ue=this.faces,je=X.faces,Ke=this.colors,et=X.colors;void 0!==$&&(ne=(new ga).getNormalMatrix($));for(var tt=0,nt=fe.length;tt<nt;tt++){var it=fe[tt].clone();void 0!==$&&it.applyMatrix4($),de.push(it)}for(var ct=0,dt=et.length;ct<dt;ct++)Ke.push(et[ct].clone());for(var vt=0,gt=je.length;vt<gt;vt++){var yt=je[vt],_t=void 0,wt=void 0,St=yt.vertexNormals,Ct=yt.vertexColors,At=new hN(yt.a+ae,yt.b+ae,yt.c+ae);At.normal.copy(yt.normal),void 0!==ne&&At.normal.applyMatrix3(ne).normalize();for(var Et=0,Rt=St.length;Et<Rt;Et++)_t=St[Et].clone(),void 0!==ne&&_t.applyMatrix3(ne).normalize(),At.vertexNormals.push(_t);At.color.copy(yt.color);for(var Bt=0,Ht=Ct.length;Bt<Ht;Bt++)wt=Ct[Bt],At.vertexColors.push(wt.clone());At.materialIndex=yt.materialIndex+ee,Ue.push(At)}for(var Wt=0,qt=X.faceVertexUvs.length;Wt<qt;Wt++){var Zt=X.faceVertexUvs[Wt];void 0===this.faceVertexUvs[Wt]&&(this.faceVertexUvs[Wt]=[]);for(var Xt=0,Qt=Zt.length;Xt<Qt;Xt++){for(var en=Zt[Xt],tn=[],un=0,hn=en.length;un<hn;un++)tn.push(en[un].clone());this.faceVertexUvs[Wt].push(tn)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",X)}},{key:"mergeMesh",value:function mergeMesh(X){X&&X.isMesh?(X.matrixAutoUpdate&&X.updateMatrix(),this.merge(X.geometry,X.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",X)}},{key:"mergeVertices",value:function mergeVertices(){for(var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,$={},ee=[],ne=[],ae=Math.pow(10,X),de=0,fe=this.vertices.length;de<fe;de++){var Ue=this.vertices[de],je=Math.round(Ue.x*ae)+"_"+Math.round(Ue.y*ae)+"_"+Math.round(Ue.z*ae);void 0===$[je]?($[je]=de,ee.push(this.vertices[de]),ne[de]=ee.length-1):ne[de]=ne[$[je]]}for(var Ke=[],et=0,tt=this.faces.length;et<tt;et++){var nt=this.faces[et];nt.a=ne[nt.a],nt.b=ne[nt.b],nt.c=ne[nt.c];for(var it=[nt.a,nt.b,nt.c],ct=0;ct<3;ct++)if(it[ct]===it[(ct+1)%3]){Ke.push(et);break}}for(var dt=Ke.length-1;dt>=0;dt--){var vt=Ke[dt];this.faces.splice(vt,1);for(var gt=0,yt=this.faceVertexUvs.length;gt<yt;gt++)this.faceVertexUvs[gt].splice(vt,1)}var _t=this.vertices.length-ee.length;return this.vertices=ee,_t}},{key:"setFromPoints",value:function setFromPoints(X){this.vertices=[];for(var $=0,ee=X.length;$<ee;$++){var ne=X[$];this.vertices.push(new wo(ne.x,ne.y,ne.z||0))}return this}},{key:"sortFacesByMaterialIndex",value:function sortFacesByMaterialIndex(){for(var X=this.faces,$=X.length,ee=0;ee<$;ee++)X[ee]._id=ee;X.sort((function r(X,$){return X.materialIndex-$.materialIndex}));var ne,ae,de=this.faceVertexUvs[0],fe=this.faceVertexUvs[1];de&&de.length===$&&(ne=[]),fe&&fe.length===$&&(ae=[]);for(var Ue=0;Ue<$;Ue++){var je=X[Ue]._id;ne&&ne.push(de[je]),ae&&ae.push(fe[je])}ne&&(this.faceVertexUvs[0]=ne),ae&&(this.faceVertexUvs[1]=ae)}},{key:"toJSON",value:function toJSON(){var X={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(X.uuid=this.uuid,X.type=this.type,""!==this.name&&(X.name=this.name),void 0!==this.parameters){var $=this.parameters;for(var ee in $)void 0!==$[ee]&&(X[ee]=$[ee]);return X}for(var ne=[],ae=0;ae<this.vertices.length;ae++){var de=this.vertices[ae];ne.push(de.x,de.y,de.z)}for(var fe=[],Ue=[],je={},Ke=[],et={},tt=[],nt={},it=0;it<this.faces.length;it++){var ct=this.faces[it],dt=void 0!==this.faceVertexUvs[0][it],vt=ct.normal.length()>0,gt=ct.vertexNormals.length>0,yt=1!==ct.color.r||1!==ct.color.g||1!==ct.color.b,_t=ct.vertexColors.length>0,wt=0;if(wt=h(wt,0,0),wt=h(wt,1,!0),wt=h(wt,2,!1),wt=h(wt,3,dt),wt=h(wt,4,vt),wt=h(wt,5,gt),wt=h(wt,6,yt),wt=h(wt,7,_t),fe.push(wt),fe.push(ct.a,ct.b,ct.c),fe.push(ct.materialIndex),dt){var St=this.faceVertexUvs[0][it];fe.push(d(St[0]),d(St[1]),d(St[2]))}if(vt&&fe.push(u(ct.normal)),gt){var Ct=ct.vertexNormals;fe.push(u(Ct[0]),u(Ct[1]),u(Ct[2]))}if(yt&&fe.push(f(ct.color)),_t){var At=ct.vertexColors;fe.push(f(At[0]),f(At[1]),f(At[2]))}}function h(X,$,ee){return ee?X|1<<$:X&~(1<<$)}function u(X){var $=X.x.toString()+X.y.toString()+X.z.toString();return void 0!==je[$]||(je[$]=Ue.length/3,Ue.push(X.x,X.y,X.z)),je[$]}function f(X){var $=X.r.toString()+X.g.toString()+X.b.toString();return void 0!==et[$]||(et[$]=Ke.length,Ke.push(X.getHex())),et[$]}function d(X){var $=X.x.toString()+X.y.toString();return void 0!==nt[$]||(nt[$]=tt.length/2,tt.push(X.x,X.y)),nt[$]}return X.data={},X.data.vertices=ne,X.data.normals=Ue,Ke.length>0&&(X.data.colors=Ke),tt.length>0&&(X.data.uvs=[tt]),X.data.faces=fe,X}},{key:"clone",value:function clone(){return(new lo).copy(this)}},{key:"copy",value:function copy(X){this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=X.name;for(var $=X.vertices,ee=0,ne=$.length;ee<ne;ee++)this.vertices.push($[ee].clone());for(var ae=X.colors,de=0,fe=ae.length;de<fe;de++)this.colors.push(ae[de].clone());for(var Ue=X.faces,je=0,Ke=Ue.length;je<Ke;je++)this.faces.push(Ue[je].clone());for(var et=0,tt=X.faceVertexUvs.length;et<tt;et++){var nt=X.faceVertexUvs[et];void 0===this.faceVertexUvs[et]&&(this.faceVertexUvs[et]=[]);for(var it=0,ct=nt.length;it<ct;it++){for(var dt=nt[it],vt=[],gt=0,yt=dt.length;gt<yt;gt++){var _t=dt[gt];vt.push(_t.clone())}this.faceVertexUvs[et].push(vt)}}for(var wt=X.morphTargets,St=0,Ct=wt.length;St<Ct;St++){var At={};if(At.name=wt[St].name,void 0!==wt[St].vertices){At.vertices=[];for(var Et=0,Rt=wt[St].vertices.length;Et<Rt;Et++)At.vertices.push(wt[St].vertices[Et].clone())}if(void 0!==wt[St].normals){At.normals=[];for(var Bt=0,Ht=wt[St].normals.length;Bt<Ht;Bt++)At.normals.push(wt[St].normals[Bt].clone())}this.morphTargets.push(At)}for(var Wt=X.morphNormals,qt=0,Zt=Wt.length;qt<Zt;qt++){var Xt={};if(void 0!==Wt[qt].vertexNormals){Xt.vertexNormals=[];for(var Qt=0,en=Wt[qt].vertexNormals.length;Qt<en;Qt++){var tn=Wt[qt].vertexNormals[Qt],un={};un.a=tn.a.clone(),un.b=tn.b.clone(),un.c=tn.c.clone(),Xt.vertexNormals.push(un)}}if(void 0!==Wt[qt].faceNormals){Xt.faceNormals=[];for(var hn=0,dn=Wt[qt].faceNormals.length;hn<dn;hn++)Xt.faceNormals.push(Wt[qt].faceNormals[hn].clone())}this.morphNormals.push(Xt)}for(var mn=X.skinWeights,gn=0,_n=mn.length;gn<_n;gn++)this.skinWeights.push(mn[gn].clone());for(var wn=X.skinIndices,Sn=0,Cn=wn.length;Sn<Cn;Sn++)this.skinIndices.push(wn[Sn].clone());for(var An=X.lineDistances,Mn=0,En=An.length;Mn<En;Mn++)this.lineDistances.push(An[Mn]);var Tn=X.boundingBox;null!==Tn&&(this.boundingBox=Tn.clone());var Pn=X.boundingSphere;return null!==Pn&&(this.boundingSphere=Pn.clone()),this.elementsNeedUpdate=X.elementsNeedUpdate,this.verticesNeedUpdate=X.verticesNeedUpdate,this.uvsNeedUpdate=X.uvsNeedUpdate,this.normalsNeedUpdate=X.normalsNeedUpdate,this.colorsNeedUpdate=X.colorsNeedUpdate,this.lineDistancesNeedUpdate=X.lineDistancesNeedUpdate,this.groupsNeedUpdate=X.groupsNeedUpdate,this}},{key:"toBufferGeometry",value:function toBufferGeometry(){var X=(new uN).fromGeometry(this),$=new Wu,ee=new Float32Array(3*X.vertices.length);if($.setAttribute("position",new Lu(ee,3).copyVector3sArray(X.vertices)),X.normals.length>0){var ne=new Float32Array(3*X.normals.length);$.setAttribute("normal",new Lu(ne,3).copyVector3sArray(X.normals))}if(X.colors.length>0){var ae=new Float32Array(3*X.colors.length);$.setAttribute("color",new Lu(ae,3).copyColorsArray(X.colors))}if(X.uvs.length>0){var de=new Float32Array(2*X.uvs.length);$.setAttribute("uv",new Lu(de,2).copyVector2sArray(X.uvs))}if(X.uvs2.length>0){var fe=new Float32Array(2*X.uvs2.length);$.setAttribute("uv2",new Lu(fe,2).copyVector2sArray(X.uvs2))}for(var Ue in $.groups=X.groups,X.morphTargets){for(var je=[],Ke=X.morphTargets[Ue],et=0,tt=Ke.length;et<tt;et++){var nt=Ke[et],it=new Iu(3*nt.data.length,3);it.name=nt.name,je.push(it.copyVector3sArray(nt.data))}$.morphAttributes[Ue]=je}if(X.skinIndices.length>0){var ct=new Iu(4*X.skinIndices.length,4);$.setAttribute("skinIndex",ct.copyVector4sArray(X.skinIndices))}if(X.skinWeights.length>0){var dt=new Iu(4*X.skinWeights.length,4);$.setAttribute("skinWeight",dt.copyVector4sArray(X.skinWeights))}return null!==X.boundingSphere&&($.boundingSphere=X.boundingSphere.clone()),null!==X.boundingBox&&($.boundingBox=X.boundingBox.clone()),$}},{key:"computeTangents",value:function computeTangents(){console.error("THREE.Geometry: .computeTangents() has been removed.")}},{key:"computeLineDistances",value:function computeLineDistances(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}},{key:"applyMatrix",value:function applyMatrix(X){return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(X)}},{key:"dispose",value:function dispose(){this.dispatchEvent({type:"dispose"})}}],[{key:"createBufferGeometryFromObject",value:function createBufferGeometryFromObject(X){var $=new Wu,ee=X.geometry;if(X.isPoints||X.isLine){var ne=new Iu(3*ee.vertices.length,3),ae=new Iu(3*ee.colors.length,3);if($.setAttribute("position",ne.copyVector3sArray(ee.vertices)),$.setAttribute("color",ae.copyColorsArray(ee.colors)),ee.lineDistances&&ee.lineDistances.length===ee.vertices.length){var de=new Iu(ee.lineDistances.length,1);$.setAttribute("lineDistance",de.copyArray(ee.lineDistances))}null!==ee.boundingSphere&&($.boundingSphere=ee.boundingSphere.clone()),null!==ee.boundingBox&&($.boundingBox=ee.boundingBox.clone())}else X.isMesh&&($=ee.toBufferGeometry());return $}}]),lo}(aa);lN.prototype.isGeometry=!0;var uN=function(){function cv(){_classCallCheck(this,cv),this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}return _createClass(cv,[{key:"computeGroups",value:function computeGroups(X){var $,ee,ne,ae=[],de=X.faces;for(ee=0;ee<de.length;ee++){var fe=de[ee];fe.materialIndex!==ne&&(ne=fe.materialIndex,void 0!==$&&($.count=3*ee-$.start,ae.push($)),$={start:3*ee,materialIndex:ne})}void 0!==$&&($.count=3*ee-$.start,ae.push($)),this.groups=ae}},{key:"fromGeometry",value:function fromGeometry(X){var $,ee=X.faces,ne=X.vertices,ae=X.faceVertexUvs,de=ae[0]&&ae[0].length>0,fe=ae[1]&&ae[1].length>0,Ue=X.morphTargets,je=Ue.length;if(je>0){$=[];for(var Ke=0;Ke<je;Ke++)$[Ke]={name:Ue[Ke].name,data:[]};this.morphTargets.position=$}var et,tt=X.morphNormals,nt=tt.length;if(nt>0){et=[];for(var it=0;it<nt;it++)et[it]={name:tt[it].name,data:[]};this.morphTargets.normal=et}var ct=X.skinIndices,dt=X.skinWeights,vt=ct.length===ne.length,gt=dt.length===ne.length;ne.length>0&&0===ee.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(var yt=0;yt<ee.length;yt++){var _t=ee[yt];this.vertices.push(ne[_t.a],ne[_t.b],ne[_t.c]);var wt=_t.vertexNormals;if(3===wt.length)this.normals.push(wt[0],wt[1],wt[2]);else{var St=_t.normal;this.normals.push(St,St,St)}var Ct=_t.vertexColors;if(3===Ct.length)this.colors.push(Ct[0],Ct[1],Ct[2]);else{var At=_t.color;this.colors.push(At,At,At)}if(!0===de){var Et=ae[0][yt];void 0!==Et?this.uvs.push(Et[0],Et[1],Et[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",yt),this.uvs.push(new va,new va,new va))}if(!0===fe){var Rt=ae[1][yt];void 0!==Rt?this.uvs2.push(Rt[0],Rt[1],Rt[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",yt),this.uvs2.push(new va,new va,new va))}for(var Bt=0;Bt<je;Bt++){var Ht=Ue[Bt].vertices;$[Bt].data.push(Ht[_t.a],Ht[_t.b],Ht[_t.c])}for(var Wt=0;Wt<nt;Wt++){var qt=tt[Wt].vertexNormals[yt];et[Wt].data.push(qt.a,qt.b,qt.c)}vt&&this.skinIndices.push(ct[_t.a],ct[_t.b],ct[_t.c]),gt&&this.skinWeights.push(dt[_t.a],dt[_t.b],dt[_t.c])}return this.computeGroups(X),this.verticesNeedUpdate=X.verticesNeedUpdate,this.normalsNeedUpdate=X.normalsNeedUpdate,this.colorsNeedUpdate=X.colorsNeedUpdate,this.uvsNeedUpdate=X.uvsNeedUpdate,this.groupsNeedUpdate=X.groupsNeedUpdate,null!==X.boundingSphere&&(this.boundingSphere=X.boundingSphere.clone()),null!==X.boundingBox&&(this.boundingBox=X.boundingBox.clone()),this}}]),cv}(),hN=function(){function Nl(X,$,ee,ne,ae){var de=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;_classCallCheck(this,Nl),this.a=X,this.b=$,this.c=ee,this.normal=ne&&ne.isVector3?ne:new wo,this.vertexNormals=Array.isArray(ne)?ne:[],this.color=ae&&ae.isColor?ae:new Ma,this.vertexColors=Array.isArray(ae)?ae:[],this.materialIndex=de}return _createClass(Nl,[{key:"clone",value:function clone(){return(new this.constructor).copy(this)}},{key:"copy",value:function copy(X){this.a=X.a,this.b=X.b,this.c=X.c,this.normal.copy(X.normal),this.color.copy(X.color),this.materialIndex=X.materialIndex;for(var $=0,ee=X.vertexNormals.length;$<ee;$++)this.vertexNormals[$]=X.vertexNormals[$].clone();for(var ne=0,ae=X.vertexColors.length;ne<ae;ne++)this.vertexColors[ne]=X.vertexColors[ne].clone();return this}}]),Nl}(),vN=["a","b","c"];function sF(X,$){switch($){case"c":return X.c;case"b":return X.b;default:return X.a}}function hv(X,$,ee){var ne=Math.min(X,$)+"_"+Math.max(X,$);return ee.get(ne)}function uv(X,$,ee,ne,ae,de){var fe,Ue=Math.min(X,$),je=Math.max(X,$),Ke=Ue+"_"+je;ne.has(Ke)?fe=ne.get(Ke):(fe={a:ee[Ue],b:ee[je],newEdge:null,faces:[]},ne.set(Ke,fe));fe.faces.push(ae),de[X].edges.push(fe),de[$].edges.push(fe)}function mp(X,$,ee,ne,ae){X.push(new hN($,ee,ne,void 0,void 0,ae))}function Ol(X,$){return Math.abs($-X)/2+Math.min(X,$)}function gp(X,$,ee,ne){X.push([$.clone(),ee.clone(),ne.clone()])}var gN=function(){function yp(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;_classCallCheck(this,yp),this.subdivisions=X}return _createClass(yp,[{key:"modify",value:function modify(X){(X=X instanceof Wu?(new lN).fromBufferGeometry(X):X.clone()).mergeVertices();for(var $=this.subdivisions;$-- >0;)this._smooth(X);return X.computeFaceNormals(),X.computeVertexNormals(),X}},{key:"_smooth",value:function _smooth(X){var $,ee,ne,ae,de,fe=new wo,Ue=X.vertices,je=X.faces,Ke=X.faceVertexUvs[0],et=void 0!==Ke&&Ke.length>0,tt=[],nt=new Map;!function oF(X,$,ee,ne){var ae,de,fe;for(ae=0,de=X.length;ae<de;ae++)ee[ae]={edges:[]};for(ae=0,de=$.length;ae<de;ae++)uv((fe=$[ae]).a,fe.b,X,ne,fe,ee),uv(fe.b,fe.c,X,ne,fe,ee),uv(fe.c,fe.a,X,ne,fe,ee)}(Ue,je,tt,nt);for(var it,ct,dt,vt,gt,yt,_t,wt=[],St=0,Ct=Array.from(nt.keys());St<Ct.length;St++){var At=Ct[St];for(ct=nt.get(At),dt=new wo,gt=3/8,yt=1/8,2!=(_t=ct.faces.length)&&(gt=.5,yt=0),dt.addVectors(ct.a,ct.b).multiplyScalar(gt),fe.set(0,0,0),ae=0;ae<_t;ae++){for(vt=ct.faces[ae],de=0;de<3&&((it=Ue[sF(vt,vN[de])])===ct.a||it===ct.b);de++);it&&fe.add(it)}fe.multiplyScalar(yt),dt.add(fe),ct.newEdge=wt.length,wt.push(dt)}var Et,Rt,Bt,Ht,Wt,qt,Zt,Xt=[];for(ee=0,ne=Ue.length;ee<ne;ee++){for(qt=Ue[ee],3==($=(Wt=tt[ee].edges).length)?Et=3/16:$>3&&(Et=3/(8*$)),Rt=1-$*Number(Et),Bt=Et,$<=2&&(2==$&&(Rt=3/4,Bt=1/8)),Zt=qt.clone().multiplyScalar(Rt),fe.set(0,0,0),ae=0;ae<$;ae++)it=(Ht=Wt[ae]).a!==qt?Ht.a:Ht.b,fe.add(it);fe.multiplyScalar(Number(Bt)),Zt.add(fe),Xt.push(Zt)}var Qt,en,tn,un,hn,dn,mn,gn=Xt.concat(wt),_n=Xt.length,wn=[],Sn=[],Cn=new va,An=new va,Mn=new va;for(ee=0,ne=je.length;ee<ne;ee++)vt=je[ee],mp(wn,Qt=Number(hv(vt.a,vt.b,nt).newEdge)+_n,en=Number(hv(vt.b,vt.c,nt).newEdge)+_n,tn=Number(hv(vt.c,vt.a,nt).newEdge)+_n,vt.materialIndex),mp(wn,vt.a,Qt,tn,vt.materialIndex),mp(wn,vt.b,en,Qt,vt.materialIndex),mp(wn,vt.c,tn,en,vt.materialIndex),et&&(hn=(un=Ke[ee])[0],dn=un[1],mn=un[2],Cn.set(Ol(hn.x,dn.x),Ol(hn.y,dn.y)),An.set(Ol(dn.x,mn.x),Ol(dn.y,mn.y)),Mn.set(Ol(hn.x,mn.x),Ol(hn.y,mn.y)),gp(Sn,Cn,An,Mn),gp(Sn,hn,Cn,Mn),gp(Sn,dn,An,Cn),gp(Sn,mn,Mn,An));X.vertices=gn,X.faces=wn,et&&(X.faceVertexUvs[0]=Sn)}}]),yp}(),yN=new wo,bN=function(){function g1(){_classCallCheck(this,g1)}return _createClass(g1,null,[{key:"create",value:function create(X){return this.build(this.normalizeInputs(X))}},{key:"normalizeInputs",value:function normalizeInputs(X,$){var ee,ne,ae,de=null!=(ne=null!=(ee=X.geometry)?ee:null==$?void 0:$.geometry)?ne:(new Wu).copy(new Rh(100,100,100));void 0===$?(de.computeBoundingBox(),de.boundingBox.getSize(yN),ae={width:yN.x,height:yN.y,depth:yN.z,subdivisions:0}):ae=$.parameters;var fe=Ct(Ct({},ae),X.parameters);return{parameters:{width:Math.abs(fe.width),height:Math.abs(fe.height),depth:Math.abs(fe.depth),subdivisions:Math.abs(fe.subdivisions)},geometry:de}}},{key:"build",value:function build(X){var $,ee=X.parameters,ne=ee.width,ae=ee.height,de=ee.depth,fe=ee.subdivisions,Ue=null!=($=X.geometry)?$:(new Wu).copy(new Rh(100,100,100)),je=Ue.userData.parameters;void 0===je?(Ue.computeBoundingBox(),Ue.boundingBox.getSize(yN)):yN.set(je.width,je.height,je.depth),(ne!==yN.x||ae!==yN.y||de!==yN.z)&&Ue.scale(0===yN.x?1:ne/yN.x,0===yN.y?1:ae/yN.y,0===yN.z?1:de/yN.z);var Ke=Ue.originalGeometry;return fe>0?(void 0===Ke||(null==je?void 0:je.subdivisions)!==fe)&&(void 0===Ke&&(Ke=Ue),Ue=new gN(fe).modify(Ke).toBufferGeometry()):(void 0!==Ke&&(Ue=Ke),Ke=void 0,void 0===Ue.getAttribute("normal")&&Ue.computeVertexNormals()),void 0!==Ke&&Object.assign(Ue,{originalGeometry:Ke}),delete X.geometry,Object.assign(Ue,{userData:At(Ct({},X),{type:"NonParametricGeometry"})})}},{key:"loadFromUrl",value:function loadFromUrl(X,$,ee){var ne=this;new jx(ee).load(X,(function(X){var ee=ne.normalizeInputs({geometry:X});X.boundingBox.getSize(yN);var ae=100/yN.x;Object.assign(ee.parameters,{width:100,height:yN.y*ae,depth:yN.z*ae}),$(ne.build(ee))}))}}]),g1}(),xN=function(){function y1(){_classCallCheck(this,y1)}return _createClass(y1,null,[{key:"create",value:function create(X){return this.build(this.normalizeInputs(X))}},{key:"normalizeInputs",value:function normalizeInputs(X,$){var ee,ne,ae,de=Object.assign({},null!=(ee=null==$?void 0:$.parameters)?ee:{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:3},X.parameters);return{shape:X.shape&&X.shape instanceof AI?X.shape:new AI,parameters:Object.assign(de,{width:Math.abs(de.width),height:Math.abs(null!=(ne=de.height)?ne:de.width),depth:Math.abs(null!=(ae=de.depth)?ae:0)})}}},{key:"build",value:function build(X){for(var $=X.parameters,ee=$.width,ne=$.height,ae=$.spikes,de=$.cornerRadius,fe=$.depth,Ue=$.extrudeBevelSize,je=$.extrudeBevelSegments,Ke=X.shape,et=.5*ee,tt=.5*ne,nt=2*Math.PI/ae,it=0;it<ae;it++){var ct=nt*it,dt=0+Math.sin(ct)*et,vt=0+Math.cos(ct)*tt;Ke.addPoint(Ke.createPoint(dt,vt))}Ke.isClosed=!0;for(var gt=0,yt=Ke.points.length;gt<yt;gt++)Ke.points[gt].roundness=de;Ke.roundness=de,Ke.update();var _t=lz.create({shape:Ke,parameters:{roundness:de,depth:fe,extrudeBevelSize:Ue,extrudeBevelSegments:je}});return Object.assign(_t,{userData:At(Ct({},X),{type:"PolygonGeometry"})})}}]),y1}(),wN=function(){function v1(){_classCallCheck(this,v1)}return _createClass(v1,null,[{key:"create",value:function create(X){return this.build(this.normalizeInputs(X))}},{key:"normalizeInputs",value:function normalizeInputs(X,$){var ee,ne,ae,de=Object.assign({},null!=(ee=null==$?void 0:$.parameters)?ee:{width:100,radialSegments:4,heightSegments:1,cornerRadius:0,cornerSegments:8,openEnded:!1},X.parameters);return{parameters:Object.assign(de,{width:Math.abs(de.width),height:Math.abs(null!=(ne=de.height)?ne:de.width),depth:Math.abs(null!=(ae=de.depth)?ae:de.width)})}}},{key:"build",value:function build(X){var $=X.parameters,ee=$.width,ne=$.height,ae=$.depth,de=$.radialSegments,fe=$.heightSegments,Ue=$.openEnded,je=$.cornerRadius,Ke=$.cornerSegments,et=new SN(.5*ee,ne,de,fe,Ue,je,Ke);return et.scale(1,1,ae/ee),Object.assign(et,{userData:At(Ct({},X),{type:"PyramidGeometry"})})}}]),v1}();function Yh(X,$,ee){ee.x=X.x*$.x,ee.y=X.y,ee.z=X.x*$.y}function fv(X,$,ee,ne,ae,de){var fe=$.clone().sub(X),Ue=ee.clone().sub(X),je=fe.angleTo(Ue);if(fe.normalize(),Ue.normalize(),ne===ae){var Ke=fe.add(Ue).normalize();de.copy(X).addScaledVector(Ke,ne/Math.sin(je/2))}else{var et=fe.angleTo(Ue);de.copy(X),de.addScaledVector(fe,ae/Math.sin(et)),de.addScaledVector(Ue,ne/Math.sin(et))}}function aF(X,$,ee){var ne=X.clone().sub($),ae=ee.clone().sub($);return ne.projectOnVector(ae),ne.add($)}var SN=function(X){_inherits(dv,X);var $=_createSuper(dv);function dv(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,de=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,Ue=arguments.length>4&&void 0!==arguments[4]&&arguments[4],je=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,Ke=arguments.length>6&&void 0!==arguments[6]?arguments[6]:4;_classCallCheck(this,dv),X=$.call(this),ae=Math.floor(Math.max(3,ae)),de=Math.floor(de),Ke=Math.floor(Ke);var et,tt=[],nt=[],it=[],ct=[],dt=0,vt=ne/2,gt=Math.PI/ae,yt=ee*Math.cos(Math.PI/ae),_t=2*Math.PI/ae,wt=(ae-2)*Math.PI/ae,St=Math.PI-wt,Ct=new wo(0,-vt,0),At=new wo(0,vt,0),Et=new va(ee,-vt),Rt=new va(yt,-vt),Bt=new va(0,At.y).sub(Rt),Ht=new va(0,At.y).sub(Et),Wt=new va(Bt.y,-Bt.x).normalize(),qt=new va(Ht.y,-Ht.x).normalize(),Zt=ee*Math.cos(Math.PI/ae)*Math.tan((Math.PI-Bt.angle())/2)-1e-8;je=Math.min(je,Zt);var Xt=new wo(Wt.x,Wt.y,0),Qt=new wo(Math.cos(_t)*Xt.x,Xt.y,Math.sin(_t)*Xt.x);et=Xt.angleTo(Qt);var en=je/Math.tan((Math.PI-Bt.angle())/2),tn=je/Math.tan((Math.PI-et)/2),un=new wo;if(!Ue){nt.push(Ct.x,Ct.y,Ct.z),it.push(0,-1,0),ct.push(0,0);var hn=dt++,dn=[],mn=Et.clone(),gn=en/Math.cos(Math.PI/ae);mn.x-=gn;for(var _n=0;_n<ae;_n++){var wn=_n/ae*Math.PI*2+gt,Sn=new va(Math.sin(wn),Math.cos(wn));Yh(mn,Sn,un),nt.push(un.x,un.y,un.z),it.push(0,-1,0),ct.push(0,0),dn.push(dt++)}for(var Cn=0;Cn<dn.length;Cn++)tt.push(dn[Cn],hn,dn[(Cn+1)%dn.length])}for(var An=[],Mn=new wo,En=new wo,Tn=new wo,Pn=new wo,Dn=new wo,Ln=new wo,On=0;On<ae;On++){var In=On/ae*Math.PI*2+gt,Fn=(On+.5)/ae*Math.PI*2+gt,Wn=(On+1)/ae*Math.PI*2+gt,Yn=new va(Math.sin(In),Math.cos(In)),Jn=new va(Math.sin(Fn),Math.cos(Fn)),Zn=new va(Math.sin(Wn),Math.cos(Wn));Yh(Et,Yn,En),Yh(Et,Zn,Tn),Yh(Wt,Jn,Mn),fv(At,En,Tn,tn,tn,Pn),nt.push(Pn.x,Pn.y,Pn.z),fv(En,At,Tn,tn,en,Dn),nt.push(Dn.x,Dn.y,Dn.z),fv(Tn,En,At,en,tn,Ln),nt.push(Ln.x,Ln.y,Ln.z),it.push(Mn.x,Mn.y,Mn.z),it.push(Mn.x,Mn.y,Mn.z),it.push(Mn.x,Mn.y,Mn.z),ct.push(0,0),ct.push(0,0),ct.push(0,0);var Kn=dt++,$n=dt++,nr=dt++;if(tt.push(Kn,$n,nr),je>0){var ir=En.clone().add(Tn).multiplyScalar(.5),ar=At.clone().sub(ir).normalize(),or=Ct.clone().sub(ir).normalize().add(ar).normalize().multiplyScalar(-1),hr=Ln.clone().sub(Dn);Q(ir,hr,or,Bt.angle());var dr=void 0,fr=void 0,vr=new wo;Yh(qt,Zn,vr);var yr=Ln.clone().add(Pn).multiplyScalar(.5);yr=aF(yr,Tn,At);var br=Ln.clone().sub(Pn),_r=Q(yr,br,vr,et,Pn.y),wr=(0,fe.Z)(_r,2);dr=wr[0],fr=wr[1];var Cr=dr,Ar=Cr.clone().setY(0).normalize(),Mr=new wo(0,-1,0),Er=Ar.clone().cross(Mr);Y(Cr,Ar,Mr,Er),An.concat(fr);var Tr=Bt.angle(),Pr=Math.PI-Tr,Dr=At.clone();Dr.y-=je/Math.sin(Tr-Math.PI/2);for(var Br=new wo,Ir=[],zr=0;zr<Ke;zr++){for(var Fr=[],Vr=Math.PI/2-Pr*zr/Ke,qr=Math.cos(Vr),Xr=Math.sin(Vr),Kr=Fn,ei=0;ei<=zr;ei++){var li=Math.cos(Kr),Ei=Math.sin(Kr);Mn.x=qr*Ei,Mn.y=Xr,Mn.z=qr*li,Br.copy(Dr).addScaledVector(Mn,je),nt.push(Br.x,Br.y,Br.z),it.push(Mn.x,Mn.y,Mn.z),ct.push(0,0),Fr.push(dt++),Kr+=2*Math.PI/zr/ae}Ir.push(Fr)}fr.reverse(),Ir.push(fr);for(var Di=Ir.length-1,Yi=0;Yi<Di;Yi++){var Zi=Ir[Yi],$i=Ir[Yi+1],aa=Zi.length-1;tt.push($i[1],Zi[0],$i[0]);for(var sa=1;sa<=aa;sa++)tt.push(Zi[sa],Zi[sa-1],$i[sa]),tt.push($i[sa+1],Zi[sa],$i[sa])}}}function Q(X,$,ee,ne,ae){var de=-ne/2,fe=(Math.PI-ne)/2,Ue=$.clone().normalize().cross(ee);X.addScaledVector(ee,-je/Math.sin(fe));for(var et=new wo,vt=new wo,gt=dt,yt=[],_t=0;_t<=Ke;_t++){var wt=de+_t/Ke*ne;vt.set(0,0,0),vt.addScaledVector(Ue,Math.sin(wt)),vt.addScaledVector(ee,Math.cos(wt));for(var St=0;St<=1;St++){var Ct=St/1-.5;if(et.copy(X),et.addScaledVector($,Ct),et.addScaledVector(vt,je),null!=ae){var At=Math.max(0,et.y-ae);et.addScaledVector($,-At/$.y)}nt.push(et.x,et.y,et.z),it.push(vt.x,vt.y,vt.z),ct.push(0,0),0===St&&yt.push(dt),dt++}}for(var Et=0;Et<Ke;Et++)for(var Rt=0;Rt<1;Rt++){var Bt=gt+Rt+2*Et,Ht=Bt+2,Wt=Ht+1,qt=Bt+1;tt.push(Bt,Ht,qt),tt.push(Ht,Wt,qt)}return[X.clone().addScaledVector($,.5),yt]}function Y(X,$,ee,ne){for(var ae=Math.PI/2,de=Ht.angle()-ae,fe=[],Ue=new wo,et=new wo,vt=0;vt<=Ke;vt++){for(var gt=[],yt=vt/Ke,_t=0;_t<=vt;_t++){var wt=((vt?_t/vt:0)-.5)*St,Ct=Math.cos(wt),At=Math.sin(wt),Et=(ae+Math.atan(Math.tan(de)*Ct))*yt,Rt=Math.cos(Et),Bt=Math.sin(Et);Ue.set(0,0,0),Ue.addScaledVector($,Bt*Ct),Ue.addScaledVector(ee,Rt),Ue.addScaledVector(ne,Bt*At),et.copy(X).addScaledVector(Ue,je),nt.push(et.x,et.y,et.z),it.push(Ue.x,Ue.y,Ue.z),ct.push(0,0),gt.push(dt++)}fe.push(gt)}for(var Wt=fe.length-1,qt=0;qt<Wt;qt++){var Zt=fe[qt],Xt=fe[qt+1],Qt=Zt.length-1;tt.push(Zt[0],Xt[1],Xt[0]);for(var en=1;en<=Qt;en++)tt.push(Zt[en-1],Zt[en],Xt[en]),tt.push(Zt[en],Xt[en+1],Xt[en])}}return X.setIndex(tt),X.setAttribute("position",new Iu(nt,3)),X.setAttribute("normal",new Iu(it,3)),X.setAttribute("uv",new Iu(ct,2)),X}return _createClass(dv)}(Wu),kN=function(){function vp(){_classCallCheck(this,vp)}return _createClass(vp,null,[{key:"create",value:function create(X){return this.build(this.normalizeInputs(X))}},{key:"normalizeInputs",value:function normalizeInputs(X,$){var ee,ne,ae,de,fe=Object.assign({},null!=(ee=null==$?void 0:$.parameters)?ee:{width:100,depth:0,cornerRadius:[0,0,0,0],cornerType:1,extrudeBevelSize:0,extrudeBevelSegments:1},X.parameters),Ue=Object.assign(null!=(ne=null==$?void 0:$.ui)?ne:{enabledIndieCorners:!1},X.ui);return{shape:X.shape&&X.shape instanceof AI?X.shape:new AI,parameters:Object.assign(fe,{width:Math.abs(fe.width),height:Math.abs(null!=(ae=fe.height)?ae:fe.width),depth:Math.abs(null!=(de=fe.depth)?de:0)}),ui:Ue}}},{key:"build",value:function build(X){var $=X.shape,ee=X.parameters,ne=ee.width,ae=ee.height,de=ee.cornerRadius,fe=ee.cornerType,Ue=ee.depth,je=ee.extrudeBevelSize,Ke=ee.extrudeBevelSegments,et={x:.5*ne,y:.5*ae},tt={x:-et.x,y:-et.y},nt={x:et.x,y:et.y};function f(X,$,ee){return $>ne&&ee>ae?Math.min(X*ne/$,X*ae/ee):$>ne?X*ne/$:ee>ae?X*ae/ee:X}var it=[];it[0]=0===de[0]?0:f(de[0],de[0]+de[3],de[0]+de[1]),it[1]=0===de[1]?0:f(de[1],de[1]+de[2],de[1]+de[0]),it[2]=0===de[2]?0:f(de[2],de[2]+de[1],de[2]+de[3]),it[3]=0===de[3]?0:f(de[3],de[3]+de[0],de[3]+de[2]);var ct=tt.x,dt=nt.x,vt=nt.y,gt=tt.y;$.addPoint($.createPoint(ct,vt)),$.addPoint($.createPoint(dt,vt)),$.addPoint($.createPoint(dt,gt)),$.addPoint($.createPoint(ct,gt)),$.isClosed=!0;for(var yt=!0,_t=0,wt=$.points.length;_t<wt;_t++)$.points[_t].roundness=it[_t],_t>0&&it[_t]!==it[_t-1]&&(yt=!1);yt&&($.roundness=it[0]),$.useCubicForRoundedCorners=1!==fe,$.update();var St=lz.create({shape:$,parameters:{depth:Ue,extrudeBevelSize:je,extrudeBevelSegments:Ke}});return Object.assign(St,{userData:At(Ct({},X),{type:"RectangleGeometry"})})}}]),vp}(),CN=function(){function x1(){_classCallCheck(this,x1)}return _createClass(x1,null,[{key:"create",value:function create(X){return this.build(this.normalizeInputs(X))}},{key:"normalizeInputs",value:function normalizeInputs(X,$){var ee,ne,ae,de=Object.assign({},null!=(ee=null==$?void 0:$.parameters)?ee:{width:100,widthSegments:64,heightSegments:64,phiStart:0,phiLength:2*Math.PI,thetaStart:0,thetaLength:Math.PI},X.parameters);return{parameters:Object.assign(de,{width:Math.abs(de.width),height:Math.abs(null!=(ne=de.height)?ne:de.width),depth:Math.abs(null!=(ae=de.depth)?ae:de.width)})}}},{key:"build",value:function build(X){var $=X.parameters,ee=$.width,ne=void 0===ee?100:ee,ae=$.height,de=void 0===ae?ne:ae,fe=$.depth,Ue=void 0===fe?ne:fe,je=$.widthSegments,Ke=void 0===je?64:je,et=$.heightSegments,tt=void 0===et?64:et,nt=$.phiStart,it=$.phiLength,ct=$.thetaStart,dt=$.thetaLength,vt=new Oy(.5*ne,Ke,tt,nt,it,ct,dt);return vt.scale(1,de/ne,Ue/ne),Object.assign(vt,{userData:At(Ct({},X),{type:"SphereGeometry"})})}}]),x1}(),AN=function(){function b1(){_classCallCheck(this,b1)}return _createClass(b1,null,[{key:"create",value:function create(X){return this.build(this.normalizeInputs(X))}},{key:"normalizeInputs",value:function normalizeInputs(X,$){var ee,ne,ae=Object.assign({},null!=(ee=null==$?void 0:$.parameters)?ee:{width:100,depth:0,widthSegments:8,heightSegments:8},X.parameters);return{parameters:Object.assign(ae,{width:Math.abs(ae.width),height:Math.abs(null!=(ne=ae.height)?ne:ae.width),depth:0})}}},{key:"build",value:function build(X){var $=X.parameters,ee=$.width,ne=void 0===ee?100:ee,ae=$.height,de=void 0===ae?ne:ae,fe=$.widthSegments,Ue=void 0===fe?8:fe,je=$.heightSegments,Ke=new Rd(ne,de,Ue,void 0===je?8:je);return Ke.scale(1,1,1),Object.assign(Ke,{userData:At(Ct({},X),{type:"PlaneGeometry"})})}}]),b1}(),MN=function(){function w1(){_classCallCheck(this,w1)}return _createClass(w1,null,[{key:"create",value:function create(X){return this.build(this.normalizeInputs(X))}},{key:"normalizeInputs",value:function normalizeInputs(X,$){var ee,ne,ae,de=Object.assign({},null!=(ee=null==$?void 0:$.parameters)?ee:{width:100,depth:0,innerRadiusPercent:38.19,spikes:5,cornerRadius:0,angle:360,extrudeBevelSize:0,extrudeBevelSegments:1},X.parameters);return{shape:X.shape&&X.shape instanceof AI?X.shape:new AI,parameters:Object.assign(de,{width:Math.abs(de.width),height:Math.abs(null!=(ne=de.height)?ne:de.width),depth:Math.abs(null!=(ae=de.depth)?ae:0)})}}},{key:"build",value:function build(X){var $=X.parameters,ee=$.width,ne=$.height,ae=$.innerRadiusPercent,de=$.spikes,fe=$.cornerRadius,Ue=$.angle,je=$.depth,Ke=$.extrudeBevelSize,et=$.extrudeBevelSegments,tt=X.shape,nt=.5*ee,it=.5*ne,ct=Ue*Math.PI/360/de,dt=Math.PI/2*3*-1,vt=nt*ae/100,gt=it*ae/100;if(3===de&&50===ae){ct=2*Math.PI/de;for(var yt=0;yt<de;yt++){var _t=ct*yt,wt=0+Math.sin(_t)*nt,St=0+Math.cos(_t)*it;tt.addPoint(tt.createPoint(wt,St))}}else for(var Et=0;Et<de;Et++){var Rt=0+Math.cos(dt)*nt,Bt=0+Math.sin(dt)*it;tt.addPoint(tt.createPoint(Rt,Bt)),dt+=ct,Rt=0+Math.cos(dt)*vt,Bt=0+Math.sin(dt)*gt,tt.addPoint(tt.createPoint(Rt,Bt)),dt+=ct}tt.isClosed=!0;for(var Ht=0,Wt=tt.points.length;Ht<Wt;Ht++)tt.points[Ht].roundness=fe;tt.roundness=fe,tt.update();var qt=lz.create({shape:tt,parameters:{roundness:fe,depth:je,extrudeBevelSize:Ke,extrudeBevelSegments:et}});return Object.assign(qt,{userData:At(Ct({},X),{type:"StarGeometry"})})}}]),w1}(),EN=function(){function xp(){_classCallCheck(this,xp)}return _createClass(xp,null,[{key:"create",value:function create(X){return this.build(this.normalizeInputs(X))}},{key:"normalizeInputs",value:function normalizeInputs(X,$){var ee,ne,ae,de=Object.assign({},null!=(ee=null==$?void 0:$.parameters)?ee:{width:100,depth:0},X.parameters);return{parameters:Object.assign(de,{width:Math.abs(de.width),height:Math.abs(null!=(ne=de.height)?ne:de.width),depth:Math.abs(null!=(ae=de.depth)?ae:0)})}}},{key:"build",value:function build(X){var $=X.parameters,ee=$.width,ne=$.height,ae=new Rd(ee,ne);return Object.assign(ae,{userData:At(Ct({},X),{type:"TextFrameGeometry"})})}}]),xp}(),TN=function(){function S1(){_classCallCheck(this,S1)}return _createClass(S1,null,[{key:"create",value:function create(X){return this.build(this.normalizeInputs(X))}},{key:"normalizeInputs",value:function normalizeInputs(X,$){var ee,ne,ae,de=Object.assign({},null!=(ee=null==$?void 0:$.parameters)?ee:{width:100,radialSegments:32,tubularSegments:64,arc:2*Math.PI,cornerRadius:30,cornerSegments:8},X.parameters),fe=Math.abs(de.width),Ue=Math.abs(null!=(ne=de.height)?ne:de.width),je=Math.abs(null!=(ae=de.depth)?ae:.25*de.width);return{parameters:Object.assign(de,{width:fe,height:Ue,depth:je})}}},{key:"build",value:function build(X){var $=X.parameters,ee=$.width,ne=$.height,ae=$.depth,de=$.radialSegments,fe=$.tubularSegments,Ue=function lF(X,$,ee,ne,ae,de,fe,Ue,je,Ke,et){var tt;return $=(tt=[ee,$])[0],ee=tt[1],fe=$/2,1==(ae/=2*Math.PI)&&(Ke=0),new mz(!0,X,$,ee,ne,ae,de,fe,Ue,je,Ke,et)}(ee,ne,ae,.5*ee,$.arc,fe,0,0,de,$.cornerRadius,$.cornerSegments);return Ue.scale(1,ne/ee,1),Object.assign(Ue,{userData:At(Ct({},X),{type:"TorusGeometry"})})}}]),S1}();var LN=function(){function M1(){_classCallCheck(this,M1)}return _createClass(M1,null,[{key:"create",value:function create(X){return this.build(this.normalizeInputs(X))}},{key:"normalizeInputs",value:function normalizeInputs(X,$){var ee,ne,ae,de,fe=Object.assign({},null!=(ee=null==$?void 0:$.parameters)?ee:{width:100,tubularSegments:64,radialSegments:32,p:2,q:3},X.parameters);return{parameters:Object.assign(fe,{width:Math.abs(fe.width),height:Math.abs(null!=(ne=fe.height)?ne:fe.width),depth:Math.abs(null!=(ae=fe.depth)?ae:fe.width),tube:null!=(de=fe.tube)?de:.125*fe.width})}}},{key:"build",value:function build(X){var $=X.parameters,ee=$.width,ne=$.tube,ae=$.tubularSegments,de=$.radialSegments,fe=$.p,Ue=$.q,je=.5*ee;je!==ne&&(je-=ne);var Ke=new Iy(je,ne,ae,de,fe,Ue);return Object.assign(Ke,{userData:At(Ct({},X),{type:"TorusKnotGeometry"})})}}]),M1}(),ON=function(){function A1(){_classCallCheck(this,A1)}return _createClass(A1,null,[{key:"create",value:function create(X){return this.build(this.normalizeInputs(X))}},{key:"normalizeInputs",value:function normalizeInputs(X,$){var ee,ne,ae,de=Object.assign({},null!=(ee=null==$?void 0:$.parameters)?ee:{width:100,depth:0,spikes:5,cornerRadius:0,extrudeBevelSize:0,extrudeBevelSegments:1,isRect:!1},X.parameters);return{shape:X.shape&&X.shape instanceof AI?X.shape:new AI,parameters:Object.assign(de,{width:Math.abs(de.width),height:Math.abs(null!=(ne=de.height)?ne:de.width*(de.isRect?1:Math.sqrt(3)/2)),depth:Math.abs(null!=(ae=de.depth)?ae:0)})}}},{key:"build",value:function build(X){var $=X.parameters,ee=$.width,ne=void 0===ee?100:ee,ae=$.height,de=$.cornerRadius,fe=$.depth,Ue=$.extrudeBevelSize,je=$.extrudeBevelSegments,Ke=$.isRect,et=X.shape,tt=.5*ne,nt=.5*ae;Ke?(et.addPoint(et.createPoint(-tt,nt)),et.addPoint(et.createPoint(tt,-nt)),et.addPoint(et.createPoint(-tt,-nt))):(et.addPoint(et.createPoint(0,nt)),et.addPoint(et.createPoint(tt,-nt)),et.addPoint(et.createPoint(-tt,-nt))),et.isClosed=!0;for(var it=0,ct=et.points.length;it<ct;it++)et.points[it].roundness=de;et.roundness=de,et.update();var dt=lz.create({shape:et,parameters:{roundness:de,depth:fe,extrudeBevelSize:Ue,extrudeBevelSegments:je}});return Object.assign(dt,{userData:At(Ct({},X),{type:"TriangleGeometry"})})}}]),A1}(),zN={};Rt(zN,{addBarycentricAttribute:function addBarycentricAttribute(){return VN},fixUvs:function fixUvs(){return jN},loadFromUrl:function loadFromUrl(){return HN},resizeGeometry:function resizeGeometry(){return UN},roundShapePolygon:function roundShapePolygon(){return FN}});var NN=function T1(X,$){var ee=$.x-X.x,ne=$.y-X.y,ae=Math.sqrt(ee*ee+ne*ne),de=ee/ae,fe=ne/ae;return{x:ee,y:ne,len:ae,nx:de,ny:fe,ang:Math.atan2(fe,de)}},FN=function cF(X,$,ee){var ne,ae,de,fe,Ue,je,Ke,et,tt,nt,it,ct,dt,vt,gt=$.length;for(fe=$[gt-2],X.curves=[],ne=1;ne<gt-1;ne++){Ue=$[ne%gt],je=$[(ne+1)%gt];var yt=NN(Ue,fe),_t=NN(Ue,je);Ke=yt.nx*_t.ny-yt.ny*_t.nx,et=yt.nx*_t.nx-yt.ny*-_t.ny,it=Math.asin(Ke),tt=1,nt=!1,et<0?it<0?it=Math.PI+it:(it=Math.PI-it,tt=-1,nt=!0):it>0&&(tt=-1,nt=!0),ct=it/2,(vt=Math.abs(Math.cos(ct)*ee/Math.sin(ct)))>Math.min(yt.len/2,_t.len/2)?(vt=Math.min(yt.len/2,_t.len/2),dt=Math.abs(vt*Math.sin(ct)/Math.cos(ct))):dt=ee,ae=Ue.x+_t.nx*vt,de=Ue.y+_t.ny*vt,ae+=-_t.ny*dt*tt,de+=_t.nx*dt*tt,X.absarc(ae,de,dt,yt.ang+Math.PI/2*tt,_t.ang-Math.PI/2*tt,nt),fe=Ue,Ue=je}X.closePath()},UN=function hF(X,$){var ee=$.width,ne=$.height,ae=$.depth;ee=Math.abs(ee),ne=Math.abs(ne),ae=Math.abs(ae);var de,fe,Ue,je=X.userData.parameters;0===ee?(ee=je.width,de=1):de=ee/je.width,0===ne?(ne=je.height,fe=1):fe=ne/je.height,0===ae?(ae=je.depth,Ue=1):Ue=ae/je.depth,X.scale(de,fe,Ue),je.width=ee,je.height=ne,je.depth=ae},VN=function uF(X,$){for(var ee=[new wo(1,0,0),new wo(0,1,0),new wo(0,0,1)],ne=X.attributes.position,ae=new Float32Array(3*ne.count),de=0,fe=ne.count;de<fe;de++)ee[de%3].toArray(ae,3*de);X.setAttribute($,new Iu(ae,3))},HN=function fF(X){return new Promise((function($){(new jx).load(X,(function(X){return $(X)}))}))},jN=function dF(X,$,ee){var ne=X.getAttribute("uv");if(ne)for(var ae=0;ae<ne.count;ae++){var de=ne.getX(ae),fe=ne.getY(ae);ne.setXY(ae,(de+$/2)/$,1-(fe-ee/2)/ee*-1)}},GN=new Promise((function(X){X})),WN=function(){function Qh(X){_classCallCheck(this,Qh),X=null!=X?X:{},this.name=X.name,this.type=X.type,this.node=X.node,this.size=X.size,this.needsUpdate=X.needsUpdate}return _createClass(Qh,[{key:"value",get:function get(){return this.node.value},set:function set(X){this.node.value=X}}]),Qh}(),qN=function(){function We(X){_classCallCheck(this,We),this.hashProperties=void 0,this.isNode=!0,this.shortcuts={},this.uuid=da.generateUUID(),this.type=X,this.name="",this.userData={}}return _createClass(We,[{key:"analyze",value:function analyze(X,$){$=null!=$?$:{},X.analyzing=!0,this.build(X.addFlow($.slot,$.cache,$.context),"v4"),X.clearVertexNodeCode(),X.clearFragmentNodeCode(),X.removeFlow(),X.analyzing=!1}},{key:"analyzeAndFlow",value:function analyzeAndFlow(X,$,ee){return ee=null!=ee?ee:{},this.analyze(X,ee),this.flow(X,$,ee)}},{key:"flow",value:function flow(X,$,ee){ee=null!=ee?ee:{},X.addFlow(ee.slot,ee.cache,ee.context);var ne={result:this.build(X,$),code:X.clearNodeCode(),extra:X.context.extra};return X.removeFlow(),ne}},{key:"build",value:function build(X,$,ee){$=null!=$?$:this.getType(X,$);var ne=X.getNodeData(null!=ee?ee:this);return X.analyzing&&this.appendDepsNode(X,ne,$),-1===X.nodes.indexOf(this)&&X.nodes.push(this),void 0!==this.updateFrame&&-1===X.updaters.indexOf(this)&&X.updaters.push(this),this.generate(X,$,ee)}},{key:"updateFrame",value:function updateFrame(X){}},{key:"generateReadonly",value:function generateReadonly(X,$,ee,ne,ae,de){return""}},{key:"generate",value:function generate(X,$,ee,ne,ae){return""}},{key:"parse",value:function parse(X,$,ee,ne){}},{key:"appendDepsNode",value:function appendDepsNode(X,$,ee){$.deps=($.deps||0)+1;var ne=X.getTypeLength(ee);(ne>($.outputMax||0)||this.getType(X,ee))&&($.outputMax=ne,$.output=ee)}},{key:"setName",value:function setName(X){this.name=X}},{key:"getName",value:function getName(){return this.name}},{key:"getType",value:function getType(X,$){return"sampler2D"===$||"samplerCube"===$?$:this.type}},{key:"getJSONNode",value:function getJSONNode(X){if((null==X?void 0:X.materials)&&void 0!==(null==X?void 0:X.materials[this.uuid]))return X.materials[this.uuid]}},{key:"getHash",value:function getHash(){var X,$,ee="{";for(X in this)($=this[X])instanceof We&&(ee+='"'+X+'":'+$.getHash()+",");if(this.hashProperties)for(var ne=0;ne<this.hashProperties.length;ne++)$=this[X=this.hashProperties[ne]],ee+='"'+X+'":"'+String($)+'",';return ee+='"id":"'+this.uuid+'"}'}},{key:"copy",value:function copy(X){return this.name=X.name,X.type&&(this.type=X.type),X.frameId&&(this.frameId=X.frameId),X.hashProperties&&(this.hashProperties=X.hashProperties.map((function(X){return X}))),this.userData=JSON.parse(JSON.stringify(X.userData)),this.shortcuts=JSON.parse(JSON.stringify(X.shortcuts)),this}},{key:"clone",value:function clone(){return(new this.constructor).copy(this)}},{key:"createJSONNode",value:function createJSONNode(X){var $=void 0===X||"string"==typeof X;if("string"!=typeof this.type)throw new Error("Node does not allow serialization.");var ee={};return ee.uuid=this.uuid,ee.type=this.type,""!==this.name&&(ee.name=this.name),"{}"!==JSON.stringify(this.userData)&&(ee.userData=this.userData),!$&&X&&(X.nodes[this.uuid]=ee),ee}},{key:"toJSON",value:function toJSON(X){var $;return null!=($=this.getJSONNode(X))?$:this.createJSONNode(X)}},{key:"fromJSON",value:function fromJSON(X,$){return this.uuid=X.uuid,this.type=X.type,X.name&&(this.name=X.name),X.userData&&(this.userData=X.userData),this}}]),We}(),YN=function(){function pv(){_classCallCheck(this,pv),this.nodes={},this.keywords={}}return _createClass(pv,[{key:"add",value:function add(X){this.nodes[X.name]=X}},{key:"addKeyword",value:function addKeyword(X,$,ee){ee=void 0===ee||ee,this.keywords[X]={callback:$,cache:ee}}},{key:"remove",value:function remove(X){delete this.nodes[X.name]}},{key:"removeKeyword",value:function removeKeyword(X){delete this.keywords[X]}},{key:"get",value:function get(X){return this.nodes[X]}},{key:"getKeyword",value:function getKeyword(X,$){return this.keywords[X].callback($)}},{key:"getKeywordData",value:function getKeywordData(X){return this.keywords[X]}},{key:"contains",value:function contains(X){return void 0!==this.nodes[X]}},{key:"containsKeyword",value:function containsKeyword(X){return void 0!==this.keywords[X]}}]),pv}(),JN=new YN,ZN=function(X){_inherits(Ye,X);var $=_createSuper(Ye);function Ye(X,ee){var ne;return _classCallCheck(this,Ye),(ne=$.call(this,X)).scope="",ee=null!=ee?ee:{},ne.shared=void 0===ee.shared||ee.shared,ne.unique=void 0!==ee.unique&&ee.unique,ne}return _createClass(Ye,[{key:"build",value:function build(X,$,ee,ne){if($=null!=$?$:this.getType(X),this.getShared(X,$)){var ae=this.getUnique(X,$);ae&&void 0===this.uuid&&(this.uuid=da.generateUUID()),ee=X.getUUID(null!=ee?ee:this.getUUID(),!ae);var de=X.getNodeData(ee),fe=de.output||this.getType(X);if(X.analyzing)return(de.deps||0)>0||this.getLabel()?(this.appendDepsNode(X,de,$),this.generate(X,$,ee)):_get(_getPrototypeOf(Ye.prototype),"build",this).call(this,X,$,ee);if(ae)return de.name=de.name||_get(_getPrototypeOf(Ye.prototype),"build",this).call(this,X,$,ee),de.name;if(!this.getLabel()&&(!this.getShared(X,fe)||X.context.ignoreCache||1===de.deps))return _get(_getPrototypeOf(Ye.prototype),"build",this).call(this,X,$,ee);ee=this.getUUID(!1);var Ue=this.getTemp(X,ee);if(Ue)return X.format(Ue,fe,$);Ue=_get(_getPrototypeOf(Ye.prototype),"generate",this).call(this,X,$,ee,de.output,ne);var je=this.generate(X,fe,ee);return X.addNodeCode(Ue+" = "+je+";"),X.format(Ue,fe,$)}return _get(_getPrototypeOf(Ye.prototype),"build",this).call(this,X,$,ee)}},{key:"getShared",value:function getShared(X,$){return"sampler2D"!==$&&"samplerCube"!==$&&this.shared}},{key:"getUnique",value:function getUnique(X,$){return this.unique}},{key:"setLabel",value:function setLabel(X){return this.label=X,this}},{key:"getLabel",value:function getLabel(){return this.label}},{key:"getUUID",value:function getUUID(X){var $=this.uuid;return"string"==typeof this.scope&&($=this.scope+"-"+$),$}},{key:"getTemp",value:function getTemp(X,$){$=$||this.uuid;var ee=X.getVars()[$];return ee?ee.name:void 0}},{key:"generate",value:function generate(X,$,ee,ne,ae){return this.getShared(X,$)||console.error("TempNode is not shared"),ee=null!=ee?ee:this.uuid,X.getTempVar(ee,null!=ne?ne:this.getType(X),ae,this.getLabel()).name}}]),Ye}(qN),XN=function(X){_inherits(jt,X);var $=_createSuper(jt);function jt(X,ee){var ne;return _classCallCheck(this,jt),(ee=null!=ee?ee:{}).shared=void 0!==ee.shared&&ee.shared,(ne=$.call(this,X,ee)).readonly=!1,ne}return _createClass(jt,[{key:"setReadonly",value:function setReadonly(X){return this.readonly=X,this.hashProperties=this.readonly?["value"]:void 0,this}},{key:"getReadonly",value:function getReadonly(){return this.readonly}},{key:"createJSONNode",value:function createJSONNode(X){var $=_get(_getPrototypeOf(jt.prototype),"createJSONNode",this).call(this,X);return!0===this.readonly&&($.readonly=this.readonly),$}},{key:"fromJSON",value:function fromJSON(X,$){return _get(_getPrototypeOf(jt.prototype),"fromJSON",this).call(this,X,$),void 0!==X.readonly&&this.setReadonly(X.readonly),this}},{key:"generate",value:function generate(X,$,ee,ne,ae,de){ee=X.getUUID(null!=ee?ee:this.getUUID()),ne=null!=ne?ne:this.getType(X);var fe=X.getNodeData(ee);return this.getReadonly()&&void 0!==this.generateReadonly?this.generateReadonly(X,$,ee,ne,ae,de):X.isShader("vertex")?(fe.vertex||(fe.vertex=X.createVertexUniform(ne,this,ae,de,this.getLabel())),X.format(fe.vertex.name,ne,$)):(fe.fragment||(fe.fragment=X.createFragmentUniform(ne,this,ae,de,this.getLabel())),X.format(fe.fragment.name,ne,$))}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(jt.prototype),"copy",this).call(this,X),this.readonly=X.readonly,this}}]),jt}(ZN),QN=function(X){_inherits(Nr,X);var $=_createSuper(Nr);function Nr(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,ne=arguments.length>1?arguments[1]:void 0;return _classCallCheck(this,Nr),(X=$.call(this,"v2")).nodeType="Vector2",X.value=ee instanceof va?ee:new va(ee,ne),X}return _createClass(Nr,[{key:"x",get:function get(){return this.value.x},set:function set(X){this.value.x=X}},{key:"y",get:function get(){return this.value.y},set:function set(X){this.value.y=X}},{key:"generateReadonly",value:function generateReadonly(X,$,ee,ne,ae,de){return X.format("vec2("+this.value.x+", "+this.value.y+")",ne,$)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Nr.prototype),"copy",this).call(this,X),this.value.copy(X.value),this}}]),Nr}(XN),KN=function(X){_inherits(Or,X);var $=_createSuper(Or);function Or(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,ne=arguments.length>1?arguments[1]:void 0,ae=arguments.length>2?arguments[2]:void 0;return _classCallCheck(this,Or),(X=$.call(this,"v3")).nodeType="Vector3",X.value=ee instanceof wo?ee:new wo(ee,ne,ae),X}return _createClass(Or,[{key:"x",get:function get(){return this.value.x},set:function set(X){this.value.x=X}},{key:"y",get:function get(){return this.value.y},set:function set(X){this.value.y=X}},{key:"z",get:function get(){return this.value.z},set:function set(X){this.value.z=X}},{key:"generateReadonly",value:function generateReadonly(X,$,ee,ne,ae,de){return X.format("vec3("+this.value.x+", "+this.value.y+", "+this.value.z+")",ne,$)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Or.prototype),"copy",this).call(this,X),this.value.copy(X.value),this}}]),Or}(XN),$N=function(X){_inherits(Wr,X);var $=_createSuper(Wr);function Wr(X,ee,ne,ae){var de;return _classCallCheck(this,Wr),(de=$.call(this,X,ee,ne)).isColorA=!0,de.a=ae,de}return _createClass(Wr,[{key:"setRGBA",value:function setRGBA(X,$,ee,ne){_get(_getPrototypeOf(Wr.prototype),"setRGB",this).call(this,X,$,ee),this.a=ne}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Wr.prototype),"copy",this).call(this,X),this.a="a"in X?X.a:1,this}},{key:"clone",value:function clone(){return new this.constructor(this.r,this.g,this.b,this.a)}},{key:"x",get:function get(){return this.r},set:function set(X){this.r=X}},{key:"y",get:function get(){return this.g},set:function set(X){this.g=X}},{key:"z",get:function get(){return this.b},set:function set(X){this.b=X}},{key:"w",get:function get(){return this.a},set:function set(X){this.a=X}}]),Wr}(Ma),eF=function(X){_inherits(fi,X);var $=_createSuper(fi);function fi(X){var ee;return _classCallCheck(this,fi),(ee=$.call(this,"v4")).nodeType="Vector4",ee.value=X instanceof $N?X:new $N(X.r,X.g,X.b,X.a),ee}return _createClass(fi,[{key:"generateReadonly",value:function generateReadonly(X,$,ee,ne,ae,de){return X.format("vec4("+this.value.r+", "+this.value.g+", "+this.value.b+", "+this.value.a+")",ne,$)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(fi.prototype),"copy",this).call(this,X),this.value.copy(X.value),this}}]),fi}(XN),iF=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,pF=/[a-z_0-9]+/gi,vF=function(X){_inherits(Ne,X);var $=_createSuper(Ne);function Ne(X,ee,ne,ae,de){var fe;return _classCallCheck(this,Ne),(fe=$.call(this,de)).src="",fe.nodeType="Function",fe.useKeywords=!0,fe.includes=[],fe.extensions={},fe.keywords={},fe.isMethod=void 0===de,fe.isInterface=!1,fe.parse(X,ee,ne,ae),fe}return _createClass(Ne,[{key:"getShared",value:function getShared(X,$){return!this.isMethod}},{key:"getType",value:function getType(X){return X.getTypeByFormat(this.type)}},{key:"getInputByName",value:function getInputByName(X){if(this.inputs)for(var $=this.inputs.length;$--;)if(this.inputs[$].name===X)return this.inputs[$]}},{key:"getIncludeByName",value:function getIncludeByName(X){if(this.includes)for(var $=this.includes.length;$--;)if(this.includes[$].name===X)return this.includes[$]}},{key:"generate",value:function generate(X,$,ee,ne,ae){var de,fe=0,Ue=this.src;if(this.includes)for(var je=0;je<this.includes.length;je++)X.include(this.includes[je],this);for(var Ke in this.extensions)X.extensions[Ke]=!0;for(var et=[];de=pF.exec(this.src);)et.push(de);for(var tt=0;tt<et.length;tt++){var nt=et[tt],it=nt[0],ct=!this.isMethod||!this.getInputByName(it),dt=it;if(this.keywords[it]||this.useKeywords&&ct&&JN.containsKeyword(it)){var vt=this.keywords[it];if(!vt){var gt=JN.getKeywordData(it);gt.cache&&(vt=X.keywords[it]),vt=vt||JN.getKeyword(it,X),gt.cache&&(X.keywords[it]=vt)}dt=vt.build(X)}it!==dt&&(Ue=Ue.substring(0,nt.index+fe)+dt+Ue.substring(nt.index+it.length+fe),fe+=dt.length-it.length),void 0===this.getIncludeByName(dt)&&JN.contains(dt)&&X.include(JN.get(dt))}return"source"===$?Ue:this.isMethod?(this.isInterface||X.include(this,void 0,Ue),this.name):X.format("( "+Ue+" )",this.getType(X),$)}},{key:"parse",value:function parse(X,$,ee,ne){if(this.src=X||"",this.includes=null!=$?$:[],this.extensions=null!=ee?ee:{},this.keywords=null!=ne?ne:{},this.isMethod){var ae=iF.exec(this.src);if(this.inputs=[],ae&&4==ae.length){this.type=ae[1],this.name=ae[2];var de=ae[3].match(pF);if(de)for(var fe=0;fe<de.length;){var Ue=de[fe++],je=void 0;"in"===Ue||"out"===Ue||"inout"===Ue?je=de[fe++]:(je=Ue,Ue="");var Ke=de[fe++];this.inputs.push({name:Ke,type:je,qualifier:Ue})}this.isInterface=-1===this.src.indexOf("{")}else this.type="",this.name=""}}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Ne.prototype),"copy",this).call(this,X),this.isMethod=X.isMethod,this.useKeywords=X.useKeywords,void 0!==X.type&&(this.type=X.type),this.parse(X.src,X.includes,X.extensions,X.keywords),this}},{key:"toJSON",value:function toJSON(X){var $,ee=this.getJSONNode(X);if(!ee){(ee=this.createJSONNode(X)).src=this.src,ee.isMethod=this.isMethod,ee.useKeywords=this.useKeywords,this.isMethod||(ee.type=this.type),ee.extensions=JSON.parse(JSON.stringify(this.extensions));var ne={};for(var ae in this.keywords)ne[ae]=this.keywords[ae].toJSON(X).uuid;if(ee.keywords=ne,null!=($=this.includes)&&$.length){for(var de=[],fe=0;fe<this.includes.length;fe++)de.push(this.includes[fe].toJSON(X).uuid);ee.includes=de}ee.isMethod=this.isMethod,ee.inputs=this.inputs}return ee.nodeType=this.nodeType,ee}},{key:"fromJSON",value:function fromJSON(X,$){if(_get(_getPrototypeOf(Ne.prototype),"fromJSON",this).call(this,X,$),void 0!==X.inputs&&(this.inputs=X.inputs),void 0!==X.isMethod&&(this.isMethod=X.isMethod),X.src&&(this.src=X.src),X.isMethod&&(this.isMethod=X.isMethod),X.useKeywords&&(this.useKeywords=X.useKeywords),X.type&&(this.type=X.type),X.extensions&&(this.extensions=X.extensions),X.keywords&&$)for(var ee in this.keywords={},X.keywords)this.keywords[ee]=$.getNode(X.keywords[ee]);return X.includes&&$&&(this.includes=X.includes.map((function(X){return $.getNode(X)}))),this}}]),Ne}(ZN),mF=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i,gF=function(X){_inherits(mv,X);var $=_createSuper(mv);function mv(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",ne=arguments.length>1?arguments[1]:void 0;return _classCallCheck(this,mv),(X=$.call(this)).src="",X.useDefine=!1,X.nodeType="Const",X.parse(ee||mv.PI,void 0,void 0,void 0,ne),X}return _createClass(mv,[{key:"getType",value:function getType(X){return X.getTypeByFormat(this.type)}},{key:"parse",value:function parse(X,$,ee,ne,ae){this.src=X||"";var de,fe,Ue="",je=mF.exec(X);this.useDefine=null!=ae?ae:"#"===this.src.charAt(0),je&&je.length>1?(fe=je[1],de=je[2],Ue=je[3]):(de=this.src,fe="f"),this.name=de,this.type=fe,this.value=Ue}},{key:"build",value:function build(X,$){if("source"===$){if(this.value)return this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";";if(this.useDefine)return this.src}return X.include(this),X.format(this.name,this.getType(X),$)}},{key:"generate",value:function generate(X,$,ee,ne,ae){return X.format(this.name,this.getType(X),$)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(mv.prototype),"copy",this).call(this,X),this.parse(X.src,void 0,void 0,void 0,X.useDefine),this}}]),mv}(ZN),yF=gF;yF.PI="PI",yF.PI2="PI2",yF.RECIPROCAL_PI="RECIPROCAL_PI",yF.RECIPROCAL_PI2="RECIPROCAL_PI2",yF.LOG2="LOG2",yF.EPSILON="EPSILON";var bF=new RegExp("^structs*([a-z_0-9]+)s*{s*((.|\n)*?)}","gim"),wF=new RegExp("s*(w*?)s*(w*?)(=|;)","gim"),SF=function(X){_inherits(Fl,X);var $=_createSuper(Fl);function Fl(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return _classCallCheck(this,Fl),(X=$.call(this)).inputs=[],X.src="",X.nodeType="Struct",X.parse(ee),X}return _createClass(Fl,[{key:"getType",value:function getType(X){return X.getTypeByFormat(this.name)}},{key:"getInputByName",value:function getInputByName(X){for(var $=this.inputs.length;$--;)if(this.inputs[$].name===X)return this.inputs[$]}},{key:"generate",value:function generate(X,$,ee,ne,ae){return"source"===$?this.src+";":X.format("( "+this.src+" )",this.getType(X),$)}},{key:"parse",value:function parse(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.src=X,this.inputs=[];var $=bF.exec(X);if($){for(var ee,ne=$[2];ee=wF.exec(ne);)this.inputs.push({type:ee[1],name:ee[2]});this.name=$[1]}else this.name="";this.type=this.name}}]),Fl}(ZN),GF=function(X){_inherits(Ul,X);var $=_createSuper(Ul);function Ul(X){var ee;return _classCallCheck(this,Ul),(ee=$.call(this,"v2",{shared:!1})).nodeType="UV",ee.index=null!=X?X:0,ee}return _createClass(Ul,[{key:"generate",value:function generate(X,$){X.requires.uv[this.index]=!0;var ee=this.index>0?this.index+1:"",ne=X.isShader("vertex")?"uv"+ee:"vUv"+ee;return X.format(ne,this.getType(X),$)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Ul.prototype),"copy",this).call(this,X),this.index=X.index,this}},{key:"toJSON",value:function toJSON(X){var $=this.getJSONNode(X);return $||(($=this.createJSONNode(X)).index=this.index),$.nodeType=this.nodeType,$}},{key:"fromJSON",value:function fromJSON(X,$){return _get(_getPrototypeOf(Ul.prototype),"fromJSON",this).call(this,X,$),X.index&&(this.index=X.index),this}}]),Ul}(ZN);JN.addKeyword("uv",(function(){return new GF})),JN.addKeyword("uv2",(function(){return new GF(1)}));var ZF=function(X){_inherits(Qo,X);var $=_createSuper(Qo);function Qo(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new qN,ne=arguments.length>1?arguments[1]:void 0;return _classCallCheck(this,Qo),(X=$.call(this,"v4")).nodeType="ColorSpace",X.factor=new qN,X.input=ee,X.method=null!=ne?ne:Qo.LINEAR_TO_LINEAR,X.hashProperties=["method"],X}return _createClass(Qo,[{key:"generate",value:function generate(X,$){var ee,ne=this.input.build(X,"v4"),ae=this.getType(X),de=Qo.Nodes[this.method],fe=X.include(de);if(fe===Qo.LINEAR_TO_LINEAR)return X.format(ne,ae,$);if(2===(null==(ee=de.inputs)?void 0:ee.length)){var Ue=this.factor.build(X,"f");return X.format(fe+"( "+ne+", "+Ue+" )",ae,$)}return X.format(fe+"( "+ne+" )",ae,$)}},{key:"fromEncoding",value:function fromEncoding(X){var $=Qo.getEncodingComponents(X);this.method="LinearTo"+$[0],this.factor=$[1]}},{key:"fromDecoding",value:function fromDecoding(X){var $=Qo.getEncodingComponents(X);this.method=$[0]+"ToLinear",this.factor=$[1]}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Qo.prototype),"copy",this).call(this,X),this.input.copy(X.input),this.method=X.method,this.factor.copy(X.factor),this}}],[{key:"getEncodingComponents",value:function getEncodingComponents(X){switch(X){case qr:return["Linear"];case Xr:return["sRGB"];default:return[]}}}]),Qo}(ZN),QF=ZF;QF.Nodes={LinearToLinear:new vF(["vec4 LinearToLinear( in vec4 value ) {","\treturn value;","}"].join("\n")),sRGBToLinear:new vF(["vec4 sRGBToLinear( in vec4 value ) {","\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join("\n")),LinearTosRGB:new vF(["vec4 LinearTosRGB( in vec4 value ) {","\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join("\n"))},QF.LINEAR_TO_LINEAR="LinearToLinear",QF.SRGB_TO_LINEAR="sRGBToLinear",QF.LINEAR_TO_SRGB="LinearTosRGB";var $F,eU=function(X){_inherits(Gt,X);var $=_createSuper(Gt);function Gt(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",ne=arguments.length>1?arguments[1]:void 0,ae=arguments.length>2?arguments[2]:void 0,de=arguments.length>3?arguments[3]:void 0,fe=arguments.length>4?arguments[4]:void 0;return _classCallCheck(this,Gt),(X=$.call(this,ee,fe,de,ae,ne)).nodeType="Expression",X}return _createClass(Gt)}(vF),tU=function(X){_inherits(Fi,X);var $=_createSuper(Fi);function Fi(){return _classCallCheck(this,Fi),$.apply(this,arguments)}return _createClass(Fi,[{key:"toJSON",value:function toJSON(X){var $=_get(_getPrototypeOf(Fi.prototype),"toJSON",this).call(this,X),ee=void 0===X||"string"==typeof X;if(void 0!==this.image&&!ee){var ne=this.image;if(Array.isArray(ne)){X.images[ne.uuid].url=[];for(var ae=0;ae<ne.length;ae++)X.images[ne.uuid].url[ae]=_1(ne[ae])}else X.images[ne.uuid].url=_1(ne)}return $}}]),Fi}(eo);function _1(X){return typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&X instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&X instanceof ImageBitmap?function xF(X){if(/^data:/i.test(X.src))return X.src;var $;if(X instanceof HTMLCanvasElement)$=X;else{void 0===$F&&($F=document.createElement("canvas")),$F.width=X.width,$F.height=X.height;var ee=$F.getContext("2d");X instanceof ImageData?ee.putImageData(X,0,0):ee.drawImage(X,0,0,X.width,X.height),$=$F}var ne=X.src.startsWith("blob:")?X.fileName:X.src;return/\.jpe?g$/i.test(ne)?$.toDataURL("image/jpeg",.6):$.toDataURL("image/png")}(X):(console.warn("THREE.Texture: Unable to serialize Texture."),"")}var oU=function(X){_inherits(jr,X);var $=_createSuper(jr);function jr(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new tU,ne=arguments.length>1?arguments[1]:void 0,ae=arguments.length>2?arguments[2]:void 0,de=arguments.length>3?arguments[3]:void 0;return _classCallCheck(this,jr),(X=$.call(this,"v4",{shared:!0})).nodeType="Texture",X.value=ee,X.uv=null!=ne?ne:new GF,X.bias=ae,X.project=void 0!==de&&de,X}return _createClass(jr,[{key:"getTexture",value:function getTexture(X,$){return _get(_getPrototypeOf(jr.prototype),"generate",this).call(this,X,$,this.value.uuid,"t")}},{key:"generate",value:function generate(X,$){var ee;if("sampler2D"===$)return this.getTexture(X,$);var ne,ae,de=this.getTexture(X,$),fe=this.uv.build(X,this.project?"v4":"v2"),Ue=this.bias?this.bias.build(X,"f"):void 0;void 0===Ue&&X.context.bias&&(Ue=X.context.bias.setTexture(this).build(X,"f")),ne=this.project?"texture2DProj":Ue?"tex2DBias":"tex2D",ae=Ue?ne+"( "+de+", "+fe+", "+Ue+" )":ne+"( "+de+", "+fe+" )";var je={include:X.isShader("vertex"),ignoreCache:!0},Ke=this.getType(X);return X.addContext(je),this.colorSpace=null!=(ee=this.colorSpace)?ee:new QF(new eU("",Ke)),this.colorSpace.fromDecoding(X.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(ae),ae=this.colorSpace.build(X,Ke),X.removeContext(),X.format(ae,Ke,$)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(jr.prototype),"copy",this).call(this,X),X.value.isRenderTargetTexture?this.value=X.value:this.value.copy(X.value),this.uv.copy(X.uv),X.bias?this.bias?this.bias.copy(X.bias):this.bias=X.bias.clone():this.bias=void 0,X.colorSpace?this.colorSpace?this.colorSpace.copy(X.colorSpace):this.colorSpace=X.colorSpace.clone():this.colorSpace=void 0,this.project=X.project,X.value.isRenderTargetTexture||(this.value.updateMatrix(),this.value.needsUpdate=!0),this}}]),jr}(XN),sU=function(X){_inherits(Be,X);var $=_createSuper(Be);function Be(X){var ee;return _classCallCheck(this,Be),(ee=$.call(this,"f")).nodeType="Float",ee.value=null!=X?X:0,ee}return _createClass(Be,[{key:"generateReadonly",value:function generateReadonly(X,$,ee,ne,ae,de){return X.format(this.value+(this.value%1?"":".0"),ne,$)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Be.prototype),"copy",this).call(this,X),this.value=X.value,this}}]),Be}(XN),lU=function(X){_inherits(Jh,X);var $=_createSuper(Jh);function Jh(X,ee){var ne;return _classCallCheck(this,Jh),(ne=$.call(this)).inputs=[],ne.nodeType="FunctionCall",ne.value=X,ne.inputs=null!=ee?ee:[],ne}return _createClass(Jh,[{key:"getFunction",value:function getFunction(){return this.value}},{key:"getType",value:function getType(X){return this.value.getType(X)}},{key:"generate",value:function generate(X,$,ee,ne,ae){ne=this.getType(X);var de=this.value,fe=de.build(X,$)+"( ",Ue=[];if(de.inputs){for(var je=0;je<de.inputs.length;je++){var Ke=de.inputs[je],et=this.inputs[je]||this.inputs[Ke.name];Ue.push(et.build(X,X.getTypeByFormat(Ke.type)))}fe+=Ue.join(", ")+" )"}return X.format(fe,ne,$)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Jh.prototype),"copy",this).call(this,X),this.value.copy(X.value),this.inputs=X.inputs.map((function(X){return X.clone()})),this}},{key:"toJSON",value:function toJSON(X){var $,ee=this.getJSONNode(X);if(!ee){var ne=this.value;if((ee=this.createJSONNode(X)).value=this.value.toJSON(X).uuid,null!=($=ne.inputs)&&$.length){ee.inputs={};for(var ae=0;ae<ne.inputs.length;ae++){var de=ne.inputs[ae],fe=this.inputs[ae];ee.inputs[de.name]=fe.toJSON(X).uuid}}}return ee}}]),Jh}(ZN),cU=function(X){_inherits(gv,X);var $=_createSuper(gv);function gv(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new qN,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new qN,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:gv.ADD;return _classCallCheck(this,gv),(X=$.call(this)).nodeType="Operator",X.type=ee.type,X.a=ee,X.b=ne,X.op=ae,X}return _createClass(gv,[{key:"getType",value:function getType(X){var $=this.a.getType(X),ee=this.b.getType(X);return X.isTypeMatrix($)?"v4":X.getTypeLength(ee)>X.getTypeLength($)?ee:$}},{key:"generate",value:function generate(X,$){var ee=this.getType(X);this.type=ee;var ne=this.a.build(X,ee),ae=this.b.build(X,ee);return X.format("( "+ne+" "+this.op+" "+ae+" )",ee,$)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(gv.prototype),"copy",this).call(this,X),this.a.copy(X.a),this.b.copy(X.b),this.op=X.op,this}}]),gv}(ZN),hU=cU;hU.ADD="+",hU.SUB="-",hU.MUL="*",hU.DIV="/";var dU=function(X){_inherits(Nt,X);var $=_createSuper(Nt);function Nt(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new qN,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Nt.ABS,ae=arguments.length>2?arguments[2]:void 0,de=arguments.length>3?arguments[3]:void 0;return _classCallCheck(this,Nt),(X=$.call(this)).nodeType="Math",X.a=ee,"string"!=typeof ne?X.b=ne:de=ne,"string"!=typeof ae?X.c=ae:de=ae,X.method=de,X.hashProperties=["method"],X}return _createClass(Nt,[{key:"getNumInputs",value:function getNumInputs(X){switch(this.method){case Nt.MIX:case Nt.CLAMP:case Nt.REFRACT:case Nt.SMOOTHSTEP:case Nt.FACEFORWARD:return 3;case Nt.MIN:case Nt.MAX:case Nt.MOD:case Nt.STEP:case Nt.REFLECT:case Nt.DISTANCE:case Nt.DOT:case Nt.CROSS:case Nt.POW:return 2;default:return 1}}},{key:"getInputType",value:function getInputType(X){var $=X.getTypeLength(this.a.getType(X)),ee=this.b?X.getTypeLength(this.b.getType(X)):0,ne=this.c?X.getTypeLength(this.c.getType(X)):0;return $>ee&&$>ne?this.a.getType(X):ee>ne?this.b.getType(X):this.c.getType(X)}},{key:"getType",value:function getType(X){switch(this.method){case Nt.LENGTH:case Nt.DISTANCE:case Nt.DOT:return"f";case Nt.CROSS:return"v3"}return this.getInputType(X)}},{key:"generate",value:function generate(X,$){var ee,ne,ae,de=this.a?X.getTypeLength(this.a.getType(X)):0,fe=this.b?X.getTypeLength(this.b.getType(X)):0,Ue=this.c?X.getTypeLength(this.c.getType(X)):0,je=this.getInputType(X),Ke=this.getType(X);switch(this.type=Ke,this.method){case Nt.NEGATE:return X.format("( -"+this.a.build(X,je)+" )",je,$);case Nt.INVERT:return X.format("( 1.0 - "+this.a.build(X,je)+" )",je,$);case Nt.CROSS:ee=this.a.build(X,"v3"),ne=this.b.build(X,"v3");break;case Nt.STEP:ee=this.a.build(X,1===de?"f":je),ne=this.b.build(X,je);break;case Nt.MIN:case Nt.MAX:case Nt.MOD:ee=this.a.build(X,je),ne=this.b.build(X,1===fe?"f":je);break;case Nt.REFRACT:ee=this.a.build(X,je),ne=this.b.build(X,je),ae=this.c.build(X,"f");break;case Nt.MIX:ee=this.a.build(X,je),ne=this.b.build(X,je),ae=this.c.build(X,1===Ue?"f":je);break;default:ee=this.a.build(X,je),this.b&&(ne=this.b.build(X,je)),this.c&&(ae=this.c.build(X,je))}var et=[];et.push(ee),ne&&et.push(ne),ae&&et.push(ae);var tt=this.getNumInputs(X);if(et.length!==tt)throw Error('Arguments not match used in "'.concat(this.method,'". Require ').concat(tt,", currently ").concat(et.length,"."));return X.format(this.method+"( "+et.join(", ")+" )",Ke,$)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Nt.prototype),"copy",this).call(this,X),this.a.copy(X.a),this.b=X.b instanceof qN?X.b.clone():X.b,this.c=X.c instanceof qN?X.c.clone():X.c,this.method=X.method,this}}]),Nt}(ZN),fU=dU;fU.RAD="radians",fU.DEG="degrees",fU.EXP="exp",fU.EXP2="exp2",fU.LOG="log",fU.LOG2="log2",fU.SQRT="sqrt",fU.INV_SQRT="inversesqrt",fU.FLOOR="floor",fU.CEIL="ceil",fU.NORMALIZE="normalize",fU.FRACT="fract",fU.SATURATE="saturate",fU.SIN="sin",fU.COS="cos",fU.TAN="tan",fU.ASIN="asin",fU.ACOS="acos",fU.ARCTAN="atan",fU.ABS="abs",fU.SIGN="sign",fU.LENGTH="length",fU.NEGATE="negate",fU.INVERT="invert",fU.MIN="min",fU.MAX="max",fU.MOD="mod",fU.STEP="step",fU.REFLECT="reflect",fU.DISTANCE="distance",fU.DOT="dot",fU.CROSS="cross",fU.POW="pow",fU.MIX="mix",fU.CLAMP="clamp",fU.REFRACT="refract",fU.SMOOTHSTEP="smoothstep",fU.FACEFORWARD="faceforward";var mU=function(X){_inherits(Gl,X);var $=_createSuper(Gl);function Gl(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new qN,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new qN,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new qN;return _classCallCheck(this,Gl),(X=$.call(this,"v4")).nodeType="TextureCubeUV",X.value=ee,X.uv=ne,X.bias=ae,X}return _createClass(Gl,[{key:"bilinearCubeUV",value:function bilinearCubeUV(X,$,ee,ne){var ae,de,fe,Ue,je=new lU(Gl.Nodes.bilinearCubeUV,[$,ee,ne]);this.colorSpaceTL=null!=(ae=this.colorSpaceTL)?ae:new QF(new eU("","v4")),this.colorSpaceTL.fromDecoding(X.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(je.build(X)+".tl"),this.colorSpaceTR=null!=(de=this.colorSpaceTR)?de:new QF(new eU("","v4")),this.colorSpaceTR.fromDecoding(X.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(je.build(X)+".tr"),this.colorSpaceBL=null!=(fe=this.colorSpaceBL)?fe:new QF(new eU("","v4")),this.colorSpaceBL.fromDecoding(X.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(je.build(X)+".bl"),this.colorSpaceBR=null!=(Ue=this.colorSpaceBR)?Ue:new QF(new eU("","v4")),this.colorSpaceBR.fromDecoding(X.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(je.build(X)+".br");var Ke={include:X.isShader("vertex"),ignoreCache:!0};X.addContext(Ke),this.colorSpaceTLExp=new eU(this.colorSpaceTL.build(X,"v4"),"v4"),this.colorSpaceTRExp=new eU(this.colorSpaceTR.build(X,"v4"),"v4"),this.colorSpaceBLExp=new eU(this.colorSpaceBL.build(X,"v4"),"v4"),this.colorSpaceBRExp=new eU(this.colorSpaceBR.build(X,"v4"),"v4"),X.removeContext();var et=new eU("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return et.keywords.cubeUV_TL=this.colorSpaceTLExp,et.keywords.cubeUV_TR=this.colorSpaceTRExp,et.keywords.cubeUV_BL=this.colorSpaceBLExp,et.keywords.cubeUV_BR=this.colorSpaceBRExp,et.keywords.cubeUV=je,et}},{key:"generate",value:function generate(X,$){if(X.isShader("fragment")){var ee=this.uv,ne=this.bias||X.context.roughness,ae=new lU(Gl.Nodes.roughnessToMip,[ne]),de=new fU(ae,Gl.Nodes.m0,Gl.Nodes.cubeUV_maxMipLevel,fU.CLAMP),fe=new fU(de,fU.FLOOR),Ue=new fU(de,fU.FRACT),je=this.bilinearCubeUV(X,this.value,ee,fe),Ke=this.bilinearCubeUV(X,this.value,ee,new hU(fe,new sU(1).setReadonly(!0),hU.ADD)),et=new fU(je,Ke,Ue,fU.MIX);return X.format(et.build(X),"v4",$)}return console.warn("TextureCubeUVNode is not compatible with "+X.shader+" shader."),X.format("vec4( 0.0 )",this.getType(X),$)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Gl.prototype),"copy",this).call(this,X),this.uv.copy(X.uv),this.bias.copy(X.bias),this.value.copy(X.value),X.colorSpaceTL?this.colorSpaceTL?this.colorSpaceTL.copy(X.colorSpaceTL):this.colorSpaceTL=X.colorSpaceTL.clone():this.colorSpaceTL=void 0,X.colorSpaceTR?this.colorSpaceTR?this.colorSpaceTR.copy(X.colorSpaceTR):this.colorSpaceTR=X.colorSpaceTR.clone():this.colorSpaceTR=void 0,X.colorSpaceBL?this.colorSpaceBL?this.colorSpaceBL.copy(X.colorSpaceBL):this.colorSpaceBL=X.colorSpaceBL.clone():this.colorSpaceBL=void 0,X.colorSpaceBR?this.colorSpaceBR?this.colorSpaceBR.copy(X.colorSpaceBR):this.colorSpaceBR=X.colorSpaceBR.clone():this.colorSpaceBR=void 0,X.colorSpaceTLExp?this.colorSpaceTLExp?this.colorSpaceTLExp.copy(X.colorSpaceTLExp):this.colorSpaceTLExp=X.colorSpaceTLExp.clone():this.colorSpaceTLExp=void 0,X.colorSpaceTRExp?this.colorSpaceTRExp?this.colorSpaceTRExp.copy(X.colorSpaceTRExp):this.colorSpaceTRExp=X.colorSpaceTRExp.clone():this.colorSpaceTRExp=void 0,X.colorSpaceBLExp?this.colorSpaceBLExp?this.colorSpaceBLExp.copy(X.colorSpaceBLExp):this.colorSpaceBLExp=X.colorSpaceBLExp.clone():this.colorSpaceBLExp=void 0,X.colorSpaceBRExp?this.colorSpaceBRExp?this.colorSpaceBRExp.copy(X.colorSpaceBRExp):this.colorSpaceBRExp=X.colorSpaceBRExp.clone():this.colorSpaceBRExp=void 0,this}}]),Gl}(ZN),gU=mU;gU.Nodes=function(){var X=new SF("struct TextureCubeUVData {\n\t\t\tvec4 tl;\n\t\t\tvec4 tr;\n\t\t\tvec4 br;\n\t\t\tvec4 bl;\n\t\t\tvec2 f;\n\t\t}"),$=new yF("float cubeUV_maxMipLevel 8.0",!0),ee=new yF("float cubeUV_minMipLevel 4.0",!0),ne=new yF("float cubeUV_maxTileSize 256.0",!0),ae=new yF("float cubeUV_minTileSize 16.0",!0),de=new vF("float getFace(vec3 direction) {\n\t\t\t\tvec3 absDirection = abs(direction);\n\t\t\t\tfloat face = -1.0;\n\t\t\t\tif (absDirection.x > absDirection.z) {\n\t\t\t\t\tif (absDirection.x > absDirection.y)\n\t\t\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\t\t\telse\n\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t} else {\n\t\t\t\t\tif (absDirection.z > absDirection.y)\n\t\t\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\t\t\telse\n\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t}\n\t\t\t\treturn face;\n\t\t}");de.useKeywords=!1;var fe=new vF("vec2 getUV(vec3 direction, float face) {\n\t\t\t\tvec2 uv;\n\t\t\t\tif (face == 0.0) {\n\t\t\t\t\tuv = vec2(direction.z, direction.y) / abs(direction.x); // pos x\n\t\t\t\t} else if (face == 1.0) {\n\t\t\t\t\tuv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y\n\t\t\t\t} else if (face == 2.0) {\n\t\t\t\t\tuv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z\n\t\t\t\t} else if (face == 3.0) {\n\t\t\t\t\tuv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x\n\t\t\t\t} else if (face == 4.0) {\n\t\t\t\t\tuv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y\n\t\t\t\t} else {\n\t\t\t\t\tuv = vec2(direction.x, direction.y) / abs(direction.z); // neg z\n\t\t\t\t}\n\t\t\t\treturn 0.5 * (uv + 1.0);\n\t\t}");fe.useKeywords=!1;var Ue=new vF("TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n\t\t\tfloat face = getFace(direction);\n\t\t\tfloat filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n\t\t\tmipInt = max(mipInt, cubeUV_minMipLevel);\n\t\t\tfloat faceSize = exp2(mipInt);\n\t\t\tfloat texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n\t\t\tvec2 uv = getUV(direction, face) * (faceSize - 1.0);\n\t\t\tvec2 f = fract(uv);\n\t\t\tuv += 0.5 - f;\n\t\t\tif (face > 2.0) {\n\t\t\t\tuv.y += faceSize;\n\t\t\t\tface -= 3.0;\n\t\t\t}\n\t\t\tuv.x += face * faceSize;\n\t\t\tif(mipInt < cubeUV_maxMipLevel){\n\t\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t\t}\n\t\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\t\tuv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n\t\t\tuv *= texelSize;\n\t\t\tvec4 tl = texture2D(envMap, uv);\n\t\t\tuv.x += texelSize;\n\t\t\tvec4 tr = texture2D(envMap, uv);\n\t\t\tuv.y += texelSize;\n\t\t\tvec4 br = texture2D(envMap, uv);\n\t\t\tuv.x -= texelSize;\n\t\t\tvec4 bl = texture2D(envMap, uv);\n\t\t\treturn TextureCubeUVData( tl, tr, br, bl, f );\n\t\t}",[X,de,fe,$,ee,ne,ae]);Ue.useKeywords=!1;var je=new yF("float r0 1.0",!0),Ke=new yF("float v0 0.339",!0),et=new yF("float m0 -2.0",!0),tt=new yF("float r1 0.8",!0),nt=new yF("float v1 0.276",!0),it=new yF("float m1 -1.0",!0),ct=new yF("float r4 0.4",!0),dt=new yF("float v4 0.046",!0),vt=new yF("float m4 2.0",!0),gt=new yF("float r5 0.305",!0),yt=new yF("float v5 0.016",!0),_t=new yF("float m5 3.0",!0),wt=new yF("float r6 0.21",!0),St=new yF("float v6 0.0038",!0),Ct=new yF("float m6 4.0",!0);return{bilinearCubeUV:Ue,roughnessToMip:new vF("float roughnessToMip(float roughness) {\n\t\t\tfloat mip = 0.0;\n\t\t\tif (roughness >= r1) {\n\t\t\t\tmip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n\t\t\t} else if (roughness >= r4) {\n\t\t\t\tmip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n\t\t\t} else if (roughness >= r5) {\n\t\t\t\tmip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n\t\t\t} else if (roughness >= r6) {\n\t\t\t\tmip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n\t\t\t} else {\n\t\t\t\tmip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25\n\t\t\t}\n\t\t\treturn mip;\n\t\t}",[je,Ke,et,tt,nt,it,ct,dt,vt,gt,yt,_t,wt,St,Ct]),m0:et,cubeUV_maxMipLevel:$}}();var yU=function(X){_inherits(Jo,X);var $=_createSuper(Jo);function Jo(X){var ee;return _classCallCheck(this,Jo),(ee=$.call(this,"v3")).nodeType="Normal",ee.scope=null!=X?X:Jo.VIEW,ee}return _createClass(Jo,[{key:"getShared",value:function getShared(){return this.scope===Jo.WORLD}},{key:"build",value:function build(X,$,ee,ne){var ae=X.context[this.scope+"Normal"];return ae?ae.build(X,$,ee,ne):_get(_getPrototypeOf(Jo.prototype),"build",this).call(this,X,$,ee)}},{key:"generate",value:function generate(X,$,ee,ne,ae){var de;switch(this.scope){case Jo.VIEW:de=X.isShader("vertex")?"transformedNormal":"geometryNormal";break;case Jo.LOCAL:X.isShader("vertex")?de="objectNormal":(X.requires.normal=!0,de="vObjectNormal");break;case Jo.WORLD:X.isShader("vertex")?de="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(X.requires.worldNormal=!0,de="vWNormal")}return X.format(de,this.getType(X),$)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Jo.prototype),"copy",this).call(this,X),this.scope=X.scope,this}},{key:"toJSON",value:function toJSON(X){var $=this.getJSONNode(X);return $||(($=this.createJSONNode(X)).scope=this.scope),$.nodeType=this.nodeType,$}},{key:"fromJSON",value:function fromJSON(X,$){return _get(_getPrototypeOf(Jo.prototype),"fromJSON",this).call(this,X,$),X.scope&&(this.scope=X.scope),this}}]),Jo}(ZN),xU=yU;xU.LOCAL="local",xU.WORLD="world",xU.VIEW="view",xU.NORMAL="normal",JN.addKeyword("viewNormal",(function(){return new xU(xU.VIEW)})),JN.addKeyword("localNormal",(function(){return new xU(xU.NORMAL)})),JN.addKeyword("worldNormal",(function(){return new xU(xU.WORLD)}));var _U=function(X){_inherits(Ui,X);var $=_createSuper(Ui);function Ui(X){var ee;return _classCallCheck(this,Ui),(ee=$.call(this,"v3")).nodeType="Position",ee.scope=null!=X?X:Ui.LOCAL,ee}return _createClass(Ui,[{key:"getType",value:function getType(){return this.scope===Ui.PROJECTION?"v4":this.type}},{key:"getShader",value:function getShader(){switch(this.scope){case Ui.LOCAL:case Ui.WORLD:return!1}return!0}},{key:"generate",value:function generate(X,$,ee,ne,ae){var de;switch(this.scope){case Ui.LOCAL:X.isShader("vertex")?de="transformed":(X.requires.position=!0,de="vPosition");break;case Ui.WORLD:if(X.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";X.requires.worldPosition=!0,de="vWPosition";break;case Ui.VIEW:de=X.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case Ui.PROJECTION:de=X.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )"}return X.format(de,this.getType(),$)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Ui.prototype),"copy",this).call(this,X),this.scope=X.scope,this}},{key:"toJSON",value:function toJSON(X){var $=this.getJSONNode(X);return $||(($=this.createJSONNode(X)).scope=this.scope),$.nodeType=this.nodeType,$}},{key:"fromJSON",value:function fromJSON(X,$){return _get(_getPrototypeOf(Ui.prototype),"fromJSON",this).call(this,X,$),X.scope&&(this.scope=X.scope),this}}]),Ui}(ZN),wU=_U;wU.LOCAL="local",wU.WORLD="world",wU.VIEW="view",wU.PROJECTION="projection",JN.addKeyword("position",(function(){return new wU})),JN.addKeyword("worldPosition",(function(){return new wU(wU.WORLD)})),JN.addKeyword("viewPosition",(function(){return new wU(wU.VIEW)}));var SU=function(X){_inherits(di,X);var $=_createSuper(di);function di(X){var ee;return _classCallCheck(this,di),(ee=$.call(this,"v3")).nodeType="Reflect",ee.scope=null!=X?X:di.CUBE,ee}return _createClass(di,[{key:"getUnique",value:function getUnique(X){return!X.context.viewNormal}},{key:"getType",value:function getType(){return this.scope===di.SPHERE?"v2":this.type}},{key:"generate",value:function generate(X,$){var ee=this.getUnique(X);if(X.isShader("fragment")){var ne;switch(this.scope){case di.VECTOR:var ae=new xU(xU.VIEW),de=X.context.roughness,fe=ae.build(X,"v3"),Ue=new wU(wU.VIEW).build(X,"v3"),je=de?de.build(X,"f"):void 0,Ke="reflect( -normalize( ".concat(Ue," ), ").concat(fe," )");je&&(Ke="normalize( mix( ".concat(Ke,", ").concat(fe,", ").concat(je," * ").concat(je," ) )"));var et="inverseTransformDirection( ".concat(Ke,", viewMatrix )");ee?(X.addNodeCode("vec3 reflectVec = ".concat(et,";")),ne="reflectVec"):ne=et;break;case di.CUBE:var tt=new di(di.VECTOR).build(X,"v3"),nt="vec3( -"+tt+".x, "+tt+".yz )";ee?(X.addNodeCode("vec3 reflectCubeVec = ".concat(nt,";")),ne="reflectCubeVec"):ne=nt;break;case di.SPHERE:var it="normalize( ( viewMatrix * vec4( "+new di(di.VECTOR).build(X,"v3")+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";ee?(X.addNodeCode("vec2 reflectSphereVec = ".concat(it,";")),ne="reflectSphereVec"):ne=it}return X.format(ne,this.getType(),$)}return console.warn("ReflectNode is not compatible with "+X.shader+" shader."),X.format("vec3( 0.0 )",this.type,$)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(di.prototype),"copy",this).call(this,X),this.scope=X.scope,this}},{key:"toJSON",value:function toJSON(X){var $=this.getJSONNode(X);return $||(($=this.createJSONNode(X)).scope=this.scope),$.nodeType=this.nodeType,$}},{key:"fromJSON",value:function fromJSON(X,$){return _get(_getPrototypeOf(di.prototype),"fromJSON",this).call(this,X,$),X.scope&&(this.scope=X.scope),this}}]),di}(ZN),kU=SU;kU.CUBE="cube",kU.SPHERE="sphere",kU.VECTOR="vector";var CU=function(X){_inherits(wp,X);var $=_createSuper(wp);function wp(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new oU,ne=arguments.length>1?arguments[1]:void 0,ae=arguments.length>2?arguments[2]:void 0;return _classCallCheck(this,wp),(X=$.call(this,"v4")).nodeType="TextureCube",X.value=ee,X.radianceNode=new gU(X.value,null!=ne?ne:new kU(kU.VECTOR),ae),X.irradianceNode=new gU(X.value,new xU(xU.WORLD),new sU(1).setReadonly(!0)),X}return _createClass(wp,[{key:"generate",value:function generate(X,$){return X.isShader("fragment")?(X.require("irradiance"),X.context.bias&&X.context.bias.setTexture(this.value),("irradiance"===X.slot?this.irradianceNode:this.radianceNode).build(X,$)):(console.warn("TextureCubeNode is not compatible with "+X.shader+" shader."),X.format("vec4( 0.0 )",this.getType(X),$))}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(wp.prototype),"copy",this).call(this,X),this.value.copy(X.value),this.radianceNode.copy(X.radianceNode),this.irradianceNode.copy(X.irradianceNode),this}}]),wp}(ZN),AU=function(X){_inherits(Sp,X);var $=_createSuper(Sp);function Sp(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vd,ne=arguments.length>1?arguments[1]:void 0,ae=arguments.length>2?arguments[2]:void 0;return _classCallCheck(this,Sp),(X=$.call(this,"v4",{shared:!0})).nodeType="CubeTexture",X.value=ee,X.uv=null!=ne?ne:new kU,X.bias=ae,X}return _createClass(Sp,[{key:"getTexture",value:function getTexture(X,$){return _get(_getPrototypeOf(Sp.prototype),"generate",this).call(this,X,$,this.value.uuid,"tc")}},{key:"generate",value:function generate(X,$){var ee,ne;if("samplerCube"===$)return this.getTexture(X,$);var ae,de=this.getTexture(X,$),fe=null==(ee=this.uv)?void 0:ee.build(X,"v3"),Ue=this.bias?this.bias.build(X,"f"):void 0;void 0===Ue&&X.context.bias&&(Ue=X.context.bias.setTexture(this).build(X,"f")),ae=Ue?"texCubeBias( "+de+", "+fe+", "+Ue+" )":"texCube( "+de+", "+fe+" )";var je={include:X.isShader("vertex"),ignoreCache:!0},Ke=this.getType(X);return X.addContext(je),this.colorSpace=null!=(ne=this.colorSpace)?ne:new QF(new eU("",Ke)),this.colorSpace.fromDecoding(X.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(ae),ae=this.colorSpace.build(X,Ke),X.removeContext(),X.format(ae,Ke,$)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Sp.prototype),"copy",this).call(this,X),this.value.copy(X.value),X.uv?this.uv?this.uv.copy(X.uv):this.uv=X.uv.clone():this.uv=void 0,X.bias?this.bias?this.bias.copy(X.bias):this.bias=X.bias.clone():this.bias=void 0,this}}]),Sp}(XN),PU=["x","y","z","w"],DU=["float","vec2","vec3","vec4"],LU={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b","float[]":"f[]","vec4[]":"v4[]"},OU={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4","f[]":"float[]","v4[]":"vec4[]"},RU=function(){function Mp(){_classCallCheck(this,Mp),this.includes={consts:{},functions:{},structs:{}},this.cache="",this.slot="",this.shader="",this.context={},this.getIncludesCode=function(){function e(X,$){return X.deps.length-$.deps.length}return function(X,$){var ee=this.getIncludes(X,$);if(!ee)return"";var ne="";ee=ee.sort(e);for(var ae=0;ae<ee.length;ae++)ee[ae].src&&(ne+=ee[ae].src+"\n");return ne}}(),this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.fragmentVariables={},this.requires={uv:[],color:[],lights:!1,fog:!1,transparent:!1,irradiance:!1,position:!1,worldPosition:!1,normal:!1,worldNormal:!1,vWorldViewDir:!1,modelMatrix:!1,viewMatrix:!1,projectionMatrix:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","\t#define texCube(a, b) textureCube(a, b)","\t#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","\t#define tex2D(a, b) texture2D(a, b)","\t#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","\t#define texCube(a, b) textureCube(a, b)","\t#define texCubeBias(a, b, c) textureCube(a, b, c)","\t#define tex2D(a, b) texture2D(a, b)","\t#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif","\n\t\t\t// NOTE: Include Spline's blending modes. This could be part of BlendNode\n\t\t\t#define SPE_BLENDING_NORMAL 0\n\t\t\t#define SPE_BLENDING_MULTIPLY 1\n\t\t\t#define SPE_BLENDING_SCREEN 2\n\t\t\t#define SPE_BLENDING_OVERLAY 3\n\n\t\t\tvec3 spe_normalBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\treturn mix( a, b, alpha );\n\t\t\t}\n\n\t\t\tvec3 spe_multiplyBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\treturn mix( a, a * b, alpha );\n\t\t\t}\n\n\t\t\tvec3 spe_screenBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\tvec3 tmp = 1.0 - ( 1.0 - a ) * ( 1.0 - b );\n\t\t\t\treturn mix( a, tmp, alpha );\n\t\t\t}\n\n\t\t\tvec3 spe_overlayBlend( vec3 a, vec3 b, float alpha ) {\n\t\t\t\tvec3 tmp = mix( 1. - 2. * (1. - a) * (1. - b), 2. * a * b, step( a, vec3(.5) ) );\n\t\t\t\treturn clamp( mix( a, tmp, alpha ), 0.0, 1.0 );\n\t\t\t}\n\n\t\t\tvec3 spe_blend( vec3 a, vec3 b, float alpha, int mode ) {\n\t\t\t\tif ( mode == SPE_BLENDING_NORMAL ) return spe_normalBlend( a, b, alpha );\n\t\t\t\telse if ( mode == SPE_BLENDING_MULTIPLY ) return spe_multiplyBlend( a, b, alpha );\n\t\t\t\telse if ( mode == SPE_BLENDING_SCREEN ) return spe_screenBlend( a, b, alpha );\n\t\t\t\telse if ( mode == SPE_BLENDING_OVERLAY ) return spe_overlayBlend( a, b, alpha );\n\t\t\t\treturn vec3( 1.0 );\n\t\t\t}\n\t\t\t","#include <packing>","#include <common>"].join("\n"),this.parsCode={vertex:["float neighbor_offset = 0.0001;",""].join("\n"),fragment:["float accumAlpha = 0.0;","void accumulateAlpha(float alpha) {\n\t\t\t\t\taccumAlpha += (1.0 - accumAlpha) * alpha;\n\t\t\t\t}",""].join("\n")},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},arrayUniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.updaters=[],this.nodes=[],this.analyzing=!1}return _createClass(Mp,[{key:"build",value:function build(X,$){this.buildShader("vertex",X),this.buildShader("fragment",$);for(var ee=0;ee<this.requires.uv.length;ee++)if(this.requires.uv[ee]){var ne=ee>0?ee+1:"";this.addVaryCode("varying vec2 vUv"+ne+";"),ee>0&&this.addVertexParsCode("attribute vec2 uv"+ne+";"),this.addVertexFinalCode("vUv"+ne+" = uv"+ne+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition&&(this.addVaryCode("varying vec3 vWPosition;"),this.addVertexFinalCode("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;")),this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.modelMatrix&&this.addFragmentParsCode("uniform mat4 modelMatrix;"),this.requires.viewMatrix&&this.addFragmentParsCode("uniform mat4 viewMatrix;"),this.requires.projectionMatrix&&this.addFragmentParsCode("uniform mat4 projectionMatrix;"),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this.requires.vWorldViewDir&&(this.addVaryCode("varying vec3 vWorldViewDir;"),this.addVertexFinalCode("vWorldViewDir = isPerspectiveMatrix( projectionMatrix ) ?  ( (modelMatrix * vec4(position, 1.0)).xyz - cameraPosition ) : vec3( -viewMatrix[0][2], -viewMatrix[1][2], -viewMatrix[2][2] );")),this}},{key:"buildShader",value:function buildShader(X,$){this.resultCode[X]=$.build(this.setShader(X),"v4")}},{key:"setMaterial",value:function setMaterial(X,$){return this.material=X,this.renderer=$,this.requires.lights=X.lights,this.requires.fog=X.fog,this.mergeDefines(X.defines),this}},{key:"addFlow",value:function addFlow(X,$,ee){return this.addSlot(X).addCache($).addContext(ee)}},{key:"removeFlow",value:function removeFlow(){return this.removeSlot().removeCache().removeContext()}},{key:"addCache",value:function addCache(X){return this.cache=null!=X?X:"",this.caches.push(this.cache),this}},{key:"removeCache",value:function removeCache(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this}},{key:"addContext",value:function addContext(X){return this.context=Object.assign({},this.context,X),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this}},{key:"removeContext",value:function removeContext(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this}},{key:"addSlot",value:function addSlot(X){return this.slot=X||"",this.slots.push(this.slot),this}},{key:"removeSlot",value:function removeSlot(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this}},{key:"addFragmentVariable",value:function addFragmentVariable(X,$){void 0===this.fragmentVariables[X]&&(this.addFragmentCode("".concat($," ").concat(X,";")),this.fragmentVariables[X]="")}},{key:"addVertexCode",value:function addVertexCode(X){this.addCode(X,"vertex")}},{key:"addFragmentCode",value:function addFragmentCode(X){this.addCode(X,"fragment")}},{key:"addCode",value:function addCode(X,$){this.code[null!=$?$:this.shader]+=X+"\n"}},{key:"addVertexNodeCode",value:function addVertexNodeCode(X){this.addNodeCode(X,"vertex")}},{key:"addFragmentNodeCode",value:function addFragmentNodeCode(X){this.addNodeCode(X,"fragment")}},{key:"addNodeCode",value:function addNodeCode(X,$){this.nodeCode[null!=$?$:this.shader]+=X+"\n"}},{key:"clearNodeCode",value:function clearNodeCode(X){X=null!=X?X:this.shader;var $=this.nodeCode[X];return this.nodeCode[X]="",$}},{key:"clearVertexNodeCode",value:function clearVertexNodeCode(){return this.clearNodeCode("vertex")}},{key:"clearFragmentNodeCode",value:function clearFragmentNodeCode(){return this.clearNodeCode("fragment")}},{key:"addVertexFinalCode",value:function addVertexFinalCode(X){this.addFinalCode(X,"vertex")}},{key:"addFragmentFinalCode",value:function addFragmentFinalCode(X){this.addFinalCode(X,"fragment")}},{key:"addFinalCode",value:function addFinalCode(X,$){this.finalCode[null!=$?$:this.shader]+=X+"\n"}},{key:"addVertexParsCode",value:function addVertexParsCode(X){this.addParsCode(X,"vertex")}},{key:"addFragmentParsCode",value:function addFragmentParsCode(X){this.addParsCode(X,"fragment")}},{key:"addParsCode",value:function addParsCode(X,$){this.parsCode[null!=$?$:this.shader]+=X+"\n"}},{key:"addVaryCode",value:function addVaryCode(X){this.addVertexParsCode(X),this.addFragmentParsCode(X)}},{key:"isCache",value:function isCache(X){return-1!==this.caches.indexOf(X)}},{key:"isSlot",value:function isSlot(X){return-1!==this.slots.indexOf(X)}},{key:"define",value:function define(X,$){this.defines[X]=void 0===$?1:$}},{key:"require",value:function require(X){this.requires[X]=!0}},{key:"isDefined",value:function isDefined(X){return void 0!==this.defines[X]}},{key:"getVar",value:function getVar(X,$,ee){var ne=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"varying",ae=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"V",de=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",fe=this.getVars(ne),Ue=fe[X];if(!Ue){var je=fe.length;Ue={name:ee||"node"+ae+je+(de?"_"+de:""),type:$},fe.push(Ue),fe[X]=Ue}return Ue}},{key:"getTempVar",value:function getTempVar(X,$,ee,ne){return this.getVar(X,$,ee,this.shader,"T",ne)}},{key:"getAttribute",value:function getAttribute(X,$){if(!this.attributes[X]){var ee=this.getVar(X,$);this.addVertexParsCode("attribute "+$+" "+X+";"),this.addVertexFinalCode(ee.name+" = "+X+";"),this.attributes[X]={varying:ee,name:X,type:$}}return this.attributes[X]}},{key:"getCode",value:function getCode(X){return[this.prefixCode,this.parsCode[X],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[X],"uniform"),this.getVarListCode(this.inputs.arrayUniforms[X],"uniform"),this.getIncludesCode("consts",X),this.getIncludesCode("structs",X),this.getIncludesCode("functions",X),"void main() {",this.getVarListCode(this.getVars(X)),this.code[X],this.resultCode[X],this.finalCode[X],"}"].join("\n")}},{key:"getVarListCode",value:function getVarListCode(X,$){$=null!=$?$:"";for(var ee="",ne=0,ae=X.length;ne<ae;++ne){var de=X[ne],fe=de.type,Ue=de.name,je=de.size,Ke=this.getFormatByType(fe);if(void 0===Ke)throw new Error("Node pars "+Ke+" not found.");Ke.includes("[]")?ee+=$+" "+Ke.substring(0,Ke.length-2)+" "+Ue+"[".concat(je,"];\n"):ee+=$+" "+Ke+" "+Ue+";\n"}return ee}},{key:"getVars",value:function getVars(X){return this.inputs.vars[null!=X?X:this.shader]}},{key:"getNodeData",value:function getNodeData(X){var $=X instanceof qN?X.uuid:X;return this.nodeData[$]=this.nodeData[$]||{}}},{key:"createUniform",value:function createUniform(X,$,ee,ne,ae,de){if($.includes("[]")){var fe=this.inputs.arrayUniforms,Ue=fe.list.length,je=new WN({type:$,size:ee.size,name:ne||"nodeUA"+Ue+(de?"_"+de:""),node:ee,needsUpdate:ae});return fe.list.push(je),fe[X].push(je),fe[X][je.name]=je,this.uniforms[je.name]=je,je}var Ke=this.inputs.uniforms,et=Ke.list.length,tt=new WN({type:$,name:ne||"nodeU"+et+(de?"_"+de:""),node:ee,needsUpdate:ae});return Ke.list.push(tt),Ke[X].push(tt),Ke[X][tt.name]=tt,this.uniforms[tt.name]=tt,tt}},{key:"createVertexUniform",value:function createVertexUniform(X,$,ee,ne,ae){return this.createUniform("vertex",X,$,ee,ne,ae)}},{key:"createFragmentUniform",value:function createFragmentUniform(X,$,ee,ne,ae){return this.createUniform("fragment",X,$,ee,ne,ae)}},{key:"include",value:function include(X,$,ee){var ne,ae;if(X="string"==typeof X?JN.get(X):X,!1===this.context.include)return X.name;X instanceof vF?ae=this.includes.functions:X instanceof yF?ae=this.includes.consts:X instanceof SF&&(ae=this.includes.structs);var de=ae[this.shader]=ae[this.shader]||[];if(X){var fe=de[X.name];if(fe||(fe=de[X.name]={node:X,deps:[]},de.push(fe),fe.src=X.build(this,"source")),X instanceof vF&&$&&de[$.name]&&-1===de[$.name].deps.indexOf(X)&&(de[$.name].deps.push(X),null!=(ne=X.includes)&&ne.length)){var Ue=0;do{this.include(X.includes[Ue++],$)}while(Ue<X.includes.length)}return ee&&(fe.src=ee),X.name}throw new Error("Include not found.")}},{key:"colorToVectorProperties",value:function colorToVectorProperties(X){return X.replace("r","x").replace("g","y").replace("b","z").replace("a","w")}},{key:"colorToVector",value:function colorToVector(X){return X.replace(/c/g,"v3")}},{key:"getIncludes",value:function getIncludes(X,$){return this.includes[X][$||this.shader]}},{key:"getConstructorFromLength",value:function getConstructorFromLength(X){return DU[X-1]}},{key:"isTypeMatrix",value:function isTypeMatrix(X){return/^m/.test(X)}},{key:"getTypeLength",value:function getTypeLength(X){return"f"===X?1:parseInt(this.colorToVector(X).substr(1))}},{key:"getTypeFromLength",value:function getTypeFromLength(X){return 1===X?"f":"v"+X}},{key:"findNode",value:function findNode(){for(var X=arguments.length,$=new Array(X),ee=0;ee<X;ee++)$[ee]=arguments[ee];for(var ne=0;ne<arguments.length;ne++){var ae=$[ne];if(null!=ae&&ae.isNode)return ae}}},{key:"resolve",value:function resolve(){for(var X=arguments.length,$=new Array(X),ee=0;ee<X;ee++)$[ee]=arguments[ee];for(var ne=0;ne<arguments.length;ne++){var ae=$[ne];if(void 0!==ae){if(ae.isNode)return ae;if(ae.isTexture)switch(ae.mapping){case en:case tn:return new AU(ae);case un:return new CU(new oU(ae));default:return new oU(ae)}else{if(ae.isVector2)return new QN(ae);if(ae.isVector3)return new KN(ae);if(ae.isVector4)return new eF(ae)}}}}},{key:"format",value:function format(X,$,ee){switch(this.colorToVector(ee+" <- "+$)){case"f <- v2":case"f <- v3":case"f <- v4":return X+".x";case"f <- i":case"f <- b":return"float( "+X+" )";case"v2 <- f":return"vec2( "+X+" )";case"v2 <- v3":case"v2 <- v4":return X+".xy";case"v2 <- i":case"v2 <- b":case"v3 <- i":case"v3 <- b":return"vec2( float( "+X+" ) )";case"v3 <- f":return"vec3( "+X+" )";case"v3 <- v2":return"vec3( "+X+", 0.0 )";case"v3 <- v4":return X+".xyz";case"v4 <- f":return"vec4( "+X+" )";case"v4 <- v2":return"vec4( "+X+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+X+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+X+" ) )";case"i <- f":case"i <- b":return"int( "+X+" )";case"i <- v2":case"i <- v3":case"i <- v4":return"int( "+X+".x )";case"b <- f":return"( "+X+" != 0.0 )";case"b <- v2":return"( "+X+" != vec2( 0.0 ) )";case"b <- v3":return"( "+X+" != vec3( 0.0 ) )";case"b <- v4":return"( "+X+" != vec4( 0.0 ) )";case"b <- i":return"( "+X+" != 0 )"}return X}},{key:"getTypeByFormat",value:function getTypeByFormat(X){return LU[X]||X}},{key:"getFormatByType",value:function getFormatByType(X){return OU[X]||X}},{key:"getUUID",value:function getUUID(X,$){return($=void 0===$||$)&&this.cache&&(X=this.cache+"-"+X),X}},{key:"getElementByIndex",value:function getElementByIndex(X){return PU[X]}},{key:"getIndexByElement",value:function getIndexByElement(X){return PU.indexOf(X)}},{key:"isShader",value:function isShader(X){return this.shader===X}},{key:"setShader",value:function setShader(X){return this.shader=X,this}},{key:"mergeDefines",value:function mergeDefines(X){for(var $ in X)this.defines[$]=X[$];return this.defines}},{key:"mergeUniform",value:function mergeUniform(X){for(var $ in X)this.uniforms[$]=X[$];return this.uniforms}},{key:"getTextureEncodingFromMap",value:function getTextureEncodingFromMap(X){var $;return X?X.isTexture&&($=X.encoding):$=qr,$===qr&&this.context.gamma&&($=Xr),$}}]),Mp}(),BU=function(X){_inherits(Kh,X);var $=_createSuper(Kh);function Kh(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new qN;return _classCallCheck(this,Kh),(X=$.call(this,"v4")).nodeType="Raw",X.value=ee,X}return _createClass(Kh,[{key:"generate",value:function generate(X){var $=this.value.analyzeAndFlow(X,this.type),ee=$.code+"\n";return X.isShader("vertex")?ee+="gl_Position = "+$.result+";":ee+="gl_FragColor = "+$.result+";",ee}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Kh.prototype),"copy",this).call(this,X),this.value.copy(X.value),this}}]),Kh}(qN),IU=function(X){_inherits(Ot,X);var $=_createSuper(Ot);function Ot(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,ne=arguments.length>1?arguments[1]:void 0,ae=arguments.length>2?arguments[2]:void 0,de=arguments.length>3?arguments[3]:void 0;return _classCallCheck(this,Ot),(X=$.call(this,"c")).nodeType="Color",X.value=ee instanceof $N?ee:new $N(ee||0,ne,ae,de),X}return _createClass(Ot,[{key:"setRGBA",value:function setRGBA(X){this.value.setRGBA(X.r,X.g,X.b,X.a)}},{key:"generate",value:function generate(X,$,ee,ne,ae,de){ee=X.getUUID(null!=ee?ee:this.getUUID()),ne=null!=ne?ne:this.getType(X);var fe=X.getNodeData(ee),Ue=this.getReadonly()&&void 0!==this.generateReadonly;if(this.alpha){var je=this.alpha.build(X,"f");X.addFragmentNodeCode("accumAlpha += ( 1.0 - accumAlpha ) * ".concat(je,";"))}return Ue?this.generateReadonly(X,$,ee,ne,ae,de):X.isShader("vertex")?(fe.vertex||(fe.vertex=X.createVertexUniform(ne,this,ae,de,this.getLabel())),X.format(fe.vertex.name,ne,$)):(fe.fragment||(fe.fragment=X.createFragmentUniform(ne,this,ae,de,this.getLabel())),X.format(fe.fragment.name,ne,$))}},{key:"generateReadonly",value:function generateReadonly(X,$,ee,ne,ae,de){return X.format("vec3("+this.value.r+", "+this.value.g+", "+this.value.b+")",ne,$)}}]),Ot}(XN),zU=function(X){_inherits(ht,X);var $=_createSuper(ht);function ht(X){var ee;return _classCallCheck(this,ht),(ee=$.call(this,"i")).nodeType="Int",ee.value=Math.floor(null!=X?X:0),ee}return _createClass(ht,[{key:"generateReadonly",value:function generateReadonly(X,$,ee,ne,ae,de){return X.format(this.value.toString(),ne,$)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(ht.prototype),"copy",this).call(this,X),this.value=X.value,this}}]),ht}(XN),NU=function(){function $t(X,$,ee,ne){if(_classCallCheck(this,$t),this.next=void 0,this.uniforms={},this.textures={},this.defines={},this.id=X,this.uuid=$,ee){for(var ae in this.type=ee.type,ee)"type"!==ae&&"calpha"!==ae&&(this.uniforms["f".concat(this.id,"_").concat(ae)]=ee[ae]);for(var de in ne)this.defines[de]=ne[de]}}return _createClass($t,[{key:"copy",value:function copy(X){for(var $ in this.id=X.id,this.type=X.type,this.defines=Ct({},X.defines),X.uniforms)"transmissionSamplerMap"===this.getName($)||"transmissionDepthMap"===this.getName($)||(this.uniforms[$]?this.uniforms[$].copy(X.uniforms[$]):this.uniforms[$]=X.uniforms[$].clone());return this}},{key:"clone",value:function clone(){return new $t(this.id).copy(this)}},{key:"fromJSON",value:function fromJSON(X,$){for(var ee in this.id=X.id,this.defines=Ct({},X.defines),X.uniforms)this.uniforms[ee]=$.getNode(X.uniforms[ee]);if("texture"===X.type){if(!("f".concat(this.id,"_textureSize")in this.uniforms)){var ne=this.uniforms["f".concat(this.id,"_texture")].value.image;this.uniforms["f".concat(X.id,"_textureSize")]=new KN(ne.width,ne.height)}"f".concat(this.id,"_size")in this.uniforms||(this.uniforms["f".concat(X.id,"_size")]=new QN(200,200)),"f".concat(X.id,"_axis")in this.uniforms||(this.uniforms["f".concat(X.id,"_axis")]=new zU(0)),"f".concat(X.id,"_side")in this.uniforms||(this.uniforms["f".concat(X.id,"_side")]=new zU(0)),"f".concat(X.id,"_projection")in this.uniforms||(this.uniforms["f".concat(X.id,"_projection")]=new zU(0))}else"noise"===X.type?("f".concat(X.id,"_noiseType")in this.uniforms||(this.uniforms["f".concat(X.id,"_noiseType")]=new zU(0)),"f".concat(X.id,"_size")in this.uniforms||(this.uniforms["f".concat(X.id,"_size")]=new KN(-1,-1,-1))):"depth"===X.type&&("f".concat(X.id,"_isWorldSpace")in this.uniforms||(this.uniforms["f".concat(X.id,"_isWorldSpace")]=new sU(1)));return this}},{key:"toJSON",value:function toJSON(X){var $={};for(var ee in this.uniforms)$[ee]=this.uniforms[ee].toJSON(X).uuid;return{id:this.id,type:this.type,defines:JSON.parse(JSON.stringify(this.defines)),uniforms:$,next:null==this.next?void 0:this.next.toJSON(X)}}},{key:"copyUniforms",value:function copyUniforms(X){for(var $ in this.uniforms){var ee=this.getName($);void 0!==ee&&X.uniforms["f".concat(X.id,"_").concat(ee)]&&"transmissionDepthMap"!==ee&&"transmissionSamplerMap"!==ee&&this.uniforms[$].copy(X.uniforms["f".concat(X.id,"_").concat(ee)])}return this}},{key:"hasValueByKey",value:function hasValueByKey(X){return void 0!==this.uniforms[X]}},{key:"hasValue",value:function hasValue(X){return this.hasValueByKey("f".concat(this.id,"_").concat(X))}},{key:"setValue",value:function setValue(X,$){var ee="f".concat(this.id,"_").concat(X);this.hasValueByKey(ee)&&void 0!==$&&(this.uniforms[ee].value=$)}},{key:"getValue",value:function getValue(X){var $="f".concat(this.id,"_").concat(X);if(this.hasValueByKey($))return this.uniforms[$].value}},{key:"getValues",value:function getValues(){var X={type:this.type};for(var $ in this.uniforms){var ee=this.getName($);if(void 0!==ee){var ne=this.uniforms["f".concat(this.id,"_").concat(ee)].value;void 0!==ne&&(Array.isArray(ne)?X[ee]=ne.map((function(X){return X.clone?X.clone():X})):X[ee]=ne.clone?ne.clone():ne)}}return X}},{key:"getName",value:function getName(X){var $=/f\d+_(.*)/.exec(X);if($&&$.length>1)return $[1];console.log("Layer.getName: error ".concat(X))}},{key:"getNames",value:function getNames(){var X=[];for(var $ in this.uniforms){var ee=this.getName($);ee&&X.push(ee)}return X}},{key:"isEqual",value:function isEqual(X){for(var $ in X.uniforms){var ee=X.getName($);if(!ee)return!1;var ne=this.getValue(ee),ae=X.uniforms[$].value;if(ae.value instanceof eo){if(ne.image!==ae.image)return!1}else if(Array.isArray(ae)){for(var de=ne,fe=0,Ue=de.length;fe<Ue;++fe)if(de[fe]!==ae[fe])return!1}else{var je=ne;if(je.equals){if(!je.equals(ae))return!1}else if(ne!==ae)return!1}}return!0}},{key:"dispose",value:function dispose(){}}]),$t}();function D1(X){var $=X instanceof NU?X.type:X;return"texture"===$||"displace_map"===$||"matcap"===$}var FU=function(X){_inherits(Zh,X);var $=_createSuper(Zh);function Zh(X){var ee;return _classCallCheck(this,Zh),(ee=$.call(this,"b")).nodeType="Bool",ee.value=null!=X&&X,ee}return _createClass(Zh,[{key:"generateReadonly",value:function generateReadonly(X,$,ee,ne){return X.format(this.value?"true":"false",ne,$)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Zh.prototype),"copy",this).call(this,X),this.value=X.value,this}}]),Zh}(XN),UU=function(X){_inherits(ps,X);var $=_createSuper(ps);function ps(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,ne=arguments.length>1?arguments[1]:void 0;return _classCallCheck(this,ps),(X=$.call(this,"v4[]")).nodeType="Vector4Array",X.size=ee,X.value=Array.isArray(ne)?ne:ne instanceof to?new Array(ee).fill(ne):new Array(ee).fill(new to(0)),X}return _createClass(ps,[{key:"copy",value:function copy(X){return _get(_getPrototypeOf(ps.prototype),"copy",this).call(this,X),this.value=X.value.map((function(X){return X.clone()})),this}}]),ps}(XN),VU=function(X){_inherits(Ko,X);var $=_createSuper(Ko);function Ko(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,ne=arguments.length>1?arguments[1]:void 0;return _classCallCheck(this,Ko),(X=$.call(this,"f[]")).nodeType="FloatArray",X.size=ee,X.value=Array.isArray(ne)?ne:"number"==typeof ne?new Array(ee).fill(ne):new Array(ee).fill(0),X}return _createClass(Ko,[{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Ko.prototype),"copy",this).call(this,X),this.size=X.size,this.value=(0,ae.Z)(X.value),this}}]),Ko}(XN),HU=function(X){_inherits(Vl,X);var $=_createSuper(Vl);function Vl(X){var ee;return _classCallCheck(this,Vl),(ee=$.call(this,"m3")).nodeType="Matrix3",ee.value=null!=X?X:new ga,ee}return _createClass(Vl,[{key:"generateReadonly",value:function generateReadonly(X,$,ee,ne,ae,de){return X.format("mat3("+this.value.elements.join(", ")+")",ne,$)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Vl.prototype),"copy",this).call(this,X),this.elements=X.elements,this}},{key:"elements",get:function get(){return this.value.elements},set:function set(X){this.value.fromArray(X)}}]),Vl}(XN),jU=function(X){_inherits(eu,X);var $=_createSuper(eu);function eu(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new oU,ne=arguments.length>1?arguments[1]:void 0,ae=arguments.length>2?arguments[2]:void 0,de=arguments.length>3?arguments[3]:void 0,fe=arguments.length>4?arguments[4]:void 0,Ue=arguments.length>5?arguments[5]:void 0,je=arguments.length>6?arguments[6]:void 0,Ke=arguments.length>7?arguments[7]:void 0,et=arguments.length>8?arguments[8]:void 0;return _classCallCheck(this,eu),(X=$.call(this,"v3")).nodeType="CustomTexture",X.firstTime=!0,X.texture=ee,X.textureSize=ne,X.crop=ae,X.projection=de,X.axis=fe,X.side=Ue,X.size=je,X.mat=new HU(X.texture.value.matrix),X.alpha=Ke,X.mode=et,X.calpha="g".concat(X.uuid.toString().replace(/-/g,""),"_calpha"),X}return _createClass(eu,[{key:"generate",value:function generate(X,$){X.require("position"),X.require("normal"),X.require("uv"),X.requires.uv=[!0],X.extensions.shaderTextureLOD=!0,X.extensions.derivatives=!0;var ee,ne="g".concat(this.uuid.toString().replace(/-/g,""));switch(this.projection.value){case 3:ee=X.include(eu.Nodes.cylindrical);break;case 2:ee=X.include(eu.Nodes.spherical);break;case 1:var ae=["vec3(1.0, 0.0, 0.0)","vec3(0.0, 1.0, 0.0)","vec3(0.0, 0.0, 1.0)"][this.axis.value],de=new vF("\n\t\tvec3 ".concat(ne,"_planarTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {\n\n\t\t\t\tvec2 uvs = ( mat * vec3( (").concat(ne,"_vCustomUv * 2. - 1.) / (size * .5), 1. ) / 2. + 0.5 ).xy;\n\n\t\t\t\tvec4 tmp = texture2D( tex, uvs );\n\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\t").concat(0===this.side.value?"":"lalpha *= step(0.0, ".concat(2===this.side.value?"-1.0 * ":"","dot(vObjectNormal, mat * ").concat(ae,"));"),"\n\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\t\t\t\treturn col;\n\t\t\t}"));ee=X.include(de);break;default:ee=X.include(eu.Nodes.uv)}if(1===this.projection.value&&this.firstTime){X.addVertexParsCode("varying vec2 ".concat(ne,"_vCustomUv;")),X.addFragmentParsCode("varying vec2 ".concat(ne,"_vCustomUv;"));var fe=["zy","xz","xy"][this.axis.value];X.addVertexFinalCode("".concat(ne,"_vCustomUv = (1. + (transformed.").concat(fe,")) / 2.;"))}X.addFragmentVariable(this.calpha,"float");var Ue=[];return Ue.push(this.texture.getTexture(X,"t")),Ue.push(this.textureSize.build(X,"v2")),Ue.push(this.crop.build(X,"f")),Ue.push(this.mat.build(X,"mat3")),Ue.push(this.size.build(X,"v2")),Ue.push(this.alpha.build(X,"f")),Ue.push(this.mode.build(X,"i")),Ue.push(this.calpha),this.firstTime=!this.firstTime,X.format(ee+"("+Ue.join(",")+")",this.getType(X),$)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(eu.prototype),"copy",this).call(this,X),this.texture.copy(X.texture),this.textureSize=X.textureSize.clone(),this.crop=X.crop.clone(),this.projection=X.projection.clone(),this.axis=X.axis.clone(),this.size=X.size.clone(),this.alpha=X.alpha.clone(),this.mode=X.mode.clone(),this}}]),eu}(ZN),GU=jU;GU.Nodes={cylindrical:new vF("\nvec3 cylindricalTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {\n                vec3 posN = normalize(position);\n                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);\n                float scaledHeight = position.y / (size.y * 0.5);\n                float v =  (scaledHeight / 2.) + .5;\n\n                vec2 calculatedUv = vec2(u,v);\n\t\t\t\tvec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;\n\n                vec2 df = fwidth(uvs);\n               \tif(df.x > 0.5) df.x = 0.;\n\n\t\t\t\t#ifdef GL_EXT_shader_texture_lod\n                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#else\n                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#endif\n\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\t\t\t\treturn col;\n\t\t\t}\n"),spherical:new vF("\nvec3 sphericalTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {\n                vec3 posN = normalize(vPosition);\n                float u = 0.5 + atan(posN.z, posN.x) / (2.*3.1415);\n                float v = 0.5 + asin(posN.y) / 3.1415;\n\n                vec2 calculatedUv = vec2(u,v);\n\t\t\t\tvec2 uvs = ( mat * vec3( calculatedUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;\n\n                vec2 df = fwidth(uvs);\n               \tif(df.x > 0.5) df.x = 0.;\n\t\t\t\t#ifdef GL_EXT_shader_texture_lod\n                vec4 tmp = texture2DLodEXT(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#else\n                vec4 tmp = textureLod(tex, uvs, log2(max(df.x, df.y)*min(textureSize.x, textureSize.y)));\n\t\t\t\t#endif\n\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\t\t\t\treturn col;\n\t\t\t}\n"),uv:new vF("vec3 uvTexture(sampler2D tex, vec2 textureSize, float crop, mat3 mat, vec2 size, float alpha, int mode, out float calpha) {\n\n\t\t\t\tvec2 uvs = ( mat * vec3( vUv * 2. - 1., 1. ) / 2. + 0.5 ).xy;\n\t\t\t\tvec4 tmp = texture2D( tex, uvs );\n\n\t\t\t\tvec3 col = tmp.rgb;\n\n\t\t\t\tfloat lalpha = alpha * tmp.a;\n\t\t\t\tif ( crop > 0.5 ) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\tlalpha = 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\t\t\t\treturn col;\n\t\t\t}")};var WU=function(X){_inherits(yv,X);var $=_createSuper(yv);function yv(X,ee,ne,ae,de,fe,Ue){var je;return _classCallCheck(this,yv),(je=$.call(this,"v3")).nodeType="Fresnel",je.color=X,je.bias=ee,je.scale=ne,je.intensity=ae,je.factor=de,je.alpha=fe,je.mode=Ue,je.calpha="g".concat(je.uuid.toString().replace(/-/g,""),"_calpha"),je}return _createClass(yv,[{key:"generate",value:function generate(X,$){if(X.require("vWorldViewDir"),X.require("worldNormal"),X.isShader("fragment")){X.addFragmentVariable(this.calpha,"float");var ee=X.include(yv.Nodes.fresnel),ne=[];return ne.push(this.color.build(X,"c")),ne.push(this.bias.build(X,"f")),ne.push(this.scale.build(X,"f")),ne.push(this.intensity.build(X,"f")),ne.push(this.factor.build(X,"f")),ne.push(this.alpha.build(X,"f")),ne.push(this.mode.build(X,"i")),ne.push(this.calpha),X.format(ee+"("+ne.join(",")+")",this.getType(X),$)}return console.warn("FresnelNode is not compatible with "+X.shader+" shader."),X.format("vec3( 0.0 )",this.getType(X),$)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(yv.prototype),"copy",this).call(this,X),this.color=X.color.clone(),this.bias=X.bias.clone(),this.scale=X.scale.clone(),this.intensity=X.intensity.clone(),this.factor=X.factor.clone(),this.alpha=X.alpha.clone(),this.mode=X.mode.clone(),this.calpha=X.calpha,this}}]),yv}(ZN),XU=WU;XU.Nodes={fresnel:new vF("vec3 fresnel(vec3 color, float bias, float scale, float intensity, float factor, float alpha, int mode, out float calpha) {\n\t\t\t\tfloat fresnel = bias + scale * pow( abs( factor + dot( normalize( vWorldViewDir ), normalize( vWNormal ) ) ), intensity );\n\n\t\t\t\tfloat lalpha = clamp( fresnel, 0.0, 1.0 ) * alpha;\n\t\t\t\tcalpha = lalpha / clamp(lalpha + accumAlpha, 0.001, 1.0);\n\t\t\t\taccumAlpha += (1.0 - accumAlpha) * lalpha;\n\t\t\t\treturn color;\n\t\t\t}")};var s,KU=((s=KU||{}).SIMPLEX="simplex3d",s.SIMPLEX_FRACTAL="simplex3dFractal",s.ASHIMA="simplexAshima",s.FBM="fbm",s.PERLIN="perlin",s),$U=function(){var X=new vF("vec3 random3(vec3 c) {\n\t\t\tfloat j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));\n\t\t\tvec3 r;\n\t\t\tr.z = fract(512.0*j);\n\t\t\tj *= .125;\n\t\t\tr.x = fract(512.0*j);\n\t\t\tj *= .125;\n\t\t\tr.y = fract(512.0*j);\n\t\t\treturn r-0.5;\n\t\t}"),$=new vF("float simplex3d(vec3 p) {\n\t\t\t vec3 s = floor(p + dot(p, vec3(F3)));\n\t\t\t vec3 x = p - s + dot(s, vec3(G3));\n\t\t\t \n\t\t\t vec3 e = step(vec3(0.0), x - x.yzx);\n\t\t\t vec3 i1 = e*(1.0 - e.zxy);\n\t\t\t vec3 i2 = 1.0 - e.zxy*(1.0 - e);\n\t\t\t\t\n\t\t\t vec3 x1 = x - i1 + G3;\n\t\t\t vec3 x2 = x - i2 + 2.0*G3;\n\t\t\t vec3 x3 = x - 1.0 + 3.0*G3;\n\t\t\t \n\t\t\t vec4 w, d;\n\t\t\t \n\t\t\t w.x = dot(x, x);\n\t\t\t w.y = dot(x1, x1);\n\t\t\t w.z = dot(x2, x2);\n\t\t\t w.w = dot(x3, x3);\n\t\t\t \n\t\t\t w = max(0.6 - w, 0.0);\n\t\t\t \n\t\t\t d.x = dot(random3(s), x);\n\t\t\t d.y = dot(random3(s + i1), x1);\n\t\t\t d.z = dot(random3(s + i2), x2);\n\t\t\t d.w = dot(random3(s + 1.0), x3);\n\t\t\t \n\t\t\t w *= w;\n\t\t\t w *= w;\n\t\t\t d *= w;\n\t\t\t \n\t\t\t return dot(d, vec4(52.0));\n\t\t}",[X]);$.keywords.F3=new yF("float F3 0.3333333"),$.keywords.G3=new yF("float G3 0.1666667");var ee=new vF("float simplex3dFractal(vec3 m) {\n\t\t\tmat3 rot1 = mat3(-0.37, 0.36, 0.85,-0.14,-0.93, 0.34,0.92, 0.01,0.4);\n\t\t\tmat3 rot2 = mat3(-0.55,-0.39, 0.74, 0.33,-0.91,-0.24,0.77, 0.12,0.63);\n\t\t\tmat3 rot3 = mat3(-0.71, 0.52,-0.47,-0.08,-0.72,-0.68,-0.7,-0.45,0.56);\n\t\t\treturn 0.5333333 * simplex3d(m * rot1)\n\t\t\t\t + 0.2666667 * simplex3d(2.0 * m * rot2)\n\t\t\t\t + 0.1333333 * simplex3d(4.0 * m * rot3)\n\t\t\t\t + 0.0666667 * simplex3d(8.0 * m);\n\t\t}",[$]),ne=new vF("vec4 permute(vec4 x){return mod(((x*34.0)+1.0)*x, 289.0);}"),ae=new vF("vec4 taylorInvSqrt(vec4 r){return 1.79284291400159 - 0.85373472095314 * r;}"),de=new vF("float simplexAshima(vec3 v) {\n\t\t  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n\t\t  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\t\t  vec3 i  = floor(v + dot(v, C.yyy) );\n\t\t  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\t\t  vec3 g = step(x0.yzx, x0.xyz);\n\t\t  vec3 l = 1.0 - g;\n\t\t  vec3 i1 = min( g.xyz, l.zxy );\n\t\t  vec3 i2 = max( g.xyz, l.zxy );\n\t\t  vec3 x1 = x0 - i1 + 1.0 * C.xxx;\n\t\t  vec3 x2 = x0 - i2 + 2.0 * C.xxx;\n\t\t  vec3 x3 = x0 - 1. + 3.0 * C.xxx;\n\t\t  i = mod(i, 289.0 ); \n\t\t  vec4 p = permute( permute( permute( \n\t\t\t\t\t i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n\t\t\t\t   + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) \n\t\t\t\t   + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\t\t  float n_ = 1.0/7.0; // N=7\n\t\t  vec3  ns = n_ * D.wyz - D.xzx;\n\t\t  vec4 j = p - 49.0 * floor(p * ns.z *ns.z);  //  mod(p,N*N)\n\t\t  vec4 x_ = floor(j * ns.z);\n\t\t  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\t\t  vec4 x = x_ *ns.x + ns.yyyy;\n\t\t  vec4 y = y_ *ns.x + ns.yyyy;\n\t\t  vec4 h = 1.0 - abs(x) - abs(y);\n\t\t  vec4 b0 = vec4( x.xy, y.xy );\n\t\t  vec4 b1 = vec4( x.zw, y.zw );\n\t\t  vec4 s0 = floor(b0)*2.0 + 1.0;\n\t\t  vec4 s1 = floor(b1)*2.0 + 1.0;\n\t\t  vec4 sh = -step(h, vec4(0.0));\n\t\t  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n\t\t  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\t\t  vec3 p0 = vec3(a0.xy,h.x);\n\t\t  vec3 p1 = vec3(a0.zw,h.y);\n\t\t  vec3 p2 = vec3(a1.xy,h.z);\n\t\t  vec3 p3 = vec3(a1.zw,h.w);\n\t\t  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n\t\t  p0 *= norm.x;\n\t\t  p1 *= norm.y;\n\t\t  p2 *= norm.z;\n\t\t  p3 *= norm.w;\n\t\t  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n\t\t  m = m * m;\n\t\t  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), \n\t\t\t\t\t\t\t\t\t\tdot(p2,x2), dot(p3,x3) ) );\n\t\t}",[ne,ae]),fe=new vF("vec4 mod289(vec4 x){return x - floor(x * (1.0 / 289.0)) * 289.0;}"),Ue=new vF("vec4 perm(vec4 x){return mod289(((x * 34.0) + 1.0) * x);}",[fe]),je=new vF("float noise(vec3 p){\n\t\t\tvec3 a = floor(p);\n\t\t\tvec3 d = p - a;\n\t\t\td = d * d * (3.0 - 2.0 * d);\n\t\t\tvec4 b = a.xxyy + vec4(0.0, 1.0, 0.0, 1.0);\n\t\t\tvec4 k1 = perm(b.xyxy);\n\t\t\tvec4 k2 = perm(k1.xyxy + b.zzww);\n\t\t\tvec4 c = k2 + a.zzzz;\n\t\t\tvec4 k3 = perm(c);\n\t\t\tvec4 k4 = perm(c + 1.0);\n\t\t\tvec4 o1 = fract(k3 * (1.0 / 41.0));\n\t\t\tvec4 o2 = fract(k4 * (1.0 / 41.0));\n\t\t\tvec4 o3 = o2 * d.z + o1 * (1.0 - d.z);\n\t\t\tvec2 o4 = o3.yw * d.x + o3.xz * (1.0 - d.x);\n\t\t\treturn o4.y * d.y + o4.x * (1.0 - d.y);\n\t\t}",[Ue]),Ke=new vF("float fbm(vec3 x) {\n\t\t\tfloat v = 0.0;\n\t\t\tfloat a = 0.5;\n\t\t\tvec3 shift = vec3(100);\n\t\t\tfor (int i = 0; i < NUM_OCTAVES; ++i) {\n\t\t\t\tv += a * noise(x);\n\t\t\t\tx = x * 2.0 + shift;\n\t\t\t\ta *= 0.5;\n\t\t\t}\n\t\t\treturn v;\n\t\t}",[je]);Ke.keywords.NUM_OCTAVES=new yF("int NUM_OCTAVES ".concat(5));var et=new vF("vec3 fade(vec3 t) {return t*t*t*(t*(t*6.0-15.0)+10.0);}");return{simplex:$,simplexFractal:ee,simplexAshima:de,fbm:Ke,perlin:new vF("float perlin(vec3 P){\n\t\t  vec3 Pi0 = floor(P);\n\t\t  vec3 Pi1 = Pi0 + vec3(1.0);\n\t\t  Pi0 = mod(Pi0, 289.0);\n\t\t  Pi1 = mod(Pi1, 289.0);\n\t\t  vec3 Pf0 = fract(P);\n\t\t  vec3 Pf1 = Pf0 - vec3(1.0);\n\t\t  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n\t\t  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n\t\t  vec4 iz0 = Pi0.zzzz;\n\t\t  vec4 iz1 = Pi1.zzzz;\n\t\t  vec4 ixy = permute(permute(ix) + iy);\n\t\t  vec4 ixy0 = permute(ixy + iz0);\n\t\t  vec4 ixy1 = permute(ixy + iz1);\n\t\t  vec4 gx0 = ixy0 / 7.0;\n\t\t  vec4 gy0 = fract(floor(gx0) / 7.0) - 0.5;\n\t\t  gx0 = fract(gx0);\n\t\t  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n\t\t  vec4 sz0 = step(gz0, vec4(0.0));\n\t\t  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n\t\t  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\t\t  vec4 gx1 = ixy1 / 7.0;\n\t\t  vec4 gy1 = fract(floor(gx1) / 7.0) - 0.5;\n\t\t  gx1 = fract(gx1);\n\t\t  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n\t\t  vec4 sz1 = step(gz1, vec4(0.0));\n\t\t  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n\t\t  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\t\t  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n\t\t  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n\t\t  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n\t\t  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n\t\t  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n\t\t  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n\t\t  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n\t\t  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\t\t  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n\t\t  g000 *= norm0.x;\n\t\t  g010 *= norm0.y;\n\t\t  g100 *= norm0.z;\n\t\t  g110 *= norm0.w;\n\t\t  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n\t\t  g001 *= norm1.x;\n\t\t  g011 *= norm1.y;\n\t\t  g101 *= norm1.z;\n\t\t  g111 *= norm1.w;\n\t\t  float n000 = dot(g000, Pf0);\n\t\t  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n\t\t  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n\t\t  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n\t\t  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n\t\t  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n\t\t  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n\t\t  float n111 = dot(g111, Pf1);\n\t\t  vec3 fade_xyz = fade(Pf0);\n\t\t  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n\t\t  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n\t\t  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); \n\t\t  return 2.2 * n_xyz;\n\t\t}",[ne,ae,et])}}(),eV=function(X){_inherits(vv,X);var $=_createSuper(vv);function vv(X,ee,ne,ae,de,fe,Ue){var je;return _classCallCheck(this,vv),(je=$.call(this,"v3")).nodeType="Rainbow",je.filmThickness=X,je.movement=ee,je.wavelengths=ne,je.noiseStrength=ae,je.noiseScale=de,je.offset=fe,je.alpha=Ue,je.calpha="g".concat(je.uuid.toString().replace(/-/g,""),"_calpha"),je}return _createClass(vv,[{key:"generate",value:function generate(X,$){if(X.require("vWorldViewDir"),X.require("worldNormal"),X.isShader("fragment")){X.require("uv"),X.requires.uv=[!0],X.addFragmentVariable(this.calpha,"float");var ee=X.include(vv.Nodes.rainbow),ne=[];return ne.push(this.filmThickness.build(X,"f")),ne.push(this.movement.build(X,"f")),ne.push(this.wavelengths.build(X,"v3")),ne.push(this.noiseStrength.build(X,"f")),ne.push(this.noiseScale.build(X,"f")),ne.push(this.offset.build(X,"v3")),ne.push(this.alpha.build(X,"f")),ne.push(this.calpha),X.format(ee+"("+ne.join(",")+")",this.getType(X),$)}return console.warn("RainbowNode is not compatible with "+X.shader+" shader."),X.format("vec3( 0.0 )",this.getType(X),$)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(vv.prototype),"copy",this).call(this,X),this.filmThickness=X.filmThickness.clone(),this.movement=X.movement.clone(),this.wavelengths=X.wavelengths.clone(),this.noiseStrength=X.noiseStrength.clone(),this.noiseScale=X.noiseScale.clone(),this.offset=X.offset.clone(),this.alpha=X.alpha.clone(),this.calpha=X.calpha,this}}]),vv}(ZN),tV=eV;tV.Nodes=function(){var X=new vF("vec3 attenuation(vec3 wavelengths, float filmThickness, float movement, float noiseStrength, float noiseScale, vec3 offset) {\n                 vec3 st = position / noiseScale;\n\t\t\t\t vec3 q = vec3(simplex3d(st),\n\t\t\t\t\t\t\t  simplex3d(st + vec3(1.0)),\n\t\t\t\t\t\t\t  simplex3d(st + vec3(1.0)));\n\n\t\t\t\t vec3 r = vec3(simplex3d(st + vec3(1.4, 1.3, 1.0) * q + vec3(1.7, 9.2, 1.0)),\n\t\t\t\t\t\t\t  simplex3d(st + vec3(2.0, 1.2, 1.0) * q + vec3(8.3, 2.8, 1.0)),\n\t\t\t\t\t\t\t  simplex3d(st * q));\n\n                 float noise = simplex3d(st + r);\n\n                 return .5 + .5 * cos((((filmThickness + (noise * noiseStrength)) / (vec3(wavelengths.r * 1.0, wavelengths.g * 0.8, wavelengths.b * 0.6) + 1.0)) * dot(normalize(vWorldViewDir + (offset * -0.001)), normalize(vWNormal))) + movement);\n             }",[$U.simplex]);return{rainbow:new vF("vec3 rainbow(float filmThickness, float movement, vec3 wavelengths, float noiseStrength, float noiseScale, vec3 offset, float alpha, out float calpha) {\n                 vec3 res = clamp(attenuation(wavelengths, filmThickness, movement, noiseStrength, noiseScale, offset), 0.0, 2.0);\n\n                 float rainbowContribution = clamp(res.r + res.g + res.b, 0.0, 1.0);\n                 float lalpha = alpha * rainbowContribution;\n                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\n                 return res;\n             }",[X])}}();var nV=function(X){_inherits(xv,X);var $=_createSuper(xv);function xv(X,ee,ne,ae,de,fe,Ue,je){var Ke;return _classCallCheck(this,xv),(Ke=$.call(this,"v3")).nodeType="Transmission",Ke.thickness=X,Ke.ior=ee,Ke.roughness=ne,Ke.transmissionSamplerSize=ae,Ke.transmissionSamplerMap=de,Ke.transmissionDepthMap=fe,Ke.aspectRatio=Ue,Ke.alpha=je,Ke.calpha="g".concat(Ke.uuid.toString().replace(/-/g,""),"_calpha"),Ke}return _createClass(xv,[{key:"generate",value:function generate(X,$){if(X.extensions.shaderTextureLOD=!0,X.extensions.derivatives=!0,X.isShader("fragment")){X.define("NUM_SAMPLES",30),X.require("worldPosition"),X.requires.worldNormal=!0,X.requires.modelMatrix=!0,X.requires.projectionMatrix=!0,X.addFragmentVariable(this.calpha,"float");var ee=X.include(xv.Nodes.transmission),ne=[];return ne.push(this.thickness.build(X,"f")),ne.push(this.ior.build(X,"f")),ne.push(this.roughness.build(X,"f")),ne.push(this.transmissionSamplerSize.build(X,"v2")),ne.push(this.transmissionSamplerMap.getTexture(X,"t")),ne.push(this.transmissionDepthMap.getTexture(X,"t")),ne.push(this.aspectRatio.build(X,"v2")),ne.push("normal"),ne.push(this.alpha.build(X,"f")),ne.push(this.calpha),X.format(ee+"("+ne.join(",")+")",this.getType(X),$)}return console.warn("TransmissionNode is not compatible with "+X.shader+" shader."),X.format("vec3( 0.0 )",this.getType(X),$)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(xv.prototype),"copy",this).call(this,this),this.thickness=X.thickness.clone(),this.ior=X.ior.clone(),this.roughness=X.roughness.clone(),this.transmissionSamplerSize=X.transmissionSamplerSize.clone(),this.transmissionSamplerMap=X.transmissionSamplerMap,this.transmissionDepthMap=X.transmissionDepthMap,this.alpha=X.alpha.clone(),this.calpha=X.calpha,this}}]),xv}(ZN),rV=nV;rV.Nodes=function(){var X=new vF("\n            float gaussian(vec2 i) {\n                const float sigma = float(NUM_SAMPLES) * .25;\n                return exp( -.5* dot(i/=sigma,i) ) / ( 6.28 * sigma*sigma );\n            }"),$=new vF("\n            vec4 blur(sampler2D sp, vec2 U, vec2 scale, float lod, sampler2D dm, vec2 unrefractedU, vec2 aspectRatio) {\n                // Slightly modified version of this:\n                // https://www.shadertoy.com/view/ltScRG\n\n                const int LOD = 2;\n                const int sLOD = 4; // tile size = 2^LOD\n\n                vec4 O = vec4(0);\n                const int s = NUM_SAMPLES/sLOD;\n                for ( int i = 0; i < s*s; i++ ) {\n                    int modulo = (i)-((i)/(s))*(s);\n                    vec2 d = vec2(float(modulo), float(i/s))*float(sLOD) - float(NUM_SAMPLES)/2.;\n                    vec2 uv = U + (scale * aspectRatio) * d;\n                    // What is the depth of the opaque object we're trying to sample\n                    float opaqueDepth = texture2D(dm, uv).r;\n                    if (opaqueDepth < gl_FragCoord.z) {\n                        uv = unrefractedU + ((scale * min(lod / 2., 1.)) * aspectRatio) * d;\n                        lod = lod > 4.0 ? lod : lod / 2.0;\n                    }\n\t\t            #ifdef TEXTURE_LOD_EXT\n                    O += gaussian(d) * texture2DLodEXT( sp, uv, lod);\n                    #else\n                    O += gaussian(d) * textureLod( sp, uv, lod);\n                    #endif\n                }\n                return O / O.a;\n            }",[X]),ee=new vF("\n            vec3 getVolumeTransmissionRay( vec3 n, vec3 v, float thickness, float ior, mat4 modelMatrix ) {\n\t\t        // Direction of refracted light.\n\t\t        vec3 refractionVector = refract( -v,  n, 1.0 / ior );\n\t\t        // Compute rotation-independant scaling of the model matrix.\n\t\t        vec3 modelScale;\n\t\t        modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\t        modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\t        modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\t        // The thickness is specified in local space.\n\t\t        return normalize( refractionVector ) * thickness * modelScale;\n\t        }"),ne=new vF("\nfloat applyIorToRoughness( float roughness, float ior ) {\n\t\t// Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and\n\t\t// an IOR of 1.5 results in the default amount of microfacet refraction.\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t} "),ae=new vF("\nvec4 getTransmissionSample( vec2 fragCoord, float roughness, float ior, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 unrefractedCoords, vec2 aspectRatio) {\n\t\tfloat framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n        float lod = applyIorToRoughness(roughness, ior);\n\n        return blur(transmissionSamplerMap, fragCoord, vec2(lod / (transmissionSamplerSize.x / 2.)), min(framebufferLod / 5.5, 8.5), transmissionDepthMap, unrefractedCoords, aspectRatio);\n\t}",[ne,$]),de=new vF("\nvec4 getIBLVolumeRefraction( vec3 n, vec3 v, float roughness, vec3 position, mat4 modelMatrix, mat4 viewMatrix, mat4 projMatrix, float ior, float thickness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio ) {\n        vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n        vec3 refractedRayExit = position + transmissionRay;\n\n        // Project refracted vector on the framebuffer, while mapping to normalized device coordinates.\n        vec4 ndcPos = projMatrix * viewMatrix *  vec4( refractedRayExit, 1.0 );\n        vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n        refractionCoords += 1.0;\n        refractionCoords /= 2.0;\n\n        vec4 ndcPosUnrefracted = projMatrix * viewMatrix * vec4(position, 1.0 );\n        vec2 unrefractedCoords = ndcPosUnrefracted.xy / ndcPosUnrefracted.w;\n        unrefractedCoords += 1.0;\n        unrefractedCoords /= 2.0;\n\n        // Sample framebuffer to get pixel the refracted ray hits.\n        vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, unrefractedCoords, aspectRatio );\n        // Get the specular component.\n        return vec4( ( 1.0 ) * transmittedLight.rgb, transmittedLight.a );\n    }",[ae,ee]);return{transmission:new vF("\n            vec3 transmission(float thickness, float ior, float roughness, vec2 transmissionSamplerSize, sampler2D transmissionSamplerMap, sampler2D transmissionDepthMap, vec2 aspectRatio, vec3 normal, float alpha, out float calpha) {\n                vec3 v = vec3(0.);\n                if (isOrthographic) {\n                    v = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n                } else {\n                    v = normalize(vWPosition - cameraPosition);\n                }\n                vec4 transmission = getIBLVolumeRefraction(vWNormal, -v, roughness,  vWPosition, modelMatrix, viewMatrix, projectionMatrix, ior, thickness, transmissionSamplerSize, transmissionSamplerMap, transmissionDepthMap, aspectRatio );\n                float lalpha = alpha;\n\n                 calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n                 accumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n                 return transmission.rgb;\n            }",[de])}}();var iV=function(X){_inherits(bv,X);var $=_createSuper(bv);function bv(X,ee){var ne;return _classCallCheck(this,bv),(ne=$.call(this,"v3")).nodeType="CustomNormal",ne.cnormal=X,ne.alpha=ee,ne}return _createClass(bv,[{key:"generate",value:function generate(X,$){if(X.isShader("fragment")){var ee=X.include(bv.Nodes.customNormal),ne=[];return ne.push(this.cnormal.build(X,"v3")),ne.push("normal"),ne.push(this.alpha.build(X,"f")),X.format(ee+"("+ne.join(",")+")",this.getType(X),$)}return console.warn("CustomNormalNode is not compatible with "+X.shader+" shader."),X.format("vec3( 0.0 )",this.getType(X),$)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(bv.prototype),"copy",this).call(this,X),this.cnormal.copy(X.cnormal),this.alpha.copy(X.alpha),this}}]),bv}(ZN),aV=iV;aV.Nodes={customNormal:new vF("vec3 customNormal(vec3 cnormal, vec3 norm, float alpha) {\n\t\t\t\tvec3 normal = packNormalToRGB( norm ).rgb;\n\t\t\t\tnormal *= step( vec3(0.5), cnormal );\n\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * alpha;\n\n\t\t\t\treturn normal;\n\t\t\t}")};var oV=function(X){_inherits(wv,X);var $=_createSuper(wv);function wv(X,ee,ne,ae,de,fe,Ue,je){var Ke;return _classCallCheck(this,wv),(Ke=$.call(this,"v3")).nodeType="Gradient",Ke.gradientType=X,Ke.smooth=ee,Ke.colors=ne,Ke.steps=ae,Ke.offset=de,Ke.morph=fe,Ke.angle=Ue,Ke.alpha=je,Ke.calpha="g".concat(Ke.uuid.toString().replace(/-/g,""),"_calpha"),Ke}return _createClass(wv,[{key:"generate",value:function generate(X,$){if(X.isShader("fragment")){X.define("GRAD_MAX",10),X.require("uv"),X.requires.uv=[!0],X.addFragmentVariable(this.calpha,"float");var ee=X.include(wv.Nodes.gradient),ne=[];return ne.push(this.gradientType.build(X,"i")),ne.push(this.smooth.build(X,"b")),ne.push(this.colors.build(X,"v4[]")),ne.push(this.steps.build(X,"f[]")),ne.push(this.offset.build(X,"v2")),ne.push(this.morph.build(X,"v2")),ne.push(this.angle.build(X,"f")),ne.push(this.alpha.build(X,"f")),ne.push(this.calpha),X.format(ee+"("+ne.join(",")+")",this.getType(X),$)}return console.warn("GradientNode is not compatible with "+X.shader+" shader."),X.format("vec3( 0.0 )",this.getType(X),$)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(wv.prototype),"copy",this).call(this,X),this.gradientType=X.gradientType.clone(),this.smooth=X.smooth.clone(),this.colors=X.colors.clone(),this.steps=X.steps.clone(),this.offset=X.offset.clone(),this.morph=X.morph.clone(),this.angle=X.angle.clone(),this.alpha=X.alpha.clone(),this.calpha=X.calpha,this}}]),wv}(ZN),sV=oV;sV.Nodes={gradient:new vF("vec3 gradient(int gradientType, bool smoothed, vec4 colors[GRAD_MAX], float steps[GRAD_MAX], vec2 offset, vec2 morph, float angle, float alpha, out float calpha) {\n\t\t\t\tvec4 color = colors[0];\n\t\t\t\tvec2 m = morph / vUv.xy;\n\t\t\t\tvec2 rot = vec2( 0.5 + m.x, m.y );\n\t\t\t\tvec2 dt = vec2(\n\t\t\t\t\tcos( angle ) * rot.x - sin( angle ) * rot.y,\n\t\t\t\t\tsin( angle ) * rot.x + cos( angle ) * rot.y\n\t\t\t\t);\n\t\t\t\tvec2 pt = ( vUv - 0.5 + offset ) / 2.0 + dt / 2.0;\n\t\t\t\tfloat t = dot( pt, dt ) / dot( dt, dt );\n\t\t\t\tif ( gradientType == 1 ) {\n\t\t\t\t\tt = distance (\n\t\t\t\t\t\t( vUv + morph ) * 3.0,\n\t\t\t\t\t\t( vUv + offset ) + 1.0\n\t\t\t\t\t) + angle;\n\t\t\t\t} else if ( gradientType == 2 ) {\n\t\t\t\t\tfloat polar = atan(\n\t\t\t\t\t\tvUv.x + morph.x - 0.5 + offset.x,\n\t\t\t\t\t\tvUv.y + morph.y - 0.5 + offset.y\n\t\t\t\t\t) * -1.0;\n\t\t\t\t\tt = fract( ( angle / PI / -2.0 ) + 0.5 * ( polar / PI ) );\n\t\t\t\t}\n\n\t\t\t\tfloat p;\n\t\t\t\tif (smoothed) {\n\t\t\t\t\tfor ( int i = 1; i < GRAD_MAX; i++ ) {\n\t\t\t\t\t\tp = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );\n\t\t\t\t\t\tcolor = mix(color, colors[i], smoothstep(0.0, 1.0, p));\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\t\t\t\t\tfor ( int i = 1; i < GRAD_MAX; i++ ) {\n\t\t\t\t\t\tp = clamp( ( t - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );\n\t\t\t\t\t\tcolor = mix(color, colors[i], p);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfloat lalpha = alpha * color.a;\n\t\t\t\tcalpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\n\t\t\t\treturn color.xyz;\n\t\t\t}")};var lV=function(X){return X.NOISE="noise",X.MAP="map",X}(lV||{}),uV=function(X){_inherits(Mv,X);var $=_createSuper(Mv);function Mv(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zU(0),ne=arguments.length>1?arguments[1]:void 0,ae=arguments.length>2?arguments[2]:void 0,de=arguments.length>3?arguments[3]:void 0,fe=arguments.length>4?arguments[4]:void 0,Ue=arguments.length>5?arguments[5]:void 0;return _classCallCheck(this,Mv),(X=$.call(this,"v3")).nodeType="VertexDisplacement",X.displacementTypeIndex=ee,X.intensity=ne,X.movementOrTexture=ae,"map"===Object.values(lV)[X.displacementTypeIndex.value]&&(X.mat=new HU(X.movementOrTexture.value.matrix)),X.cropOrOffset=de,X.scale=fe,X.noiseFunctionIndex=Ue,X}return _createClass(Mv,[{key:"generate",value:function generate(X,$){if(X.isShader("vertex")){X.define("USE_LAYER_DISPLACE");var ee,ne=[];switch(ne.push("displaced_position"),ne.push("displaced_normal"),Object.values(lV)[this.displacementTypeIndex.value]){case"map":ee=X.include(Mv.Nodes.map),ne.push(this.movementOrTexture.getTexture(X,"t")),ne.push("uv"),ne.push(this.cropOrOffset.build(X,"f")),this.mat&&ne.push(this.mat.build(X,"mat3"));break;case"noise":var ae=Object.values(KU)[this.noiseFunctionIndex.value],de=new vF("vec3 orthogonal(vec3 v) {\n\t\t\t\t\t\t\treturn normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));\n\t\t\t\t\t\t}"),fe=new vF("vec3 distorted(vec3 p, vec3 n, float scale, float intensity, vec3 offset, float neighbour_offset, float movement) {\n\t\t\t\t\t\t\treturn p + n * ".concat(ae,"((p + offset) * scale * 0.001 + neighbour_offset + (movement * 0.1)) * intensity;\n\t\t\t\t\t\t}"),[$U.simplex,$U.simplexFractal,$U.simplexAshima,$U.fbm,$U.perlin]),Ue=new vF("vec3 vertexDisplacementNoise(vec3 position, vec3 normal, float scale, vec3 offset, float movement, float intensity, out vec3 displaced_normal) {\n\t\t\t\t\t\t\tvec3 displaced_position = distorted(position, normal, scale, intensity, offset, neighbor_offset, movement);\n\t\t\t\t\t\t\tvec3 tangent1 = orthogonal(normal);\n\t\t\t\t\t\t\tvec3 tangent2 = normalize(cross(normal, tangent1));\n\n                            // TODO(Max): The distance to the neighbors was originally scaled by 0.1.\n                            // This caused some small oval/circular visual artifacts in the lighting.\n                            // For now, simply using neighbors further away betters the problem,\n                            // but we should figure out the underlying cause when we have some time.\n                            // Maybe its related to how we calculate the tangent and bitangent?\n\t\t\t\t\t\t\tvec3 nearby1 = position + tangent1;\n\t\t\t\t\t\t\tvec3 nearby2 = position + tangent2;\n\t\t\t\t\t\t\tvec3 distorted1 = distorted(nearby1, normal, scale, intensity, offset, neighbor_offset, movement);\n\t\t\t\t\t\t\tvec3 distorted2 = distorted(nearby2, normal, scale, intensity, offset, neighbor_offset, movement);\n\t\t\t\t\t\t\tdisplaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));\n\t\t\t\t\t\t\treturn displaced_position;\n\t\t\t\t\t\t}",[fe,de]);ee=X.include(Ue),ne.push(this.scale.build(X,"f")),ne.push(this.cropOrOffset.build(X,"v3")),ne.push(this.movementOrTexture.build(X,"f"))}return ne.push(this.intensity.build(X,"f")),ne.push("displaced_normal"),X.format(ee+"("+ne.join(",")+")",this.getType(X),$)}return console.warn("VertexDisplacementNode is not compatible with "+X.shader+" shader."),X.format("vec3( 0.0 )",this.getType(X),$)}},{key:"copy",value:function copy(X){var $,ee;return _get(_getPrototypeOf(Mv.prototype),"copy",this).call(this,X),this.noiseFunctionIndex=null==($=X.noiseFunctionIndex)?void 0:$.clone(),this.scale=null==(ee=X.scale)?void 0:ee.clone(),this.cropOrOffset=X.cropOrOffset.clone(),this.intensity=X.intensity.clone(),this.movementOrTexture=X.movementOrTexture.clone(),this}}]),Mv}(ZN),cV=uV;cV.Nodes=function(){var X=new vF("vec3 orthogonal(vec3 v) {\n\t\t\t\treturn normalize(abs(v.x) > abs(v.z) ? vec3(-v.y, v.x, 0.0) : vec3(0.0, -v.z, v.y));\n\t\t\t}"),$=new vF("float displacementMapTexture(sampler2D tex, float crop, vec2 uv, mat3 mat, vec2 offset) {\n\t\t\t\tvec2 uvs = (mat * vec3(uv * 2.0 - 1.0, 1.0) / 2.0 + 0.5).xy + offset;\n\t\t\t\tvec4 tmp = texture2D(tex, uvs);\n\t\t\t\tvec3 col = tmp.rgb;\n\t\t\t\tif (crop > 0.5) {\n\t\t\t\t\tif ( uvs.x < 0.0 || uvs.x > 1.0 || uvs.y < 0.0 || uvs.y > 1.0 )  {\n\t\t\t\t\t\treturn 0.0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn col.r;\n\t\t\t}");return{map:new vF("vec3 vertexDisplacementMap(vec3 position, vec3 normal, sampler2D tex, vec2 uv, float crop, mat3 mat, float intensity, out vec3 displaced_normal) {\n\t\t\t\tvec3 displaced_position = position + normal * displacementMapTexture(tex, crop, uv, mat, vec2(0.0)) * intensity;\n\t\t\t\tvec3 tangent1 = normalize(orthogonal(normal));\n\t\t\t\tvec3 tangent2 = normalize(cross(normal, tangent1));\n\t\t\t\tvec3 nearby1 = position + tangent1 * 0.1;\n\t\t\t\tvec3 nearby2 = position + tangent2 * 0.1;\n\t\t\t\tvec3 distorted1 = nearby1 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;\n\t\t\t\tvec3 distorted2 = nearby2 + normal * displacementMapTexture(tex, crop, uv, mat, vec2(neighbor_offset)) * intensity;\n\t\t\t\tdisplaced_normal = normalize(cross(distorted1 - displaced_position, distorted2 - displaced_position));\n\t\t\t\treturn displaced_position;\n\t\t\t}",[X,$])}}();var hV=function(X){_inherits(au,X);var $=_createSuper(au);function au(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new qN,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new qN,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new qN,de=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new qN,fe=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new qN,Ue=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new qN,je=arguments.length>6&&void 0!==arguments[6]?arguments[6]:new qN,Ke=arguments.length>7&&void 0!==arguments[7]?arguments[7]:new qN,et=arguments.length>8&&void 0!==arguments[8]?arguments[8]:new qN,tt=arguments.length>9&&void 0!==arguments[9]?arguments[9]:new qN,nt=arguments.length>10&&void 0!==arguments[10]?arguments[10]:new qN,it=arguments.length>11&&void 0!==arguments[11]?arguments[11]:new qN;return _classCallCheck(this,au),(X=$.call(this,"v3")).nodeType="Noise",X.scale=ee,X.size=ne,X.move=ae,X.fA=de,X.fB=fe,X.distortion=Ue,X.colorA=je,X.colorB=Ke,X.colorC=et,X.colorD=tt,X.alpha=nt,X.noiseType=it,X.calpha="g".concat(X.uuid.toString().replace(/-/g,""),"_calpha"),X}return _createClass(au,[{key:"generate",value:function generate(X,$,ee,ne,ae){X.require("uv"),X.requires.uv=[!0],X.addFragmentVariable(this.calpha,"float");var de=Object.values(KU)[this.noiseType.value],fe=new vF("vec3 ".concat(de,"customNoise(float scale, vec3 size, float move, vec2 fA, vec2 fB, vec2 distortion, vec4 colorA, vec4 colorB, vec4 colorC, vec4 colorD, float alpha, out float calpha) {\n                vec3 st = position / size;\n\t\t\t\tst /= scale;\n\t\t\t\tvec3 q = vec3(").concat(de,"(st),\n\t\t\t\t\t\t\t  ").concat(de,"(st + vec3(1.0)),\n\t\t\t\t\t\t\t  ").concat(de,"(st + vec3(1.0)));\n\t\t\t\tvec3 r = vec3(").concat(de,"(st + vec3(distortion, 1.0) * q + vec3(fA, 1.0) + move),\n\t\t\t\t\t\t\t  ").concat(de,"(st + vec3(distortion, 1.0) * q + vec3(fB, 1.0) + move), \n\t\t\t\t\t\t\t  ").concat(de,"(st * q));\n\t\t\t\tfloat f = ").concat(de,"(st + r);\n\t\t\t\tvec4 color;\n\t\t\t\tcolor = mix(colorA, colorB, clamp((f * f) * 4.0, 0.0, 1.0));\n\t\t\t\tcolor = mix(color, colorC, clamp(length(q), 0.0, 1.0));\n\t\t\t\tcolor = mix(color, colorD, clamp(length(r.x), 0.0, 1.0));\n\n                float lalpha = alpha * color.a;\n                calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\n\t\t\t    accumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n\t\t\t\treturn clamp(color, 0.0, 1.0).rgb;\n\t\t\t}"),[$U.simplex,$U.simplexFractal,$U.simplexAshima,$U.fbm,$U.perlin]),Ue=X.include(fe),je=[];return je.push(this.scale.build(X,"f")),je.push(this.size.build(X,"v3")),je.push(this.move.build(X,"f")),je.push(this.fA.build(X,"v2")),je.push(this.fB.build(X,"v2")),je.push(this.distortion.build(X,"v2")),je.push(this.colorA.build(X,"v4")),je.push(this.colorB.build(X,"v4")),je.push(this.colorC.build(X,"v4")),je.push(this.colorD.build(X,"v4")),je.push(this.alpha.build(X,"f")),je.push(this.calpha),X.format(Ue+"("+je.join(",")+")",this.getType(X),$)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(au.prototype),"copy",this).call(this,X),this.scale.copy(X.scale),this.size.copy(X.size),this.move.copy(X.move),this.fA.copy(X.fA),this.fB.copy(X.fB),this.distortion.copy(X.distortion),this.colorA.copy(X.colorA),this.colorB.copy(X.colorB),this.colorC.copy(X.colorC),this.colorD.copy(X.colorD),this.alpha.copy(X.alpha),this.calpha=X.calpha,this.noiseType.copy(X.noiseType),this}}]),au}(ZN);hV.numOctaves=5;var dV=function(X){_inherits(lu,X);var $=_createSuper(lu);function lu(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new qN,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new qN,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new qN,de=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new qN;return _classCallCheck(this,lu),(X=$.call(this,"v3")).nodeType="Blend",X.a=ee,X.b=ne,X.alpha=ae,X.mode=de,X}return _createClass(lu,[{key:"generate",value:function generate(X,$){if(X.isShader("fragment")){var ee=[];return ee.push(this.a.build(X,"c")),ee.push(this.b.build(X,"c")),ee.push(this.alpha.build(X,"f")),ee.push(this.mode.build(X,"i")),X.format("spe_blend("+ee.join(",")+")",this.getType(X),$)}return console.warn("BlendNode is not compatible with "+X.shader+" shader."),X.format("vec3( 0.0 )",this.getType(X),$)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(lu.prototype),"copy",this).call(this,X),this.a.copy(X.a),this.b.copy(X.b),this.alpha.copy(X.alpha),this.mode.copy(X.mode),this}}]),lu}(ZN),fV=function(X){_inherits(Wl,X);var $=_createSuper(Wl);function Wl(X,ee,ne,ae,de,fe,Ue,je,Ke,et,tt,nt){var it;return _classCallCheck(this,Wl),(it=$.call(this,"v3")).nodeType="Depth",it.gradientType=X,it.smooth=ee,it.near=ne,it.far=ae,it.isVector=de,it.isWorldSpace=fe,it.origin=Ue,it.direction=je,it.colors=Ke,it.steps=et,it.num=tt,it.alpha=nt,it.calpha="g".concat(it.uuid.toString().replace(/-/g,""),"_calpha"),it}return _createClass(Wl,[{key:"generate",value:function generate(X,$){var ee="g".concat(this.uuid.toString().replace(/-/g,"")),ne=new vF("vec3 ".concat(ee,"_sdepth(float near, float far, vec3 origin, vec3 direction, vec4 colors[").concat(ee,"_MAX_COLORS], float steps[10], float alpha, out float calpha) {\n               vec4 color = colors[0];\n               #ifdef ").concat(ee,"_IS_VECTOR\n                   #ifdef ").concat(ee,"_LINEAR\n                       #ifdef ").concat(ee,"_WORLDSPACE\n                       float depth = vectorLinearWorldSpaceDepth(direction, origin, near, far);\n                       #else\n                       float depth = vectorLinearObjectSpaceDepth(direction, origin, near, far);\n                       #endif\n                   #else\n                       #ifdef ").concat(ee,"_WORLDSPACE\n                           float depth = vectorSphericalWorldSpaceDepth(origin, near, far);\n                       #else\n                           float depth = vectorSphericalObjectSpaceDepth(origin, near, far);\n                       #endif\n                   #endif\n               #else\n                   float dist = length(vWPosition - cameraPosition);\n\t\t\t       float depth = ( dist - near ) / ( far - near );\n               #endif\n\n\n              float p;\n              #ifdef ").concat(ee,"_SMOOTH\n\t\t\t\tfor ( int i = 1; i < ").concat(ee,"_MAX_COLORS; i++ ) {\n\t\t\t\t\t\tp = clamp( ( depth - steps[i-1] ) / ( steps[i] - steps[i-1] ), 0.0, 1.0 );\n\t\t\t\t\t\tcolor = mix(color, colors[i], smoothstep(0.0, 1.0, p));\n\t\t\t\t\t}\n              #else\n                for ( int i = 1; i < ").concat(ee,"_MAX_COLORS; i++ ) {\n                   p = clamp(( depth - steps[i - 1] ) / ( steps[i] - steps[i - 1] ), 0.0, 1.0);\n                   color = mix(color, colors[i], p);\n                 }\n              #endif\n\n               float lalpha = alpha * color.a;\n               calpha =  lalpha / clamp( lalpha + accumAlpha, 0.00001, 1.0 );\n\n\t\t\t   accumAlpha += ( 1.0 - accumAlpha ) * lalpha;\n               return color.rgb;\n\t\t\t}"),[Wl.Nodes.vectorLinearWorldSpaceDepth,Wl.Nodes.vectorLinearObjectSpaceDepth,Wl.Nodes.vectorSphericalObjectSpaceDepth,Wl.Nodes.vectorSphericalWorldSpaceDepth]);if(X.isShader("fragment")){X.define("".concat(ee,"_MAX_COLORS"),this.num.value+1),this.smooth.value&&X.define("".concat(ee,"_SMOOTH")),this.isVector.value>.5&&X.define("".concat(ee,"_IS_VECTOR")),0===this.gradientType.value&&X.define("".concat(ee,"_LINEAR")),this.isWorldSpace.value>.5&&X.define("".concat(ee,"_WORLDSPACE")),X.require("worldPosition"),X.addFragmentVariable(this.calpha,"float");var ae=X.include(ne),de=[];return de.push(this.near.build(X,"f")),de.push(this.far.build(X,"f")),de.push(this.origin.build(X,"v3")),de.push(this.direction.build(X,"v3")),de.push(this.colors.build(X,"v4[]")),de.push(this.steps.build(X,"f[]")),de.push(this.alpha.build(X,"f")),de.push(this.calpha),X.format(ae+"("+de.join(",")+")",this.getType(X),$)}return console.warn("DepthNode is not compatible with "+X.shader+" shader."),X.format("vec3( 0.0 )",this.getType(X),$)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Wl.prototype),"copy",this).call(this,X),this.gradientType=X.gradientType.clone(),this.smooth=X.smooth.clone(),this.near=X.near.clone(),this.far=X.far.clone(),this.isVector=X.isVector.clone(),this.isWorldSpace=X.isWorldSpace.clone(),this.origin=X.origin.clone(),this.direction=X.direction.clone(),this.colors=X.colors.clone(),this.steps=X.steps.clone(),this.alpha=X.alpha.clone(),this.calpha=X.calpha,this}}]),Wl}(ZN),pV=fV;pV.Nodes={vectorLinearWorldSpaceDepth:new vF("float vectorLinearWorldSpaceDepth(vec3 direction, vec3 origin, float near, float far) {\n               vec3 n = normalize(direction);\n               float dist = (n.x*(vWPosition.x - origin.x) + n.y*(vWPosition.y - origin.y) + n.z*(vWPosition.z - origin.z));\n               return ( dist - near ) / ( far - near );\n            }"),vectorLinearObjectSpaceDepth:new vF("float vectorLinearObjectSpaceDepth(vec3 direction, vec3 origin, float near, float far) {\n               vec3 n = normalize(direction);\n               float dist = (n.x*(position.x - origin.x) + n.y*(position.y - origin.y) + n.z*(position.z - origin.z));\n               return ( dist - near ) / ( far - near );\n            }"),vectorSphericalWorldSpaceDepth:new vF("float vectorSphericalWorldSpaceDepth(vec3 origin, float near, float far) {\n               float dist = length(vWPosition - origin);\n               return ( dist - near ) / ( far - near );\n            }"),vectorSphericalObjectSpaceDepth:new vF("float vectorSphericalObjectSpaceDepth(vec3 origin, float near, float far) {\n               float dist = length(position - origin);\n               return ( dist - near ) / ( far - near );\n            }")};var vV=function(X){_inherits(Av,X);var $=_createSuper(Av);function Av(X,ee,ne){var ae;return _classCallCheck(this,Av),(ae=$.call(this,"v3")).nodeType="Matcap",ae.texture=X,ae.alpha=ee,ae.mode=ne,ae.calpha="g".concat(ae.uuid.toString().replace(/-/g,""),"_calpha"),ae}return _createClass(Av,[{key:"generate",value:function generate(X,$){if(X.isShader("fragment")){X.addFragmentVariable(this.calpha,"float");var ee=X.include(Av.Nodes.matcap);X.require("normal"),X.requires.normal=!0;var ne=[];return ne.push(this.texture.getTexture(X,"t")),ne.push("normal"),ne.push(this.alpha.build(X,"f")),ne.push(this.mode.build(X,"i")),ne.push(this.calpha),X.format(ee+"("+ne.join(",")+")",this.getType(X),$)}return console.warn("MatcapNode is not compatible with "+X.shader+" shader."),X.format("vec3( 0.0 )",this.getType(X),$)}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Av.prototype),"copy",this).call(this,X),this.texture=X.texture.clone(),this.alpha=X.alpha.clone(),this.mode=X.mode.clone(),this.calpha=X.calpha,this}}]),Av}(ZN),mV=vV;mV.Nodes={matcap:new vF("vec3 matcap(sampler2D matcapTex, vec3 normal, float alpha, int mode, out float calpha) {\n                vec3 viewDir = normalize( vViewPosition );\n                vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n                vec3 y = cross( viewDir, x );\n                vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n                vec4 matcapColor = texture2D( matcapTex, uv );\n\n                calpha =  alpha / clamp( alpha + accumAlpha, 0.00001, 1.0 );\n\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * alpha;\n                \n                return matcapColor.rgb;\n            }\n            ")};var gV=function(){function Zr(X){_classCallCheck(this,Zr),this.id=2,this.layerCount=2,this.uuid=da.generateUUID(),this.needsUpdate=!1,this._material=X,this._layerNodes=[];var $=this._createLayer({id:0,type:"color"});this._material.color=$.color,void 0===this._material.alpha&&(this._material.alpha=new sU(1));var ee=new sU(1),ne=new zU(0);"shadingAlpha"in this._material&&"shadingBlend"in this._material&&(this._material.shadingAlpha=ee,this._material.shadingBlend=ne),this._layerNodes.push({id:0,type:"color",color:$.color,alpha:$.alpha,mode:$.mode}),this._layerNodes.push({id:1,type:"light",alpha:ee,mode:ne}),this.head=$.layer,this.head.next=new NU(1,void 0,{type:"light",alpha:ee,mode:ne}),this.attachLightNodes(this.getLightLayer())}return _createClass(Zr,[{key:"material",get:function get(){return this._material},set:function set(X){var $;this._material=X;for(var ee,ne,ae=this.head;void 0!==ae;){if("light"===ae.type){ee=ae.uniforms["f".concat(ae.id,"_alpha")],ne=ae.uniforms["f".concat(ae.id,"_mode")];break}ae=ae.next}"shadingAlpha"in this._material&&"shadingBlend"in this._material&&(this._material.shadingAlpha=ee,this._material.shadingBlend=ne),this.attachLightNodes(null==($=X.userData.layers)?void 0:$.getLightLayer()),this.blendColors(),this.blendAfterColors(),this.blendPositions()}},{key:"getLayersOfType",value:function getLayersOfType(X){for(var $=[],ee=this.head;ee;)ee.type===X&&$.push(ee),ee=ee.next;return $}},{key:"addLayer",value:function addLayer(X){var $;if(X.id=null!=($=X.id)?$:++this.id,this.layerCount++,"light"===X.type){var ee=this.createLightLayer(X);return this.uuid=da.generateUUID(),this.blendColors(),this.blendAfterColors(),this.blendPositions(),ee}var ne=this._createLayer(X),ae=ne.layer;if(void 0===this.head)this.head=ae;else{for(var de=this.head;null!=de.next;)de=de.next;de.next=ae}return ne.color&&this._layerNodes.push({id:ae.id,type:"color",color:ne.color,alpha:ne.alpha,mode:ne.mode}),ne.position&&this._layerNodes.push({id:ae.id,type:"position",position:ne.position}),this.uuid=da.generateUUID(),this.blendColors(),this.blendAfterColors(),this.blendPositions(),ae}},{key:"addLayerBeforeAt",value:function addLayerBeforeAt(X,$){var ee,ne=this.head;X.id=null!=(ee=X.id)?ee:++this.id,this.layerCount++;var ae=this._createLayer(X),de=ae.layer;de.next=$;var fe=0;if(ne===$)this.head=de,ae.color&&this._layerNodes.splice(0,0,{id:de.id,type:"color",color:ae.color,alpha:ae.alpha,mode:ae.mode}),ae.position&&this._layerNodes.splice(0,0,{id:de.id,type:"position",position:ae.position});else{for(fe=1;(null==ne?void 0:ne.next)!==$;)ne=null==ne?void 0:ne.next,fe++;ne.next=de,ae.color&&this._layerNodes.splice(fe,0,{id:de.id,type:"color",color:ae.color,alpha:ae.alpha,mode:ae.mode}),ae.position&&this._layerNodes.splice(fe,0,{id:de.id,type:"position",position:ae.position})}return this.uuid=da.generateUUID(),this.blendColors(),this.blendAfterColors(),this.blendPositions(),de}},{key:"addLayerAt",value:function addLayerAt(X,$){var ee;$.id=null!=(ee=$.id)?ee:++this.id,this.layerCount++;var ne=this._createLayer($),ae=ne.layer;if(ne.color&&this._layerNodes.splice(X,0,{id:ae.id,type:"color",color:ne.color,alpha:ne.alpha,mode:ne.mode}),ne.position&&this._layerNodes.splice(X,0,{id:ae.id,type:"position",position:ne.position}),0==X)ae.next=this.head,this.head=ae;else{for(var de=this.head,fe=this.head.next,Ue=0;Ue<X-1;Ue++)de=fe,fe=fe.next;ae.next=fe,de.next=ae}return this.uuid=da.generateUUID(),this.blendColors(),this.blendAfterColors(),this.blendPositions(),ae}},{key:"removeLayer",value:function removeLayer(X){var $,ee=this.head,ne=0;if((null==ee?void 0:ee.id)==X)this.head=ee.next;else for(ne=1,$=ee,ee=null==ee?void 0:ee.next;null!=ee;){if(ee.id==X){$.next=ee.next;break}ne++,$=ee,ee=ee.next}return this.cleanupChangedLayer(ee),this.blendColors(),this.blendAfterColors(),this.blendPositions(),this.uuid=da.generateUUID(),this.layerCount--,ne}},{key:"changeLayer",value:function changeLayer(X,$){var ee,ne,ae=this.head;if((null==ae?void 0:ae.id)==X){var de=this._createLayer(Ct({id:X,uuid:ae.uuid},$));(ne=de.layer).next=ae.next,this.head=ne,de.color&&(this._layerNodes[0]={id:ne.id,type:"color",color:de.color,alpha:de.alpha,mode:de.mode}),de.position&&(this._layerNodes[0]={id:ne.id,type:"position",position:de.position}),ne.uniforms["f".concat(X,"_mode")].value=ae.uniforms["f".concat(X,"_mode")].value,ne.uniforms["f".concat(X,"_alpha")].value=ae.uniforms["f".concat(X,"_alpha")].value}else{ee=ae,ae=ae.next;for(var fe=1;null!=ae;){if(ae.id==X){var Ue=this._createLayer(Ct({id:X,uuid:ae.uuid},$));ne=Ue.layer,ee.next=ne,ne.next=ae.next,Ue.color&&(this._layerNodes[fe]={id:X,type:"color",color:Ue.color,alpha:Ue.alpha,mode:Ue.mode}),Ue.position&&(this._layerNodes[fe]={id:X,type:"position",position:Ue.position}),ne.uniforms["f".concat(X,"_mode")].value=ae.uniforms["f".concat(X,"_mode")].value,ne.uniforms["f".concat(X,"_alpha")].value=ae.uniforms["f".concat(X,"_alpha")].value;break}ee=ae,ae=ae.next,fe++}}return this.uuid=da.generateUUID(),this.blendColors(),this.blendAfterColors(),this.blendPositions(),ne}},{key:"getLayer",value:function getLayer(X){for(var $=this.head;null!=$&&$.id!=X;)$=$.next;return $}},{key:"getLayerByUuid",value:function getLayerByUuid(X){for(var $=this.head;void 0!==$;){if($.uuid===X)return $;$=$.next}}},{key:"getLayers",value:function getLayers(){for(var X=[],$=this.head;null!=$;)X.push($),$=$.next;return X}},{key:"getLayerPosition",value:function getLayerPosition(X){for(var $=this.head,ee=0;void 0!==$&&$.id!=X;)ee++,$=$.next;return ee}},{key:"getDefines",value:function getDefines(){}},{key:"getBeforeProgram",value:function getBeforeProgram(){}},{key:"getLightingProgram",value:function getLightingProgram(){}},{key:"getAfterProgram",value:function getAfterProgram(){}},{key:"getVarPrograms",value:function getVarPrograms(){}},{key:"getUniforms",value:function getUniforms(){}},{key:"moveLayer",value:function moveLayer(X,$){var ee,ne,ae=this.head;if(0==X)ee=this.head,this.head=ee.next;else{for(var de=0;de<X;de++)ne=ae,ae=ae.next;ne.next=ae.next,ee=ae}if(ae=this.head,ne=void 0,0==$)ee.next=this.head,this.head=ee;else{for(var fe=0;fe<$-1;fe++)ae=ae.next;ee.next=null==ae?void 0:ae.next,ae.next=ee}var Ue=this._layerNodes.splice(X,1)[0];this._layerNodes.splice($,0,Ue),this.uuid=da.generateUUID(),this.blendColors(),this.blendAfterColors()}},{key:"updateLayerUniform",value:function updateLayerUniform(){this.uuid=da.generateUUID(),this.blendColors(),this.blendAfterColors()}},{key:"copy",value:function copy(X){this.needsUpdate=!1,this.layerCount=X.layerCount,this._layerNodes=[],this.layerCount=0,this.head=void 0,this.rebuildLayerNodes(this.head,X.head);for(var $=X.head,ee=this.head;null!=$.next;)this.rebuildLayerNodes(ee,$.next),ee=ee.next,$=$.next;return this.id=X.id,this.uuid=X.uuid,this.blendColors(),this.blendAfterColors(),this.blendPositions(),this}},{key:"createLightLayer",value:function createLightLayer(X){var $=new sU(X.alpha),ee=new zU(X.mode);this._material.shadingAlpha=$,this._material.shadingBlend=ee,this._layerNodes.push({id:X.id,type:"light",alpha:$,mode:ee});var ne=new NU(X.id,void 0,{type:"light",alpha:$,mode:ee});if(void 0===this.head)this.head=ne;else{for(var ae=this.head;null!=ae.next;)ae=ae.next;ae.next=ne}return this.attachLightNodes(this.getLightLayer()),ne}},{key:"rebuildLayerNodes",value:function rebuildLayerNodes(X,$){var ee=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("light"===$.type){var ne=ee?$.uniforms["f".concat($.id,"_alpha")]:new sU($.uniforms["f".concat($.id,"_alpha")].value),ae=ee?$.uniforms["f".concat($.id,"_mode")]:new zU($.uniforms["f".concat($.id,"_mode")].value);this._material.shadingAlpha=ne,this._material.shadingBlend=ae,this._layerNodes.push({id:$.id,type:"light",alpha:ne,mode:ae}),void 0===this.head?this.head=new NU($.id,$.uuid,{type:"light",alpha:ne,mode:ae}):X&&(X.next=new NU($.id,$.uuid,{type:"light",alpha:ne,mode:ae})),this.attachLightNodes($)}else{var de={type:$.type,id:$.id};for(var fe in $.uniforms){var Ue=$.getName(fe);if(Ue){var je="f".concat($.id,"_").concat(Ue);if(Array.isArray($.uniforms[je].value))de[Ue]=$.uniforms[je].value.map((function(X){return X.clone&&!ee?X.clone():X}));else{var Ke=$.uniforms[je].value;if("transmissionDepthMap"===Ue){de[Ue]=Ke;continue}null!=Ke&&(de[Ue]=!Ke.clone||ee||Ke.isRenderTargetTexture?Ke:Ke.clone())}}}this.addLayer(de)}}},{key:"attachLightNodes",value:function attachLightNodes(X){var $,ee,ne,ae,de,fe,Ue,je,Ke,et,tt,nt=this,it={},ct=this.getLightLayer();switch(this._material.userData.category){case"Lambert":it.emissive=new IU(null!=(ee=null==($=null==X?void 0:X.getValue("emissive"))?void 0:$.clone())?ee:0);break;case"Phong":it.shininess=new sU(null!=(ne=null==X?void 0:X.getValue("shininess"))?ne:30),it.specular=new IU(null!=(de=null==(ae=null==X?void 0:X.getValue("specular"))?void 0:ae.clone())?de:1118481);break;case"Toon":it.shininess=new sU(null!=(fe=null==X?void 0:X.getValue("shininess"))?fe:30),it.specular=new IU(null!=(je=null==(Ue=null==X?void 0:X.getValue("specular"))?void 0:Ue.clone())?je:1118481);break;case"Physical":it.roughness=new sU(null!=(Ke=null==X?void 0:X.getValue("roughness"))?Ke:.3),it.metalness=new sU(null!=(et=null==X?void 0:X.getValue("metalness"))?et:0),it.reflectivity=new sU(null!=(tt=null==X?void 0:X.getValue("reflectivity"))?tt:.5)}Object.keys(it).forEach((function(X){nt._material[X]=it[X],ct.uniforms["f".concat(ct.id,"_").concat(X)]=it[X]}))}},{key:"clone",value:function clone(X){return new Zr(X).copy(this)}},{key:"toJSON",value:function toJSON(X){return{id:this.id,uuid:this.uuid,head:this.head.toJSON(X)}}},{key:"fromJSON",value:function fromJSON(X,$,ee){for(var ne=new NU(X.head.id,void 0,{type:X.head.type}).fromJSON(X.head,$),ae=X.head.next,de=ne;null!=ae;)de.next=new NU(ae.id,void 0,{type:ae.type}).fromJSON(ae,$),ae=ae.next,de=de.next;this._layerNodes=[],this.head=void 0,this.rebuildLayerNodes(this.head,ne,!0);var fe=ne;for(de=this.head;null!=fe.next;)this.rebuildLayerNodes(de,fe.next,!0),de=de.next,fe=fe.next;return this._material=ee,this.id=X.id,this.uuid=X.uuid,this.blendColors(),this.blendAfterColors(),this.blendPositions(),this}},{key:"getLightLayer",value:function getLightLayer(){for(var X,$=this.head;void 0!==$&&"light"!==$.type;)$=null!=(X=$.next)?X:$;return $}},{key:"dispose",value:function dispose(){var X=this.head;for(this._layerNodes=[],this.layerCount=0;void 0!==X;)!0===X.hasOwnProperty("dispose")&&X.dispose(),X=X.next;this.head=void 0}},{key:"_createLayer",value:function _createLayer(X){var $,ee,ne,ae,de,fe,Ue,je,Ke,et,tt,nt,it,ct,dt,vt,gt,yt,_t,wt,St,Ct,At,Et,Rt,Bt,Ht,Wt,qt,Zt,Xt,Qt,en,tn,un,hn,dn,mn,gn,_n,wn,Sn,Cn,An,Mn,En,Tn,Pn,Dn,Ln,On,In,Fn,Wn,Yn,Jn,Zn,Kn,$n,nr,ir,ar,or,hr,dr,fr,vr,yr,br,_r,wr,Cr,Ar,Mr,Er,Tr,Pr,Dr,Br,Ir,zr=X.type;switch(zr){case"color":var Fr=new IU(null!=($=X.color)?$:5855577),Vr=new sU(null!=(ee=X.alpha)?ee:1),qr=new eU("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");qr.keywords.alpha=Vr;var Xr=new zU(null!=(ne=X.mode)?ne:0);return Fr.alpha=Vr,{layer:new NU(X.id,X.uuid,{type:zr,color:Fr,alpha:Vr,calpha:qr,mode:Xr}),color:Fr,alpha:qr,mode:Xr};case"texture":var Kr=null!=(ae=X.texture)?ae:new tU,ei=Kr.matrix;X.mat&&ei.copy(X.mat),Kr.needsUpdate=!0;var li=new sU(null!=(de=X.crop)?de:0),Ei=new zU(null!=(fe=X.projection)?fe:0),Di=new zU(null!=(Ue=X.axis)?Ue:0),Yi=new zU(null!=(je=X.side)?je:0),Zi=new QN(X.size?new va(X.size[0],X.size[1]):new va(100,100)),$i=new sU(null!=(Ke=X.alpha)?Ke:1),aa=new zU(null!=(et=X.mode)?et:0),sa=new oU(Kr),la=new KN(null!=(tt=X.textureSize)?tt:new wo(Kr.image?Kr.image.width:0,Kr.image?Kr.image.height:0)),ua=new GU(sa,la,li,Ei,Di,Yi,Zi,$i,aa),ca=new eU(ua.calpha,"f");return{layer:new NU(X.id,X.uuid,{type:zr,texture:sa,textureSize:la,crop:li,projection:Ei,axis:Di,side:Yi,size:Zi,mat:ua.mat,alpha:$i,calpha:ca,mode:aa}),color:ua,alpha:ca,mode:aa};case"matcap":var ha=null!=(nt=X.texture)?nt:new tU;ha.needsUpdate=!0;var da=new sU(null!=(it=X.alpha)?it:1),ga=new oU(ha),ya=new zU(null!=(ct=X.mode)?ct:0),ba=new mV(ga,da,ya),xa=new eU(ba.calpha,"f");return{layer:new NU(X.id,X.uuid,{type:zr,texture:ga,alpha:da,calpha:xa,mode:ya}),color:ba,alpha:xa,mode:ya};case"fresnel":var _a=new IU(null!=(dt=X.color)?dt:16777215),wa=new sU(null!=(vt=X.bias)?vt:.1),Ca=new sU(null!=(gt=X.scale)?gt:1),Aa=new sU(null!=(yt=X.intensity)?yt:2),Ma=new sU(null!=(_t=X.factor)?_t:1),Ea=new sU(null!=(wt=X.alpha)?wt:1),Da=new zU(null!=(St=X.mode)?St:0),Ia=new XU(_a,wa,Ca,Aa,Ma,Ea,Da),qa=new eU(Ia.calpha,"f");return{layer:new NU(X.id,X.uuid,{type:zr,color:_a,bias:wa,scale:Ca,intensity:Aa,factor:Ma,alpha:Ea,calpha:qa,mode:Da}),color:Ia,alpha:qa,mode:Da};case"rainbow":var eo=new sU(null!=(Ct=X.filmThickness)?Ct:30),ro=new sU(null!=(At=X.movement)?At:0),fo=new KN(null!=(Et=X.wavelengths)?Et:new wo(0,0,0)),vo=new sU(null!=(Rt=X.noiseStrength)?Rt:0),mo=new sU(null!=(Bt=X.noiseScale)?Bt:1),go=new KN(null!=(Ht=X.offset)?Ht:new wo(0,0,0)),bo=new sU(null!=(Wt=X.alpha)?Wt:1),xo=new tV(eo,ro,fo,vo,mo,go,bo),So=new eU(xo.calpha,"f"),Ao=new zU(null!=(qt=X.mode)?qt:0);return{layer:new NU(X.id,X.uuid,{type:zr,filmThickness:eo,movement:ro,wavelengths:fo,noiseStrength:vo,noiseScale:mo,offset:go,alpha:bo,calpha:So,mode:Ao}),color:xo,alpha:So,mode:Ao};case"transmission":var Mo=new sU(null!=(Zt=X.thickness)?Zt:10),Eo=new sU(null!=(Xt=X.ior)?Xt:1.5),To=new sU(null!=(Qt=X.roughness)?Qt:.5),Uo=new QN(null!=(en=X.transmissionSamplerSize)?en:new va(2048,2048)),Vo=null!=(tn=X.transmissionSamplerMap)?tn:new tU,Ho=null!=(un=X.transmissionDepthMap)?un:new tU,Go=new oU(Vo),Wo=new oU(Ho),es=window.innerWidth,rs=window.innerHeight,ls=es>=rs?new QN(rs/es,1):new QN(1,es/rs),us=new sU(null!=(hn=X.alpha)?hn:1),cs=new rV(Mo,Eo,To,Uo,Go,Wo,ls,us),hs=new eU(cs.calpha,"f"),ds=new zU(null!=(dn=X.mode)?dn:0);return{layer:new NU(X.id,X.uuid,{type:zr,thickness:Mo,ior:Eo,roughness:To,transmissionSamplerSize:Uo,transmissionSamplerMap:Go,transmissionDepthMap:Wo,aspectRatio:ls,alpha:us,calpha:hs,mode:ds}),color:cs,alpha:hs,mode:ds};case"depth":var fs,bs,xs=new zU(null!=(mn=X.gradientType)?mn:0),_s=new FU(null!=(gn=X.smooth)&&gn),ws=new sU(null!=(_n=X.near)?_n:50),Ss=new sU(null!=(wn=X.far)?wn:200),Cs=new sU(null!=(Sn=X.isVector)?Sn:1),As=new sU(null!=(Cn=X.isWorldSpace)?Cn:0),Ms=new KN(null!=(An=X.origin)?An:new wo),Es=new KN(null!=(Mn=X.direction)?Mn:new wo),Ts=new zU(null!=(En=X.num)?En:0);X.colors?fs=new UU(Ts.value+1,X.colors):(fs=new UU(Ts.value+1,new to(0,0,0,1))).value[1]=new to(1,1,1,1),X.steps?bs=new VU(X.steps.length,X.steps):(bs=new VU(10,1)).value[0]=0;var Ps=new sU(null!=(Tn=X.alpha)?Tn:1),Ds=new zU(null!=(Pn=X.mode)?Pn:0),Ls=new pV(xs,_s,ws,Ss,Cs,As,Ms,Es,fs,bs,Ts,Ps),Rs=new eU(Ls.calpha,"f");return{layer:new NU(X.id,X.uuid,{type:zr,gradientType:xs,smooth:_s,near:ws,far:Ss,isVector:Cs,isWorldSpace:As,origin:Ms,direction:Es,colors:fs,steps:bs,num:Ts,alpha:Ps,calpha:Rs,mode:Ds}),color:Ls,alpha:Rs,mode:Ds};case"noise":var Bs=new sU(null!=(Dn=X.scale)?Dn:1),Ns=new KN(null!=(Ln=X.size)?Ln:new wo(100,100,100)),js=new sU(null!=(On=X.move)?On:1),Ys=new QN(null!=(In=X.fA)?In:new va(1.7,9.2)),Js=new QN(null!=(Fn=X.fB)?Fn:new va(8.3,2.8)),Zs=new QN(null!=(Wn=X.distortion)?Wn:new va(1,1)),Xs=new eF(X.colorA),Qs=new eF(X.colorB),Ks=new eF(X.colorC),$s=new eF(X.colorD),il=new sU(null!=(Yn=X.alpha)?Yn:1),al=new zU(null!=(Jn=X.mode)?Jn:0),ll=new zU(null!=(Zn=X.noiseType)?Zn:0),cl=new hV(Bs,Ns,js,Ys,Js,Zs,Xs,Qs,Ks,$s,il,ll),hl=new eU(cl.calpha,"f");return{layer:new NU(X.id,X.uuid,{type:zr,scale:Bs,size:Ns,move:js,fA:Ys,fB:Js,distortion:Zs,colorA:Xs,colorB:Qs,colorC:Ks,colorD:$s,alpha:il,calpha:hl,mode:al,noiseType:ll}),color:cl,alpha:hl,mode:al};case"normal":var gl=new KN(null!=(Kn=X.cnormal)?Kn:new wo(1,1,1)),bl=new sU(null!=($n=X.alpha)?$n:1),_l=new zU(null!=(nr=X.mode)?nr:0),kl=new aV(gl,bl),Xl=new eU("alpha / clamp(alpha + accumAlpha, 0.00001, 1.0 )","f");return Xl.keywords.alpha=bl,{layer:new NU(X.id,X.uuid,{type:zr,cnormal:gl,alpha:bl,calpha:Xl,mode:_l}),color:kl,alpha:Xl,mode:_l};case"gradient":var tu,nu,ru=new zU(null!=(ir=X.gradientType)?ir:0),iu=new FU(null!=(ar=X.smooth)&&ar);X.colors?tu=new UU(X.colors.length,X.colors):(tu=new UU(10,new to(0,0,0,1))).value[1]=new to(1,1,1,1),X.steps?nu=new VU(X.steps.length,X.steps):(nu=new VU(10,1)).value[0]=0;var ou=new QN(null!=(or=X.offset)?or:new va(0,0)),su=new QN(null!=(hr=X.morph)?hr:new va(0,0)),cu=new sU(null!=(dr=X.angle)?dr:0),hu=new sU(null!=(fr=X.alpha)?fr:1),vu=new zU(null!=(vr=X.mode)?vr:0),gu=new sV(ru,iu,tu,nu,ou,su,cu,hu),yu=new eU(gu.calpha,"f");return{layer:new NU(X.id,X.uuid,{type:zr,gradientType:ru,smooth:iu,colors:tu,steps:nu,offset:ou,morph:su,angle:cu,alpha:hu,calpha:yu,mode:vu}),color:gu,alpha:yu,mode:vu};case"displace":var wu=new zU(null!=(yr=X.displacementType)?yr:0);if(0===wu.value){var Su=new KN(null!=(br=X.offset)?br:new wo(0,0,0)),ku=new sU(null!=(_r=X.scale)?_r:10),Cu=new sU(null!=(wr=X.intensity)?wr:8),Au=new sU(null!=(Cr=X.movement)?Cr:1),Mu=new sU(null!=(Ar=X.alpha)?Ar:1),Tu=new zU(null!=(Mr=X.mode)?Mr:0),Pu=new zU(null!=(Er=X.noiseType)?Er:0),Lu=new cV(wu,Cu,Au,Su,ku,Pu);return{layer:new NU(X.id,X.uuid,{displacementType:wu,type:zr,offset:Su,scale:ku,intensity:Cu,movement:Au,alpha:Mu,mode:Tu,noiseType:Pu}),position:Lu}}if(1===wu.value){var Ou=null!=(Tr=X.texture)?Tr:new tU,Ru=Ou.matrix;X.mat&&Ru.copy(X.mat),Ou.needsUpdate=!0;var Bu=new sU(null!=(Pr=X.intensity)?Pr:8),Iu=new oU(Ou),zu=new sU(null!=(Dr=X.crop)?Dr:0),Nu=new sU(null!=(Br=X.alpha)?Br:1),Fu=new zU(null!=(Ir=X.mode)?Ir:0),Uu=new cV(wu,Bu,Iu,zu);return{layer:new NU(X.id,X.uuid,{displacementType:wu,type:zr,intensity:Bu,texture:Iu,crop:zu,mat:Uu.mat,alpha:Nu,mode:Fu}),position:Uu}}return{}}return{}}},{key:"blendColors",value:function blendColors(){var X=this._layerNodes.findIndex((function(X){return"color"===X.type})),$=this._layerNodes.findIndex((function(X){return"light"===X.type}));if(-1!==X&&X<$){for(var ee=this._layerNodes[X].color,ne=X+1;ne<$;++ne){var ae=this._layerNodes[ne];"color"===ae.type&&(ee=new dV(ee,ae.color,ae.alpha,ae.mode))}this._material.color=ee}else this._material.color=void 0}},{key:"blendAfterColors",value:function blendAfterColors(){var X=new eU("outgoingLight","f"),$=this._layerNodes.findIndex((function(X){return"light"===X.type}));if(this._layerNodes.length>$+1){for(var ee=$+1;ee<this._layerNodes.length;++ee){var ne=this._layerNodes[ee];"color"===ne.type&&(X=new dV(X,ne.color,ne.alpha,ne.mode))}"afterColor"in this._material&&(this._material.afterColor=X)}else"afterColor"in this._material&&(this._material.afterColor=void 0)}},{key:"blendPositions",value:function blendPositions(){var X=this._layerNodes.filter((function(X){return"position"===X.type}));if(X.length>0){for(var $=X[0].position,ee=1;ee<X.length;++ee)X[ee]&&($=new hU($,X[ee].position,hU.ADD),$=new hU($,new sU(.5).setReadonly(!0),hU.MUL));this._material.position=$}else this._material.position=void 0}},{key:"cleanupChangedLayer",value:function cleanupChangedLayer(X){if("displace"===(this._layerNodes=this._layerNodes.filter((function($){return $.id!==X.id})),X.type))this.blendPositions();else this.blendColors(),this.blendAfterColors()}}]),Zr}(),yV=function(X){_inherits(Rn,X);var $=_createSuper(Rn);function Rn(X,ee,ne){var ae;return _classCallCheck(this,Rn),(ae=$.call(this,ne)).isNodeMaterial=!0,ae.type="NodeMaterial",ae.wireframeLinecap="",ae.wireframeLinejoin="",ae.uniformsBackup={},ae.userData={type:"",category:"",nodeType:""},ae.fog=!0,ae.vertex=null!=X?X:new BU(new wU(wU.PROJECTION)),ae.fragment=null!=ee?ee:new BU(new IU(5855577)),ae.updaters=[],ae.isDetached=!0,ae.dithering=!0,ae.onBeforeCompile=ae._onBeforeCompile,ae}return _createClass(Rn,[{key:"getDefines",value:function getDefines(){return this.defines}},{key:"getUniforms",value:function getUniforms(){return this.uniforms}},{key:"getVertexShader",value:function getVertexShader(){return this.vertexShader}},{key:"getFragmentShader",value:function getFragmentShader(){return this.fragmentShader}},{key:"_onBeforeCompile",value:function _onBeforeCompile(X,$){this.build({renderer:$}),X.defines=this.defines,X.uniforms=this.uniforms,X.vertexShader=this.vertexShader,X.fragmentShader=this.fragmentShader,X.extensionDerivatives=!0===this.extensions.derivatives,X.extensionFragDepth=!0===this.extensions.fragDepth,X.extensionDrawBuffers=!0===this.extensions.drawBuffers,X.extensionShaderTextureLOD=!0===this.extensions.shaderTextureLOD}},{key:"_getLayerStack",value:function _getLayerStack(X){var $=this,ee=new gV(this);return X&&(0,de.Z)(et().mark((function _callee2(){return et().wrap((function _callee2$(ne){for(;;)switch(ne.prev=ne.next){case 0:if(void 0!==X.image){ne.next=5;break}return ne.next=3,new Promise((function(X){return requestAnimationFrame(X)}));case 3:ne.next=0;break;case 5:ee.addLayerAt(1,{type:"texture",texture:X}),$.dispose();case 6:case"end":return ne.stop()}}),_callee2)})))(),ee}},{key:"clampUniformsForPreview",value:function clampUniformsForPreview(X,$){var ee=function n(X,$,ee){return Math.min(Math.max(X,$),ee)};if(this.userData.layers){var ne,ae=(0,je.Z)(this.userData.layers.getLayers());try{for(ae.s();!(ne=ae.n()).done;){var de=ne.value;if("displace"==de.type){this.uniformsBackup["f".concat(de.id,"_intensity")]=de.uniforms["f".concat(de.id,"_intensity")].value;var fe=ee(de.uniforms["f".concat(de.id,"_intensity")].value,X,$);de.uniforms["f".concat(de.id,"_intensity")].value=fe}}}catch(Ue){ae.e(Ue)}finally{ae.f()}}}},{key:"restoreClampedUniforms",value:function restoreClampedUniforms(){if(this.userData.layers){var X,$=(0,je.Z)(this.userData.layers.getLayers());try{for($.s();!(X=$.n()).done;){var ee=X.value;"displace"==ee.type&&(ee.uniforms["f".concat(ee.id,"_intensity")].value=this.uniformsBackup["f".concat(ee.id,"_intensity")])}}catch(ne){$.e(ne)}finally{$.f()}}}},{key:"customProgramCacheKey",value:function customProgramCacheKey(){return this.getHash()}},{key:"updateFrame",value:function updateFrame(X){for(var $=0;$<this.updaters.length;++$)X.updateNode(this.updaters[$])}},{key:"build",value:function build(X){var $,ee=null!=($=(X=null!=X?X:{}).builder)?$:new RU;return ee.setMaterial(this,X.renderer),ee.build(this.vertex,this.fragment),this.vertexShader=ee.getCode("vertex"),this.fragmentShader=ee.getCode("fragment"),this.defines=ee.defines,this.uniforms=ee.uniforms,this.extensions=ee.extensions,this.updaters=ee.updaters,this.fog=ee.requires.fog,this.lights=ee.requires.lights,this.transparent=ee.requires.transparent||this.blending>1,this}},{key:"getHash",value:function getHash(){var X="{";return X+='"vertex":'+this.vertex.getHash()+",",X+='"fragment":'+this.fragment.getHash(),X+="}"}},{key:"copy",value:function copy(X){var $=this.uuid;for(var ee in X)this[ee]=X[ee];return this.uuid=$,void 0!==X.userData&&(this.userData=JSON.parse(JSON.stringify(X.userData))),this}},{key:"toJSON",value:function toJSON(X){var $=this.userData.layers;this.userData.layers=void 0;var ee=_get(_getPrototypeOf(Rn.prototype),"toJSON",this).call(this,X);return ee.type="ShaderMaterial",ee.userData={type:this.userData.type,category:this.userData.category,nodeType:this.type,layers:$.toJSON(X)},ee.vertex=this.vertex.toJSON(X).uuid,ee.fragment=this.fragment.toJSON(X).uuid,delete ee.vertexShader,delete ee.fragmentShader,delete ee.color,delete ee.shininess,delete ee.specular,delete ee.roughness,delete ee.metalness,delete ee.uniforms,X&&!X.materials[this.uuid]&&(X.materials[this.uuid]=ee),this.userData.layers=$,ee}},{key:"fromJSON",value:function fromJSON(X,$){var ee;this.defines=null!=(ee=X.defines)?ee:{},this.depthFunc=X.depthFunc,this.depthWrite=X.depthWrite,this.side=void 0!==X.side?X.side:0,this.transparent=X.transparent,this.wireframeLinecap=X.wireframeLinecap,this.wireframeLinejoin=X.wireframeLinejoin,this.flatShading=X.flatShading,this.wireframe=X.wireframe,this.userData.layers.fromJSON(X.userData.layers,$,this)}}]),Rn}($h);Object.defineProperties(yV.prototype,{properties:{get:function get(){return this.fragment.properties}},needsUpdate:{set:function set(X){!0===X&&this.version++,this.needsCompile=X},get:function get(){return this.needsCompile}}});var bV,xV,_V,wV=function(X){_inherits(Ap,X);var $=_createSuper(Ap);function Ap(){var X;return _classCallCheck(this,Ap),(X=$.call(this,"basic")).nodeType="Basic",X.color=new IU(5855577),X}return _createClass(Ap,[{key:"generate",value:function generate(X){var $;if(X.isShader("vertex")){var ee=this.position?this.position.analyzeAndFlow(X,"v3",{cache:"position"}):void 0;X.mergeUniform(Nh.merge([Nd.fog])),X.addParsCode(["varying vec3 vViewPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>"].join("\n"));var ne=["#include <beginnormal_vertex>","\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = normal;\n\n\t\t\t\t#if defined( USE_LAYER_DISPLACE )\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif /* !USE_LAYER_DISPLACE */\n\t\t\t\t"];ee&&ne.push(ee.code,ee.result?"displaced_position = "+ee.result+";":""),ne.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","\tvNormal = transformedNormal;","#endif"),ne.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>"),$=ne.join("\n")}else{void 0===this.color&&(this.color=new IU(5855577)),this.color.analyze(X,{slot:"color"}),this.alpha&&this.alpha.analyze(X),this.afterColor&&this.afterColor.analyze(X,{slot:"afterColor"});var ae=this.color.flow(X,"c",{slot:"color"}),de=this.alpha?this.alpha.flow(X,"f"):void 0,fe=this.afterColor?this.afterColor.flow(X,"c",{slot:"afterColor"}):void 0;X.requires.transparent=void 0!==de,X.addParsCode(["#include <fog_pars_fragment>","#include <dithering_pars_fragment>","varying vec3 vViewPosition;","#include <normal_pars_fragment>"].join("\n"));var Ue=["#include <normal_fragment_begin>",ae.code];de&&Ue.push(de.code,"#ifdef ALPHATEST"," if ( "+de.result+" <= ALPHATEST ) discard;","#endif"),fe?Ue.push(fe.code,"vec3 outgoingLight = ".concat(ae.result,";"),"vec3 finalColor = spe_blend(outgoingLight, ".concat(fe.result,", 1.0, SPE_BLENDING_NORMAL);")):Ue.push("vec3 finalColor = ".concat(ae.result,";")),de?Ue.push("gl_FragColor = vec4( finalColor, accumAlpha * ".concat(de.result," );")):Ue.push("gl_FragColor = vec4("+ae.result+", 1.0 );"),Ue.push("#include <fog_fragment>","#include <dithering_fragment>"),$=Ue.join("\n")}return $}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Ap.prototype),"copy",this).call(this,X),X.color&&(this.color=X.color.clone()),X.position&&(this.position=X.position.clone()),X.alpha&&(this.alpha=X.alpha.clone()),X.afterColor&&(this.afterColor=X.afterColor.clone()),X.shadingAlpha&&(this.shadingAlpha=X.shadingAlpha.clone()),X.shadingBlend&&(this.shadingBlend=X.shadingBlend.clone()),this}}]),Ap}(qN),SV=function(X){_inherits(Tp,X);var $=_createSuper(Tp);function Tp(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new wV,ne=arguments.length>1?arguments[1]:void 0;return _classCallCheck(this,Tp),(X=$.call(this,ee,ee,ne)).type="BasicNodeMaterial",X.fragment=ee,X}return _createClass(Tp,[{key:"color",get:function get(){return this.fragment.color},set:function set(X){this.fragment.color=X}},{key:"afterColor",get:function get(){return this.fragment.afterColor},set:function set(X){this.fragment.afterColor=X}},{key:"alpha",get:function get(){return this.fragment.alpha},set:function set(X){this.fragment.alpha=X}},{key:"shadingAlpha",get:function get(){return this.fragment.shadingAlpha},set:function set(X){this.fragment.shadingAlpha=X}},{key:"shadingBlend",get:function get(){return this.fragment.shadingBlend},set:function set(X){this.fragment.shadingBlend=X}},{key:"position",get:function get(){return this.fragment.position},set:function set(X){this.fragment.position=X}}]),Tp}(yV),kV=function(X){_inherits(Yr,X);var $=_createSuper(Yr);function Yr(X,ee,ne){var ae;return _classCallCheck(this,Yr),(ae=$.call(this,ee,X)).userData.type="BasicMaterial",ae.userData.category="Basic",ae.userData.layers=null!=ne?ne:ae._getLayerStack(null==X?void 0:X.map),ae}return _createClass(Yr,[{key:"layersList",get:function get(){return this.userData.layers},set:function set(X){this.userData.layers=X}},{key:"equals",value:function equals(X){return this.userData.type===X.userData.type&&this.userData.layers.uuid==X.userData.layers.uuid}},{key:"copy",value:function copy(X){if(void 0!==X.userData.layers&&X.userData.layers instanceof gV){var $=X.userData.layers,ee=X.fragment;_get(_getPrototypeOf(Yr.prototype),"copy",this).call(this,X);var ne=ee.clone();this.fragment=ne,this.vertex=ne;var ae=$.clone(this);this.userData.layers=ae}else _get(_getPrototypeOf(Yr.prototype),"copy",this).call(this,X);return this}},{key:"dispose",value:function dispose(){_get(_getPrototypeOf(Yr.prototype),"dispose",this).call(this)}}],[{key:"fromJSON",value:function fromJSON(X,$,ee){var ne=new Yr(void 0,ee.getNode($.vertex));return ne.fromJSON($,ee),ne}},{key:"fromMaterial",value:function fromMaterial(X){var $=new Yr(X.map?{map:X.map}:{}),ee=$.fragment;return ee.color.value.copy(X.color),ee.alpha.value=X.opacity,$}}]),Yr}(SV),CV=function(X){_inherits(Ep,X);var $=_createSuper(Ep);function Ep(){var X;return _classCallCheck(this,Ep),(X=$.call(this,"phong")).nodeType="Phong",X.color=new IU(5855577),X.specular=new IU(1118481),X.shininess=new sU(30),X.shadingAlpha=new sU(1),X.shadingBlend=new zU(0),X}return _createClass(Ep,[{key:"build",value:function build(X){var $;if(X.define("PHONG"),X.requires.lights=!0,X.extensions.derivatives=!0,X.isShader("vertex")){var ee=this.position?this.position.analyzeAndFlow(X,"v3",{cache:"position"}):void 0;X.mergeUniform(Nh.merge([Nd.fog,Nd.lights])),X.addParsCode(["varying vec3 vViewPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));var ne=["#include <beginnormal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = normal;\n\n\t\t\t\t#ifdef USE_LAYER_DISPLACE\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif\n\t\t\t\t"];ee&&ne.push(ee.code,ee.result?"displaced_position = "+ee.result+";":""),ne.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),ne.push("\t#include <project_vertex>","\t#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","\t#include <worldpos_vertex>","\t#include <shadowmap_vertex>","\t#include <fog_vertex>"),$=ne.join("\n")}else{void 0===this.color&&(this.color=new IU(5855577)),this.color.analyze(X,{slot:"color"}),this.specular.analyze(X),this.shininess.analyze(X),this.shadingAlpha.analyze(X),this.shadingBlend.analyze(X),this.afterColor&&this.afterColor.analyze(X,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(X);var ae=this.color.flow(X,"c",{slot:"color"}),de=this.specular.flow(X,"c"),fe=this.shininess.flow(X,"f"),Ue=this.shadingAlpha.flow(X,"f"),je=this.shadingBlend.flow(X,"i"),Ke=this.afterColor?this.afterColor.flow(X,"c",{slot:"afterColor"}):void 0,et=this.alpha?this.alpha.flow(X,"f"):void 0;X.requires.transparent=void 0!==et,X.addParsCode(["uniform vec3 emissive;","#include <normal_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <dithering_pars_fragment>"].join("\n"));var tt=["#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx,viewdy));\n\t\t\t\tif (dot(normal, faceNormal) < 0.0) {\n\t\t\t\t\tnormal *= -1.0;\n\t\t\t\t}\n\t\t\t\t","\tBlinnPhongMaterial material;"];tt.push(ae.code,"\tvec3 diffuseColor = "+ae.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","\tvec3 totalEmissiveRadiance = emissive;",de.code,"\tvec3 specular = "+de.result+";",fe.code,"\tfloat shininess = max( 0.0001, "+fe.result+" );","\tfloat specularStrength = 1.0;"),et&&tt.push(et.code,"#ifdef ALPHATEST","if ( "+et.result+" <= ALPHATEST ) discard;","#endif"),tt.push("material.diffuseColor = diffuseColor;"),tt.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),tt.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;"),tt.push("\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ".concat(Ue.result," * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ").concat(Ue.result,", ").concat(je.result," );\n\t\t\t\t}\n\t\t\t\t")),Ke&&tt.push(Ke.code,"outgoingLight = spe_blend(outgoingLight, ".concat(Ke.result,", 1.0, SPE_BLENDING_NORMAL);")),et?tt.push("gl_FragColor = vec4( outgoingLight, accumAlpha * ".concat(et.result," );")):tt.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),tt.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),$=tt.join("\n")}return $}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Ep.prototype),"copy",this).call(this,X),X.color&&(this.color=X.color.clone()),this.specular=X.specular.clone(),this.shininess=X.shininess.clone(),X.position&&(this.position=X.position.clone()),X.afterColor&&(this.afterColor=X.afterColor.clone()),X.alpha&&(this.alpha=X.alpha.clone()),X.shadingAlpha&&(this.shadingAlpha=X.shadingAlpha.clone()),X.shadingBlend&&(this.shadingBlend=X.shadingBlend.clone()),this}}]),Ep}(qN),AV=function(X){_inherits(_p,X);var $=_createSuper(_p);function _p(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new CV,ne=arguments.length>1?arguments[1]:void 0;return _classCallCheck(this,_p),(X=$.call(this,ee,ee,ne)).type="PhongNodeMaterial",X.fragment=ee,X}return _createClass(_p,[{key:"color",get:function get(){return this.fragment.color},set:function set(X){this.fragment.color=X}},{key:"afterColor",get:function get(){return this.fragment.afterColor},set:function set(X){this.fragment.afterColor=X}},{key:"alpha",get:function get(){return this.fragment.alpha},set:function set(X){this.fragment.alpha=X}},{key:"shadingAlpha",get:function get(){return this.fragment.shadingAlpha},set:function set(X){this.fragment.shadingAlpha=X}},{key:"shadingBlend",get:function get(){return this.fragment.shadingBlend},set:function set(X){this.fragment.shadingBlend=X}},{key:"position",get:function get(){return this.fragment.position},set:function set(X){this.fragment.position=X}},{key:"specular",get:function get(){return this.fragment.specular},set:function set(X){this.fragment.specular=X}},{key:"shininess",get:function get(){return this.fragment.shininess},set:function set(X){this.fragment.shininess=X}}]),_p}(yV),MV=function(X){_inherits(pn,X);var $=_createSuper(pn);function pn(X,ee,ne){var ae;return _classCallCheck(this,pn),(ae=$.call(this,ee,X)).userData.type="PhongMaterial",ae.userData.category="Phong",ae.userData.layers=null!=ne?ne:ae._getLayerStack(null==X?void 0:X.map),ae}return _createClass(pn,[{key:"layersList",get:function get(){return this.userData.layers},set:function set(X){this.userData.layers=X}},{key:"equals",value:function equals(X){return this.userData.type===X.userData.type&&this.userData.layers.uuid==X.userData.layers.uuid}},{key:"copy",value:function copy(X){if(void 0!==X.userData.layers&&X.userData.layers instanceof gV){var $=X.userData.layers,ee=X.fragment;_get(_getPrototypeOf(pn.prototype),"copy",this).call(this,X);var ne=ee.clone();this.fragment=ne,this.vertex=ne;var ae=$.clone(this);this.userData.layers=ae,ne.shadingAlpha.value=ee.shadingAlpha.value,ne.shadingBlend.value=ee.shadingBlend.value}else _get(_getPrototypeOf(pn.prototype),"copy",this).call(this,X);return this}},{key:"dispose",value:function dispose(){_get(_getPrototypeOf(pn.prototype),"dispose",this).call(this)}}],[{key:"fromJSON",value:function fromJSON(X,$,ee){var ne=new pn(void 0,ee.getNode($.vertex));return ne.fromJSON($,ee),ne}},{key:"fromMaterial",value:function fromMaterial(X){var $=new pn(X.map?{map:X.map}:{}),ee=$.fragment;return ee.color.value.copy(X.color),ee.alpha.value=X.opacity,$}}]),pn}(AV),EV=function(X){_inherits(Cp,X);var $=_createSuper(Cp);function Cp(){var X;return _classCallCheck(this,Cp),(X=$.call(this,"lambert")).nodeType="Lambert",X.color=new IU(5855577),X.emissive=new IU(0),X.emissiveIntensity=new sU(1),X.shadingAlpha=new sU(1),X.shadingBlend=new zU(0),X}return _createClass(Cp,[{key:"build",value:function build(X){var $;if(X.define("LAMBERT"),X.requires.lights=!0,X.extensions.derivatives=!0,X.isShader("vertex")){var ee=this.position?this.position.analyzeAndFlow(X,"v3",{cache:"position"}):void 0;X.mergeUniform(Nh.merge([Nd.fog,Nd.lights])),X.addParsCode(["varying vec3 vViewPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#ifdef DOUBLE_SIDED","\tvarying vec3 vLightBack;","\tvarying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <color_pars_vertex>","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));var ne=["#include <beginnormal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = normal;\n\n\t\t\t\t#ifdef USE_LAYER_DISPLACE\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif\n\t\t\t\t"];ee&&ne.push(ee.code,ee.result?"displaced_position = "+ee.result+";":""),ne.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),ne.push("\t#include <project_vertex>","\t#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","\t#include <worldpos_vertex>","\n\t\t\t\t\tvec3 diffuse = vec3( 1.0 );\n\t\t\t\t\tGeometricContext geometry;\n\t\t\t\t\tgeometry.position = mvPosition.xyz;\n\t\t\t\t\tgeometry.normal = normalize( transformedNormal );\n\t\t\t\t\tgeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\n\t\t\t\t\tGeometricContext backGeometry;\n\t\t\t\t\tbackGeometry.position = geometry.position;\n\t\t\t\t\tbackGeometry.normal = -geometry.normal;\n\t\t\t\t\tbackGeometry.viewDir = geometry.viewDir;\n\t\t\t\t\tvLightFront = vec3( 0.0 );\n\t\t\t\t\tvIndirectFront = vec3( 0.0 );\n\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\tvLightBack = vec3( 0.0 );\n\t\t\t\t\t\tvIndirectBack = vec3( 0.0 );\n\t\t\t\t\t#endif\n\t\t\t\t\tIncidentLight directLight;\n\t\t\t\t\tfloat dotNL;\n\t\t\t\t\tvec3 directLightColor_Diffuse;\n\t\t\t\t\tvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\n\t\t\t\t\tvIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );\n\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\t\t\t\t\t\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_POINT_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tgetPointLightInfo( pointLights[ i ], geometry, directLight );\n\t\t\t\t\t\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\t\t\t\t\t\tdirectLightColor_Diffuse = directLight.color;\n\t\t\t\t\t\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_SPOT_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tgetSpotLightInfo( spotLights[ i ], geometry, directLight );\n\t\t\t\t\t\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\t\t\t\t\t\tdirectLightColor_Diffuse = directLight.color;\n\t\t\t\t\t\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_DIR_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tgetDirectionalLightInfo( directionalLights[ i ], geometry, directLight );\n\t\t\t\t\t\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\t\t\t\t\t\tdirectLightColor_Diffuse = directLight.color;\n\t\t\t\t\t\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t\t#if NUM_HEMI_LIGHTS > 0\n\t\t\t\t\t\t#pragma unroll_loop_start\n\t\t\t\t\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\t\t\t\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );\n\t\t\t\t\t\t\t#ifdef DOUBLE_SIDED\n\t\t\t\t\t\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );\n\t\t\t\t\t\t\t#endif\n\t\t\t\t\t\t}\n\t\t\t\t\t\t#pragma unroll_loop_end\n\t\t\t\t\t#endif\n\t\t\t\t","\t#include <shadowmap_vertex>","\t#include <fog_vertex>"),$=ne.join("\n")}else{void 0===this.color&&(this.color=new IU(5855577)),this.color.analyze(X,{slot:"color"}),this.shadingAlpha.analyze(X),this.shadingBlend.analyze(X),this.afterColor&&this.afterColor.analyze(X,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(X);var ae=this.color.flow(X,"c",{slot:"color"}),de=this.emissive.flow(X,"c",{slot:"emissive"}),fe=this.emissiveIntensity.flow(X,"f",{slot:"emissive"}),Ue=this.shadingAlpha.flow(X,"f"),je=this.shadingBlend.flow(X,"i"),Ke=this.afterColor?this.afterColor.flow(X,"c",{slot:"afterColor"}):void 0,et=this.alpha?this.alpha.flow(X,"f"):void 0;X.requires.transparent=void 0!==et,X.addParsCode(["varying vec3 vViewPosition;","varying vec3 vLightFront;","varying vec3 vIndirectFront;","#ifndef DOUBLE_SIDED","   #define DOUBLE_SIDED","#endif","#include <normal_pars_fragment>","#ifdef DOUBLE_SIDED","\tvarying vec3 vLightBack;","\tvarying vec3 vIndirectBack;","#endif","#include <bsdfs>","#include <lights_pars_begin>","#include <fog_pars_fragment>","#include <shadowmap_pars_fragment>","#include <shadowmask_pars_fragment>","#include <clipping_planes_pars_fragment>","#include <dithering_pars_fragment>"].join("\n"));var tt=["#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx, viewdy));\n\t\t\t\tbool isFrontFacing = (dot(normal, faceNormal) >= 0.0);\n\t\t\t\t","#include <clipping_planes_fragment>"];tt.push(ae.code,"vec3 diffuseColor = "+ae.result+";","ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );"),et&&tt.push(et.code,"#ifdef ALPHATEST","if ( "+et.result+" <= ALPHATEST ) discard;","#endif"),tt.push("#ifdef DOUBLE_SIDED","\treflectedLight.indirectDiffuse += ( isFrontFacing ) ? vIndirectFront : vIndirectBack;","#else","\treflectedLight.indirectDiffuse += vIndirectFront;","#endif","#include <lightmap_fragment>","reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );","#ifdef DOUBLE_SIDED","\treflectedLight.directDiffuse = ( isFrontFacing ) ? vLightFront : vLightBack;","#else","\treflectedLight.directDiffuse = vLightFront;","#endif","reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();"),de&&tt.push(de.code,"reflectedLight.directDiffuse += "+de.result+" * "+fe.result+";"),tt.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;"),tt.push("\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ".concat(Ue.result," * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ").concat(Ue.result,", ").concat(je.result," );\n\t\t\t\t}\n\t\t\t\t")),Ke&&tt.push(Ke.code,"outgoingLight = spe_blend(outgoingLight, ".concat(Ke.result,", 1.0, SPE_BLENDING_NORMAL);")),et?tt.push("gl_FragColor = vec4( outgoingLight, accumAlpha * ".concat(et.result," );")):tt.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),tt.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),$=tt.join("\n")}return $}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Cp.prototype),"copy",this).call(this,X),this.emissiveIntensity=X.emissiveIntensity.clone(),X.color&&(this.color=X.color.clone()),X.position&&(this.position=X.position.clone()),X.afterColor&&(this.afterColor=X.afterColor.clone()),X.alpha&&(this.alpha=X.alpha.clone()),X.shadingAlpha&&(this.shadingAlpha=X.shadingAlpha.clone()),X.shadingBlend&&(this.shadingBlend=X.shadingBlend.clone()),X.emissive&&(this.emissive=X.emissive.clone()),this}}]),Cp}(qN),TV=function(X){_inherits(Dp,X);var $=_createSuper(Dp);function Dp(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new EV,ne=arguments.length>1?arguments[1]:void 0;return _classCallCheck(this,Dp),(X=$.call(this,ee,ee,ne)).type="LambertNodeMaterial",X.fragment=ee,X}return _createClass(Dp,[{key:"color",get:function get(){return this.fragment.color},set:function set(X){this.fragment.color=X}},{key:"afterColor",get:function get(){return this.fragment.afterColor},set:function set(X){this.fragment.afterColor=X}},{key:"alpha",get:function get(){return this.fragment.alpha},set:function set(X){this.fragment.alpha=X}},{key:"shadingAlpha",get:function get(){return this.fragment.shadingAlpha},set:function set(X){this.fragment.shadingAlpha=X}},{key:"shadingBlend",get:function get(){return this.fragment.shadingBlend},set:function set(X){this.fragment.shadingBlend=X}},{key:"position",get:function get(){return this.fragment.position},set:function set(X){this.fragment.position=X}},{key:"emissive",get:function get(){return this.fragment.emissive},set:function set(X){this.fragment.emissive=X}},{key:"emissiveIntensity",get:function get(){return this.fragment.emissiveIntensity},set:function set(X){this.fragment.emissiveIntensity=X}}]),Dp}(yV),PV=function(X){_inherits(jl,X);var $=_createSuper(jl);function jl(X,ee,ne){var ae;return _classCallCheck(this,jl),(ae=$.call(this,ee,X)).userData.type="LambertMaterial",ae.userData.category="Lambert",ae.userData.layers=null!=ne?ne:ae._getLayerStack(null==X?void 0:X.map),ae}return _createClass(jl,[{key:"layersList",get:function get(){return this.userData.layers},set:function set(X){this.userData.layers=X}},{key:"equals",value:function equals(X){return this.userData.type===X.userData.type&&this.userData.layers.uuid==X.userData.layers.uuid}},{key:"copy",value:function copy(X){if(void 0!==X.userData.layers&&X.userData.layers instanceof gV){var $=X.userData.layers,ee=X.fragment;_get(_getPrototypeOf(jl.prototype),"copy",this).call(this,X);var ne=ee.clone();this.fragment=ne,this.vertex=ne;var ae=$.clone(this);this.userData.layers=ae,ne.shadingAlpha.value=ee.shadingAlpha.value,ne.shadingBlend.value=ee.shadingBlend.value}else _get(_getPrototypeOf(jl.prototype),"copy",this).call(this,X);return this}},{key:"dispose",value:function dispose(){_get(_getPrototypeOf(jl.prototype),"dispose",this).call(this)}}],[{key:"fromJSON",value:function fromJSON(X,$,ee){var ne=new jl(void 0,ee.getNode($.vertex));return ne.fromJSON($,ee),ne}}]),jl}(TV),DV=function(X){_inherits(Pp,X);var $=_createSuper(Pp);function Pp(){var X;return _classCallCheck(this,Pp),(X=$.call(this,"toon")).nodeType="Toon",X.color=new IU(5855577),X.specular=new IU(1118481),X.shininess=new sU(30),X.shadingAlpha=new sU(1),X.shadingBlend=new zU(0),X}return _createClass(Pp,[{key:"build",value:function build(X){var $;if(X.define("TOON"),X.requires.lights=!0,X.extensions.derivatives=!0,X.isShader("vertex")){var ee=this.position?this.position.analyzeAndFlow(X,"v3",{cache:"position"}):void 0;X.mergeUniform(Nh.merge([Nd.fog,Nd.lights])),X.addParsCode(["varying vec3 vViewPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));var ne=["#include <beginnormal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = normal;\n\n\t\t\t\t#ifdef USE_LAYER_DISPLACE\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#ifndef USE_LAYER_DISPLACE\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif\n\t\t\t\t"];ee&&ne.push(ee.code,ee.result?"displaced_position = "+ee.result+";":""),ne.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),ne.push("\t#include <project_vertex>","\t#include <fog_vertex>","\t#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","\t#include <worldpos_vertex>","\t#include <shadowmap_vertex>","\t#include <fog_vertex>"),$=ne.join("\n")}else{void 0===this.color&&(this.color=new IU(5855577)),this.color.analyze(X,{slot:"color"}),this.specular.analyze(X),this.shininess.analyze(X),this.shadingAlpha.analyze(X),this.shadingBlend.analyze(X),this.afterColor&&this.afterColor.analyze(X,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(X);var ae=this.color.flow(X,"c",{slot:"color"}),de=this.specular.flow(X,"c"),fe=this.shininess.flow(X,"f"),Ue=this.shadingAlpha.flow(X,"f"),je=this.shadingBlend.flow(X,"i"),Ke=this.afterColor?this.afterColor.flow(X,"c",{slot:"afterColor"}):void 0,et=this.alpha?this.alpha.flow(X,"f"):void 0;X.requires.transparent=void 0!==et,X.addParsCode(["#include <normal_pars_fragment>","#include <gradientmap_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <dithering_pars_fragment>","\n\t\t\t\t\tvarying vec3 vViewPosition;\n\t\t\t\t\tstruct ToonMaterial {\n\t\t\t\t\t\tvec3\tdiffuseColor;\n\t\t\t\t\t\tvec3\tspecularColor;\n\t\t\t\t\t\tfloat\tspecularShininess;\n\t\t\t\t\t\tfloat\tspecularStrength;\n\t\t\t\t\t};\n\t\t\t\t\tvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\t\t\t\t\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t\t\t\n\t\t\t\t\t\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\t\t\t\t\t\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;\n\t\t\t\t\t}\n\t\t\t\t\tvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\t\t\t\t\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\t\t\t\t\t}\n\t\t\t\t\t#define RE_Direct\t\t\t\tRE_Direct_Toon\n\t\t\t\t\t#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n\t\t\t\t\t#define Material_LightProbeLOD( material )\t(0)\n\t\t\t\t\t","#include <shadowmap_pars_fragment>","#include <bumpmap_pars_fragment>","#include <normalmap_pars_fragment>"].join("\n"));var tt=["#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx,viewdy));\n\t\t\t\tif (dot(normal, faceNormal) < 0.0) {\n\t\t\t\t\tnormal *= -1.0;\n\t\t\t\t}\n\t\t\t\t","\tToonMaterial material;"];tt.push(ae.code,"\tvec3 diffuseColor = "+ae.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",de.code,"\tvec3 specular = "+de.result+";",fe.code,"\tfloat shininess = max( 0.0001, "+fe.result+" );","\tfloat specularStrength = 1.0;"),et&&tt.push(et.code,"#ifdef ALPHATEST","if ( "+et.result+" <= ALPHATEST ) discard;","#endif"),tt.push("material.diffuseColor = diffuseColor;"),tt.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),tt.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular;"),tt.push("\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ".concat(Ue.result," * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ").concat(Ue.result,", ").concat(je.result," );\n\t\t\t\t}\n\t\t\t\t")),Ke&&tt.push(Ke.code,"outgoingLight = spe_blend(outgoingLight, ".concat(Ke.result,", 1.0, SPE_BLENDING_NORMAL);")),et?tt.push("gl_FragColor = vec4( outgoingLight, accumAlpha * ".concat(et.result," );")):tt.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),tt.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),$=tt.join("\n")}return $}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Pp.prototype),"copy",this).call(this,X),X.color&&(this.color=X.color.clone()),this.specular=X.specular.clone(),this.shininess=X.shininess.clone(),X.position&&(this.position=X.position.clone()),X.afterColor&&(this.afterColor=X.afterColor.clone()),X.alpha&&(this.alpha=X.alpha.clone()),X.shadingAlpha&&(this.shadingAlpha=X.shadingAlpha.clone()),X.shadingBlend&&(this.shadingBlend=X.shadingBlend.clone()),this}}]),Pp}(qN),LV=function(X){_inherits(Lp,X);var $=_createSuper(Lp);function Lp(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new DV,ne=arguments.length>1?arguments[1]:void 0;return _classCallCheck(this,Lp),(X=$.call(this,ee,ee,ne)).type="ToonNodeMaterial",X.fragment=ee,X}return _createClass(Lp,[{key:"color",get:function get(){return this.fragment.color},set:function set(X){this.fragment.color=X}},{key:"afterColor",get:function get(){return this.fragment.afterColor},set:function set(X){this.fragment.afterColor=X}},{key:"alpha",get:function get(){return this.fragment.alpha},set:function set(X){this.fragment.alpha=X}},{key:"shadingAlpha",get:function get(){return this.fragment.shadingAlpha},set:function set(X){this.fragment.shadingAlpha=X}},{key:"shadingBlend",get:function get(){return this.fragment.shadingBlend},set:function set(X){this.fragment.shadingBlend=X}},{key:"position",get:function get(){return this.fragment.position},set:function set(X){this.fragment.position=X}},{key:"specular",get:function get(){return this.fragment.specular},set:function set(X){this.fragment.specular=X}},{key:"shininess",get:function get(){return this.fragment.shininess},set:function set(X){this.fragment.shininess=X}}]),Lp}(yV),OV=function(X){_inherits(ql,X);var $=_createSuper(ql);function ql(X,ee,ne){var ae;return _classCallCheck(this,ql),(ae=$.call(this,ee,X)).userData.type="ToonMaterial",ae.userData.category="Toon",ae.userData.layers=null!=ne?ne:ae._getLayerStack(null==X?void 0:X.map),ae}return _createClass(ql,[{key:"layersList",get:function get(){return this.userData.layers},set:function set(X){this.userData.layers=X}},{key:"equals",value:function equals(X){return this.userData.type===X.userData.type&&this.userData.layers.uuid==X.userData.layers.uuid}},{key:"copy",value:function copy(X){if(void 0!==X.userData.layers&&X.userData.layers instanceof gV){var $=X.userData.layers,ee=X.fragment;_get(_getPrototypeOf(ql.prototype),"copy",this).call(this,X);var ne=ee.clone();this.fragment=ne,this.vertex=ne;var ae=$.clone(this);this.userData.layers=ae,ne.shadingAlpha.value=ee.shadingAlpha.value,ne.shadingBlend.value=ee.shadingBlend.value}else _get(_getPrototypeOf(ql.prototype),"copy",this).call(this,X);return this}},{key:"dispose",value:function dispose(){_get(_getPrototypeOf(ql.prototype),"dispose",this).call(this)}}],[{key:"fromJSON",value:function fromJSON(X,$,ee){var ne=new ql(void 0,ee.getNode($.vertex));return ne.fromJSON($,ee),ne}}]),ql}(LV),RV=function(X){_inherits(Ip,X);var $=_createSuper(Ip);function Ip(){var X;return _classCallCheck(this,Ip),(X=$.call(this,"standard")).nodeType="Standard",X.color=new IU(5855577),X.roughness=new sU(.3),X.metalness=new sU(0),X.reflectivity=new sU(.5),X.shadingAlpha=new sU(1),X.shadingBlend=new zU(0),X}return _createClass(Ip,[{key:"build",value:function build(X){var $;if(X.define("STANDARD"),X.requires.lights=!0,X.extensions.derivatives=!0,X.extensions.shaderTextureLOD=!0,X.isShader("vertex")){var ee=this.position?this.position.analyzeAndFlow(X,"v3",{cache:"position"}):void 0;X.mergeUniform(Nh.merge([Nd.fog,Nd.lights])),Nd.LTC_1&&(X.uniforms.ltc_1={value:void 0},X.uniforms.ltc_2={value:void 0}),X.addParsCode(["varying vec3 vViewPosition;","#include <fog_pars_vertex>","#include <normal_pars_vertex>","#include <shadowmap_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));var ne=["#include <beginnormal_vertex>","\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#endif\n\n\t\t\t\tvec3 displaced_position = position;\n\t\t\t\tvec3 displaced_normal = normal;\n\n\t\t\t\t#if defined( USE_LAYER_DISPLACE )\n\t\t\t\t\tvec3 transformed;\n\t\t\t\t\tvec3 transformedNormal;\n\t\t\t\t#endif\n\t\t\t\t","#include <normal_vertex>","\n\t\t\t\t#if !defined( USE_LAYER_DISPLACE )\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t#endif /* !USE_LAYER_DISPLACE */\n\t\t\t\t"];ee&&ne.push(ee.code,ee.result?"displaced_position = "+ee.result+";":""),ne.push("transformed = displaced_position;","transformedNormal = normalMatrix * displaced_normal;","#ifndef FLAT_SHADED","    vNormal = transformedNormal;","#endif"),ne.push("#include <project_vertex>","#include <fog_vertex>","#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),$=ne.join("\n")}else{var ae={gamma:!0};void 0===this.color&&(this.color=new IU(5855577)),this.color.analyze(X,{slot:"color",context:ae}),this.roughness.analyze(X),this.metalness.analyze(X),this.shadingAlpha.analyze(X),this.shadingBlend.analyze(X),this.afterColor&&this.afterColor.analyze(X,{slot:"afterColor"}),this.alpha&&this.alpha.analyze(X),this.reflectivity&&this.reflectivity.analyze(X);var de=this.color.flow(X,"c",{slot:"color",context:ae}),fe=this.roughness.flow(X,"f"),Ue=this.metalness.flow(X,"f"),je=this.shadingAlpha.flow(X,"f"),Ke=this.shadingBlend.flow(X,"i"),et=this.afterColor?this.afterColor.flow(X,"c",{slot:"afterColor"}):void 0,tt=this.alpha?this.alpha.flow(X,"f"):void 0,nt=this.reflectivity?this.reflectivity.flow(X,"f"):void 0;X.requires.transparent=void 0!==tt,X.addParsCode(["varying vec3 vViewPosition;","#include <normal_pars_fragment>","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>"].join("\n"));var it=["#include <clipping_planes_fragment>","\t#include <normal_fragment_begin>","\n\t\t\t\t// NOTE: gl_FrontFacing alternative using face normal estimation.\n\t\t\t\tvec3 viewdx = dFdx(vViewPosition);\n\t\t\t\tvec3 viewdy = dFdy(vViewPosition);\n\t\t\t\tvec3 faceNormal = normalize(cross(viewdx,viewdy));\n\t\t\t\tif (dot(normal, faceNormal) < 0.0) {\n\t\t\t\t\tnormal *= -1.0;\n\t\t\t\t}\n\t\t\t\t","\tPhysicalMaterial material;","\tmaterial.diffuseColor = vec3( 1.0 );"];it.push(de.code,"\tvec3 diffuseColor = "+de.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );",fe.code,"\tfloat roughnessFactor = "+fe.result+";",Ue.code,"\tfloat metalnessFactor = "+Ue.result+";"),tt&&it.push(tt.code,"#ifdef ALPHATEST","\tif ( "+tt.result+" <= ALPHATEST ) discard;","#endif"),it.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),it.push("material.diffuseColor = diffuseColor * ( 1.0 - metalnessFactor );","material.roughness = max( roughnessFactor, 0.0525 );","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.roughness = clamp( roughnessFactor, 0.04, 1.0 );"),nt?it.push(nt.code,"material.specularColor = mix( vec3( 0.16 * pow2( "+nt.result+" ) ), diffuseColor, metalnessFactor );"):it.push("material.specularColor = mix( vec3( 0.04 ), diffuseColor, metalnessFactor );"),it.push("#include <lights_fragment_begin>"),it.push("#include <lights_fragment_end>"),it.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular;"),it.push("\n\t\t\t\tif (outgoingLight != diffuseColor) {\n\t\t\t\t\tfloat lightAccu = clamp( length( reflectedLight.directSpecular + reflectedLight.indirectSpecular ), 0.0, 1.0 );\n\t\t\t\t\taccumAlpha += ( 1.0 - accumAlpha ) * ".concat(je.result," * lightAccu;\n\t\t\t\t\toutgoingLight = spe_blend( diffuseColor, outgoingLight, ").concat(je.result,", ").concat(Ke.result," );\n\t\t\t\t}\n\t\t\t\t")),et&&it.push(et.code,"outgoingLight = spe_blend(outgoingLight, ".concat(et.result,", 1.0, SPE_BLENDING_NORMAL);")),tt?it.push("gl_FragColor = vec4( outgoingLight, accumAlpha * ".concat(tt.result," );")):it.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),it.push("#include <encodings_fragment>","#include <fog_fragment>","#include <dithering_fragment>"),$=it.join("\n")}return $}},{key:"copy",value:function copy(X){return _get(_getPrototypeOf(Ip.prototype),"copy",this).call(this,X),X.color&&(this.color=X.color.clone()),this.roughness=X.roughness.clone(),this.metalness=X.metalness.clone(),X.position&&(this.position=X.position.clone()),X.afterColor&&(this.afterColor=X.afterColor.clone()),X.alpha&&(this.alpha=X.alpha.clone()),X.reflectivity&&(this.reflectivity=X.reflectivity.clone()),X.shadingAlpha&&(this.shadingAlpha=X.shadingAlpha.clone()),X.shadingBlend&&(this.shadingBlend=X.shadingBlend.clone()),this}}]),Ip}(qN),BV=function(X){_inherits(Rp,X);var $=_createSuper(Rp);function Rp(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new RV,ne=arguments.length>1?arguments[1]:void 0;return _classCallCheck(this,Rp),(X=$.call(this,ee,ee,ne)).type="StandardNodeMaterial",X.fragment=ee,X}return _createClass(Rp,[{key:"color",get:function get(){return this.fragment.color},set:function set(X){this.fragment.color=X}},{key:"afterColor",get:function get(){return this.fragment.afterColor},set:function set(X){this.fragment.afterColor=X}},{key:"alpha",get:function get(){return this.fragment.alpha},set:function set(X){this.fragment.alpha=X}},{key:"shadingAlpha",get:function get(){return this.fragment.shadingAlpha},set:function set(X){this.fragment.shadingAlpha=X}},{key:"shadingBlend",get:function get(){return this.fragment.shadingBlend},set:function set(X){this.fragment.shadingBlend=X}},{key:"position",get:function get(){return this.fragment.position},set:function set(X){this.fragment.position=X}},{key:"roughness",get:function get(){return this.fragment.roughness},set:function set(X){this.fragment.roughness=X}},{key:"metalness",get:function get(){return this.fragment.metalness},set:function set(X){this.fragment.metalness=X}},{key:"reflectivity",get:function get(){return this.fragment.reflectivity},set:function set(X){this.fragment.reflectivity=X}}]),Rp}(yV),IV=function(X){_inherits(Yl,X);var $=_createSuper(Yl);function Yl(X,ee,ne){var ae;return _classCallCheck(this,Yl),(ae=$.call(this,ee,X)).userData.type="PhysicalMaterial",ae.userData.category="Physical",ae.userData.layers=null!=ne?ne:ae._getLayerStack(null==X?void 0:X.map),ae}return _createClass(Yl,[{key:"layersList",get:function get(){return this.userData.layers},set:function set(X){this.userData.layers=X}},{key:"equals",value:function equals(X){return this.userData.type===X.userData.type&&this.userData.layers.uuid==X.userData.layers.uuid}},{key:"copy",value:function copy(X){if(void 0!==X.userData.layers&&X.userData.layers instanceof gV){var $=X.userData.layers,ee=X.fragment;_get(_getPrototypeOf(Yl.prototype),"copy",this).call(this,X);var ne=ee.clone();this.fragment=ne,this.vertex=ne;var ae=$.clone(this);this.userData.layers=ae,ne.shadingAlpha.value=ee.shadingAlpha.value,ne.shadingBlend.value=ee.shadingBlend.value}else _get(_getPrototypeOf(Yl.prototype),"copy",this).call(this,X);return this}},{key:"dispose",value:function dispose(){_get(_getPrototypeOf(Yl.prototype),"dispose",this).call(this)}}],[{key:"fromJSON",value:function fromJSON(X,$,ee){var ne=new Yl(void 0,ee.getNode($.vertex));return ne.fromJSON($,ee),ne}}]),Yl}(BV);function pr(X,$){var ee;if("string"!=typeof X)return new $N(X.r,X.g,X.b,"a"in X?X.a:1);var ne=null==$?void 0:$.getColor(X);return ne?ee=ne:(console.warn("Tried to create color layer params with a color key that does not exist in the assets manager"),ee=new $N(0,0,0,0)),ee}function Bp(X,$){switch(X.data.type){case"light":return mi(X);case"fresnel":return function AF(X,$){var ee=X.data,ne=ee.bias,ae=ee.scale,de=ee.intensity,fe=ee.factor,Ue=ee.color;return At(Ct({},mi(X)),{color:pr(Ue,$),bias:ne,scale:ae,intensity:de,factor:fe})}(X,$);case"gradient":return function TF(X){var $=X.data,ee=$.gradientType,ne=$.smooth,de=$.colors,fe=$.steps,Ue=$.angle,je=$.offset,Ke=$.morph;return At(Ct({},mi(X)),{gradientType:ee,smooth:ne,colors:de.map((function(X){return new to(X[0],X[1],X[2],X[3])})),num:de.length,steps:fe,offset:_construct(va,(0,ae.Z)(je)),morph:_construct(va,(0,ae.Z)(Ke)),angle:Ue})}(X);case"depth":return function EF(X){var $=X.data,ee=$.gradientType,ne=$.near,de=$.far,fe=$.isVector,Ue=$.isWorldSpace,je=$.origin,Ke=$.direction,et=$.colors,tt=$.steps,nt=$.smooth,it=$.num;return At(Ct({},mi(X)),{gradientType:ee,near:ne,far:de,isVector:fe,isWorldSpace:Ue,origin:_construct(wo,(0,ae.Z)(je)),direction:Ke?_construct(wo,(0,ae.Z)(Ke)):new wo(1,0,0),num:it,colors:et.map((function(X){return new to(X[0],X[1],X[2],X[3])})),steps:tt,smooth:nt})}(X);case"normal":return function _F(X){var $=X.data.cnormal;return At(Ct({},mi(X)),{cnormal:new wo($[0],$[1],$[2])})}(X);case"noise":return function CF(X,$){var ee=X.data;return At(Ct({},mi(X)),{scale:ee.scale,move:ee.move,fA:_construct(va,(0,ae.Z)(ee.fA)),fB:_construct(va,(0,ae.Z)(ee.fB)),size:_construct(wo,(0,ae.Z)(ee.size)),distortion:_construct(va,(0,ae.Z)(ee.distortion)),colorA:pr(ee.colorA,$),colorB:pr(ee.colorB,$),colorC:pr(ee.colorC,$),colorD:pr(ee.colorD,$),noiseType:ee.noiseType})}(X,$);case"texture":return function DF(X,$){var ee,ne=X.data,ae=ne.projection,de=ne.axis,fe=ne.side,Ue=ne.crop,je=ne.size,Ke=X.data.texture,et=Ke.image,tt=Ke.wrapping,nt=Ke.repeat,it=Ke.offset,ct=new eo;if("string"==typeof et)ee=null==$?void 0:$.getImage(et);else{var dt=new Image;dt.src=co(et.data),dt.onload=function(){null!=$&&$.onImageLoad&&(null==$||$.onImageLoad())},ee=dt}return ct.image=ee,ct.repeat.set(nt[0],nt[1]),ct.offset.set(it[0],it[1]),ct.wrapS=ct.wrapT=tt,At(Ct({},mi(X)),{texture:ct,mat:(new ga).setUvTransform(it[0],it[1],nt[0],nt[1],0,0,0),crop:Ue,projection:ae,axis:["x","y","z"].indexOf(de),side:[2,0,1].indexOf(fe),size:je})}(X,$);case"rainbow":return function PF(X){var $=X.data;return At(Ct({},mi(X)),{filmThickness:$.filmThickness,movement:$.movement,wavelengths:_construct(wo,(0,ae.Z)($.wavelengths)),noiseStrength:$.noiseStrength,noiseScale:$.noiseScale,offset:_construct(wo,(0,ae.Z)($.offset))})}(X);case"transmission":return function LF(X,$){var ee=X.data;return At(Ct({},mi(X)),{thickness:ee.thickness,ior:ee.ior,roughness:ee.roughness,transmissionSamplerMap:$.transmissionSamplerMap,transmissionDepthMap:$.transmissionDepthMap})}(X,$);case"matcap":return function IF(X,$){var ee,ne=new eo,ae=X.data.texture.image;if("string"==typeof ae)ee=null==$?void 0:$.getImage(ae);else{var de=new Image;de.src=co(ae.data),de.onload=function(){null!=$&&$.onImageLoad&&(null==$||$.onImageLoad())},ee=de}ne.image=ee;var fe=16777215;return At(Ct({},mi(X)),{color:fe,texture:ne})}(X,$);case"displace":return function RF(X){var $=X.data,ee=At(Ct({},L1(X)),{intensity:$.intensity});if("noise"===$.displacementType)return At(Ct({},ee),{offset:_construct(wo,(0,ae.Z)($.offset)),scale:$.scale,movement:$.movement,noiseType:$.noiseType});var ne=new eo,de=(new ga).setUvTransform(0,0,1,1,0,0,0);return At(Ct({},ee),{texture:ne,mat:de,crop:$.crop})}(X);default:return function MF(X,$){return At(Ct({},mi(X)),{color:pr(X.data.color,$)})}(X,$)}}function L1(X){return{type:X.data.type}}function mi(X){var $=X.data,ee=$.alpha,ne=$.mode;return At(Ct({},L1(X)),{alpha:ee,mode:ne})}function Np(X,$,ee){if("displace"===ee.type&&("intensity"===X||"visible"===X)){var ne=$.uniforms["f".concat($.id,"_intensity")];return ne?(ne.value=ee.intensity*(ee.visible?1:0),ne):void 0}if("displace"!==ee.type&&("alpha"===X||"visible"===X)){var ae=$.uniforms["f".concat($.id,"_alpha")];return ae?(ae.value=ee.alpha*(ee.visible?1:0),ae):void 0}}function uu(X,$){return"string"==typeof X?$.getMaterialOrDeletedPlaceholder(X):Tv(X,$)}function Tv(X,$){var ee,ne,ae,de=null!=(ee=X.layers)?ee:wR.defaultTwoLayerData("phong").layers,fe=function BF(X){var $,ee=(0,je.Z)(X);try{for(ee.s();!($=ee.n()).done;){var ne=$.value;if("light"===ne.data.type)return ne.data}}catch(ae){ee.e(ae)}finally{ee.f()}return{type:"light",category:"basic",visible:!0,alpha:1,mode:0}}(de);switch(fe.category){case"basic":ae=new kV;break;case"lambert":ae=new PV;break;case"toon":ae=new OV;break;case"physical":ae=new IV;break;default:ae=new MV}ae.name=null!=(ne=X.name)?ne:"Untitled Material";var Ue=ae.userData.layers;!function NF(X){var $,ee=(0,je.Z)(X.getLayers());try{for(ee.s();!($=ee.n()).done;){var ne=$.value;X.removeLayer(ne.id)}}catch(ae){ee.e(ae)}finally{ee.f()}}(Ue);for(var Ke=de.length-1;Ke>=0;Ke--)OF(Ue,de[Ke],$);switch(fe.category){case"basic":break;case"lambert":var et=ae,tt=pr(fe.emissive,$);tt instanceof Ma?et.emissive.value=tt:et.emissive.value.setHex(bV.getHex(tt));break;case"toon":var nt=ae,it=fe;nt.shininess.value=it.shininess;var ct=pr(it.specular,$);ct instanceof Ma?nt.specular.value=ct:nt.specular.value.setHex(bV.getHex(ct));break;case"physical":var dt=ae,vt=fe;dt.metalness.value=vt.metalness,dt.roughness.value=vt.roughness,dt.reflectivity.value=vt.reflectivity;break;default:var gt=ae,yt=fe;gt.shininess.value=yt.shininess;var _t=pr(yt.specular,$);_t instanceof Ma?gt.specular.value=_t:gt.specular.value.setHex(bV.getHex(_t))}return Ue.blendColors(),Ue.blendAfterColors(),Ue.blendPositions(),ae}function OF(X,$,ee){var ne=Bp($,ee);"transmission"===ne.type&&(ne.transmissionSamplerMap=null==ee?void 0:ee.transmissionSamplerMap,ne.transmissionDepthMap=null==ee?void 0:ee.transmissionDepthMap);var ae=X.addLayer(ne);for(var de in ae.uuid=$.id,$.data)Np(de,ae,$.data)}!function(X){X.getHex=function i(X){return new Ma(X.x,X.y,X.z).getHex()}}(bV||(bV={})),function(X){X.getThreeVector4=function i(X){return new to(X.r,X.g,X.b,X.a)}}(xV||(xV={})),function(X){X.setThreeColor=function i(X,$){X.setRGB($.r,$.g,$.b)},X.getHex=function e(X){return new Ma(X.r,X.g,X.b).getHex()}}(_V||(_V={}));var zV=function Zo(X){return"isEntity"in X},NV=function er(X){return"isAbstractMesh"in X},FV=function Lt(X){return null!==X&&X.isBooleanMesh},UV=function ms(X){return"objectHelper"in X};function Ev(X,$){var ee,ne=!1;$.position&&(X.position.fromArray($.position),ne=!0),$.rotation&&(X.rotation.fromArray($.rotation),ne=!0),$.scale&&(ne=!0,X.scale.fromArray($.scale)),void 0!==$.hiddenMatrix&&"hiddenMatrix"in X&&(ne=!0,X.hiddenMatrix.fromArray(null!=(ee=$.hiddenMatrix)?ee:oD.identity)),ne&&(X.updateMatrix(),FV(X.parent)&&NV(X)&&X.invalidateDownstreamBooleanData(!0).recomputeBoolean()),$.position&&$.rotation&&$.scale&&void 0!==$.hiddenMatrix&&X.updateWorldMatrix(!1,!0),"CombinedCamera"===X.objectType&&(void 0!==$.isUpVectorFlipped&&(X.isUpVectorFlipped=$.isUpVectorFlipped),X.updateUp())}function F1(X,$,ee){(function FF(X,$){Ev(X,$),void 0!==$.name&&(X.name=$.name),void 0!==$.visible&&(X.isEntity?X.visibility=$.visible:X.visible=$.visible)})(X,$),void 0!==$.color&&(X.color=pr($.color,ee)),void 0!==$.intensity&&(X.intensity=$.intensity),void 0!==$.shadows&&!(X instanceof yx)&&(X.castShadow=$.shadows),X.shadow&&!(X instanceof yx)&&void 0!==$.depth&&(X.shadow.camera.far=$.depth,X.shadow.needsUpdate=!0),void 0!==$.helper&&UV(X)&&(X.enableHelper=$.helper,X.gizmos.shadowmap.visible=$.helper)}var VV=new Mo,HV=new wo,jV=new wo,GV=new Ds;var WV=function z1(X,$,ee,ne){var ae;if(NV(X)){var de=X.geometry.userData.parameters,fe=X.geometry.getAttribute("position");"SubdivGeometry"===X.geometry.userData.type?HV.copy(X.originalGeometry.boundingSphere.center):void 0!==fe&&(function UF(X,$){for(var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,ne=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$.count,ae=1/0,de=1/0,fe=1/0,Ue=-1/0,je=-1/0,Ke=-1/0,et=ee;et<ne;et++){var tt=$.getX(et),nt=$.getY(et),it=$.getZ(et);tt<ae&&(ae=tt),nt<de&&(de=nt),it<fe&&(fe=it),tt>Ue&&(Ue=tt),nt>je&&(je=nt),it>Ke&&(Ke=it)}return X.min.set(ae,de,fe),X.max.set(Ue,je,Ke),X}(VV,fe,X.geometry.drawRange.start,X.geometry.drawRange.count<1/0?X.geometry.drawRange.count:fe.count),VV.getCenter(HV)),X.forceComputeSize?VV.getSize(jV).multiplyScalar(.5):jV.set(de.width,de.height,null!=(ae=de.depth)?ae:0).multiplyScalar(.5)}else if(UV(X)&&!0===ne){var Ue=X.geometryHelper.getAttribute("position");VV.setFromArray(Ue.array),VV.getCenter(HV),VV.getSize(jV).multiplyScalar(.5)}else HV.setScalar(0),jV.setScalar(0);GV.copy($).multiply(X.matrixWorld),0===jV.x&&0===jV.y&&0===jV.z?ee.push(new wo(HV.x,HV.y,HV.z).applyMatrix4(GV)):ee.push(new wo(-jV.x,jV.y,jV.z).add(HV).applyMatrix4(GV),new wo(-jV.x,-jV.y,jV.z).add(HV).applyMatrix4(GV),new wo(jV.x,-jV.y,jV.z).add(HV).applyMatrix4(GV),new wo(jV.x,jV.y,jV.z).add(HV).applyMatrix4(GV),new wo(-jV.x,jV.y,-jV.z).add(HV).applyMatrix4(GV),new wo(-jV.x,-jV.y,-jV.z).add(HV).applyMatrix4(GV),new wo(jV.x,-jV.y,-jV.z).add(HV).applyMatrix4(GV),new wo(jV.x,jV.y,-jV.z).add(HV).applyMatrix4(GV))},qV=function(X){_inherits(fu,X);var $=_createSuper(fu);function fu(){var X;return _classCallCheck(this,fu),(X=$.apply(this,arguments)).matrix=new Ds,X.vertices=[],X.faces=[],X.edges=[],X.centerEdges=[],X}return _createClass(fu,[{key:"copy",value:function copy(X){return _get(_getPrototypeOf(fu.prototype),"copy",this).call(this,X),this.matrix.copy(X.matrix),this.vertices=X.vertices.map((function(X){return X.clone()})),this.faces=X.faces.map((function(X){return X.clone()})),this.edges=X.edges.map((function(X){return X.clone()})),this.centerEdges=X.centerEdges.map((function(X){return X.clone()})),this}},{key:"setFromObjectSize",value:function setFromObjectSize(X){var $=arguments.length>1&&void 0!==arguments[1]&&arguments[1];X.updateWorldMatrix(!1,$),this.makeEmpty(),this.matrix.copy(X.matrixWorld);var ee=(new Ds).copy(X.matrixWorld).invert();return this.expandByObjectSize(X,ee,$)}},{key:"expandByObjectSize",value:function expandByObjectSize(X,$){var ee=arguments.length>2&&void 0!==arguments[2]&&arguments[2],ne=[];return!0===ee?X.traverseEntity((function(ee){ee.visible&&WV(ee,$,ne,!0===X.enableHelper)})):WV(X,$,ne,!0===X.enableHelper),this.setFromPoints(ne)}},{key:"getCenter",value:function getCenter(X){return(X=_get(_getPrototypeOf(fu.prototype),"getCenter",this).call(this,X)).applyMatrix4(this.matrix),X}},{key:"getPositionToCenter",value:function getPositionToCenter(X){return(X=_get(_getPrototypeOf(fu.prototype),"getCenter",this).call(this,X)).applyMatrix4(GV.copy(this.matrix).setPosition(0,0,0)),X}},{key:"computeVertices",value:function computeVertices(){this.getSize(jV).multiplyScalar(.5),this.getCenter(HV),GV.copy(this.matrix).setPosition(HV),this.vertices=[new wo(-jV.x,jV.y,jV.z).applyMatrix4(GV),new wo(-jV.x,-jV.y,jV.z).applyMatrix4(GV),new wo(jV.x,-jV.y,jV.z).applyMatrix4(GV),new wo(jV.x,jV.y,jV.z).applyMatrix4(GV),new wo(-jV.x,jV.y,-jV.z).applyMatrix4(GV),new wo(-jV.x,-jV.y,-jV.z).applyMatrix4(GV),new wo(jV.x,-jV.y,-jV.z).applyMatrix4(GV),new wo(jV.x,jV.y,-jV.z).applyMatrix4(GV)]}},{key:"computeEdges",value:function computeEdges(){this.vertices.length>0&&this.computeVertices(),this.edges=[new M_(this.vertices[0],this.vertices[3]),new M_(this.vertices[1],this.vertices[2]),new M_(this.vertices[5],this.vertices[6]),new M_(this.vertices[4],this.vertices[7]),new M_(this.vertices[0],this.vertices[1]),new M_(this.vertices[3],this.vertices[2]),new M_(this.vertices[7],this.vertices[6]),new M_(this.vertices[4],this.vertices[5]),new M_(this.vertices[0],this.vertices[4]),new M_(this.vertices[1],this.vertices[5]),new M_(this.vertices[2],this.vertices[6]),new M_(this.vertices[3],this.vertices[7])],this.centerEdges=this.edges.map((function(X){return X.getCenter(new wo)}))}},{key:"computeFaces",value:function computeFaces(){this.vertices.length>0&&this.computeVertices(),this.faces=[(new wo).copy(this.vertices[0]).sub(this.vertices[2]).multiplyScalar(.5).add(this.vertices[2]),(new wo).copy(this.vertices[7]).sub(this.vertices[5]).multiplyScalar(.5).add(this.vertices[5]),(new wo).copy(this.vertices[4]).sub(this.vertices[1]).multiplyScalar(.5).add(this.vertices[1]),(new wo).copy(this.vertices[3]).sub(this.vertices[6]).multiplyScalar(.5).add(this.vertices[6]),(new wo).copy(this.vertices[4]).sub(this.vertices[3]).multiplyScalar(.5).add(this.vertices[3]),(new wo).copy(this.vertices[1]).sub(this.vertices[6]).multiplyScalar(.5).add(this.vertices[6])]}}]),fu}(Mo);function du(X){var $=[];for(var ee in X){var ne=X[ee];delete ne.metadata,$.push(ne)}return $}var YV,JV=function Op(X){return function(X){_inherits(_class,X);var $=_createSuper(_class);function _class(){return _classCallCheck(this,_class),$.apply(this,arguments)}return _createClass(_class,[{key:"hasEntityChild",value:function hasEntityChild(){return this.children.some((function(X){return zV(X)}))}},{key:"isDescendantOf",value:function isDescendantOf(X){X instanceof ru&&(X=X.uuid);for(var $=this;$.parent;){if($.parent.uuid===X)return!0;$=$.parent}return!1}},{key:"attach",value:function attach(X,$){this.updateWorldMatrix(!0,!1);var ee=(new Ds).copy(this.matrixWorld).invert();return null!==X.parent&&(X.parent.updateWorldMatrix(!0,!1),ee.multiply(X.parent.matrixWorld)),zV(X)?X.hiddenMatrix.premultiply(ee):X.applyMatrix4(ee),X.updateWorldMatrix(!1,!1),this.add(X),void 0!==$&&(this.children.pop(),this.children.splice($,0,X)),this}},{key:"copy",value:function copy(X){var $=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=X.name,this.up.copy(X.up),this.position.copy(X.position),this.rotation.order=X.rotation.order,this.quaternion.copy(X.quaternion),this.scale.copy(X.scale),this.matrix.copy(X.matrix),this.matrixWorld.copy(X.matrixWorld),this.matrixAutoUpdate=X.matrixAutoUpdate,this.matrixWorldNeedsUpdate=X.matrixWorldNeedsUpdate,this.layers.mask=X.layers.mask,this.visible=X.visible,this.castShadow=X.castShadow,this.receiveShadow=X.receiveShadow,this.frustumCulled=X.frustumCulled,this.renderOrder=X.renderOrder,this.userData=JSON.parse(JSON.stringify(X.userData)),!0===$)for(var ee=0;ee<X.children.length;ee++){var ne=X.children[ee];this.add(ne.clone())}return this}},{key:"toJSON",value:function toJSON(X){var $=void 0===X,ee={object:{uuid:"",objectType:""}};void 0===X&&(X={geometries:{},materials:{},textures:{},images:{},interactionStates:{},nodes:{}},ee.metadata={version:1.5,type:"Object",generator:"Object3D.toJSON"});var ne={uuid:this.uuid,objectType:this.type};if(""!==this.name&&(ne.name=this.name),ne.matrix=this.matrix.toArray(),!0===this.castShadow&&(ne.castShadow=!0),!0===this.receiveShadow&&(ne.receiveShadow=!0),!1===this.visible&&(ne.visible=!1),!1===this.frustumCulled&&(ne.frustumCulled=!1),0!==this.renderOrder&&(ne.renderOrder=this.renderOrder),ne.layers=this.layers.mask,"{}"!==JSON.stringify(this.userData)&&(ne.userData=this.userData),this.children.length>0){ne.children=[];var ae,de=(0,je.Z)(this.children);try{for(de.s();!(ae=de.n()).done;){var fe=ae.value;(zV(fe)||fe instanceof gx)&&ne.children.push(fe.toJSON(X).object)}}catch(ct){de.e(ct)}finally{de.f()}}if($){var Ue=du(X.geometries),Ke=du(X.materials),et=du(X.textures),tt=du(X.images),nt=du(X.interactionStates),it=function zF(X){var $=[];for(var ee in X)$.push(X[ee]);return $}(X.nodes);Ue.length>0&&(ee.geometries=Ue),Ke.length>0&&(ee.materials=Ke),et.length>0&&(ee.textures=et),tt.length>0&&(ee.images=tt),nt.length>0&&(ee.interactionStates=nt),it.length>0&&(ee.nodes=it)}return ee.object=ne,ee}},{key:"fromJSON",value:function fromJSON(X){return this.uuid=X.uuid,void 0!==X.name&&(this.name=X.name),void 0!==X.matrix?(this.matrix.fromArray(X.matrix),void 0!==X.matrixAutoUpdate&&(this.matrixAutoUpdate=X.matrixAutoUpdate),this.matrixAutoUpdate&&this.matrix.decompose(this.position,this.quaternion,this.scale)):(void 0!==X.position&&this.position.fromArray(X.position),void 0!==X.rotation&&this.rotation.fromArray(X.rotation),void 0!==X.quaternion&&this.quaternion.fromArray(X.quaternion),void 0!==X.scale&&this.scale.fromArray(X.scale)),this.castShadow=void 0!==X.castShadow,this.receiveShadow=void 0!==X.receiveShadow,void 0!==X.visible&&(this.visible=X.visible),void 0!==X.frustumCulled&&(this.frustumCulled=X.frustumCulled),void 0!==X.renderOrder&&(this.renderOrder=X.renderOrder),void 0!==X.layers&&(this.layers.mask=X.layers),void 0!==X.userData&&(this.userData=X.userData),this}}]),_class}(X)},ZV=function Xn(X){return"isEntity"in X},XV=function G1(X){return"isAbstractMesh"in X},QV=function Qn(X){return function(X){_inherits(_class2,X);var $=_createSuper(_class2);function _class2(){var X;return _classCallCheck(this,_class2),(X=$.apply(this,arguments)).objectType="",X.isEntity=!0,X.raycastLock=!1,X.scaleLock=!1,X.hiddenMatrix=new Ds,X._singleBBox=new qV,X._recursiveBBox=new qV,X.singleBBoxNeedsUpdate=!0,X.recursiveBBoxNeedsUpdate=!0,X.forceComputeSize=!1,X}return _createClass(_class2,[{key:"visibility",get:function get(){return this.visible},set:function set(X){this.visible=X;var $,ee=(0,je.Z)(this.children);try{for(ee.s();!($=ee.n()).done;){var ne=$.value;ZV(ne)&&ne.traverseEntity((function($){UV($)&&$.visible&&($.objectHelper.visible=X)}))}}catch(ae){ee.e(ae)}finally{ee.f()}}},{key:"singleBBox",get:function get(){return this.singleBBoxNeedsUpdate&&(this.singleBBoxNeedsUpdate=!1,this._singleBBox.setFromObjectSize(this,!1),this._singleBBox.computeVertices(),this._singleBBox.computeEdges(),this._singleBBox.computeFaces()),this._singleBBox}},{key:"recursiveBBox",get:function get(){return this.recursiveBBoxNeedsUpdate&&(this.recursiveBBoxNeedsUpdate=!1,this._recursiveBBox.setFromObjectSize(this,!0),this._recursiveBBox.computeVertices(),this._recursiveBBox.computeEdges(),this._recursiveBBox.computeFaces()),this._recursiveBBox}},{key:"resetBBoxNeedsUpdate",value:function resetBBoxNeedsUpdate(){this.singleBBoxNeedsUpdate=!0,this.recursiveBBoxNeedsUpdate=!0,this.traverseAncestors((function(X){ZV(X)&&(X.singleBBoxNeedsUpdate=!0,X.recursiveBBoxNeedsUpdate=!0)})),this.traverseEntity((function(X){X.singleBBoxNeedsUpdate=!0,X.recursiveBBoxNeedsUpdate=!0}))}},{key:"traverseEntity",value:function traverseEntity(X){X(this);var $,ee=(0,je.Z)(this.children);try{for(ee.s();!($=ee.n()).done;){var ne=$.value;ZV(ne)&&ne.traverseEntity(X)}}catch(ae){ee.e(ae)}finally{ee.f()}}},{key:"updateMatrixWorld",value:function updateMatrixWorld(X){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||X)&&(null===this.parent?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,X=!0);var $,ee=(0,je.Z)(this.children);try{for(ee.s();!($=ee.n()).done;){$.value.updateMatrixWorld(X)}}catch(ne){ee.e(ne)}finally{ee.f()}}},{key:"updateWorldMatrix",value:function updateWorldMatrix(X,$){var ee=this.parent;if(X&&null!==ee&&ee.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.multiplyMatrices(this.hiddenMatrix,this.matrix):(this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.hiddenMatrix),this.matrixWorld.multiplyMatrices(this.matrixWorld,this.matrix)),$){var ne,ae=(0,je.Z)(this.children);try{for(ae.s();!(ne=ae.n()).done;){ne.value.updateWorldMatrix(!1,!0)}}catch(de){ae.e(de)}finally{ae.f()}}}},{key:"shallowClone",value:function shallowClone(X){return(new this.constructor).shallowCopy(this,X)}},{key:"shallowCopy",value:function shallowCopy(X){var $=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(_get(_getPrototypeOf(_class2.prototype),"copy",this).call(this,X,!1),this.raycastLock=X.raycastLock,this.scaleLock=X.scaleLock,this.hiddenMatrix.copy(X.hiddenMatrix),!0===$){var ee,ne=(0,je.Z)(X.children);try{for(ne.s();!(ee=ne.n()).done;){var ae=ee.value;ZV(ae)&&this.add(ae.shallowClone())}}catch(de){ne.e(de)}finally{ne.f()}}return this}},{key:"clone",value:function clone(X){return(new this.constructor).copy(this,X)}},{key:"copy",value:function copy(X){var $=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(_get(_getPrototypeOf(_class2.prototype),"copy",this).call(this,X,!1),this.raycastLock=X.raycastLock,this.scaleLock=X.scaleLock,this.hiddenMatrix.copy(X.hiddenMatrix),!0===$){var ee,ne=(0,je.Z)(X.children);try{for(ne.s();!(ee=ne.n()).done;){var ae=ee.value;ZV(ae)&&this.add(ae.clone())}}catch(de){ne.e(de)}finally{ne.f()}}return this}},{key:"keepChildrenMatrixWorld",value:function keepChildrenMatrixWorld(){var X=new Ds,$=this.matrixWorld.clone();this.updateWorldMatrix(!1,!1),X.copy(this.matrixWorld).invert(),X.multiply($);var ee,ne=(0,je.Z)(this.children);try{for(ne.s();!(ee=ne.n()).done;){var ae=ee.value;ZV(ae)&&ae.hiddenMatrix.premultiply(X)}}catch(de){ne.e(de)}finally{ne.f()}}},{key:"toJSON",value:function toJSON(X){var $=_get(_getPrototypeOf(_class2.prototype),"toJSON",this).call(this,X),ee=$.object;return!0===this.raycastLock&&(ee.raycastLock=!0),!0===this.scaleLock&&(ee.scaleLock=!0),ee.hiddenMatrix=this.hiddenMatrix.toArray(),$}},{key:"fromJSON",value:function fromJSON(X){return _get(_getPrototypeOf(_class2.prototype),"fromJSON",this).call(this,X),void 0!==X.raycastLock&&(this.raycastLock=X.raycastLock),void 0!==X.scaleLock&&(this.scaleLock=X.scaleLock),this.hiddenMatrix.fromArray(X.hiddenMatrix),this}},{key:"fromObject3D",value:function fromObject3D(X){var $=X.children;return X.children=[],Object.assign(X,{raycastLock:!1,scaleLock:!1,hiddenMatrix:new Ds}),this.copy(X),X.children=$,this}},{key:"toObjectTransformState",value:function toObjectTransformState(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.updateWorldMatrix(!0,!1);var $={position:this.position.toArray(),rotation:[this.rotation.x,this.rotation.y,this.rotation.z],scale:this.scale.toArray(),hiddenMatrix:this.hiddenMatrix.toArray()};return gD($,X)}},{key:"fromObjectTransformState",value:function fromObjectTransformState(X){return X.position&&this.position.fromArray(X.position),X.rotation&&this.rotation.fromArray(X.rotation),X.scale&&this.scale.fromArray(X.scale),X.hiddenMatrix&&this.hiddenMatrix.fromArray(X.hiddenMatrix),this.updateMatrix(),this}},{key:"toState",value:function toState(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],$=Ct({name:this.name,visible:this.visible,raycastLock:this.raycastLock},this.toObjectTransformState(X));return gD($,X)}},{key:"fromState",value:function fromState(X,$){return X.name&&(this.name=X.name),void 0!==X.raycastLock&&(this.raycastLock=X.raycastLock),"OrthographicCamera"!==X.type&&"PerspectiveCamera"!==X.type&&(this.matrixAutoUpdate=!1),void 0!==X.visible&&(this.visibility=X.visible),this.fromObjectTransformState(X),this}}]),_class2}(JV(X))},KV=function(X){_inherits(pu,X);var $=_createSuper(pu);function pu(X){var ee,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,pu),(ee=$.call(this)).object=X;var ae=X.recursiveBBox.getSize(new wo),de=.1;return ee.parameters=pD.defaultData(ae.toArray(),de),KT(ee.parameters,ne),ee.update(),ee.setHideBase(ee.parameters.hideBase),ee}return _createClass(pu,[{key:"refreshMaterial",value:function refreshMaterial(){if("material"in this.object){var X,$=(0,je.Z)(this.children);try{for($.s();!(X=$.n()).done;){X.value.material=this.object.material}}catch(ee){$.e(ee)}finally{$.f()}}}},{key:"setHideBase",value:function setHideBase(X){if("material"in this.object){if(Array.isArray(this.object.material)){if(this.children.length>0){var $,ee=(0,je.Z)(this.object.material);try{for(ee.s();!($=ee.n()).done;){$.value.visible=!0}}catch(vt){ee.e(vt)}finally{ee.f()}if(X){var ne,ae=this.object.material.map((function(X){return X.clone()})),de=(0,je.Z)(this.children);try{for(de.s();!(ne=de.n()).done;){ne.value.material=ae}}catch(vt){de.e(vt)}finally{de.f()}}else{var fe,Ue=(0,je.Z)(this.children);try{for(Ue.s();!(fe=Ue.n()).done;){fe.value.material=this.object.material}}catch(vt){Ue.e(vt)}finally{Ue.f()}}}var Ke,et=(0,je.Z)(this.object.material);try{for(et.s();!(Ke=et.n()).done;){Ke.value.visible=!X}}catch(vt){et.e(vt)}finally{et.f()}}else{if(this.children.length>0)if(this.object.material.visible=!0,X){var tt,nt=this.object.material.clone(),it=(0,je.Z)(this.children);try{for(it.s();!(tt=it.n()).done;){tt.value.material=nt}}catch(vt){it.e(vt)}finally{it.f()}}else{var ct,dt=(0,je.Z)(this.children);try{for(dt.s();!(ct=dt.n()).done;){ct.value.material=this.object.material}}catch(vt){dt.e(vt)}finally{dt.f()}}this.object.material.visible=!X}this.parameters.hideBase=X}}},{key:"update",value:function update(){switch(this._updateCount(),this.parameters.type){case"radial":this._updateRadial(this.parameters);break;case"linear":this._updateLinear(this.parameters);break;case"grid":this._updateGrid(this.parameters)}this.children.forEach((function(X){return X.updateMatrix()}))}},{key:"_updateCount",value:function _updateCount(){var X="grid"===this.parameters.type?this.parameters.grid.count[0]*this.parameters.grid.count[1]*this.parameters.grid.count[2]:this.parameters.count;if(this.children.length!==X)if(this.children.length<X)for(var $=0,ee=X-this.children.length;$<ee;++$){var ne=this.object.shallowClone(!1);ne.visible=!0,this.add(ne),this.parameters.hideBase&&this.setHideBase(!0)}else for(var ae=0,de=this.children.length-X;ae<de;++ae)this.remove(this.children[0])}},{key:"_updateRadial",value:function _updateRadial(X){var $,ee=X.radial,ne=ee.start*da.DEG2RAD,ae=ne-ee.end*da.DEG2RAD,de=new Qs(ee.rotation[0]*da.DEG2RAD,ee.rotation[1]*da.DEG2RAD,ee.rotation[2]*da.DEG2RAD);switch(ee.axis){case"z":$=new wo(0,0,1);break;case"y":$=new wo(0,1,0);break;default:$=new wo(1,0,0)}var Ue,Ke=(0,je.Z)(this.children.entries());try{for(Ke.s();!(Ue=Ke.n()).done;){var et=(0,fe.Z)(Ue.value,2),tt=et[0],nt=et[1];nt.hiddenMatrix.identity(),nt.scale.x=ee.scale[0],nt.scale.y=ee.scale[1],nt.scale.z=ee.scale[2],nt.position.setScalar(0);var it=ae/X.count*tt-ne;switch(ee.axis){case"x":nt.rotation.set(0,it,0);break;case"y":nt.rotation.set(0,0,it);break;case"z":nt.rotation.set(it,0,0)}nt.translateOnAxis($,ee.radius),nt.position.x+=ee.position[0],nt.position.y+=ee.position[1],nt.position.z+=ee.position[2],!0===ee.alignment?(nt.rotation.x+=de.x,nt.rotation.y+=de.y,nt.rotation.z+=de.z):nt.rotation.copy(de)}}catch(ct){Ke.e(ct)}finally{Ke.f()}}},{key:"_updateLinear",value:function _updateLinear(X){if("linear"!==X.type)throw new Error;var $,ee=X.linear,ne=new Qs(ee.rotation[0]*da.DEG2RAD,ee.rotation[1]*da.DEG2RAD,ee.rotation[2]*da.DEG2RAD),ae=(0,je.Z)(this.children.entries());try{for(ae.s();!($=ae.n()).done;){var de=(0,fe.Z)($.value,2),Ue=de[0],Ke=de[1];Ke.hiddenMatrix.identity(),Ke.scale.x=1+(ee.scale[0]-1)*Ue,Ke.scale.y=1+(ee.scale[1]-1)*Ue,Ke.scale.z=1+(ee.scale[2]-1)*Ue,Ke.rotation.x=ne.x*Ue,Ke.rotation.y=ne.y*Ue,Ke.rotation.z=ne.z*Ue,Ke.position.x=ee.position[0]*Ue,Ke.position.y=ee.position[1]*Ue,Ke.position.z=ee.position[2]*Ue}}catch(et){ae.e(et)}finally{ae.f()}}},{key:"_updateGrid",value:function _updateGrid(X){var $=0,ee=X.grid;if(!0===ee.useCenter)for(var ne={x:ee.count[0]%2===0?2:1,y:ee.count[1]%2===0?2:1,z:ee.count[2]%2===0?2:1},ae=new wo(ee.size[0]*(ee.count[0]-ne.x)*.5,ee.size[1]*(ee.count[1]-ne.y)*.5,ee.size[2]*(ee.count[2]-ne.z)*.5),de=0;de<ee.count[0];de++)for(var fe=0;fe<ee.count[1];fe++)for(var Ue=0;Ue<ee.count[2];Ue++){var je=this.children[$++];je.hiddenMatrix.identity(),je.scale.setScalar(1),je.rotation.set(0,0,0),je.position.x=ee.size[0]*de-ae.x,je.position.y=ee.size[1]*fe-ae.y,je.position.z=ee.size[2]*Ue-ae.z}else for(var Ke=0;Ke<ee.count[0];Ke++)for(var et=0;et<ee.count[1];et++)for(var tt=0;tt<ee.count[2];tt++){var nt=this.children[$++];nt.hiddenMatrix.identity(),nt.scale.setScalar(1),nt.rotation.set(0,0,0),nt.position.x=ee.size[0]*Ke,nt.position.y=-ee.size[1]*et,nt.position.z=-ee.size[2]*tt}}},{key:"fromJSON",value:function fromJSON(X){return this}},{key:"toJSON",value:function toJSON(){return{}}},{key:"fromClonerState",value:function fromClonerState(X){return void 0!==X.hideBase&&this.setHideBase(X.hideBase),KT(this.parameters,X),this.update(),this}}]),pu}(ru),$V=function(X){_inherits(kt,X);var $=_createSuper(kt);function kt(X,ee){var ne;return _classCallCheck(this,kt),(ne=$.call(this,X,ee)).isAbstractMesh=!0,ne.isBooleanMesh=!1,ne.booleanMeshSetAddress=-1,ne.booleanWasTransformed=!1,ne.booleanMatrixInvOld=new Ds,ne.booleanExclude=null,Array.isArray(ee)&&(ne.selectedMaterial=0,0===X.groups.length&&X.addGroup(0,X.getAttribute("position").count,0)),ne}return _createClass(kt,[{key:"cloner",get:function get(){return this._cloner},set:function set(X){this._cloner&&this.remove(this._cloner),X&&this.add(X),this._cloner=X}},{key:"getSelectedMaterial",value:function getSelectedMaterial(X){return Array.isArray(this.material)?(void 0===this.selectedMaterial&&(this.selectedMaterial=null!=X?X:0),this.material[null!=X?X:this.selectedMaterial]):this.material}},{key:"setSelectedMaterial",value:function setSelectedMaterial(X,$){Array.isArray(this.material)?(void 0===this.selectedMaterial&&(this.selectedMaterial=null!=$?$:0),$=null!=$?$:this.selectedMaterial,this.material[$].dispose(),this.material[$]=X):(this.material.dispose(),this.material=X)}},{key:"updateGeometry",value:function updateGeometry(X){var $=this.geometry,ee=xH[$.userData.type],ne="NonParametric"===this.objectType?Object.assign({},$.userData,{geometry:$}):$.userData,ae=ee.build(ee.normalizeInputs(X,ne)),de=$.uuid;if(this.geometry.dispose(),this.geometry=ae,this.geometry.uuid=de,this.geometry.computeBoundingSphere(),this.cloner){var fe,Ue=(0,je.Z)(this.cloner.children);try{for(Ue.s();!(fe=Ue.n()).done;){fe.value.geometry=this.geometry}}catch(Ke){Ue.e(Ke)}finally{Ue.f()}}}},{key:"resizeGeometry",value:function resizeGeometry(X,$,ee){zN.resizeGeometry(this.geometry,{width:X,height:$,depth:ee})}},{key:"shallowClone",value:function shallowClone(X){return new this.constructor(this.geometry,this.material).shallowCopy(this,X)}},{key:"clone",value:function clone(X){var $="NonParametric"===this.objectType?Object.assign({},this.geometry.userData,{geometry:this.geometry.clone()}):this.geometry.userData,ee=_H($),ne=Array.isArray(this.material)?this.material.map((function(X){return X.clone()})):this.material.clone();return new this.constructor(ee,ne).copy(this,X)}},{key:"copy",value:function copy(X){var $=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return _get(_getPrototypeOf(kt.prototype),"copy",this).call(this,X,$),X.cloner&&(this.cloner=new KV(X,X.cloner.parameters),this.add(this.cloner)),this}},{key:"setFromClonerState",value:function setFromClonerState(X){null===X?this.cloner=void 0:(void 0===this.cloner&&(this.cloner=new KV(this)),this.cloner.fromClonerState(X))}},{key:"fromState",value:function fromState(X,$){var ee,ne,ae;return _get(_getPrototypeOf(kt.prototype),"fromState",this).call(this,X),"Mesh"===X.type&&(this.setFromClonerState(X.cloner),this.castShadow=null==(ee=X.castShadow)||ee,this.receiveShadow=null==(ne=X.receiveShadow)||ne,this.booleanExclude=null!=(ae=X.booleanExclude)?ae:null),this}},{key:"freeBooleanPointer",value:function freeBooleanPointer(){-1!==this.booleanMeshSetAddress&&(pH.freeMeshSet(this.booleanMeshSetAddress),this.booleanMeshSetAddress=-1)}},{key:"invalidateDownstreamBooleanData",value:function invalidateDownstreamBooleanData(){var X=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return X?this.booleanWasTransformed=!0:this.freeBooleanPointer(),FV(this.parent)?this.parent.invalidateDownstreamBooleanData():this}},{key:"invalidateUpstreamBooleanData",value:function invalidateUpstreamBooleanData(){this.freeBooleanPointer();var X,$=(0,je.Z)(this.children);try{for($.s();!(X=$.n()).done;){var ee=X.value;NV(ee)&&(ee.freeBooleanPointer(),FV(ee)&&ee.invalidateUpstreamBooleanData())}}catch(ne){$.e(ne)}finally{$.f()}}}]),kt}(QV(Oh)),eH=new wo(0,0,1),tH=new wo,nH=new wo,rH=new ga,iH=function(X){_inherits(ho,X);var $=_createSuper(ho);function ho(){var X,ee,ne=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lz.create({}),ae=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kV({side:2});return _classCallCheck(this,ho),(X=$.call(this,ne,ae)).recursiveSelection=!1,X.objectType="VectorObject",X.eventDispatcher=new aa,X._onShapeUpdate=function(){X.updateGeometry({}),X.geometry.computeBoundingSphere(),X.geometry.computeBoundingBox()},X.castShadow=!0,X.receiveShadow=!0,X.forceComputeSize=!0,X.shape=ne.userData.shape,null==(ee=X.shape.eventDispatcher)||ee.addEventListener("update",X._onShapeUpdate),X}return _createClass(ho,[{key:"toJSON",value:function toJSON(X){var $=_get(_getPrototypeOf(ho.prototype),"toJSON",this).call(this,X);return $.object.objectType="VectorObject",$}},{key:"fromState",value:function fromState(X){return _get(_getPrototypeOf(ho.prototype),"fromState",this).call(this,X),this.shape.update(),this}},{key:"setHelperVisibility",value:function setHelperVisibility(){}},{key:"updateGeometry",value:function updateGeometry(X){if(_get(_getPrototypeOf(ho.prototype),"updateGeometry",this).call(this,X),"userData"in this.geometry){var $=this.geometry.userData.parameters;this.eventDispatcher.dispatchEvent({type:"geometryUpdate",parameters:$})}}},{key:"setShape",value:function setShape(X){var $,ee;this.shape&&(null==($=this.shape.eventDispatcher)||$.removeEventListener("update",this._onShapeUpdate)),this.shape=X,null==(ee=this.shape.eventDispatcher)||ee.addEventListener("update",this._onShapeUpdate)}},{key:"updateWorldMatrix",value:function updateWorldMatrix(X,$){_get(_getPrototypeOf(ho.prototype),"updateWorldMatrix",this).call(this,X,$),rH.getNormalMatrix(this.matrixWorld),tH.copy(eH).applyMatrix3(rH).normalize(),nH.setFromMatrixPosition(this.matrixWorld),this.shape.plane.setFromNormalAndCoplanarPoint(tH,nH)}},{key:"clone",value:function clone(X){var $=this.shape.clone(),ee=this.material.clone(),ne=this.geometry.userData,ae=new ho(lz.create(Object.assign({},ne,{shape:$})),ee).copy(this,X);return ae.shape=$,$.update(),ae}},{key:"raycast",value:function raycast(X,$){$V.prototype.raycast.call(this,X,$)}}]),ho}($V);function Fp(X,$){return function kF(X){var $,ee={parameters:X,type:X.type};if("VectorGeometry"===X.type){var ne=AI.createFromState(X.shape,X.width,X.height);ee.shape=ne}else"NonParametricGeometry"===X.type&&(X.data.groups&&X.data.groups.forEach((function(X){var $;return X.materialIndex=Math.max(null!=($=X.materialIndex)?$:0,0)})),ee.geometry=(new jx).parse(X));try{$=_H(ee)}catch(ne){console.error(ne)}if(!$){var ae=AI.createFromState(SR.defaultData(),100,100);ee.shape=ae,$=_H(ee)}return $}(X)}GN.then((function(X){YV=X}));var aH=new Float32Array([10,10,0,-10,10,0,-10,-10,0,10,-10,0]),oH=new Uint32Array([0,1,2,3]),sH=new Uint8Array([4]),lH=function(){function gi(){_classCallCheck(this,gi)}return _createClass(gi,null,[{key:"build",value:function build(X,$,ee,ne){var ae,de,fe;if(void 0!==(null==X?void 0:X.positionWASM)){$&&0!==$&&(YV.free_bvh($),YV.free_subdivision_surface($));try{ae=gi.allocate(X,ne)}catch(Ue){console.error(Ue,X),ae=gi.allocate({positionWASM:aH,indexWASM:oH,verticesPerFaceWASM:sH},ne)}YV.set_destination_refinement_level(ae,0),de=gi.buildLevel(ae,!0,ee)}else ae=$;if(void 0!==X&&void 0!==X.subdivisions){var Ue=function VF(X,$){var ee=X;return ee=Math.min(ee,3-Math.ceil(Math.log($/172e3)/Math.log(4))),Math.max(ee,0)}(X.subdivisions,X.positionWASM.length);YV.set_destination_refinement_level(ae,Ue),fe=Ue>0?gi.buildLevel(ae,!1,ee):null}return{subdivPointer:ae,originalGeometry:de,subdividedGeometry:fe}}},{key:"primitiveToQuads",value:function primitiveToQuads(X,$){var ee,ne;X.widthSegments>16&&(X.widthSegments=16),X.heightSegments>16&&(X.heightSegments=16),X.depthSegments>16&&(X.depthSegments=16),X.radialSegments>16&&(X.radialSegments=16),"DodecahedronGeometry"===X.type&&(X.detail=0);var ae,de=void 0!==X.shape?$.geometry:Fp(X);return{positions:ae=(ee=Lv(de.getAttribute("position"),de.getIndex())).positions,indices:(ne=Iv(ae,ee.triIndices,de)).indices,verticesPerFace:ne.verticesPerFace}}},{key:"allocate",value:function allocate(X,$){var ee,ne,de,fe,Ue,je=[],Ke=[];X.positionWASM&&X.positionWASM.length>0?(de=X.positionWASM,fe=X.indexWASM,Ue=X.verticesPerFaceWASM):(de=aH,fe=oH,Ue=sH);var et,tt=de.length,nt=fe.length,it=Ue.length,ct=de.length+je.length+Ke.length,dt=fe.length+Ue.length,vt=ct*Float32Array.BYTES_PER_ELEMENT+dt*Uint32Array.BYTES_PER_ELEMENT,gt=ct*Float32Array.BYTES_PER_ELEMENT,yt=(Uint32Array.BYTES_PER_ELEMENT,YV._malloc(vt)),_t=new Float32Array(YV.HEAPF32.buffer,yt,ct),wt=new Uint32Array(YV.HEAPU32.buffer,yt+gt,dt);_t.set(de,0),_t.set(je,de.length),_t.set(Ke,de.length+je.length),wt.set(fe,0),wt.set(Ue,fe.length),null!=(ne=null==X?void 0:X.scaleBaked)&&ne.some((function(X){return 1!==X}))&&(et=(ee=new Ds).makeScale.apply(ee,(0,ae.Z)(X.scaleBaked))),$&&(et?et.premultiply($):et=$);var St=et?YV.alloc_subdivision_surface2(yt,tt,yt+gt,nt,yt+gt+fe.length*Uint32Array.BYTES_PER_ELEMENT,it,et.elements):YV.alloc_subdivision_surface(yt,tt,yt+gt,nt,yt+gt+fe.length*Uint32Array.BYTES_PER_ELEMENT,it);return YV._free(yt),St}},{key:"buildLevel",value:function buildLevel(X,$,ee,ne,ae){var de=ae?YV.get_mesh_data2(X,$?YV.Level.CONTROL:YV.Level.REFINED,null!=ee?ee:!$,ae.elements):YV.get_mesh_data(X,$?YV.Level.CONTROL:YV.Level.REFINED,null!=ee?ee:!$),fe=YV.HEAPU32.subarray(de>>2,8+(de>>2)),Ue=fe.subarray(4,8),je=0,Ke=YV.HEAPU32[fe[je]>>2],et=YV.HEAPF32.subarray(Ke>>2,(Ke>>2)+Ue[je]);je++;var tt=YV.HEAPU32[fe[je]>>2],nt=YV.HEAPF32.subarray(tt>>2,(tt>>2)+Ue[je]);je++;var it=YV.HEAPU32[fe[je]>>2],ct=YV.HEAPU32.subarray(it>>2,(it>>2)+Ue[je]);je++;var dt=YV.HEAPU32[fe[je]>>2],vt=YV.HEAPU32.subarray(dt>>2,(dt>>2)+Ue[je]);if(je++,void 0===ne){var gt=new Wu;if(gt.setIndex(new Ru(vt,1)),gt.setAttribute("position",new Iu(et,3)),gt.setAttribute("normal",new Iu(nt,3)),$){gt.setAttribute("faceMap",new Ru(ct,1));var yt=new Float32Array(nt.length/3*4).fill(0);gt.setAttribute("color",new Lu(yt,4))}return YV.free_mesh_data(de),gt.userData.type="SubdivGeometry",gt}ne.getAttribute("position").copyArray(et),ne.getAttribute("normal").copyArray(nt),ne.attributes.position.needsUpdate=!0,ne.attributes.normal.needsUpdate=!0,YV.free_mesh_data(de)}},{key:"buildControlCageWireframe",value:function buildControlCageWireframe(X,$,ee){var ne=YV.get_wireframe_data_for_base_level(X),ae=YV.HEAPU32.subarray(ne>>2,4+(ne>>2)),de=ae.subarray(2,4),fe=0,Ue=YV.HEAPU32[ae[fe]>>2],je=YV.HEAPF32.subarray(Ue>>2,(Ue>>2)+de[fe]);fe++;var Ke=YV.HEAPU32[ae[fe]>>2],et=YV.HEAPU32.subarray(Ke>>2,(Ke>>2)+de[fe]);if(void 0===$){var tt=new Wu;tt.setAttribute("position",new Iu(je,3));for(var nt=new Float32Array(je.length),it=0,ct=je.length;it<ct;)nt[it++]=ee.r,nt[it++]=ee.g,nt[it++]=ee.b;return tt.setAttribute("color",new Lu(nt,3)),tt.setIndex(new Ru(et,1)),YV.free_wireframe_data_for_base_level(ne),tt}$.getAttribute("position").copyArray(je),$.attributes.position.needsUpdate=!0,YV.free_wireframe_data_for_base_level(ne)}},{key:"updateCollabMesh",value:function updateCollabMesh(X,$,ee){$||YV.set_destination_refinement_level(X,1);var ne=ee?YV.get_topological_data2(X,$?YV.Level.CONTROL:YV.Level.REFINED,ee.elements):YV.get_topological_data(X,$?YV.Level.CONTROL:YV.Level.REFINED),ae=YV.HEAPU32.subarray(ne>>2,6+(ne>>2)),de=ae.subarray(3,6),fe=0,Ue=YV.HEAPU32[ae[fe]>>2],je=new Float32Array(YV.HEAPF32.subarray(Ue>>2,(Ue>>2)+de[fe]));fe++;var Ke=YV.HEAPU32[ae[fe]>>2],et=new Uint32Array(YV.HEAPU32.subarray(Ke>>2,(Ke>>2)+de[fe]));fe++;var tt=YV.HEAPU32[ae[fe]>>2],nt=new Uint8Array(YV.HEAPU32.subarray(tt>>2,(tt>>2)+de[fe]));return YV.free_topological_data(ne),{positions:je,indices:et,verticesPerFace:nt}}}]),gi}();var uH=["getX","getY","getZ"];function Lv(X,$){for(var ee={},ne=$?$.count:X.count,ae=0,de=[],fe=[],Ue=0;Ue<ne;Ue++){for(var je=$?$.getX(Ue):Ue,Ke="",et=0;et<3;et++)Ke+="".concat(~~(1e4*X[uH[et]](je)),",");if(Ke in ee)de.push(ee[Ke]);else{for(var tt=0;tt<3;tt++)fe.push(X[uH[tt]](je));ee[Ke]=ae,de.push(ae),ae++}}for(var nt=[],it=0;it<de.length;it+=3)de[it]===de[it+1]||de[it]===de[it+2]||de[it+1]===de[it+2]||nt.push(de[it],de[it+1],de[it+2]);return{positions:fe,triIndices:nt}}var cH=new wo,hH=new wo,dH=new wo,fH=new wo;function Iv(X,$,ee){var ne,ae=[],de=[];if(void 0!==ee.userData.shape&&0===ee.userData.parameters.depth){for(var fe=ee.userData.shape.extractShapePointsToFlatArray([]),Ue=0,je=0;je<fe.length;je+=2)Ue+=(fe[je]-fe[(0===je?fe.length:je)-2])*(fe[je+1]+fe[(0===je?fe.length:je)-1]);X.length=0;var Ke=0;if(Ue<0)for(var et=0;et<fe.length;et+=2)X.push(fe[et],fe[et+1],0),ae.push(Ke++);else for(var tt=fe.length-2;tt>=0;tt-=2)X.push(fe[tt],fe[tt+1],0),ae.push(Ke++);return de.push(Ke),{indices:ae,verticesPerFace:de}}for(var nt=0,it=null!=(ne=ee.capStartIndex)?ne:$.length;nt<it;)if($[nt+1]===$[nt+3]&&$[nt+2]===$[nt+5]||$[nt+0]===$[nt+3]&&$[nt+2]===$[nt+4]){cH.set(X[3*$[nt]],X[3*$[nt]+1],X[3*$[nt]+2]),hH.set(X[3*$[nt+1]],X[3*$[nt+1]+1],X[3*$[nt+1]+2]),dH.set(X[3*$[nt+4]],X[3*$[nt+4]+1],X[3*$[nt+4]+2]),fH.set(X[3*$[nt+5]],X[3*$[nt+5]+1],X[3*$[nt+5]+2]),hH.sub(cH).normalize(),dH.sub(cH).normalize(),fH.sub(cH).normalize();var ct=hH.cross(dH).dot(fH);Math.abs(ct)>.005?(ae.push($[nt],$[nt+1],$[nt+2]),de.push(3),nt+=3):(ae.push($[nt],$[nt+1],$[nt+4],$[nt+5]),de.push(4),nt+=6)}else ae.push($[nt],$[nt+1],$[nt+2]),de.push(3),nt+=3;if(void 0!==ee.capStartIndex){for(var dt=[],vt=[],gt=0,yt=0,_t=0;yt<X.length;yt+=3,_t++)0===X[yt+2]&&(dt.push(_t),gt++),X[yt+2]===ee.userData.parameters.depth&&vt.push(_t);if(0===ee.userData.parameters.extrudeBevelSize){var wt=vt[0];vt[0]=vt[1],vt[1]=wt}dt.reverse(),ae.push.apply(ae,dt.concat(vt)),de.push(gt,gt)}return{indices:ae,verticesPerFace:de}}var pH={};Rt(pH,{calcBoolean:function calcBoolean(){return jF},calcBooleanTopological:function calcBooleanTopological(){return WF},freeMeshSet:function freeMeshSet(){return XF},getMeshSet:function getMeshSet(){return qF},transformMeshSet:function transformMeshSet(){return YF}});var vH,mH,gH,yH=new Promise((function(X){vH=X})),bH=!1;function K1(){return _K15.apply(this,arguments)}function _K15(){return _K15=(0,de.Z)(et().mark((function _callee9(){var X,$,ne,ae,de;return et().wrap((function _callee9$(Ue){for(;;)switch(Ue.prev=Ue.next){case 0:if(!bH){Ue.next=2;break}return Ue.abrupt("return");case 2:return"https://unpkg.com/@splinetool/boolean-wasm@0.9.53/build",Ue.next=5,Promise.all([ee.e(301).then(ee.bind(ee,301)),fetch("".concat("https://unpkg.com/@splinetool/boolean-wasm@0.9.53/build","/boolean.wasm")).then((function(X){return X.arrayBuffer()}))]);case 5:return X=Ue.sent,$=(0,fe.Z)(X,2),ne=$[0],ae=$[1],Ue.next=11,ne.default({wasmBinary:ae});case 11:de=Ue.sent,vH(de),bH=!0;case 13:case"end":return Ue.stop()}}),_callee9)}))),_K15.apply(this,arguments)}function Z1(X){var $=X.length,ee=$*Uint32Array.BYTES_PER_ELEMENT,ne=$*Float32Array.BYTES_PER_ELEMENT,ae=Number.isInteger(X[0])?ee:ne,de=mH._malloc(ae);return(Number.isInteger(X[0])?new Uint32Array(mH.HEAPU32.buffer,de,$):new Float32Array(mH.HEAPF32.buffer,de,$)).set(X,0),de}function $1(X){switch(X){case 0:return mH.OP.UNION;case 1:return mH.OP.INTERSECTION;case 2:return mH.OP.A_MINUS_B;case 3:return mH.OP.B_MINUS_A;case 4:return mH.OP.SYMMETRIC_DIFFERENCE;case 5:return mH.OP.ALL;default:throw new Error("Unknown boolean operation "+X)}}function WF(X,$){void 0===gH&&(gH=mH.init_csg());var ee=Z1(X),ne=mH.csg_calc_topological(gH,ee,X.length,$1($));mH._free(ee);var ae=mH.HEAPU32.subarray(ne>>2,6+(ne>>2)),de=ae.subarray(3,6),fe=0,Ue=mH.HEAPU32[ae[fe]>>2],je=new Float32Array(mH.HEAPF32.subarray(Ue>>2,(Ue>>2)+de[fe]));fe++;var Ke=mH.HEAPU32[ae[fe]>>2],et=new Uint32Array(mH.HEAPU32.subarray(Ke>>2,(Ke>>2)+de[fe]));fe++;var tt=mH.HEAPU32[ae[fe]>>2],nt=new Uint8Array(mH.HEAPU32.subarray(tt>>2,(tt>>2)+de[fe]));return mH.free_mesh_data(ne),{positions:je,indices:et,verticesPerFace:nt}}function jF(X,$,ee){void 0===gH&&(gH=mH.init_csg());var ne=Z1(X),ae=mH.csg_calc(gH,ne,X.length,$1($));mH._free(ne);var de=mH.HEAPU32.subarray(ae>>2,5+(ae>>2)),fe=de.subarray(2,5),Ue=0,je=mH.HEAPU32[de[Ue]>>2],Ke=mH.HEAPF32.subarray(je>>2,(je>>2)+fe[Ue]);Ue++;var et=mH.HEAPU32[de[Ue]>>2],tt=mH.HEAPF32.subarray(et>>2,(et>>2)+fe[Ue]),nt=fe[++Ue];ee.setAttribute("position",new Iu(Ke,3)),ee.setAttribute("normal",new Iu(tt,3));var it=mH.HEAPF32.subarray(5+(ae>>2),5+(ae>>2)+6);return null===ee.boundingSphere&&(ee.boundingSphere=new _s),ee.boundingSphere.center.set(it[0],it[1],it[2]),ee.boundingSphere.radius=Math.pow(Math.pow(it[3],2)+Math.pow(it[4],2)+Math.pow(it[5],2),.5),ee.userData.parameters={width:2*it[3],height:2*it[4],depth:2*it[5]},mH.free_mesh_data(ae),nt}function qF(X,$){if(void 0===mH)return-1;var ee,ne,ae;if($&&void 0!==X.userData.positions){var de=X.userData;ae=de.verticesPerFace.length,ee=de.positions,ne=Array(de.verticesPerFace.reduce((function(X,$){return X+$}),0)+ae);for(var fe=0,Ue=0,je=0;fe<de.verticesPerFace.length;fe++){ne[je++]=de.verticesPerFace[fe];for(var Ke=0;Ke<de.verticesPerFace[fe];Ke++)ne[je++]=de.indices[Ue++]}}else{var et=function HF(X,$){var ee,ne,ae=Lv(X.getAttribute("position"),X.getIndex()),de=ae.positions,fe=ae.triIndices;if($){var Ue=Iv(de,fe,X),je=Ue.indices,Ke=Ue.verticesPerFace;ne=Ke.length,ee=[];for(var et=0,tt=0;et<ne;et++){ee.push(Ke[et]);for(var nt=0;nt<Ke[et];nt++)ee.push(je[tt++])}}else{var it=fe.length;ee=Array(it+it/3),ne=0;for(var ct=0,dt=0;dt<ee.length;)ee[dt++]=3,ne++,ee[dt++]=fe[ct++],ee[dt++]=fe[ct++],ee[dt++]=fe[ct++]}return{positions:de,faceIndices:ee,nFaces:ne}}(X,$);ee=et.positions,ne=et.faceIndices,ae=et.nFaces}var tt=ee.length,nt=ne.length,it=ee.length,ct=ne.length,dt=it*Float32Array.BYTES_PER_ELEMENT+ct*Uint32Array.BYTES_PER_ELEMENT,vt=it*Float32Array.BYTES_PER_ELEMENT,gt=(Uint32Array.BYTES_PER_ELEMENT,mH._malloc(dt)),yt=new Float32Array(mH.HEAPF32.buffer,gt,it),_t=new Uint32Array(mH.HEAPU32.buffer,gt+vt,ct);return yt.set(ee,0),_t.set(ne,0),mH.get_csg_mesh(gt,tt,gt+vt,nt,ae)}function YF(X,$){mH.transform_csg_mesh(X,$.elements)}function XF(X){mH.free_csg_mesh(X)}yH.then((function(X){return mH=X}));var xH={ConeGeometry:TB,CubeGeometry:PB,CylinderGeometry:CB,DodecahedronGeometry:HB,EllipseGeometry:cz,HelixGeometry:hz,IcosahedronGeometry:yz,LatheGeometry:$z,NonParametricGeometry:bN,PolygonGeometry:xN,PyramidGeometry:wN,RectangleGeometry:kN,SphereGeometry:CN,PlaneGeometry:AN,StarGeometry:MN,TextFrameGeometry:EN,TorusGeometry:TN,TorusKnotGeometry:LN,TriangleGeometry:ON,VectorGeometry:lz},_H=function mu(X){return xH[X.type].create(X)},wH=new Ds;function Rv(X){var $=!1;return X.scene.objects.traverse((function(X,ee){var ne;"BooleanGeometry"===(null==(ne=ee.geometry)?void 0:ne.type)&&($=!0)})),$}var SH=function(X){_inherits(zp,X);var $=_createSuper(zp);function zp(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Wu,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new MV;return _classCallCheck(this,zp),(X=$.call(this,ee,ne)).booleanOp=2,X.meshSetAddresses=[],X.needsTransformForDownstream=!1,X.isBooleanMesh=!0,X.castShadow=!0,X.receiveShadow=!0,X.geometry.userData.parameters={width:0,height:0,depth:0},X.onAfterRender=X.recomputeBoolean.bind(_assertThisInitialized(X)),X}return _createClass(zp,[{key:"reInit",value:function reInit(){this.isBooleanMesh=!0,this.meshSetAddresses=[],this.needsTransformForDownstream=!1,this.geometry.userData.parameters={width:0,height:0,depth:0},this.onAfterRender=this.recomputeBoolean.bind(this)}},{key:"recomputeBoolean",value:function recomputeBoolean(X){if(-1===this.booleanMeshSetAddress){for(var $=0;$<this.children.length;$++){var ee=this.children[$];FV(ee)&&ee.recomputeBoolean(!0===X)}this.meshSetAddresses=[];for(var ne=0;ne<this.children.length;ne++){var ae=this.children[ne];if(XV(ae)&&!1===ae.booleanExclude&&ae.geometry.drawRange.count>0){if(-1===ae.booleanMeshSetAddress){if(ae.booleanMeshSetAddress=pH.getMeshSet(ae.geometry,!0===X),-1===ae.booleanMeshSetAddress)return;pH.transformMeshSet(ae.booleanMeshSetAddress,ae.matrix),ae.booleanMatrixInvOld.copy(ae.matrix).invert(),ae.booleanWasTransformed=!1}else FV(ae)&&!0===ae.needsTransformForDownstream?(pH.transformMeshSet(ae.booleanMeshSetAddress,ae.matrix),ae.needsTransformForDownstream=!1):!0===ae.booleanWasTransformed&&(wH.multiplyMatrices(ae.matrix,ae.booleanMatrixInvOld),pH.transformMeshSet(ae.booleanMeshSetAddress,wH),ae.booleanMatrixInvOld.copy(ae.matrix).invert(),ae.booleanWasTransformed=!1);this.meshSetAddresses.push(ae.booleanMeshSetAddress)}}if(0!==this.meshSetAddresses.length){if(!0===X)return pH.calcBooleanTopological(this.meshSetAddresses,this.booleanOp);var de=this.geometry;de.dispose(),this.geometry=new Wu,this.geometry.userData=de.userData,this.geometry.boundingSphere=de.boundingSphere,this.booleanMeshSetAddress=pH.calcBoolean(this.meshSetAddresses,this.booleanOp,this.geometry),this.booleanMatrixInvOld.copy(this.matrix).invert(),this.needsTransformForDownstream=!0}else this.geometry.setDrawRange(0,0)}}},{key:"toJSON",value:function toJSON(X){var $=_get(_getPrototypeOf(zp.prototype),"toJSON",this).call(this,X);return $.object.objectType="Mesh3D",$}},{key:"updateGeometry",value:function updateGeometry(X){this.booleanOp=X.parameters.operation,this.invalidateDownstreamBooleanData().recomputeBoolean()}}]),zp}($V),kH=function Gi(X){var $;return $=function(X){_inherits(e,X);var $=_createSuper(e);function e(){var X;return _classCallCheck(this,e),(X=$.apply(this,arguments)).isObjectHelper=!0,X}return _createClass(e)}(X),$.geometryHelper=new Rh(30,30,30),$},CH=new Ps,AH=new _s,MH=new Ds,EH=function ki(X,$,ee,ne){var ae=arguments.length>4&&void 0!==arguments[4]&&arguments[4],de=$,fe=X.matrixWorld;if(null===de.boundingSphere&&de.computeBoundingSphere(),AH.copy(de.boundingSphere),AH.applyMatrix4(fe),!1!==ee.ray.intersectsSphere(AH)&&(MH.copy(fe).invert(),CH.copy(ee.ray).applyMatrix4(MH),null===de.boundingBox||!1!==CH.intersectsBox(de.boundingBox))){var Ue,je,Ke,et,tt,nt,it=de.index,ct=de.attributes.position,dt=de.drawRange;if(!1===ae){var vt=Math.max(0,dt.start),gt=Math.min(it.count,dt.start+dt.count);for(tt=vt,nt=gt;tt<nt;tt+=3)if(je=it.getX(tt),Ke=it.getX(tt+1),et=it.getX(tt+2),Ue=g(X,ee,CH,ct,je,Ke,et))return Ue.faceIndex=Math.floor(tt/3),void ne.push(Ue)}else for(var yt=de.attributes.position,_t=new wo,wt=new wo,St=new wo,Ct=new wo,At=2,Et=1/((X.scale.x+X.scale.y+X.scale.z)/3),Rt=Et*Et,Bt=Math.max(0,dt.start),Ht=Math.min(yt.count,dt.start+dt.count),Wt=Bt,qt=Ht-1;Wt<qt;Wt+=At)if(_t.fromBufferAttribute(yt,Wt),wt.fromBufferAttribute(yt,Wt+1),!(CH.distanceSqToSegment(_t,wt,Ct,St)>Rt)){Ct.applyMatrix4(X.matrixWorld);var Zt=ee.ray.origin.distanceTo(Ct);Zt<ee.near||Zt>ee.far||ne.push({distance:Zt,point:St.clone().applyMatrix4(X.matrixWorld),object:X})}}function g(X,$,ee,ne,ae,de,fe){var Ue=new wo,je=new wo,Ke=new wo,et=new wo,tt=new wo;if(Ue.fromBufferAttribute(ne,ae),je.fromBufferAttribute(ne,de),Ke.fromBufferAttribute(ne,fe),null===ee.intersectTriangle(Ue,je,Ke,!1,et))return null;tt.copy(et),tt.applyMatrix4(X.matrixWorld);var nt=$.ray.origin.distanceTo(tt);return nt<$.near||nt>$.far?null:{faceIndex:1,distance:nt,point:tt.clone(),object:X}}},TH=new wo,PH=new ad,DH=function(X){_inherits(Nv,X);var $=_createSuper(Nv);function Nv(X){var ee;_classCallCheck(this,Nv);var ne=new Wu,ae=new Em({color:16777215,vertexColors:!0,toneMapped:!1}),de=[],fe=[],Ue={},je=new Ma(15711266),Ke=new Ma(15711266),et=new Ma(2857471);function u(X,$,ee){f(X,ee),f($,ee)}function f(X,$){de.push(0,0,0),fe.push($.r,$.g,$.b),void 0===Ue[X]&&(Ue[X]=[]),Ue[X].push(de.length/3-1)}return u("n1","n2",je),u("n2","n4",je),u("n4","n3",je),u("n3","n1",je),u("f1","f2",je),u("f2","f4",je),u("f4","f3",je),u("f3","f1",je),u("n1","f1",je),u("n2","f2",je),u("n3","f3",je),u("n4","f4",je),u("p","n1",Ke),u("p","n2",Ke),u("p","n3",Ke),u("p","n4",Ke),u("u1","u2",et),u("u2","u3",et),u("u3","u1",et),ne.setAttribute("position",new Iu(de,3)),ne.setAttribute("color",new Iu(fe,3)),(ee=$.call(this,ne,ae)).type="CameraHelper",ee.camera=X,ee.camera.updateProjectionMatrix&&ee.camera.updateProjectionMatrix(),ee.matrix=X.matrixWorld,ee.matrixAutoUpdate=!1,ee.pointMap=Ue,ee.update(),ee}return _createClass(Nv,[{key:"update",value:function update(){var X=this.geometry,$=this.pointMap;PH.projectionMatrixInverse.elements=[.5112609807824982,-0,-0,-0,-0,.41421356237309503,-0,-0,-0,-0,-0,-.099999,-0,-0,-1.0000000000000002,.100001];var ee=.8;yi("n1",$,X,PH,-1,-1,ee),yi("n2",$,X,PH,1,-1,ee),yi("n3",$,X,PH,-1,1,ee),yi("n4",$,X,PH,1,1,ee);var ne=ee;yi("f1",$,X,PH,-1,-1,ne),yi("f2",$,X,PH,1,-1,ne),yi("f3",$,X,PH,-1,1,ne),yi("f4",$,X,PH,1,1,ne);yi("u1",$,X,PH,.35,1.1,.8),yi("u2",$,X,PH,-.35,1.1,.8),yi("u3",$,X,PH,0,1.55,.8),X.getAttribute("position").needsUpdate=!0}},{key:"dispose",value:function dispose(){this.geometry.dispose(),this.material.dispose()}}]),Nv}(Nm);function yi(X,$,ee,ne,ae,de,fe){TH.set(ae,de,fe).unproject(ne);var Ue=$[X];if(void 0!==Ue)for(var je=ee.getAttribute("position"),Ke=0,et=Ue.length;Ke<et;Ke++)je.setXYZ(Ue[Ke],TH.x,TH.y,TH.z)}var LH=function(X){_inherits(Vp,X);var $=_createSuper(Vp);function Vp(X){var ee;return _classCallCheck(this,Vp),(ee=$.call(this,X)).object=X,ee.object=X,ee.name="CombinedCameraHelper: ".concat(X.uuid),ee}return _createClass(Vp,[{key:"updateMatrixWorld",value:function updateMatrixWorld(X){_get(_getPrototypeOf(Vp.prototype),"updateMatrixWorld",this).call(this,X),this.updateTarget()}},{key:"updateTarget",value:function updateTarget(){var X=this.object.getTarget();this.updateWorldMatrix(!0,!1),this.worldToLocal(X)}},{key:"raycast",value:function raycast(X,$){EH(this.object,this.geometry,X,$,!0)}}]),Vp}(kH(DH)),OH=function(X){_inherits(Kl,X);var $=_createSuper(Kl);function Kl(X){var ee,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10066329;return _classCallCheck(this,Kl),(ee=$.call(this,X,ne,ae)).object=X,ee.name="DirectionalLightHelper: ".concat(X.uuid),ee}return _createClass(Kl,[{key:"raycast",value:function raycast(X,$){EH(this.object,Kl.geometryHelper,X,$)}}]),Kl}(kH(F_)),RH=function(X){_inherits(Zl,X);var $=_createSuper(Zl);function Zl(X){var ee,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return _classCallCheck(this,Zl),(ee=$.call(this,ne)).object=X,ee.object.updateMatrixWorld(),ee.name="EmptyObjectHelper: ".concat(X.uuid),ee.matrix=X.matrixWorld,ee.matrixAutoUpdate=!1,ee}return _createClass(Zl,[{key:"raycast",value:function raycast(X,$){EH(this.object,Zl.geometryHelper,X,$)}},{key:"update",value:function update(){}}]),Zl}(kH(G_)),BH=function(X){_inherits($l,X);var $=_createSuper($l);function $l(X){var ee,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:6710886;return _classCallCheck(this,$l),(ee=$.call(this,X,ne,ae)).object=X,ee.name="PointLightHelper: ".concat(X.uuid),ee}return _createClass($l,[{key:"raycast",value:function raycast(X,$){EH(this.object,$l.geometryHelper,X,$)}}]),$l}(kH(R_)),IH=function(X){_inherits(Hp,X);var $=_createSuper(Hp);function Hp(X){var ee,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6710886;return _classCallCheck(this,Hp),(ee=$.call(this,X,ne)).object=X,ee.name="SpotLightHelper: ".concat(X.uuid),ee}return _createClass(Hp,[{key:"raycast",value:function raycast(X,$){EH(this.object,Hp.geometryHelper,X,$)}},{key:"update",value:function update(){if(void 0!==this.object){var X=Hp._vector,$=this.object.distance?this.object.distance:1e3,ee=$*Math.tan(this.object.angle);this.cone.scale.set(ee,ee,$),X.setFromMatrixPosition(this.object.target.matrixWorld),this.cone.lookAt(X);var ne=void 0!==this.color?this.color:this.light.color;if(this.cone.material instanceof Array)for(var ae=0,de=this.cone.material.length;ae<de;ae++)this.cone.material[ae].color.set(ne);else this.cone.material.color.set(ne)}}}]),Hp}(kH(T_)),zH=IH;zH._vector=new wo;var NH=function Vi(X,$){return function(X){_inherits(_class3,X);var ee=_createSuper(_class3);function _class3(){var X;return _classCallCheck(this,_class3),(X=ee.apply(this,arguments)).objectHelper=new $(_assertThisInitialized(X)),X.enableHelper=!1,X}return _createClass(_class3,[{key:"visibility",get:function get(){return this.visible},set:function set(X){this.visible=X,this.setHelperVisibility(X),this.setHelperChildrenVisibility(X)}},{key:"geometryHelper",get:function get(){return $.geometryHelper}},{key:"setHelperVisibility",value:function setHelperVisibility(X){this.objectHelper.visible=X}},{key:"setHelperChildrenVisibility",value:function setHelperChildrenVisibility(X){var $,ee=(0,je.Z)(this.children);try{for(ee.s();!($=ee.n()).done;){var ne=$.value;ZV(ne)&&ne.traverseEntity((function($){UV($)&&$.visible&&($.objectHelper.visible=X)}))}}catch(ae){ee.e(ae)}finally{ee.f()}}},{key:"raycast",value:function raycast(X,$){this.objectHelper.raycast(X,$)}},{key:"copy",value:function copy(X){var $=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return _get(_getPrototypeOf(_class3.prototype),"copy",this).call(this,X,$),void 0!==X.enableHelper&&(this.enableHelper=X.enableHelper),void 0!==X.objectHelper&&(this.objectHelper.visible=X.objectHelper.visible),this}},{key:"toJSON",value:function toJSON(X){var $=_get(_getPrototypeOf(_class3.prototype),"toJSON",this).call(this,X);return $.object.enableHelper=this.enableHelper,$}},{key:"fromJSON",value:function fromJSON(X){return _get(_getPrototypeOf(_class3.prototype),"fromJSON",this).call(this,X),void 0!==X.enableHelper&&(this.enableHelper=!0),this}},{key:"fromLightState",value:function fromLightState(X,$){if("LightDirectional"===this.objectType||"LightPoint"===this.objectType||"LightSpot"===this.objectType){var ee=this;void 0!==X.color&&(ee.color=pr(X.color,$)),void 0!==X.intensity&&(ee.intensity=X.intensity),void 0!==X.depth&&(ee.shadow.camera.far=X.depth,ee.shadow.needsUpdate=!0),void 0!==X.shadows&&(this.castShadow=X.shadows),void 0!==X.helper&&(this.enableHelper=X.helper,ee.gizmos.shadowmap.visible=X.helper)}return this}}]),_class3}(X)},FH=new wo,UH=new wo,VH=function(X){_inherits(Bn,X);var $=_createSuper(Bn);function Bn(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window.innerWidth,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.innerHeight,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:45,de=arguments.length>3?arguments[3]:void 0,fe=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e5;return _classCallCheck(this,Bn),(X=$.call(this)).objectType="CombinedCamera",X._cameraType="OrthographicCamera",X.targetOffset=tD.DefaultTargetOffset,X.isUpVectorFlipped=!1,X.angleOffsetFromUp=0,X.width=ee,X.height=ne,X.orthoCamera=new Ud(-.5*ee,.5*ee,.5*ne,-.5*ne,null!=de?de:-5e4,fe),X.perspCamera=new cd(ae,ee/ne,null!=de?de:50,fe),X.left=X.orthoCamera.left,X.right=X.orthoCamera.right,X.top=X.orthoCamera.top,X.bottom=X.orthoCamera.bottom,X.far=X.orthoCamera.far,X.view=X.orthoCamera.view,X.aspect=X.perspCamera.aspect,X.fov=X.perspCamera.fov,X.focus=X.perspCamera.focus,X.filmGauge=X.perspCamera.filmGauge,X.filmOffset=X.perspCamera.filmOffset,X.toOrthographic(!0),X}return _createClass(Bn,[{key:"isPerspectiveCamera",get:function get(){return"PerspectiveCamera"===this.cameraType}},{key:"isOrthographicCamera",get:function get(){return!this.isPerspectiveCamera}},{key:"cameraType",get:function get(){return this._cameraType},set:function set(X){"PerspectiveCamera"===X?this.toPerspective():"OrthographicCamera"===X&&this.toOrthographic()}},{key:"setNear",value:function setNear(X,$){"PerspectiveCamera"===X?this.perspCamera.near=$:this.orthoCamera.near=$}},{key:"setZoom",value:function setZoom(X,$){$>=0&&("PerspectiveCamera"===X?this.perspCamera.zoom=$:this.orthoCamera.zoom=$)}},{key:"near",get:function get(){return"PerspectiveCamera"===this._cameraType?this.perspCamera.near:this.orthoCamera.near},set:function set(X){"PerspectiveCamera"===this._cameraType?this.perspCamera.near=X:this.orthoCamera.near=X}},{key:"zoom",get:function get(){return"PerspectiveCamera"===this._cameraType?this.perspCamera.zoom:this.orthoCamera.zoom},set:function set(X){X>=0&&("PerspectiveCamera"===this._cameraType?this.perspCamera.zoom=X:this.orthoCamera.zoom=X)}},{key:"lookAt",value:function lookAt(X){_get(_getPrototypeOf(Bn.prototype),"lookAt",this).call(this,X),this.getWorldPosition(FH),this.targetOffset=FH.distanceTo(X)}},{key:"getTarget",value:function getTarget(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new wo;return this.getWorldDirection(UH),this.getWorldPosition(FH),UH.multiplyScalar(this.targetOffset),X.copy(FH).add(UH),X}},{key:"getDistanceToTarget",value:function getDistanceToTarget(){var X=this.getTarget();return this.getWorldPosition(FH),FH.distanceTo(X)}},{key:"updateUp",value:function updateUp(){var X=this.getWorldQuaternion(new xo),$=new wo(0,0,1).applyQuaternion(X),ee=(new wo).copy(ru.DefaultUp);this.isUpVectorFlipped&&ee.negate(),ee.applyQuaternion(X);var ne=(new wo).copy(ru.DefaultUp).projectOnPlane($),ae=(new wo).crossVectors(ne,ee).dot($)>=0?1:-1;this.angleOffsetFromUp=ne.angleTo(ee)*ae}},{key:"getViewFrontToObject",value:function getViewFrontToObject(X){var $=X.getWorldPosition(new wo),ee=X.getWorldDirection(new wo).multiplyScalar(this.targetOffset);return{position:$.clone().add(ee),target:$}}},{key:"getViewToObject",value:function getViewToObject(X){var $=X.getWorldPosition(new wo),ee=this.getWorldDirection(new wo).multiplyScalar(this.targetOffset);return{position:$.clone().sub(ee),target:$}}},{key:"setViewplaneSize",value:function setViewplaneSize(X,$){this.left=.5*-X,this.right=.5*X,this.top=.5*$,this.bottom=.5*-$,this.aspect=X/$,this.updateProjectionMatrix()}},{key:"toOrthographic",value:function toOrthographic(X){this.orthoCamera.left=this.left,this.orthoCamera.right=this.right,this.orthoCamera.top=this.top,this.orthoCamera.bottom=this.bottom,this.orthoCamera.view=this.view,this.orthoCamera.far=this.far,this.orthoCamera.updateProjectionMatrix(),this.projectionMatrix=this.orthoCamera.projectionMatrix,this.projectionMatrixInverse=this.orthoCamera.projectionMatrixInverse,this._cameraType="OrthographicCamera",(!0===this.enableHelper||!0===X)&&this.objectHelper.update()}},{key:"toPerspective",value:function toPerspective(X){this.perspCamera.aspect=this.aspect,this.perspCamera.fov=this.fov,this.perspCamera.view=this.view,this.perspCamera.far=this.far,this.perspCamera.updateProjectionMatrix(),this.projectionMatrix=this.perspCamera.projectionMatrix,this.projectionMatrixInverse=this.perspCamera.projectionMatrixInverse,this._cameraType="PerspectiveCamera",(!0===this.enableHelper||!0===X)&&this.objectHelper.update()}},{key:"setFocalLength",value:function setFocalLength(X){this.perspCamera.setFocalLength(X),this.toPerspective()}},{key:"getFocalLength",value:function getFocalLength(){return this.perspCamera.getFocalLength()}},{key:"getEffectiveFOV",value:function getEffectiveFOV(){return this.perspCamera.getEffectiveFOV()}},{key:"getFilmWidth",value:function getFilmWidth(){return this.perspCamera.getFilmWidth()}},{key:"getFilmHeight",value:function getFilmHeight(){return this.perspCamera.getFilmHeight()}},{key:"setViewOffset",value:function setViewOffset(X,$,ee,ne,ae,de){"PerspectiveCamera"===this._cameraType?this.perspCamera.setViewOffset(X,$,ee,ne,ae,de):this.orthoCamera.setViewOffset(X,$,ee,ne,ae,de)}},{key:"clearViewOffset",value:function clearViewOffset(){"PerspectiveCamera"===this._cameraType?(this.perspCamera.clearViewOffset(),this.toPerspective()):(this.orthoCamera.clearViewOffset(),this.toOrthographic())}},{key:"updateProjectionMatrix",value:function updateProjectionMatrix(X){"PerspectiveCamera"===this._cameraType?this.toPerspective(X):"OrthographicCamera"===this._cameraType&&this.toOrthographic(X)}},{key:"updateMatrixWorld",value:function updateMatrixWorld(X){_get(_getPrototypeOf(Bn.prototype),"updateMatrixWorld",this).call(this,X),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"updateWorldMatrix",value:function updateWorldMatrix(X,$){_get(_getPrototypeOf(Bn.prototype),"updateWorldMatrix",this).call(this,X,$),this.matrixWorldInverse.copy(this.matrixWorld).invert()}},{key:"copy",value:function copy(X,$){return _get(_getPrototypeOf(Bn.prototype),"copy",this).call(this,X,$),this.orthoCamera.copy(X.orthoCamera),this.perspCamera.copy(X.perspCamera),this.left=X.left,this.right=X.right,this.top=X.top,this.bottom=X.bottom,this.far=X.far,this.view=null===X.view?null:Object.assign({},X.view),this._cameraType=X._cameraType,this.aspect=X.aspect,this.fov=X.fov,this.focus=X.focus,this.filmGauge=X.filmGauge,this.filmOffset=X.filmOffset,this.targetOffset=X.targetOffset,this.updateProjectionMatrix(),this}},{key:"fromCameraRender",value:function fromCameraRender(X){var $={near:this.orthoCamera.near,far:this.orthoCamera.far},ee={near:this.perspCamera.near,far:this.perspCamera.far};return this.copy(X),this.name="",this.enableHelper=!0,this.objectHelper.visible=!0,this.orthoCamera.near=$.near,this.orthoCamera.far=$.far,this.perspCamera.near=ee.near,this.perspCamera.far=ee.far,this.updateProjectionMatrix(),this}},{key:"toJSON",value:function toJSON(X){var $=_get(_getPrototypeOf(Bn.prototype),"toJSON",this).call(this,X),ee=$.object;return ee.objectType="CombinedCamera",ee.cameraType=this.cameraType,ee.targetOffset=this.targetOffset,ee.isUpVectorFlipped=this.isUpVectorFlipped,ee.angleOffsetFromUp=this.angleOffsetFromUp,ee.left=this.left,ee.right=this.right,ee.top=this.top,ee.bottom=this.bottom,null!==this.view&&(ee.view=Object.assign({},this.view)),ee.zoomOrtho=this.orthoCamera.zoom,ee.nearOrtho=this.orthoCamera.near,ee.far=this.far,ee.aspect=this.aspect,ee.fov=this.fov,ee.focus=this.focus,ee.filmGauge=this.filmGauge,ee.filmOffset=this.filmOffset,ee.zoomPersp=this.perspCamera.zoom,ee.nearPersp=this.perspCamera.near,$}},{key:"fromJSON",value:function fromJSON(X){var $;if(_get(_getPrototypeOf(Bn.prototype),"fromJSON",this).call(this,X),this.cameraType=X.cameraType,void 0!==X.targetOffset&&(this.targetOffset=X.targetOffset),void 0!==X.orbitControlsTarget){var ee=this.getWorldPosition(new wo),ne=(new wo).fromArray(X.orbitControlsTarget);this.targetOffset=ne.distanceTo(ee)}else void 0!==X.targetOffset&&(this.targetOffset=X.targetOffset);return this.isUpVectorFlipped=!1,this.angleOffsetFromUp=null!=($=X.angleOffsetFromUp)?$:0,void 0!==X.left&&(this.left=X.left),void 0!==X.right&&(this.right=X.right),void 0!==X.top&&(this.top=X.top),void 0!==X.bottom&&(this.bottom=X.bottom),void 0!==X.view&&(this.view=Object.assign({},X.view)),void 0!==X.zoomOrtho&&(this.orthoCamera.zoom=X.zoomOrtho),void 0!==X.nearOrtho&&(this.orthoCamera.near=X.nearOrtho),void 0!==X.far&&(this.far=X.far),void 0!==X.aspect&&(this.aspect=X.aspect),void 0!==X.fov&&(this.fov=X.fov),void 0!==X.focus&&(this.focus=X.focus),void 0!==X.filmGauge&&(this.filmGauge=X.filmGauge),void 0!==X.filmOffset&&(this.filmOffset=X.filmOffset),void 0!==X.zoomPersp&&(this.perspCamera.zoom=X.zoomPersp),void 0!==X.nearPersp&&(this.perspCamera.near=X.nearPersp),this.updateProjectionMatrix(),this}},{key:"toCameraState",value:function toCameraState(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],$={type:this.cameraType,far:this.far,orthographic:{near:this.orthoCamera.near,zoom:this.orthoCamera.zoom},perspective:{near:this.perspCamera.near,fov:this.perspCamera.fov,zoom:this.perspCamera.zoom},up:this.up.toArray(),targetOffset:this.targetOffset,isUpVectorFlipped:this.isUpVectorFlipped};return gD($,X)}},{key:"fromCameraState",value:function fromCameraState(X){var $=X.orthographic,ee=X.perspective;return void 0!==X.type&&(this.cameraType=X.type),void 0!==X.far&&(this.far=X.far),void 0!==$&&(void 0!==$.near&&(this.orthoCamera.near=$.near),void 0!==$.zoom&&(this.orthoCamera.zoom=$.zoom)),void 0!==ee&&(void 0!==ee.near&&(this.perspCamera.near=ee.near),void 0!==ee.fov&&(this.perspCamera.fov=ee.fov),void 0!==ee.zoom&&(this.perspCamera.zoom=ee.zoom)),void 0!==X.up&&this.up.fromArray(X.up),void 0!==X.targetOffset&&(this.targetOffset=X.targetOffset),void 0!==X.isUpVectorFlipped&&(this.isUpVectorFlipped=X.isUpVectorFlipped),this.updateProjectionMatrix(),this}},{key:"toState",value:function toState(X){return At(Ct(Ct({},_get(_getPrototypeOf(Bn.prototype),"toState",this).call(this,X)),this.toCameraState(X)),{type:this.cameraType})}},{key:"fromState",value:function fromState(X){return _get(_getPrototypeOf(Bn.prototype),"fromState",this).call(this,X),this.fromCameraState(X),this}}],[{key:"createFromState",value:function createFromState(X,$){var ee=(new Bn).fromState($);return ee.enableHelper=!0,ee.objectHelper.update(),ee.uuid=X,ee}}]),Bn}(NH(QV(ad),LH)),HH=function(X){_inherits(gs,X);var $=_createSuper(gs);function gs(){var X;return _classCallCheck(this,gs),(X=$.apply(this,arguments)).objectType="EmptyObject",X}return _createClass(gs,[{key:"toJSON",value:function toJSON(X){var $=_get(_getPrototypeOf(gs.prototype),"toJSON",this).call(this,X);return $.object.objectType="EmptyObject",$}}],[{key:"createFromState",value:function createFromState(X,$){var ee=(new gs).fromState($);return ee.uuid=X,ee.enableHelper=!0,ee.objectHelper.update(),ee}}]),gs}(NH(QV(bp),RH)),jH=function(X){_inherits(tc,X);var $=_createSuper(tc);function tc(){var X;_classCallCheck(this,tc);for(var ee=arguments.length,ne=new Array(ee),ae=0;ae<ee;ae++)ne[ae]=arguments[ae];(X=$.call.apply($,[this].concat(ne))).objectType="LightDirectional",X._gizmos={},X.castShadow=!0,X.shadow.mapSize.width=1024,X.shadow.mapSize.height=1024;var de=X.shadow.camera;de.top=1250,de.bottom=-1250,de.right=1250,de.left=-1250,de.near=1,de.far=2500;var fe=new H_(X.shadow.camera);return fe.visible=!1,X._gizmos.shadowmap=fe,X.update(),X}return _createClass(tc,[{key:"gizmos",get:function get(){return this._gizmos}},{key:"showGizmos",value:function showGizmos(){for(var X in this._gizmos){var $=this._gizmos[X];$ instanceof H_&&($.visible=!0)}}},{key:"hideGizmos",value:function hideGizmos(){for(var X in this._gizmos){var $=this._gizmos[X];$ instanceof H_&&($.visible=!1)}}},{key:"update",value:function update(){for(var X in this.shadow.camera.updateProjectionMatrix(),this._gizmos){var $=this._gizmos[X];$ instanceof H_&&$.update()}}},{key:"updateMatrixWorld",value:function updateMatrixWorld(X){_get(_getPrototypeOf(tc.prototype),"updateMatrixWorld",this).call(this,X),!0===this.enableHelper&&!0===this.objectHelper.visible&&this.objectHelper.update()}},{key:"copy",value:function copy(X){var $=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return _get(_getPrototypeOf(tc.prototype),"copy",this).call(this,X,$),this.color.copy(X.color),this.intensity=X.intensity,this.target=X.target.clone(),this.shadow=X.shadow.clone(),this}},{key:"toJSON",value:function toJSON(X){var $=_get(_getPrototypeOf(tc.prototype),"toJSON",this).call(this,X),ee=$.object;return ee.objectType="LightDirectional",ee.color=this.color.getHex(),ee.intensity=this.intensity,ee.shadow=this.shadow.toJSON(),$}},{key:"fromJSON",value:function fromJSON(X){var $;_get(_getPrototypeOf(tc.prototype),"fromJSON",this).call(this,X),this.color.set(X.color),this.intensity=X.intensity,this.shadow.normalBias=null!=($=X.shadow.normalBias)?$:0,this.shadow.radius=X.shadow.radius,this.shadow.mapSize.fromArray(X.shadow.mapSize);var ee=this.shadow.camera,ne=X.shadow.camera;return ee.near=ne.near,ee.far=ne.far,ee.zoom=ne.zoom,ee.left=ne.left,ee.right=ne.right,ee.top=ne.top,ee.bottom=ne.bottom,void 0!==ne.view&&(ee.view=Object.assign({},ne.view)),this}},{key:"fromDirectionalLightState",value:function fromDirectionalLightState(X,$){var ee=void 0!==X.depth&&X.depth!==this.shadow.camera.far||void 0!==X.size&&X.size/2!==this.shadow.camera.right;return _get(_getPrototypeOf(tc.prototype),"fromLightState",this).call(this,X,$),void 0!==X.size&&function U1(X,$){X.shadow.camera.right=$/2,X.shadow.camera.left=-$/2,X.shadow.camera.top=$/2,X.shadow.camera.bottom=-$/2,X.shadow.needsUpdate=!0}(this,X.size),ee&&this.update(),this}},{key:"fromState",value:function fromState(X,$){return _get(_getPrototypeOf(tc.prototype),"fromState",this).call(this,X),this.fromDirectionalLightState(X,$),this}}],[{key:"createFromState",value:function createFromState(X,$,ee){var ne=(new tc).fromState($,ee);return ne.uuid=X,ne}}]),tc}(NH(QV(Ix),OH)),GH=function(X){_inherits(rc,X);var $=_createSuper(rc);function rc(){var X;_classCallCheck(this,rc);for(var ee=arguments.length,ne=new Array(ee),ae=0;ae<ee;ae++)ne[ae]=arguments[ae];(X=$.call.apply($,[this].concat(ne))).objectType="LightPoint",X._gizmos={},X.castShadow=!0,X.shadow.mapSize.width=1024,X.shadow.mapSize.height=1024;var de=X.shadow.camera;de.fov=90,de.aspect=1,de.near=100,de.far=2500;var fe=new wo(-de.far+X.position.x,-de.far+X.position.y,-de.far+X.position.z),Ue=new wo(de.far+X.position.x,de.far+X.position.y,de.far+X.position.z),je=new Mo(fe,Ue),Ke=new j_(je,new Ma(16755200));return Ke.visible=!1,X._gizmos.shadowmap=Ke,X.update(),X}return _createClass(rc,[{key:"gizmos",get:function get(){return this._gizmos}},{key:"showGizmos",value:function showGizmos(){for(var X in this._gizmos){var $=this._gizmos[X];$ instanceof j_&&($.visible=!0)}}},{key:"hideGizmos",value:function hideGizmos(){for(var X in this._gizmos){var $=this._gizmos[X];$ instanceof j_&&($.visible=!1)}}},{key:"update",value:function update(){if(this.shadow&&(this.shadow.camera.updateProjectionMatrix(),this._gizmos))for(var X in this._gizmos){var $=this._gizmos[X];if($ instanceof j_){var ee=this.shadow.camera,ne=new wo(-ee.far+this.position.x,-ee.far+this.position.y,-ee.far+this.position.z),ae=new wo(ee.far+this.position.x,ee.far+this.position.y,ee.far+this.position.z);$.box.set(ne,ae),$.updateMatrixWorld(!0)}}}},{key:"updateMatrixWorld",value:function updateMatrixWorld(X){_get(_getPrototypeOf(rc.prototype),"updateMatrixWorld",this).call(this,X),!0===this.enableHelper&&!0===this.objectHelper.visible&&this.objectHelper.update()}},{key:"copy",value:function copy(X){var $=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return _get(_getPrototypeOf(rc.prototype),"copy",this).call(this,X,$),this.color.copy(X.color),this.intensity=X.intensity,this.distance=X.distance,this.decay=X.decay,this.shadow=X.shadow.clone(),this}},{key:"toJSON",value:function toJSON(X){var $=_get(_getPrototypeOf(rc.prototype),"toJSON",this).call(this,X),ee=$.object;return ee.objectType="LightPoint",ee.color=this.color.getHex(),ee.intensity=this.intensity,ee.distance=this.distance,ee.decay=this.decay,ee.shadow=this.shadow.toJSON(),$}},{key:"fromJSON",value:function fromJSON(X){var $,ee;_get(_getPrototypeOf(rc.prototype),"fromJSON",this).call(this,X),this.color.set(X.color),this.intensity=X.intensity,this.distance=X.distance,this.decay=X.decay,this.shadow.normalBias=null!=($=X.shadow.normalBias)?$:0,this.shadow.radius=X.shadow.radius,this.shadow.mapSize.fromArray(null!=(ee=X.shadow.mapSize)?ee:[512,512]),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null);var ne=this.shadow.camera,ae=X.shadow.camera;return ne.near=ae.near,ne.far=ae.far,ne.zoom=ae.zoom,ne.fov=ae.fov,ne.focus=ae.focus,ne.aspect=ae.aspect,ne.filmGauge=ae.filmGauge,ne.filmOffset=ae.filmOffset,void 0!==ae.view&&(ne.view=Object.assign({},ae.view)),this}},{key:"fromPointLightState",value:function fromPointLightState(X,$){return _get(_getPrototypeOf(rc.prototype),"fromLightState",this).call(this,X,$),void 0!==X.distance&&(this.distance=X.distance),void 0!==X.decay&&(this.decay=X.decay),void 0!==X.shadowRadius&&(this.shadow.radius=X.shadowRadius),void 0!==X.shadowResolution&&(this.shadow.mapSize.set(X.shadowResolution,X.shadowResolution),this.shadow.map&&(this.shadow.map.dispose(),this.shadow.map=null)),this}},{key:"fromState",value:function fromState(X,$){return _get(_getPrototypeOf(rc.prototype),"fromState",this).call(this,X),this.fromPointLightState(X,$),this}}],[{key:"createFromState",value:function createFromState(X,$,ee){var ne=(new rc).fromState($,ee);return ne.uuid=X,ne}}]),rc}(NH(QV(Rx),BH)),WH=new wo,qH=new wo,YH=new xo,JH=function(X){_inherits(nc,X);var $=_createSuper(nc);function nc(){var X;_classCallCheck(this,nc);for(var ee=arguments.length,ne=new Array(ee),ae=0;ae<ee;ae++)ne[ae]=arguments[ae];(X=$.call.apply($,[this].concat(ne))).objectType="LightSpot",X._gizmos={},X.castShadow=!0,X.shadow.mapSize.width=1024,X.shadow.mapSize.height=1024;var de=X.shadow.camera;de.fov=2*da.RAD2DEG*X.angle,de.aspect=1,de.near=100,de.far=2500;var fe=new H_(X.shadow.camera);return fe.visible=!1,X._gizmos.shadowmap=fe,X.update(),X}return _createClass(nc,[{key:"gizmos",get:function get(){return this._gizmos}},{key:"showGizmos",value:function showGizmos(){for(var X in this._gizmos){var $=this._gizmos[X];$ instanceof H_&&($.visible=!0)}}},{key:"hideGizmos",value:function hideGizmos(){for(var X in this._gizmos){var $=this._gizmos[X];$ instanceof H_&&($.visible=!1)}}},{key:"update",value:function update(){for(var X in this.shadow.camera.updateProjectionMatrix(),this._gizmos){var $=this._gizmos[X];$ instanceof H_&&$.update()}}},{key:"updateMatrixWorld",value:function updateMatrixWorld(X){_get(_getPrototypeOf(nc.prototype),"updateMatrixWorld",this).call(this,X),qH.setFromMatrixPosition(this.matrixWorld),YH.setFromRotationMatrix(this.matrixWorld),WH.copy(this.up).applyQuaternion(YH).negate().multiplyScalar(this.distance),this.target.position.copy(qH).add(WH),this.target.updateMatrixWorld(),!0===this.enableHelper&&!0===this.objectHelper.visible&&this.objectHelper.update()}},{key:"copy",value:function copy(X){var $=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return _get(_getPrototypeOf(nc.prototype),"copy",this).call(this,X,$),this.color.copy(X.color),this.intensity=X.intensity,this.distance=X.distance,this.angle=X.angle,this.penumbra=X.penumbra,this.decay=X.decay,this.target=X.target.clone(),this.shadow=X.shadow.clone(),this}},{key:"toJSON",value:function toJSON(X){var $=_get(_getPrototypeOf(nc.prototype),"toJSON",this).call(this,X),ee=$.object;return ee.objectType="LightSpot",ee.color=this.color.getHex(),ee.intensity=this.intensity,ee.distance=this.distance,ee.angle=this.angle,ee.decay=this.decay,ee.penumbra=this.penumbra,ee.shadow=this.shadow.toJSON(),$}},{key:"fromJSON",value:function fromJSON(X){var $;_get(_getPrototypeOf(nc.prototype),"fromJSON",this).call(this,X),this.color.set(X.color),this.intensity=X.intensity,this.distance=X.distance,this.angle=X.angle,this.decay=X.decay,this.penumbra=X.penumbra,this.shadow.normalBias=null!=($=X.shadow.normalBias)?$:0,this.shadow.radius=X.shadow.radius,this.shadow.mapSize.fromArray(X.shadow.mapSize);var ee=this.shadow.camera,ne=X.shadow.camera;return ee.near=ne.near,ee.far=ne.far,ee.zoom=ne.zoom,ee.fov=ne.fov,ee.focus=ne.focus,ee.aspect=ne.aspect,ee.filmGauge=ne.filmGauge,ee.filmOffset=ne.filmOffset,void 0!==ne.view&&(ee.view=Object.assign({},ne.view)),this}},{key:"fromSpotLightState",value:function fromSpotLightState(X,$){return _get(_getPrototypeOf(nc.prototype),"fromLightState",this).call(this,X,$),void 0!==X.distance&&(this.distance=X.distance),void 0!==X.decay&&(this.decay=X.decay),void 0!==X.angle&&(this.angle=X.angle),void 0!==X.penumbra&&(this.penumbra=X.penumbra),this}},{key:"fromState",value:function fromState(X,$){return _get(_getPrototypeOf(nc.prototype),"fromState",this).call(this,X),this.fromSpotLightState(X,$),this}}],[{key:"createFromState",value:function createFromState(X,$,ee){var ne=(new nc).fromState($,ee);return ne.uuid=X,ne}}]),nc}(NH(QV(Ex),zH)),ZH=function sA(X){return"VIDEO"===X.tagName},XH=function(){function $o(){_classCallCheck(this,$o)}return _createClass($o,null,[{key:"resize",value:function resize(X,$,ee){var ne,ae=X/$;if(ee.image){var de=ee.image;ae>(ne=ZH(de)?de.videoWidth/de.videoHeight:de.width/de.height)&&("WEBCAM"==ee.imageType?ee.repeat.set(-1,1*ne/ae):ee.repeat.set(1,1*ne/ae)),ae<ne&&("WEBCAM"==ee.imageType?ee.repeat.set(1*ae/ne*-1,1):ee.repeat.set(1*ae/ne,1)),ae==ne&&("WEBCAM"==ee.imageType?ee.repeat.set(-1,1):ee.repeat.set(1,1))}}},{key:"resizeTextureLayer",value:function resizeTextureLayer(X,$,ee){var ne,ae=X/$,de=void 0!==ee.image?ee.image.width/ee.image.height:1;ne=ae>de?{x:1,y:de/ae}:ae<de?{x:ae/de,y:1}:{x:1,y:1},ee.repeat.set(ne.x,ne.y),ee.updateMatrix()}},{key:"resizeTextureLayers",value:function resizeTextureLayers(X,$,ee){for(var ne=ee.userData.layers,ae=ne.getLayers(),de=0;de<ae.length;de++){var fe=ae[de];D1(fe)&&($o.resizeTextureLayer(X,$,fe.uniforms["f".concat(fe.id,"_texture")].value),ne.updateLayerUniform())}}},{key:"resizeComplex",value:function resizeComplex(X,$,ee,ne){var ae,de=X/$,fe=ee.image;ae=ZH(fe)?fe.videoWidth/fe.videoHeight:fe.width/fe.height,ne.geometry.type.includes("Shape")?(de>ae&&("WEBCAM"==ee.imageType?ee.repeat.set(1/X*-1,1/$*ae/de):ee.repeat.set(1/X,1/$*ae/de)),de<ae&&("WEBCAM"==ee.imageType?ee.repeat.set(1/X*de/ae*-1,1/$):ee.repeat.set(1/X*de/ae,1/$)),de==ae&&("WEBCAM"==ee.imageType?ee.repeat.set(1/X*-1,1/$):ee.repeat.set(1/X,1/$))):(de>ae&&("WEBCAM"==ee.imageType?ee.repeat.set(-1,1*ae/de):ee.repeat.set(1,1*ae/de)),de<ae&&("WEBCAM"==ee.imageType?ee.repeat.set(1*de/ae*-1,1):ee.repeat.set(1*de/ae,1)),de==ae&&("WEBCAM"==ee.imageType?ee.repeat.set(-1,1):ee.repeat.set(1,1)))}}]),$o}(),QH=function(X){_inherits(ic,X);var $=_createSuper(ic);function ic(X){var ee,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kV;return _classCallCheck(this,ic),(ee=$.call(this,X,ne)).objectType="Mesh2D",ee.castShadow=!0,ee.receiveShadow=!0,ee}return _createClass(ic,[{key:"updateGeometry",value:function updateGeometry(X){_get(_getPrototypeOf(ic.prototype),"updateGeometry",this).call(this,X),this.material.userData.layers&&XH.resizeTextureLayers(this.geometry.userData.parameters.width,this.geometry.userData.parameters.height,this.material)}},{key:"resizeGeometry",value:function resizeGeometry(X,$){_get(_getPrototypeOf(ic.prototype),"resizeGeometry",this).call(this,X,$,0),this.material.userData.layers&&XH.resizeTextureLayers(this.geometry.userData.parameters.width,this.geometry.userData.parameters.height,this.material)}},{key:"toJSON",value:function toJSON(X){var $=_get(_getPrototypeOf(ic.prototype),"toJSON",this).call(this,X);return $.object.objectType="Mesh2D",$}},{key:"clone",value:function clone(){var X=_get(_getPrototypeOf(ic.prototype),"clone",this).call(this);return X.updateGeometry({}),X}}],[{key:"fromTexture",value:function fromTexture(X){var $,ee;if(X instanceof Ym){var ne=X.image;$=.5*ne.videoWidth,ee=.5*ne.videoHeight}else{var ae=X.image;$=.5*ae.width,ee=.5*ae.height}var de=kN.create({parameters:{width:$,height:ee}}),fe=new kV;return fe.layersList.changeLayer(0,{type:"texture",texture:X}),fe.layersList.moveLayer(0,1),fe.dispose(),new ic(de,fe)}}]),ic}($V),KH=function(X){_inherits(sc,X);var $=_createSuper(sc);function sc(X){var ee,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new MV;return _classCallCheck(this,sc),(ee=$.call(this,X,ne)).objectType="Mesh3D",ee.castShadow=!0,ee.receiveShadow=!0,ee}return _createClass(sc,[{key:"toJSON",value:function toJSON(X){var $=_get(_getPrototypeOf(sc.prototype),"toJSON",this).call(this,X);return $.object.objectType="Mesh3D",$}}]),sc}($V),$H=function(X){_inherits(oc,X);var $=_createSuper(oc);function oc(X){var ee,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new MV;return _classCallCheck(this,oc),(ee=$.call(this,X,ne)).objectType="NonParametric",ee}return _createClass(oc,[{key:"toJSON",value:function toJSON(X){var $=_get(_getPrototypeOf(oc.prototype),"toJSON",this).call(this,X);return $.object.objectType="NonParametric",$}}]),oc}(KH),nj=function(X){_inherits(Wp,X);var $=_createSuper(Wp);function Wp(X){return _classCallCheck(this,Wp),$.call(this,X)}return _createClass(Wp,[{key:"load",value:function load(X,$,ee,ne){var ae=this,de=new hx(this.manager);de.setPath(this.path),de.setRequestHeader(this.requestHeader),de.setWithCredentials(ae.withCredentials),de.load(X,(function(X){var ee;try{ee=JSON.parse(X)}catch(de){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),ee=JSON.parse(X.substring(65,X.length-2))}var ne=ae.parse(ee);$&&$(ne)}),ee,ne)}},{key:"parse",value:function parse(X){return new aj(X)}}]),Wp}(tx),aj=function(){function jp(X){_classCallCheck(this,jp),this.type="Font",this.data=X}return _createClass(jp,[{key:"generateShapes",value:function generateShapes(X){for(var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,ee=[],ne=JF(X,$,this.data),ae=0,de=ne.length;ae<de;ae++)Array.prototype.push.apply(ee,ne[ae].toShapes());return ee}}]),jp}();function JF(X,$,ee){for(var ne=Array.from(X),ae=$/ee.resolution,de=(ee.boundingBox.yMax-ee.boundingBox.yMin+ee.underlineThickness)*ae,fe=[],Ue=0,je=0,Ke=0;Ke<ne.length;Ke++){var et=ne[Ke];if("\n"===et)Ue=0,je-=de;else{var tt=KF(et,ae,Ue,je,ee);Ue+=tt.offsetX,fe.push(tt.path)}}return fe}function KF(X,$,ee,ne,ae){var de=ae.glyphs[X]||ae.glyphs["?"];if(de){var fe,Ue,je,Ke,et,tt,nt,it,ct=new W_;if(de.o)for(var dt=de._cachedOutline||(de._cachedOutline=de.o.split(" ")),vt=0,gt=dt.length;vt<gt;)switch(dt[vt++]){case"m":fe=dt[vt++]*$+ee,Ue=dt[vt++]*$+ne,ct.moveTo(fe,Ue);break;case"l":fe=dt[vt++]*$+ee,Ue=dt[vt++]*$+ne,ct.lineTo(fe,Ue);break;case"q":je=dt[vt++]*$+ee,Ke=dt[vt++]*$+ne,et=dt[vt++]*$+ee,tt=dt[vt++]*$+ne,ct.quadraticCurveTo(et,tt,je,Ke);break;case"b":je=dt[vt++]*$+ee,Ke=dt[vt++]*$+ne,et=dt[vt++]*$+ee,tt=dt[vt++]*$+ne,nt=dt[vt++]*$+ee,it=dt[vt++]*$+ne,ct.bezierCurveTo(et,tt,nt,it,je,Ke)}return{offsetX:de.ha*$,path:ct}}console.error('THREE.Font: character "'+X+'" does not exists in font family '+ae.familyName+".")}aj.prototype.isFont=!0;var oj=function(X){_inherits(mr,X);var $=_createSuper(mr);function mr(X){var ee,ne=X.char,ae=X.originalChar,de=X.fontFamily,fe=X.letterSpacing,Ue=X.fontSize,je=X.LOD,Ke=void 0===je?16:je,et=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Mu({color:0,opacity:1,visible:!0,transparent:!0,side:2});_classCallCheck(this,mr);var tt=mr.loadChar(ne,de,Ke);return(ee=$.call(this,tt.geometry,et)).char=ne,ee.originalChar=null!=ae?ae:ne,ee.fontFamily=de,ee.letterSpacing=fe,ee.fontSize=Ue,ee.LOD=Ke,ee.resolution=tt.resolution,ee.glyphsHa=tt.glyphsHa,ee.localPosition=new va,ee.charSize=0,ee.geometry.userData={type:"CharacterGeometry",parameters:{char:ee.char,fontFamily:ee.fontFamily,letterSpacing:ee.letterSpacing,fontSize:ee.fontSize,lod:ee.LOD,resolution:ee.resolution,charSize:ee.charSize,localPosition:ee.localPosition}},ee.updateFontSize(ee.fontSize),ee}return _createClass(mr,[{key:"updatePosition",value:function updatePosition(X,$){this.localPosition.copy(X);var ee=new wo(this.localPosition.x,-this.localPosition.y,0);this.position.copy(ee).add($)}},{key:"updateFontSize",value:function updateFontSize(X){var $=X/this.resolution;this.fontSize=X,this.scale.set(this.fontSize,this.fontSize,1),this.charSize=this.glyphsHa*$*this.letterSpacing}},{key:"updateFontFamily",value:function updateFontFamily(X){if(this.fontFamily!==X){this.fontFamily=X;var $=mr.loadChar(this.char,X,this.LOD);this.geometry=$.geometry,this.resolution=$.resolution,this.glyphsHa=$.glyphsHa,this.geometry.userData={type:"CharacterGeometry",parameters:{char:this.char,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,lod:this.LOD,resolution:this.resolution,charSize:this.charSize,localPosition:this.localPosition}},this.updateFontSize(this.fontSize)}}},{key:"updateChar",value:function updateChar(X){if(this.char!==X){this.char=X;var $=mr.loadChar(X,this.fontFamily,this.LOD);this.geometry=$.geometry,this.resolution=$.resolution,this.glyphsHa=$.glyphsHa,this.geometry.userData={type:"CharacterGeometry",parameters:{char:this.char,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,lod:this.LOD,resolution:this.resolution,charSize:this.charSize,localPosition:this.localPosition}},this.updateFontSize(this.fontSize)}}},{key:"updateLetterSpacing",value:function updateLetterSpacing(X){this.letterSpacing!==X&&(this.letterSpacing=X,this.updateFontSize(this.fontSize))}},{key:"updateLOD",value:function updateLOD(X){if(this.LOD!==X){this.LOD=X;var $=mr.loadChar(this.char,this.fontFamily,this.LOD);this.geometry=$.geometry,this.resolution=$.resolution,this.glyphsHa=$.glyphsHa,this.geometry.userData={type:"CharacterGeometry",parameters:{char:this.char,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,lod:this.LOD,resolution:this.resolution,charSize:this.charSize,localPosition:this.localPosition}},this.updateFontSize(this.fontSize)}}},{key:"clone",value:function clone(){return new mr({char:this.char,originalChar:this.originalChar,fontFamily:this.fontFamily,letterSpacing:this.letterSpacing,fontSize:this.fontSize,LOD:this.LOD}).copy(this)}}],[{key:"FONTS_PATH",get:function get(){return mr._fontPath},set:function set(X){mr._fontPath=X}},{key:"loadFont",value:function loadFont(X){return new Promise((function($,ee){mr.fontCache[X]?$(mr.fontCache[X]):(new nj).load(mr.FONTS_PATH+X+".json",(function(ee){mr.fontCache[X]=ee,$(ee)}),void 0,ee)}))}},{key:"loadChar",value:function loadChar(X,$,ee){if(mr.charCache[X]){if(mr.charCache[X][ee]&&mr.charCache[X][ee].fontFamily===$)return mr.charCache[X][ee]}else mr.charCache[X]={};var ne=mr.fontCache[$],ae=ne.generateShapes(X,1);return mr.charCache[X][ee]={geometry:new Ly(ae,ee),fontFamily:$,resolution:ne.data.resolution,glyphsHa:ne.data.glyphs[X].ha},mr.charCache[X][ee]}}]),mr}(Oh),lj=oj;lj.charCache={},lj.fontCache={},lj._fontPath="/_assets/_fonts/";var cj=new va,dj=function(){function uo(X,$,ee){_classCallCheck(this,uo),this.message=[],this.endLine=!0,this.yLinePos=X,this.lineHeight=$,this.maxCharSize=ee,this.nextChar3DPos=new va(0,this.yLinePos+this.maxCharSize*this.lineHeight),this.align=1}return _createClass(uo,[{key:"addChar3D",value:function addChar3D(X,$){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.message.length;this.message.splice(ee,0,X),X.fontSize>this.maxCharSize?(this.maxCharSize=X.fontSize,this.nextChar3DPos.y=this.yLinePos+this.maxCharSize*this.lineHeight,this.fullUpdate($)):(X.updatePosition(this.nextChar3DPos,$),this.nextChar3DPos.x+=X.charSize)}},{key:"deleteChar3D",value:function deleteChar3D(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.message.length-1,$=this.message[X];if($)return this.message.splice(X,1),this.nextChar3DPos.x-=$.charSize,$}},{key:"isEndLine",value:function isEndLine(X){this.endLine=X}},{key:"fullUpdate",value:function fullUpdate(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.nextChar3DPos.x=0;for(var ee=$,ne=this.message.length;ee<ne;ee+=1)this.message[ee].updatePosition(this.nextChar3DPos,X),this.nextChar3DPos.x+=this.message[ee].charSize}},{key:"checkOverFlow",value:function checkOverFlow(X){var $,ee=this.message.length-1;if(ee<=0)return!1;for(;ee>=0;){if(" "!==this.message[ee].char){$=this.message[ee];break}ee-=1}return!!(ee>=0&&$&&$.localPosition.x+$.charSize>X)}},{key:"containSpaceOverFlow",value:function containSpaceOverFlow(){for(var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.message.length-1,$=X;$>=0;$-=1)if(" "===this.message[$].char)return!0;return!1}},{key:"containSpace",value:function containSpace(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.message.length-1;if(this.endLine)return!0;for(var $=X;$>=0;$-=1)if(" "===this.message[$].char)return!0;return!1}},{key:"popWord",value:function popWord(){var X,$=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.message.length-1,ee=[],ne=!0;for(X=$;X>=0;X-=1){if(" "===this.message[X].char){ne=!1,0===ee.length&&(X-=1,ee.splice(0,0,this.message[X]));break}ee.splice(0,0,this.message[X])}return ne?ee=[]:this.message.splice(X+1,ee.length),ee}},{key:"getWord",value:function getWord(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,$=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,ee=[],ne=X;for(ne=X;;ne+=$){if(!this.message[ne]||" "===this.message[ne].char){0===ee.length&&this.message[ne]&&(ee.push(this.message[ne]),this.message.splice(ne,1));break}$>0?(ee.push(this.message[ne]),this.message.splice(ne,1),ne-=$):(ee.splice(0,0,this.message[ne]),this.message.splice(ne,1))}return ee}},{key:"getWordAtIndex",value:function getWordAtIndex(X){for(var $=[],ee=X;ee<this.message.length&&" "!==this.message[ee].char;ee++)$.push(this.message[ee]);for(var ne=X-1;ne>=0&&" "!==this.message[ne].char;ne--)$.splice(0,0,this.message[ne]);return $}},{key:"wordSize",value:function wordSize(){for(var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,$=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,ee=0,ne=X;ne>=0&&ne<this.message.length;){if(" "===this.message[ne].char){0===ee&&(ee=this.message[ne].charSize);break}ee+=this.message[ne].charSize,ne+=$}return(ne<0||ne>=this.message.length)&&!this.endLine?this.message[X]?this.message[X].charSize:999999999:0===ee?999999999:ee}},{key:"spaceLeft",value:function spaceLeft(X){return X-this.nextChar3DPos.x}},{key:"popChar",value:function popChar(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.message.length-1;return this.nextChar3DPos.x-=this.message[X].charSize,this.message.splice(X,1)}},{key:"isEmpty",value:function isEmpty(){return!this.message.length}},{key:"updateNextCharPosY",value:function updateNextCharPosY(){this.nextChar3DPos.y=this.yLinePos+this.maxCharSize*this.lineHeight}},{key:"updateYLinePos",value:function updateYLinePos(X){this.yLinePos=X,this.updateNextCharPosY()}},{key:"updatelineHeight",value:function updatelineHeight(X){this.lineHeight=X,this.updateNextCharPosY()}},{key:"updateFontSize",value:function updateFontSize(X){for(var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.message.length-1,ne=$;ne<=ee;ne+=1)this.message[ne].updateFontSize(X);this.maxCharSize=X,this.nextChar3DPos.y=this.yLinePos+this.maxCharSize*this.lineHeight}},{key:"countSpaces",value:function countSpaces(){for(var X=0,$=0;$<this.message.length;$++)" "===this.message[$].char&&(X+=1);return X}},{key:"alignText",value:function alignText(X,$,ee,ne,ae){switch(ee){case 1:this.leftAlign(X,ae);break;case 3:this.centerAlign(this.spaceLeft($),X,ae);break;case 2:this.rightAlign(this.spaceLeft($),X,ae);break;case 4:this.justifyAlign(this.spaceLeft($),X,ae)}}},{key:"offsetCharacters",value:function offsetCharacters(X,$,ee){cj.set($,ee);for(var ne=this.message.length,ae=0;ae<ne;ae++)this.message[ae].updatePosition(this.message[ae].localPosition.add(cj),X)}},{key:"leftAlign",value:function leftAlign(X,$){this.align=1,this.offsetCharacters(X,0,$)}},{key:"centerAlign",value:function centerAlign(X,$,ee){this.align=3,this.offsetCharacters($,X/2,ee)}},{key:"rightAlign",value:function rightAlign(X,$,ee){this.align=2,this.offsetCharacters($,X,ee)}},{key:"justifyAlign",value:function justifyAlign(X,$,ee){if(this.align=4,this.endLine)this.offsetCharacters($,0,ee);else{var ne=this.countSpaces();if(0!==ne)for(var ae=X/ne,de=0,fe=0;fe<this.message.length;fe++)" "===this.message[fe].char&&(de+=ae),cj.set(de,ee),this.message[fe].updatePosition(this.message[fe].localPosition.add(cj),$);else this.offsetCharacters($,0,ee)}}},{key:"clone",value:function clone(){var X=new uo(this.yLinePos,this.lineHeight,this.maxCharSize);X.nextChar3DPos=this.nextChar3DPos.clone(),X.align=this.align,X.endLine=this.endLine;for(var $=0;$<this.message.length;$++)X.message.push(this.message[$].clone());return X}}]),uo}(),bj=function(X){_inherits(Fv,X);var $=_createSuper(Fv);function Fv(X){var ee,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new kV({transparent:!0,opacity:1,visible:!1,side:2});return _classCallCheck(this,Fv),(ee=$.call(this,X,ne)).objectType="TextFrame",ee.charContainer=new ru,ee.add(ee.charContainer),ee.material.visible=!1,ee._geometryUserData=X.userData,ee.userData.textFrame={hexColor:null,opacity:1,visible:!0,text:"",fontSize:16,lineHeight:1.5,letterSpacing:1,fontFamily:"roboto_regular",textTransform:1,horizontalAlignment:1,verticalAlignment:1,LOD:16,maxLineSize:ee._geometryUserData.parameters.width,textOrigin:new wo(-.5*ee._geometryUserData.parameters.width,.5*ee._geometryUserData.parameters.height,0),textLines:[]},ee.createTextLine(),ee}return _createClass(Fv,[{key:"updateText",value:function(){var X=(0,de.Z)(et().mark((function _callee3(X){var $,ee,ne,ae,de,fe,Ue=this;return et().wrap((function _callee3$(je){for(;;)switch(je.prev=je.next){case 0:return this.clearText(),$=this.userData.textFrame,ee=$.fontFamily,je.next=4,lj.loadFont(ee);case 4:$.text=X,ne=$.textOrigin,ae=new Mu({visible:$.visible,transparent:!0,side:2}),de=X.split("\n"),fe=0,this.userData.textFrame.textLines=de.map((function(X,de){var je=new dj(fe,$.lineHeight,$.fontSize);return je.message=X.split("").map((function(X){var de={char:X,fontFamily:ee,letterSpacing:$.letterSpacing,fontSize:$.fontSize,LOD:16},fe=ae.clone();fe.color=$.hexColor,fe.opacity=$.opacity;var Ke=new lj(de,fe);return je.addChar3D(Ke,ne),Ue.charContainer.add(Ke),Ke})),fe+=je.maxCharSize*je.lineHeight,je})),this.textFullUpdate(),this.checkOverFlow();case 7:case"end":return je.stop()}}),_callee3,this)})));return function updateText($){return X.apply(this,arguments)}}()},{key:"clearText",value:function clearText(){for(var X=this.userData.textFrame.textLines;this.charContainer.children.length;){var $=this.charContainer.children[0];this.charContainer.remove($)}for(;X.length;)X.pop()}},{key:"raycast",value:function raycast(X,$){var ee=[];if(_get(_getPrototypeOf(Fv.prototype),"raycast",this).call(this,X,ee),ee.length>0)$.push(ee[0]);else for(var ne=[],ae=0,de=this.charContainer.children.length;ae<de;++ae)if(this.charContainer.children[ae]instanceof lj&&(X.intersectObject(this.charContainer.children[ae],!1,ne),ne.length>0))return ne[0].object=this,void $.push(ne[0])}},{key:"updateGeometry",value:function updateGeometry(X){var $,ee,ne,ae,de=this.userData,fe=this.geometry.userData,Ue=fe.parameters.width,je=fe.parameters.height,Ke=null!=(ee=null==($=X.parameters)?void 0:$.width)?ee:Ue,et=null!=(ae=null==(ne=X.parameters)?void 0:ne.height)?ae:je,tt=de.textFrame;_get(_getPrototypeOf(Fv.prototype),"updateGeometry",this).call(this,X),tt.maxLineSize=Ke,tt.textOrigin.set(-.5*Ke,.5*et,0),et!==je?(this.checkOverFlow(),this.checkCapacity()):Ke!==Ue&&(Ue<Ke?this.checkCapacity():Ue>Ke&&this.checkOverFlow())}},{key:"checkOverFlow",value:function checkOverFlow(){for(var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,$=this.userData,ee=$.textFrame.textOrigin,ne=$.textFrame.textLines,ae=X;ae<ne.length;ae++){ne[ae].updateYLinePos(this.getNewLinePosition(ae)),ne[ae].fullUpdate(ee);for(var de=[];ne[ae].checkOverFlow($.textFrame.maxLineSize);)ne[ae].containSpaceOverFlow()?de.unshift(ne[ae].getWord(ne[ae].message.length-1,-1)):de.unshift(ne[ae].popChar());if(de.length>0){void 0===ne[ae+1]?(ne[ae].isEndLine(!1),this.createTextLine()):ne[ae].endLine&&(this.createTextLine(ae+1),ne[ae].isEndLine(!1),ne[ae+1].isEndLine(!0));for(var fe=0,Ue=0;Ue<de.length;Ue+=1)for(var je=0;je<de[Ue].length;je+=1)ne[ae+1].addChar3D(de[Ue][je],ee,fe),fe+=1;ne[ae+1].fullUpdate(ee)}ne[ae].fullUpdate(ee)}this.textFullUpdate(X)}},{key:"checkCapacity",value:function checkCapacity(){for(var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,$=this.userData,ee=$.textFrame.textOrigin,ne=$.textFrame.maxLineSize,ae=$.textFrame.textLines,de=X;de<ae.length;de+=1)if(ae[de].updateYLinePos(this.getNewLinePosition(de)),ae[de].fullUpdate(ee),ae[de-1])for(;!ae[de-1].endLine;){var fe=void 0,Ue=ae[de-1].spaceLeft(ne);if(!(ae[de].wordSize(0,1)<=Ue)){ae[de].isEmpty()?(ae[de].endLine&&ae[de-1].isEndLine(!0),ae.splice(de,1),de-=1):(ae[de].updateYLinePos(this.getNewLinePosition(de)),ae[de].fullUpdate(ee));break}fe=ae[de].containSpace()?ae[de].getWord(0,1):ae[de].popChar(0);for(var je=0;je<fe.length;je+=1)fe[je]&&ae[de-1].addChar3D(fe[je],ee)}this.textFullUpdate(X)}},{key:"createTextLine",value:function createTextLine(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.userData.textFrame.textLines.length,$=this.userData.textFrame;$.textLines.splice(X,0,new dj(this.getNewLinePosition(X),$.lineHeight,$.fontSize))}},{key:"textFullUpdate",value:function textFullUpdate(){for(var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,$=this.userData.textFrame,ee=$.textLines,ne=this.getVerticalAlignmentOffSet(),ae=X;ae<ee.length;ae++)ee[ae].updateYLinePos(this.getNewLinePosition(ae)),ee[ae].fullUpdate($.textOrigin),ee[ae].alignText($.textOrigin,$.maxLineSize,$.horizontalAlignment,$.verticalAlignment,ne)}},{key:"getVerticalAlignmentOffSet",value:function getVerticalAlignmentOffSet(){switch(this.userData.textFrame.verticalAlignment){case 1:default:return 0;case 2:return this.getRemainingVerticalSpace()/2;case 3:return this.getRemainingVerticalSpace()}}},{key:"getRemainingVerticalSpace",value:function getRemainingVerticalSpace(){var X=this.userData.textFrame.textLines;return this.geometry.userData.parameters.height-this.getNewLinePosition(X.length)}},{key:"getNewLinePosition",value:function getNewLinePosition(X){for(var $=this.userData.textFrame.textLines,ee=0,ne=0;ne<X;ne+=1)ee+=$[ne].maxCharSize*$[ne].lineHeight;return ee}},{key:"updateColor",value:function updateColor(X){var $,ee=this.userData;ee.textFrame.hexColor=X;for(var ne=ee.textFrame.textLines,ae=0;ae<ne.length;ae++)for(var de=ne[ae].message,fe=0;fe<de.length;fe++){var Ue=de[fe].material;null!=($=Ue.color)&&$.isColor&&(Ue.color=X)}}},{key:"updateOpacity",value:function updateOpacity(X){var $=this.userData;$.textFrame.opacity=X;for(var ee=$.textFrame.textLines,ne=0;ne<ee.length;ne++)for(var ae=ee[ne].message,de=0;de<ae.length;de++){ae[de].material.opacity=X}}},{key:"updateVisible",value:function updateVisible(X){var $=this.userData;$.textFrame.visible=X;for(var ee=$.textFrame.textLines,ne=0;ne<ee.length;ne++)for(var ae=ee[ne].message,de=0;de<ae.length;de++){ae[de].material.visible=X}}},{key:"updateFontFamily",value:function(){var X=(0,de.Z)(et().mark((function _callee4(X){var $,ee,ne,ae,de;return et().wrap((function _callee4$(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.next=2,lj.loadFont(X);case 2:for($=this.userData.textFrame,ee=$.textLines,$.fontFamily=X,ne=0;ne<ee.length;ne++)for(ae=ee[ne].message,de=0;de<ae.length;de++)ae[de].updateFontFamily(X);this.textFullUpdate(),this.checkOverFlow(),this.checkCapacity();case 6:case"end":return fe.stop()}}),_callee4,this)})));return function updateFontFamily($){return X.apply(this,arguments)}}()},{key:"updateFontSize",value:function updateFontSize(X){var $=this.userData.textFrame,ee=$.textLines,ne=$.fontSize;$.fontSize=X;for(var ae=0;ae<ee.length;ae++)ee[ae].updateFontSize(X);this.textFullUpdate(),X>ne?this.checkOverFlow():X<ne&&this.checkCapacity()}},{key:"updateTextTransform",value:function(){var X=(0,de.Z)(et().mark((function _callee5(X){var $,ee,ne,ae,de,fe,Ue,je,Ke,tt,nt;return et().wrap((function _callee5$(et){for(;;)switch(et.prev=et.next){case 0:return $=this.userData.textFrame,et.next=3,lj.loadFont($.fontFamily);case 3:ee=$.textLines,et.t0=($.textTransform=X,X),et.next=2===et.t0?7:3===et.t0?9:11;break;case 7:for(ne=0;ne<ee.length;ne++)for(ae=ee[ne].message,de=0;de<ae.length;de++)ee[ne].message[de].updateChar(ae[de].char.toUpperCase());return et.abrupt("break",12);case 9:for(fe=0;fe<ee.length;fe++)for(Ue=ee[fe].message,je=0;je<Ue.length;je++)ee[fe].message[je].updateChar(Ue[je].char.toLowerCase());return et.abrupt("break",12);case 11:for(Ke=0;Ke<ee.length;Ke++)for(tt=ee[Ke].message,nt=0;nt<tt.length;nt++)ee[Ke].message[nt].updateChar(tt[nt].originalChar);case 12:this.textFullUpdate(),this.checkOverFlow(),this.checkCapacity();case 13:case"end":return et.stop()}}),_callee5,this)})));return function updateTextTransform($){return X.apply(this,arguments)}}()},{key:"updateLetterSpacing",value:function updateLetterSpacing(X){var $=this.userData,ee=$.textFrame.textLines;$.textFrame.letterSpacing=X;for(var ne=0;ne<ee.length;ne++)for(var ae=ee[ne].message,de=0;de<ae.length;de++)ae[de].updateLetterSpacing(X);this.textFullUpdate(),this.checkOverFlow(),this.checkCapacity()}},{key:"updateLOD",value:function updateLOD(X){var $=this.userData;$.textFrame.LOD=X;for(var ee=$.textFrame.textLines,ne=0;ne<ee.length;ne++);this.textFullUpdate(),this.checkOverFlow(),this.checkCapacity()}},{key:"updateLineHeight",value:function updateLineHeight(X){var $=this.userData,ee=$.textFrame.textLines;$.textFrame.lineHeight=X;for(var ne=0;ne<ee.length;ne++)ee[ne].updatelineHeight(X);this.textFullUpdate()}},{key:"updateVerticalAlignment",value:function updateVerticalAlignment(X){this.userData.textFrame.verticalAlignment=X,this.textFullUpdate()}},{key:"updateHorizontalAlignment",value:function updateHorizontalAlignment(X){this.userData.textFrame.horizontalAlignment=X,this.textFullUpdate()}},{key:"toJSON",value:function toJSON(X){var $=_get(_getPrototypeOf(Fv.prototype),"toJSON",this).call(this,X),ee=$.object;ee.objectType="TextFrame";var ne=this.userData.textFrame.textLines.map((function(X){var $=X.message.map((function(X){return{char:X.char,originalChar:X.originalChar,fontFamily:X.fontFamily,letterSpacing:X.letterSpacing,fontSize:X.fontSize,LOD:X.LOD}}));return{align:X.align,endLine:X.endLine,lineHeight:X.lineHeight,maxCharSize:X.maxCharSize,yLinePos:X.yLinePos,message:$}}));return ee.userData.textFrame.textLinesData=ne,$}},{key:"fromJSONasync",value:function(){var X=(0,de.Z)(et().mark((function _callee6(X){var $,ee,ne=this;return et().wrap((function _callee6$(ae){for(;;)switch(ae.prev=ae.next){case 0:if(_get(_getPrototypeOf(Fv.prototype),"fromJSON",this).call(this,X),void 0===X.userData){ae.next=7;break}return $=X.userData.textFrame,ae.next=4,lj.loadFont($.fontFamily);case 4:$.textOrigin=new wo($.textOrigin.x,$.textOrigin.y,$.textOrigin.z),ee=new Mu({color:$.hexColor,opacity:$.opacity,visible:$.visible,transparent:!0,side:2}),$.textLinesData&&($.textLines=$.textLinesData.map((function(X,ae){var de=new dj(Number(X.yLinePos),Number(X.lineHeight),Number(X.maxCharSize)),fe=X.message.map((function(X,fe){if(void 0===X.char){var Ue=$.textLines[ae].message[fe];if("geometries"in Ue){var je=Ue.geometries[0].userData.parameters;Object.assign(X,{LOD:je.lod,char:je.char,fontFamily:je.fontFamily,fontSize:je.fontSize,letterSpacing:je.letterSpacing,originalChar:je.char})}}var Ke={char:X.char,fontFamily:X.fontFamily,letterSpacing:Number(X.letterSpacing),fontSize:Number(X.fontSize),LOD:X.LOD},et=new lj(Ke,ee.clone());return de.addChar3D(et,$.textOrigin),ne.charContainer.add(et),et}));return de.message=fe,de})),this.userData.textFrame=$),this.textFullUpdate();case 7:return ae.abrupt("return",this);case 8:case"end":return ae.stop()}}),_callee6,this)})));return function fromJSONasync($){return X.apply(this,arguments)}}()},{key:"fromTextFrameData",value:function fromTextFrameData(X,$){if(void 0!==X.color){var ee=pr(X.color,$);this.updateColor(ee),this.updateOpacity(ee.a)}void 0!==X.alpha&&this.updateOpacity(X.alpha),void 0!==X.font&&this.updateFontFamily(X.font),void 0!==X.horizontalAlign&&this.updateHorizontalAlignment(X.horizontalAlign),void 0!==X.verticalAlign&&this.updateVerticalAlignment(X.verticalAlign),void 0!==X.textTransform&&this.updateTextTransform(X.textTransform),void 0!==X.fontSize&&this.updateFontSize(X.fontSize),void 0!==X.lineHeight&&this.updateLineHeight(X.lineHeight),void 0!==X.letterSpacing&&this.updateLetterSpacing(X.letterSpacing),void 0!==X.text&&""!==X.text&&this.updateText(X.text),(void 0!==X.width||void 0!==X.height)&&this.updateGeometry({parameters:{width:X.width,height:X.height}})}},{key:"fromState",value:function fromState(X,$){return _get(_getPrototypeOf(Fv.prototype),"fromState",this).call(this,X),this.fromTextFrameData(X,$),this}},{key:"convertToVector",value:function convertToVector(){var X=this.userData.textFrame,$=X.fontFamily,ee=X.hexColor,ne=new HH;ne.name="Text Shape";var ae,de=lj.fontCache[$],fe=(0,je.Z)(this.charContainer.children);try{var Ue=function _loop9(){var X=ae.value;X instanceof lj&&de.generateShapes(X.char,1).forEach((function($){var ae=(new AI).fromShape($);ae.applyScale(X.scale.x,X.scale.y);var de=lz.create({shape:ae}),fe=new kV({side:2});fe.color=ee;var Ue=new iH(de,fe);Ue.name=X.char,Ue.position.copy(X.position),Ue.rotation.copy(X.rotation),ne.attach(Ue)}))};for(fe.s();!(ae=fe.n()).done;)Ue()}catch(Ke){fe.e(Ke)}finally{fe.f()}return ne}}],[{key:"createFromState",value:function createFromState(X,$,ee){var ne=new Fv(EN.create({parameters:{width:$.width,height:$.height}})).fromState($,ee);return ne.uuid=X,ne}}]),Fv}($V),xj=bj;xj.VerticalAlign=bR,xj.HorizontalAlign=yR,xj.TextTransform=xR;var _j,Sj=function FT(X,$,ee){return ee=null!=X?tt(yt(X)):{},function OT(X,$,ee,ne){if($&&"object"==typeof $||"function"==typeof $){var ae,de=(0,je.Z)(vt($));try{var fe=function _loop(){var de=ae.value;!_t.call(X,de)&&de!==ee&&nt(X,de,{get:function get(){return $[de]},enumerable:!(ne=ct($,de))||ne.enumerable})};for(de.s();!(ae=de.n()).done;)fe()}catch(Ue){de.e(Ue)}finally{de.f()}}return X}(!$&&X&&X.__esModule?ee:nt(ee,"default",{value:X,enumerable:!0}),X)}(Bt());GN.then((function(X){_j=X}));var Ej=new Ds,Rj=new Ds,Hj=new Ds,Gj=new Mo,qj=new wo,Yj=new Ds,Qj=new Ds,$j=function(X){_inherits(po,X);var $=_createSuper(po);function po(X,ee,ne){var ae,de=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new MV;return _classCallCheck(this,po),(ae=$.call(this,null!=ne?ne:ee,de)).subdivPointer=X,ae.originalGeometry=ee,ae.subdividedGeometry=ne,ae.objectType="SubdivObject",ae.hiddenMatrixOld=new Ds,ae.smoothShading=!0,ae.matrixWorldRigid=new Ds,ae.castShadow=!0,ae.receiveShadow=!0,ae.forceComputeSize=!1,ae}return _createClass(po,[{key:"shallowClone",value:function shallowClone(X){return new $H(this.geometry,this.material).shallowCopy(this,X)}},{key:"toJSON",value:function toJSON(X){var $=_get(_getPrototypeOf(po.prototype),"toJSON",this).call(this,X);return $.object.objectType="SubdivObject",$}},{key:"buildFromStore",value:function buildFromStore(X){var $,ee,ne,ae=lH.build(X,this.subdivPointer,this.smoothShading,this.shearScale),de=ae.originalGeometry,fe=ae.subdividedGeometry,Ue=ae.subdivPointer;if(this.subdivPointer=Ue,void 0!==de&&(null==($=this.originalGeometry)||$.dispose(),this.originalGeometry=de),void 0!==fe&&(null==(ee=this.subdividedGeometry)||ee.dispose(),this.subdividedGeometry=null!=fe?fe:void 0),this.geometry=null!=(ne=this.subdividedGeometry)?ne:this.originalGeometry,this.cloner){var Ke,et=(0,je.Z)(this.cloner.children);try{for(et.s();!(Ke=et.n()).done;){Ke.value.geometry=this.geometry}}catch(tt){et.e(tt)}finally{et.f()}}X.width&&(this.geometry.userData.parameters={width:X.width,height:X.height,depth:X.depth})}},{key:"updateMesh",value:function updateMesh(){var X=arguments.length>0&&void 0!==arguments[0]&&arguments[0];lH.buildLevel(this.subdivPointer,!0,this.smoothShading,this.originalGeometry,X?this.shearScaleInv:void 0),this.subdividedGeometry&&lH.buildLevel(this.subdivPointer,!1,this.smoothShading,this.subdividedGeometry,X?this.shearScaleInv:void 0)}},{key:"updateTopology",value:function updateTopology(){var X;this.originalGeometry.dispose(),this.originalGeometry=lH.buildLevel(this.subdivPointer,!0,this.smoothShading),this.subdividedGeometry&&(this.subdividedGeometry.dispose(),this.subdividedGeometry=lH.buildLevel(this.subdivPointer,!1,this.smoothShading)),this.geometry=null!=(X=this.subdividedGeometry)?X:this.originalGeometry}},{key:"raycast",value:function raycast(X,$){var ee;this.geometry=this.originalGeometry,$V.prototype.raycast.call(this,X,$),this.geometry=null!=(ee=this.subdividedGeometry)?ee:this.originalGeometry}},{key:"updateMatrixWorldSVD",value:function updateMatrixWorldSVD(){var X=this.matrixWorld.elements,$=[[X[0],X[4],X[8]],[X[1],X[5],X[9]],[X[2],X[6],X[10]]],ee=(0,Sj.SVD)($),ne=ee.u,ae=ee.v,de=ee.q,fe=Ej.set(ne[0][0],ne[0][1],ne[0][2],0,ne[1][0],ne[1][1],ne[1][2],0,ne[2][0],ne[2][1],ne[2][2],0,0,0,0,1),Ue=Rj.set(ae[0][0],ae[0][1],ae[0][2],0,ae[1][0],ae[1][1],ae[1][2],0,ae[2][0],ae[2][1],ae[2][2],0,0,0,0,1),je=Hj.copy(Ue).transpose();this.shearScale=Yj.makeScale(de[0],de[1],de[2]).multiply(je).premultiply(Ue),this.shearScaleInv=Qj.copy(this.shearScale).invert(),this.matrixWorldRigid.multiplyMatrices(fe,je),de.every((function(X){return Math.abs(de[0]-X)<.01}))&&(this.shearScale=void 0,this.shearScaleInv=void 0)}},{key:"activateSVDCompensation",value:function activateSVDCompensation(){void 0!==this.shearScale&&(this.matrixAutoUpdate=!1,this.matrix.copy(this.matrixWorldRigid).copyPosition(this.matrixWorld),this.hiddenMatrixOld.copy(this.hiddenMatrix),this.hiddenMatrix.copy(this.parent.matrixWorld).invert())}},{key:"deactivateSVDCompensation",value:function deactivateSVDCompensation(){void 0!==this.shearScale&&(this.shearScale=void 0,this.shearScaleInv=void 0,this.matrixAutoUpdate=!0,this.hiddenMatrix.copy(this.hiddenMatrixOld))}},{key:"calcBoundingBox",value:function calcBoundingBox(){var X=this.originalGeometry;null===X.boundingSphere&&(X.boundingSphere=new _s);var $=X.attributes.position,ee=X.boundingSphere.center;Gj.setFromBufferAttribute($),Gj.getCenter(ee),X.boundingSphere.radius=ee.distanceTo(Gj.max),isNaN(X.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),Gj.getSize(qj);var ne={width:qj.x,height:qj.y,depth:qj.z};return this.geometry.userData.parameters=ne,ne}},{key:"updateBoundingBox",value:function updateBoundingBox(X){var $=this.originalGeometry;Gj.min.set(X[0],X[2],X[4]),Gj.max.set(X[1],X[3],X[5]),this.shearScaleInv&&(Gj.min.applyMatrix4(this.shearScaleInv),Gj.max.applyMatrix4(this.shearScaleInv)),null===$.boundingSphere&&($.boundingSphere=new _s);var ee=$.boundingSphere.center;Gj.getCenter(ee),$.boundingSphere.radius=ee.distanceTo(Gj.max),isNaN($.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this),Gj.getSize(qj);var ne={width:qj.x,height:qj.y,depth:qj.z};return this.geometry.userData.parameters=ne,ne}},{key:"freeSubdivPointer",value:function freeSubdivPointer(){this.subdivPointer&&(_j.free_bvh(this.subdivPointer),_j.free_subdivision_surface(this.subdivPointer),this.subdivPointer=0)}},{key:"updateGeometry",value:function updateGeometry(X){this.geometry.userData.scale||(this.geometry.userData.scale=Array(3)),this.geometry.userData.scale[0]=0===this.geometry.userData.parameters.width?1:X.parameters.width/this.geometry.userData.parameters.width,this.geometry.userData.scale[1]=0===this.geometry.userData.parameters.height?1:X.parameters.height/this.geometry.userData.parameters.height,this.geometry.userData.scale[2]=0===this.geometry.userData.parameters.depth?1:X.parameters.depth/this.geometry.userData.parameters.depth,lA.apply(void 0,[this.originalGeometry.attributes].concat((0,ae.Z)(this.geometry.userData.scale))),this.originalGeometry.attributes.position.needsUpdate=!0,this.originalGeometry.attributes.normal.needsUpdate=!0,this.subdividedGeometry&&(lA.apply(void 0,[this.subdividedGeometry.attributes].concat((0,ae.Z)(this.subdividedGeometry.userData.scale))),this.subdividedGeometry.attributes.position.needsUpdate=!0,this.subdividedGeometry.attributes.normal.needsUpdate=!0),this.geometry.userData.parameters=Ct({},X.parameters)}}],[{key:"createFromState",value:function createFromState(X,$,ee){var ne=lH.build($.geometry,void 0,!$.flatShading),ae=new po(ne.subdivPointer,ne.originalGeometry,ne.subdividedGeometry||void 0,uu($.material,ee));return ae.calcBoundingBox(),ae.freeSubdivPointer(),ae.uuid=X,ae.fromState($),ae}}]),po}($V);function lA(X,$,ee,ne){for(var ae,de,fe,Ue=X.position.array,je=X.normal.array,Ke=Ej.makeScale($,ee,ne).invert().elements,et=0,tt=Ue.length;et<tt;et+=3)Ue[et]*=$,Ue[et+1]*=ee,Ue[et+2]*=ne,ae=je[et],de=je[et+1],fe=je[et+2],je[et]=Ke[0]*ae+Ke[4]*de+Ke[8]*fe,je[et+1]=Ke[1]*ae+Ke[5]*de+Ke[9]*fe,je[et+2]=Ke[2]*ae+Ke[6]*de+Ke[10]*fe}function uA(X,$){void 0!==$.flatShading&&(X.flatShading=$.flatShading,X.needsUpdate=!0),void 0!==$.wireframe&&(X.wireframe=$.wireframe),void 0!==$.side&&(0===$.side?X.side=0:1===$.side?X.side=1:X.side=2)}function fA(X,$,ee){var ne;if("SubdivGeometry"===$.geometry.type)ne=$j.createFromState(X,$,ee);else{var ae="BooleanGeometry"===$.geometry.type?new Wu:Fp($.geometry),de="materials"in $?function B1(X,$){return X.map((function(X){return uu(X,$)}))}($.materials,ee):uu($.material,ee);CR.is2DParametricMesh(ae.userData.type)?ne=new QH(ae,de):"VectorGeometry"===(null==ae?void 0:ae.userData.type)?ne=new iH(ae,de):"NonParametricGeometry"===$.geometry.type?ne=new $H(ae,de):"BooleanGeometry"===$.geometry.type?(ne=new SH(void 0,de)).booleanOp=$.geometry.operation:ne=new KH(ae,de),ne.uuid=X,ne.fromState($)}return function rU(X,$){if(Array.isArray(X.material)){var ee,ne=(0,je.Z)(X.material);try{for(ne.s();!(ee=ne.n()).done;)uA(ee.value,$)}catch(ae){ne.e(ae)}finally{ne.f()}}else uA(X.material,$);"SubdivObject"===X.objectType&&void 0!==$.flatShading&&(X.material.flatShading=!1,X.smoothShading=!$.flatShading,X.updateMesh())}(ne,$),ne}function pA(X,$,ee){if(!ee.userData.layers)return!1;var ne=!1,ae=ee.userData.layers.getLayersOfType("transmission");return ae.length>0?($.layers.set(3),ne=!0,void 0!==X&&ae.forEach((function($){return function nU(X,$){$.uniforms["f".concat($.id,"_transmissionSamplerMap")].value=X.texture,$.uniforms["f".concat($.id,"_transmissionDepthMap")].value=X.depthTexture}(X,$)}))):$.layers.set(0),ne}function gA(X,$){"material"in X&&function iU(X,$){(function ZS(X){return Array.isArray(X)?X:[X]})(X).forEach((function(X){$.isSharedMaterial(X)||X.dispose()}))}(X.material,$),"geometry"in X&&X.geometry.dispose()}var eG=new wo,uG=function(X){_inherits(zv,X);var $=_createSuper(zv);function zv(X,ee){var ne;return _classCallCheck(this,zv),(ne=$.call(this)).objectType="Scene",ne.alpha=1,ne.backupFog=new Qp(16777215,.1,2e3),ne.fogUseBGColor=!1,ne.wireframeState=!1,ne.needsTransmissionDirty=!0,ne._needsTransmission=!1,ne._color=new Ma(1,0,0),ne.bgColor=new Ma(1,1,1),ne.entityByUuid={},ne.ambientLight=new yx(13882323,8553090,.75),ne.ambientLight.name="Default Ambient Light",ne.personalCamera=ne.createPersonalCamera(),ne.activeCamera=ne.personalCamera,ne.sharedAssetManager=ee,ne.init(X,ee),ne}return _createClass(zv,[{key:"needsTransmission",value:function needsTransmission(X){return this.needsTransmissionDirty&&(this._needsTransmission=function mA(X,$){var ee=!1;return $.traverseEntity((function($){if($ instanceof $V)if(Array.isArray($.material))for(var ne=0;ne<$.material.length;ne++)pA(X,$,$.material[ne])&&(ee=!0);else pA(X,$,$.material)&&(ee=!0)})),ee}(X,this),void 0!==X&&(this.needsTransmissionDirty=!1)),this._needsTransmission}},{key:"find",value:function find(X){if(""!==X&&void 0!==X){var $=this.entityByUuid[X];return void 0===$?this.getObjectByProperty("uuid",X):$}}},{key:"color",get:function get(){return this._color},set:function set(X){!0===this.fogUseBGColor&&this.backupFog.color.copy(X),this._color.copy(X)}},{key:"enableFog",get:function get(){return null!==this.fog},set:function set(X){this.fog=!0===X?this.backupFog:null}},{key:"init",value:function init(X,$){if(this.createChildrenObjects(X.objects,this,$),this.personalCamera.removeFromParent(),this.add(this.personalCamera),this.ambientLight.removeFromParent(),this.add(this.ambientLight),this.setBackgroundColor(pr(X.backgroundColor,$)),this.updateFog(X.fog,$),this.updateAmbientLight(X.environment.ambientLight,$),this.activeCamera=this.personalCamera,null!==X.publish.playCamera){var ee=this.find(X.publish.playCamera);ee instanceof VH&&this.switchActiveCamera(ee)}this.traverse((function(X){FV(X)&&X.recomputeBoolean()}))}},{key:"clearScene",value:function clearScene(X){this.traverseEntity((function($){gA($,X)}));var $,ee=(0,je.Z)(this.children);try{for(ee.s();!($=ee.n()).done;){var ne=$.value;ZV(ne)&&ne.removeFromParent()}}catch(ae){ee.e(ae)}finally{ee.f()}}},{key:"resetAfterClear",value:function resetAfterClear(X,$){this.init(X,$)}},{key:"createPersonalCamera",value:function createPersonalCamera(){var X=VH.createFromState(zv.PERSONAL_CAMERA_ID,At(Ct({},BR.defaultData),{name:"Personal Camera"}));return X.enableHelper=!1,X.objectHelper.visible=!1,delete X.isEntity,this.registerObjectCreatedInLegacy(X),X}},{key:"raycast",value:function raycast(X){var $=[];return function n(ee){var ne,ae=(0,je.Z)(ee.children);try{for(ae.s();!(ne=ae.n()).done;){var de=ne.value;ZV(de)&&!de.raycastLock&&de.visible&&((NV(de)||UV(de)&&de.enableHelper&&de.objectHelper.parent)&&X.intersectObject(de,!1,$),n(de))}}catch(fe){ae.e(fe)}finally{ae.f()}}(this),$}},{key:"traverseEntity",value:function traverseEntity(X){var $,ee=(0,je.Z)(this.children);try{for(ee.s();!($=ee.n()).done;){var ne=$.value;ZV(ne)&&ne.traverseEntity(X)}}catch(ae){ee.e(ae)}finally{ee.f()}}},{key:"updateFog",value:function updateFog(X,$){this.enableFog=X.enabled,this.fogUseBGColor=X.useBackgroundColor,X.useBackgroundColor?this.backupFog.color.set(this.bgColor):this.backupFog.color=pr(X.color,$),this.backupFog.near=X.near,this.backupFog.far=X.far}},{key:"toJSON",value:function toJSON(X){return{}}},{key:"fromJSON",value:function fromJSON(X){return this}},{key:"dispose",value:function dispose(){this.clearScene(this.sharedAssetManager),this.sharedAssetManager.dispose()}},{key:"updateAmbientLight",value:function updateAmbientLight(X,$){F1(this.ambientLight,X,$),void 0!==X.groundColor&&(this.ambientLight.groundColor=pr(X.groundColor,$)),void 0!==X.enabled&&(this.ambientLight.visible=X.enabled)}},{key:"switchActiveCamera",value:function switchActiveCamera(X){this.activeCamera!==this.personalCamera&&(this.activeCamera.enableHelper=!0),this.activeCamera=X,X.enableHelper=!1}},{key:"setBackgroundColor",value:function setBackgroundColor(X){this.bgColor=X,this.alpha=X.a}},{key:"createChildrenObjects",value:function createChildrenObjects(X,$,ee){var ne,ae=(0,je.Z)(X);try{for(ae.s();!(ne=ae.n()).done;){var de=ne.value;this.createChildObject(de.id,de.data,de.children,$,ee)}}catch(fe){ae.e(fe)}finally{ae.f()}}},{key:"registerObjectCreatedInLegacy",value:function registerObjectCreatedInLegacy(X){this.entityByUuid[X.uuid]=X}},{key:"unregisterObject",value:function unregisterObject(X){delete this.entityByUuid[X.uuid];var $,ee=(0,je.Z)(X.children);try{for(ee.s();!($=ee.n()).done;){var ne=$.value;this.unregisterObject(ne)}}catch(ae){ee.e(ae)}finally{ee.f()}}},{key:"createChildObject",value:function createChildObject(X,$,ee,ne,ae){var de=function dA(X,$,ee){return"Mesh"===$.type?fA(X,$,ee):"TextFrame"===$.type?xj.createFromState(X,$,ee):"Empty"===$.type?HH.createFromState(X,$):"PointLight"===$.type?GH.createFromState(X,$,ee):"SpotLight"===$.type?JH.createFromState(X,$,ee):"DirectionalLight"===$.type?jH.createFromState(X,$,ee):qP.is($.type)?VH.createFromState(X,$):(console.error($),new HH)}(X,$,ae);return de&&(this.entityByUuid[X]=de,ne.add(de),FV(ne)&&NV(de)&&(de.prevBooleanObjectParent=ne),this.createChildrenObjects(ee,de,ae)),de}},{key:"getCenter",value:function getCenter(X){for(var $=[],ee=0,ne=X.length;ee<ne;++ee){var de=X[ee],fe=de.id,Ue=de.recursive,je=this.find(fe),Ke=Ue?je.recursiveBBox:je.singleBBox;$.push.apply($,(0,ae.Z)(Ke.vertices))}var et=new Mo;return et.setFromPoints($),et.getCenter(eG),eG}},{key:"copyMatrixWorld",value:function copyMatrixWorld(X,$){if(null!==X){var ee=this.find(X);ee?$.copy(ee.matrixWorld):$.identity()}else $.identity()}},{key:"copyParentMatrixWorld",value:function copyParentMatrixWorld(X,$){var ee;if(null!==X){var ne=null==(ee=this.find(X))?void 0:ee.parent;ne?$.copy(ne.matrixWorld):$.identity()}else $.identity()}},{key:"traverseMaterial",value:function traverseMaterial(X){this.traverseEntity((function($){if($ instanceof $V)if(Array.isArray($.material))for(var ee=0;ee<$.material.length;ee++)X($.material[ee]);else X($.material)}))}},{key:"updateCanvasSize",value:function updateCanvasSize(X,$){var ee,ne;this.activeCamera.setViewplaneSize(X,$),X>=$?(ee=$/X,ne=1):(ee=1,ne=X/$),this.traverseMaterial((function(X){X.layersList.getLayersOfType("transmission").forEach((function(X){X.uniforms["f".concat(X.id,"_aspectRatio")].value.x=ee,X.uniforms["f".concat(X.id,"_aspectRatio")].value.y=ne}))}))}}]),zv}(JV(nv)),dG=uG;dG.PERSONAL_CAMERA_ID="f23858d0-4a3b-4bd8-8173-66ed0af7f6fb-personalCamera";var fG=0,pG=1,vG="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",mG="#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;\n#if PASS == 1\nuniform vec4 kernel64[32];\n#else\nuniform vec4 kernel16[8];\n#endif\nvarying vec2 vUv;void main(){\n#ifdef FOREGROUND\nvec2 CoCNearFar=texture2D(cocBuffer,vUv).rg;float CoC=CoCNearFar.r*scale;\n#else\nfloat CoC=texture2D(cocBuffer,vUv).g*scale;\n#endif\nif(CoC==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{\n#ifdef FOREGROUND\nvec2 step=texelSize*max(CoC,CoCNearFar.g*scale);\n#else\nvec2 step=texelSize*CoC;\n#endif\n#if PASS == 1\nvec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;\n#else\nvec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;\n#endif\n}}",gG=function(X){_inherits(Xp,X);var $=_createSuper(Xp);function Xp(){var X,ee=arguments.length>0&&void 0!==arguments[0]&&arguments[0],ne=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return _classCallCheck(this,Xp),(X=$.call(this,{name:"BokehMaterial",defines:{PASS:ee?"2":"1"},uniforms:{kernel64:new g_(null),kernel16:new g_(null),inputBuffer:new g_(null),cocBuffer:new g_(null),texelSize:new g_(new va),scale:new g_(1)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:mG,vertexShader:vG})).toneMapped=!1,ne&&(X.defines.FOREGROUND="1"),X.generateKernel(),X}return _createClass(Xp,[{key:"inputBuffer",set:function set(X){this.uniforms.inputBuffer.value=X}},{key:"setInputBuffer",value:function setInputBuffer(X){this.uniforms.inputBuffer.value=X}},{key:"cocBuffer",set:function set(X){this.uniforms.cocBuffer.value=X}},{key:"setCoCBuffer",value:function setCoCBuffer(X){this.uniforms.cocBuffer.value=X}},{key:"scale",get:function get(){return this.uniforms.scale.value},set:function set(X){this.uniforms.scale.value=X}},{key:"getScale",value:function getScale(X){return this.uniforms.scale.value=X}},{key:"setScale",value:function setScale(X){this.uniforms.scale.value=X}},{key:"generateKernel",value:function generateKernel(){for(var X=new Float32Array(128),$=new Float32Array(32),ee=0,ne=0,ae=0;ae<80;++ae){var de=2.39996323*ae,fe=Math.sqrt(ae)/Math.sqrt(80),Ue=fe*Math.cos(de),je=fe*Math.sin(de);ae%5===0?($[ne++]=Ue,$[ne++]=je):(X[ee++]=Ue,X[ee++]=je)}for(var Ke=[],et=[],tt=0;tt<128;)Ke.push(new to(X[tt++],X[tt++],X[tt++],X[tt++]));for(var nt=0;nt<32;)et.push(new to($[nt++],$[nt++],$[nt++],$[nt++]));this.uniforms.kernel64.value=Ke,this.uniforms.kernel16.value=et}},{key:"setTexelSize",value:function setTexelSize(X,$){this.uniforms.texelSize.value.set(X,$)}},{key:"setSize",value:function setSize(X,$){this.uniforms.texelSize.value.set(1/X,1/$)}}]),Xp}($h);function vA(X,$,ee){return X*($-ee)-$}function Wv(X,$,ee){return Math.min(Math.max((X+$)/($-ee),0),1)}var yG=function(X){_inherits(aU,X);var $=_createSuper(aU);function aU(X){var ee;return _classCallCheck(this,aU),(ee=$.call(this,{name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new g_(null),focusDistance:new g_(0),focusRange:new g_(0),cameraNear:new g_(.3),cameraFar:new g_(1e3)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#include <common>\n#include <packing>\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}void main(){float depth=readDepth(vUv);\n#ifdef PERSPECTIVE_CAMERA\nfloat viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);\n#else\nfloat linearDepth=depth;\n#endif\nfloat signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}",vertexShader:vG})).toneMapped=!1,ee.uniforms.focalLength=ee.uniforms.focusRange,ee.adoptCameraSettings(X),ee}return _createClass(aU,[{key:"near",get:function get(){return this.uniforms.cameraNear.value}},{key:"far",get:function get(){return this.uniforms.cameraFar.value}},{key:"depthBuffer",set:function set(X){this.uniforms.depthBuffer.value=X}},{key:"depthPacking",set:function set(X){this.defines.DEPTH_PACKING=X.toFixed(0),this.needsUpdate=!0}},{key:"setDepthBuffer",value:function setDepthBuffer(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kr;this.depthBuffer=X,this.depthPacking=$}},{key:"focusDistance",get:function get(){return this.uniforms.focusDistance.value},set:function set(X){this.uniforms.focusDistance.value=X}},{key:"worldFocusDistance",get:function get(){return-vA(this.focusDistance,this.near,this.far)},set:function set(X){this.focusDistance=Wv(-X,this.near,this.far)}},{key:"getFocusDistance",value:function getFocusDistance(X){this.uniforms.focusDistance.value=X}},{key:"setFocusDistance",value:function setFocusDistance(X){this.uniforms.focusDistance.value=X}},{key:"focalLength",get:function get(){return this.focusRange},set:function set(X){this.focusRange=X}},{key:"focusRange",get:function get(){return this.uniforms.focusRange.value},set:function set(X){this.uniforms.focusRange.value=X}},{key:"worldFocusRange",get:function get(){return-vA(this.focusRange,this.near,this.far)},set:function set(X){this.focusRange=Wv(-X,this.near,this.far)}},{key:"getFocalLength",value:function getFocalLength(X){return this.focusRange}},{key:"setFocalLength",value:function setFocalLength(X){this.focusRange=X}},{key:"adoptCameraSettings",value:function adoptCameraSettings(X){X&&(this.uniforms.cameraNear.value=X.near,this.uniforms.cameraFar.value=X.far,X instanceof cd?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}}]),aU}($h),bG="#include <common>\n#include <dithering_pars_fragment>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nvarying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;\n#include <encodings_fragment>\n#include <dithering_fragment>\n}",xG="uniform vec2 texelSize;uniform vec2 halfTexelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize*vec2(kernel)+halfTexelSize)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",_G=function(X){_inherits(xA,X);var $=_createSuper(xA);function xA(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new va;return _classCallCheck(this,xA),(X=$.call(this,{name:"KawaseBlurMaterial",uniforms:{inputBuffer:new g_(null),texelSize:new g_(new va),halfTexelSize:new g_(new va),kernel:new g_(0),scale:new g_(1)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:bG,vertexShader:xG})).toneMapped=!1,X.setTexelSize(ee.x,ee.y),X}return _createClass(xA,[{key:"inputBuffer",set:function set(X){this.uniforms.inputBuffer.value=X}},{key:"setInputBuffer",value:function setInputBuffer(X){this.inputBuffer=X}},{key:"scale",get:function get(){return this.uniforms.scale.value},set:function set(X){this.uniforms.scale.value=X}},{key:"getScale",value:function getScale(){return this.uniforms.scale.value}},{key:"setScale",value:function setScale(X){this.uniforms.scale.value=X}},{key:"getKernel",value:function getKernel(){return null}},{key:"kernel",get:function get(){return this.uniforms.kernel.value},set:function set(X){this.uniforms.kernel.value=X}},{key:"setKernel",value:function setKernel(X){this.kernel=X}},{key:"setTexelSize",value:function setTexelSize(X,$){this.uniforms.texelSize.value.set(X,$),this.uniforms.halfTexelSize.value.set(X,$).multiplyScalar(.5)}},{key:"setSize",value:function setSize(X,$){var ee=this.uniforms;ee.texelSize.value.set(1/X,1/$),ee.halfTexelSize.value.copy(ee.texelSize.value).multiplyScalar(.5)}}]),xA}($h),wG=function(X){_inherits(uU,X);var $=_createSuper(uU);function uU(){var X;return _classCallCheck(this,uU),(X=$.call(this,{name:"CopyMaterial",uniforms:{inputBuffer:new g_(null),opacity:new g_(1)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:"#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;\n#include <encodings_fragment>\n}",vertexShader:vG})).toneMapped=!1,X}return _createClass(uU,[{key:"inputBuffer",set:function set(X){this.uniforms.inputBuffer.value=X}},{key:"setInputBuffer",value:function setInputBuffer(X){this.uniforms.inputBuffer.value=X}},{key:"getOpacity",value:function getOpacity(X){return this.uniforms.opacity.value}},{key:"setOpacity",value:function setOpacity(X){this.uniforms.opacity.value=X}}]),uU}($h),SG="varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\n#if EDGE_DETECTION_MODE == 1\n#include <common>\n#endif\n#if EDGE_DETECTION_MODE == 0 || PREDICATION_MODE == 1\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}vec3 gatherNeighbors(){float p=readDepth(vUv);float pLeft=readDepth(vUv0);float pTop=readDepth(vUv1);return vec3(p,pLeft,pTop);}\n#elif PREDICATION_MODE == 2\nuniform sampler2D predicationBuffer;vec3 gatherNeighbors(){float p=texture2D(predicationBuffer,vUv).r;float pLeft=texture2D(predicationBuffer,vUv0).r;float pTop=texture2D(predicationBuffer,vUv1).r;return vec3(p,pLeft,pTop);}\n#endif\n#if PREDICATION_MODE != 0\nvec2 calculatePredicatedThreshold(){vec3 neighbours=gatherNeighbors();vec2 delta=abs(neighbours.xx-neighbours.yz);vec2 edges=step(PREDICATION_THRESHOLD,delta);return PREDICATION_SCALE*EDGE_THRESHOLD*(1.0-PREDICATION_STRENGTH*edges);}\n#endif\n#if EDGE_DETECTION_MODE != 0\nuniform sampler2D inputBuffer;\n#endif\nvoid main(){\n#if EDGE_DETECTION_MODE == 0\nconst vec2 threshold=vec2(DEPTH_THRESHOLD);\n#elif PREDICATION_MODE != 0\nvec2 threshold=calculatePredicatedThreshold();\n#else\nconst vec2 threshold=vec2(EDGE_THRESHOLD);\n#endif\n#if EDGE_DETECTION_MODE == 0\nvec3 neighbors=gatherNeighbors();vec2 delta=abs(neighbors.xx-vec2(neighbors.y,neighbors.z));vec2 edges=step(threshold,delta);if(dot(edges,vec2(1.0))==0.0){discard;}gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 1\nfloat l=linearToRelativeLuminance(texture2D(inputBuffer,vUv).rgb);float lLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUv0).rgb);float lTop=linearToRelativeLuminance(texture2D(inputBuffer,vUv1).rgb);vec4 delta;delta.xy=abs(l-vec2(lLeft,lTop));vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}float lRight=linearToRelativeLuminance(texture2D(inputBuffer,vUv2).rgb);float lBottom=linearToRelativeLuminance(texture2D(inputBuffer,vUv3).rgb);delta.zw=abs(l-vec2(lRight,lBottom));vec2 maxDelta=max(delta.xy,delta.zw);float lLeftLeft=linearToRelativeLuminance(texture2D(inputBuffer,vUv4).rgb);float lTopTop=linearToRelativeLuminance(texture2D(inputBuffer,vUv5).rgb);delta.zw=abs(vec2(lLeft,lTop)-vec2(lLeftLeft,lTopTop));maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges.xy*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#elif EDGE_DETECTION_MODE == 2\nvec4 delta;vec3 c=texture2D(inputBuffer,vUv).rgb;vec3 cLeft=texture2D(inputBuffer,vUv0).rgb;vec3 t=abs(c-cLeft);delta.x=max(max(t.r,t.g),t.b);vec3 cTop=texture2D(inputBuffer,vUv1).rgb;t=abs(c-cTop);delta.y=max(max(t.r,t.g),t.b);vec2 edges=step(threshold,delta.xy);if(dot(edges,vec2(1.0))==0.0){discard;}vec3 cRight=texture2D(inputBuffer,vUv2).rgb;t=abs(c-cRight);delta.z=max(max(t.r,t.g),t.b);vec3 cBottom=texture2D(inputBuffer,vUv3).rgb;t=abs(c-cBottom);delta.w=max(max(t.r,t.g),t.b);vec2 maxDelta=max(delta.xy,delta.zw);vec3 cLeftLeft=texture2D(inputBuffer,vUv4).rgb;t=abs(c-cLeftLeft);delta.z=max(max(t.r,t.g),t.b);vec3 cTopTop=texture2D(inputBuffer,vUv5).rgb;t=abs(c-cTopTop);delta.w=max(max(t.r,t.g),t.b);maxDelta=max(maxDelta.xy,delta.zw);float finalDelta=max(maxDelta.x,maxDelta.y);edges*=step(finalDelta,LOCAL_CONTRAST_ADAPTATION_FACTOR*delta.xy);gl_FragColor=vec4(edges,0.0,1.0);\n#endif\n}",kG="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;\n#if EDGE_DETECTION_MODE != 0\nvarying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;\n#endif\nvoid main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,0.0);vUv1=vUv+texelSize*vec2(0.0,-1.0);\n#if EDGE_DETECTION_MODE != 0\nvUv2=vUv+texelSize*vec2(1.0,0.0);vUv3=vUv+texelSize*vec2(0.0,1.0);vUv4=vUv+texelSize*vec2(-2.0,0.0);vUv5=vUv+texelSize*vec2(0.0,-2.0);\n#endif\ngl_Position=vec4(position.xy,1.0,1.0);}",CG=2,AG=0,MG=1,EG=function(X){_inherits(pU,X);var $=_createSuper(pU);function pU(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new va,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:CG;return _classCallCheck(this,pU),(X=$.call(this,{name:"EdgeDetectionMaterial",defines:{LOCAL_CONTRAST_ADAPTATION_FACTOR:"2.0",EDGE_THRESHOLD:"0.1",DEPTH_THRESHOLD:"0.01",PREDICATION_MODE:"0",PREDICATION_THRESHOLD:"0.01",PREDICATION_SCALE:"2.0",PREDICATION_STRENGTH:"1.0",DEPTH_PACKING:"0"},uniforms:{inputBuffer:new g_(null),depthBuffer:new g_(null),predicationBuffer:new g_(null),texelSize:new g_(ee)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:SG,vertexShader:kG})).toneMapped=!1,X.edgeDetectionMode=ne,X}return _createClass(pU,[{key:"depthBuffer",set:function set(X){this.uniforms.depthBuffer.value=X}},{key:"depthPacking",set:function set(X){this.defines.DEPTH_PACKING=X.toFixed(0),this.needsUpdate=!0}},{key:"setDepthBuffer",value:function setDepthBuffer(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kr;this.depthBuffer=X,this.depthPacking=$}},{key:"edgeDetectionMode",get:function get(){return Number(this.defines.EDGE_DETECTION_MODE)},set:function set(X){this.defines.EDGE_DETECTION_MODE=X.toFixed(0),this.needsUpdate=!0}},{key:"getEdgeDetectionMode",value:function getEdgeDetectionMode(){return this.edgeDetectionMode}},{key:"setEdgeDetectionMode",value:function setEdgeDetectionMode(X){this.edgeDetectionMode=X}},{key:"localContrastAdaptationFactor",get:function get(){return Number(this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR)},set:function set(X){this.defines.LOCAL_CONTRAST_ADAPTATION_FACTOR=X.toFixed("6"),this.needsUpdate=!0}},{key:"getLocalContrastAdaptationFactor",value:function getLocalContrastAdaptationFactor(){return this.localContrastAdaptationFactor}},{key:"setLocalContrastAdaptationFactor",value:function setLocalContrastAdaptationFactor(X){this.localContrastAdaptationFactor=X}},{key:"edgeDetectionThreshold",get:function get(){return Number(this.defines.EDGE_THRESHOLD)},set:function set(X){this.defines.EDGE_THRESHOLD=X.toFixed("6"),this.defines.DEPTH_THRESHOLD=(.1*X).toFixed("6"),this.needsUpdate=!0}},{key:"getEdgeDetectionThreshold",value:function getEdgeDetectionThreshold(){return this.edgeDetectionThreshold}},{key:"setEdgeDetectionThreshold",value:function setEdgeDetectionThreshold(X){this.edgeDetectionThreshold=X}},{key:"predicationMode",get:function get(){return Number(this.defines.PREDICATION_MODE)},set:function set(X){this.defines.PREDICATION_MODE=X.toFixed(0),this.needsUpdate=!0}},{key:"getPredicationMode",value:function getPredicationMode(){return this.predicationMode}},{key:"setPredicationMode",value:function setPredicationMode(X){this.predicationMode=X}},{key:"predicationBuffer",set:function set(X){this.uniforms.predicationBuffer.value=X}},{key:"setPredicationBuffer",value:function setPredicationBuffer(X){this.uniforms.predicationBuffer.value=X}},{key:"predicationThreshold",get:function get(){return Number(this.defines.PREDICATION_THRESHOLD)},set:function set(X){this.defines.PREDICATION_THRESHOLD=X.toFixed("6"),this.needsUpdate=!0}},{key:"getPredicationThreshold",value:function getPredicationThreshold(){return this.predicationThreshold}},{key:"setPredicationThreshold",value:function setPredicationThreshold(X){this.predicationThreshold=X}},{key:"predicationScale",get:function get(){return Number(this.defines.PREDICATION_SCALE)},set:function set(X){this.defines.PREDICATION_SCALE=X.toFixed("6"),this.needsUpdate=!0}},{key:"getPredicationScale",value:function getPredicationScale(){return this.predicationScale}},{key:"setPredicationScale",value:function setPredicationScale(X){this.predicationScale=X}},{key:"predicationStrength",get:function get(){return Number(this.defines.PREDICATION_STRENGTH)},set:function set(X){this.defines.PREDICATION_STRENGTH=X.toFixed("6"),this.needsUpdate=!0}},{key:"getPredicationStrength",value:function getPredicationStrength(){return this.predicationStrength}},{key:"setPredicationStrength",value:function setPredicationStrength(X){this.predicationStrength=X}},{key:"setSize",value:function setSize(X,$){this.uniforms.texelSize.value.set(1/X,1/$)}}]),pU}($h),TG={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},PG=function(X){_inherits(jv,X);var $=_createSuper(jv);function jv(X,ee,ne,ae){var de,fe=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return _classCallCheck(this,jv),(de=$.call(this,{name:"EffectMaterial",defines:{THREE_REVISION:Ht.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new g_(null),depthBuffer:new g_(null),resolution:new g_(new va),texelSize:new g_(new va),cameraNear:new g_(.3),cameraFar:new g_(1e3),aspect:new g_(1),time:new g_(0)},blending:0,depthWrite:!1,depthTest:!1,dithering:fe})).toneMapped=!1,X&&de.setShaderParts(X),ee&&de.setDefines(ee),ne&&de.setUniforms(ne),de.adoptCameraSettings(ae),de}return _createClass(jv,[{key:"inputBuffer",set:function set(X){this.uniforms.inputBuffer.value=X}},{key:"setInputBuffer",value:function setInputBuffer(X){this.uniforms.inputBuffer.value=X}},{key:"depthBuffer",get:function get(){return this.uniforms.depthBuffer.value},set:function set(X){this.uniforms.depthBuffer.value=X}},{key:"depthPacking",get:function get(){return Number(this.defines.DEPTH_PACKING)},set:function set(X){this.defines.DEPTH_PACKING=X.toFixed(0),this.needsUpdate=!0}},{key:"setDepthBuffer",value:function setDepthBuffer(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kr;this.depthBuffer=X,this.depthPacking=$}},{key:"setShaderParts",value:function setShaderParts(X){return this.fragmentShader="#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#define packFloatToRGBA(v) packDepthToRGBA(v)\n#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef GL_FRAGMENT_PRECISION_HIGH\nuniform highp sampler2D depthBuffer;\n#else\nuniform mediump sampler2D depthBuffer;\n#endif\nuniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;\n#if THREE_REVISION >= 137\nvec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}\n#endif\nfloat readDepth(const in vec2 uv){\n#if DEPTH_PACKING == 3201\nreturn unpackRGBAToDepth(texture2D(depthBuffer,uv));\n#else\nreturn texture2D(depthBuffer,uv).r;\n#endif\n}float getViewZ(const in float depth){\n#ifdef PERSPECTIVE_CAMERA\nreturn perspectiveDepthToViewZ(depth,cameraNear,cameraFar);\n#else\nreturn orthographicDepthToViewZ(depth,cameraNear,cameraFar);\n#endif\n}FRAGMENT_HEADvoid main(){FRAGMENT_MAIN_UVvec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGEgl_FragColor=color0;\n#ifdef ENCODE_OUTPUT\n#include <encodings_fragment>\n#endif\n#include <dithering_fragment>\n}".replace(TG.FRAGMENT_HEAD,X.get(TG.FRAGMENT_HEAD)).replace(TG.FRAGMENT_MAIN_UV,X.get(TG.FRAGMENT_MAIN_UV)).replace(TG.FRAGMENT_MAIN_IMAGE,X.get(TG.FRAGMENT_MAIN_IMAGE)),this.vertexShader="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEADvoid main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORTgl_Position=vec4(position.xy,1.0,1.0);}".replace(TG.VERTEX_HEAD,X.get(TG.VERTEX_HEAD)).replace(TG.VERTEX_MAIN_SUPPORT,X.get(TG.VERTEX_MAIN_SUPPORT)),this.needsUpdate=!0,this}},{key:"setDefines",value:function setDefines(X){var $,ee=(0,je.Z)(X.entries());try{for(ee.s();!($=ee.n()).done;){var ne=$.value;this.defines[ne[0]]=ne[1]}}catch(ae){ee.e(ae)}finally{ee.f()}return this.needsUpdate=!0,this}},{key:"setUniforms",value:function setUniforms(X){var $,ee=(0,je.Z)(X.entries());try{for(ee.s();!($=ee.n()).done;){var ne=$.value;this.uniforms[ne[0]]=ne[1]}}catch(ae){ee.e(ae)}finally{ee.f()}return this}},{key:"setExtensions",value:function setExtensions(X){this.extensions={};var $,ee=(0,je.Z)(X);try{for(ee.s();!($=ee.n()).done;){var ne=$.value;this.extensions[ne]=!0}}catch(ae){ee.e(ae)}finally{ee.f()}return this}},{key:"encodeOutput",get:function get(){return void 0!==this.defines.ENCODE_OUTPUT},set:function set(X){this.encodeOutput!==X&&(X?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}},{key:"isOutputEncodingEnabled",value:function isOutputEncodingEnabled(X){return this.encodeOutput}},{key:"setOutputEncodingEnabled",value:function setOutputEncodingEnabled(X){this.encodeOutput=X}},{key:"time",get:function get(){return this.uniforms.time.value},set:function set(X){this.uniforms.time.value=X}},{key:"setDeltaTime",value:function setDeltaTime(X){this.uniforms.time.value+=X}},{key:"adoptCameraSettings",value:function adoptCameraSettings(X){X&&(this.uniforms.cameraNear.value=X.near,this.uniforms.cameraFar.value=X.far,X instanceof cd?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},{key:"setSize",value:function setSize(X,$){var ee=this.uniforms;ee.resolution.value.set(X,$),ee.texelSize.value.set(1/X,1/$),ee.aspect.value=X/$}}],[{key:"Section",get:function get(){return TG}}]),jv}($h),DG="#include <common>\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef RANGE\nuniform vec2 range;\n#elif defined(THRESHOLD)\nuniform float threshold;uniform float smoothing;\n#endif\nvarying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=linearToRelativeLuminance(texel.rgb);\n#ifdef RANGE\nfloat low=step(range.x,l);float high=step(l,range.y);l*=low*high;\n#elif defined(THRESHOLD)\nl=smoothstep(threshold,threshold+smoothing,l);\n#endif\n#ifdef COLOR\ngl_FragColor=vec4(texel.rgb*l,l);\n#else\ngl_FragColor=vec4(l);\n#endif\n}",LG=function(X){_inherits(vU,X);var $=_createSuper(vU);function vU(){var X,ee=arguments.length>0&&void 0!==arguments[0]&&arguments[0],ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return _classCallCheck(this,vU),(X=$.call(this,{name:"LuminanceMaterial",uniforms:{inputBuffer:new g_(null),threshold:new g_(0),smoothing:new g_(1),range:new g_(null)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:DG,vertexShader:vG})).toneMapped=!1,X.colorOutput=ee,X.luminanceRange=ne,X}return _createClass(vU,[{key:"inputBuffer",set:function set(X){this.uniforms.inputBuffer.value=X}},{key:"setInputBuffer",value:function setInputBuffer(X){this.uniforms.inputBuffer.value=X}},{key:"threshold",get:function get(){return this.uniforms.threshold.value},set:function set(X){this.smoothing>0||X>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=X}},{key:"getThreshold",value:function getThreshold(){return this.threshold}},{key:"setThreshold",value:function setThreshold(X){this.threshold=X}},{key:"smoothing",get:function get(){return this.uniforms.smoothing.value},set:function set(X){this.threshold>0||X>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=X}},{key:"getSmoothingFactor",value:function getSmoothingFactor(){return this.smoothing}},{key:"setSmoothingFactor",value:function setSmoothingFactor(X){this.smoothing=X}},{key:"useThreshold",get:function get(){return this.threshold>0||this.smoothing>0},set:function set(X){}},{key:"colorOutput",get:function get(){return void 0!==this.defines.COLOR},set:function set(X){X?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}},{key:"isColorOutputEnabled",value:function isColorOutputEnabled(X){return this.colorOutput}},{key:"setColorOutputEnabled",value:function setColorOutputEnabled(X){this.colorOutput=X}},{key:"useRange",get:function get(){return null!==this.luminanceRange},set:function set(X){this.luminanceRange=null}},{key:"luminanceRange",get:function get(){return this.uniforms.range.value},set:function set(X){null!==X?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=X,this.needsUpdate=!0}},{key:"getLuminanceRange",value:function getLuminanceRange(){return this.luminanceRange}},{key:"setLuminanceRange",value:function setLuminanceRange(X){this.luminanceRange=X}}]),vU}($h),OG="#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\n#ifdef MASK_PRECISION_HIGH\nuniform mediump sampler2D maskTexture;\n#else\nuniform lowp sampler2D maskTexture;\n#endif\n#if MASK_FUNCTION != 0\nuniform float strength;\n#endif\nvarying vec2 vUv;void main(){\n#if COLOR_CHANNEL == 0\nfloat mask=texture2D(maskTexture,vUv).r;\n#elif COLOR_CHANNEL == 1\nfloat mask=texture2D(maskTexture,vUv).g;\n#elif COLOR_CHANNEL == 2\nfloat mask=texture2D(maskTexture,vUv).b;\n#else\nfloat mask=texture2D(maskTexture,vUv).a;\n#endif\n#if MASK_FUNCTION == 0\n#ifdef INVERTED\nmask=step(mask,0.0);\n#else\nmask=1.0-step(mask,0.0);\n#endif\n#else\nmask=clamp(mask*strength,0.0,1.0);\n#ifdef INVERTED\nmask=1.0-mask;\n#endif\n#endif\n#if MASK_FUNCTION == 2\ngl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);\n#else\ngl_FragColor=mask*texture2D(inputBuffer,vUv);\n#endif\n}",RG=0,BG=1,IG=function(X){_inherits(bU,X);var $=_createSuper(bU);function bU(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return _classCallCheck(this,bU),(X=$.call(this,{name:"MaskMaterial",uniforms:{maskTexture:new g_(ee),inputBuffer:new g_(null),strength:new g_(1)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:OG,vertexShader:vG})).toneMapped=!1,X.setColorChannel(fG),X.setMaskFunction(RG),X}return _createClass(bU,[{key:"inputBuffer",set:function set(X){this.uniforms.inputBuffer.value=X}},{key:"setInputBuffer",value:function setInputBuffer(X){this.uniforms.inputBuffer.value=X}},{key:"maskTexture",set:function set(X){this.uniforms.maskTexture.value=X,delete this.defines.MASK_PRECISION_HIGH,X.type!==Sn&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}},{key:"setMaskTexture",value:function setMaskTexture(X){this.maskTexture=X}},{key:"colorChannel",set:function set(X){this.defines.COLOR_CHANNEL=X.toFixed(0),this.needsUpdate=!0}},{key:"setColorChannel",value:function setColorChannel(X){this.colorChannel=X}},{key:"maskFunction",set:function set(X){this.defines.MASK_FUNCTION=X.toFixed(0),this.needsUpdate=!0}},{key:"setMaskFunction",value:function setMaskFunction(X){this.maskFunction=X}},{key:"inverted",get:function get(){return void 0!==this.defines.INVERTED},set:function set(X){this.inverted&&!X?delete this.defines.INVERTED:X&&(this.defines.INVERTED="1"),this.needsUpdate=!0}},{key:"isInverted",value:function isInverted(){return this.inverted}},{key:"setInverted",value:function setInverted(X){this.inverted=X}},{key:"strength",get:function get(){return this.uniforms.strength.value},set:function set(X){this.uniforms.strength.value=X}},{key:"getStrength",value:function getStrength(){return this.strength}},{key:"setStrength",value:function setStrength(X){this.strength=X}}]),bU}($h),zG="#define sampleLevelZeroOffset(t, coord, offset) texture2D(t, coord + offset * texelSize)\n#if __VERSION__ < 300\n#define round(v) floor(v + 0.5)\n#endif\n#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D inputBuffer;\n#else\nuniform lowp sampler2D inputBuffer;\n#endif\nuniform lowp sampler2D areaTexture;uniform lowp sampler2D searchTexture;uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}vec2 decodeDiagBilinearAccess(in vec2 e){e.r=e.r*abs(5.0*e.r-5.0*0.75);return round(e);}vec4 decodeDiagBilinearAccess(in vec4 e){e.rb=e.rb*abs(5.0*e.rb-5.0*0.75);return round(e);}vec2 searchDiag1(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 searchDiag2(const in vec2 texCoord,const in vec2 dir,out vec2 e){vec4 coord=vec4(texCoord,-1.0,1.0);coord.x+=0.25*texelSize.x;vec3 t=vec3(texelSize,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(coord.z<float(MAX_SEARCH_STEPS_DIAG_INT-1)&&coord.w>0.9)){break;}coord.xyz=t*vec3(dir,1.0)+coord.xyz;e=texture2D(inputBuffer,coord.xy).rg;e=decodeDiagBilinearAccess(e);coord.w=dot(e,vec2(0.5));}return coord.zw;}vec2 areaDiag(const in vec2 dist,const in vec2 e,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE_DIAG,AREATEX_MAX_DISTANCE_DIAG)*e+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.x+=0.5;texCoord.y+=AREATEX_SUBTEX_SIZE*offset;return texture2D(areaTexture,texCoord).rg;}vec2 calculateDiagWeights(const in vec2 texCoord,const in vec2 e,const in vec4 subsampleIndices){vec2 weights=vec2(0.0);vec4 d;vec2 end;if(e.r>0.0){d.xz=searchDiag1(texCoord,vec2(-1.0,1.0),end);d.x+=float(end.y>0.9);}else{d.xz=vec2(0.0);}d.yw=searchDiag1(texCoord,vec2(1.0,-1.0),end);if(d.x+d.y>2.0){vec4 coords=vec4(-d.x+0.25,d.x,d.y,-d.y-0.25)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.xy=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).rg;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).rg;c.yxwz=decodeDiagBilinearAccess(c.xyzw);vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.z);}d.xz=searchDiag2(texCoord,vec2(-1.0,-1.0),end);if(sampleLevelZeroOffset(inputBuffer,texCoord,vec2(1,0)).r>0.0){d.yw=searchDiag2(texCoord,vec2(1.0),end);d.y+=float(end.y>0.9);}else{d.yw=vec2(0.0);}if(d.x+d.y>2.0){vec4 coords=vec4(-d.x,-d.x,d.y,d.y)*texelSize.xyxy+texCoord.xyxy;vec4 c;c.x=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(-1,0)).g;c.y=sampleLevelZeroOffset(inputBuffer,coords.xy,vec2(0,-1)).r;c.zw=sampleLevelZeroOffset(inputBuffer,coords.zw,vec2(1,0)).gr;vec2 cc=vec2(2.0)*c.xz+c.yw;movec(bvec2(step(0.9,d.zw)),cc,vec2(0.0));weights+=areaDiag(d.xy,cc,subsampleIndices.w).gr;}return weights;}float searchLength(const in vec2 e,const in float offset){vec2 scale=SEARCHTEX_SIZE*vec2(0.5,-1.0);vec2 bias=SEARCHTEX_SIZE*vec2(offset,1.0);scale+=vec2(-1.0,1.0);bias+=vec2(0.5,-0.5);scale*=1.0/SEARCHTEX_PACKED_SIZE;bias*=1.0/SEARCHTEX_PACKED_SIZE;return texture2D(searchTexture,scale*e+bias).r;}float searchXLeft(in vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x>end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(-2.0,0.0)*texelSize+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.0)+3.25;return texelSize.x*offset+texCoord.x;}float searchXRight(vec2 texCoord,const in float end){vec2 e=vec2(0.0,1.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.x<end&&e.g>0.8281&&e.r==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(2.0,0.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e,0.5)+3.25;return-texelSize.x*offset+texCoord.x;}float searchYUp(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;++i){if(!(texCoord.y>end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=-vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.0)+3.25;return texelSize.y*offset+texCoord.y;}float searchYDown(vec2 texCoord,const in float end){vec2 e=vec2(1.0,0.0);for(int i=0;i<MAX_SEARCH_STEPS_INT;i++){if(!(texCoord.y<end&&e.r>0.8281&&e.g==0.0)){break;}e=texture2D(inputBuffer,texCoord).rg;texCoord=vec2(0.0,2.0)*texelSize.xy+texCoord;}float offset=-(255.0/127.0)*searchLength(e.gr,0.5)+3.25;return-texelSize.y*offset+texCoord.y;}vec2 area(const in vec2 dist,const in float e1,const in float e2,const in float offset){vec2 texCoord=vec2(AREATEX_MAX_DISTANCE)*round(4.0*vec2(e1,e2))+dist;texCoord=AREATEX_PIXEL_SIZE*texCoord+0.5*AREATEX_PIXEL_SIZE;texCoord.y=AREATEX_SUBTEX_SIZE*offset+texCoord.y;return texture2D(areaTexture,texCoord).rg;}void detectHorizontalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,1)).r;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).r;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(0,-2)).r;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,-2)).r;weights*=clamp(factor,0.0,1.0);\n#endif\n}void detectVerticalCornerPattern(inout vec2 weights,const in vec4 texCoord,const in vec2 d){\n#if !defined(DISABLE_CORNER_DETECTION)\nvec2 leftRight=step(d.xy,d.yx);vec2 rounding=(1.0-CORNER_ROUNDING_NORM)*leftRight;rounding/=leftRight.x+leftRight.y;vec2 factor=vec2(1.0);factor.x-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(1,0)).g;factor.x-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(1,1)).g;factor.y-=rounding.x*sampleLevelZeroOffset(inputBuffer,texCoord.xy,vec2(-2,0)).g;factor.y-=rounding.y*sampleLevelZeroOffset(inputBuffer,texCoord.zw,vec2(-2,1)).g;weights*=clamp(factor,0.0,1.0);\n#endif\n}void main(){vec4 weights=vec4(0.0);vec4 subsampleIndices=vec4(0.0);vec2 e=texture2D(inputBuffer,vUv).rg;if(e.g>0.0){\n#if !defined(DISABLE_DIAG_DETECTION)\nweights.rg=calculateDiagWeights(vUv,e,subsampleIndices);if(weights.r==-weights.g){\n#endif\nvec2 d;vec3 coords;coords.x=searchXLeft(vOffset[0].xy,vOffset[2].x);coords.y=vOffset[1].y;d.x=coords.x;float e1=texture2D(inputBuffer,coords.xy).r;coords.z=searchXRight(vOffset[0].zw,vOffset[2].y);d.y=coords.z;d=round(resolution.xx*d+-vPixCoord.xx);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.zy,vec2(1,0)).r;weights.rg=area(sqrtD,e1,e2,subsampleIndices.y);coords.y=vUv.y;detectHorizontalCornerPattern(weights.rg,coords.xyzy,d);\n#if !defined(DISABLE_DIAG_DETECTION)\n}else{e.r=0.0;}\n#endif\n}if(e.r>0.0){vec2 d;vec3 coords;coords.y=searchYUp(vOffset[1].xy,vOffset[2].z);coords.x=vOffset[0].x;d.x=coords.y;float e1=texture2D(inputBuffer,coords.xy).g;coords.z=searchYDown(vOffset[1].zw,vOffset[2].w);d.y=coords.z;d=round(resolution.yy*d-vPixCoord.yy);vec2 sqrtD=sqrt(abs(d));float e2=sampleLevelZeroOffset(inputBuffer,coords.xz,vec2(0,1)).g;weights.ba=area(sqrtD,e1,e2,subsampleIndices.x);coords.x=vUv.x;detectVerticalCornerPattern(weights.ba,coords.xyxz,d);}gl_FragColor=weights;}",NG="uniform vec2 texelSize;uniform vec2 resolution;varying vec2 vUv;varying vec4 vOffset[3];varying vec2 vPixCoord;void main(){vUv=position.xy*0.5+0.5;vPixCoord=vUv*resolution;vOffset[0]=vUv.xyxy+texelSize.xyxy*vec4(-0.25,-0.125,1.25,-0.125);vOffset[1]=vUv.xyxy+texelSize.xyxy*vec4(-0.125,-0.25,-0.125,1.25);vOffset[2]=vec4(vOffset[0].xz,vOffset[1].yw)+vec4(-2.0,2.0,-2.0,2.0)*texelSize.xxyy*MAX_SEARCH_STEPS_FLOAT;gl_Position=vec4(position.xy,1.0,1.0);}",FG=function(X){_inherits(MU,X);var $=_createSuper(MU);function MU(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new va,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new va;return _classCallCheck(this,MU),(X=$.call(this,{name:"SMAAWeightsMaterial",defines:{MAX_SEARCH_STEPS_INT:"16",MAX_SEARCH_STEPS_FLOAT:"16.0",MAX_SEARCH_STEPS_DIAG_INT:"8",MAX_SEARCH_STEPS_DIAG_FLOAT:"8.0",CORNER_ROUNDING:"25",CORNER_ROUNDING_NORM:"0.25",AREATEX_MAX_DISTANCE:"16.0",AREATEX_MAX_DISTANCE_DIAG:"20.0",AREATEX_PIXEL_SIZE:"(1.0 / vec2(160.0, 560.0))",AREATEX_SUBTEX_SIZE:"(1.0 / 7.0)",SEARCHTEX_SIZE:"vec2(66.0, 33.0)",SEARCHTEX_PACKED_SIZE:"vec2(64.0, 16.0)"},uniforms:{inputBuffer:new g_(null),searchTexture:new g_(null),areaTexture:new g_(null),resolution:new g_(ne),texelSize:new g_(ee)},blending:0,depthWrite:!1,depthTest:!1,fragmentShader:zG,vertexShader:NG})).toneMapped=!1,X}return _createClass(MU,[{key:"inputBuffer",set:function set(X){this.uniforms.inputBuffer.value=X}},{key:"setInputBuffer",value:function setInputBuffer(X){this.uniforms.inputBuffer.value=X}},{key:"searchTexture",get:function get(){return this.uniforms.searchTexture.value},set:function set(X){this.uniforms.searchTexture.value=X}},{key:"areaTexture",get:function get(){return this.uniforms.areaTexture.value},set:function set(X){this.uniforms.areaTexture.value=X}},{key:"setLookupTextures",value:function setLookupTextures(X,$){this.searchTexture=X,this.areaTexture=$}},{key:"orthogonalSearchSteps",get:function get(){return Number(this.defines.MAX_SEARCH_STEPS_INT)},set:function set(X){var $=Math.min(Math.max(X,0),112);this.defines.MAX_SEARCH_STEPS_INT=$.toFixed("0"),this.defines.MAX_SEARCH_STEPS_FLOAT=$.toFixed("1"),this.needsUpdate=!0}},{key:"setOrthogonalSearchSteps",value:function setOrthogonalSearchSteps(X){this.orthogonalSearchSteps=X}},{key:"diagonalSearchSteps",get:function get(){return Number(this.defines.MAX_SEARCH_STEPS_DIAG_INT)},set:function set(X){var $=Math.min(Math.max(X,0),20);this.defines.MAX_SEARCH_STEPS_DIAG_INT=$.toFixed("0"),this.defines.MAX_SEARCH_STEPS_DIAG_FLOAT=$.toFixed("1"),this.needsUpdate=!0}},{key:"setDiagonalSearchSteps",value:function setDiagonalSearchSteps(X){this.diagonalSearchSteps=X}},{key:"diagonalDetection",get:function get(){return void 0===this.defines.DISABLE_DIAG_DETECTION},set:function set(X){X?delete this.defines.DISABLE_DIAG_DETECTION:this.defines.DISABLE_DIAG_DETECTION="1",this.needsUpdate=!0}},{key:"isDiagonalDetectionEnabled",value:function isDiagonalDetectionEnabled(){return this.diagonalDetection}},{key:"setDiagonalDetectionEnabled",value:function setDiagonalDetectionEnabled(X){this.diagonalDetection=X}},{key:"cornerRounding",get:function get(){return Number(this.defines.CORNER_ROUNDING)},set:function set(X){var $=Math.min(Math.max(X,0),100);this.defines.CORNER_ROUNDING=$.toFixed("4"),this.defines.CORNER_ROUNDING_NORM=($/100).toFixed("4"),this.needsUpdate=!0}},{key:"setCornerRounding",value:function setCornerRounding(X){this.cornerRounding=X}},{key:"cornerDetection",get:function get(){return void 0===this.defines.DISABLE_CORNER_DETECTION},set:function set(X){X?delete this.defines.DISABLE_CORNER_DETECTION:this.defines.DISABLE_CORNER_DETECTION="1",this.needsUpdate=!0}},{key:"isCornerRoundingEnabled",value:function isCornerRoundingEnabled(){return this.cornerDetection}},{key:"setCornerRoundingEnabled",value:function setCornerRoundingEnabled(X){this.cornerDetection=X}},{key:"setSize",value:function setSize(X,$){var ee=this.uniforms;ee.texelSize.value.set(1/X,1/$),ee.resolution.value.set(X,$)}}]),MU}($h),UG=new ad,VG=null;var HG=function(){function ys(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Pass",$=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new nv,ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:UG;_classCallCheck(this,ys),this.name=X,this.renderer=null,this.scene=$,this.camera=ee,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}return _createClass(ys,[{key:"renderToScreen",get:function get(){return!this.rtt},set:function set(X){if(this.rtt===X){var $=this.getFullscreenMaterial();null!==$&&($.needsUpdate=!0),this.rtt=!X}}},{key:"setRenderer",value:function setRenderer(X){this.renderer=X}},{key:"isEnabled",value:function isEnabled(){return this.enabled}},{key:"setEnabled",value:function setEnabled(X){this.enabled=X}},{key:"fullscreenMaterial",get:function get(){return null!==this.screen?this.screen.material:null},set:function set(X){var $=this.screen;null!==$?$.material=X:(($=new Oh(function TU(){if(null===VG){var X=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),$=new Float32Array([0,0,2,0,0,2]);void 0!==(VG=new Wu).setAttribute?(VG.setAttribute("position",new Lu(X,3)),VG.setAttribute("uv",new Lu($,2))):(VG.addAttribute("position",new Lu(X,3)),VG.addAttribute("uv",new Lu($,2)))}return VG}(),X)).frustumCulled=!1,null===this.scene&&(this.scene=new nv),this.scene.add($),this.screen=$)}},{key:"getFullscreenMaterial",value:function getFullscreenMaterial(){return this.fullscreenMaterial}},{key:"setFullscreenMaterial",value:function setFullscreenMaterial(X){this.fullscreenMaterial=X}},{key:"getDepthTexture",value:function getDepthTexture(){return null}},{key:"setDepthTexture",value:function setDepthTexture(X){}},{key:"render",value:function render(X,$,ee,ne,ae){throw new Error("Render method not implemented!")}},{key:"setSize",value:function setSize(X,$){}},{key:"initialize",value:function initialize(X,$,ee){}},{key:"dispose",value:function dispose(){for(var X=0,$=Object.keys(this);X<$.length;X++){var ee=$[X],ne=this[ee];if(null!==ne&&"function"==typeof ne.dispose){if(ne instanceof nv||ne===this.renderer)continue;this[ee].dispose()}}}}]),ys}(),jG=function(X){_inherits(Yv,X);var $=_createSuper(Yv);function Yv(X){var ee,ne=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return _classCallCheck(this,Yv),(ee=$.call(this,"CopyPass")).fullscreenMaterial=new wG,ee.needsSwap=!1,ee.renderTarget=X,void 0===X&&(ee.renderTarget=new ro(1,1,{minFilter:_n,magFilter:_n,stencilBuffer:!1,depthBuffer:!1}),ee.renderTarget.texture.name="CopyPass.Target"),ee.autoResize=ne,ee}return _createClass(Yv,[{key:"resize",get:function get(){return this.autoResize},set:function set(X){this.autoResize=X}},{key:"texture",get:function get(){return this.renderTarget.texture}},{key:"getTexture",value:function getTexture(){return this.renderTarget.texture}},{key:"setAutoResizeEnabled",value:function setAutoResizeEnabled(X){this.autoResize=X}},{key:"render",value:function render(X,$,ee,ne,ae){this.fullscreenMaterial.inputBuffer=$.texture,X.setRenderTarget(this.renderToScreen?null:this.renderTarget),X.render(this.scene,this.camera)}},{key:"setSize",value:function setSize(X,$){this.autoResize&&this.renderTarget.setSize(X,$)}},{key:"initialize",value:function initialize(X,$,ee){void 0!==ee&&(this.renderTarget.texture.type=ee,ee!==Sn?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":X.outputEncoding===Xr&&(this.renderTarget.texture.encoding=Xr))}}]),Yv}(HG),GG=function(X){_inherits(EU,X);var $=_createSuper(EU);function EU(){var X;return _classCallCheck(this,EU),(X=$.call(this,"ClearMaskPass",null,null)).needsSwap=!1,X}return _createClass(EU,[{key:"render",value:function render(X,$,ee,ne,ae){var de=X.state.buffers.stencil;de.setLocked(!1),de.setTest(!1)}}]),EU}(HG),WG=new Ma,qG=function(X){_inherits(Xv,X);var $=_createSuper(Xv);function Xv(){var X,ee=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],ne=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],ae=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return _classCallCheck(this,Xv),(X=$.call(this,"ClearPass",null,null)).needsSwap=!1,X.color=ee,X.depth=ne,X.stencil=ae,X.overrideClearColor=null,X.overrideClearAlpha=-1,X}return _createClass(Xv,[{key:"setClearFlags",value:function setClearFlags(X,$,ee){this.color=X,this.depth=$,this.stencil=ee}},{key:"getOverrideClearColor",value:function getOverrideClearColor(){return this.overrideClearColor}},{key:"setOverrideClearColor",value:function setOverrideClearColor(X){this.overrideClearColor=X}},{key:"getOverrideClearAlpha",value:function getOverrideClearAlpha(){return this.overrideClearAlpha}},{key:"setOverrideClearAlpha",value:function setOverrideClearAlpha(X){this.overrideClearAlpha=X}},{key:"render",value:function render(X,$,ee,ne,ae){var de=this.overrideClearColor,fe=this.overrideClearAlpha,Ue=X.getClearAlpha(),je=null!==de,Ke=fe>=0;je?(WG.copy(X.getClearColor(WG)),X.setClearColor(de,Ke?fe:Ue)):Ke&&X.setClearAlpha(fe),X.setRenderTarget(this.renderToScreen?null:$),X.clear(this.color,this.depth,this.stencil),je?X.setClearColor(WG,Ue):Ke&&X.setClearAlpha(Ue)}}]),Xv}(HG),YG=-1,JG=function(X){_inherits(bi,X);var $=_createSuper(bi);function bi(X){var ee,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:YG,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:YG,de=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return _classCallCheck(this,bi),(ee=$.call(this)).resizable=X,ee.base=new va(1,1),ee.preferred=new va(ne,ae),ee.target=ee.preferred,ee.s=de,ee}return _createClass(bi,[{key:"width",get:function get(){var X=this.base,$=this.preferred,ee=this.scale;return $.width!==YG?$.width:$.height!==YG?Math.round($.height*(X.width/Math.max(X.height,1))):Math.round(X.width*ee)},set:function set(X){this.preferredWidth=X}},{key:"height",get:function get(){var X=this.base,$=this.preferred,ee=this.scale;return $.height!==YG?$.height:$.width!==YG?Math.round($.width/Math.max(X.width/Math.max(X.height,1),1)):Math.round(X.height*ee)},set:function set(X){this.preferredHeight=X}},{key:"getWidth",value:function getWidth(){return this.width}},{key:"getHeight",value:function getHeight(){return this.height}},{key:"scale",get:function get(){return this.s},set:function set(X){this.s!==X&&(this.s=X,this.preferred.setScalar(YG),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}},{key:"getScale",value:function getScale(){return this.scale}},{key:"setScale",value:function setScale(X){this.scale=X}},{key:"baseWidth",get:function get(){return this.base.width},set:function set(X){this.base.width!==X&&(this.base.width=X,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}},{key:"getBaseWidth",value:function getBaseWidth(){return this.base.width}},{key:"setBaseWidth",value:function setBaseWidth(X){this.base.width!==X&&(this.base.width=X,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}},{key:"baseHeight",get:function get(){return this.base.height},set:function set(X){this.base.height!==X&&(this.base.height=X,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}},{key:"getBaseHeight",value:function getBaseHeight(){return this.baseHeight}},{key:"setBaseHeight",value:function setBaseHeight(X){this.baseHeight=X}},{key:"setBaseSize",value:function setBaseSize(X,$){(this.base.width!==X||this.base.height!==$)&&(this.base.set(X,$),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}},{key:"preferredWidth",get:function get(){return this.preferred.width},set:function set(X){this.preferred.width!==X&&(this.preferred.width=X,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}},{key:"getPreferredWidth",value:function getPreferredWidth(){return this.preferredWidth}},{key:"setPreferredWidth",value:function setPreferredWidth(X){this.preferredWidth=X}},{key:"preferredHeight",get:function get(){return this.preferred.height},set:function set(X){this.preferred.height!==X&&(this.preferred.height=X,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}},{key:"getPreferredHeight",value:function getPreferredHeight(){return this.preferredHeight}},{key:"setPreferredHeight",value:function setPreferredHeight(X){this.preferredHeight=X}},{key:"setPreferredSize",value:function setPreferredSize(X,$){(this.preferred.width!==X||this.preferred.height!==$)&&(this.preferred.set(X,$),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height))}},{key:"copy",value:function copy(X){this.base.set(X.getBaseWidth(),X.getBaseHeight()),this.preferred.set(X.getPreferredWidth(),X.getPreferredHeight()),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.base.width,this.base.height)}}],[{key:"AUTO_SIZE",get:function get(){return YG}}]),bi}(aa),ZG=!1,XG=function(){function bA(){var X=this,$=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;_classCallCheck(this,bA),this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial($),this.meshCount=0,this.replaceMaterial=function($){if($.isMesh){var ee;if($.material.flatShading)switch($.material.side){case 2:ee=X.materialsFlatShadedDoubleSide;break;case 1:ee=X.materialsFlatShadedBackSide;break;default:ee=X.materialsFlatShaded}else switch($.material.side){case 2:ee=X.materialsDoubleSide;break;case 1:ee=X.materialsBackSide;break;default:ee=X.materials}X.originalMaterials.set($,$.material),$.isSkinnedMesh?$.material=ee[2]:$.isInstancedMesh?$.material=ee[1]:$.material=ee[0],++X.meshCount}}}return _createClass(bA,[{key:"setMaterial",value:function setMaterial(X){if(this.disposeMaterials(),this.material=X,null!==X){for(var $=this.materials=[X.clone(),X.clone(),X.clone()],ee=0,ne=$;ee<ne.length;ee++){var ae=ne[ee];ae.uniforms=Object.assign({},X.uniforms),ae.side=0}$[2].skinning=!0,this.materialsBackSide=$.map((function($){var ee=$.clone();return ee.uniforms=Object.assign({},X.uniforms),ee.side=1,ee})),this.materialsDoubleSide=$.map((function($){var ee=$.clone();return ee.uniforms=Object.assign({},X.uniforms),ee.side=2,ee})),this.materialsFlatShaded=$.map((function($){var ee=$.clone();return ee.uniforms=Object.assign({},X.uniforms),ee.flatShading=!0,ee})),this.materialsFlatShadedBackSide=$.map((function($){var ee=$.clone();return ee.uniforms=Object.assign({},X.uniforms),ee.flatShading=!0,ee.side=1,ee})),this.materialsFlatShadedDoubleSide=$.map((function($){var ee=$.clone();return ee.uniforms=Object.assign({},X.uniforms),ee.flatShading=!0,ee.side=2,ee}))}}},{key:"render",value:function render(X,$,ee){var ne=X.shadowMap.enabled;if(X.shadowMap.enabled=!1,ZG){var ae=this.originalMaterials;this.meshCount=0,$.traverse(this.replaceMaterial),X.render($,ee);var de,fe=(0,je.Z)(ae);try{for(fe.s();!(de=fe.n()).done;){var Ue=de.value;Ue[0].material=Ue[1]}}catch(et){fe.e(et)}finally{fe.f()}this.meshCount!==ae.size&&ae.clear()}else{var Ke=$.overrideMaterial;$.overrideMaterial=this.material,X.render($,ee),$.overrideMaterial=Ke}X.shadowMap.enabled=ne}},{key:"disposeMaterials",value:function disposeMaterials(){if(null!==this.material){var X,$=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide),ee=(0,je.Z)($);try{for(ee.s();!(X=ee.n()).done;){X.value.dispose()}}catch(ne){ee.e(ne)}finally{ee.f()}}}},{key:"dispose",value:function dispose(){this.originalMaterials.clear(),this.disposeMaterials()}}],[{key:"workaroundEnabled",get:function get(){return ZG},set:function set(X){ZG=X}}]),bA}(),QG=function(X){_inherits(Qv,X);var $=_createSuper(Qv);function Qv(X,ee){var ne,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return _classCallCheck(this,Qv),(ne=$.call(this,"RenderPass",X,ee)).needsSwap=!1,ne.clearPass=new qG,ne.overrideMaterialManager=null===ae?null:new XG(ae),ne.ignoreBackground=!1,ne.skipShadowMapUpdate=!1,ne.selection=null,ne}return _createClass(Qv,[{key:"renderToScreen",get:function get(){return _get(_getPrototypeOf(Qv.prototype),"renderToScreen",this)},set:function set(X){_set(_getPrototypeOf(Qv.prototype),"renderToScreen",X,this,!0),this.clearPass.renderToScreen=X}},{key:"overrideMaterial",get:function get(){var X=this.overrideMaterialManager;return null!==X?X.material:null},set:function set(X){var $=this.overrideMaterialManager;null!==X?null!==$?$.setMaterial(X):this.overrideMaterialManager=new XG(X):null!==$&&($.dispose(),this.overrideMaterialManager=null)}},{key:"getOverrideMaterial",value:function getOverrideMaterial(){return this.overrideMaterial}},{key:"setOverrideMaterial",value:function setOverrideMaterial(X){this.overrideMaterial=X}},{key:"clear",get:function get(){return this.clearPass.enabled},set:function set(X){this.clearPass.enabled=X}},{key:"getSelection",value:function getSelection(){return this.selection}},{key:"setSelection",value:function setSelection(X){this.selection=X}},{key:"isBackgroundDisabled",value:function isBackgroundDisabled(){return this.ignoreBackground}},{key:"setBackgroundDisabled",value:function setBackgroundDisabled(X){this.ignoreBackground=X}},{key:"isShadowMapDisabled",value:function isShadowMapDisabled(){return this.skipShadowMapUpdate}},{key:"setShadowMapDisabled",value:function setShadowMapDisabled(X){this.skipShadowMapUpdate=X}},{key:"getClearPass",value:function getClearPass(){return this.clearPass}},{key:"render",value:function render(X,$,ee,ne,ae){var de=this.scene,fe=this.camera,Ue=this.selection,je=fe.layers.mask,Ke=de.background,et=X.shadowMap.autoUpdate,tt=this.renderToScreen?null:$;null!==Ue&&fe.layers.set(Ue.getLayer()),this.skipShadowMapUpdate&&(X.shadowMap.autoUpdate=!1),(this.ignoreBackground||null!==this.clearPass.overrideClearColor)&&(de.background=null),this.clearPass.enabled&&this.clearPass.render(X,$),X.setRenderTarget(tt),null!==this.overrideMaterialManager?this.overrideMaterialManager.render(X,de,fe):X.render(de,fe),fe.layers.mask=je,de.background=Ke,X.shadowMap.autoUpdate=et}}]),Qv}(HG),KG=(new Float32Array([255/256/Math.pow(256,3),255/256/Math.pow(256,2),255/256/256,255/256]),0),$G=13,eW=14,tW=16,nW=new Map([[KG,null],[1,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}"],[2,"vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}"],[3,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}"],[4,"float blend(const in float x,const in float y){return(y==0.0)? y : max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[5,"float blend(const in float x,const in float y){return(y==1.0)? y : min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[6,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}"],[7,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}"],[8,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}"],[9,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}"],[10,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}"],[11,"float blend(const in float x,const in float y){return(y>0.0)? min(x/y,1.0): 1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[12,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}"],[$G,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}"],[eW,"float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[15,"float blend(const in float x,const in float y){return(y==1.0)? y : min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[tW,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}"],[17,"float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[18,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}"]]),rW=function(X){_inherits(qU,X);var $=_createSuper(qU);function qU(X){var ee,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return _classCallCheck(this,qU),(ee=$.call(this)).f=X,ee.opacity=new g_(ne),ee}return _createClass(qU,[{key:"getOpacity",value:function getOpacity(){return this.opacity.value}},{key:"setOpacity",value:function setOpacity(X){this.opacity.value=X}},{key:"blendFunction",get:function get(){return this.f},set:function set(X){this.f=X,this.dispatchEvent({type:"change"})}},{key:"getBlendFunction",value:function getBlendFunction(){return this.blendFunction}},{key:"setBlendFunction",value:function setBlendFunction(X){this.blendFunction=X}},{key:"getShaderCode",value:function getShaderCode(){return nW.get(this.blendFunction)}}]),qU}(aa),iW=0,aW=1,oW=2,sW=function(X){_inherits(Wi,X);var $=_createSuper(Wi);function Wi(X,ee){var ne,ae=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},de=ae.attributes,fe=void 0===de?iW:de,Ue=ae.blendFunction,je=void 0===Ue?tW:Ue,Ke=ae.defines,et=void 0===Ke?new Map:Ke,tt=ae.uniforms,nt=void 0===tt?new Map:tt,it=ae.extensions,ct=void 0===it?null:it,dt=ae.vertexShader,vt=void 0===dt?null:dt;return _classCallCheck(this,Wi),(ne=$.call(this)).name=X,ne.renderer=null,ne.attributes=fe,ne.fragmentShader=ee,ne.vertexShader=vt,ne.defines=et,ne.uniforms=nt,ne.extensions=ct,ne.blendMode=new rW(je),ne.blendMode.addEventListener("change",(function(X){return ne.setChanged()})),ne}return _createClass(Wi,[{key:"getName",value:function getName(){return this.name}},{key:"setRenderer",value:function setRenderer(X){this.renderer=X}},{key:"getDefines",value:function getDefines(){return this.defines}},{key:"getUniforms",value:function getUniforms(){return this.uniforms}},{key:"getExtensions",value:function getExtensions(){return this.extensions}},{key:"getBlendMode",value:function getBlendMode(){return this.blendMode}},{key:"getAttributes",value:function getAttributes(){return this.attributes}},{key:"setAttributes",value:function setAttributes(X){this.attributes=X,this.setChanged()}},{key:"getFragmentShader",value:function getFragmentShader(){return this.fragmentShader}},{key:"setFragmentShader",value:function setFragmentShader(X){this.fragmentShader=X,this.setChanged()}},{key:"getVertexShader",value:function getVertexShader(){return this.vertexShader}},{key:"setVertexShader",value:function setVertexShader(X){this.vertexShader=X,this.setChanged()}},{key:"setChanged",value:function setChanged(){this.dispatchEvent({type:"change"})}},{key:"setDepthTexture",value:function setDepthTexture(X){}},{key:"update",value:function update(X,$,ee){}},{key:"setSize",value:function setSize(X,$){}},{key:"initialize",value:function initialize(X,$,ee){}},{key:"dispose",value:function dispose(){for(var X=0,$=Object.keys(this);X<$.length;X++){var ee=$[X],ne=this[ee];if(null!==ne&&"function"==typeof ne.dispose){if(ne instanceof nv||ne===this.renderer)continue;this[ee].dispose()}}}}]),Wi}(aa);function wA(X,$,ee){var ne,ae=(0,je.Z)($);try{for(ae.s();!(ne=ae.n()).done;){var de,fe=ne.value,Ue="$1"+X+fe.charAt(0).toUpperCase()+fe.slice(1),Ke=new RegExp("([^\\.])(\\b"+fe+"\\b)","g"),et=(0,je.Z)(ee.entries());try{for(et.s();!(de=et.n()).done;){var tt=de.value;null!==tt[1]&&ee.set(tt[0],tt[1].replace(Ke,Ue))}}catch(nt){et.e(nt)}finally{et.f()}}}catch(nt){ae.e(nt)}finally{ae.f()}}function YU(X,$,ee,ne,de,fe,Ue){var je=new Map([["fragment",$.getFragmentShader()],["vertex",$.getVertexShader()]]),Ke=void 0!==je.get("fragment")&&/mainImage/.test(je.get("fragment")),et=void 0!==je.get("fragment")&&/mainUv/.test(je.get("fragment")),tt=[],nt=[],it=!1,ct=!1;if(void 0===je.get("fragment"))console.error("Missing fragment shader",$);else if(et&&0!==(Ue&oW))console.error("Effects that transform UV coordinates are incompatible with convolution effects",$);else if(Ke||et){var dt=/(?:\w+\s+(\w+)\([\w\s,]*\)\s*{[^}]+})/g,vt=PG.Section;if(et){var gt="\t".concat(X,"MainUv(UV);\n");ee.set(vt.FRAGMENT_MAIN_UV,ee.get(vt.FRAGMENT_MAIN_UV)+gt),it=!0}if(null!==je.get("vertex")&&/mainSupport/.test(je.get("vertex"))){var yt="\t".concat(X,"MainSupport(");yt+=/mainSupport *\([\w\s]*?uv\s*?\)/.test(je.get("vertex"))?"vUv);\n":");\n",ee.set(vt.VERTEX_MAIN_SUPPORT,ee.get(vt.VERTEX_MAIN_SUPPORT)+yt),tt=tt.concat((0,ae.Z)(je.get("vertex").matchAll(/(?:varying\s+\w+\s+(\w*))/g)).map((function(X){return X[1]}))),nt=nt.concat(tt).concat((0,ae.Z)(je.get("vertex").matchAll(dt)).map((function(X){return X[1]})))}nt=(nt=(nt=nt.concat((0,ae.Z)(je.get("fragment").matchAll(dt)).map((function(X){return X[1]})))).concat((0,ae.Z)($.defines.keys()).map((function(X){return X.replace(/\([\w\s,]*\)/g,"")})))).concat((0,ae.Z)($.uniforms.keys())),$.uniforms.forEach((function($,ee){return fe.set(X+ee.charAt(0).toUpperCase()+ee.slice(1),$)})),$.defines.forEach((function($,ee){return de.set(X+ee.charAt(0).toUpperCase()+ee.slice(1),$)})),wA(X,nt,de),wA(X,nt,je);var _t=$.blendMode;if(ne.set(_t.blendFunction,_t),Ke){var wt="".concat(X,"MainImage(color0, UV, ");0!==(Ue&aW)&&/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/.test(je.get("fragment"))&&(wt+="depth, ",ct=!0),wt+="color1);\n\t";var St=X+"BlendOpacity";fe.set(St,_t.opacity),wt+="color0 = blend".concat(_t.blendFunction,"(color0, color1, ").concat(St,");\n\n\t"),ee.set(vt.FRAGMENT_MAIN_IMAGE,ee.get(vt.FRAGMENT_MAIN_IMAGE)+wt),wt="uniform float ".concat(St,";\n\n"),ee.set(vt.FRAGMENT_HEAD,ee.get(vt.FRAGMENT_HEAD)+wt)}ee.set(vt.FRAGMENT_HEAD,ee.get(vt.FRAGMENT_HEAD)+je.get("fragment")+"\n"),null!==je.get("vertex")&&ee.set(vt.VERTEX_HEAD,ee.get(vt.VERTEX_HEAD)+je.get("vertex")+"\n")}else console.error("The fragment shader contains neither a mainImage nor a mainUv function",$);return{varyings:tt,transformedUv:it,readDepth:ct}}var lW=function(X){_inherits(Kp,X);var $=_createSuper(Kp);function Kp(X){var ee;_classCallCheck(this,Kp);for(var ne=arguments.length,ae=new Array(ne>1?ne-1:0),de=1;de<ne;de++)ae[de-1]=arguments[de];return(ee=$.call(this,"EffectPass")).fullscreenMaterial=new PG(null,null,null,X),ee.effects=ae.sort((function(X,$){return $.attributes-X.attributes})),ee.skipRendering=!1,ee.uniformCount=0,ee.varyingCount=0,ee.minTime=1,ee.maxTime=Number.POSITIVE_INFINITY,ee}return _createClass(Kp,[{key:"encodeOutput",get:function get(){return this.fullscreenMaterial.encodeOutput},set:function set(X){this.fullscreenMaterial.encodeOutput=X}},{key:"dithering",get:function get(){return this.fullscreenMaterial.dithering},set:function set(X){var $=this.fullscreenMaterial;$.dithering=X,$.needsUpdate=!0}},{key:"verifyResources",value:function verifyResources(){var X=this.renderer.capabilities,$=Math.min(X.maxFragmentUniforms,X.maxVertexUniforms);this.uniformCount>$&&console.warn("The current rendering context doesn't support more than "+$+" uniforms, but "+this.uniformCount+" were defined"),$=X.maxVaryings,this.varyingCount>$&&console.warn("The current rendering context doesn't support more than "+$+" varyings, but "+this.varyingCount+" were defined")}},{key:"updateMaterial",value:function updateMaterial(){var X,$=PG.Section,ee=new Map([[$.FRAGMENT_HEAD,""],[$.FRAGMENT_MAIN_UV,""],[$.FRAGMENT_MAIN_IMAGE,""],[$.VERTEX_HEAD,""],[$.VERTEX_MAIN_SUPPORT,""]]),ne=new Map,ae=new Map,de=new Map,fe=new Set,Ue=0,Ke=0,et=0,tt=!1,nt=!1,it=(0,je.Z)(this.effects);try{for(it.s();!(X=it.n()).done;){var ct=X.value;if(ct.blendMode.blendFunction===KG)et|=ct.getAttributes()&aW;else if(0!==(et&ct.getAttributes()&oW))console.error("Convolution effects cannot be merged",ct);else{et|=ct.getAttributes();var dt=YU("e"+Ue++,ct,ee,ne,ae,de,et);if(Ke+=dt.varyings.length,tt=tt||dt.transformedUv,nt=nt||dt.readDepth,null!==ct.extensions){var vt,gt=(0,je.Z)(ct.extensions);try{for(gt.s();!(vt=gt.n()).done;){var yt=vt.value;fe.add(yt)}}catch(Et){gt.e(Et)}finally{gt.f()}}}}}catch(Et){it.e(Et)}finally{it.f()}var _t,wt=/\bblend\b/g,St=(0,je.Z)(ne.values());try{for(St.s();!(_t=St.n()).done;){var Ct=_t.value,At=Ct.getShaderCode().replace(wt,"blend".concat(Ct.blendFunction));ee.set($.FRAGMENT_HEAD,ee.get($.FRAGMENT_HEAD)+At+"\n")}}catch(Et){St.e(Et)}finally{St.f()}if(0!==(et&aW)){if(nt){ee.set($.FRAGMENT_MAIN_IMAGE,"float depth = readDepth(UV);\n\n\t"+ee.get($.FRAGMENT_MAIN_IMAGE))}this.needsDepthTexture=null===this.getDepthTexture()}else this.needsDepthTexture=!1;if(tt){ee.set($.FRAGMENT_MAIN_UV,"vec2 transformedUv = vUv;\n"+ee.get($.FRAGMENT_MAIN_UV)),ae.set("UV","transformedUv")}else ae.set("UV","vUv");ee.forEach((function(X,$,ee){return ee.set($,X.trim().replace(/^#/,"\n#"))})),this.uniformCount=de.size,this.varyingCount=Ke,this.skipRendering=0===Ue,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderParts(ee).setExtensions(fe).setUniforms(de).setDefines(ae)}},{key:"recompile",value:function recompile(){this.updateMaterial(),this.verifyResources()}},{key:"getDepthTexture",value:function getDepthTexture(){return this.fullscreenMaterial.depthBuffer}},{key:"setDepthTexture",value:function setDepthTexture(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kr;this.fullscreenMaterial.depthBuffer=X,this.fullscreenMaterial.depthPacking=$;var ee,ne=(0,je.Z)(this.effects);try{for(ne.s();!(ee=ne.n()).done;){var ae=ee.value;ae.setDepthTexture(X,$)}}catch(de){ne.e(de)}finally{ne.f()}}},{key:"render",value:function render(X,$,ee,ne,ae){var de,fe=(0,je.Z)(this.effects);try{for(fe.s();!(de=fe.n()).done;){de.value.update(X,$,ne)}}catch(Ke){fe.e(Ke)}finally{fe.f()}if(!this.skipRendering||this.renderToScreen){var Ue=this.fullscreenMaterial;Ue.inputBuffer=$.texture,Ue.time+=ne,X.setRenderTarget(this.renderToScreen?null:ee),X.render(this.scene,this.camera)}}},{key:"setSize",value:function setSize(X,$){this.fullscreenMaterial.setSize(X,$);var ee,ne=(0,je.Z)(this.effects);try{for(ne.s();!(ee=ne.n()).done;){ee.value.setSize(X,$)}}catch(ae){ne.e(ae)}finally{ne.f()}}},{key:"initialize",value:function initialize(X,$,ee){var ne=this;this.renderer=X;var ae,de=(0,je.Z)(this.effects);try{for(de.s();!(ae=de.n()).done;){var fe=ae.value;fe.initialize(X,$,ee),fe.addEventListener("change",(function(X){return ne.handleEvent(X)}))}}catch(Ue){de.e(Ue)}finally{de.f()}this.updateMaterial(),this.verifyResources(),void 0!==ee&&ee!==Sn&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},{key:"dispose",value:function dispose(){_get(_getPrototypeOf(Kp.prototype),"dispose",this).call(this);var X,$=(0,je.Z)(this.effects);try{for($.s();!(X=$.n()).done;){X.value.dispose()}}catch(ee){$.e(ee)}finally{$.f()}}},{key:"handleEvent",value:function handleEvent(X){if("change"===X.type)this.recompile()}}]),Kp}(HG),uW=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],cW=function(X){_inherits(EA,X);var $=_createSuper(EA);function EA(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ne=ee.resolutionScale,ae=void 0===ne?.5:ne,de=ee.width,fe=void 0===de?JG.AUTO_SIZE:de,Ue=ee.height,je=void 0===Ue?JG.AUTO_SIZE:Ue,Ke=ee.kernelSize,et=void 0===Ke?gW.LARGE:Ke;_classCallCheck(this,EA),(X=$.call(this,"KawaseBlurPass")).renderTargetA=new ro(1,1,{minFilter:_n,magFilter:_n,stencilBuffer:!1,depthBuffer:!1}),X.renderTargetA.texture.name="Blur.Target.A",X.renderTargetB=X.renderTargetA.clone(),X.renderTargetB.texture.name="Blur.Target.B";var tt=X.resolution=new JG(_assertThisInitialized(X),fe,je,ae);return tt.addEventListener("change",(function($){return X.setSize(tt.baseWidth,tt.baseHeight)})),X.blurMaterial=new _G,X.ditheredBlurMaterial=new _G,X.ditheredBlurMaterial.uniforms.scale=X.blurMaterial.uniforms.scale,X.ditheredBlurMaterial.dithering=!0,X.dithering=!1,X.kernelSize=et,X}return _createClass(EA,[{key:"getResolution",value:function getResolution(){return this.resolution}},{key:"width",get:function get(){return this.resolution.width},set:function set(X){this.resolution.preferredWidth=X}},{key:"height",get:function get(){return this.resolution.height},set:function set(X){this.resolution.preferredHeight=X}},{key:"scale",get:function get(){return this.blurMaterial.scale},set:function set(X){this.blurMaterial.scale=X}},{key:"getScale",value:function getScale(){return this.blurMaterial.scale}},{key:"setScale",value:function setScale(X){this.blurMaterial.scale=X}},{key:"getKernelSize",value:function getKernelSize(){return this.kernelSize}},{key:"setKernelSize",value:function setKernelSize(X){this.kernelSize=X}},{key:"getResolutionScale",value:function getResolutionScale(){return this.resolution.scale}},{key:"setResolutionScale",value:function setResolutionScale(X){this.resolution.scale=X}},{key:"render",value:function render(X,$,ee,ne,ae){var de,fe,Ue=this.scene,je=this.camera,Ke=this.renderTargetA,et=this.renderTargetB,tt=uW[this.kernelSize],nt=this.blurMaterial,it=$;for(this.fullscreenMaterial=nt,de=0,fe=tt.length-1;de<fe;++de){var ct=0===(1&de)?Ke:et;nt.kernel=tt[de],nt.inputBuffer=it.texture,X.setRenderTarget(ct),X.render(Ue,je),it=ct}this.dithering&&(nt=this.ditheredBlurMaterial,this.fullscreenMaterial=nt),nt.kernel=tt[de],nt.inputBuffer=it.texture,X.setRenderTarget(this.renderToScreen?null:ee),X.render(Ue,je)}},{key:"setSize",value:function setSize(X,$){var ee=this.resolution;ee.setBaseSize(X,$);var ne=ee.width,ae=ee.height;this.renderTargetA.setSize(ne,ae),this.renderTargetB.setSize(ne,ae),this.blurMaterial.setSize(ne,ae),this.ditheredBlurMaterial.setSize(ne,ae)}},{key:"initialize",value:function initialize(X,$,ee){void 0!==ee&&(this.renderTargetA.texture.type=ee,this.renderTargetB.texture.type=ee,ee!==Sn?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.ditheredBlurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):X.outputEncoding===Xr&&(this.renderTargetA.texture.encoding=Xr,this.renderTargetB.texture.encoding=Xr))}}],[{key:"AUTO_SIZE",get:function get(){return JG.AUTO_SIZE}}]),EA}(HG),hW=function(X){_inherits(QU,X);var $=_createSuper(QU);function QU(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ne=ee.width,ae=void 0===ne?JG.AUTO_SIZE:ne,de=ee.height,fe=void 0===de?JG.AUTO_SIZE:de,Ue=ee.renderTarget,je=ee.luminanceRange,Ke=ee.colorOutput;_classCallCheck(this,QU),(X=$.call(this,"LuminancePass")).fullscreenMaterial=new LG(Ke,je),X.needsSwap=!1,X.renderTarget=Ue,void 0===X.renderTarget&&(X.renderTarget=new ro(1,1,{minFilter:_n,magFilter:_n,stencilBuffer:!1,depthBuffer:!1}),X.renderTarget.texture.name="LuminancePass.Target",X.renderTarget.texture.generateMipmaps=!1);var et=X.resolution=new JG(_assertThisInitialized(X),ae,fe);return et.addEventListener("change",(function($){return X.setSize(et.baseWidth,et.baseHeight)})),X}return _createClass(QU,[{key:"texture",get:function get(){return this.renderTarget.texture}},{key:"getTexture",value:function getTexture(){return this.renderTarget.texture}},{key:"getResolution",value:function getResolution(){return this.resolution}},{key:"render",value:function render(X,$,ee,ne,ae){this.fullscreenMaterial.inputBuffer=$.texture,X.setRenderTarget(this.renderToScreen?null:this.renderTarget),X.render(this.scene,this.camera)}},{key:"setSize",value:function setSize(X,$){var ee=this.resolution;ee.setBaseSize(X,$),this.renderTarget.setSize(ee.width,ee.height)}},{key:"initialize",value:function initialize(X,$,ee){void 0!==ee&&ee!==Sn&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}}]),QU}(HG),dW=function(X){_inherits(JU,X);var $=_createSuper(JU);function JU(X,ee){var ne;return _classCallCheck(this,JU),(ne=$.call(this,"MaskPass",X,ee)).needsSwap=!1,ne.clearPass=new qG(!1,!1,!0),ne.inverse=!1,ne}return _createClass(JU,[{key:"inverted",get:function get(){return this.inverse},set:function set(X){this.inverse=X}},{key:"clear",get:function get(){return this.clearPass.enabled},set:function set(X){this.clearPass.enabled=X}},{key:"getClearPass",value:function getClearPass(){return this.clearPass}},{key:"isInverted",value:function isInverted(){return this.inverted}},{key:"setInverted",value:function setInverted(X){this.inverted=X}},{key:"render",value:function render(X,$,ee,ne,ae){var de=X.getContext(),fe=X.state.buffers,Ue=this.scene,je=this.camera,Ke=this.clearPass,et=this.inverted?0:1,tt=1-et;fe.color.setMask(!1),fe.depth.setMask(!1),fe.color.setLocked(!0),fe.depth.setLocked(!0),fe.stencil.setTest(!0),fe.stencil.setOp(de.REPLACE,de.REPLACE,de.REPLACE),fe.stencil.setFunc(de.ALWAYS,et,4294967295),fe.stencil.setClear(tt),fe.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?Ke.render(X,null):(Ke.render(X,$),Ke.render(X,ee))),this.renderToScreen?(X.setRenderTarget(null),X.render(Ue,je)):(X.setRenderTarget($),X.render(Ue,je),X.setRenderTarget(ee),X.render(Ue,je)),fe.color.setLocked(!1),fe.depth.setLocked(!1),fe.stencil.setLocked(!1),fe.stencil.setFunc(de.EQUAL,1,4294967295),fe.stencil.setOp(de.KEEP,de.KEEP,de.KEEP),fe.stencil.setLocked(!0)}}]),JU}(HG),fW=function(X){_inherits(yo,X);var $=_createSuper(yo);function yo(X){var ee,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"inputBuffer";return _classCallCheck(this,yo),(ee=$.call(this,"ShaderPass")).fullscreenMaterial=X,ee.inputBufferUniform=null,ee.setInput(ne),ee}return _createClass(yo,[{key:"setInput",value:function setInput(X){if(this.inputBufferUniform=null,null!==this.fullscreenMaterial){var $=this.fullscreenMaterial.uniforms;void 0!==$&&void 0!==$[X]&&(this.inputBufferUniform=$[X])}}},{key:"render",value:function render(X,$,ee,ne,ae){null!==this.inputBufferUniform&&null!==$&&(this.inputBufferUniform.value=$.texture),X.setRenderTarget(this.renderToScreen?null:ee),X.render(this.scene,this.camera)}},{key:"initialize",value:function initialize(X,$,ee){void 0!==ee&&ee!==Sn&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}}]),yo}(HG),pW=.001,vW=function(){function ZU(){_classCallCheck(this,ZU),this.previousTime=0,this.currentTime=0,this.delta=0,this.fixedDelta=1e3/60,this.elapsed=0,this.timescale=1,this.fixedDeltaEnabled=!1,this.autoReset=!1}return _createClass(ZU,[{key:"setFixedDeltaEnabled",value:function setFixedDeltaEnabled(X){return this.fixedDeltaEnabled=X,this}},{key:"isAutoResetEnabled",value:function isAutoResetEnabled(X){return this.autoReset}},{key:"setAutoResetEnabled",value:function setAutoResetEnabled(X){return typeof document<"u"&&void 0!==document.hidden&&(X?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this.autoReset=X),this}},{key:"getDelta",value:function getDelta(){return this.delta*pW}},{key:"getFixedDelta",value:function getFixedDelta(){return this.fixedDelta*pW}},{key:"setFixedDelta",value:function setFixedDelta(X){return this.fixedDelta=1e3*X,this}},{key:"getElapsed",value:function getElapsed(){return this.elapsed*pW}},{key:"getTimescale",value:function getTimescale(){return this.timescale}},{key:"setTimescale",value:function setTimescale(X){return this.timescale=X,this}},{key:"update",value:function update(X){return this.fixedDeltaEnabled?this.delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=void 0!==X?X:performance.now(),this.delta=this.currentTime-this.previousTime),this.delta*=this.timescale,this.elapsed+=this.delta,this}},{key:"reset",value:function reset(){return this.delta=0,this.elapsed=0,this.currentTime=performance.now(),this}},{key:"handleEvent",value:function handleEvent(X){document.hidden||(this.currentTime=performance.now())}},{key:"dispose",value:function dispose(){this.setAutoResetEnabled(!1)}}]),ZU}(),mW=function(){function _A(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,$=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},ee=$.depthBuffer,ne=void 0===ee||ee,ae=$.stencilBuffer,de=void 0!==ae&&ae,fe=$.multisampling,Ue=void 0===fe?0:fe,je=$.frameBufferType;_classCallCheck(this,_A),this.renderer=null,this.inputBuffer=this.createBuffer(ne,de,je,Ue),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new jG,this.depthTexture=null,this.passes=[],this.timer=new vW,this.autoRenderToScreen=!0,this.setRenderer(X)}return _createClass(_A,[{key:"multisampling",get:function get(){return this.inputBuffer.samples||0},set:function set(X){var $=this.inputBuffer,ee=this.multisampling;ee>0&&X>0?(this.inputBuffer.samples=X,this.outputBuffer.samples=X,this.inputBuffer.dispose(),this.outputBuffer.dispose()):ee!==X&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer($.depthBuffer,$.stencilBuffer,$.texture.type,X),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}},{key:"getTimer",value:function getTimer(){return this.timer}},{key:"getRenderer",value:function getRenderer(){return this.renderer}},{key:"setRenderer",value:function setRenderer(X){if(this.renderer=X,null!==X){var $=X.getSize(new va),ee=X.getContext().getContextAttributes().alpha,ne=this.inputBuffer.texture.type;ne===Sn&&X.outputEncoding===Xr&&(this.inputBuffer.texture.encoding=Xr,this.outputBuffer.texture.encoding=Xr,this.inputBuffer.dispose(),this.outputBuffer.dispose()),X.autoClear=!1,this.setSize($.width,$.height);var ae,de=(0,je.Z)(this.passes);try{for(de.s();!(ae=de.n()).done;){ae.value.initialize(X,ee,ne)}}catch(fe){de.e(fe)}finally{de.f()}}}},{key:"replaceRenderer",value:function replaceRenderer(X){var $=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],ee=this.renderer,ne=ee.domElement.parentNode;return this.setRenderer(X),$&&null!==ne&&(ne.removeChild(ee.domElement),ne.appendChild(X.domElement)),ee}},{key:"createDepthTexture",value:function createDepthTexture(){var X=this.depthTexture=new Gp;return this.inputBuffer.depthTexture=X,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(X.format=Ln,X.type=Tn):X.type=An,X}},{key:"deleteDepthTexture",value:function deleteDepthTexture(){if(null!==this.depthTexture){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();var X,$=(0,je.Z)(this.passes);try{for($.s();!(X=$.n()).done;){X.value.setDepthTexture(null)}}catch(ee){$.e(ee)}finally{$.f()}}}},{key:"createBuffer",value:function createBuffer(X,$,ee,ne){var ae,de=this.renderer,fe=null===de?new va:de.getDrawingBufferSize(new va),Ue={minFilter:_n,magFilter:_n,stencilBuffer:$,depthBuffer:X,type:ee};return ne>0?((ae=Number(Ht.replace(/\D+/g,""))<138?new sw(fe.width,fe.height,Ue):new ro(fe.width,fe.height,Ue)).ignoreDepthForMultisampleCopy=!1,ae.samples=ne):ae=new ro(fe.width,fe.height,Ue),ee===Sn&&null!==de&&de.outputEncoding===Xr&&(ae.texture.encoding=Xr),ae.texture.name="EffectComposer.Buffer",ae.texture.generateMipmaps=!1,ae}},{key:"addPass",value:function addPass(X,$){var ee=this.passes,ne=this.renderer,ae=ne.getDrawingBufferSize(new va),de=ne.getContext().getContextAttributes().alpha,fe=this.inputBuffer.texture.type;if(X.setRenderer(ne),X.setSize(ae.width,ae.height),X.initialize(ne,de,fe),this.autoRenderToScreen&&(ee.length>0&&(ee[ee.length-1].renderToScreen=!1),X.renderToScreen&&(this.autoRenderToScreen=!1)),void 0!==$?ee.splice($,0,X):ee.push(X),this.autoRenderToScreen&&(ee[ee.length-1].renderToScreen=!0),X.needsDepthTexture||null!==this.depthTexture)if(null===this.depthTexture){var Ue,Ke=this.createDepthTexture(),et=(0,je.Z)(ee);try{for(et.s();!(Ue=et.n()).done;)(X=Ue.value).setDepthTexture(Ke)}catch(tt){et.e(tt)}finally{et.f()}}else X.setDepthTexture(this.depthTexture)}},{key:"removePass",value:function removePass(X){var $=this.passes,ee=$.indexOf(X);if(-1!==ee&&$.splice(ee,1).length>0){if(null!==this.depthTexture){$.reduce((function s(X,$){return X||$.needsDepthTexture}),!1)||(X.getDepthTexture()===this.depthTexture&&X.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&ee===$.length&&(X.renderToScreen=!1,$.length>0&&($[$.length-1].renderToScreen=!0))}}},{key:"removeAllPasses",value:function removeAllPasses(){var X=this.passes;this.deleteDepthTexture(),X.length>0&&(this.autoRenderToScreen&&(X[X.length-1].renderToScreen=!1),this.passes=[])}},{key:"render",value:function render(X){var $,ee,ne,ae=this.renderer,de=this.copyPass,fe=this.inputBuffer,Ue=this.outputBuffer,Ke=!1;void 0===X&&(X=this.timer.update().getDelta());var et,tt=(0,je.Z)(this.passes);try{for(tt.s();!(et=tt.n()).done;){var nt=et.value;nt.enabled&&(nt.render(ae,fe,Ue,X,Ke),nt.needsSwap&&(Ke&&(de.renderToScreen=nt.renderToScreen,$=ae.getContext(),(ee=ae.state.buffers.stencil).setFunc($.NOTEQUAL,1,4294967295),de.render(ae,fe,Ue,X,Ke),ee.setFunc($.EQUAL,1,4294967295)),ne=fe,fe=Ue,Ue=ne),nt instanceof dW?Ke=!0:nt instanceof GG&&(Ke=!1))}}catch(it){tt.e(it)}finally{tt.f()}}},{key:"setSize",value:function setSize(X,$,ee){var ne=this.renderer;if(void 0===X||void 0===$){var ae=ne.getSize(new va);X=ae.width,$=ae.height}ne.setSize(X,$,ee);var de=ne.getDrawingBufferSize(new va);this.inputBuffer.setSize(de.width,de.height),this.outputBuffer.setSize(de.width,de.height);var fe,Ue=(0,je.Z)(this.passes);try{for(Ue.s();!(fe=Ue.n()).done;){fe.value.setSize(de.width,de.height)}}catch(Ke){Ue.e(Ke)}finally{Ue.f()}}},{key:"reset",value:function reset(){var X=this.timer.isAutoResetEnabled();this.dispose(),this.autoRenderToScreen=!0,this.timer.setAutoResetEnabled(X)}},{key:"dispose",value:function dispose(){var X,$=(0,je.Z)(this.passes);try{for($.s();!(X=$.n()).done;){X.value.dispose()}}catch(ee){$.e(ee)}finally{$.f()}this.passes=[],null!==this.inputBuffer&&this.inputBuffer.dispose(),null!==this.outputBuffer&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose()}}]),_A}(),gW={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3,VERY_LARGE:4,HUGE:5},yW="#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D map;\n#else\nuniform lowp sampler2D map;\n#endif\nuniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=clamp(texture2D(map,uv)*intensity,0.0,1.0);}",bW=function(X){_inherits(CA,X);var $=_createSuper(CA);function CA(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ne=ee.blendFunction,ae=void 0===ne?tW:ne,de=ee.luminanceThreshold,fe=void 0===de?.9:de,Ue=ee.luminanceSmoothing,je=void 0===Ue?.025:Ue,Ke=ee.resolutionScale,et=void 0===Ke?.5:Ke,tt=ee.intensity,nt=void 0===tt?1:tt,it=ee.width,ct=void 0===it?JG.AUTO_SIZE:it,dt=ee.height,vt=void 0===dt?JG.AUTO_SIZE:dt,gt=ee.kernelSize,yt=void 0===gt?gW.LARGE:gt;_classCallCheck(this,CA),(X=$.call(this,"BloomEffect",yW,{blendFunction:ae,uniforms:new Map([["map",new g_(null)],["intensity",new g_(nt)]])})).renderTarget=new ro(1,1,{minFilter:_n,magFilter:_n,stencilBuffer:!1,depthBuffer:!1}),X.renderTarget.texture.name="Bloom.Target",X.renderTarget.texture.generateMipmaps=!1,X.uniforms.get("map").value=X.renderTarget.texture,X.luminancePass=new hW({renderTarget:X.renderTarget,colorOutput:!0}),X.luminanceMaterial.threshold=fe,X.luminanceMaterial.smoothingFactor=je,X.blurPass=new cW({resolutionScale:et,width:ct,height:vt,kernelSize:yt});var _t=X.blurPass.getResolution();return _t.addEventListener("change",(function($){return X.setSize(_t.baseWidth,_t.baseHeight)})),X}return _createClass(CA,[{key:"texture",get:function get(){return this.renderTarget.texture}},{key:"getTexture",value:function getTexture(){return this.renderTarget.texture}},{key:"resolution",get:function get(){return this.blurPass.resolution}},{key:"getResolution",value:function getResolution(){return this.blurPass.resolution}},{key:"getBlurPass",value:function getBlurPass(){return this.blurPass}},{key:"getLuminancePass",value:function getLuminancePass(){return this.luminancePass}},{key:"luminanceMaterial",get:function get(){return this.luminancePass.fullscreenMaterial}},{key:"getLuminanceMaterial",value:function getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}},{key:"width",get:function get(){return this.resolution.width},set:function set(X){this.resolution.preferredWidth=X}},{key:"height",get:function get(){return this.resolution.height},set:function set(X){this.resolution.preferredHeight=X}},{key:"dithering",get:function get(){return this.blurPass.dithering},set:function set(X){this.blurPass.dithering=X}},{key:"kernelSize",get:function get(){return this.blurPass.kernelSize},set:function set(X){this.blurPass.kernelSize=X}},{key:"distinction",get:function get(){return console.warn(this.name,"distinction was removed"),1},set:function set(X){console.warn(this.name,"distinction was removed")}},{key:"intensity",get:function get(){return this.uniforms.get("intensity").value},set:function set(X){this.uniforms.get("intensity").value=X}},{key:"getIntensity",value:function getIntensity(){return this.intensity}},{key:"setIntensity",value:function setIntensity(X){this.intensity=X}},{key:"getResolutionScale",value:function getResolutionScale(){return this.resolution.scale}},{key:"setResolutionScale",value:function setResolutionScale(X){this.resolution.scale=X}},{key:"update",value:function update(X,$,ee){var ne=this.renderTarget;this.luminancePass.enabled?(this.luminancePass.render(X,$,ne),this.blurPass.render(X,ne,ne)):this.blurPass.render(X,$,ne)}},{key:"setSize",value:function setSize(X,$){var ee=this.resolution;ee.setBaseSize(X,$),this.renderTarget.setSize(ee.width,ee.height),this.luminancePass.resolution.copy(ee)}},{key:"initialize",value:function initialize(X,$,ee){this.blurPass.initialize(X,$,ee),void 0!==ee&&(this.renderTarget.texture.type=ee,X.outputEncoding===Xr&&(this.renderTarget.texture.encoding=Xr))}}]),CA}(sW),xW="uniform float brightness;uniform float contrast;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=inputColor.rgb+vec3(brightness-0.5);if(contrast>0.0){color/=vec3(1.0-contrast);}else{color*=vec3(1.0+contrast);}outputColor=vec4(min(color+vec3(0.5),1.0),inputColor.a);}",_W=function(X){_inherits(DA,X);var $=_createSuper(DA);function DA(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ee=X.blendFunction,ne=void 0===ee?$G:ee,ae=X.brightness,de=void 0===ae?0:ae,fe=X.contrast,Ue=void 0===fe?0:fe;return _classCallCheck(this,DA),$.call(this,"BrightnessContrastEffect",xW,{blendFunction:ne,uniforms:new Map([["brightness",new g_(de)],["contrast",new g_(Ue)]])})}return _createClass(DA,[{key:"brightness",get:function get(){return this.uniforms.get("brightness").value},set:function set(X){this.uniforms.get("brightness").value=X}},{key:"getBrightness",value:function getBrightness(X){return this.brightness}},{key:"setBrightness",value:function setBrightness(X){this.brightness=X}},{key:"contrast",get:function get(){return this.uniforms.get("contrast").value},set:function set(X){this.uniforms.get("contrast").value=X}},{key:"getContrast",value:function getContrast(X){return this.contrast}},{key:"setContrast",value:function setContrast(X){this.contrast=X}}]),DA}(sW),wW="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",SW=function(X){_inherits(PA,X);var $=_createSuper(PA);function PA(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$G;return _classCallCheck(this,PA),$.call(this,"ColorAverageEffect",wW,{blendFunction:X})}return _createClass(PA)}(sW),kW="varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=texture2D(inputBuffer,vUvR).ra;vec2 ba=texture2D(inputBuffer,vUvB).ba;outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}",CW="uniform vec2 offset;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vUvR=uv+shift;vUvB=uv-shift;}",AW=function(X){_inherits(LA,X);var $=_createSuper(LA);function LA(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ee=X.blendFunction,ne=void 0===ee?$G:ee,ae=X.offset,de=void 0===ae?new va(.001,5e-4):ae;return _classCallCheck(this,LA),$.call(this,"ChromaticAberrationEffect",kW,{vertexShader:CW,blendFunction:ne,attributes:oW,uniforms:new Map([["offset",new g_(de)]])})}return _createClass(LA,[{key:"offset",get:function get(){return this.uniforms.get("offset").value},set:function set(X){this.uniforms.get("offset").value=X}},{key:"getOffset",value:function getOffset(){return this.offset}},{key:"setOffset",value:function setOffset(X){this.offset=X}}]),LA}(sW),MW="#ifdef FRAMEBUFFER_PRECISION_HIGH\nuniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;\n#else\nuniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;\n#endif\nuniform lowp sampler2D nearCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);float CoCNear=texture2D(nearCoCBuffer,uv).r;CoCNear=min(CoCNear*scale,1.0);vec4 result=inputColor*(1.0-colorFar.a)+colorFar;result=mix(result,colorNear,CoCNear);outputColor=result;}",EW=function(X){_inherits(IA,X);var $=_createSuper(IA);function IA(X){var ee,ne=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},ae=ne.blendFunction,de=void 0===ae?$G:ae,fe=ne.worldFocusDistance,Ue=ne.worldFocusRange,je=ne.focusDistance,Ke=void 0===je?0:je,et=ne.focalLength,tt=void 0===et?.1:et,nt=ne.focusRange,it=void 0===nt?tt:nt,ct=ne.bokehScale,dt=void 0===ct?1:ct,vt=ne.width,gt=void 0===vt?JG.AUTO_SIZE:vt,yt=ne.height,_t=void 0===yt?JG.AUTO_SIZE:yt;_classCallCheck(this,IA),(ee=$.call(this,"DepthOfFieldEffect",MW,{blendFunction:de,attributes:aW,uniforms:new Map([["nearColorBuffer",new g_(null)],["farColorBuffer",new g_(null)],["nearCoCBuffer",new g_(null)],["scale",new g_(1)]])})).camera=X,ee.renderTarget=new ro(1,1,{minFilter:_n,magFilter:_n,stencilBuffer:!1,depthBuffer:!1}),ee.renderTarget.texture.name="DoF.Intermediate",ee.renderTarget.texture.generateMipmaps=!1,ee.renderTargetMasked=ee.renderTarget.clone(),ee.renderTargetMasked.texture.name="DoF.Masked.Far",ee.renderTargetNear=ee.renderTarget.clone(),ee.renderTargetNear.texture.name="DoF.Bokeh.Near",ee.uniforms.get("nearColorBuffer").value=ee.renderTargetNear.texture,ee.renderTargetFar=ee.renderTarget.clone(),ee.renderTargetFar.texture.name="DoF.Bokeh.Far",ee.uniforms.get("farColorBuffer").value=ee.renderTargetFar.texture,ee.renderTargetCoC=ee.renderTarget.clone(),ee.renderTargetCoC.texture.name="DoF.CoC",ee.renderTargetCoCBlurred=ee.renderTargetCoC.clone(),ee.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",ee.uniforms.get("nearCoCBuffer").value=ee.renderTargetCoCBlurred.texture,ee.cocPass=new fW(new yG(X));var wt=ee.cocMaterial;wt.focusDistance=Ke,wt.focusRange=it,void 0!==fe&&(wt.worldFocusDistance=fe),void 0!==Ue&&(wt.worldFocusRange=Ue),ee.blurPass=new cW({kernelSize:gW.MEDIUM,width:gt,height:_t});var St=ee.blurPass.getResolution();St.addEventListener("change",(function(X){return ee.setSize(St.getBaseWidth(),St.getBaseHeight())})),ee.maskPass=new fW(new IG(ee.renderTargetCoC.texture));var Ct=ee.maskPass.fullscreenMaterial;return Ct.maskFunction=BG,Ct.colorChannel=pG,ee.bokehNearBasePass=new fW(new gG(!1,!0)),ee.bokehNearBasePass.fullscreenMaterial.cocBuffer=ee.renderTargetCoCBlurred.texture,ee.bokehNearFillPass=new fW(new gG(!0,!0)),ee.bokehNearFillPass.fullscreenMaterial.cocBuffer=ee.renderTargetCoCBlurred.texture,ee.bokehFarBasePass=new fW(new gG(!1,!1)),ee.bokehFarBasePass.fullscreenMaterial.cocBuffer=ee.renderTargetCoC.texture,ee.bokehFarFillPass=new fW(new gG(!0,!1)),ee.bokehFarFillPass.fullscreenMaterial.cocBuffer=ee.renderTargetCoC.texture,ee.target=null,ee.bokehScale=dt,ee}return _createClass(IA,[{key:"cocTexture",get:function get(){return this.renderTargetCoC.texture}},{key:"cocMaterial",get:function get(){return this.cocPass.fullscreenMaterial}},{key:"circleOfConfusionMaterial",get:function get(){return this.cocMaterial}},{key:"getCircleOfConfusionMaterial",value:function getCircleOfConfusionMaterial(){return this.circleOfConfusionMaterial}},{key:"getBlurPass",value:function getBlurPass(){return this.blurPass}},{key:"resolution",get:function get(){return this.blurPass.getResolution()}},{key:"getResolution",value:function getResolution(){return this.blurPass.getResolution()}},{key:"bokehScale",get:function get(){return this.uniforms.get("scale").value},set:function set(X){for(var $=0,ee=[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];$<ee.length;$++){ee[$].fullscreenMaterial.setScale(X)}this.maskPass.fullscreenMaterial.setStrength(X),this.uniforms.get("scale").value=X}},{key:"getBokehScale",value:function getBokehScale(){return this.bokehScale}},{key:"setBokehScale",value:function setBokehScale(X){this.bokehScale=X}},{key:"getTarget",value:function getTarget(){return this.target}},{key:"setTarget",value:function setTarget(X){this.target=X}},{key:"calculateFocusDistance",value:function calculateFocusDistance(X){var $=this.camera;return Wv(-$.position.distanceTo(X),$.near,$.far)}},{key:"setDepthTexture",value:function setDepthTexture(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kr;this.circleOfConfusionMaterial.depthBuffer=X,this.circleOfConfusionMaterial.depthPacking=$}},{key:"update",value:function update(X,$,ee){var ne=this.renderTarget,ae=this.renderTargetCoC,de=this.renderTargetCoCBlurred,fe=this.renderTargetMasked;if(null!==this.target){var Ue=this.calculateFocusDistance(this.target);this.circleOfConfusionMaterial.focusDistance=Ue}this.cocPass.render(X,null,ae),this.blurPass.render(X,ae,de),this.maskPass.render(X,$,fe),this.bokehFarBasePass.render(X,fe,ne),this.bokehFarFillPass.render(X,ne,this.renderTargetFar),this.bokehNearBasePass.render(X,$,ne),this.bokehNearFillPass.render(X,ne,this.renderTargetNear)}},{key:"setSize",value:function setSize(X,$){var ee=this.resolution;ee.setBaseSize(X,$);var ne=ee.width,ae=ee.height,de=[this.cocPass,this.blurPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass];de.push(this.renderTargetCoC,this.renderTargetMasked),de.forEach((function(ee){return ee.setSize(X,$)})),(de=[this.renderTarget,this.renderTargetNear,this.renderTargetFar,this.renderTargetCoCBlurred]).forEach((function(X){return X.setSize(ne,ae)})),[this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach((function(X){return X.fullscreenMaterial.setSize(ne,ae)}))}},{key:"initialize",value:function initialize(X,$,ee){[this.cocPass,this.maskPass,this.bokehNearBasePass,this.bokehNearFillPass,this.bokehFarBasePass,this.bokehFarFillPass].forEach((function(ne){return ne.initialize(X,$,ee)})),this.blurPass.initialize(X,$,Sn),void 0!==ee&&(this.renderTarget.texture.type=ee,this.renderTargetNear.texture.type=ee,this.renderTargetFar.texture.type=ee,this.renderTargetMasked.texture.type=ee,X.outputEncoding===Xr&&(this.renderTarget.texture.encoding=Xr,this.renderTargetNear.texture.encoding=Xr,this.renderTargetFar.texture.encoding=Xr,this.renderTargetMasked.texture.encoding=Xr))}}]),IA}(sW),TW=(new wo,new Ds,"uniform vec3 hue;uniform float saturation;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 color=vec3(dot(inputColor.rgb,hue.xyz),dot(inputColor.rgb,hue.zxy),dot(inputColor.rgb,hue.yzx));float average=(color.r+color.g+color.b)/3.0;vec3 diff=average-color;if(saturation>0.0){color+=diff*(1.0-1.0/(1.001-saturation));}else{color+=diff*-saturation;}outputColor=vec4(min(color,1.0),inputColor.a);}"),PW=function(X){_inherits(RA,X);var $=_createSuper(RA);function RA(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ne=ee.blendFunction,ae=void 0===ne?$G:ne,de=ee.hue,fe=void 0===de?0:de,Ue=ee.saturation,je=void 0===Ue?0:Ue;return _classCallCheck(this,RA),(X=$.call(this,"HueSaturationEffect",TW,{blendFunction:ae,uniforms:new Map([["hue",new g_(new wo)],["saturation",new g_(je)]])})).hue=fe,X}return _createClass(RA,[{key:"saturation",get:function get(){return this.uniforms.get("saturation").value},set:function set(X){this.uniforms.get("saturation").value=X}},{key:"getSaturation",value:function getSaturation(){return this.saturation}},{key:"setSaturation",value:function setSaturation(X){this.saturation=X}},{key:"hue",get:function get(){var X=this.uniforms.get("hue").value;return Math.acos((3*X.x-1)/2)},set:function set(X){var $=Math.sin(X),ee=Math.cos(X);this.uniforms.get("hue").value.set((2*ee+1)/3,(-Math.sqrt(3)*$-ee+1)/3,(Math.sqrt(3)*$-ee+1)/3)}},{key:"getHue",value:function getHue(){return this.hue}},{key:"setHue",value:function setHue(X){this.hue=X}}]),RA}(sW),DW=(new Ma,"void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 noise=vec3(rand(uv*time));\n#ifdef PREMULTIPLY\noutputColor=vec4(min(inputColor.rgb*noise,vec3(1.0)),inputColor.a);\n#else\noutputColor=vec4(noise,inputColor.a);\n#endif\n}"),LW=function(X){_inherits(BA,X);var $=_createSuper(BA);function BA(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ne=ee.blendFunction,ae=void 0===ne?tW:ne,de=ee.premultiply,fe=void 0!==de&&de;return _classCallCheck(this,BA),(X=$.call(this,"NoiseEffect",DW,{blendFunction:ae})).premultiply=fe,X}return _createClass(BA,[{key:"premultiply",get:function get(){return this.defines.has("PREMULTIPLY")},set:function set(X){this.premultiply!==X&&(X?this.defines.set("PREMULTIPLY","1"):this.defines.delete("PREMULTIPLY"),this.setChanged())}},{key:"isPremultiplied",value:function isPremultiplied(){return this.premultiply}},{key:"setPremultiplied",value:function setPremultiplied(X){this.premultiply=X}}]),BA}(sW),OW="uniform bool active;uniform vec2 d;void mainUv(inout vec2 uv){if(active){uv=vec2(d.x*(floor(uv.x/d.x)+0.5),d.y*(floor(uv.y/d.y)+0.5));}}",RW=function(X){_inherits(NA,X);var $=_createSuper(NA);function NA(){var X,ee=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return _classCallCheck(this,NA),(X=$.call(this,"PixelationEffect",OW,{uniforms:new Map([["active",new g_(!1)],["d",new g_(new va)]])})).resolution=new va,X.d=0,X.granularity=ee,X}return _createClass(NA,[{key:"granularity",get:function get(){return this.d},set:function set(X){var $=Math.floor(X);$%2>0&&($+=1),this.d=$,this.uniforms.get("active").value=$>0,this.setSize(this.resolution.width,this.resolution.height)}},{key:"getGranularity",value:function getGranularity(){return this.granularity}},{key:"setGranularity",value:function setGranularity(X){this.granularity=X}},{key:"setSize",value:function setSize(X,$){this.resolution.set(X,$),this.uniforms.get("d").value.setScalar(this.d).divide(this.resolution)}}]),NA}(sW),BW=(Math.PI,new wo,new wo,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAAQCAYAAACm53kpAAAAeElEQVRYR+2XSwqAMAxEJ168ePEqwRSKhIIiuHjJqiU0gWE+1CQdApcVAMUAuARaMGCX1MIL/Ow13++9lW2s3mW9MWvsnWc/2fvGygwPAN4E8QzAA4CXAB6AHjG4JTHYI1ey3pcx6FHnEfhLDOIBKAmUBK6/ANUDTlROXAHd9EC1AAAAAElFTkSuQmCC"),IW="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKAAAAIwCAYAAAABNmBHAAAgAElEQVR4Xuy9CbhlV1ktOvbpq09DkiIkUBI6kxASIH0DlAQiIK1wRfSJTx+i4JX7vKIigs8HXpXvqVcvrcC9agQ7IDTSSWgqCQQliDRBJKkkhDSkqVPNqVOnP+8b//rH3P+eZ+199tlznVTlvVrft7+1T7OaueZY42/m37QALKNk2wHg1pITlB17mC+Pp11W3X/LHyT32vhg48/5SOv+PnwpsHA70JoGlueB1iKApeqzvOzn44GatTB76Xzhd7suBR7+WWADgDEAwwCG/L54b/poDLrHuvvm70Z2Avhsc+PVcxscBU8F8C8ADg5+ipIjD/PlGwfgju8B924E5seARUfLsiNmqQW0IjL8+7L2NYD/7COBzfcCm+aB8SVgdAkYIRCXKyDax4EdAanL5PuNPllNvXDlAHwFgP8AcC2AhRIoDXbsYb48dl5WkVFTE3LGDcC9m4CZCWBuFFgeAZaGAYJQQCRqDHT+McJrVb8zwATUXH02MHYfMHEIGFsAxgjApQqACYQORjtd/B7Axt/z79sC0+cMPgjjlwPwVwHcA+DfAHzTxcVgWBroqMN8+cYBeM71wH0TwKExYHYUWCIAHYRLTlkCYgcIBcAgU/n3qy8GRu4HRgnAOWBkERhddPAJhGJDBxkvw7cqimr+zFM/ZLnZF64cgL8BYD+AWwB8x/dlWuWagHiYL984AJ/0RWBy1AE4AizyM1yxYAcTigW55xMbAkxEiwEdkJ/ZCQxPAiOHgBECcKEC4TBZcKkSv+mTieNcNPNC26mLNsj45QD8LQDTAO4GcJt/7iw2bfoG4WG+vAGwm9ExiEg69zpg/wgwPQLMjgALzn4E4aIzoJjQ9g4024uygkj+pyuAoX0VAIfngOH5NgCHMhAm8Sv2y3XDZeBhNIp8OzJE8OsBzAKYBHAXgDt8/4O+MVT0j4f58o0D8Pxrgf3DwMwIMEPQEYRkNwfgsuuDZLskip0No0gWMD/9HGDoADAkAC4Aw/wsAgZAgs2Z0ABI0GU6IVmKv+f28KDnHxkA/G0A8y6G73N9kOCjXnh/Ebb6OvgwX75xAF5wLTA1VIHPADgMLDj4yIA5AAm6aCUnv4oz46eeDwxNAUMzwJAz4BABSNDFTwSfg7DDKHE23MG5PqIY8A1u/dINs9dBdy8AgnGPM2NfUBrsnw7z5RsH4IXXAAcJviFgluAbygBINnSLWOAjGxJ4pgOKDV0v/OSLKp8iGXBovhLBBOCQM2ACoTOhnYrAdItYbCij5JFzRyIAqRccAnDAQUjg6UNQ7hsMXP0cRQAexss3DsCLCECCLwCQzMcPwUi2MwAScAKbfnY/YRLFQ8DHX+IAJAMSfDkAF13kLvleIjhjQQHxUVS3jjgGpKeeNzYVQEjgUS8k+PghONdhIwAP4+XXBYCHKIJbwJyDTgaIAdCBJx3Q2M8tYAHP9m4df/ylQOsQ0JqtRLCx30K1wtLBggScQOgsKBGcWHAJeOwRC0BSM1mQIKRbhh+Bj98JQP6t4U0APEyXXxcAEnxkQAFwoVUxID9kvQg+c1C7vidRbIDkc24B//hTQGumDcCWA5DgMxASdNIFBUI5pCML8v8API5zfEQx4BudgqiczviSnJhQwCP4BMCGl+wO8+U7AJi/W4O4YS6+pmK/2ciADsAOBhTIIiAJnPB7AvNjP+0AnANaYkAHX2JBAc+tYaJXOqBZv24Vc386XW5dtkHGW+4HFAJonpOe+YYQZAShgKjv3PNvPQaxVoI8zJdfFwASfPzMUwS3Kt1v0UFIlos6oDFdAGFcliMAP/ryAEAGNwQRnDOgLbdlIEwrIs6AZ/QgkMMHQF6ZAKQcJAsSYPwIeAIk9wJgoPK1gi7+PwF4GC/fOAAvIQPSs0URTPBJ/Pp3GSEGRHfBCIQ0xowBtUbcAj7ys5X4Jfu1HIAGQrIgQRXEsAFQIORDFhiDY/rMHmrU4QUgR08AkgUjCAW6CD6CkwBsAIQC4GG6fPMA3OXiNzCg2I9gNCMksmAAoemDzoimFwL48M85AKkiuQVMAAp8CYRRDAt8GQiJ67N6GJODAXAHlsGguscA2AJg1IPGYmxOpBxFWkRN9LsATgIwXnNs/v/5z/9XCf8BO3YAtxbc/46/KDt+5+ea1Yku2VUxHz/z0v24FwMGK1gWsK2OUUxHHdCBeRUB6OxHABr4ZICIBd0QWSF+XRdMTAjgCdTrG9cBNwE4F8CpDkICyYLGsuhFt6zs+gISwUen8zEAjgMw4cfx2H6O/90yAFo84Cbg4ID3/9TfLTt+5+ebnRABkODjx0SwPi5ec/FrYpmqSAxM8Dn60CsqAFI6GfhqAMiDE/gokmvEr0C4PgDkBQm40wE8zMFEUDKEVoxIMLl/KS73mE7H9d+vcKHQQcjwW0Yu9nP8m8sAmOIBuWY6wP2/4s0ezjjg8TuvaR6ABJ70vxUApGrm7EbGE+i472BAB+WHfqHS/eoAaEwY2E9+wLSXTqhI7CXgnB6LCoOJ4BiST+hTnG0HcCwAglCx3ARoZEVFXnBPp/O/A/hXACc7CPs9/i1lAOyIB+RDX+P9/+pbQjjjAMfv/PL6AFDs1wFAgs/9fgKfgdE/ZEpuiQlbwAde6QAMBgiRmsSwA9BY0JfjovGRDBMH4TlcXGhcBOc6HkF0gjPhZgchxTLZMAci/04W/B6Ab3t09EPXcPyflgFwRTwgJ2MN9/8bf5qFM67x+B/aW4XQz42FeL0YrRyikztUFw0704mf9kXgxhOAqc3AAsPyRxxQCs/PdXOFY0W1KHy3QIUGtx+6vdnx1vsB+dsTncm2AogglFgVEAlUWrOMB2RyEmMCGQ/Y7/HvKns6tfGAnJQ+r/9b76oJZ1zD8WdyQjYBh8aBhVEHjELouQ8ukQ7VRSCJAALwkr+sALhnGzDD3JAJYJHg9uhoi4bx8ytkWUtvHT/7+Zc4dw1uZ3612fH2dkQf7yxIEEockwkJQn4IQoq8unhAhmPRKKFx0uv4K8ueTs94wD7u//VX9ghn7OP4c+4G7h8HpseB+dF2AKlFLwuAIZ8jD6NPrOhAffmfA9/ZBuzZCkyRWSeqBCWyoYGQ5yQrBpDbum/ME1HoPo0XEkSD2zlfbna8q6+EUJcTCxKEtHL5EQjP6BEPyIgYAZBvYt3xHyx7OqvGA65y/7/9wVXCGVc5/sl7qxD66dEqiYgRzAqhN1A4CBNAAlDyAFI+iZ9/N3DLJuC+jcDUBmCWyUnOrmTYCMIOkNclLg0B8/RsNLg9+UvNjnd1APLmmQpFHyEBROuWACQT8nN+H/GAvY7/VNnT6SsesMf13/CpahGnZzhjj+PPmwX2MYdDIfQexWyBAwEUOQDrRDN/98p3A7dvAO6fAA5sqHJDBEAyoUVGkwEd6HR12XU4kwzfl6fCXTZzjy57vvnR513X7Hj7AyDvggAUi9EyFgiZqNxPQF6345nOWbD1HQ/Y5fpvuLa/2+82/vNHgAPDFQDnhoF5j2C2qBWCI8bw1eRw5CL5l94L3DEOTI4DB8Y9OWmsEu/zBJ3rgsaybqBob/7A4C7jtWcooRrczr+u2fH2D0AOQgAUCxKEP7aGgLy64+m6KdjWFA9Yc/03/Osa4glrjr+AupqHz1sEs0cxG0BC9HIePLoit9eNkVf9L+DuUWByDJgaq4ybGYLPAWgiXmLedUE7dwC7saL7CqfPKXi4NYdaykCD410bAHlDEsNiwZ9wAPYbkJcfz6T2gm3N8YDZ9d/wHxUA+739fPwXPrSKYGb+BuP3jAFDElFH9HIWwbzCIGkBr/or4J4RYO8oMOW6ZVcAuvi1Cgoha04BCwT5gfMKHm7NoRde2+x41w5A3hQZkADk5+cGiAeMx3+/7AENFA8Yrv/G71cAXFM4Yzj+otOAaQLQA0gZxaIIZtMDFTigKJV8H9Iq6aZ59ZXAvSPAvpEKgBTtBODcSCWCZeRYtpzrmLyeGNCAyFl1v+Hei8qeb370Rdc2O97BAMi7EgB/2QG41nhAHU9LuWAbOB7Qr//GPRUA13r7Gv9FZwIMoVcEswEwfDoimEP0shKKtIphaZQAXv1+YM+wA3DEdcvRKkGJADQQEsQuhi1Tjt95vBsh5nx2IO59SsHDrTmUOStNjndwAAqEry0IyCMICkOyiuIBNwBvPFQQT7gBuPjc9oRYAIHyOEL4vIFEYVNaOou5vCGE/tV/A0wOVcnpzI47NOri3QFIBpSeaSDUdYLOSWvYImSGgftpJDa4MWJbAGxivGUA5MAOc0Be6eVLj7/4Mk+hzCOYPYpZDBiNkLh+G/M3yFyv/ltgL3W3YQfgcFUhgRY2PwY+Z7/EhAR1SFyXCOb57r28QfQBsJQBMn5D4y0HYLPje9Cd7RIC0PM3EiMofF4gVCBp1P840ix/gyz56r+vAMjk9Gl375iB4+CzveuZdLkkEPJ8ZEfX/6R73vOjzT5Si9hucLxHAVg4PwJgRwh9CKOXK8YA4ZEqKZXSQWh5P+5AftXfA/uGKvYjCKn72cctbFrZNECka5L5CPwIPtMH3TVz17MLB5gdLgA2Nd6jACycHwLQxFEUSR5ASvARDB0h9AQb9bXIgCGk6lUfAPYTgEPAITKgg1BObk58srTJgG58WMkWMaAbQQT1nc8rHGANAJsc71EAFs4PAagQestgC1lsBJ4BMCSOK6dDUcwqqaFiQr/0QeAAAdjy+jBiQQeeMSBZT3nCPUDIa9z+/MIB1gCwyfEeBWDh/BCAeQSzgkjFfGLBBD5nxQ4DxN0wv3hVxX5TBGDwL5obxvVA5YqYL5BeMLd66YYxJpRB0gK+96LCAdYAsMnxHgVg4fwIgMrhUPKQ2C+Bz0PmBTqBMQehAbDlIjj4F80KJguSVZ0FuXpjoCOgXawLjALhbT9eOMAuAGxqvEcBWDg/l1IE05Ed0ygZnyHdz0VwCqEPIfNyx0QQvvLDFQCp+8nfZk5und8tXwIgWcHSNX0N2CJmnAl3v6RwgNnhl17T7HiPArBwfghAS7mV/hey2JS9FvM3BLpUUi1YwDRMXvkRYJoAlAh2l0dcZ04s6JUTDIjyBcrl4yDc/dLCAdYAsMnxHgVg4fxwKVwJgGEJNmWtxpQMpX9on2eRhVA+O56AjMfnP+e3Xvf3NwG4xIPTleiY55bpGh6UbafNU0l0z0p+5Jh5HqYJ6b51nP6XP8cx12XNHQVgIQB/bFPVg2OC7Q+WgVFWng/FvtWLI06uWh5oguKEcXVS/9sEAF//VGD7t4ETDgJbF4CNi8CGZWBs2fPL/H6Vwp2KEtVk4fJ+v/EIYPN9wKa5qu+IncfPwXHVZe/aOL3EbwS7xv8A1rQvnO0j8PArTgTGZ4BxFv9mIxhOCGsv+0OPYDRghcLfkWkEuq0+G00x4OtfDGz+d2DbHmDLjL8si8AYP/7CGIAiEEMTG92zXqSbH+d9R2aA0XnvO+JjthiIrOVDHHPOkBrzUQAWAPsZp3oPDpa/Xag6EVkLBK+5rAnJC3/nYk/APD704WiEAV8OTHwX2LQH2DgFbJgFNrBhjd8r79deGoEwsllgNBOzy8CdjweG9wBj08AIAci2D6HafmyAk4/Z7SJ72hGYRwFYAMDLTwOGp4FRFgD3HhzqRGQiyeurqOdG6r0Rm8IEZjzRlkiqCWoEgK8Axm4BJu4HJhyAbFhDxmbDGnZO4j0SgLGDkpibgEq66TJw/1nA0F5gdLpq+zDqFfd5LMeWqu5HNST0uJOIllg+qgMWgI+HPv0xwLA3gWHpW2sC441gCECbmKziaGrnUdMO4aHeh6MxAP4SMHI7ML4HGD8AjHvHJGNAgpDgY/ck3stipRemvVhc+uASMPUEYGh/9dIRgGx8Y+MNbR/00uVtH0wEx94j/v0oAxaA8Ed+GBieAYZZg5kADC0QWGOFzGJlcGPzl1BxNLXD8sk4xftwNAbA/wwM3wGMUmxOOQBnHXzetIYvibonmSiuYTNjriVg7glAiwBk0fNZH6+PmX9P6kfNmCXGpftJ7TgKwBIAnln14BAAYxMYm5C6RjCyCoOyr0qkD/c+HI0B8DXA8N3AyCQwesD1VQKH7EcASm1Q+y4CkN9pUKiVF5nLvy+fBbTUd8QBaH1HvNBROiZvfsNnrF4kcvPwpdsBLBeU18Nf7AB23Dp4ecHC8oBgUlJJecLS+7+WOpE3gbE+HKw+yoevCYkMGKqPJrdEKARutaFYRs1fiEZ0wP8CDN8LDO8FRqYq3W10pgKgfYLaYCzootgA6KXaTA90y374TKB1sBozy77xHFZ536utRgAmEaw6g5kUSFZwSXnA330qsOlfgHMPDlZesLA8IOjoLypPWHj/11EnCiVwkz7kAExtsGraYUWdSDX5TmsagL8KDBGA7Bd30JsW0oWivnEOQNP7yGTSBR101AlZSUtGyfgZDkCWY1HnJdcBVe6325hTvelg2CQjZNDygG/2An0j1wKnL6y9vGBheUC8prQ8YeH9X39OVQSc7Mc6fCaKvAeHdCIVf4yMYCynTpX+nb97NJmlSQb8r8DQHm9YOFUZTKOzoXGhs6AxF0HIexcLBvWBuiHN8s2ne98R3qc6L4Vyb2oBVjfm9MIFHbjDCh6kPOBbQoG+oW8CO5bWVl6wsDwgfr20PGHh/X/1iaEIuDcCTIW/1Q4rFv8OnYiW3c+W2iKwUjKbyjQNwL1uuR6sAEgDgq1brXOmV81PxhNB6DUDBSYzQJwFtz623XcktX1Q1VWKaTF/zZhVazBVYA1tX5MazsGvobwe/jQr0Ne6BTh5uf/ygoXlAfG60vKEhff/rSe1i4DnTWDUACY1guFTDqLYdCBvf6DJYSMYATBfOx1kLfj1v1axH10nQ3Sd0GUkBnTfpemtBJgseIKQAHLQcVxa2TnuMW0Aqui5es8xBIegVdVVE8VhzHnLh65WMB9An+X18K6aAn2tO4ETl6vqbKuVFywsDwhevqg8YeH93/Rk70JE90nowxZbIJjvS3WYNSGUwGHJTpPxwwcbBuBrgRYBeKACn7VtpdUu/c0NJxO9BIxcKu4TTODzbkonPLoaL0vyUQRb2y8HsL1ckfWzMeuFi40Qezqi+yiPhyt7FOjr6/gCFwgP7Xb5vssTFt7/nQRg6MGRWmDRoeyTlpgw68GRTwgZgo1gGmXAX6/8dtaylSKY/koyID9BhzML3q1gAos2AcOrZYSoq/pJp1VtODRm9Z3LS/7WjVkvXOzEtOpKyGrlAT+4SoG+VY8vBGCvy/dVnrDw/vee65NBJiAjBIVcAJQjOm+DkCZEeiGAMw6sAwDZsJrAdhFM9rPGhd4904Co5oVuCZPV6kD40Ec6+9W8dBTBsfdc3nkpvnB82fp2RPcs79dHgb51LA9ofsDV6vut5/3PnxcAmLVBiDqgevDaJLkYrpuQxzcNwN8AWgIgRbB8loEBzXDwl4cGiDGft58SCOWGedgjvOJ+bPvgRkiuA+ZjzhnQQOiFNVbloa7l/fos0LdO5QENgEXlCfs8Qbf7HyMA3QVjYihYhLENgjX9y/qwxQmRU/asfd0ZcLU2CHVGyusJQLKfVi98CS12T5f7iECkHpsMkAhCF8+nshWH2I/jXsOYO144GV/9ApAIrS3vt4YCfetQHtAA2G+/4PW4/2PPbzMgmUMi2NoeSCRxIt2/FvuxWURIWCXg357gfTjEDNIHnTRXRCpH5ugKwGl3HpMBXQc0v6WLYVm/5limj04rG762K2uYY9jBkr9+rI03NL5ZbczS/dJ+LQyoga4o77fGAn0NlwdMAOy3vl/T938KAcj121z8Bn+Y9eWQJRz8Y6kNagDh2ey5EvxjxQD8TWdAuneCCO4An1vw5vdzQMmdktwq7pLZQR+dM34+ZumAxvY1Y04uqOAJ6FsExzeto7zfAAX6GiwPaLWR1lrfr8n7f/Rl3QGzmsis+/uO71V9OFgP2gpPhgr7TGRqRUT6dyvr4aIs/pm/2zVUNbBSv6G8e5pEv0Cvec7Po7+bTtjlBRlkvAMBkDeQyvsNWKCvofKACYBrre/X1P0/oWEAnnFD1YdjhtXxR73mX10FfCHHE9pVWcGAI/S0gKsfA2y+twrFZw6Hxf/F0Pk8Ri/kpGSnMuDx5T0iACgQHioo0NdAecBUHW6QdsV2/cL7v/Cyqr5gnc42CCOcfX1VIZ/V8We9IDmTzVXwPDJiXuKXPxtDBma8+lzP4WAgKkPxCUAPE4v5GzEuMX0PYJPLhB6FJsc7MAMmkVxaYC/K9gG+F1++8AQ7Gwbgk78I7GFpXgIwFiRXOwaJZPUbiR0yCUDRk+cHf+YpwMj9HgfI8ClGPyvsSiH0WSKRuYlitLb/zHM/JOSs5C/YIC9cMQDZr/dwxgOW9gtGYUBi0wA8l304vDQvAchilFbpIBQhZ7Ejq6ZQ0/Yhil8y4j89Axie9DAsD6FX9HOK3QtROTFkviN83kG4felIY8DCeLrSeMDSfsEovAECUFsTjHD+tcB+tkFgcXKvBRir7qtFl9owmO4Xy/1G3bAFfPrZHorFNWBFwHjQAFctIghj2kBarw06If/+MM9ZqTN6DgsDojCerjQesLRfMApvoGkAWh8Ob/tgAPSKWCp8ngNQtadjmTdltvNvn3peFYhgQQgh+iUmEaUAUoXM1yRLmWuFLaE9Z+XIAWBhPF1pPGBpv2AU3kDTALzwmqo6qtVh9kJErAudABia38TC5wJgS2xIhAwBn3yhByL4EhzXfRXxYsDTJ4IvrNN2JFMxZcBzVo4cABbG05XGA5b2C0bhDTQNQLZBYH1AVsQSAAU+imI1obHyblnjG/kJk3U8BHz8xVUQAhnQIl5CyNgKAGp5LKSSCoAySh5Jj79vTagcxUaIBeRNe79g9gq+DXig4wGzy+PONfT7RWFA4noAkGXZVAhcBckJQgNgrLiaNb3paIDo1vHHX+oA9LQBi4DxJcOUPJUnTgU2NJUyROs8irGARxQAC+PpCtsFd40H/AEf0gMQkLgeACT41PiGoLOKqyrJq3K/Ya9mNyr5FusN/uPLPIeDa8Bc+w3rtyl4VFHaMZc3i9RWBM9jjzgAFsbTFbYLRmm/YBTeQNMAtD4cBKDXBTQGdAB2MGBo8SCLmEuS1AFVAJ3A/NhPt0PoCcA8bSDG76XI7aySg6JYuGfKwJHFgH0E5B3ueMCe/Y4L+xVHAOZ+9EHcEgQgwbeiEYx6jwTdz4qfu7EhEJqxGqruf/RnHIAEnxgwBM0aC8aUAYWNBRCmoIll4HTqO122QcZbrgMWxtMVtgvuOx6wa7/jwhtoGoDWh4MBJ16WN4lfr8AqI0TVV1O1fa9BbQzovkAy4Ed+NgCQUSxZCFWvCOaOFREXyUwZOPIA2GdA3uGOB6wPaOz+QPv5S+MA3OXiN9aclghW+d3IgupBF2pPqxcxGenDPxfSRh2ASiKKiVP2PaZScvAKoA0VDc6cOlIB2GdA3uGOB1zR77iwX/F6AFB9ONSOQW0frA50sILVcckWJyIDSgwPAVcJgFbYuZ3FJvAlEHbJ3IsgJLGedeBIA+AAAXmHOx6wo99xYb/i9QKg2iAIfDJEJHqj4SExbEty0gkdhB/6P9oZbBZIGiKYVb9GKaN50lRHBLOvhDxh/5EKwDUG5B3ueMB2QGM/grb7/6wHAPNGMAY+GSGUjC52VX2f2CD4+HO0gqkZfegXKgBaHkcWtS0AWii9xG1ImrLlN5XR8L8fmQD05BVrmEENmpYSP9QX+KHiqj2/82+HqqDWwnbBRfGATdzAegGwru2DpRq7Mzq2fpAf0Nq0Rl2wBXzglZ4yUAPAmDSVWDBPHQjLcgTqOZ6zUvdKHh4ruDCerox/Dnu7YqwXAC1NI/QcEQuK6WK/kdgCTGC0PYAP/KIDMBgglq+hIkrOfsaCviLSofcJgJ5AdM7kkSaCj/HqQKVIGvD4swF8bcBjmzjsaQ2H5D/6acBd9wALB4DFWWB5AVherMp4GKIYEOp7+26UF0aSfT/xYuDG7wDjrIpAERytXf2vajj7ueryQXSFl10K/ON3gIWDwCLvjfGB8Z54O+Ee4ve6513uB2R1yzsqC+twbC8HcNVhfAeaBuDP/TvwtS3A/ePAIfYFVlPq2HHTuyulZCTlhbjhETF5yxTQGgPGhoHhIWC4VSXGD3n0tLkMHXHxu+YyB+MlPwDuZs5K6FlsbCzdVO9DuKfkHM8AEkP7B8fOkwDcD+B7np42+JkGOvKdAL4E4K8P0zvQdET0b14D3DgB3D0B7B8HZka9WzrD88N6sFm+YcUjrn7E1ZDvMtF9DBgeAYaHgSGB0PNHCD4BLwLRsByAyX/ij0/dDUxuqlIG5hix7eFhvLcOVUAtyPSydAFmOQNe6EYGV/9ZESiKgIEgtbaD/gHALQC4ovY5r5KwtjOU/XfTAHzzLuCmIeDuMWDvKHBwpMoN0WQzNtAaYSs0K4ZlOSAjGG9kPjCBRwZ0ABKEBJexYAZEAU3A7Oi1BeDym4EDnjQ1TwCGWMW8MXcKks0YOyZNlQOQjcgYIUHllEzYQ0ktm+r6oz8G4F4AXwXwRd8/kO9A0wB8y65KmPxgGJgcqYJTKYpTv2CCzyddQJRDOjKivn+Deh8BF8BnwBtaCUA+YYEyAU8h+c6Az9gNHHRmrgOgmDA3jHQ+iWupCeUAvNSrA9HNwqx+muk9nJVNg/CTfrmbAPwbgK8D+PcHkIibjob5o13A3XypWsAkG1cPA9PDFQDZM1id0i1KxsWfOrKnAFXlifCFFMMRcASigOcs2MGAIfE9iWXplS6On7UbmPaUUTXQrgsVMzcRj5Folg2V5ayUA5BWYKwOxKUafnosWjcJwk+7W5F2EKvlE3xcXaNYfiCYsGkA/smuqug6hcleAnAImPbO6YwRpMgjCAVAm/yQmKTv5hNsAf/i7SyNBSl2a8Qv/4/M1yF+BZSYlNQCnnVrpbC+mToAACAASURBVJcaI7sOSEY2NpaDXLqpR+vE/OVksDgImgGgghHoYJbTWc7oJtFWc65/cg2AYvh2ALsB3AzgVv95nS/f4QdsIkT9T3cBrGtITWZfC5hqtQHInsEGQn3UDDvEDEY/ICf7SxMOrAg8T+c00JGkvHGd2DABUYZIAONzCUDppCFhSukCBsLQrFtZe/IixYQpSyEoJoqnuPWrVRAubQh83HNlZB23z7j1ywmj6CIIqUPxw2Xeu9bx2jx10wz4Z7sqTYZaDD8EIDuoE3hMVEphWg66JIp90k0sBxBcy+iPIIaT1RtEsHS/yIAqw+VSNPWQfe5tlVEk8auXgVa5BUsEJuT5uoliAbE5AGotmIAjCPnR9xDG3TQernYAUupTdBGEFMf83OkApHG+XlvTAPwfuyrgSZOhas3u6cwTsUBVn2gTwyFMi8wjHZAA1M9fYGHDULJD1m8Cpa8fRxDad+l+Ykf/3XNvd11U+qiL39SxXevSsshdDFvgbI1O2AwAtRZMZzTBRuDFjxe1Xg8QEIB8yyj5yYIUxfQIkfkIRnmHCM712JoG4FsdgHHp3ACoMH2G6jM4lWzoQarSvwQ6MSB/vporVaFkh+mCLlpVR8Z+dqDZLoDOpHSiQeAFDkBjPrlgCHgCUaFifg67H/9uYjn4Ai1vpTERTAASBaoQJBAKeNqHlL6mwPDZYAOROag/EYRkPX34MwHIvzW9rQcA+TLpI22G7EcQKlJGsYIJhC6ClUMiXfBTbFUQAej6nPS/OuAl9pOOqIc2BLzg++3VmWgIEUz82cRuCAtLIHQQm0gO52uOAb22sC3JEWgRfPpZf2sQBQIgLydPEIFGwPEj8MlF2bSbsulghLftqsCXq9HGgHysznrGgi5qzTUTFH8FLhAUn3hIJwCN0HLncw37qaF2zoYvuKNivmQIuUNc7GvWt6sHNs26twA6vhyq8NEMAHlyntFrDCcQehyaPTl+FwAbXDcmAKMRThakEk8Q8kPg8SPL0qzLBl+A9QCgR6uZGs3vfHz8TtBZvkgGQrEPBVAUg2Sij50QAOjiVKI3saADJRm7dSLYWfSFDkCem/dhZeMy9pPY5QvSDYQyUJoDIK8qMezh3wY6fSL49PcGgCAA8pScJLIgAUYQEmz8RPA17StvGoBv39W24eREiBoNQSgWNI1HBkdgxJSw1AI+dFIbgOYmkjimQ1r6XXC3rAbCHycAgytohf8vsB/r2KRaRq7zpZ+D37HMX0s3DDcCUGLYaw53MJ4YUODzusqlGCQAOQCejuxA8UULUkxIwAmMAp8Wa3qkN/R9W+sBwOhIEPjk5SLr8HeKFbTQfb77csPIMHGl/4MPbReslPhNe4+MiTpi9AFGV4nI7MfvagNQLh/pfrYnDAS8aJQ42A2w4em2cAyWQUuJVQTGWLs1uL7DG9J1RjhA+jvYk4t3KXeMqijpzrud4At9z3XtP16yGfjKZmCGooYh1tZzvv8xXPFl4PoJYC97k9FlwZWD+Azi/deMZWeP13eQCGEyoERudChIjbb3mJYwH7V0QIKuCwj/gfMj0asn2I0FXRSHXfL/iRkNgLyeVj8ccMY//J1fyxzTAXT2+xoQViKYD/1hDqLxPiYxTgSvQrphphG97tz4Slqafnj7uk1kIQDZrvWTw8B3jwEW+RLxPgSiCERdPwPR7+wCPg/gulFgfruDkOMQkFc5x84e708JAMmCuRNBXi4TIg5CGRzGiBGE/D4E/C2r2vcAYJoify62i0aJSMhB+2IHoNwu0fkcjQ85pu3ack5nIBREqneYFyWLkAXIJHESe00Cyx5QyeL6F/tyEcDcrOW2n7fX8df0mME+/vQ/PQjhoy3gzo3AISYf80MQaQx1peH9wb7v2mrtmCBkIMMejp3jIJD1MsaxaMZ8v5N/67INAsB3BAYU4JL4DSo1J15AFPAEwuQHZJzkKfUAtOHLJSOQRWndBYQvCQA01cfnNopfsaCJaD2baBn79QjSTiOEP1EcawIpkq2kegBTNgHWEpOKF8Uwq2NRFPM4AqCf46/rA2U9/uVDvurB01zvAJpiiwOl3fEeciCGF+Ij11f+QkbSfMPfIzqw57mEFZ9Dl3Ps5HXWAYByHJAJKV7N+s0cCQQhwSlfm4lGZ0KB8C/rABgZUS6ZHITBSEhCowUYAAksF7cStWREyxRwtuPpOlgw+5s9sq6OaIJIIlUgEhA1edoTgHxa9HVw5jibZNF+j/9yGQA/7pbujZ4bwv2+cWB6tFo0NzYnkxFA+cvEAo43VBoEo2e+48EMXEOmD9F6xhCE8RwZEJ80VblKvDlmzwicfqy93/o+8K8TwB2jVSgW138FrJQTXBNlnJgmrjZwanow9CBP/rL9wF0jwAGWDtFyoN9PHutnIHT05mPXz93dMGQAPniJsjiBXiTbxDZFMF9NLUPQxKR5qezz1Y6/YZDH0D6GkdAkYJIvRalAdHAMmPZoYhb6NhDWvEyf/ma737CXN7R1ZC7hUbPgcFgqt/ZZjADnM1xqEVhYBpb4CUk5UsL7jQvj///5buDrLeCOEeD+YQchYwG9VIfyg1NaZszFiCH6DkRGLze5/dgk8IMWcMCjdCiCzR8od1B8OTwvJM8JEShFut1fzMhi+eRJr6LI7hYP2M/xVLwKNoZjUTwRMAQQmYyhWGQxsSADOflZ4kukj7PhZ75bETjBpkAGahMkcrGgwhsXeCyBHBj1wmOBQwvAwqKzoFeRV8ZaerjKYAuirmPY/o9X7q5Cyr7fAvYMAftCPGAEoYlBiVtFwLjtp2U4irj7yOANbi+crHyrfCbTquJV44O0F1FrwQGIMZFqdQDyP/gGSZ8TC0ZRRsOlVzzgasd/u+zpMByLehAfCgMQCDyGZJHFCCgLZ2f8mgI5qauEcVx9e5vACTgCTwEMWr5TdIpWKJb5MvrnoocDswvAPAG4VLGg6UKeqmi4iuDz4er30oX0FP7u5moMvIf7W8B+jwlUNAzFnlZCIhvGFRCeWzrgXSSIBreXTFZSgVLHAp4UHOFuociEEsn2PJwl/XEk0dzfSojeerFg1IOo5BKAveIBex1P67lgUzgWQaJwLAKRH04i14ItgDKEtGsRnWx49b2Vkk9wUefTGrKCF7R0JxZMqxN8cmPAxWcAcxGABKEAKPA5u9lEaAbCmKMI+sDN1X3z+ro24wEZFc0VEE64ABgT180PF9ZdBcDb6JpqcPtPk+1ACbmKjJnllwyuILunEAWjZHkBsrsRUnfD0qEiC5IJfyisgMhzWhcP2O14Ro4WbASgAMQJ48SJwchmBCDFa8qpyBbSP7OvU4PQ0p2W7+LSnSJUFOrI4V7w5IoBTQQTfJ6oTSYk2mQcpGRyH2syGjIF6EM3V/fM++C1CfwUExhCsmzCaQT43lZC3e1hBpEHh36XEqrB7Scmq5dV0XZxmV8WuDFzAF9iwhow9seAGoBcGtKjqAc+1l9rLb/1igesO55ysmCrC8ei6IxRMAKTWNBi6Xw98xNTFUi0jEcmpYgRAPhddpVi9OIEPP5cYD4CcLkCooHPwaW9kV+iwWrQHT8uA1fd3F7DFvgUHUP2k8jTiogAqLoxFpDgbMj9jXSuN7i9dLIdaxzBp5XVBMIMgFEnFAPKT9qPd6A9BIGI7MfPmf4U+40HzI8nWgq2PBxL4FEkjKJixGRRFyQQPzzd1iAUzCAQas1YOmAEoFjwkecDC/PAwhKw6CxIkCXwOdVJLxTobMjBdyIgfvimNvNJ7Evf4jWtdnRYD1YNGVuG93VWuWs4Jf+mlZCCZxwP/cnJ6mXVKk2+tK8lQQVHRTGc64SDAZB3Ey3JcxyACkToJx4wHl+YwqloGDICmYmTFgMQFBET8yyYzyAG/AfWX8mCGQg0BTRoHwt9KVaPE/HQ890AIfgWK+CRAaMRYnVdxHbhdY8Wslw1V93UDsmPIj9GxgiAioRRMIJNvoti+SW/Ikd0gwAU8+XxJcbGITJPDvI6XdCFREFSknTB83xka40H1PGF9dnycCxFwygkK0bASJQSVAbAYeD98xUAe5U3jKIwBosSgNsuABYogl3/IwgFPrOIg1Xc4ZrpAsSrvruykl2ucykapkMMh4CExD5DwJfWAYAxwk4MKPAJgOIjGSEGwuCakRhemw6Yv0UUwRf7L00L9pnsNx6Qx4feY4O8pDEcixOjsoTKKpMYjSFYYjOC8Eq3Wnnr0YYS+0Tmi2HysrPGLqwASNYzBnT2Mz2QD91laxLB0gs12GAh81cf/o/OcHyJ+qj0S/zxnhUZbSyYWaL8+Rq2S29wowiWkJPan4MvgrDDGAlRe7KIywDIgR3meEDWg9HbJgApNTkXo8o0i7oVgxnEgFr8F7jEdnU5GvqfJQKQKyEOPlsNIQvyvupAGHS/Okv4qv9oh+PHxMLk8ggBCRxvAmEN+AiEzz2iQfQBeNmkh4K52hJBKOaNe/FSLobLRXCz43rQnu2yi9oMSMDxs2jo8303ERz1wsCGZECF4kd3DwEYYwJjhoNlQrgIjlYodbBPrwMAZfEmyzcIv27gs6XDzC/IR1DOgA9a6DRz4wZAsZ+LYXvQYsHoD4ziOFklna6YD3+nnU6dZ7bGDAcBUImIAmEUw/zbJ1i/scGNDJiLXmle3RhQ+l/aq57gUQCWzwwBKPeLsZ/LFrGg/ShRXAe64Ajkv30kALAjF8R11Dy3K7KRwJcsUTaqWScARou3w/INVnCH+A36n8RvM3nB5XP4oD6DATBYwGb5ajlOLOh6X8JaBKRG77+7ygGYp1bn+V25/01AzBnwQ1ypanD7KWfA1QDYC3zJIj7KgOUzc9nFbetX/r+O5biwNhyX5uSEDr5o0xsJwLp8/m4A7GaJUv/j3/5+HQFYJ3oFPPkho/hNeqBcMkcB2BAA6XrxmMBkfFAci/m0JpwzXw0TXvXtzrz+PKc/Ml/ugzM9MDqCAbz/keVjjGcQA/YLvjoguo1mRslRI6RwfsiA5nqhL5D6nscF8gfTdfxpS+/hLzvWfzMQCoB1Fq/8b3VWaPIDZqsRV64DALsZHVHs1gEvsqFAeBSApQC8pHK90Oql4UEAyvCwNeGcBXNLOPMLftgZsI75ouUr9ousp2TEyIJ/sU4AzC1e+WIFshyAHPZREVwItrrD3wGAhibTYBhxVpe/xePyrNBuWaoNp3DgFwC81O+RAepK/a5Lfe51jxr7JwA83nPXYgq1asl0yX5N48+f4VEGLATlK1vAo5YB1gBSRmsM+NFE57lcfPD5pPFWCJImtyvGgGfOAacBYO59zFglgHgPefZsXV6/gPXBYeC0RVgyJNOGYuJjPka9eHWgjL9bWzhWk0/n/wPn+k8bgFNmgYcsVflZnBRmIShtJM/m7JGibGBoOIIez9wKPP4AcNpylfbNlGfdI+9NjBjz8JVzppckZuJ+dBw4aQ44drk6j1LIY9JkPD7P4s2lwVEGLHwJnncscNIh4Nh5YMsSsHm5ndOu1BGFThJ8/K6JrZtoslST2+XHA6ftB05ZAE5crgAups5TfaL6EF+UyIif3gAcOwtsXep82eIYY9JkXpMgMp/AeZQBC2b8OduBYw8C2+aALQvARgJwGZhY7swEzbNa88IRvAVO1qkF91J36DNOBE7eD2yfB45fqphLnevzdGeBKBfL8UX5/CZgyyyweRHYsFwxYHzRNK6oetSBMDLjUQAWTPqPngpsnQK2zgKbCMAlYMMSME4ALrcnR6JYQIwsoUnjpDRstOLy7cBJB4CHUGwuAtuW2nUDVH1EFUhycSwWjGD64mZg0xywcaECoI0z5P3X5P6nWlHdgHgUgAUAfOYOYMtBYNMssHEe2LgITBCADkIzSJZXpCOnIg25uPrhgnupO/TyhwLHHwSOmwW2LVSik2pCrDsQskzNIBGIpBdGI+VfNgMb5oENCxX4yPRjPj4xaJ0+WGeEHRXBDUz2Mx4FbDoIbJypADixUAFwzAFI8KUJChMV2SUaAGc1cE/xFJef3FYRti64nkqWDrqqEhbrsm5zvZCdPCd8nHzJOLZuABRz9hTHZwPL7LnLnoNMIY2VyaKcjtZLHOAbNgNPngKe4BacfGF1pnydD+hphQ/8XV5UiEueLGnDN1tWXj/3/4cTwAUzwGPcRcFJiDpPt3FLmf5vjwE2HAQ2zPrEzDv7OQg5OSM+ScYQy5Xbo8465u/ZfLTJ7fKHAdumKxVh8wKwealSE6inEoSy2MWCdbUHIghv3AqMzwHji9VLZuDzD8cXxxWZs5c7apmW0fMBnIHKn5X7d6I5npvRz94O7LgXuGIReJSb+Xl1tzqflybwRwqf9i97BQRWomWJQ7oZVFtJoqDX/b/oGODsvcBTATB9gsfGqmzdjtVz+G+PAyamgYmZCoDjFE2anCVg1CeJwOMnTRB/DmUINVkkgia3y08BtkwDW+YqAFJFMD1VAAw6XG61R31O9/fdrcDYPDDmY0zjc1UjivBuAMx1QdMB+WAYXU8dhEU16dOSkppbcHFSrng8MHwnsGMPcN5ypURHp2xMIa7zDz2z8Gn/kVe0YomO0wEwBYKujL7v/zHA6C3AxfOVh58g5AsZxx4fZM7sf3h6BcDxWWeGBZ+cMEFiwGEHHRnDzun7ONHs/djkRgBunql0VDOSHIDU3cxSD4aEajhFXS4H4S1bgVGN0V8we7E0Fh9jVDG6Obr1LJMRwn+kOCaTEYT0dsfqZHXl/p7PrLi9wIY7gO0H2yAgCAWCWCowKrYE8nMLn/a7PQn9X7zIJPPkCcK+758y7x7guNsB6l98gZjLLYet3Ay5n0sv4R+fCYxPA2MOwLEAQLIDPyP8uBg2cRYmzFweAYilKkn+OC8/Fdh0CNhEA4nGA40kd6FES13WLO8v1qHKAfh9B+DoYjU2Ak/js/8NAIwg7OUb7LCC+WAfB4CpBJoIiTRNRmS1l13kqWh3Adv2A8cdqqp1MB+aIOSxWv6pq5D2kkIAvt8rF7BLJksN/jMqfa7v+7/Ak4B3A6ceqpasKMq5akAmlLWY37t8ZW97PDB2qALg2BxgAFwANEGcnI5JcrDZRPlkaXL4u1KJUAfAjbTQ59x6dSvdLPXAgGYshZWR6JIRaXB/NwFI8C1WwLMXzMeSwLfcXuKrA2G+wrLCDcN/IIg4ERRn0qvyySAQX6mG1XuA4fuAbTOVwktRRr2MLCoQyvEZ/UY/WwjAj3jtFJZkU79g1ghkgEBf98+0Umb/3A2M3lkBl/fOcdMok2EjkZyv8773LAfgHDDKjwNwxEUw9yailpwdxBAEYhBbAuGzG3aKkQEJwAkCkOCjlb7Y6SYyf2UwlAS+vKYnAXjfNmDEX7DEfA5CjUcsnzvbu1nDtUMmCDkRZEEyGdlAk6G6lQTSa6m0MP6HuY73AxNTlcJLZ6WOJYC5/CNxLpHMgdKIKNl69Qvu6/75AjHOiTU87gKOOViJb748BKCWrnK/maTA+58AjM0Ao7PA6Lx/xBAupoYDC9okBRAmPdBZ47lNA/DhwMRsxX7mPgl+SrmK5EaRNRslXFQ9CKB9DkADn79cZtkHFkysJ103eBbqlh97DpmTQTYgk9VNxu+xYbXKU3lhFoJPOgdFGY+lPkgQxokkgF9Xgj4AvfoFs84eX4Ke9x9fIC+tRfDxvvniif358sSir2LCj5wNjBKAc8CIi2AxxLCzIAGY9L7AhGIKgpATw4l8wToB0JjPrfTkp+SLQbHrOqm5jNyajS6VCMIpApDAWwQ4LrGgXqzIfnq5cv0vN0ZXHTInME5GBNLb1DGdOYQsI7AfGKFjlgqve8wJwG4T+fuFAFytXzCLb+VgWnH/fIGYfc46Hs7iHC8ZkPcdXx4VfVXJw8+cA4wIgM6AHSLKWZCTESfLfg7WsIyRF3ckiRQ+HACXkwHptyP4KHrpJvKVGnOhRF9eBF9wE0mUEogz2wC+WGI/vVxiQQIxAs9+rmHA6E1YFYB8DJwQMZl0OrLZ++i7sfT8zroYHLS9df4RACWKxSZvLXzG/fQLZqk2gqn2/vUCUQ9UZaM9wDaPeSPrC4A5C1KV+NITKwCS/SiCR/jRBDlLmP7nHynsxno1IPwJSyRpbiMADXzuPDYfZfBTEoAmcuVQdiaW0zwXwQsCYDYmMaDA1wG8TBSvaoR0G77EcGSET6hjOvVApfRPAUN0zjr45JzVcSqiTxD+VeGzXku/4Nr7JwDJOkxFIwt6j6+RqUrlkO4bXzp1gCAAv04AzgLDDsBhKugLFUvQUhTwCEKbnKCw14HwJ9cDgGQ9WegRgDI8XEcVEDvAl7lVlglAgi+I4CR+Zf1mLGgMmDFhBGFfDCicRJFERviSABjLS7FC0MFKMU+07wOPE0kGvaoQgGvtF9z1/iODkwn3VWoEXxres5ib9xx1wZufBAwLgAQexbAD0JiQwJOuJBA68/H3Zhk6+3CifqqwWNMKN8wjKgbk6gWJgC+FMaBb5vJVmsUbV2vCqo3cRWZcCIACoax53+ulkqNd7iqOcU1WcC9cxEm5kQBUdZ+sTnSL/jEtTWngi21jhJNJBivZBukXvOL+yYBkcOqxKjJ4AGgxzMrBVwdAMmHrZOAYF2l6y/mwV6xD17zmWo6MbRyeWtOHwxJ91IIhr6rqZS70DPPLXDVUrfBwzHKr1EUp6/h0T/6L/GcCqslt4IhoTcwdAqDSs7I60WQH6R329pHuFyuXDJmEjuOSbdB+wSvuP5bGUjmsA5XoUvcvBXKKAQnApUdXwah0b8jXR2YzJTsC0ZHB33FL+2yiX3h/1YeD1fFZGT81g/H6yqkVa9YEpqMhTADle8erHA6t7Mh6j4ZBXdBGjFyO4CSIm9wGBiBvgqxwIAJQlXIyEJLyI/i0SkAG/FbhaEr6BXfcv+5dLKhCg4z1C1HEBJ8+BODQGZXfk/quAZC6ketAZEQCTWAU8PIJt0fgwHzZvVWNaKqi7JLOmtDWFy42g1FxH/XfqGkII0C+a0tnDkfsGxQjn3VPsk7tXmuy+Xp0JhtoJosAaFcUAJUYKiYJxcqHqKAH9rPlG2cMrmCUbMX9guMLpGTcCMKDlZGhMK8IPnPIn1X5PA2AwegwEEYmDGBMjOI5whGQP3NPBT7VJlRNaKvF4t2IWHbDErtDlSk1p4lJ7/zd246tglGZryIfrFhQ7pU8WCAX0ZENG+57U14Z4YrCeLrSxXdev6TfLwrbxT7znMrfKQXfHLQCnyvmRIv0Q3430ezMmL98P393G3wqz6am1NYzzoGn+svqRmTAU2citctqAX/2EI8F9ACEmLHXLZGoFxtSl2xyK2bAYwrj6Xr12+1noL/jUTCD9vvFrn6u0v1/nvGkaoVBAQi0eummMAuXQHMWJAA7gCixG8U0gFfcXdlBKk4Z6zELgAJfZEKrxpC1xOIl/+Sk7jkcdYlSco90y9+gK6vJrRiADD0piad7RuFo3udNCgft94vCdrGXn+tujgV3QAcHLcFnroelivHkchEL8ue0uQ74S3eubAITS3IQhKkMRjBMokgWG3L//2z3VSnP4VDgQWxUEEUxAZFHL0eR3HDfm3IRbDHkBfF0zy4EIKNhSvr9goGEBdvTz/MIYQLQdVsTwRTFDj5jQmdArRDYJQNDSs961R3tPhx5NXoVgoxleHnarjohgLec3D2HI492yQNvIwvqO9fJm9zKGbAwnu6FhaP5pFuMg/b7tTbpBdvTz68cz/zI8azVj8iAHTqgmFHXDUB89R2dtaC7tUGw4kDOgFb0R2wYRDGZ8g9O8aU4XwPOczhiwGlMjqqLWiFYGu570wADFsbTvaxg8nkow7E8nM/atfKzln6/1mS4YHv6BQ4+Z0BbqHcd0NwwYbVD3+1yWhXJxPBrbq8AqE/XApSqAxiBV2MZ/54DMOZwKE00rnDUWcR5KiV/brjtSAMALIyn+/mCyeehjIYp6fdrvVELth8RAClyHXxmhPi6r1m8FM0ucgk8+y4RHC1kAK/5XgW+2hZYofafWcPq1B5AqDqEYsQ3nepR2gqhV2yiol1COkD0C+aOaoGx4aL7DQCwMJ7uVwomn4fm7VrX2u/XAlELth+5sHPtN+l/Ap6sX2dCsZ/phZkIJgv9l++1wbcq+2WFv2NXIjNKAPzuw7MUAV8DTuynFIEsQy83RgTAhiv+NgBABaQOGE/3mwWTLwAqHnaQfr9GnwUbARgDNBUlkpzQboyYCyYDYdILdf0l4NduW9kGoa4geNdazLElKoA3Prx7DofiETtC6XvE7hGEzJlpcis3Qgrj6d5UOJoYDcMglrX2+y0NPtl5UZUjkfx/Hqbecoe0OZzdF1gHQrln9Bhee4s3f3Zxm4MvAk9VSFdUIw0i+Q2PaBtISiBSSFgCYMjMW00MP7pwvvLDmwFgQTzdHxcOSGvBg/b7ZRZByWYAlOERluKM3Ra9CKWc0q73dTBhMFT4ZwIw9l5Lrpes+HjeBiGCUOKXeuBvPcKTiEIOR0f+RhDBMYi0Lhea4GTaa5NbOQAVDzhgPB1La5RssV3rIP1+7yy5OAADoAchEHBkFbKfGRpiweAPtMs5IFNokyOGk/7rAYC9OhBFwNXVY1at5tftCBHaWVS2AJdEcEinrDNC+Lumiyc1B8AB4+muLARAXTDCWvr93lR4/Z0Xt6ODFQkj8WtumEwHTKDLQejAfN3uds/dfjoQdatGLxb8jQBAYz6/boxiFgAVudzNIc2/s3xLk1szAORoB4yn+2DhaATAGJCtbpkCYq9+v4V+aBgAQ4i66XtaC85YkDog/zdZvzUgfN1N7a633Xqv6fe9msDIHfNaB6Ay2JRE1AHAEDIfI5nzZCLeN4Nbm9yaA+CA8XSsul6yqV0rJ2WQfr+splCyCYBR/HJyKX4phs0PKBZ0lqOYTpvniAiUAmAd+HKjo1cvDjHgr+3wPJQsVCymUZrPMuRsRBDG4AQCsunyJtFGHwAAIABJREFUcc0BUJlxQoH62q8ST8cggpKNAFRGwCD9fkuvbwAkyGgJE3C+Nz1P1q9/T3F1EZBxvZh50s6AEYC5yyUHXt5/Q8zI5/KrAmAIkkipkyGPYwXz1aRT8v5ZO6jJrRyAvKOvNXlLazsXs9bo/ztc29Pohgotp5J49Rcj/pzfIwGS//3OM4CNd1dpntQpFUmjEH4LYIgnyn/OLjL8FeDGhwJbNgFjI8DIEDA8BAy1PFK7FSKf43cNKrvHx+8C/vmxwMgmYHgEaA35J0StpvvzL/nP8RbLAfhyT207TChgDRiu/ZL9DsfWNABvYzbhCDBKoBAk/pEobGWTqp819hzQ1/0k0PoaMDEJbJjxVZFgDad0SaUO5LksWVj+XScDmw5UEUDJ6U4d0nVbC91S3ovfVHp5al64cgC+k7mZAP768KCA0WD3A/ieLz090CDceVmlAuhBljLgrfcAw6PAyDAwPFwBkCAbItM4a/FiNtERjBl76W9ffD2AbwJDdwFj+6syImRXrd5Y2FjIYcnzWPLEqnsfC0zsr6qBMQmfIDR/pyJ6xMhKyMrSDiKD2xja6TADTt0/AGAs1KcAUCFrOLF6tbtiRVFavT/wuMCa7MfVTlH098YBeBcwNAIMEYAUlS4uBULOmK3LCnwOPANlEIOSoF9+C4DvVoWXhvdWZVOYqWgi3vOXDUQhgieB0EElViMYJ08HxqeqnG8D4IIDkAzo51DKQQJvBKUmKACzbM4+5hUivwrgiwC4LzvjmgCh6nBcgiMTcv9Abo0D8E6g5eCjfpUA6AxoQIzgi8ALmWwC4z//DxcPPwBak8DQFDB8yJPpPZHeGCyC0KN5DFCByfh9/+OAsekKgEzCTwD047X0SCPM1IYQjCv2E/MJoGVwUUQoPboq0MdqkWVn7RtDDMahB4g+P6qhXFpjVtkDtRGA2nKjos7IyOyHFUbIrXe0FXsTuzIYfNb4O2M3ATGIYQOmPn6hG6gi3eUkQQAeAIYOAUOzALMVh2pAlESqGFBAXAYOMQVjxll03iO/yYKRAT0FQXkwZkjp1pz51LO2XAT3KtD3AIAwj4Wg05kfiuUHYlsXAJLVnP0INLM0OYFx78AzcRySeTsw2AJueI+Dj2Fne4EWKz5MA0MzDkCCkAByUWqsJzarEanzj2zXwjEGFHuGY+pYsMojzZL1G9EBexXou339IRBrC3lJGmNDuSHX+w7WC4Cm6wWxm8DngLTImgC8pBcGBuTXf/1fXnyTugnFwxTQOgi0CECyIFlsvvJfEnh0mhsYI/s5uxFYi1xZof7oOqSAawwYjRGBzYGXbtWXaCIrlvHUagX6SP/ruMVYCEbEqECXAMjfree2HgA0ESur1/0vtnNwGSsG0RsZME20/+/XWH6Mugk/yngPAGy5GDYALjiIHIgRUIrsZjM7Ax+BSx1S4pfffQVIep8dL7dMDsTGjJB+CvQxTHmdtrw4l0CovFruC2NOe975egDQsCXRK/eK634JhBK90q2C7I1i+Gt0jxF40k1cPJAB7UP2m3MGJAAFQrGei9iUTH9yBUDTHfU3B5+BOIKQ43BWtNtPcWIOzEZE8FoK9K0DCGNxLi3FqaKA9gTgeoFwPQAoI0OulWT11oEwiFz7cwbErzNxWtEYBB+VY76Vh4DWrH8IOoGQ7Ocg1CqMRLPltmxvs1/SHaP4dcAJePYyyUCRIzrTB8tE8FoL9DUMwl61kQQ87Rmy2PS2rgB0a1ci18RudEJH57OsY02y/+83/sZdBKr4FXQTApBvprGgQCg9UEAM+h9F6ugJDkC3gJPBEvRGrYoYCBX9IxEcS5K4i6cZAHIw8oXQ4mLBb35YH5d7OekadtTV1UZSjaEIPH4nQzYNwgjAHNwDuWGYpZc7lzPfX1cQur5oBorfzDf+zi0yVTuSkuxBI2Q+PhQDIUEnMLo1TBCZLufGw/ixbQa0KB8CTODjPohdY78IQmfDjmW7Yo/doAX6GqIiAtDHaYswSmeMubV81kp11L6hy2PdAcgblfslOKC1IiKRmyRxZgV/8++DS8BFrxXi5Hd/U6MeSKdqEsEKhpBRsgRMbAtuG4KU/+9ry5brzP/lPVMv1EPOQegharrVcgZUhVHFxNPcp9VFtlOWkL437C0WABWypFRGsV0sb5Hn2zYBwvUGoKl10v1knDgo0y7XA8Pfv0UACnjaK33Co9gJQAOe64FkNvtZAHQdjz9v2Nz2GSa3jYej2W3KGuZ9ixGdIVSoKT13B2s5AHkGheST6qn0erHv5AIgAAU+LVfw/wq3CEAV7clBKDDGZG9/5oVXx/oyYARczcqH5GyH8eFplTawFvAtrtXLGpNrQDGbejupB3omlIHQGc/ErzOcGSRs8zrhAbbuL1Tco/JfbLlNwHOmi2kIcs3owbdwNpYtynDQhsFcgvuG9/YapGFvYX22zZcAU0/GwA2LJ/4AmGF9mwEbBu98Y3cMF+uAGQCj2HVp3BbPuo3IlqxAy5wHAq4OfARmEBXGfNIBa0BIsG0ecwC67merHgRpZLwocrWaovuTxew/V0txJQ2DWeae3WAGbdhb2DB4+wRw7w5g8Qpv88liyGtoWHzMi4C9fAEHbBi8kwUKu2xNAdBxaGBLbJdZux1LwAGECYAEm6wyfpelJrEgFnRDxESwgyUxIUsVMwjVy5AYO0bG89Auu1/5BF38KqjBHlUAYXsteNCGwTeWNuwtk4JMkrlzGNizA1hm69g1Nix+zDOBW0aBeRZZGqBh8M4emfWNADDT+zqMjQyESdQFHfDbZECCLRgdHeCTe8CBaKJY1rDnBRCIAuGW4TYAZeFG8ZuMkGiQ1IEwGCJtHZBmy1obBsvVMnDD3jIAerti3LEBOMjGcOpa3WfD4ic9t6oveDtLfw7QMHjnH6wPAybW6yaG4+8D4HIQfvtDIVtLejpBFsVvUI7NIBHw3DUjRzL3rDVtsYPOkAScuX3coNDynT2VYJCkn+PjqvUD8hVbS8NgjphGxcANe8sAGNoVY/824BCBtIaGxRe8pLKZdpMkTvXiJ2toGHzSNHDPScAyq3er4qPyGaNc7JCRXWLT2TjwGmCOeQashq6+qSpZmp8vojQpheF58ncdZVjLnjWPHr4VWKTKxrHGUqq97qXu3jp0wPy+eEC/DYNZsZAO6IEb9pY9lNCuGPcNV830ZmkM9dmw+OKfbdcXvJMPdY0Ng0/7GnDXKcDMccBS7MwdKz8KCAKQIgY0MWGCtr4TOHAasMwOkTqf6unyuLykfd254nkb7qsw/iVg7jhgmSX31Vpd9yRHeLx+zRhjEGRbB6wDYT8NdymyubzDzCCGfpMJWfSRYfr9HP/aMgBm7YoxNQHMbQHm+ID6aFh8yS93tAvGQb7da2gYfPoXgbtPAqaPA+a3AEubgGU1RM6B060fgkRoCzj+TcD+04CFE4BldZdRc4/YxlxgjJMewSiwN1zWfsOngdljq3EmY08vm5i/7j5yIMqpvupKyGoNg9lngYosl9wY/0dZdrMzYl8Ne8sAWNOu2MA3zw/F2CoNiy99XbvftrcLriz6PhsGn3U9cM9xMODObQYWCMANwPJ49UliuW6SaqqBn/gGYP8pwPyJwNIxwDK76ahDeN6uXYCuYyABkEza4LbpY5WEWdSLxjF26/dQB0SJ6r4ByAN6NQxmkWcqrnQ00x1DEDJFjR8CcNWGvWVPp6ZdMQ6OVOCb3wAscPJ6NCy+7PerkP5Q3tBY1PrT9tEw+JwbgPu2AlNbgVkCcCOwtAFYcgAuiwWlM/XqDjMEbP9t4MB2YO54YJFMo/5gHIcALV1TRZ17FXOhPtvgtvkqf9H4kvHDlyKK4l6VzvVSBF22uwjOb7pbw+CfcwBSkyeFEHAUx/yw9JTyEbo27C17Ol3aFWNuAlgIn9QxO2tYfNlbK6MvaxeMRYquvL9rTcPgJ30TuH8LcHAzMOugX3QALo21WXBZLEHwRF1OgHS2eOgbgIPHA7PHAezNu7QFWFZ7JnXJ5rnqxHEulvlzwyVNN3+wern5Yovl7SXLGwvn4riLWO4fgMRJXcPd/+pmOymELEhRzBxJAo9gVL4kwVnbsLccgHEpWi3epocCAMeBRU5eTcPiy/6qtl0wpvhA+2gYfO7NwOQm4OBGYGaDs+5ExYDGgqP+ccAkINaVpB8GTv4d4OBxwNw2YGFrxYCmV0YxLNYheCXau7EhV3ga3Lb8g4+R45uoGLADgHWqhsBXA8K1AZADyRvuvtkBSArh+i9DsQhCOtf0UUgW/7aiYW/Z0+nRrhizoxXwFhyAi5y4rGHxU66qAFhT3rDSIVdpGHzencDejcDBDcDsBDBP1uX1CMJRwFiQIBzxieL3KIY1YW5MPOxNwLRb8gs0aghAss1GZ1O+SFHsdRPt0i/PLHu++dFb/x4mXfhcbWxhfCtYMFr/uWvKxfDaAcg7ipPCvFOVpuo3HrCjYW/ZA+rRrti6TS6MVQ+L4NPH2nx698GnXF0BsKa8Iab4dFZpGHz+JLBvApieqAA4J8CPOQuOBBAOV0CUYbIskRkAecrvAdNbXc/aDCxSpyT4CEIyTgRgneiLIp3nP6fs+a4A4N8B8/48CUC+ZGJA29fpuLmxJW+5h5kNFg2jiWHSi0r0Uv4pCoZsxw8DUfnhd4Vk0XGdGvaWPaBV2hVjdjgA0BlpkQ/K9bmn/HOVqtClvKEBqlfD4AtmgP3jDsBxB6DA7tdbcvYzJvQJkii2n4NOeMpbgJktbYPGACiF3wFoEx1ZMNe/4jnPLXu+KwD4t/5SO/iMBcXuesHylyACMBPDgzGg7opM8mEHIGdwrfGA1rC37AH10a64Yr4APvvOSdwEPOVbKxu+K2pdKRTmdI3dqkPPVgbSTBGAY8AsATjWniBdx0QxJylOFCcr6HBiw1P/CDgU3EgEIMW52M8YkLolQRddIN1AyKWiBretf9MJQN6HsaCPxe4rvgDdHOcOxDIAcmDFDXvLnk4f7Yqt63gEIB/Yoj+4p9xaAbBHeUPM8qF2aRh84QQwNQYcGgdmx4C50WqCFngNsgSvQ+Dxu4MuiawhwIAXVk1O+e/A7CZgThY1dcno1nHL2oDIyZULpBsAFTBZ9pjT0QQgn2V6ufRicS8QRgbs5ZYpEsENDejBfpoLrwAOjgIzZMBRZ0AHoUC+SOA56xJwNlEyTFw5FxBPeWvlzpnbANCdQ1eSGTRybMuydgMggVBsKmtYoC6Mt8znZxsZMLzAxoAOvsh+ydDqtXx4FIDl8L/omQ7A0QqA82S/ERdTI22mNfaTuBIIxR4BhKe+y61punQC+MytI/Zz/c9EuvyBeetLAfGZ5WOMZ9j2/gqABB1fMLsHAVBqhfTcyH5d9MByEdzs+B50Z7voGZX+NzNSsd8cwUcG5ASRKYbdHRNYwhhDIHRgGmO0gFP+HJh15jOXjnyKblVT5Cbfoq+yJOszF8P8+VnNPlICkMAzds/YLxlYznrJwIpO6egTPMqA5ZNDAB6iCCYAyYBcBqTRQ0e4630SxZyQJQIvMJ8mSeLrYe+p/GzGfnTpEIBy6US/out+K1wg+brs88rHmDOgAVCMnrEfxxMte1Mt6j7u9zzKgIXzczEBOJIB0BnCJoqgIfDEhM58SWzJEPGJe9hfVH42un/Mfxl9bgSiBySIBWnAJBDGEDAB8QWFA8wO3/a+wH4+rg4RLPYLul8tCI8CsJmJMQAOuwFC9qMI9g9Z0CxhZz65K0wfFBPqu7PEyVdWAOTHVlTcpxhXHZLz1w0ZA6EDLhkCskRf0sw4dRYC0PQ/vVSRAYPo7QCdj7GqVOSMeBSAzUzMxZcDMwLgcKX/zbv45SQlHXDIgagJc+bjZBqAWhUoH/Y+B2D0J7rFa6LYDRmzomsAaOeKqxEvbWacHQB08JkRIteSXiSBLYJOLB+X4xrzAzY7vgfd2S4RAKkDDgPzNEAIxMASSWF38WsgkuXLyXTRSRCe/DduSZMBMwe6ObTd8JBj24Aot07uDObPP9XsIzUGFPs5+JJ/M6oT4buxHv9X7BeY8KgOWDg/Z58GTC9Xq5FxTXOw9c3Cm6k5fPcjgbHbgAlvVG2tH1T3Oavoq6BlniZ+12n5u/2sDbOvasqoFg8x2Lnbcd1GdhSAhXN+7qMrAC4sA8sORJ6yHwD28z+Ft4fdv8UyqUDrDmCEBcpZ39kLS6aq9l4D2rLb/KYsFTPWdfbvh86vQu2s1K/K+zIjTsXIVQ9a59Egs4Y6sZfIA/EcSp/jEXv8BWcAhxaA+SVgSQAkGAMICcwVlNLlqTc9Gbv/HAA7MrL4+f1VlXwrUq7SvCoyGcrrWpGhuur2fNGYwM8YT67hT3s1LaZvqn5MLM0bzmHMmIFSgdFNj/mIBct63NhFZwEzDsBFgpDPeanNgATfCtGsX9TIKwNrg9tuVkhlng7TI/YArX1VkXKrEe1l2SynN1RCsFJsqnQv3UIMxhwIRjU5AGN9QUteVz3BUAvahuNgjC3HxLAND7nBp/cgONXF5wCz8xUDGgCjKPbvevlzcKUHH2ag6cnYzepYBB9Zi2FxDJdjoXJv1WDFiLJ6MKqKZUzoQFTfj2HmwTKcTpVWvcxHKm6kKgoORAEvVclPD6NdzLXpMT8IYNPcLV7yJGB2AVhYrAC4SNA5AxKM9ryDPE5fs6eeVKWGZ2M3S3MQfEyJUKV8L1ZpJXpVJ9pLilmlAxWkVJHKwIhjjD9TtVXVm1HdOy/pJiaMFRWM+bo0rWl4yM1N7oPhTJecC8wRgAttBjQWdBBGESwgSiV0Pb9DRgu0TY19N+M1mRKh8niqFx3rRDsLqjgl9yaGXT80vcL1wnE252PAZCzAHQCoiqoW3yYWFIt664fUpKaREr1NPakH6XkuOQ+YDwy4FMSwgU8GSRSz0UJx3Vx/5vFNbrs/EiLRY+v4ACITww6iJEodQKwBIyBRv9vwhKzUW6z66TUGEwhDS3ezqusAyNxnJn8xa1KRPSFts9YfFB/QDZcAm78CnDBT5U8rCqjfc3yh8Gn/hGd/MsKf1+QzYJ4891Jye13iy1cAE9cDJ+6FpYrEkidxDN3OtXR+FwBGMezoMmxJLOumAuD4J4rxJrfdH/XCoLGFVKiUbw+LAPQqWWaMMLrd6/+JycSIm85w9lOpt1j1MwAwFTiqAWEUxeYH5ENn/jInUVHeMXQ/f/jRePvCa4DhTwLHfBc4frGqqaNJzLPw6iZxV+HTplFGvZrXZT45N39+HW3TujlZv8D6fp8HRq8Dts9XIOR5YtakgBgdrrrt5Qsq8Ssd0BhQ4HMwmVitAWHAY/LbLDQNQDaTVJ8Q6W4qVB51OOqDZDPVB3TLOBepW5jmqaLbec3jGgBGMSxvvemDYkQ9GoKF1ShUCSKCqBeQrvmfVZPC1keBjXcCmw911tTJ8q5XgOLaQgA+x/OdWA2EGZ98gbjleTHdQHQN+2iwls3nK3/Zhj3VeQhovYzdxmArSwQgDRA3QiSCJUrTnjfl4KozRCSCCeYmt90EoJJbVCk/1+FiCwFZxLk4dRfLFia6x8LbYkD9v9cXtLG6+O4AYQRfrgPygVIcqyhTXcWFOJH8fh3rz7EKwnUArq8mcGwK2MCC1i7WY7Zenh56feHT/jE3yliE4TZncd636gPFCKWavGhcRx2J+cvs9MlSw0Ty3cCm+c7n0G0MExdW4BMIbTXE9UCynvyCCX+Ovm4gbByA/xisVgJPpXrzLj4EoRJjJIZrWHArS9iprK+KcefgiyB0XVKGjOmCmW9xhRVMUSyRFnNeFGEdI2q+/HFXclkp9WsAbgTG9wGj08CI64WxRk/OTDcUAvBHXSLQxcVCDMQSWbzv+1e7WVbz+k5w2tJtsbcCYV6WJY7hmAsDA7r1Sz3OgOgoM+KTOJbcjSI5yGIaNE1uuwlAAU/MF+tF5/0sIghVLdVdM2S0bSzHx2Mi+FTxXf8X925NC4BycK8QwfmgVX1LlcFiykEMcL2BndJJ7aQfijKfxLGDwAhByM7aC5U4qwPzNwufNnNuOH4VZaCPlPo2AahqFqoPVFc14ga2m+WEEL0cAz9kdPrOmMu8r1o/rTsXz7f9oswFs+jO6LAqkvC3Ggg5Fg6mwW03CUI6X12h8lyfcz3QHqr3DIl64DbqaQKc9mI87QXACD6vpJqY0EVxz2CEyCI5eMSGX2e7VtI5J4yTRyZhscrvt1nQuivOAaNLlYESwcySgiVbr37Bfd0/u31yEgg2FVaiPCeVOguqAfGov0iR0R9JABJ0bnwk9nMxw+fOh55EbgRhzozrBUA1polN9CLwok5HEEUQBjFMQB7D+j656PW+IrJ8O/bBCo4sGFdGejqiyYCx3mKe9/JtTiBvmI5OFiTisg9LtJFF7gZGDrUbHKs79+hyu5hSaUvh1foFr3r/6vZJCiXgCDwVVFJ7MVmRLsrGltuFCc68yFdACMDAflwR4QM3HPoKgIExt4gz42SuaQb8hBOE2oZmlu+KFlKR3QSssMJxDPWbbjpfLoJrxG8CYT8MKGZSVTCxYFTIb84nkCxCIPLDiby30gXFghaF4c2ReR466Uu2fvoFr3r/fKAEFxvpqMcd9yonIrkuK5LLV7MVCM+/uDJCyIC2J8a0z1iwqyESgMl15Sa33QKgmtPEBnp11mwuXgO70Ud4DHWzfgDYC3zBEOk7HlA6XKyHQzb8HgGoCSQLqsxorIy1Bxie7Wx0rFaf+wr9Xv32C+56/7HbJ5VHtRYT+GJrsehHcya57PyKAQk6+vBkBZPpjPEExlwU59awg3C24W6KBsC6tqHR+MidyVG3i3rdAnAsH2T093XT+zLr197MTA80h3SfsZP2UqpCrPQ46oF317VrpeiKXTJ9MhMLkgGdCacKG/mupV9w1/vnwyGgCDCKWzJe3lqsyzLWZWe6/kc/oKzgKH4jC7oolhdC4jiuzM0WPo+cPQ2AsX1obFCTO5Jzn566PwbReiwnfTWjI4KvDoh1juh+aT+WKSYD3i8Aql2rJk+VsVQly5kkddv2FvHT61icqO7Fr71/IkLNXOi0FQjV0046oBy6wZ922Q95ICqDEaL4XWw3COcf9Mw73DFB9AqE6wZAAS8XuzGQIDKf+oVkqxt00ttAc+YT0PJ9qRFSB8xoye5Xu1ZVeCSgCLbYLVNswoncHxoeLwCzBGjBNki/4BX3z9lXgUCyIIGmhova83cRgO5Te9yLgP3MfmsBS8xs8/U67ePQOqy9umBUruDchqo8sHSd3PMfT5ifo+ack8eFHI6QEcnT5GvdOnVdXof+ptJ+BVPWceiaRHA8Us/nkACo8mzqlqmWrbFDppT5A5UIZm7CPA2Vgm3QfsEd909kKIqB1qJAKCBG8ZstZz3xHOAAiwmpDIdng1maZQAkZzsHZ537YfQrwNyxoQ+HakrnS0h1mUA1C96TdJTmORyhC3oeqdwROi+GDhkFI6bYNrcNDEDeAkXwQizPRpmnIs3OdqZPSaRFUcbchHlgie6agq2kX7Dd/+d8lUJVXuUzk8ERmS+2vfd4uvN2VOV5rSwb0y3JhgIh9wJeN3YMQCIgR78Q+nDEVYBYZUrUpbXFnM7COSdf7N4IPvtDnT2BY/h8Chh10MXQeYGS+7GGjaQiABpuNIFiECnzdWJMIUHcazLptC7YivsF8/7FgLFMqpiQL5TuNbKfA/DC46rqqAbAwIKWK+timRUBEiNGsOQsyQm+Gpjd4n046hbT84KPuYjOmHHyp92gcgDS2OoIuVIeh/xyUkaVwyEWdLrewHE3uBUDcKIwnq40HpDXL+n3CzbaKdguel5VnFJl2awaghLQBTzteZ0cjLq2A2n0M6EPh2pC57Wg41poLzZsAZNso0Hw6eVR/J8bF9YjWGmVCpGKwQLBRCcrbiSxNLgVAxCF8XSl8YDHHFPW7xeFBRwv/rGqOKUBkODzqgdWPYAM53vTASMQu4Bx9J+69OHIF+N71F1O1gUB+AsBfFqKC+4Wi4BWX+CYgOTAU36wdMVNVKka3MoBWBhPxyiuko3xkSX9fvGMkqsDlzzHC1N6SQ4DoINOe7KelWWTheziObeKCdARApD1AdVnRH048gKUAmAEYi6Oh4DJV4VoGDWqjq4XLbO5o1jBoimEPhPJmwu9FvnTLgdgYTwd2wyXbMyRKen3i2eXXB245FlVYUpVxUpGiLtmGBlrTEhVUwV8dEkVKAq3MHJ1uzRbRx+OOgDWFX6MsXJU/36lJoEoA2AKvw8+uwTEDIBbStdOs8ddDsDCeDom7ZdszBIs6fcL9ror2C75US9IxJJsEsHdGFBil4yYuUwknofJgF4XcEUfjrz+X7fKo4EJJ//PkMORO6FrVjQMeL5kJhZMMXzLwNZCt1nzDFgYT8cQwpLt4hDON0i/X7ys5OrAJVe0S/ISgFY7j9ZvnQ7I3+lyqpYaL98CWp/N+nDkZdhi6bW8An1kP3fRTLKVWlwF6RZCH2L4zDDR0k1IqeTNb2OQSYNbOQMWxtMxeqtkY6I+ny9VEz6btfb7xc+XXB249AoXv85+tIBVgJJ6n4lf6oV+mfjdDJNMH0wAVFX90GMk1f5TxlS3Fggh92DyN0IORy5665KIfCktsl+K3VsGtpVOWOMiuDCerlSnjQ2rB+n3C+pIBdulz8wqonrNPLKgwKaC5B3s53qhXVq6oDNg6sOhqvqhEr3V2VNLBjmnSSNdrOLJ1zkAu6VPRjFcFz4fXDJ8i45hG94Gt3IGjOFYA8TTlQZ/qGH1oP1+8ZtlT1MAtHK8mQg25zOZUSCLIliWcbw8wfW5Ln04ssqnHX04euiCk6/3de66MPpuAQVZAEFkw2MKFw6a1wEL4+lSBvmAOMhD8vkOkFX77feLNw14YT/ssmc4A6oOdHBEkwXlgjH2k4Nal6wB4fIuX9LzZjAmorNeHMo5Tc0OewHwDTUh9HXxfGJsYkAbAAAgAElEQVS/uvCpoAcew6zBBrdyBlQwwoDxdLZWXLDFkHyF8xGE/fb7xR8XXByAAVC1oB18HQYIT+8uGfP75SCUs1o64he8v4j6cIQ+IqkPhxrBCHjdjBH6AblQkAeY1ondukSiELmsUPpjbyp7XuvDgAXxdNZVvWCLIfmKg6Bbhrjup98v3lVwcQLw8gqA5v9zC9jErutltg8gMxDWWMBaMVkmANWFyEV6R0uH2I1IzW7ypbkQOTP5f2ch9KsFkwp0kQlDAOmxzHpscGuGAQvi6VD4RgmAg/b7xZVlT5MATNXwqQc6KGwf2U2uGV2uzg3D4ua7fDnPwZcKgIdq9GaIBPZb0YdD7hgyIFWMXiH0eQ5vXS5HcMkc++9lz2t9GLAgns7KxxZsCkgdtN8vWD+vYDMAUpcja7lOR9eLVcIP4tcuob/3AOHCdW02VTX62ApB4Mv1v24gnPy9HiH03fJ366KYHYTHsgBBg1s5AxbG0+HLZaOp65i+ln6/YM5EwdYBwGj1cmUkE7+8THLNdAHhwrUOXtcrO/pwhF4cct2oN68BMDCfmsJM/n6PEPoYPp8bH3kCkbtjji2tJJA962YAWBBPZ0WBCrbYsFoOf9pDAiENk179fkuvf9nTXewKcBSjsn7ldonWbgQpx+26otaLIwAlfi2QQSJY3Yjy5i9dmsFM/oEDMM/Z7Uf0RiYUA7J+ToNbOQC3e0WBBm9qLad6HICG1ZK1XB5PoxnuOOIcxSXe/Of8xHV/P+FpwN47gKUpYHmuSve0pKZgCKSq5wqniWE1WZz/xouBm74KTMwBI17lVBXwtWSs+8/vL45Ff3vhpcAnvwos8d48DZX3M2hx9XIAnu0IIO0chu35AOgLL0yuG/jOmwbg028G/mNz1YWdETbm4I5BrFlov+EtD2wIo7l+Atg8D2xY7iw3V5diEqO54mnj6XdMAYcU+6gon7A3NSO2qFjlyZYDkAX6uD5Iam44YaUfVNDNxaJcLIPXcGGpfi6PnZdVD1wPspQBX/wl4OaNwN6Jqg+xwrxslcVFuYJblehkcYYZGPS3L20BxueBcS8nwg5H5kZkx6TQSbXFZcCQKadx5Cz5mPurAFxrRaa17pAR2PFC+ElSHKQ/0QjQcgCyGyM9v3SnsDBRJgL6msWCf6IfWeUJac8UFlpY8500DcCfvgb43hiwZwyYVhd2D/VSrKGAmIDnBkiafEcN9cprHgKMzgNjS1V7rRjRlceyrqif6KAkMgXIM+6tAnDl+zSL36O9+U8p9jGHQo285/2XA/AnXeNnKAorDXH/AILwbSvLEz6Ql2+cAf/3XcCdw8DkKHBwpOpFbE2wadzIdyh3jjNQirYWEwYq+/zJwMh8pf+xKNSwM6DZMmzNRRbM2K+2Ii6TlFrAWfd5V3i/F7IgT2LBF5LbIdkqxLPWvtzlAGQ3RpU3Y7AiixMxLOUB2t7pKQ8M0qCTnp8HkojJgNqaMEJesQv4AR3Iw8DB4QqAs+6SWRiqgJgY0HVDAdBA4Ba4xN7ndlSFAAjAYX4IPO5dBDMAdS2i+Jx7XTf1eEdTDfgAQnR34p/wQkRmjNAoByDT/ugFphXAmjAEn8qaPQAgZCs0lSckCNmVigEbFMsPBBE3DcBX7gLuawH7hoAD7EM8DMw48AhATrjtQwiXoqkTEwWd7LOneXNCbz6Tiq/TInb2M8ZzIFrTQbGiy92oGz7pXl/7jvdAJnb2470IbB3T77Sai+hyAP5voTqW6sKwFAc/TAdc5+3dvcsTrvPVYSK4SQb8xV3+6IaAqSHg0FDVh3iOIFTIFxtit9orL5Z/LD1Q4s+B8OnHVuXwhhdd5DoLGsgCCJ04q66X/Ju/vSaeAxDPvbdtmdtKDV90gVEPIl/xySkviOhmAEjrlzSkwj40SlQZYZ39I+8JBMx8mZryhOsKwqYB+KpdVSDFvhYwPVR9BD7uyX4SwRS59nNI+bRck/DzJ05v12M0nY8fAk8iWL5BB5qASPGRCi8EVjzv3mqpkC9ACrrwhKukB67GhpqRRowQMqCiYbj8oOoHeUWpdYIBAUj8c8WjrjyhNIJ1unzjDPjqXdUjJAAP8TMEzLYq9uOHICQALe/EwWe+QgddAqCzzD8+vgIgg0qp+5nYjaDzCgjmnCYone0klqP4JSgvvK+6LoFPoFMlkPGh+0rPWta4RHTNJJQz4M8EAGoNTPVU8opS64CC9zoAWTFChcq7lCdch6s3L4J/2QFIEBKA1P9mHIBmhPh3Ai354RyAAmWsR/PRs6vOR8Z8FMPS97yxtIlYgVB/I7jC0rIKSfLXF1EEB+BFFjQ3jCLA49OWsRTTEPzvzQEwry7VrZ5KwzAQAPssT9jw1dcHgCrORQCS/bgn+1HsCYQSveaHkzvGv1scgU/6R55Y1YIxhvOm1EZekQWl8wVDxJgwc88QiJc6AKX/meHDawX9z16M/Em7bO8Q08GBP/jEkAEVjMBoAFWXUjRA3KtNwOBXW3EkAZhrALktpC6lKtTV4OU7RHB+3kHWgv/zrnYZl2kCkF4uF8MGQGc+MqEYUCA0n1tkwxbw4ScHAHr71Q7W4++c8czwcBAmHVB/c7Bcek9b3FuwbdD/kjGWgzJjQ3thGmVA3jhfOyU+RxB6FamOFp8NrhsTgLy8Cpzm5QlVptAU+6CiNgXCaIQ0BcDYV8b0P4pi30vfIxD5+w72C9aliegW8MHzqrmh/meuFhYi0pKbs6D9fsh/n1XFMrYMbPgUByCZz6J+uEknDA9AornWFRb01WZEsACoHhOqyC7wdetT0QAK2KqOb5MCUvPyhLE0oQxzqaYNXL5xBvyVXe12vByLADjXAvgxBvSPGFGMIjCmJbEW8HfntxtQmxT0cmxp9UPAdKAZ1upA6EB7qgDo6oCUxXRtPVSpAwJpnUhuxAqWCCYK1MBExZljY5S8SYr+pxAFAuBayhNG26jw8usCQLX0SAAkwwcAEngyQizaXoziIli+Oe7/9kJvNk1LmBMe9ECO3XRB7aPeF0EYHNVPdT8gj016YBcWtBfBVYJuz7mF7VgGY/pO8f5WdQ1/7U67nIKNS7j0wIbDPFZsyNHHY7od/xdlEHj8CcC3TgCWHgGAPSxiSdt4312u/8SPAl8/Dlh4pDeZW2PD4J1c9+uyDaIDkgEJQKnTfG/N8nUAmu5HUnMW5ARbPfEuIHy/ACjRK7FL5pOR4RaxgTHofKl8r/S1ZWBnAGDKefbn3AFIPRPXB7sFiVQimKVgGdl5ooNwLQ1/1U+DQGSXQ9r5Evy1q9rZbP1lGQDZsPpzI8APHgXgod7qUx11YtBbFzC+/C+BL7SAWwhgdoLkONSLqy5oLogYft3ZI1F7EAC+phsAnekokhP4HIzml/PvthQWmPB9LJ7jxkcSr14jWj4/0wFlgJD5eoDw6fe4DzAYPHokWhHJZ3TFSkn4h7YOSOBwEtiMTv1aY0uktFYTmI2/43EMQmCuAJmUE0gmVD8EFdPpdnxhVhqzDr8F4NMtYM9Jfg98EVTeNu9Q2OFZBX7vr9vtgm/lcezczZ61ZNN8DCvilYCdPXqNDQpAlfGTKm0M6AA0PTAyoMSx64cRfPQHXsniOTI+fEWDFGp+Qb9BeySRBV2kpl0QxxGAlHDmkI56X6z+EP7UDYSdRgh/IouwIZ36lHabBE0GJ0r10Rgb/xA/tt/j/6aMAf+7R4CxzuBXWRGULwBfIrY6UNfpvLae7n0I+LO/reoLMqiVMbW38oUhkNkQIzZO7tIweGePcmWlAFTjAYHPVGwXxWoLYblEDkLuTT8MDPhXLJ4jALpaJB+ggU6xfgJknT7IKXIQXh4Y0FZCog+wxiUTwSkXUbSMV1rB/A31OXWuFpPUda/mRHKi1e6U+hA7Zq7l+A+UAfDtHg/LrptkQpZ727cRWOL9542Pa3rOvuOqagUltgtmJM08j4/PILbIDKz6w5PAHsbraTnMGdZWIwIzxIfeK0rn578J3LAVuH8CODRahV/FFQ/1IumIvXP1QudNfyNT8oVqcHviPcBd48A0g2RDuoDqHdb2SalZAdG9dnfDkAE0gXnH5ijWCDbKCq5/MRiV0QD8HgHQ63jG0hdsLGxA3x9Bw1Asli7hO3BwApgng/Gjvq01IHrXJ7q3Cz7E++YziF2rs1ZLZ+8H9jJsSoECWXj6igmR87aLgfbGq4GvbgLu2gjsHwdmCEIPSI1h+SkCRjpfUC3iNWcpoRrcnrYbuGsUOMBo7QBCxSTG/igxVcBIVGPWM1h1JYQPnyKNExGZMDIJ9b66eEBGxPDY1Y5nv+GCjfGAxD+DDpiawphABWZPjwNzNLAEIH4XCH0M7/5c93bBfI8Yk2cgVAdvdT10ifDkBWC/r9lGH51NhIsnsWHOfPmEUKT94WeAG8eAO8aAfWPAwVEHISNQlKQUglJjJExqC+H6Nq93kOpUg9szbwLuHa66QzFWkaFieXxi6hgVHOMCYGRuJ+5V4jYJIDKI9KlsAvFDq8QDrnb8NWVPh9EwdFkQ79TlSMIsN0Mi5s9MoOGno4U6f3YAvefL7Y7rvdoFLxOANSA8f7xSgWmd0kCQbmZ6mTLEnJ0UqWLhUkxlrBn6n3wWuGkYuGukCsufGq2iojnRFpafsU7MDxErJuZhYCsJosHtWTcBe1oeq+hxigJgXBrMmTBPnJKLrr+VED54ibHYvZos8sO+DNcrHrDX8YVVyglAKud0LtMjFPtNMz6QLDY7VomLJd671AEH4Xu+3g7nWq28ISvX58/hguOBg8vtFQvV/hEzxfqOevuTfpjri8vAWz8L3NYCfjBc6ZYHmBcitnFd06pxyb8W4gPlgonBqffTtdTg9pybqiVNBssyUsdUD7eGO9amnf3sXtxQipl7Wg/sD4A8AwHIyZMYky50Tp/xgN2OL8y051qw2hXzwRCEdT2nmck1RxHG+w5jeO9NFQBpR6ldMIMXlFWgVndqF2dVFsJzuOgRwMElB6DcI6rznemD0RnbwQiSRS3g7Z+tVIl7PC9kahiYZm6IizuLigliT/VoUog+p8P9l3wJ7qGEanB77k3VczroUToWLCsABud4ypaLCUoxf9i/9w9ADiICULrQRWuIB6w7nuZrwaZwLBGwClSqSyz3AhHbaRGEFGOmC44D72UVgjW2C2Z4lIF4ArjodODQcqUGqAxfcpG4mJVuVqcL5tbs2z/veV0tYK/nhTAqesYNHdO5PCJZos+WuzxHJIViuXFyJxupNLg976ZK2lizUKodilGUgzyGhokF8yw5Mf+qRkjdjfuDtwkkm7DTkNaBaQ2ox1q3eMD8+B6O3H6em8Kx1Ccx9ptWl9iYIUAAWrI3I3nHgPdOtsO5eOuxXXBdj0V1vOL/so3Cxef60tlSpYwveKf0pAu6ohfdJ8k4CUqgvr5jV6VGTBKALeCAh+VbZLTnh5gu6D44A6H8cVlkNK95O1WkBrfn31R5HSy+JCwPplAxRegE/2T+AloGncNmbQyogUQx/KwB4gHj8YWNTwRAOW0FIIIndoqNkTAxz/bd09XDGLBdMM6/pLKi5whAX60gCK2ujxzEAqGL2pQ1Jis5AJEAFHvTujYAKjRf+SEugm1d2COQLU/DAwQ44caEw8AtZzSIPgAvuKkdrWMM6M7xCMBoiBn4YpCE2NCfxWAA5MEuwvCCEICwlnhAHV+YORfDsWJGgPpMKwg1b9QpFnzHbD2BK2JGul9s8KkYW17vLALQRTCBpzXZpS4gtCXXMAkduuAy8E7PijPWprXJ5CR38ygw1fJDohh2BlRAgq2OeN7uTWc1D0AFNtmL54ESBsCaJcLkDajxj5ZXRiCIGA0waDwgjy8sk5+HY+X9ppUbJSCp6TnFCMXwny1WAFQ8rUAc2wUrRL6mXTAefWnFfnz3FpbagQKLAqAzoZjAKkkpXkNO5GCEvOMLFXOnnC4xIKOjnQGNdWSM+GqHQGd7JSsxUf+JzQLwhTdV4je1nQvr1MkPGtlf9yP2Dy+gAqZ6rQytfvdHSDxgLwBF8AmAYjHWluEDiKGMiqOVvtejXTBOuRSYJwDJAARgZAGWL9Nk+IM3SzgTydE4eec1nZHbtDaNAf1Dpd/SMx2END6kD0oXtFhBXmcY+OY6AFChnKnzl7NfdMR3qCAae2B+VVMYXASvDs3/X/zHJZcB84vuiqABEo0QPnhnwqQLyRURmZBPytnwHde0M1vN2lR6picoKULaxHDIEdHkW2iWg4/7b5zb7DSQAVd0/griV2JYojfpwRGEYsGBrOBmx/OgP5sAKANkcbFzNWTRnX/GSGImMYH/LYlk+gGvdT+bW+SWH+Ig1GqL5QeTtR2EYj5LVHfjw/ZDwL8yJ6TB7UU3VVoTjTYxYDK+Ivv7dzNAZIxpZSiU8jjKgIWTcykZkBawDBBnQdMr5QeTKI5iWCB09AmEb7+ucnOQ/aTPWn6wuzyS4u+R0Ob6CUGqJpIDA97AdqINbgRgBJ69CG4Jp6q/ckjXqB/RKla4WpkO2ODgHoynigA0JiLwaNiEt95YQKJ4FRC+7brKzRH9jZbN6iJYuSHm9I5iOAOhHNJfZkh+gxsBKPbLu3+JgaWDdojhMO5kkDWSlNTg4B6MpyIAjf3IggJgMD4MCARjFMU9QCgAykhSKnUCYHB9JB0wy5aTRUxmup4h+Q1uAmDs+hpXgFLnB6ULONOn5xACNJqxghsc3IPxVBGAiQG9aLeilWUJW1FvVXEN0TKp1C6At19TMSCBpz1dHtT/JH7N9yaxp6QkF73KBxYIr10nAMproB44qQGTj6sjUrtOFPtLeFQHLES9AdDFrq1E6M13MaxVCTNAXNFThIylLcor40zxtgDAPKuVwDMrOKw+SBTbtR2MND7sZwC7Qvm4wqHa4T/uIrhb+7n0EgbQdTijoyg+agWXT8llDsAFWr/B8qP1K7bT0pvtVwHhW6+t2C/m8svvZlawi2CKe37nhFtapkDnILRqBQA+v04AjMyn79EIkXO/DnzyCBwVweX4wxs9B4rRZgyPVFqykgDd+5JSpBU5r0vHyHz+jsc3ub0KABsZMCyQgeExKyFPVIz3lmcM6OfPAGCADYPE67Jfs6h7G0o+xvi7oyK4cLZfOgpsXwC2Lq9MwuuVERonKn4nSJrcXnQKcM7dwMMXgYcsVxkSebJgzOWPqdB1ad2f3gpsnwK2LXWeR9m3danUIV1lBSCPArBwtp+7DThuBti6UDWDmWA/DvXk8LRptfPtNUlihYZTOPCi04GH3wFsnwGOW6iAs5n3GeJJ+KLoE+9VDClQ8R6vOQHYegDYwuY3S6H/iJ8jb11ck0q9Qhoc9QMWgPBZJwFbpoFN88DGRWBiqQIgWyJY3lPozaGJ1KTEPh36zpTkJrcXPRE44S7g+Cng2DlgyyKwaclfFoIwvCwx9Zn3Q1DmIPx/2/sSaMuusszvjfXq1ZRUElJkKsBEGQyYhJCBSkUqAW1tsBdpuxEVaBzowXZqe1g90G2LotjQdmMjKqtBxQERdAWUAkUlZNBGkQRNyIAEMAkxpFKpqjfUG3t9//m/c/+737njPq9uVeqcte66b7jnnn32/s6///3v//++Tz0dmD0KzC4DM6vAFpd/0L3Gh6yTDgnvLwKzAWDGiH/ThcC2OWDrErB1pRgQisIQhAa+AED+HEEY6uNLyrRnZLSl6tSbrgLOeBQ44yiw8ziwfaV4UGbdegmA5QMTLFlqsfn7XecDW+eAmePAltXiXnkuZSBkRcm4UGXtU2uo3xsAZgz6y54JzMwDWzkgBOAqMMVBCSAUObh8QuN/CiTgcWAuyWhL1amvvBbY+VgxbW477paa7gIBqCnUrbUBiQuhAKDUot13IbBlDtiyBEyvtO5VDxvvVfxW/JkWNFrCeK8NAGsY7BsvKQC4hQCkJNaKy2LRIsg6SJ3IQSe1onKKC2CsOYMeN+0Dtj0ObDsGbFsEZmWp5S74g2Ir2uA22BScAJGA+dJFwPQ8ML0ETAUAkgDTPq9zdK/+sMWpPF19NxYwA4g3PtsHxAE4SQC6FdSgmGWRRIJLZJll8EGKjHiX1jwaN10HzD4BbD0GzC4WrsKMW2pNobZoCu6CLCDfCTqzgg6sr+wFphaAKQfgZHKvpRSYg7HN5XCL2AbAZwPrZGaj6ippXhgn0kqmU1woxnHedg5AATuWHig2FE1uVRwoxoX+Wcbg89S3AqCKPONcCi8oPtVP+9++G3j+oSK2xRBFDElUxbTS+3nvc4FpDsjxllXQoJg8FgdCQoGJJTTicLcQ6vPL6wbg9cDM4cJv27oAzFA5ky9/UOSvmg8oP86n0dICBn25JwjARWDSAUgBHN6vfdbv10AbARh8X91vDM2ss+NvAECKPVLCsHoyUgRqrlbnRwB933OBc+4DXrIC0IEmiLnE75di8HsyAcjzWUVGUi6uICMpVwwJVMXdeOk3XAxc+Hng+vV2esAYw+sWoP31r3eLcLwQBeQUrEHh4Jo2h4vDmJPuAyMLGAeEn7uqbgB+I7DlSWBGCwe31Gb9aL20kGDb/EGRxY6WTz8f2wtM8l4pgL1SgM8esHCvsuylME4nn9cfQLtldg6TZ0kUKorAfij23vAPCmqp3fcCl60XFINid1PlZrf41/dnApB6wSQjutUfIDJR8CGIQOwWEH7DywpKrWc8CFzqRLHkVYrB2jS2FQH5vkuBycXCAlIUUAAkCM2iRBA6+ARCe7DjYmQduLYTleiQ/XTTS4DpI+6nLhZW2nzVCEBaMLd+soIGqjD1ampdugiYWCpeBKA9bBJC9ActAk8LES26SqsftInLZ44dQif4Igdhym5WLrPDyuYH/7HTCNwDnPko8LXrBccjQaioe6BiKad3+QY/MGTH6rS3OBvCnQDuAIyqhiDkQ9RX+29yE3on8IwjxQPI8zkTiApGU3oVkD/4fGDieAuAdMw5MFQjEgg1DYsUku+a3uI0TGBfV7PotwHwaOEmbHEATvuDIutni6UAQoFRIFRYhfe/dhEw7tbe9Of0Si1g8HkrwRcevDajz07gIJ7n05rYyWIpb4ya/7vv8PRdFpj/LXDmkQLAnA4jCCOlTBRN/rFMAJKgkkVHpGUjySSBSFeg7/azqk8EgbSEq8UDRACLKDXSyaQ7Br//DcA4LSCtwnKhTEkQcmAIQhtM+Uaajl0uS9NatITXWzpzfcdNB4DpY+6nBgDaCtanYLN6fCj4u1ay0QIqtML/EYC61wSA9tAJeP6eWsAoDysFpg1eB0HIQRCIIkVeCqQf/05P3WCB+UPA+CPAzvmCaFWDKEuYcl1yMN+Y2dckqGTeHPEvvWDSNhOAfbefX0A6rS8CUw8X9066bFIfdqMHJID++DJgLACQumyc3gyAEYRRKFCLD1eu5ODLF6QvXedx0w3A1BwwxdAJLTXjd8seQnGrZ9bPFxLyA7WIKON63tYtCQBN/sv9QPm6BkLp0vl9t/m6ietR6fbyBA4gnXtORwRRpNnTtPpW6gWLH83lKqcOFTEnDiKtoHwy8RNFhrefyeztbnrBfbWfgttsP+kIyO32ELD1cHHvInrlvWs6TsnB7qAUlg/suFtAWkE55zYQ0QpqcALoNCXTEt7A3KoaDwGQfqoAOEUBa7fUbKctltwCajVbxvSiyvoasM0BaBKwwdKb9fN7NfcqBWGiSWykWXER0umeacUEonQgCKRfIgDFjya5yq8Wfsfs8dYgiuMxgpAg/vnMzu6mF0z6Zj5APdvPQec0TEosnvQosGOhaLuIYvnwEYSithE52F1XFAA0p5yigD4otCqygFKnpHUpLYP0OcKURYv6Mj4MNR433QhM0gL6QongawOg+6rl9CswKoSkEIxPyTsuAPigCYBmAXVfYcVf+n0SRYw6dP1YwNgHsgSajiJP429RrpWOM6cxDiJB6NINM4w7LbUGMQUwB/M9mZ3dSy+YVG0EoBiDBST5ddZ+PkCsAiIlQZDa3LVatJ0WXG2PbL98AB+4omB3oP/HgTUhmGgBfRqWf2TTrUSjExDSP/qWzQDgfAFAWyzR8rkFtDAKX75jo6nUguZxZ8NByHbvvqBQ36T1swcsBaBAGGRg40Ir+rt9WUDhQ5ZAU7Es2e9LLzglqHRxNkbeuW+oQRRls5jaMjnK0a9ecNf2R4LAwO829kQB3LTtEYQPUwzQAWgW0AGo8AQH0ljp/V17pm0KRcEifGuNOnocO1rACQbKPXhs8TtNwVr5uh+n6Zf3wDgu29g2FdMtOc8B6PdpFj08ZFrplw+ZA5FTvAQQ0/BT36FPDkRqBT9Jag7xYlQItY0f88j78sZzCcKPZlrAQfSCK9uvB4h577SCotUiEJ8opq8IQFl/PUBPEoBLxbRE62LSqG4dFB8r5bHcOtiOQSqT5T7RKzYDgJx+BUCCTxZQCwhaQc9oKcEnEBKknj5FsJ1LAPo9xoWWPWDy+6IIoqbeaO0VA+zHB0zxIQDKkn1GgtXiRxMIAx0Vn0Db+lkuFjLRCt5WEwD71Qvu2H5OfekD5FaciQay/GIbFgBXriwAyGmJADR1ck3DwTE3TQ4B0LetzBJErTYAr2BBSI3HTS8tLKBZPo/fWQDZp197Z3scjGb5BDp/L3+njMweB6B83Gj9wj3atOsPWin9WgXCFlVO/3ctf4iD8XkBkH5USlAZlNPZAQqARr5vxu1yjmH0givbX0UQKI63o0Wun/xHuR8E4VnPK5JQLd4VNttTBvK2uoiKOUf/f+GjwMNBh0NMV6J0c0NpcRv7mrYv3kh8/uHxYp+bVpwLp3R7sts2YzouSq3KGa+q7+x7Co4nazAerRKsVlV1QitF59dyyFZaYY0HMu9mWL3gtvZXMbymBIFMZ1ov2h0B+LTLisxgW+Eq5uU92iZ72ud9vvR+4JFp4NjkRh2ONi0OB1/UBCkvEYRhfuNs4OmhhiPKnFQlx6aAjMnSXJUAACAASURBVPjmz1w41nnwO4cCIBvBwZgTAOUHRq3gyDExD4zRGVYEnpm5LqmQc0M5esFt7acFl0SlHiBxuTkYxxdaihUC4QVXFu5FCUD5QtJl85sjGA0ziQxqeu/fem+hw0F2fLLQGxFlYMRvo7v1WmIVtpt1DFkXvOR7LwJ2HSkyoZmEypoVVe8p7b6qEMnidGG/Vl/L2aPOIwuA1pAIQE3DAmFa4j9f7CPaFpCHKujr5xzZesGdHqAqKz5X+FLRAl58le+jui+kTBALMcgZ73CDBkpN2/7+bfcWOhwUyCEAjQTcAVhKdjkPc2RajewKyu/n1//qJcA2uhBMRGXQOcn9U6JIOjXHQqSYOsVoQp1HNgAvz8yny80H5PVz9H6RqVd849WtXQ/zA0Ow2ayGLJ474L0G79vvbulwkJi8BGCg4S01SKqofoNvSIC+5zkhFUupV8rUTpJN06KpaBkFQm5M1HlkA3AyM5/u9Zl38zrk6f0iU6/4hmscgK5ISUtCTowyDqb7UxwsqFJW3fo/vbuIBJEZ1YRgyHwQKNi0KEl1OKTCZJdxtPDn//v8ooaDaVgqFyiTD2IKfcjZS4Fo+7g+HXOPv84jG4DIzKfLzQf8KVfI/FNKrQ6h94tfz+vOA9cGAAbrpylY2SDlVTTt+uCnV3/V3a7DQQAysJAwobZJgUXi78Qayhd812WeiOAZzEyUiAkHMeu5BF5FwZQAWLPwknkLQy9CrPMy8+lIHZFzvN3T+YbV+8X7c64OHHix74V6zIxB+RJ0wQ+UU992tYoFy3fcXcTDxQkoPsCUhFIczKVCegSg5B8A/PILN9ZwxBSxtiKiUAOi7JW0dLTustF8AGbm0/1o3vjjnSGdj+lYlGwdRO8XN+c1wABIoHk6k61yuSCJITq3jDY9Vx0BqK++uwAfX6JkI/hME0SC1EGguiQ+isqcQRLrF6/0jO2w+6FMnZhyZYsQ1W50qOHgPX1NXndtODsfgMwHzMin+0+ZN0S9YOllMzWfLwKQSS396P3iY3kNOLDPM1y065H4gOW3p4uTDkB8zWdb7FgbdDhEgJkCUDRvogTmd/vPv3BVAUBuvylNzAAYi4hisVQnEHoIqWblrxqm4Mx8ujfljT+YjsWBYgIOc0oJPsq1slCpH71fKybJOEoAuuVTRSCnYlmU6P/Z4iSJEcbLv+Yu9/1EAh7JKEXDKxq4ChUiKymRbwjgHdcUWTARgLYXHSr2LOU+BV7MVwzxwOfkOWybYAGZD5iRT0edjpxD6VhcOQ6j94tP51wdOHBdMeXa9OqWRcmWXA1XLUIUH6zyCwlAs3z+YBkfs1u+VIejJEF3ckrjI9T0y/aMA2+/tgAg08VURKT8vbKMUgAMIGzzAcOi5HknHQAz8+l+MW/829KxhtH7tTz+jIMAJPCYMULAWd6fvi+EY9ouoZBM/Kx/4LUBgFLgNC5o16FrE8JJVJgkiFhaQQBv3+dVbMrWVsC8UxFRkjjaVsW2DtRdOJ/vAyohVYK7A+bTvTdj8HlqTMcaRu/XxHkzjgNkIOWuDr8jnYYDKDutgpUhra0uAlAyCCUAK8BXcjBXgLCk/h0D/hcByDxFAdAzoFUqUBYRJTUcMWdPP7ONL6i5bLQeALJRQ+bT/W7G4AuAOXq/lsGdcRgAY+glLkYclJVTsa6ptCX3uQjAKINQstFrAZKIwWxQIhIJuovB/Nx+r2LzFCwlj8Y0evl/MYk0kieVtcvrwGUnHQCVjjVkPl3mItQsIPuElx9G79dOzDgMgGkAWlNyBJn8xKprBRC+zgEo4LWRgcdVcOCjjlNvmx84DrzNAahaFZWLygKWxUNibIhTcPD9BMLLa65bzreAMSGVoXvJ/Cgh1WUfO+XTZS5CDYDs9GH1fnOrIDcAkABTTDCCLYK0Cwi/586WcKJUiEpC8CCBYDsiiSplqUIUmOjf+o2tIiKVUJbgU5uSWl4DWwX4+PcXnrQATBNS+8yny1yEopdcay+930y5YhgAg+9n2OoUeI5TdQer+32fdhmGoOBZanBo+g1yEKU4dYgFSvqB//vZBIBt9RshkTbW8ZZZ2hUgvDL3iU3uux4LSBM0ZD7dPRnTH08VAIfV+2XAOucQAMuVcKfFSD/+IAABsEoGwYAoHZIKEEYxRIHwLS8pUuhjFVs6/ZZhIVWyxVKBBIRXnbQATBNS+8ynI4tBzkEACv+chlUVIKE/5cRGsWmlKfIzudc3APLQSlg3E2OCyVRc1kpU3DgBmKoQsWtlBcswjPu+nfTYtBL+GQdgOf16GCZW6pXlBCqWSgqJypoOAFfXXDifbwFJLvi5HAjlnUsiIe6AjOp4iQNQHRlT2PlgJCUbbc2s+v/hFwFb/q7gm6HlYpBbmTV2sscQyy/qFBj2v0/cAdz/HGD7NDA1AUyOOU+1CwWOewNjKj6/O03F1/WuugW4/XJgfBoYmwDGdH7IxB5kLPIB+I8AfNwZgga5ck2fJbEm8V9zNWPfrasbgMuPAcuseJ8Exsb9FdBhA+7gaQNKB6TfcgCYug+YJT+g89aoBDMmIMScP12uTKj13uDv8zsKig/uJ1uQOsnojm3qB5P5ACRBH3OhPuzzRN9DV88HqQLEWPJnvTy5nm/t/1s4BcuSpRZtGAu4fi+wtBVYEyccrYwn6hF8/FkJp9bKxAKVFsn/d8urgbHPA9NPOEOWl4+2cfoFHhfVrJTZPKHSj5daOtup6JyCpPx8rHWRVQ7WOlrYCMx8AHIzlxkALPD9c0VB+x/A3E/+E2fUYHXdF7KTGwdvTd0AHP9r4PgWYG0KWBdfsBdsMPfPrKKsoL9XAVLAvO2fFylCE4cKliyrDVZNcGS1CqEYhWFiAZV+XntaURdTLmpCEbpchTYLqi6NrkMCzLzt5Xc4HwyJmmkJ+Z73jQOh4NWeDUZiK1K08f0EXt7CMHVawIk7gaVpYJUA9LI1Ao8bzKX1cytoFtFfpdCIWz7rgzHgth8u0oPGDwETc8CEMySUzFaikgtlpW1Ta8JqNba7lVljSRgW+Q6ZP/57WQvj6fydBjXfAjKbgEvMLwWCvhNoipgNpnQshlS4IGFWzIk6ylWwAz93ETLxGWB5ClidLABoIOS7pmGfG+33YAG5mND0G8F4678vkiPJczNOAC4UyQm2N8w94kirFlfIAl7i402d6dbPWWAtrsjOFiuCvAJZOQE0pHTFsckHYDeCvhNgipQNxoAz8/8IPr5nbvH2jd+6AThJAE4AqwTdZKEBLDoDgU4+YVkPHIBoPwareOt/BkDexsMFAFnbzNJYm0IDnVwbt4uyur1kwL7Tp+iZM/08WT9Rc7DHUmuYTr/x+6o4ovvu9fjBbgR9JyA+omwwxvZI5ULg6ZW7y9FPf9QNwKm/CgCcKABovh8ByVy/UCtJq2f+X1yYJPGU27lIZLbuEWDsWBHesZeDz4iURLUWa1TE47LqK12fZmd3OXidFctqm92KatVs1jAEsNv6sdymaa2g8+xUL4I+Pn2beCgbLGWHI/h8G3oTr45iK86POlbBU9yKI/AcfLR+ouQwH9BfmmbLlTHboOnZ/T9+5vaf8FUaAThXsFOQ45mUcgZCWTAxe0UQ+urYMO1/37GtxQmoLCBtRSp30LrDp2SFdzYMgk/R+VNwvwR9mwQDsaspGSfJgYDYNTbp8psCQFJxEIBkQjDrxt8dXCUIY+COH5MVFPi8SOn2n/QYLZ9Gp0cxANIP5IvAkzVzxivRydnKNzBa8fddM84b6AFyAriMF2pajk9kYIeoClXmA3AQgr5NQEHMBqMVFMNaIOayNRL/vhlH3RZwmhbQQUcAasrVVGz4EtjCu/3dfb/ID3PbT7uKAZ/MhcIC0vqRTo4W0IBIEAmEtFwCYqjW03bcmdwBYeoWgetUbrR8snrloiR2drpACf+rD4D9EvTVjIJu7HBV+781X752Czj9lwUZkTEgcPoNPp5Nv4oBRhCG6dd+1DkMz1JIhR1BAHJ7zwqO3fIRRM5tmDK5CoQKsSgOeBYBKFZULTqcB9r6Ni5KYmd3WKDUA0BlhNLM8EbT1QBXBU72aI5ZjUcVOxz7WLkQ8d37vsart/uA6RcPsxNSAtAXHDYNC1AEpf9s01kKwuBwGU7HgVt/1jtD1e60fgQigSe/j5bQp+KYpGB+H62jT7P8/ZypBIC8Dhcx8eY9wF015abhmnoAyJ5WSrKeNgKO9SHxnT/LSasJBim5lRjWBEIVeROInKL1qunybRawLgASdEy74qjaNNzJCgqEEYzBGvK0297mAFSHEIB6ebKDgc8J1ksmV8t29f1en6L5v6cxIK5iK6Xne/5jCTiFcTqVn/r/tWDPWwXnEPTVgIKUHU7ljASawKefIwDpMdRxRB+wFgD+RREDJABpwSzz2c0LfxczVjkVKwaYgtBBezu3SvX08d39P5uO3QKahXMQciourZRAGKZWar/YZ1xXRPe8wQr2AUK7TvbOVTZBXx4MBECRnConUBSFEXT6mf/TK+/qmzAF/0UBOPqBZYF52HrTFCw2LH5G8UCzJEko5nZqmRnPh/uCXmpnVpDTsIPPwKApOaSA2QLDLSHf97iPx0tpISLfz7bl4iFfsUsnj+HZWEeOYDCDnDmCvZkEgedcCjxGseIhBYt3vx049HwMLRh8gA9gh2MoH9ABqKJzxf0McO7XlSAU4HzhYYFq+5D7hwBu/98OQLlIBCKnW39SlXNY+nqeiq2dkQg+gnGPb9/ZpT0lq6MV5D96gLCwgDmCwbdnCvZmCgY/dxy47xxg5SWuUjigYPHFbwA+fyGwfr2rXrMvPB+vp3L3GHCgi9JOHQCkRVPppeUBigXLFymyejYTB4YsgfA20ofRAlYB0FfAlvQqP0/TsX5PLOB5DNu471cmIwiBaRww/F01J+mz2pqChxUMZvpJlmBv3iTocsW4dzewfhkGFix+2febXDAeJO/YEILBB7pU1g8LQFo98QASVGYNQ6DZfEG3fnEqrgLhbf/HV15anbkFNCvohWSl9XPQ2XTM/2s3I4DwPIZwBEDfgitH0Ek6N6x+u/iD7T4g/YdBBYPpWHEaHlqwNw+AQa4Yj54JrJO+aQDB4pt+oCAyYvOPEIQDCgYfeF/9U3AbAMX7ItAlVtAspKZdz5SOlvA2pstxjES3wJ+92NgAGK2gwi78QoVfEhBeQACqNNP1RdoA18kKdgDhxkUI/zKIYDCnqyzB3jwAJnLFOEIW7QEEi1/1Y21ywVglCAcQDD5/Efj7M4CVrZ5AKlkhxeQUaxBI4nvFzxf8IfCVC4HV7cC6ZEX5nen3VX1vAGLZq8ysrvHY+QBwbGfI2E6JpLvdX+ksthpUvQrmX/sVDGZVUJZgb17vJHLFeGQcmCdVb5+Cxd/5xjZ6QzzMLOQBBIOfTV2Ps4HFHQ7CLQUQmUrV0rgKJMsCjsxGAqTn/hzw0EXA4tnAyg5gbTYBorKkUyLnkB9YVhTxu+kT13iccwtwdBewPAus+b2ar9xJAafqfgMQO4dh+J9+BHe5gqZZZzYok1JJUcpaR6bp93P+W/N6p0KuGIemgEWKgPQhWPxdP7NBLhiHKYHUp2DwpZ8rLOD8tmJQVplOLxAqmbRKC6EDYC7/CeCRPcCx3cDSrsISrs04CPm9ArZk55UvKAspYLqPaPdR4/H0g8DRHcDyVr/X6VabLHk2PhjpPVZY7d5xwF6CwS9y/4LbbVyQsEKIufGiKe0p2JvXOx3kinF0GjhOQY+oNRtljji9TQPf/fOV9IZY4Gq4D8Hgy/4W+Oo2YG5bUUy04vUcLCqSJVRWszJbNgxSmMau+q/Ao2cBR88EjtOqbgNWWaTkIFz3YiWrF4nAjtN0nBZrJnU+/8PA3CxwfMYB6LUra3oglL0tps6wlVha5rLiqd9AdDfB4Je6U0s/0BXTDYh80Sr2FOzNA2AXuWIszABL1JaKWq1R+nwGeM17OsoFY5XTVw/B4Cv+Djg0C8xvLYqJCECzgsxmZlq9T8e0XGUyaUizavPtxoFr/zvw2BnA0Z3A8e2FVV3x6c4sqwObckeyhiXAowUSADhD1XhceDMwx37lvU4XxVN2n3rJIocygkr/Vbs7fe+EdBLcfaXXQ3IPWIrpBB6XlnwpR76jYG9e7/SQKzarxM7qJFj8mg8UarMV9IZ4gvNDD8HgKx8HDs8A8zMFAFnPYQPDl0Co2g4fpDZLqKCxT0/7fhJ4fCdwbFvhRiwRgJruCOwUgCpeCvUjZmEFxhfk9W969kW/B8xvKQqnVgg+B6CB0MsI7P70AHgmd2n1NQ0rv7FvALIlVYK73MnQCDLThSGZoDpuP7uCeuX5n8zroB5yxThGnQ0CgyBMxY63Aq/5aBHG6EBviDlOLV0Eg1+0AByZLgbl+HRxnZXJoqqttA4ODovlJZVuSjTQFtq+NwNPbHMAzramdVpVs6wEoPtdNg37wJfvsYiJP9NFqvHY+7vAwjSwxAeNxVO8T6aNVRRRlT6hHrJ0Ovaw0WDJCKng7g86APvNB9wg2JvXO33IFWOBgn8EIf2nRLD4tbe1+AU7yAWbZeskGHwVdd2mgAUCcNKnJgLQrZ/V9/Jnn5JUYmnAE3hCmv3+t8AWQfSzyPK/POOgJgDdsgqA5nfJAvLdLV+bz0kK4RqPZ3wQWJxyAPqDVhZQyQr7gyaXI9axWCFVAGLvRUhV46PgLnUWBs0HbBPszeudPuWKsTRZAJDTo8l8ui/42juL5veQC7ZpsEow+OrZQlqVVuH4FLA8WVyDAOTAmHUQCAWQkOlsQAwDt/9/AE8SgPQpNa07+AhAA6HLXbb5Xr4IaAMfv/eGvP5NzyYA7UGjBWTWjh40v9fSyscHLtaxhJWxFVsNNAXH1khw983+DYPmA5aCvXkdNIBccemfceooAfhAAcA+6A2xLuAGucxrzgKOMexDfV9OwbS2BB/BEoqLSrBoYGgJ3E8qLcIEsP/ngCPuUy7S13L3wb6PU56/m/Xj4Ps0TKCXQA6AXuNeZY3HMz5QANAeND1kwcKXlj6wOZQ+b7R+Pi0PD0DeFAfk590CKg8qncfoFzIRVWVqfFfBhgn25vXOAHLFWCDbvPstBsJZ4LUPt+jdesgFg+qVptWq11bg2gtgfuLiRAAgQeg+oEmsOujsXb5SsAoCIN/3vx04OlNM6Yv0tdx1MKvK7/TFjVmeCD4HQQQhf159eV7/pmc/kwCcKABoeYvR0oept7SEoZQ0Tr1lPuPQFlAtO0nyAcWhpzw/FSjFzGjLx+RGvxzoSeC1hwsA9klvaFN5FAy+9mJgnhaQ0qqagglADo4c9AhCDpJPl5ZommQ8738HcGw6AJBW1VecZv0cePwOY0/wl1lAD/WUCx0mMlDLr8bjmb+Dwp3x4nkDYbD0thIO5aNtfmDi/xGEeRawxhs7Vb/q2huABQJwAlhyy2cC0xoggjAAUCWWAkksOiIY978TmOOqeqqwqAx3WGhHK06n7TDwOcAV/iipPAKjwgrZm2o8nkUA0gKmAHTrp+o9MTrEYvq44o9pZIOtgmu8mafCV72YAKT/RwAy5OPOuVlAAk9Oule6xQRTWUKlWtkU/IvAHAHti5oIwDK841ZPFtCmdr0U8PaC9hVultd4CIC8P2Ztt/m5/qC11TJXlJDGGpfGAmYODgFoCxACkLpuWh3KCgqE8gNVZK4KtxgjJAB/2X1Krao1rfN7CWZf3LSBT4uAEIyWBVpipL7GgwA0AW25GbGENBTRx3rm1M2w39mmrFVwjTd1Kn+VAZALEE5LtIDyMWUBvbLNLGHgd5H/V07BDp7r3uU+Jadgn3ptxekA5MBri0/Wp4wzBjDbCnkMWMqVpE8GJwLQqvfc0pqbkVj5aNk7gbCxgJno30cAjntowtXNaZ1suvSKNhsYTcVKmw9F5xGE+94dfEoP+JYhD/8OC8eIPUsUHokVVKB78XszbzAF4Pvd//PCKVGIpOAr78mn4DZOm8YC1jco+w6EFTDDPJqeCEBZBa5GffVbhmQ8DtZW5TYOvPhXip0GTuu22lTMLSw+aAVl9QhEWjurI/aQiLJkTMLsX9R3r/ymZ73fp1+37OU9hunXSkdl7T3QrhKCtlCM59k2i5CMMSIAGdqxEIwrmptzTsCEut5yilKoJLAcxCq3fe8tLCDBFwO+tKjyuxSCMdYEXoeDrHcHvu0tTwLzmwHA4N/Gh6zNCqqeOSxC2lb8tQSiMwbuqXIqAcjFh2JjBKGJyShQG6ygVbfJegULWBYcMR3rvb6oCRaQwFPgl1M5rR7/JtBZOIZWx/0+s4QeY5z/1/X2tFnAxPpFELaVkdLN8MWGVr4pCBsfMHN8bmTKfCjZ0Ncp456/x58zLzfw6Qf3ABd8pUgEYmqk5bGyek06IQl1bkXScnlN/u8L24Gdx1qVq91KQvrpgwaAAw9p+wnXPw1YjyWMGtDo2ASOFGMU7SIEUzdYD34vMPmXwLbHgdkFYAtlGiim6DpxJtvq9LtlVr/aWKEB8pUXAOOPAFPzwBTZ9r04vdQ9Ts4pAZ3cd+yHxgfMAOH+vcA69/9Uxijmz/AerYpdar1lNSMYzV+vWY/34I8DY58Gph8Bpo8A04vAFEFIknIHohGVR62QhFRSYjQE6qFri2z3iaPAhHNNlxKwArI0Q1IAxwfReacbC5gBPp66/5ICgLKCtqnsrKKlrFZUFPKOr7osMTtdsxzqQRZ93Q1MPARMPllohUxRqkEK6gShOP0S+dY2hlRv99y+ovRi7IiTnTvLqmg6xDPYpqAUgRgsoR7MxgJmgHD/c4E1FXu7FRRbvEgd7evXWlbPpp9EgUjiJpwe6zwOMlvpAWCMVusJYPIYMOlSDZRpoGiNxKzbdIQlXONMWJbGtw4svdgz3El47nzTRvPrrKptAJT6ZrzfintvAJgx4vsvdQvIXK5VYF3sUZxmJUvgA1FOvwF8spKyBtM1y6EepI4LqVMedbEaTp0EIKdPKh5FqYYqSxgo2jgFr13j6XXHnOiSZOeBVSvyC8qC2r05FVvVw9cAMAOA178AWPMp2LJaaekiCPXExwHw660n1oB/niGQazwOkkSepbJ/72I1x4CJ+cJ6lYI1riccrVicUuVSmIW82pkwnHHVOKbFsOozQGkFkwewnBES37ABYMaAX39ZAUCCb82nIlo+40p2gNnvsoKunxH1xGwA/LOzdQOQJPIuHzV2GBg7Cow7AI0l33XfjOsv6oVodes6ISbBsAZMX+kJxU56KY7pkmFVhOciuvTzSt05v0+ryuT/9gDrZNe4wPMsI7VJP3GcP7gUOOdvgL1rRYJ0ZI5IV3hV4/wrGYPPU3/AiRhYusy2K7mU999P+z90ObD7LuBZK0Xdkeq9NSX2+o4HLwfWlopFCC0fgciBMtAFC8CGrYXVoVjnU2G7rTXrzh4kfRzLY1kyGwBoeiGcPiXb5eAzdXWnazPCSScb4j3xfmav8Cx2p50lAMW0VXINitCogl2r9H2dcctWwQxQsn6ZTBbMNtcgdKIbiZj51VcBk38CXPxoQcfCUg8pjcYgZScw/momACnXyr4leBhs5QaBTHpf7X8dMPYJYO8XgAv9e8QJlAZZq8D4xSuANYKPJQn0AR2AHKy1MACKe9nfFI6IEqduEWoHIJ9wlsVKLekoMCa9EAegSTYQeM4TXco2SEMkAHEbBZoj4bbYtdyCVrFqGXgTSxgXYTZeHLi9AMjEQRCVUXP/n4KUaaT8vVTi+Rtg7GPAuYcAWlMCgUVkQfJ2Q12yBvPXMwHImhDWwf81imsTiLSEvHZkr+jY/p9CQRD4p8DOBwteItai05qn31FFdfLlFxYWgCDUIkRkj/TxbCEi/89jfPZ3X2VqYSJQbmUNQY3HQT7hbv2sLoerVwKQHNEEoCsm8R4MhPRjXUGzVEIKIoY7yaEYuY4dgGb5RXruoSgtSCLLarkICQ9f6QNykGjFdjsIBaI4kGlt8W+Rg5g0HJ8qAp47nihAzFpuWtPIMBZJlASILvR6fQ0DCVbJCkJOJCqnk4pGpb99tZ8MopyiKDX7WWDiwYKXiEQOehCrgKh+eJQ+EQHo1Lby/zRlyf8TIbf9XS5ftIb8I92YugH4ay2pLusorl7dAoonWtMwQSTdOFuQSLTGHyIC8kxSIQuA4hwU2WUAoO4/grBcDbsfWElSzg+JCoYDoEGM1ixSkHzgF/wG7y8sIa3J7JPAGWuFJSQIaU01iJHUiYP4e33BrPOHmG/JMaOfTZVYRhwGav87vWKPJ9/rSH4IOGO5sITqg/ggxXs4TOaBAECbeoOsgfl+DrQShFqcEIhyyt0MbMusEkx76iAZXKM8BvXiZAGlF+KaIbaadYpem4aDgpJZQz6YJABV5VcHAJZ0v4FxX6KG5UpYs0KnqjhRuagEVgPglYAl9ciHf8mdUrJh0Qx9vkDBzBywfbkYQIGwahA/kglATsHsDzKA0BATiPyZ4NEDwIeoa/uFYKKXL2f24nQoIgd9R3yQCMTFqwIAfdBWI7+yB5ZLECYLETd85YJl+2YAUNosLIel/xYlu4Jsl6bhNhD6it4WJCvA2Zc4Gxo73RcgJeOqFmGR6rcChLYACyGojmEYdj59KnZ+tIQRhH9IvWA2hiREjDeRI9Cly7fMF3EtWRFawhQIf5IJwE56wdTIYdt7tp9ys1K8JnoJvod9Wn682PNkP4hUy1ndWgstAtBDMLYN5/6PAc5DGNoF4SrZfN+4+IhT8jqwg2Cp8ThIJ5vfSWBXAVCrWN9SMxDK+skaOvhoAc8me654pmUB3f0wyt+E8FyRAGmPlOEoiSD2qgvmAKoOm52fAuiTDHSyIRxx+lI0QxxADubfF5vffMmSajrWlP7nmZ3dSy+4r/ZzAUEHnQ8R70HsXlK+PgJsW68G4XYGZj0EY2EYATCAT6tAhmE0DXcC4faapcwMgAIfLb0kuzT9Qmw5uwAAIABJREFUSi+EfeALkSrpBovbrQDnkm8wAo8/E3i+CCsZ98NCpAp8cUekZyBavI4ET/TnaAk/RQCyAXy6uNSPA0i+wMeB6ePA5HFgZq2wpNGK3FUDAHmv3fSCe7afX8CB4UNEEOolVi/3obastNwJ9cO5BOBKEQMsAcifHWzRAigWWAlCn5K2bQYAOe1KMjTIR2kRUhKVS7IrLia0v+3xwHMZMCbYNP0KfG79zAqK5DxOvyEuWu6VD5KSHy2YAEQAfpaRdl5UkuUctIpBnCIIl4psD03FtIIP1ADAlBuJM47EqqUX3LX9kSBQcuuyftK78xUkHyQ+RLqHZ3Fv1KcgLj5kAQ1s0Qo6IA1nHhNLQzA8ZxvBXuNx8DcS5UYpNnoYxsCnUIqvZo0F3wPTMa7Hv53HOJVbS/l+5bumX7d+5WLE44hxIRJB2NMCqj9ixwuE90svWCaIA6bAp959EKeWChAyA0PTOV2unGMQveCO7bfqHbcS4rJR7Ewqnw5AWhLuImg2uFQAXAVs8RGmntW4+g2hB3P79L/EJ9zGvqrxOPibiVihAOgrWQOf/EBfBcsPNBBqW9Hv6zzGqFzmoXz3B9AePgXiq6bgiv4YOB9QHS8AfpkAFMMjrWAcQA0iO9XJiQyAnos2vV7ESHOOQfWCO7Zf7F40mZFQScRKAYBaSU6vAVcTgN7xXHiUFpDTMK2dFh56912BTiDcvpkATIXzCL4g3WXTZ4jpGfjoF/oihL+fx+0yWUABLwIwtYKKIabgCzHQvi2ggBKn0McEQDaKT5cGkIOo6SuyYzEfjQB0EM5nZgAPoxe8of3sgSqCQM3jkdFLvpRvR13+7UVRuhUFSavNO6otwp88ZZ3+t4M6HLtch6OT9AG/q9cmtf//gV1JDYcnQ2zY6/YakfSrU+Pg1M45NqPt3IEtoM7WFHokyrWKkooglCMWLYjiUXMtK3g8Uzd1WL3gDe3vRRCoUEYCwGtYFxxqgA2E/jI20F5hhmQod98BHNnlxOTig1aGiDanO21yV4DygWuB8YeB6fnC9WEtiKVVKeE0ZGiXWczeJoWMIig5a9V5DA1ANoKDeDylZ9NSXxyAsiKawrQqmCv2HVf5e8aRoxfc1n7xs+khItAUvojvyWryxVcWJZksVSyZoQRA3dcAoHzax4Gj2wtu6FVKM7gMgti02jbV476oUJJs1j/AbA1mQ3Pm8eTRsoZDtR+xZKCiEKmMXTIeXHPGdhYArX8FwG4DGMEnAHIK4yvT58nWC2b73cexaZgWWaEKgU1gjNbPP7PvOYGsUSBkv3hBtmRWNzxjTk9RWktvxp6POj0vARjY9sWkFel8RWxegjIF4RjwAOnZWMPBTGjqvHmszxJOBUD3xyznL2bqROvoP3N3q84jG4C7M/PpcvMBef0cvV9k6hXv+2Yno5QfGArRbaCC0mWv2YtF3ecerNDhkNZIIsXQRv5dlTtGADJSz2gEE1EJQM//026HdIEZLC8B6A0tk0g1Ja8DuzJdphS82QBEZj5dbj7gxZN5er/IZI+67pscgE7QaDOUMyC0Wb8+gXjuR4F5J6YsaXnFhBoAGEVvUhb60jISgCQnoh/OLBgvIrL8v7DdFkEYM5dtNg97tvz5zJqzdfIBmJlPl5sP+DJP5xtW7xffnzeh7H+Z+3+RpkyWT1YxuURJYVtx6T0fCTocouQV85VkHRIGegEuEv/YKpkA/JceVmL8kv6t5/9pu62tfiPWcFQVEa0DZ9WcLJEPwMx8uvfnjT9IgZyj94t/ldeA/S9tMaGa9SNdmsIxbvVscVJ1GScoMt4UPwhAsmMZ0aXzQBsvdGRBjQz0FUpEJRAJQOq4KAnBdz+sfiPJ3bOYn8fsykyVWMfiN3BOzckS+QDMzKe7OW/88aqQzsfE5kH1fvGjeQ0wADodmVGwOeiMsUqHrGOnS4UFy9P/wAEojkEnI+IqOIJQNLgpCXhcmLAtD/D+kgQE235L93tj+YBqgTX9BiCeW/NedT4AmQ+YkU/3sbzxBymQuZhm8g1T+QbV+wWFdjKO/Te2mEFNlCb6gPF708VJ1TXHgKd91GnZpDfi1k/gM2vqU3DUnCuBmNQe3P9vw6pe229KOvB0K1k+ZS+rnrfM2AlA3JMZtah/EZKZT3drxuDz1O/yxAwu9JgJxr3lQfR+8aa8Buy/wdWQZAVl+ZzCrG3q9c/YrkmHy3IRYryAAqAkEBIlopJxNNUbER+fA/H+/+AAdP9PmS9dazicJybm7mlB8nR2dI1HvgVkOlZGPt2nM29GCamcGZjAwlQ+vvrV+8X/zGsAAUiLVPp/wd+zaTMFWw+/kAA0GQQnpCw5mDsAMIrcRB5mC/+MAffTwgfwKY2KfmCZ6ZIkUShrxXxBX4yYaV8Hzmcn13jUA8CMfDqWYeQcSkhVOl8U6uxH7xekrsg49h8oiCENgC5TUG5vKxxT8f2aRtOtcAKQ1s8soPuOVUIwpchNlEEIOyNSIrrvv3hwnckWIZPZsnbcDyzTpvg3lU8mpZQqozyfK74aj3wAKh1LgrsD5tMxiz/nkGD1sHq/YNFOxkEAcuW7oqmXlisuQOT7VV2jwi/kTgj1RkoZhBje8Z83SCAEEJZW0C3gff8tADCt4VASaWIBK0HI9q8BF5yUAMzIp8tNx5Jg9bB6v/jdDPSRns0BWIZeUitIo9IhHmhXTvzCPQddccnZ76U1V/IvC4SBCFyg26DFNg7c++Mhhb6qiCikT7WVUmr6lYn2nRKyrdZ51GMBlZIc07GUBdMjny6XCiUmpA6j94vMZbgBMFo552pu27PXAqXTyAUQcitOQjAm9xX0N9pIwIPmSCmH5QuPqER0L4kDYgp9zOUL6fYxkbZcFceyAreAF3GlV+NRDwAz8uksnT3jiILVSmpWNlhMze+k94vMZfgGAPJeHDjpCrgM01Tdry9OzvmYAzAqLVWIwEShwzbRwwSEn+MqP6bQK5tZlWyhjCCCsC19Xv7gOnBRbgp7cu/5AOyVjqVMmA75dJZ9nHF0yohWNlhMxKnS+0XmMtwAmFq4imnYbrEqNJPc+9kfd62RKh0On8qV9hXZ9askEPgAfI56ziocUgVbzGT28lEtRMoKtg7lBHtznfZNA+CQ+XQWM8k4uglWK/NLYKzS+8U9GReXD0g/Tyvh4Ne17Yb4Zbr6g6y7/aNWcoPpjKRTsJIags5IJwkEAv6en05S6GUBfRWsUExZyVZVQCQwrgN7Wfdd41GPBczIp8ODeXfTSbBa6YYxlY8/p3q/udc3C+jTbtvqt2oadnB2m4oNgMn0W0p+hYWHWbwg9yU/0Kb9EIy+5y2hiCit4UgKyTeAkN8Valk4Le/ldlONRz4AWWBRM6fdIPfHstw/G+SE5rMnVQ/kA5AkLHS0ak7V7reXfhgACaBqDtD3e/nmc5k9kA/A80JReq+U38zGVp3ObJo/BvAOD3dtwiWar9zEHsgHIGlFubqSx7+Jja36anLLcDvvgwA+NDpDfILv+qlzuXwAXuSjrkKemlO2e3U1uWUYnL8dwB/5e2apca9LNv+vsQfyAUheX4VguB+mzIsaG9ntqxhF4Xbe3QD+n7/uHLAW9wQ1tblMRQ/UA0CaHC7plXEh+q4T0OWcfhleYTSHBK0EH/mi+fcRuKQn4I6fWpeoB4AevCz3HOOm9yb3F5mBlZBNclYCj1aRfyfrbgPCTR6AzK+vD4CyglX7jpmN7HY66d1E0ctdIrEEE4wEIMlam+Pk7YF6AMj7EwAVbU82vTerCwhAXopJN9zVI+AYrOeULLZgErY2x8nZA/kAJGWr0naUWdFpy2cT+oCWjpdjLFxE5UzYIBBpEUX5nLnlvAktb76SPVAfAOUHpiAMm96bsVtCAMaKALICMyxDq6cXfycA+b/mOLl6oF4AiqBRIEzBp7/X2Af0+fi1XIioMIlAI+AIPIGPmeROWV3j1Zuvyu2B+gHoFfZiDS2lC0LiY52WUADkQoTTMH1BFSYRdHoRfKSu5v9qrizMHYPT+vx6ARhSuDcAzzmDo5ZGHT1PAKYMwQxME2jiSo/gEwBrrq+u41ZOy++oD4BaCcsXTPiSI3ey8s4KGoG8QwCMFM+0ggQhLR0BF19SXuD/ayakz7uR0/TsMcxg3SjfqWNA0hsrga/ojaq/8WPcC+YIk4Ke4CMSuB2XVht1Oj8zIfXlU8BtU8DhmYRXWdfrdF1fgr3+S8At48CD04DVjXQSDO70PTUnaJ5uOCwsIIFHSSFy1pKPWCDsZxCpw8UVgKSPxLXM937OzxxAljzcPAbcswU4Qh4V3UN8mKoeKm/bu78IfKJQa8VD48CylHQiL3O3/qg5Rf30BKACMtJXjXKQcfBSK8Dfqc3KVCwuN2VFGRnm/yKZtq4Re5ifyQQgM2A+BeB3GHaZBo5MAIue0l7Kt3cC4xhw+5eL7TuCkJk1jBtyerbUfYG5ExjZ/pqrxE5fAOrOq5SmowVIrRp1IyT2R6+fg0bgVYG4CsyZe2UsaiOGKXr4Sfp9k8CxCYAFSKyvXeY1o1BxQux91yMtfsHPutgnnyUuUvhc0ZsgUXib+nVkq6+ZKaABIHsgVZnuwD9sVo66rrR4ImdhLGSQ8zPL/JgBQxeU1ouWkO9PTgDzbgmXxrzMkatl3keivfG5x4r4IRcz5BfkO5vEZ0kgpIfBZ8yKjlL17syy0tMNcOn9dl4Fy6dLFabj1Mpvow9Ify+I4Nlo9Xt+ZqU9VdJpqZh4QDDyxUyYOYJwHDg+DhgI/WUVZl7aSEt93+GO9Ia2iuZKOfA7lhp9JpvAVy61w2mOwO5hmCgMHC1H9O24gu6UD9jP+ZmbtLRaSsei9SL4XDPbAEh/kGQ/pSUcc0lbApFWb67lQUhpVnLBsoKqqZclFMmUtrxPcwxl3X7vOCAtYLSCcugFQmqhdssH7HU+RznjiOlYXA8wqkOfkItTAom+oKygca4ES8jY+N3z7fSG4hfUtp3ihUHruVSsFy1iRvNP+1N7A5BdJACmVpAgZPhGOyCigEjlPLudn7kvFtOxuB4g6OjD8UWLRkCZFRwrLCEXJQQhp2K+37lQeBCRX1A7KPQto1prFEmSYn2mB9EAsO+kYfk8KQhZF8yjVz5gp/MztyOUjiW9bCUhEBhKRCCgSis45uQ/PhX/xfFWMgOnWu2gxB0TF/o0kEZ/kCDM1Ts+3RHYnwVUL6XhDFrAswfIB6w6P1MrTulY0sum1VICglKwCEACqvQFCUK3gHcsFQCM/ILayqP1k9JshVqrncMalOYYvgcGAyCvIwuod8YBJQmZpmGJeyRwkGw4n8jJOJQNw3idLFhMRNB0SgASTJyKoy/4ieXCeFfJBUeV2SoAclFyR0bbm1OHTUiN0/DTAwD7zQeM52dqj8VsGEkVE2jKetG7AEhQ0frJAv6RC0trC1skl+IWlNinGLbSaZg7Mc0xfA8MbgF1LQV1z08A2G8+oM7PVF9Ms2GUE0gQyp+Lwu2yagLgR9ZaYpkSypQ6a6Q2DCqzpkvietXIFdoZfuieGmcOD0DeP0HEbBhNwYPmA/L8zJQsATAKnguEqS+XTqkE4YfWWwCUFZTksYAYwZfIBeN9Tw0cjOwu8gDIZqsoSSvhEeQDiiGYFoyWiSDRypWgi69UP5sc5fIcquSCNeXqe2X9ZAHfM7Khe2pcOB+AT41+aO5iRD3QAHBEHd9ctuiBBoANEkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cvAFgg4GR9kADwJF2f3PxBoANBkbaAw0AR9r9zcUbADYYGGkPNAAcafc3F28A2GBgpD3QAHCk3d9cfOxqYJ2au9RdPtdp/khoEOlglDYT39V1PzQFXLsMXAlgt9PCxJKPbufyf8/KHIPfBPAZABf79Xc5XQ0ZQ1Q7360NbxoHrlsDvs5ZRsgo0une06by6X1mZvtP99PNAp4F4LsBXA5gjw8EGTeqaGF4QhzQF80CX7cAvGIdeDYAfhdZ2sTKUcVrpE7nd31N5gj8e2dIo2osk7NZpMdK0Z19tv+bJ4F9K8D1ACj8yfNSikHeg+5Z969m57Y/8/ZP+dPLKZhP/rcA+AYAF7g1oRUhEMUzFMt6eSJfX78b2DkPfM0i8GIAX+uWlAMppreUUErn8p2gzTl+2flg/sDbTkvIOik+CP20//mzwAXzwDcCuNTPJeFXpEpM6QEjIHm/zTF8D7T5gATYNQCe69aAloRTGulfBESBSYNyxR5g/Bhw7hKwZwl4vk9LnM5JmsBzUyDGAX3B8G23Mz/g9BuUa/0IiutfMkj7zwKmngAuXSvOpUvAWYBtF4BTnspIj/O8zPaf7qdvWITw6eZA0JLQEhKEGgxZhUj/dz3NzSKwbR44exnYvVKcy+mM5Km0JhxInUtrGkmzCPicg3W5LMGkQiZZTm9xS9Z3+4m2o8C5c4X15pTKW2Lb+fCx7WLtjYxzqiql29Icw/dA5SqYf6RTTilg+lYCIXmICKQ4IK9wxfSJY8AZK8CuFWDnanEua9ZTAMsaCog3Dt92O/MvnRGBtGwkqKRmMEkqCaa+2k+0LQDTh4rP88UHj74kF1WaATo9QHQ7mmP4HugYhtEKj4PB6ZQ+FS0hQahpldPya1kXTOqNY8DscgG+HavAttUCvBxInitrkgL4lcO33c7spBdM3kAuSnq2nx9gQfAh4JyVwvrxwel2z3p4aMlzH6DM2z/lT+8aB+Q/OT4EEqckWQSBkGD6EQKQnDCLwBSnYgcf32fXioGUFawC4esyu7CXXnDP9tOCsyD4KLB1rmgvX7zfbu2WG/Jtme0/3U/vKxBNAMoi0KcjkATCN3HOEr3UAjDrwOP71rXixYEkeKMFlSX8ocwR6KUXTJ7AaNE2tF8WfA4Ye7Kw1mwvX/yZn+eKnvcrfzC6IK/ObP/pfnpfAGQnySoISBqUXyAASS1AK0JfagWYcRDOrAF66TxZQU7jBOEbM0egH71gcgXSFZAV54NQtj9YcNIpbONCyh8Ygi8CVospApDuB63g92W2/3Q/vW8AsqM4gLIKBBIH8bcJwMCNMX68BTqBb8s6sGWtsIA6jwDk662ZI9CvXjA5A6NVa2t/IAicnC/aGV+8T74IQPm/AmGuBc+8/VP+9IEAyLslAKMV/LgAyIUInfnjwPQqMOOgI/DstQ5Mr7UAqMF8V2YXDqoXXNl+EQQ6N9v29aKdesUpWJZbAPyPme0/3U8fGIDssDid/pUASCvCaXgJmFguAEfgEXT27gDkuwaUg/nbmSMwjF7whvbLhSDL5TwwvdRqo9oqHzACkCB8U2b7T/fThwIgO01T1IMCoAZxGRhbKoAXQUcQTjkI+a4B5e5FzjGsXvCG9gdqrLGFYrpVG/UuHzBOw2/LaXxzbh43DKeoJwlAHqLndSs4udoCoIBHQE45EPk3DuitmYOQoxdctp8+rFwIWsGFYiFFoLGNchcEQC6e+OJC5J2Z7T/dTx/aApYdJ37AyJK/DIwvFxYvWr0IwEn/H1Opco5sveDUhSAAF4HJpQJkWixp6k2n4IYfMGf0amDHev2I8+l4/UbvNw8Eozw72wJePOJ8und7EkKj9ztKGA1/7WwATo44n45pWI3e7/AAGPWZ2QBkYHCU+XTMfGGQmYIxjd7vqOE0+PXzATjifDrKtTZ6v4MP/MlyRj4AR5xPF+VaqZLJF1UzKdPV6P2eLDDr3I58AI44n07ZMARbo/d78gMubWE+AEecT8e9YOn2Uheu0fs9tUCYD8AR59MpG6bR+z21gKfW1gNAz4geRT5dTEZo9H5PPRDmAzBmRM8BJzqfLiYjSKKr0fs9dYBYDwBHmE9XtRfMsIz04aQZ1+j9npygrA+Akqs8wfl0BCCTWRq935MTYL1aVQ8Ao1zlAnAi8+kEQGZTNXq/vYb75Pt/fQAcUT5dBGCj93vyAaxXi+oDoFLyT3A+3Rcavd9eY3xS/z8fgCQX/LPR3SOzkon55jg1eyAfgD8M4NcAPD6aDmBtB1e4NMDNcer1QD4AbwbwxwDe4UvRE9wHZG1gNSXDLlwLNcep1QP5APxzzwj9IIAPnXhT5ORc5EYCA9HNcWr1QD4AmRH6FQBMTSZZH98ZmD5Bh5g1FopiNns1x6nTA/kAvAfAEwDudnI+EvQxPfkEzYfaCXRSBluQMB7YHKdGD+QDsBNBH/9+AkAobqTADGK7Inw1x8nfA/kA7EXQt8kgrGAGMfBxZ5Cv5ji5eyAfgL0I+r68uR0QmUFoBQU8vfNvzXHy9kA9AORoMw7CdGQCjoUZDwL4kv/+8OZ1gJhBIjGDgMh3vTavBc035/RAPgD7JegjODfhiMwgoqeJwNPPTaB6Ezq/hq+sB4AcXeXEP+ZhGVo9vRimIQD5v5oPAZCupgDI9wg8/qz/1Xz55usyeyAfgMMQ9GU2Op4eAchpOIJQQEz/VuPlm6/K7IH6AMjgGzdl6QtyX5jWjpQFevF3lq3xf6yhrOlIAUgQCojR8gmE+l9Nl2++JrMH6gEgR5UA5KYsc+AZmCbQCDi+IvgEQMob1XBEAHIajgBMLV+0kCdws6aGu3zqfkV9AGTwjftg3JRVVRAtHQEXX/wbAcoXP5d5CID8GoJKvqDAloKOoIz/y7x8c3pmD4zhaqwjRzCYyQg5gr2ZgsFTLweWr8XQgsXjbwLWrnNtMlKgNoLBmZAa7PTCAuYIBlMvlWQswwr2UlUw45jdDSx8HbD+Ctd+HVCwePKbgJV9aASDM8Yg59TWFDysYPBtmYK91IbNOHaPA/M7gUXKXA4hWDz79cA8+W0aweCMURj+1HYfcBjBYO54MMY3tGDv8I3nmWSHOzYOLJ0LLPGXAQWLz3oB8MQUsEa16kYwOG8whjh74yJkUMFgbsNlCfYO0epwissVY34bsHw2sEIRkAEEi/dcU0SP5qhF1ggG5w3GEGdXr4L5134Fg4kAjuDQgr1DtDqcUmZETwArZwAru4BVqsv0KVh8/o3F4v0QXZBGMDhvMIY4u3MYhv95Zh+Cu1xBcxuOU/HfeDIq5cv7FuwdotXhlCBXjOXZAnyrO4BV6in0IVh8wStLuWCsUAyvEQzOG5ABz+4eB+R/ewnu/kOP/3G/l4kJTERlljQtIot2e53/IwO2OPl4FLtcnCqAp9cahT56CBZf+LpSLhhz1N5qBIPzBmTAs/sLRHcTDKbiNHdBGGymOC/3hglEvgjAnoK9A7Y4+XgiV4zVWYDAs/etxaubYPFFP1QkLtCIP8neaASD8wZkwLP7AyC/tJNg8L/xLNBu+YBdBXsHbHEFAINcMVamgdWZAoRrfPdXm8KitLdmgYveWAq+2y7iMqfuRjA4b1AGOLt/APJLqwSD3+y5T1yI0AoSbAxMMzGV1o8/My2ro2DvAK2t+GgiV4zj4+3AIwDXtwBrVJeuECze+9aW4Dut4PxkIhYsdetGMDhvoDqcPRgA+SWp4O4veQ5Uv/mAGwR78+6rQq4Yq9PAOi2fA4/vBkKudKVU7VZw77uKvWFuZbtcMNb5v0YwOG9g+jx7cADyi6Pg7gccgIxlcA5TKhaD01yYKBmVFpBZMfx/m2Bvny3t8LGqoqTliZbVI+gMgHwnMAnCIFi897cLAAZ6QyzFzzSCwXkD1OPs4QDIL5XgLmk5JHk/SD5gKdibd38VcsVYGmuBTaAzEHLHgyCcaokB7/1IkUET5IKxwF5pBIPzBqbPs4cHIC/AaeqvPL9pmHxAE+zts6VdLCD/lcgVY3UyWD0Bj1ZwqgCggXA7sPfWAoAJvaEtZBrB4Lyx6efsPADyCtmCvf00s/NnOsgVY3m8BTRZPZuGBUACdArY+5lWDqGmYbIrLHEx0ggG5w1OH2fnA7CPizQfaXqgUw80AGywMdIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0BxoAjrT7m4s3AGwwMNIeaAA40u5vLt4AsMHASHugAeBIu7+5eAPABgMj7YEGgCPt/ubiDQAbDIy0B8ZYNMbkX+ZekpuIiOQrPar+xs889HJg6jZg5jAwvVZ8B+ll9PlO5/Fc/o+ECjnHfi8zYfkvM5ulmp4qJXVqx5deD4zfAkw/CGxdAZgoHfuh131QkaI5hu8Bs4Ds8B0AWLnIRGCBsFfn87JffDMwdjOw5R5g8giwZa34jnQQUwDo99wBfJ4TM7COiNdlaj2rA/jeV/vfDeATAP4UGH8I2Lrc6gc+SHqY4oMZ74VSKM0xfA+UUzB/oBUUCKMl6zSQ/PsXqZD5KQC/A0w/DEwcAcYXgYnVwppwADuBkefnCim90FmBWXwnK87Uen53BI8sbuwqaz9p5UgnQhBS+ZN1zE8Ak0utviCwq8DI8/nx5hi+Bzb4gJzKZE1SEFZZgS9/2pWR/gTAJ4HJQ8DEMWB8ARhfBsaWCwDquwQKvvNgHXvOcYVbPFJPkw+dDxC/W1Y4tWDpw/Rlgo4lo1T4/KxTihDNpJwj3/UiMLXemprjffC7eWpzDN8DlYsQDiKtVxzEqoHkyX9HRizW+nIgaQnvAiaeBCbmC0s4tgSMu2rMePAR9X252jXklaTFU108K0MHav/nvJ6ZxVVk9OI7GR2IZoGQNc/HgbHgIwqILIVujuF7oOMqWFawCoRxkfEIB5CWgkREBCNf9wMTc8A4QciBWyoGz16rwNgaML5eWKpctYZL3N+TWLX0gvtuP0HHk2n16JDyxXmVhfU0qywbJbr5GSuXKxA/sV5Y9UYWdnjwyS3qKKgarWA69Wg6fjQOIK0HadnIjPVFB+AiME4AuiUkCFnESyCSkmAuU7Cjm15wX+2X2ifBRn9A8mKcW2UFjULVQcgVDl80u40SYh763FfvquhLCxitoBYUsoJfjXKttByMq9CKcHn4sPuCbgXNJwyWkECcz5Q376UX3LNncZyQAAADEklEQVT9fFgIJs6lBBwtn3Tt6FpIz4RWnuQxPh2XIGzm4CwQ9hWIFgBTK0gQHiIAJddKq0ELQh+KL1qUR4MvSEsoENIKrgALHNiMox+94K7tl9qnnMio8MSf6SNwGpYVjCDk/Ju7isq496fCqX0BkDeqlWwKwic1gAQSpzGREnFgREz01eALLvvq2Kfi45m6cf3qBXdsfxRbJMho8dimqOhEK8cXQRr9QVpvPoDNMXQP9A3ACELFxPh+jACkP0fLIKFCCRRqKuPUdqjlC9o07JZwKVNHeBC94DQcZO0XAAkmgotAk9QYrR9f/BvByYfMSATDVMzwTXMM3QMDAVAgVHCZ7/MaQK4QZUHiNCbBQlqUw74YCb7gcmYkelC9YFlwvVv7RRAorTuBkECU9asCID9/x9B935zYzyKkqpfiNHxcA0gLQgvBAaPVkCqm3h2AtC5m/RyEqzw/4xhGL3hD++MmslgqCbgUfLKAcRrmTlBzDN0DA1tAXUlWcDm1IOIIJAjlT/Fd05lbFQFwjdtgGcewesFt7Rc/Gx8iWjUCjGCT1YvWT1MwgUqrf3NG45tTbcu0aximWx9xENcEQHGbcYAEwtSXSqY0gnCdgeuMI0cvuGx/FUGgFhwEYrR80QckWN+X0fjm1DwAWv8RgJFilJZBznz0pQg+AZAAlVWh1GvGka0XzB0cCQi30aSGVa9AF62fLOB7MhrfnJoPwPER59Px+o3e76mL5Kwp2G57xPl0kxc3er+nLvyKtLmhfUC78RHn081ONnq/pzcAR5xPR9mRRu/31IVgvgUccT4dNaobvd/TGYAjzqejumqj93s6A3DE+XRUg2VSCjdaGr3fUw+I+VPwiPPpqJjO8J1Nw43e7ymHwHoAKMFd7QErAeEE5NNJMb3R+z3lsGcNzgfgiPPpomJ6o/d76oGwPgCOKJ8uKqY3er+nKwBHmE+noqRG7/fUA199U/AI8+kEwEbv93QHoEhZTnA+nYqSGr3fBoAtaiqBUImdm5hPJwA2er+nKwBHnE+X1gUzSbnR+z11wPj/AeCpPDD3t7rvAAAAAElFTkSuQmCC",zW="uniform sampler2D weightMap;varying vec2 vOffset0;varying vec2 vOffset1;void movec(const in bvec2 c,inout vec2 variable,const in vec2 value){if(c.x){variable.x=value.x;}if(c.y){variable.y=value.y;}}void movec(const in bvec4 c,inout vec4 variable,const in vec4 value){movec(c.xy,variable.xy,value.xy);movec(c.zw,variable.zw,value.zw);}void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 a;a.x=texture2D(weightMap,vOffset0).a;a.y=texture2D(weightMap,vOffset1).g;a.wz=texture2D(weightMap,uv).rb;vec4 color=inputColor;if(dot(a,vec4(1.0))>=1e-5){bool h=max(a.x,a.z)>max(a.y,a.w);vec4 blendingOffset=vec4(0.0,a.y,0.0,a.w);vec2 blendingWeight=a.yw;movec(bvec4(h),blendingOffset,vec4(a.x,0.0,a.z,0.0));movec(bvec2(h),blendingWeight,a.xz);blendingWeight/=dot(blendingWeight,vec2(1.0));vec4 blendingCoord=blendingOffset*vec4(texelSize,-texelSize)+uv.xyxy;color=blendingWeight.x*texture2D(inputBuffer,blendingCoord.xy);color+=blendingWeight.y*texture2D(inputBuffer,blendingCoord.zw);}outputColor=color;}",NW="varying vec2 vOffset0;varying vec2 vOffset1;void mainSupport(const in vec2 uv){vOffset0=uv+texelSize*vec2(1.0,0.0);vOffset1=uv+texelSize*vec2(0.0,1.0);}",FW=0,UW=1,VW=2,HW=3,jW=function(X){_inherits(OA,X);var $=_createSuper(OA);function OA(){var X,ee,ne,ae=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},de=ae.preset,fe=void 0===de?UW:de,Ue=ae.edgeDetectionMode,je=void 0===Ue?CG:Ue,Ke=ae.predicationMode,et=void 0===Ke?AG:Ke;_classCallCheck(this,OA),X=$.call(this,"SMAAEffect",zW,{vertexShader:NW,blendFunction:$G,attributes:oW|aW,uniforms:new Map([["weightMap",new g_(null)]])}),arguments.length>1&&(ee=arguments[0],ne=arguments[1],arguments.length>2&&(fe=arguments[2]),arguments.length>3&&(je=arguments[3])),X.renderTargetEdges=new ro(1,1,{minFilter:_n,stencilBuffer:!1,depthBuffer:!1}),X.renderTargetEdges.texture.name="SMAA.Edges",X.renderTargetWeights=X.renderTargetEdges.clone(),X.renderTargetWeights.texture.name="SMAA.Weights",X.uniforms.get("weightMap").value=X.renderTargetWeights.texture,X.clearPass=new qG(!0,!1,!1),X.clearPass.overrideClearColor=new Ma(0),X.clearPass.overrideClearAlpha=1,X.edgeDetectionPass=new fW(new EG),X.edgeDetectionMaterial.edgeDetectionMode=je,X.edgeDetectionMaterial.predicationMode=et,X.weightsPass=new fW(new FG);var tt=new Kb;return tt.onLoad=function(){var $=new eo(ee);$.name="SMAA.Search",$.magFilter=gn,$.minFilter=gn,$.generateMipmaps=!1,$.needsUpdate=!0,$.flipY=!0,X.weightsMaterial.searchTexture=$;var ae=new eo(ne);ae.name="SMAA.Area",ae.magFilter=_n,ae.minFilter=_n,ae.generateMipmaps=!1,ae.needsUpdate=!0,ae.flipY=!1,X.weightsMaterial.areaTexture=ae,X.dispatchEvent({type:"load"})},tt.itemStart("search"),tt.itemStart("area"),void 0!==ee&&void 0!==ne?(tt.itemEnd("search"),tt.itemEnd("area")):typeof Image<"u"&&(ee=new Image,ne=new Image,ee.addEventListener("load",(function(){return tt.itemEnd("search")})),ne.addEventListener("load",(function(){return tt.itemEnd("area")})),ee.src=BW,ne.src=IW),X.applyPreset(fe),X}return _createClass(OA,[{key:"edgesTexture",get:function get(){return this.renderTargetEdges.texture}},{key:"getEdgesTexture",value:function getEdgesTexture(){return this.edgesTexture}},{key:"weightsTexture",get:function get(){return this.renderTargetWeights.texture}},{key:"getWeightsTexture",value:function getWeightsTexture(){return this.weightsTexture}},{key:"edgeDetectionMaterial",get:function get(){return this.edgeDetectionPass.fullscreenMaterial}},{key:"colorEdgesMaterial",get:function get(){return this.edgeDetectionMaterial}},{key:"getEdgeDetectionMaterial",value:function getEdgeDetectionMaterial(){return this.edgeDetectionMaterial}},{key:"weightsMaterial",get:function get(){return this.weightsPass.fullscreenMaterial}},{key:"getWeightsMaterial",value:function getWeightsMaterial(){return this.weightsMaterial}},{key:"setEdgeDetectionThreshold",value:function setEdgeDetectionThreshold(X){this.edgeDetectionMaterial.edgeDetectionThreshold=X}},{key:"setOrthogonalSearchSteps",value:function setOrthogonalSearchSteps(X){this.weightsMaterial.orthogonalSearchSteps=X}},{key:"applyPreset",value:function applyPreset(X){var $=this.edgeDetectionMaterial,ee=this.weightsMaterial;switch(X){case FW:$.edgeDetectionThreshold=.15,ee.orthogonalSearchSteps=4,ee.diagonalDetection=!1,ee.cornerDetection=!1;break;case UW:$.edgeDetectionThreshold=.1,ee.orthogonalSearchSteps=8,ee.diagonalDetection=!1,ee.cornerDetection=!1;break;case VW:$.edgeDetectionThreshold=.1,ee.orthogonalSearchSteps=16,ee.diagonalSearchSteps=8,ee.cornerRounding=25,ee.diagonalDetection=!0,ee.cornerDetection=!0;break;case HW:$.edgeDetectionThreshold=.05,ee.orthogonalSearchSteps=32,ee.diagonalSearchSteps=16,ee.cornerRounding=25,ee.diagonalDetection=!0,ee.cornerDetection=!0}}},{key:"setDepthTexture",value:function setDepthTexture(X){var $=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Kr;this.edgeDetectionMaterial.depthBuffer=X,this.edgeDetectionMaterial.depthPacking=$}},{key:"update",value:function update(X,$,ee){this.clearPass.render(X,this.renderTargetEdges),this.edgeDetectionPass.render(X,$,this.renderTargetEdges),this.weightsPass.render(X,this.renderTargetEdges,this.renderTargetWeights)}},{key:"setSize",value:function setSize(X,$){this.edgeDetectionMaterial.setSize(X,$),this.weightsMaterial.setSize(X,$),this.renderTargetEdges.setSize(X,$),this.renderTargetWeights.setSize(X,$)}},{key:"dispose",value:function dispose(){var X=this.weightsMaterial,$=X.searchTexture,ee=X.areaTexture;null!==$&&null!==ee&&($.dispose(),ee.dispose()),_get(_getPrototypeOf(OA.prototype),"dispose",this).call(this)}}],[{key:"searchImageDataURL",get:function get(){return BW}},{key:"areaImageDataURL",get:function get(){return IW}}]),OA}(sW),GW="uniform float offset;uniform float darkness;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){const vec2 center=vec2(0.5);vec3 color=inputColor.rgb;\n#if VIGNETTE_TECHNIQUE == 0\nfloat d=distance(uv,center);color*=smoothstep(0.8,offset*0.799,d*(darkness+offset));\n#else\nvec2 coord=(uv-center)*vec2(offset);color=mix(color,vec3(1.0-darkness),dot(coord,coord));\n#endif\noutputColor=vec4(color,inputColor.a);}",WW=0,qW=1,YW=function(X){_inherits(FA,X);var $=_createSuper(FA);function FA(){var X=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},ee=X.blendFunction,ne=void 0===ee?$G:ee,ae=X.technique,de=void 0===ae?WW:ae,fe=(X.eskil,X.offset),Ue=void 0===fe?.5:fe,je=X.darkness,Ke=void 0===je?.5:je;return _classCallCheck(this,FA),$.call(this,"VignetteEffect",GW,{blendFunction:ne,defines:new Map([["VIGNETTE_TECHNIQUE",de.toFixed(0)]]),uniforms:new Map([["offset",new g_(Ue)],["darkness",new g_(Ke)]])})}return _createClass(FA,[{key:"technique",get:function get(){return Number(this.defines.get("VIGNETTE_TECHNIQUE"))},set:function set(X){this.technique!==X&&(this.defines.set("VIGNETTE_TECHNIQUE",X.toFixed(0)),this.setChanged())}},{key:"eskil",get:function get(){return this.technique===qW},set:function set(X){this.technique=X?qW:WW}},{key:"getTechnique",value:function getTechnique(){return this.technique}},{key:"setTechnique",value:function setTechnique(X){this.technique=X}},{key:"offset",get:function get(){return this.uniforms.get("offset").value},set:function set(X){this.uniforms.get("offset").value=X}},{key:"getOffset",value:function getOffset(){return this.offset}},{key:"setOffset",value:function setOffset(X){this.offset=X}},{key:"darkness",get:function get(){return this.uniforms.get("darkness").value},set:function set(X){this.uniforms.get("darkness").value=X}},{key:"getDarkness",value:function getDarkness(){return this.darkness}},{key:"setDarkness",value:function setDarkness(X){this.darkness=X}}]),FA}(sW);new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1]),new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1]),new Float32Array(2),new Float32Array(2),new Float32Array([0,-.25,.25,-.125,.125,-.375,.375]),new Float32Array([0,0]),new Float32Array([.25,-.25]),new Float32Array([-.25,.25]),new Float32Array([.125,-.125]),new Float32Array([-.125,.125]),new Uint8Array([0,0]),new Uint8Array([3,0]),new Uint8Array([0,3]),new Uint8Array([3,3]),new Uint8Array([1,0]),new Uint8Array([4,0]),new Uint8Array([1,3]),new Uint8Array([4,3]),new Uint8Array([0,1]),new Uint8Array([3,1]),new Uint8Array([0,4]),new Uint8Array([3,4]),new Uint8Array([1,1]),new Uint8Array([4,1]),new Uint8Array([1,4]),new Uint8Array([4,4]),new Uint8Array([0,0]),new Uint8Array([1,0]),new Uint8Array([0,2]),new Uint8Array([1,2]),new Uint8Array([2,0]),new Uint8Array([3,0]),new Uint8Array([2,2]),new Uint8Array([3,2]),new Uint8Array([0,1]),new Uint8Array([1,1]),new Uint8Array([0,3]),new Uint8Array([1,3]),new Uint8Array([2,1]),new Uint8Array([3,1]),new Uint8Array([2,3]),new Uint8Array([3,3]),new Map([[$r(0,0,0,0),new Float32Array([0,0,0,0])],[$r(0,0,0,1),new Float32Array([0,0,0,1])],[$r(0,0,1,0),new Float32Array([0,0,1,0])],[$r(0,0,1,1),new Float32Array([0,0,1,1])],[$r(0,1,0,0),new Float32Array([0,1,0,0])],[$r(0,1,0,1),new Float32Array([0,1,0,1])],[$r(0,1,1,0),new Float32Array([0,1,1,0])],[$r(0,1,1,1),new Float32Array([0,1,1,1])],[$r(1,0,0,0),new Float32Array([1,0,0,0])],[$r(1,0,0,1),new Float32Array([1,0,0,1])],[$r(1,0,1,0),new Float32Array([1,0,1,0])],[$r(1,0,1,1),new Float32Array([1,0,1,1])],[$r(1,1,0,0),new Float32Array([1,1,0,0])],[$r(1,1,0,1),new Float32Array([1,1,0,1])],[$r(1,1,1,0),new Float32Array([1,1,1,0])],[$r(1,1,1,1),new Float32Array([1,1,1,1])]]);function Hv(X,$,ee){return X+($-X)*ee}function $r(X,$,ee,ne){var ae=Hv(X,$,.75),de=Hv(ee,ne,.75);return Hv(ae,de,.875)}var JW=function(){function gr(X,$){_classCallCheck(this,gr),this.enabled=!1,this.effect=new X($),Object.defineProperty(this,"opacity",{enumerable:!0,set:function set(X){this.effect.blendMode.opacity.value=X},get:function get(){return this.effect.blendMode.opacity.value}}),Object.defineProperty(this,"blendFunction",{enumerable:!0,set:function set(X){this.effect.blendMode.setBlendFunction(Number(X))},get:function get(){return this.effect.blendMode.blendFunction}}),this.blendFunction=$G}return _createClass(gr,[{key:"toJSON",value:function toJSON(){var X,$=Ct({},this),ee=Object.getPrototypeOf(this),ne=Object.getOwnPropertyNames(ee),ae=(0,je.Z)(ne);try{for(ae.s();!(X=ae.n()).done;){var de=X.value,fe=Object.getOwnPropertyDescriptor(ee,de);fe&&"function"==typeof fe.get&&($[de]=this[de])}}catch(Ue){ae.e(Ue)}finally{ae.f()}return["constructor","effect","subscriptions"].forEach((function(X){return delete $[X]})),$}}]),gr}(),ZW=function(X){_inherits(ac,X);var $=_createSuper(ac);function ac(){var X;return _classCallCheck(this,ac),(X=$.call(this,bW)).blendFunction=tW,X}return _createClass(ac,[{key:"intensity",get:function get(){return this.effect.intensity},set:function set(X){this.effect.intensity=X}},{key:"luminanceThreshold",get:function get(){return this.effect.luminanceMaterial.threshold},set:function set(X){this.effect.luminanceMaterial.threshold=X}},{key:"luminanceSmoothing",get:function get(){return this.effect.luminanceMaterial.smoothing},set:function set(X){this.effect.luminanceMaterial.smoothing=X}},{key:"blurScale",get:function get(){return this.effect.blurPass.scale},set:function set(X){this.effect.blurPass.scale=X}},{key:"kernelSize",get:function get(){return this.effect.blurPass.kernelSize},set:function set(X){this.effect.blurPass.kernelSize=X}}]),ac}(JW),XW=function(X){_inherits(lc,X);var $=_createSuper(lc);function lc(){return _classCallCheck(this,lc),$.call(this,_W)}return _createClass(lc,[{key:"contrast",get:function get(){return this.effect.uniforms.get("contrast").value},set:function set(X){this.effect.uniforms.get("contrast").value=X}},{key:"brightness",get:function get(){return this.effect.uniforms.get("brightness").value},set:function set(X){this.effect.uniforms.get("brightness").value=X}}]),lc}(JW),QW=function(X){_inherits(cc,X);var $=_createSuper(cc);function cc(){var X;return _classCallCheck(this,cc),(X=$.call(this,AW)).effect.offset=new va(.01,.01),X}return _createClass(cc,[{key:"offset",get:function get(){return[1e3*this.effect.offset.x,1e3*this.effect.offset.y]},set:function set(X){this.effect.offset.set(X[0]/1e3,X[1]/1e3)}}]),cc}(JW),KW=function(X){_inherits(hc,X);var $=_createSuper(hc);function hc(){return _classCallCheck(this,hc),$.call(this,SW)}return _createClass(hc)}(JW),$W=function(X){_inherits(uc,X);var $=_createSuper(uc);function uc(){var X;return _classCallCheck(this,uc),(X=$.call(this,PW))._hue=0,X}return _createClass(uc,[{key:"hue",get:function get(){return this._hue},set:function set(X){this._hue=X,this.effect.setHue(X)}},{key:"saturation",get:function get(){return this.effect.uniforms.get("saturation").value},set:function set(X){this.effect.uniforms.get("saturation").value=X}}]),uc}(JW),tq=function(X){_inherits(fc,X);var $=_createSuper(fc);function fc(){var X;return _classCallCheck(this,fc),(X=$.call(this,LW)).blendFunction=eW,X}return _createClass(fc)}(JW),nq=function(X){_inherits(dc,X);var $=_createSuper(dc);function dc(){return _classCallCheck(this,dc),$.call(this,YW)}return _createClass(dc,[{key:"eskil",get:function get(){return this.effect.eskil},set:function set(X){this.effect.eskil=X}},{key:"darkness",get:function get(){return this.effect.uniforms.get("darkness").value},set:function set(X){this.effect.uniforms.get("darkness").value=X}},{key:"offset",get:function get(){return this.effect.uniforms.get("offset").value},set:function set(X){this.effect.uniforms.get("offset").value=X}}]),dc}(JW),rq=function(X){_inherits(pc,X);var $=_createSuper(pc);function pc(X){return _classCallCheck(this,pc),$.call(this,EW,X)}return _createClass(pc,[{key:"focalLength",get:function get(){return this.effect.circleOfConfusionMaterial.uniforms.focalLength.value},set:function set(X){this.effect.circleOfConfusionMaterial.uniforms.focalLength.value=X}},{key:"focusDistance",get:function get(){return this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value},set:function set(X){this.effect.circleOfConfusionMaterial.uniforms.focusDistance.value=X}},{key:"bokehScale",get:function get(){return this.effect.bokehScale},set:function set(X){this.effect.bokehScale=X}}]),pc}(JW),iq=function(X){_inherits(mc,X);var $=_createSuper(mc);function mc(){return _classCallCheck(this,mc),$.call(this,RW)}return _createClass(mc,[{key:"granularity",get:function get(){return this.effect.getGranularity()},set:function set(X){this.effect.setGranularity(X)}}]),mc}(JW);function UA(X,$){return $&&$.enabled&&X.push($.effect),X}var aq,oq=function(X){_inherits(xu,X);var $=_createSuper(xu);function xu(){var X;return _classCallCheck(this,xu),(X=$.call(this))._scene=new nv,X._camera=new VH,X.effects=new Map,X.loadingManager=new Kb,X.renderPass=new QG,X._renderToScreen=!0,X._hasSmaa=!1,X.clock=new Xx,X.enabled=!1,X.debug=!1,X.effects.set("bloom",new ZW),X.effects.set("chromaticAberration",new QW),X.effects.set("vignette",new nq),X.effects.set("noise",new tq),X.effects.set("colorAverage",new KW),X.effects.set("hueSaturation",new $W),X.effects.set("brightnessContrast",new XW),X.effects.set("depthOfField",new rq),X.effects.set("pixelation",new iq),X}return _createClass(xu,[{key:"scene",get:function get(){return this._scene},set:function set(X){this._scene=X}},{key:"camera",get:function get(){return this._camera},set:function set(X){this._camera=X}},{key:"_initSmaa",value:function _initSmaa(){var X=this;if(this.effectComposer){var $=this.effectComposer.passes.length,ee=new jW({preset:HW,edgeDetectionMode:CG});ee.addEventListener("load",(function n(){ee.removeEventListener("load",n),X.dispatchEvent({type:"smaaloaded"})})),ee.edgeDetectionMaterial.setPredicationMode(MG),ee.edgeDetectionMaterial.setEdgeDetectionThreshold(.05),ee.edgeDetectionMaterial.setPredicationThreshold(.002),ee.edgeDetectionMaterial.setPredicationScale(1),this.effectComposer.addPass(new lW(this.camera,ee),$),this._hasSmaa=!0}}},{key:"_initPasses",value:function _initPasses(){if(this.effectComposer&&this.renderer){var X;if(this.effectComposer.removeAllPasses(),this._hasSmaa=!1,this.renderPass=new QG(this.scene,this.camera),this.enabled){this.effectComposer.addPass(this.renderPass),this._initSmaa();var $=[this.effects.get("chromaticAberration"),this.effects.get("bloom"),this.effects.get("colorAverage"),this.effects.get("hueSaturation"),this.effects.get("brightnessContrast"),this.effects.get("vignette"),this.effects.get("noise")].reduce(UA,[]),ee=[this.effects.get("pixelation")].reduce(UA,[]);ee.length>0&&this.effectComposer.addPass(_construct(lW,[this.camera].concat((0,ae.Z)(ee)))),this.effectComposer.addPass(_construct(lW,[this.camera].concat((0,ae.Z)($))))}else this.effectComposer.addPass(this.renderPass),(SD||xD)&&this._initSmaa();X}}},{key:"reinit",value:function reinit(){if(!this.renderer)return Promise.all([]);this.effectComposer=new mW(this.renderer),this._initPasses()}},{key:"init",value:function init(X){var $=X.renderer,ee=X.camera,ne=X.scene;this.renderer=$,this.scene=ne,this.camera=ee,this._initCopyPass(),this.reinit()}},{key:"_initCopyPass",value:function _initCopyPass(){if(!this._savePass){var X=new va;this.renderer.getDrawingBufferSize(X),this._rt=new ro(X.x,X.y,{depthBuffer:!1,stencilBuffer:!1,wrapS:hn,wrapT:hn}),this._rt.samples=this.renderer.capabilities.isWebGL2?4:0,this._savePass=new jG(this._rt,!1),this._savePass.renderToScreen=!1}}},{key:"renderToScreen",get:function get(){return this._renderToScreen},set:function set(X){var $,ee,ne=this.effectComposer;!ne||(!0===X?(null!=($=this.renderer)&&$.capabilities.isWebGL2&&(ne.multisampling=0),ne.removePass(this._savePass),ne.passes[ne.passes.length-1].renderToScreen=!0,ne.autoRenderToScreen=!0):((null==(ee=this.renderer)?void 0:ee.capabilities.isWebGL2)&&!this._hasSmaa&&(ne.multisampling=4),ne.autoRenderToScreen=!1,ne.passes[ne.passes.length-1].renderToScreen=!1,this._savePass.renderToScreen=!1,this.enabled||(this._savePass.needsDepthTexture=!0),ne.addPass(this._savePass)),this._renderToScreen=X)}},{key:"texture",get:function get(){return this._rt&&this._rt.texture}},{key:"renderTarget",get:function get(){return this._rt}},{key:"fromJSON",value:function fromJSON(X){var $=this;X&&(Object.keys(X).forEach((function(ee){var ne=X[ee],ae=$.effects.get(ee);Object.keys(ne).forEach((function(X){ae[X]=ne[X]}))})),this.enabled=X.enabled)}},{key:"toJSON",value:function toJSON(){var X={};return this.effects.forEach((function($,ee){X[ee]=$.toJSON()}),X),Ct({enabled:this.enabled},X)}},{key:"render",value:function render(){var X;null==(X=this.effectComposer)||X.render(this.clock.getDelta())}},{key:"setScissor",value:function setScissor(X,$,ee,ne){if(this.effectComposer&&this.renderer){X instanceof to?(this.effectComposer.inputBuffer.scissor.set(X.x,X.y,X.z,X.w),this.effectComposer.outputBuffer.scissor.set(X.x,X.y,X.z,X.w)):(this.effectComposer.inputBuffer.scissor.set(X,$,ee,ne),this.effectComposer.outputBuffer.scissor.set(X,$,ee,ne));var ae=this.renderer.getPixelRatio();this.effectComposer.inputBuffer.scissor.multiplyScalar(ae),this.effectComposer.outputBuffer.scissor.multiplyScalar(ae),this.renderer.setScissor(X,$,ee,ne)}}},{key:"setScissorTest",value:function setScissorTest(X){!this.effectComposer||!this.renderer||(this.effectComposer.inputBuffer.scissorTest=X,this.effectComposer.outputBuffer.scissorTest=X,this.renderer.setScissorTest(X))}},{key:"setViewport",value:function setViewport(X,$,ee,ne){!this.effectComposer||(X instanceof to?(this.effectComposer.inputBuffer.viewport.copy(X),this.effectComposer.outputBuffer.viewport.copy(X)):(this.effectComposer.inputBuffer.viewport.set(X,$,ee,ne),this.effectComposer.outputBuffer.viewport.set(X,$,ee,ne)))}},{key:"resize",value:function resize(X,$,ee){var ne,ae;if(null==(ne=this.effectComposer)||ne.setSize(X,$,ee),this._rt){var de=(null==(ae=this.renderer)?void 0:ae.getPixelRatio())||window.devicePixelRatio;this._rt.setSize(X*de,$*de)}}},{key:"dispose",value:function dispose(){var X;this._listeners=void 0,null==(X=this.effectComposer)||X.dispose()}}]),xu}(aa),sq=function(X){_inherits(Zp,X);var $=_createSuper(Zp);function Zp(X,ee){var ne;return _classCallCheck(this,Zp),(ne=$.call(this,X,ee)).postprocessing=new oq,ne.initPostprocessing(X.postprocessing),ne}return _createClass(Zp,[{key:"resetAfterClear",value:function resetAfterClear(X,$){_get(_getPrototypeOf(Zp.prototype),"resetAfterClear",this).call(this,X,$),this.initPostprocessing(X.postprocessing)}},{key:"initPostprocessing",value:function initPostprocessing(X){for(var $=X,ee=$.enabled,ne=Et($,["enabled"]),ae=0,de=Object.entries(ne);ae<de.length;ae++){var Ue=de[ae],je=Ue[1],Ke=this.postprocessing.effects.get(Ue[0]);if(Ke){Ke.enabled=je.enabled;for(var et=0,tt=Object.entries(je);et<tt.length;et++){var nt=(0,fe.Z)(tt[et],2),it=nt[0],ct=nt[1];Ke[it]=ct}}}this.postprocessing.enabled=ee,this.postprocessing.reinit()}},{key:"dispose",value:function dispose(){_get(_getPrototypeOf(Zp.prototype),"dispose",this).call(this),this.postprocessing.dispose()}},{key:"switchActiveCamera",value:function switchActiveCamera(X){_get(_getPrototypeOf(Zp.prototype),"switchActiveCamera",this).call(this,X),this.postprocessing&&(this.postprocessing.camera=X)}}]),Zp}(dG),lq=new WeakMap,uq=function(X){_inherits($p,X);var $=_createSuper($p);function $p(X){var ee;return _classCallCheck(this,$p),(ee=$.call(this,X)).decoderPath="",ee.decoderConfig={},ee.decoderBinary=null,ee.decoderPending=null,ee.workerLimit=4,ee.workerPool=[],ee.workerNextTaskID=1,ee.workerSourceURL="",ee.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},ee.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"},ee}return _createClass($p,[{key:"setDecoderPath",value:function setDecoderPath(X){return this.decoderPath=X,this}},{key:"setDecoderConfig",value:function setDecoderConfig(X){return this.decoderConfig=X,this}},{key:"setWorkerLimit",value:function setWorkerLimit(X){return this.workerLimit=X,this}},{key:"load",value:function load(X,$,ee,ne){var ae=this,de=new hx(this.manager);de.setPath(this.path),de.setResponseType("arraybuffer"),de.setRequestHeader(this.requestHeader),de.setWithCredentials(this.withCredentials),de.load(X,(function(X){var ee={attributeIDs:ae.defaultAttributeIDs,attributeTypes:ae.defaultAttributeTypes,useUniqueIDs:!1};ae.decodeGeometry(X,ee).then($).catch(ne)}),ee,ne)}},{key:"decodeDracoFile",value:function decodeDracoFile(X,$,ee,ne){var ae={attributeIDs:ee||this.defaultAttributeIDs,attributeTypes:ne||this.defaultAttributeTypes,useUniqueIDs:!!ee};this.decodeGeometry(X,ae).then($)}},{key:"decodeGeometry",value:function decodeGeometry(X,$){var ee=this;for(var ne in $.attributeTypes){var ae=$.attributeTypes[ne];void 0!==ae.BYTES_PER_ELEMENT&&($.attributeTypes[ne]=ae.name)}var de=JSON.stringify($);if(lq.has(X)){var fe=lq.get(X);if(fe.key===de)return fe.promise;if(0===X.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var Ue,je=this.workerNextTaskID++,Ke=X.byteLength,et=this._getWorker(je,Ke).then((function(ee){return Ue=ee,new Promise((function(ee,ne){Ue._callbacks[je]={resolve:ee,reject:ne},Ue.postMessage({type:"decode",id:je,taskConfig:$,buffer:X},[X])}))})).then((function(X){return ee._createGeometry(X.geometry)}));return et.catch((function(){return!0})).then((function(){Ue&&je&&ee._releaseTask(Ue,je)})),lq.set(X,{key:de,promise:et}),et}},{key:"_createGeometry",value:function _createGeometry(X){var $=new Wu;X.index&&$.setIndex(new Lu(X.index.array,1));for(var ee=0;ee<X.attributes.length;ee++){var ne=X.attributes[ee],ae=ne.name,de=ne.array,fe=ne.itemSize;$.setAttribute(ae,new Lu(de,fe))}return $}},{key:"_loadLibrary",value:function _loadLibrary(X,$){var ee=new hx(this.manager);return ee.setPath(this.decoderPath),ee.setResponseType($),ee.setWithCredentials(this.withCredentials),new Promise((function($,ne){ee.load(X,$,void 0,ne)}))}},{key:"preload",value:function preload(){return this._initDecoder(),this}},{key:"_initDecoder",value:function _initDecoder(){var X=this;if(this.decoderPending)return this.decoderPending;var $="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,ee=[];return $?ee.push(this._loadLibrary("draco_decoder.js","text")):(ee.push(this._loadLibrary("draco_wasm_wrapper.js","text")),ee.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(ee).then((function(ee){var ne=ee[0];$||(X.decoderConfig.wasmBinary=ee[1]);var ae=fz.toString(),de=["/* draco decoder */",ne,"","/* worker */",ae.substring(ae.indexOf("{")+1,ae.lastIndexOf("}"))].join("\n");X.workerSourceURL=URL.createObjectURL(new Blob([de]))})),this.decoderPending}},{key:"_getWorker",value:function _getWorker(X,$){var ee=this;return this._initDecoder().then((function(){if(ee.workerPool.length<ee.workerLimit){var ne=new Worker(ee.workerSourceURL);ne._callbacks={},ne._taskCosts={},ne._taskLoad=0,ne.postMessage({type:"init",decoderConfig:ee.decoderConfig}),ne.onmessage=function(X){var $=X.data;switch($.type){case"decode":ne._callbacks[$.id].resolve($);break;case"error":ne._callbacks[$.id].reject($);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+$.type+'"')}},ee.workerPool.push(ne)}else ee.workerPool.sort((function(X,$){return X._taskLoad>$._taskLoad?-1:1}));var ae=ee.workerPool[ee.workerPool.length-1];return ae._taskCosts[X]=$,ae._taskLoad+=$,ae}))}},{key:"_releaseTask",value:function _releaseTask(X,$){X._taskLoad-=X._taskCosts[$],delete X._callbacks[$],delete X._taskCosts[$]}},{key:"debug",value:function debug(){console.log("Task load: ",this.workerPool.map((function(X){return X._taskLoad})))}},{key:"dispose",value:function dispose(){for(var X=0;X<this.workerPool.length;++X)this.workerPool[X].terminate();return this.workerPool.length=0,this}}]),$p}(tx);function fz(){var X,$;function n(X,$,ee,ne,ae,de){var fe=de.num_components(),Ue=ee.num_points()*fe,je=Ue*ae.BYTES_PER_ELEMENT,Ke=function s(X,$){switch($){case Float32Array:return X.DT_FLOAT32;case Int8Array:return X.DT_INT8;case Int16Array:return X.DT_INT16;case Int32Array:return X.DT_INT32;case Uint8Array:return X.DT_UINT8;case Uint16Array:return X.DT_UINT16;case Uint32Array:return X.DT_UINT32}}(X,ae),et=X._malloc(je);$.GetAttributeDataArrayForAllPoints(ee,de,Ke,je,et);var tt=new ae(X.HEAPF32.buffer,et,Ue).slice();return X._free(et),{name:ne,array:tt,itemSize:fe}}onmessage=function onmessage(ee){var ne=ee.data;switch(ne.type){case"init":X=ne.decoderConfig,$=new Promise((function($){X.onModuleLoaded=function(X){$({draco:X})},DracoDecoderModule(X)}));break;case"decode":var ae=ne.buffer,de=ne.taskConfig;$.then((function(X){var $=X.draco,ee=new $.Decoder,fe=new $.DecoderBuffer;fe.Init(new Int8Array(ae),ae.byteLength);try{var Ue=function t(X,$,ee,ne){var ae,de,fe=ne.attributeIDs,Ue=ne.attributeTypes,je=$.GetEncodedGeometryType(ee);if(je===X.TRIANGULAR_MESH)ae=new X.Mesh,de=$.DecodeBufferToMesh(ee,ae);else{if(je!==X.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");ae=new X.PointCloud,de=$.DecodeBufferToPointCloud(ee,ae)}if(!de.ok()||0===ae.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+de.error_msg());var Ke={index:null,attributes:[]};for(var et in fe){var tt=self[Ue[et]],nt=void 0,it=void 0;if(ne.useUniqueIDs)it=fe[et],nt=$.GetAttributeByUniqueId(ae,it);else{if(-1===(it=$.GetAttributeId(ae,X[fe[et]])))continue;nt=$.GetAttribute(ae,it)}Ke.attributes.push(n(X,$,ae,et,tt,nt))}return je===X.TRIANGULAR_MESH&&(Ke.index=function r(X,$,ee){var ne=3*ee.num_faces(),ae=4*ne,de=X._malloc(ae);$.GetTrianglesUInt32Array(ee,ae,de);var fe=new Uint32Array(X.HEAPF32.buffer,de,ne).slice();return X._free(de),{array:fe,itemSize:1}}(X,$,ae)),X.destroy(ae),Ke}($,ee,fe,de),je=Ue.attributes.map((function(X){return X.array.buffer}));Ue.index&&je.push(Ue.index.array.buffer),self.postMessage({type:"decode",id:ne.id,geometry:Ue},je)}catch(Ke){console.error(Ke),self.postMessage({type:"error",id:ne.id,error:Ke.message})}finally{$.destroy(fe),$.destroy(ee)}}))}}}function dz(){return aq||(aq=new uq).setDecoderPath("https://www.gstatic.com/draco/versioned/decoders/1.5.2/").preload(),aq.decoderPending}function pz(X){return _pz.apply(this,arguments)}function _pz(){return _pz=(0,de.Z)(et().mark((function _callee10(X){var $,ee;return et().wrap((function _callee10$(ne){for(;;)switch(ne.prev=ne.next){case 0:if(!aq){ne.next=13;break}return $={attributeIDs:aq.defaultAttributeIDs,attributeTypes:aq.defaultAttributeTypes,useUniqueIDs:!1},ne.prev=2,ne.next=5,aq.decodeGeometry(new Int8Array(X).buffer,$);case 5:ee=ne.sent,ne.next=11;break;case 8:ne.prev=8,ne.t0=ne.catch(2),console.error(ne.t0);case 11:if(!ee){ne.next=13;break}return ne.abrupt("return",{index:ee.index?{array:ee.index.array}:void 0,attributes:Object.entries(ee.attributes).map((function(X){var $=(0,fe.Z)(X,2),ee=$[0],ne=$[1];return{name:ee,itemSize:ne.itemSize,array:ne.array}}))});case 13:return ne.abrupt("return",null);case 14:case"end":return ne.stop()}}),_callee10,null,[[2,8]])}))),_pz.apply(this,arguments)}function zA(X){return _zA.apply(this,arguments)}function _zA(){return _zA=(0,de.Z)(et().mark((function _callee11(X){var $,ee,ne,ae,de,Ue,je,Ke,tt;return et().wrap((function _callee11$(et){for(;;)switch(et.prev=et.next){case 0:if($=Ay(sR.deserialize(new Uint8Array(X))),ee=(0,fe.Z)($,2),ne=ee[0],ae=ee[1],de=[],ne.scene.objects.traverse((function(X,$){"Mesh"===$.type&&"NonParametricGeometry"===$.geometry.type&&void 0!==$.geometry.data.draco&&de.push($)})),et.t0=de.length,!et.t0){et.next=6;break}return et.next=6,dz();case 6:Ue=0,je=de;case 7:if(!(Ue<je.length)){et.next=16;break}return Ke=je[Ue],et.next=11,pz(Ey(Ke.geometry.data.draco));case 11:(tt=et.sent)&&function(){tt.index&&(Ke.geometry.data.index={array:tt.index.array,itemSize:1,normalized:!1,type:"Uint32Array"});var X={};tt.attributes.forEach((function($){var ee=$.name,ne=$.array,ae=$.itemSize;X[ee]={array:ne,itemSize:ae,type:"Float32Array",normalized:!1}})),Ke.geometry.data.attributes=X,Ke.geometry.data.draco=void 0}();case 13:Ue++,et.next=7;break;case 16:return et.abrupt("return",ae.result().data);case 17:case"end":return et.stop()}}),_callee11)}))),_zA.apply(this,arguments)}var cq={update:null,begin:null,loopBegin:null,changeBegin:null,change:null,changeComplete:null,loopComplete:null,complete:null,loop:1,direction:"normal",autoplay:!0,timelineOffset:0,rewind:!0},hq={duration:1e3,delay:0,endDelay:0,easing:"easeOutElastic(1, .5)",round:0},dq=["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","scale","scaleX","scaleY","scaleZ","skew","skewX","skewY","perspective","matrix","matrix3d"],fq={CSS:{},springs:{}};function ji(X,$,ee){return Math.min(Math.max(X,$),ee)}function bu(X,$){return X.indexOf($)>-1}function Zv(X,$){return X.apply(null,$)}var pq={arr:function arr(X){return Array.isArray(X)},obj:function obj(X){return bu(Object.prototype.toString.call(X),"Object")},pth:function pth(X){return pq.obj(X)&&X.hasOwnProperty("totalLength")},svg:function svg(X){return X instanceof SVGElement},inp:function inp(X){return X instanceof HTMLInputElement},dom:function dom(X){return!("isNode"in X)&&(X.nodeType||pq.svg(X))},str:function str(X){return"string"==typeof X},fnc:function fnc(X){return"function"==typeof X},und:function und(X){return typeof X>"u"},hex:function hex(X){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(X)},rgb:function rgb(X){return/^rgb/.test(X)},hsl:function hsl(X){return/^hsl/.test(X)},col:function col(X){return pq.hex(X)||pq.rgb(X)||pq.hsl(X)},key:function key(X){return!cq.hasOwnProperty(X)&&!hq.hasOwnProperty(X)&&"targets"!==X&&"keyframes"!==X}};function qA(X){var $=/\(([^)]+)\)/.exec(X);return $?$[1].split(",").map((function(X){return parseFloat(X)})):[]}function YA(X,$){var ee=qA(X),ne=ji(pq.und(ee[0])?1:ee[0],.1,100),ae=ji(pq.und(ee[1])?100:ee[1],.1,100),de=ji(pq.und(ee[2])?10:ee[2],.1,100),fe=ji(pq.und(ee[3])?0:ee[3],.1,100),Ue=Math.sqrt(ae/ne),je=de/(2*Math.sqrt(ae*ne)),Ke=je<1?Ue*Math.sqrt(1-je*je):0,et=je<1?(je*Ue-fe)/Ke:-fe+Ue;function f(X){var ee=$?$*X/1e3:X;return ee=je<1?Math.exp(-ee*je*Ue)*(1*Math.cos(Ke*ee)+et*Math.sin(Ke*ee)):(1+et*ee)*Math.exp(-ee*Ue),0===X||1===X?X:1-ee}return $?f:function d(){var $=fq.springs[X];if($)return $;for(var ee=1/6,ne=0,ae=0;;)if(1===f(ne+=ee)){if(++ae>=16)break}else ae=0;var de=ne*ee*1e3;return fq.springs[X]=de,de}}function gz(X){return void 0===X&&(X=10),function($){return Math.ceil(ji($,1e-6,1)*X)*(1/X)}}var vq=function(){var X=.1;function t(X,$){return 1-3*$+3*X}function r(X,$){return 3*$-6*X}function n(X){return 3*X}function s(X,$,ee){return((t($,ee)*X+r($,ee))*X+n($))*X}function o(X,$,ee){return 3*t($,ee)*X*X+2*r($,ee)*X+n($)}return function c($,ee,ne,ae){if(0<=$&&$<=1&&0<=ne&&ne<=1){var de=new Float32Array(11);if($!==ee||ne!==ae)for(var fe=0;fe<11;++fe)de[fe]=s(fe*X,$,ne);return function(X){return $===ee&&ne===ae||0===X||1===X?X:s(g(X),ee,ae)}}function g(ee){for(var ae=0,fe=1;10!==fe&&de[fe]<=ee;++fe)ae+=X;--fe;var Ue=ae+(ee-de[fe])/(de[fe+1]-de[fe])*X,je=o(Ue,$,ne);return je>=.001?function l(X,$,ee,ne){for(var ae=0;ae<4;++ae){var de=o($,ee,ne);if(0===de)return $;$-=(s($,ee,ne)-X)/de}return $}(ee,Ue,$,ne):0===je?Ue:function a(X,$,ee,ne,ae){var de,fe,Ue=0;do{(de=s(fe=$+(ee-$)/2,ne,ae)-X)>0?ee=fe:$=fe}while(Math.abs(de)>1e-7&&++Ue<10);return fe}(ee,ae,ae+X,$,ne)}}}(),mq=function(){var X={linear:function linear(){return function(X){return X}}},$={Sine:function Sine(){return function(X){return 1-Math.cos(X*Math.PI/2)}},Circ:function Circ(){return function(X){return 1-Math.sqrt(1-X*X)}},Back:function Back(){return function(X){return X*X*(3*X-2)}},Bounce:function Bounce(){return function(X){for(var $,ee=4;X<(($=Math.pow(2,--ee))-1)/11;);return 1/Math.pow(4,3-ee)-7.5625*Math.pow((3*$-2)/22-X,2)}},Elastic:function Elastic(X,$){void 0===X&&(X=1),void 0===$&&($=.5);var ee=ji(X,1,10),ne=ji($,.1,2);return function(X){return 0===X||1===X?X:-ee*Math.pow(2,10*(X-1))*Math.sin((X-1-ne/(2*Math.PI)*Math.asin(1/ee))*(2*Math.PI)/ne)}}};return["Quad","Cubic","Quart","Quint","Expo"].forEach((function(X,ee){$[X]=function(){return function(X){return Math.pow(X,ee+2)}}})),Object.keys($).forEach((function(ee){var ne=$[ee];X["easeIn"+ee]=ne,X["easeOut"+ee]=function(X,$){return function(ee){return 1-ne(X,$)(1-ee)}},X["easeInOut"+ee]=function(X,$){return function(ee){return ee<.5?ne(X,$)(2*ee)/2:1-ne(X,$)(-2*ee+2)/2}}})),X}();function rx(X,$){if(pq.fnc(X))return X;var ee=X.split("(")[0],ne=mq[ee],ae=qA(X);switch(ee){case"spring":return YA(X,$);case"cubicBezier":return Zv(vq,ae);case"steps":return Zv(gz,ae);default:return Zv(ne,ae)}}function QA(X){try{return document.querySelectorAll(X)}catch($){return}}function rm(X,$){for(var ee=X.length,ne=arguments.length>=2?arguments[1]:void 0,ae=[],de=0;de<ee;de++)if(de in X){var fe=X[de];$.call(ne,fe,de,X)&&ae.push(fe)}return ae}function nm(X){return X.reduce((function(X,$){return X.concat(pq.arr($)?nm($):$)}),[])}function GA(X){return pq.arr(X)?X:(pq.str(X)&&(X=QA(X)||X),X instanceof NodeList||X instanceof HTMLCollection?[].slice.call(X):[X])}function nx(X,$){return X.some((function(X){return X===$}))}function ix(X){var $={};for(var ee in X)$[ee]=X[ee];return $}function $v(X,$){var ee=ix(X);for(var ne in X)ee[ne]=$.hasOwnProperty(ne)?$[ne]:X[ne];return ee}function im(X,$){var ee=ix(X);for(var ne in $)ee[ne]=pq.und(X[ne])?$[ne]:X[ne];return ee}function wz(X){return pq.rgb(X)?function vz(X){var $=/rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(X);return $?"rgba("+$[1]+",1)":X}(X):pq.hex(X)?function xz(X){var $=X.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(X,$,ee,ne){return $+$+ee+ee+ne+ne})),ee=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec($);return"rgba("+parseInt(ee[1],16)+","+parseInt(ee[2],16)+","+parseInt(ee[3],16)+",1)"}(X):pq.hsl(X)?function bz(X){var $,ee,ne,ae=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(X)||/hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(X),de=parseInt(ae[1],10)/360,fe=parseInt(ae[2],10)/100,Ue=parseInt(ae[3],10)/100,je=ae[4]||1;function o(X,$,ee){return ee<0&&(ee+=1),ee>1&&(ee-=1),ee<1/6?X+6*($-X)*ee:ee<.5?$:ee<2/3?X+($-X)*(2/3-ee)*6:X}if(0==fe)$=ee=ne=Ue;else{var Ke=Ue<.5?Ue*(1+fe):Ue+fe-Ue*fe,et=2*Ue-Ke;$=o(et,Ke,de+1/3),ee=o(et,Ke,de),ne=o(et,Ke,de-1/3)}return"rgba("+255*$+","+255*ee+","+255*ne+","+je+")"}(X):void 0}function vs(X){var $=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(X);if($)return $[1]}function ex(X,$){return pq.fnc(X)?X($.target,$.id,$.total):X}function qi(X,$){return X.getAttribute($)}function sx(X,$,ee){if(nx([ee,"deg","rad","turn"],vs($)))return $;var ne=fq.CSS[$+ee];if(!pq.und(ne))return ne;var ae=document.createElement(X.tagName),de=X.parentNode&&X.parentNode!==document?X.parentNode:document.body;de.appendChild(ae),ae.style.position="absolute",ae.style.width=100+ee;var fe=100/ae.offsetWidth;de.removeChild(ae);var Ue=fe*parseFloat($);return fq.CSS[$+ee]=Ue,Ue}function JA(X,$,ee){if($ in X.style){var ne=$.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),ae=X.style[$]||getComputedStyle(X).getPropertyValue(ne)||"0";return ee?sx(X,ae,ee):ae}}function ox(X,$){return pq.dom(X)&&!pq.inp(X)&&(qi(X,$)||pq.svg(X)&&X[$])?"attribute":pq.dom(X)&&nx(dq,$)?"transform":pq.dom(X)&&"transform"!==$&&JA(X,$)?"css":null!=X[$]?"object":void 0}function KA(X){if(pq.dom(X)){for(var $,ee=X.style.transform||"",ne=/(\w+)\(([^)]*)\)/g,ae=new Map;$=ne.exec(ee);)ae.set($[1],$[2]);return ae}}function Mz(X,$,ee,ne){var ae=bu($,"scale")?1:0+function Sz(X){return bu(X,"translate")||"perspective"===X?"px":bu(X,"rotate")||bu(X,"skew")?"deg":void 0}($),de=KA(X).get($)||ae;return ee&&(ee.transforms.list.set($,de),ee.transforms.last=$),ne?sx(X,de,ne):de}function ax(X,$,ee,ne){switch(ox(X,$)){case"transform":return Mz(X,$,ne,ee);case"css":return JA(X,$,ee);case"attribute":return qi(X,$);default:return X[$]||0}}function lx(X,$){var ee=/^(\*=|\+=|-=)/.exec(X);if(!ee)return X;var ne=vs(X)||0,ae=parseFloat($),de=parseFloat(X.replace(ee[0],""));switch(ee[0][0]){case"+":return ae+de+ne;case"-":return ae-de+ne;case"*":return ae*de+ne}}function ZA(X,$){if(pq.col(X))return wz(X);if(/\s/g.test(X))return X;var ee=vs(X),ne=ee?X.substr(0,X.length-ee.length):X;return $?ne+$:ne}function cx(X,$){return Math.sqrt(Math.pow($.x-X.x,2)+Math.pow($.y-X.y,2))}function $A(X){for(var $,ee=X.points,ne=0,ae=0;ae<ee.numberOfItems;ae++){var de=ee.getItem(ae);ae>0&&(ne+=cx($,de)),$=de}return ne}function eT(X){if(X.getTotalLength)return X.getTotalLength();switch(X.tagName.toLowerCase()){case"circle":return function Az(X){return 2*Math.PI*qi(X,"r")}(X);case"rect":return function Tz(X){return 2*qi(X,"width")+2*qi(X,"height")}(X);case"line":return function Ez(X){return cx({x:qi(X,"x1"),y:qi(X,"y1")},{x:qi(X,"x2"),y:qi(X,"y2")})}(X);case"polyline":return $A(X);case"polygon":return function _z(X){var $=X.points;return $A(X)+cx($.getItem($.numberOfItems-1),$.getItem(0))}(X)}}function tT(X,$){var ee=$||{},ne=ee.el||function Dz(X){for(var $=X.parentNode;pq.svg($)&&pq.svg($.parentNode);)$=$.parentNode;return $}(X),ae=ne.getBoundingClientRect(),de=qi(ne,"viewBox"),fe=ae.width,Ue=ae.height,je=ee.viewBox||(de?de.split(" "):[0,0,fe,Ue]);return{el:ne,viewBox:je,x:je[0]/1,y:je[1]/1,w:fe/je[2],h:Ue/je[3]}}function Lz(X,$){function t(ee){void 0===ee&&(ee=0);var ne=$+ee>=1?$+ee:0;return X.el.getPointAtLength(ne)}var ee=tT(X.el,X.svg),ne=t(),ae=t(-1),de=t(1);switch(X.property){case"x":return(ne.x-ee.x)*ee.w;case"y":return(ne.y-ee.y)*ee.h;case"angle":return 180*Math.atan2(de.y-ae.y,de.x-ae.x)/Math.PI}}function kA(X,$){var ee=/[+-]?\d*\.?\d+(?:\.\d+)?(?:[eE][+-]?\d+)?/g,ne=ZA(pq.pth(X)?X.totalLength:X,$)+"";return{original:ne,numbers:ne.match(ee)?ne.match(ee).map(Number):[0],strings:pq.str(X)||$?ne.split(ee):[]}}function rT(X){return rm(X?nm(pq.arr(X)?X.map(GA):GA(X)):[],(function(X,$,ee){return ee.indexOf(X)===$}))}function nT(X){var $=rT(X);return $.map((function(X,ee){return{target:X,id:ee,total:$.length,transforms:{list:KA(X)}}}))}function Iz(X,$){var ee=ix($);if(/^spring/.test(ee.easing)&&(ee.duration=YA(ee.easing)),pq.arr(X)){var ne=X.length;2===ne&&!pq.obj(X[0])?X={value:X}:pq.fnc($.duration)||(ee.duration=$.duration/ne)}var ae=pq.arr(X)?X:[X];return ae.map((function(X,ee){var ne=pq.obj(X)&&!pq.pth(X)?X:{value:X};return pq.und(ne.delay)&&(ne.delay=ee?0:$.delay),pq.und(ne.endDelay)&&(ne.endDelay=ee===ae.length-1?$.endDelay:0),ne})).map((function(X){return im(X,ee)}))}function Bz(X,$){var ee=[],ne=$.keyframes;for(var ae in ne&&($=im(function Rz(X){for(var $=rm(nm(X.map((function(X){return Object.keys(X)}))),(function(X){return pq.key(X)})).reduce((function(X,$){return X.indexOf($)<0&&X.push($),X}),[]),ee={},ne=function r(ne){var ae=$[ne];ee[ae]=X.map((function(X){var $={};for(var ee in X)pq.key(ee)?ee==ae&&($.value=X[ee]):$[ee]=X[ee];return $}))},ae=0;ae<$.length;ae++)ne(ae);return ee}(ne),$)),$)pq.key(ae)&&ee.push({name:ae,tweens:Iz($[ae],X)});return ee}function Oz(X,$){var ee;return X.tweens.map((function(ne){var ae=function Nz(X,$){var ee={};for(var ne in X){var ae=ex(X[ne],$);pq.arr(ae)&&(ae=ae.map((function(X){return ex(X,$)})),1===ae.length&&(ae=ae[0])),ee[ne]=ae}return ee.duration=parseFloat(ee.duration),ee.delay=parseFloat(ee.delay),ee}(ne,$),de=ae.value,fe=pq.arr(de)?de[1]:de,Ue=vs(fe),je=ax($.target,X.name,Ue,$),Ke=ee?ee.to.original:je,et=pq.arr(de)?de[0]:Ke,tt=vs(et)||vs(je),nt=Ue||tt;return pq.und(fe)&&(fe=Ke),ae.from=kA(et,nt),ae.to=kA(lx(fe,et),nt),ae.start=ee?ee.end:0,ae.end=ae.start+ae.delay+ae.duration+ae.endDelay,ae.easing=rx(ae.easing,ae.duration),ae.isPath=pq.pth(de),ae.isColor=pq.col(ae.from.original),ae.isColor&&(ae.round=1),ee=ae,ae}))}var gq={css:function css(X,$,ee){return X.style[$]=ee},attribute:function attribute(X,$,ee){return X.setAttribute($,ee)},object:function object(X,$,ee){return X[$]=ee},transform:function transform(X,$,ee,ne,ae){if(ne.list.set($,ee),$===ne.last||ae){var de="";ne.list.forEach((function(X,$){de+=$+"("+X+") "})),X.style.transform=de}}};function sT(X,$){nT(X).forEach((function(X){for(var ee in $){var ne=ex($[ee],X),ae=X.target,de=vs(ne),fe=ax(ae,ee,de,X),Ue=lx(ZA(ne,de||vs(fe)),fe),je=ox(ae,ee);gq[je](ae,ee,Ue,X.transforms,!0)}}))}function Uz(X,$){return rm(nm(X.map((function(X){return $.map((function($){return function Fz(X,$){var ee=ox(X.target,$.name);if(ee){var ne=Oz($,X),ae=ne[ne.length-1];return{type:ee,property:$.name,animatable:X,tweens:ne,duration:ae.end,delay:ne[0].delay,endDelay:ae.endDelay}}}(X,$)}))}))),(function(X){return!pq.und(X)}))}function oT(X,$){var ee=X.length,ne=function r(X){return X.timelineOffset?X.timelineOffset:0},ae={};return ae.duration=ee?Math.max.apply(Math,X.map((function(X){return ne(X)+X.duration}))):$.duration,ae.delay=ee?Math.min.apply(Math,X.map((function(X){return ne(X)+X.delay}))):$.delay,ae.endDelay=ee?ae.duration-Math.max.apply(Math,X.map((function(X){return ne(X)+X.duration-X.endDelay}))):$.endDelay,ae}var yq=0;var bq,xq=[],_q=[],wq=function(){function i(){bq=requestAnimationFrame(e)}function e(X){var $=xq.length;if($){for(var ee=0;ee<$;){var ne=xq[ee];if(ne.paused){var ae=xq.indexOf(ne);ae>-1&&(xq.splice(ae,1),$=xq.length)}else ne.tick(X);ee++}i()}else bq=cancelAnimationFrame(bq)}return i}();function Sr(X){void 0===X&&(X={});var $,ee=0,ne=0,ae=0,de=0,fe=null;function a(X){var $=window.Promise&&new Promise((function(X){return fe=X}));return X.finished=$,$}var Ue=function zz(X){var $=$v(cq,X),ee=$v(hq,X),ne=Bz(ee,X),ae=nT(X.targets),de=Uz(ae,ne),fe=oT(de,ee),Ue=yq;return yq++,im($,{id:Ue,children:[],animatables:ae,animations:de,duration:fe.duration,delay:fe.delay,endDelay:fe.endDelay})}(X);a(Ue);function h(){var X=Ue.direction;"alternate"!==X&&(Ue.direction="normal"!==X?"normal":"reverse"),Ue.reversed=!Ue.reversed,$.forEach((function(X){return X.reversed=Ue.reversed}))}function u(X){return Ue.reversed?Ue.duration-X:X}function f(){ee=0,ne=u(Ue.currentTime)*(1/Sr.speed)}function d(X,$){$&&$.seek(X-$.timelineOffset)}function m(X){var $=0,ee=Ue.animations,ne=ee.length;for(!0===Ue.reversePlayback&&!1===Ue.rewind&&(X=Ue.duration-X);$<ne;){var ae=ee[$],de=ae.animatable,fe=ae.tweens,je=fe.length-1,Ke=fe[je];je&&(Ke=rm(fe,(function($){return X<$.end}))[0]||Ke);for(var et=ji(X-Ke.start-Ke.delay,0,Ke.duration)/Ke.duration,tt=isNaN(et)?1:Ke.easing(et),nt=Ke.to.strings,it=Ke.round,ct=[],dt=Ke.to.numbers.length,vt=void 0,gt=0;gt<dt;gt++){var yt=void 0;if(!0===Ue.reversePlayback&&!1===Ue.rewind)var _t=Ke.to.numbers[gt],wt=Ke.from.numbers[gt]||0;else wt=Ke.to.numbers[gt],_t=Ke.from.numbers[gt]||0;yt=Ke.isPath?Lz(Ke.value,tt*wt):_t+tt*(wt-_t),it&&(Ke.isColor&&gt>2||(yt=Math.round(yt*it)/it)),ct.push(yt)}var St=nt.length;if(St){vt=nt[0];for(var Ct=0;Ct<St;Ct++){nt[Ct];var At=nt[Ct+1],Et=ct[Ct];isNaN(Et)||(vt+=At?Et+At:Et+" ")}}else vt=ct[0];gq[ae.type](de.target,ae.property,vt,de.transforms),ae.currentValue=vt,$++}}function g(X){Ue[X]&&!Ue.passThrough&&Ue[X](Ue)}function y(X){var je=Ue.duration,Ke=Ue.delay,et=je-Ue.endDelay,tt=u(X);Ue.progress=ji(tt/je*100,0,100),Ue.reversePlayback=tt<Ue.currentTime,$&&function p(X){if(Ue.reversePlayback)for(var ee=de;ee--;)d(X,$[ee]);else for(var ne=0;ne<de;ne++)d(X,$[ne])}(tt),!Ue.began&&Ue.currentTime>=0&&(Ue.began=!0,g("begin")),!Ue.loopBegan&&Ue.currentTime>0&&(Ue.loopBegan=!0,g("loopBegin")),tt<=Ke&&0!==Ue.currentTime&&m(0),(tt>=et&&Ue.currentTime!==je||!je)&&m(je),tt>Ke&&tt<et?(Ue.changeBegan||(Ue.changeBegan=!0,Ue.changeCompleted=!1,g("changeBegin")),g("change"),m(tt)):Ue.changeBegan?(Ue.changeCompleted=!0,Ue.changeBegan=!1,g("change"),g("changeComplete")):Ue.began&&tt>et&&(g("change"),g("changeComplete")),Ue.currentTime=ji(tt,0,je),Ue.began&&g("update"),X>=je&&(ne=0,function v(){Ue.remaining&&!0!==Ue.remaining&&Ue.remaining--}(),Ue.remaining?(ee=ae,g("loopComplete"),Ue.loopBegan=!1,"alternate"===Ue.direction&&h()):(Ue.paused=!0,Ue.completed||(Ue.completed=!0,g("loopComplete"),g("complete"),!Ue.passThrough&&"Promise"in window&&(fe(),a(Ue)))))}return Ue.reset=function(){var X=Ue.direction;Ue.passThrough=!1,Ue.currentTime=0,Ue.progress=0,Ue.paused=!0,Ue.began=!1,Ue.loopBegan=!1,Ue.changeBegan=!1,Ue.completed=!1,Ue.changeCompleted=!1,Ue.reversePlayback=!1,Ue.reversed="reverse"===X,Ue.remaining=Ue.loop,$=Ue.children;for(var ee=de=$.length;ee--;)Ue.children[ee].reset();(Ue.reversed&&!0!==Ue.loop||"alternate"===X&&1===Ue.loop)&&Ue.remaining++,m(Ue.reversed?Ue.duration:0)},Ue.set=function(X,$){return sT(X,$),Ue},Ue.tick=function(X){ae=X,ee||(ee=ae),y((ae+(ne-ee))*Sr.speed)},Ue.seek=function(X){y(u(X))},Ue.pause=function(){Ue.paused=!0,f()},Ue.play=function(){!Ue.paused||(Ue.completed&&Ue.reset(),Ue.paused=!1,xq.push(Ue),f(),bq||wq())},Ue.reverse=function(){h(),Ue.completed=!Ue.reversed,f()},Ue.restart=function(){Ue.reset(),Ue.play()},Ue.reset(),Ue.autoplay&&Ue.play(),Ue}function WA(X,$){for(var ee=$.length;ee--;)nx(X,$[ee].animatable.target)&&$.splice(ee,1)}typeof document<"u"&&document.addEventListener("visibilitychange",(function kz(){document.hidden?(xq.forEach((function(X){return X.pause()})),_q=xq.slice(0),Sr.running=xq=[]):_q.forEach((function(X){return X.play()}))})),Sr.version="3.2.0",Sr.speed=1,Sr.running=xq,Sr.remove=function Vz(X){for(var $=rT(X),ee=xq.length;ee--;){var ne=xq[ee],ae=ne.animations,de=ne.children;WA($,ae);for(var fe=de.length;fe--;){var Ue=de[fe],je=Ue.animations;WA($,je),!je.length&&!Ue.children.length&&de.splice(fe,1)}!ae.length&&!de.length&&ne.pause()}},Sr.get=ax,Sr.set=sT,Sr.convertPx=sx,Sr.path=function Pz(X,$){var ee=pq.str(X)?QA(X)[0]:X,ne=$||100;return function(X){return{property:X,el:ee,svg:tT(ee),totalLength:eT(ee)*(ne/100)}}},Sr.setDashoffset=function Cz(X){var $=eT(X);return X.setAttribute("stroke-dasharray",$),$},Sr.stagger=function Hz(X,$){void 0===$&&($={});var ee=$.direction||"normal",ne=$.easing?rx($.easing):null,ae=$.grid,de=$.axis,fe=$.from||0,Ue="first"===fe,je="center"===fe,Ke="last"===fe,et=pq.arr(X),tt=parseFloat(et?X[0]:X),nt=et?parseFloat(X[1]):0,it=vs(et?X[1]:X)||0,ct=$.start||0+(et?tt:0),dt=[],vt=0;return function(X,$,gt){if(Ue&&(fe=0),je&&(fe=(gt-1)/2),Ke&&(fe=gt-1),!dt.length){for(var yt=0;yt<gt;yt++){if(ae){var _t=je?(ae[0]-1)/2:fe%ae[0],wt=je?(ae[1]-1)/2:Math.floor(fe/ae[0]),St=_t-yt%ae[0],Ct=wt-Math.floor(yt/ae[0]),At=Math.sqrt(St*St+Ct*Ct);"x"===de&&(At=-St),"y"===de&&(At=-Ct),dt.push(At)}else dt.push(Math.abs(fe-yt));vt=Math.max.apply(Math,dt)}ne&&(dt=dt.map((function(X){return ne(X/vt)*vt}))),"reverse"===ee&&(dt=dt.map((function(X){return de?X<0?-1*X:-X:Math.abs(vt-X)})))}return ct+(et?(nt-tt)/vt:tt)*(Math.round(100*dt[$])/100)+it}},Sr.timeline=function Wz(X){void 0===X&&(X={});var $=Sr(X);return $.duration=0,$.add=function(ee,ne){var ae=xq.indexOf($),de=$.children;function o(X){X.passThrough=!0}ae>-1&&xq.splice(ae,1);for(var fe=0;fe<de.length;fe++)o(de[fe]);var Ue=im(ee,$v(hq,X));Ue.targets=Ue.targets||X.targets;var je=$.duration;Ue.autoplay=!1,Ue.direction=$.direction,Ue.timelineOffset=pq.und(ne)?je:lx(ne,je),o($),Ue.rewind=$.rewind,$.seek(Ue.timelineOffset);var Ke=Sr(Ue);o(Ke),de.push(Ke);var et=oT(de,X);return $.delay=et.delay,$.endDelay=et.endDelay,$.duration=et.duration,$.seek(0),$.reset(),$.autoplay&&$.play(),$},$},Sr.easing=rx,Sr.penner=mq,Sr.random=function(X,$){return Math.floor(Math.random()*($-X+1))+X};var Sq=Sr;function jz(X,$,ee,ne){if(X.hasValue(ee)&&ee in $){var ae=X.getValue(ee),de=$[ee];ae!==de&&ne.push({change:function change($){X.setValue(ee,da.lerp(ae,de,$))}})}}function qz(X,$,ee,ne){if(X.hasValue(ee)&&ee in $){var ae=X.getValue(ee),de=ae.toArray(),fe=$[ee];rD.isEqual(de,fe)||ne.push({change:function change(X){ae.fromArray(rD.lerp(de,fe,X))}})}}function Yz(X,$,ee,ne){if(X.hasValue(ee)&&ee in $){var ae=X.getValue(ee),de=ae.toArray(),fe=$[ee];iD.isEqual(de,fe)||ne.push({change:function change(X){ae.fromArray(iD.lerp(de,fe,X))}})}}function Xz(X,$,ee,ne,ae){if(X.hasValue(ee)&&ee in $){var de=X.getValue(ee).clone(),fe=$[ee],Ue="string"==typeof fe?ae.getColor(fe):fe;if(!sD.equals(de,Ue)){var je=de.clone();X.setValue(ee,je),ne.push({change:function change(X){var $=sD.lerp(de,Ue,X),ee=$.r,ne=$.g,ae=$.b;je.setRGB(ee,ne,ae)}})}}}function Qz(X,$,ee,ne,ae){if(X.hasValue(ee)&&ee in $){var de=X.getValue(ee).clone(),fe=$[ee],Ue="string"==typeof fe?ae.getColor(fe):fe;if(!uD.equals(de,Ue)){var je=de.clone();X.setValue(ee,je),ne.push({change:function change(X){var $=uD.lerp(de,Ue,X),ee=$.r,ne=$.g,ae=$.b,fe=$.a;je.setRGBA(ee,ne,ae,fe)}})}}}function Jz(X,$){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"steps",ne=arguments.length>3?arguments[3]:void 0;if(X.hasValue(ee)&&ee in $)for(var de=(0,ae.Z)(X.getValue(ee)),fe=$[ee],Ue=function _loop10($){var ee=de[$],ae=fe[$];ee!==ae&&ne.push({change:function change(ne){de[$]=da.lerp(ee,ae,ne),X.setValue("steps",de)}})},je=0;je<de.length;++je)Ue(je)}function Kz(X,$){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"colors",ne=arguments.length>3?arguments[3]:void 0;if(X.hasValue(ee)&&ee in $)for(var ae=X.getValue(ee),de=$[ee],fe=function _loop11(X){var $=ae[X].toArray(),ee=de[X];aD.isEqual($,ee)||ne.push({change:function change(ne){ae[X].fromArray(aD.lerp($,ee,ne))}})},Ue=0;Ue<ae.length;++Ue)fe(Ue)}function Zz(X,$){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"texture",ne=arguments.length>3?arguments[3]:void 0;if(X.hasValue(ee)&&ee in $){var ae=X.getValue("texture"),de=$[ee],fe=ae.repeat.toArray(),Ue=ae.offset.toArray(),je=de.repeat,Ke=de.offset;(!rD.isEqual(fe,je)||!rD.isEqual(Ue,Ke))&&ne.push({change:function change(X){ae.repeat.fromArray(rD.lerp(fe,je,X)),ae.offset.fromArray(rD.lerp(Ue,Ke,X)),ae.updateMatrix(),ae.needsUpdate=!0}})}}var kq=new wo,Cq=new wo,Aq=new xo,Mq=new Qs,Eq=new Ds;function mT(X,$,ee,ne){if(void 0!==ee.position){var ae=X.position.toArray(),de=ee.position;iD.isEqual(ae,de)||ne.push({change:function change($){X.position.fromArray(iD.lerp(ae,de,$)),X.updateMatrix(),NV(X)&&FV(X.parent)&&X.invalidateDownstreamBooleanData(!0)}})}if(void 0!==ee.scale){var fe=X.scale.toArray(),Ue=ee.scale;iD.isEqual(fe,Ue)||ne.push({change:function change($){X.scale.fromArray(iD.lerp(fe,Ue,$)),X.updateMatrix(),NV(X)&&FV(X.parent)&&X.invalidateDownstreamBooleanData(!0)}})}(function tG(X,$,ee,ne){if(void 0===ee.rotation)return;var ae=kq.setFromEuler(X.rotation).toArray(),de=ee.rotation;if(iD.isEqual(ae,de))return;if(iD.sub(ee.rotation,$?$.rotation:X.rotation).every((function(X){return Math.abs(X)<2*Math.PI}))){var fe=X.quaternion.clone(),Ue=(new xo).setFromEuler(Mq.set(ee.rotation[0],ee.rotation[1],ee.rotation[2]));ne.push({change:function change($){(function fT(X,$,ee,ne){if(0===ne)return ee.copy(X);if(1===ne)return ee.copy($);var ae=X.w*$.w+X.x*$.x+X.y*$.y+X.z*$.z;if(ae>=1)return ee.copy(X);var de=1-ae*ae;if(de<=Number.EPSILON){var fe=1-ne;return ee.w=fe*X.w+ne*$.w,ee.x=fe*X.x+ne*$.x,ee.y=fe*X.y+ne*$.y,ee.z=fe*X.z+ne*$.z,ee.normalize(),ee}var Ue=Math.sqrt(de),je=Math.atan2(Ue,ae),Ke=Math.sin((1-ne)*je)/Ue,et=Math.sin(ne*je)/Ue;return ee.w=X.w*Ke+$.w*et,ee.x=X.x*Ke+$.x*et,ee.y=X.y*Ke+$.y*et,ee.z=X.z*Ke+$.z*et,ee})(fe,Ue,X.quaternion,$),X.updateMatrix(),NV(X)&&FV(X.parent)&&X.invalidateDownstreamBooleanData(!0)}})}else ne.push({change:function change($){X.rotation.setFromVector3(Cq.fromArray(iD.lerp(ae,de,$))),X.updateMatrix(),NV(X)&&FV(X.parent)&&X.invalidateDownstreamBooleanData(!0)}})})(X,$,ee,ne),function rG(X,$,ee){if(void 0!==$.hiddenMatrix&&!oD.isEqual(X.hiddenMatrix.toArray(),$.hiddenMatrix)){var ne=new wo,ae=new xo,de=new wo;X.hiddenMatrix.decompose(ne,ae,de);var fe=new wo,Ue=new xo,je=new wo;Eq.fromArray($.hiddenMatrix).decompose(fe,Ue,je),ee.push({change:function change($){Aq.slerpQuaternions(ae,Ue,$),kq.lerpVectors(ne,fe,$),Cq.lerpVectors(de,je,$),X.hiddenMatrix.compose(kq,Aq,Cq),NV(X)&&FV(X.parent)&&X.invalidateDownstreamBooleanData(!0)}})}}(X,ee,ne)}function gT(X,$,ee,ne){var ae=[];if((X.visible||FV(X.parent))&&mT(X,null==$?void 0:$.objectState,ee.objectState,ae),NV(X)){if((X.visible||FV(X.parent))&&"geometry"in ee.objectState&&function cT(X,$,ee){if(void 0!==$.width&&void 0!==$.height&&void 0!==$.depth){var ne=X.geometry.userData.parameters,ae=[ne.width,ne.height,ne.depth],de=[$.width,$.height,$.depth];!iD.isEqual(ae,de)&&!FV(X)&&ee.push({change:function change($){var ee=iD.lerp(ae,de,$),ne=(0,fe.Z)(ee,3),Ue=ne[0],je=ne[1],Ke=ne[2];X.updateGeometry({parameters:{width:Ue,height:je,depth:Ke}}),X.invalidateDownstreamBooleanData()}})}}(X,ee.objectState.geometry,ae),X.visible&&("material"in ee.objectState||"materials"in ee.objectState)){var de=function dT(X,$){var ee,ne=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,ae=Array.isArray(X.material)?X.material[ne]:X.material;return"materials"in $?ee=$.materials[ne]:"material"in $&&(ee=$.material),[ae,ee]}(X,ee.objectState,X.selectedMaterial),Ue=(0,fe.Z)(de,2),Ke=Ue[0],et=Ue[1];Ke&&et&&"string"!=typeof et&&function uT(X,$,ee,ne){for(var ae,de,fe=X.layersList.head;fe;){var Ue=$.layers.data(fe.uuid);if(Ue&&(null==(ae=fe.visible)||ae)&&(null==(de=Ue.visible)||de)){var Ke,et=fe.getNames().filter((function(X){return!UR.some((function($){return X.includes($)}))})),tt=(0,je.Z)(et);try{for(tt.s();!(Ke=tt.n()).done;){var nt=Ke.value;try{var it=fe.getValue(nt);if("steps"===nt)Jz(fe,Ue,nt,ee);else if("colors"===nt)Kz(fe,Ue,nt,ee);else if("number"==typeof it)jz(fe,Ue,nt,ee);else{if("boolean"==typeof it)continue;"isVector2"in it?qz(fe,Ue,nt,ee):"isVector3"in it?Yz(fe,Ue,nt,ee):"isColorA"in it?Qz(fe,Ue,nt,ee,ne):"isColor"in it?Xz(fe,Ue,nt,ee,ne):"isTexture"in it&&Zz(fe,Ue,nt,ee)}}catch(it){console.error("animateMaterial: unexpected material layer for ".concat(nt),it)}}}catch(ct){tt.e(ct)}finally{tt.f()}}fe=fe.next}}(Ke,et,ae,ne)}}else X.visible&&function O1(X){return zV(X)&&("LightDirectional"===X.objectType||"LightSpot"===X.objectType||"LightPoint"===X.objectType)}(X)?function hT(X,$,ee,ne){if(void 0!==$.intensity){var ae=X.intensity,de=$.intensity;ae!==de&&ee.push({change:function change($){X.intensity=da.lerp(ae,de,$)}})}if(void 0!==$.color){var fe=X.color.clone(),Ue="string"==typeof $.color?ne.getColor($.color):$.color;if(!sD.equals(fe,Ue)){var je=fe.clone();X.color=je,ee.push({change:function change(X){var $=sD.lerp(fe,Ue,X),ee=$.r,ne=$.g,ae=$.b;je.setRGB(ee,ne,ae)}})}}}(X,ee.objectState,ae,ne):function N1(X){return"CombinedCamera"===X.objectType}(X)&&function lT(X,$,ee){var ne,ae,de="OrthographicCamera"===X.cameraType?null==(ne=$.orthographic)?void 0:ne.zoom:null==(ae=$.perspective)?void 0:ae.zoom;if(void 0!==de){var fe=X.zoom;fe!==de&&ee.push({change:function change($){X.zoom=da.lerp(fe,de,$),X.updateProjectionMatrix()}})}if(void 0!==$.targetOffset){var Ue=X.targetOffset,je=$.targetOffset;Ue!==je&&ee.push({change:function change($){X.targetOffset=da.lerp(Ue,je,$)}})}}(X,ee.objectState,ae);return ae.length?{change:function change(X){ae.forEach((function($){$.change&&$.change(X)}))}}:void 0}function nG(X,$,ee){switch(X){case 0:return"cubicBezier( 0, 0, 1, 1 )";case 1:return"cubicBezier( .25, .1, .25, 1 )";case 2:return"cubicBezier( .42, 0, 1, 1 )";case 3:return"cubicBezier( 0, 0, .58, 1 )";case 4:return"cubicBezier( .42, 0, .58, 1 )";case 5:var ne=null!=$?$:Ct({},fD.defaultData),ae=ne.control1,de=ne.control2;return"cubicBezier( ".concat(ae[0],", ").concat(ae[1],", ").concat(de[0],", ").concat(de[1]," )");case 6:var fe=null!=ee?ee:Ct({},dD.defaultData),Ue=fe.mass,je=fe.stiffness,Ke=fe.damping,et=fe.velocity;return"spring( ".concat(Ue,", ").concat(je,", ").concat(Ke,", ").concat(et," )")}}var Tq=function(){function sm(X,$){_classCallCheck(this,sm),this.object=X,this.sharedAssets=$,this.uuid=da.generateUUID(),this.states=[],this.events={},this.animatingState=0,this._scrollCounter=null}return _createClass(sm,[{key:"fromState",get:function get(){return this._fromState}},{key:"animation",get:function get(){return this._animation}},{key:"start",value:function start(){void 0!==this._animation&&(this._animation.pause(),this._animation=void 0,this._scrollCounter=null),this.states.length>1&&(this.states[0].execute(this.object,this.sharedAssets),this._toState=this.states[0],this._fromState=void 0)}},{key:"end",value:function end(){void 0!==this._animation&&(this._animation.pause(),this._animation=void 0),this.states.length>1&&this.states[0].execute(this.object,this.sharedAssets),this._toState=void 0,this._fromState=void 0}},{key:"seek",value:function seek(X,$,ee,ne,ae){var de;null===this._scrollCounter&&(this.animate(X,ne,ae),this._scrollCounter=0),this._scrollCounter+=$,this._scrollCounter=Math.min(Math.max(this._scrollCounter,0),ee),null==(de=this._animation)||de.seek(this._scrollCounter/ee*(ne.duration?ne.duration:1))}},{key:"animate",value:function animate(X,$,ee){var ne,ae,de,fe,Ue,je,Ke=this,et=$,tt=et.autoplay,nt=void 0===tt||tt,it=Et(et,["autoplay"]);if(this._fromState===X&&(null==(ne=this._animation)?void 0:ne.reversed)){var ct=null!=(de=null==(ae=this._animation)?void 0:ae.currentTime)?de:0;null==(fe=this._animation)||fe.reset(),null==(Ue=this._animation)||Ue.seek(ct),null==(je=this._animation)||je.play()}else if(this._toState!==X){void 0!==this._animation&&this._animation.pause(),this.animatingState=0,this._fromState=this._toState,this._toState=X;var dt=gT(this.object,this._fromState,X,this.sharedAssets);if(!dt)return;var vt={t:0};this._animation=Sq({autoplay:nt,loop:!!it.repeat||!!it.cycle&&1,direction:it.cycle?"alternate":"normal",rewind:it.rewind,delay:it.delay,endDelay:it.delay,duration:it.duration,easing:nG(it.easing,it.cubicControls,it.springParameters),targets:vt,t:1,change:function change(){dt.change&&dt.change(vt.t),null!=ee&&ee.change&&ee.change(vt.t)},loopBegin:function loopBegin($){0!==Ke.animatingState?$.reversed?(Ke._toState=Ke._fromState,Ke._fromState=X):(Ke._fromState=Ke._toState,Ke._toState=X):Ke.animatingState=1}}),nt&&this._animation.finished.then((function(){Ke._animation=void 0,Ke.animatingState=0}))}}},{key:"emitEvent",value:function emitEvent(X){var $;if("keyDown"===X||"keyUp"===X||"mouseDown"===X||"mouseUp"===X||"mouseHover"===X||"scroll"===X||"start"===X){var ee=this.events[X];if(ee){var ne,ae=(0,je.Z)(ee);try{for(ae.s();!(ne=ae.n()).done;){var de=ne.value;if("targets"in de){var fe,Ue=(0,je.Z)(de.targets);try{for(Ue.s();!(fe=Ue.n()).done;){var Ke=fe.value,et=Ke.object,tt=Ke.state,nt=Ke.params;null==($=et.interaction)||$.animate(tt,nt)}}catch(it){Ue.e(it)}finally{Ue.f()}}}}catch(it){ae.e(it)}finally{ae.f()}}}}},{key:"emitEventReverse",value:function emitEventReverse(X){if("keyDown"===X||"keyUp"===X||"mouseDown"===X||"mouseUp"===X||"mouseHover"===X||"scroll"===X||"start"===X){var $=this.events[X];if($){var ee,ne=(0,je.Z)($);try{for(ne.s();!(ee=ne.n()).done;){var ae=ee.value;if("targets"in ae){var de,fe=(0,je.Z)(ae.targets);try{for(fe.s();!(de=fe.n()).done;){var Ue=de.value,Ke=Ue.object,et=Ue.params,tt=Ke.interaction;void 0!==(null==tt?void 0:tt._fromState)&&tt.animate(tt._fromState,et)}}catch(nt){fe.e(nt)}finally{fe.f()}}}}catch(nt){ne.e(nt)}finally{ne.f()}}}}}]),sm}(),Pq=function(){function gc(X,$,ee){_classCallCheck(this,gc),this.object=X,this.state=$,this.params=ee}return _createClass(gc,null,[{key:"create",value:function create(X,$){if(X.object){var ee=$.find(X.object);if(null!=ee&&ee.interaction){var ne=X.state?ee.interaction.states.find((function($){return $.uuid===X.state})):ee.interaction.states[0];if(ne){var de={cycle:X.cycle,rewind:X.rewind,repeat:X.repeat,duration:X.duration,delay:X.delay,easing:X.easing};if(5===X.easing){var fe=X;de.cubicControls={control1:(0,ae.Z)(fe.control1),control2:(0,ae.Z)(fe.control2)}}if(6===X.easing){var Ue=X;de.springParameters={mass:Ue.mass,stiffness:Ue.stiffness,damping:Ue.damping,velocity:Ue.velocity}}return new gc(ee,ne,de)}}}}}]),gc}(),Dq=new Map,Lq={url:"head",time:0,data:null,next:null,prev:null},Oq={url:"tail",time:1/0,data:null,next:null,prev:null};Lq.next=Oq,Oq.prev=Lq;var Rq=0;function co(X){if("string"==typeof X)return X;var $=Date.now(),ee=Dq.get(X);return void 0===ee?(ee={url:URL.createObjectURL(new Blob([X])),data:X,time:$,next:null,prev:null},Dq.set(X,ee)):(ee.time=$,ee.prev.next=ee.next,ee.next.prev=ee.prev),ee.prev=Oq.prev,ee.next=Oq,Oq.prev.next=ee,Oq.prev=ee,$-Rq>1e4&&(Rq=$+1e3,setTimeout((function(){for(var X=Date.now(),$=Lq.next;$.time<X-1e4;)URL.revokeObjectURL($.url),Dq.delete($.data),($=$.next).prev=Lq,Lq.next=$}),900)),ee.url}var Bq=new kV,Iq=function(X){_inherits(ra,X);var $=_createSuper(ra);function ra(){return _classCallCheck(this,ra),$.apply(this,arguments)}return _createClass(ra)}($N),zq=function(){function om(X){_classCallCheck(this,om),this.materials={},this.images={},this.colors={},this.transmissionRenderTarget=new ro(2048,2048,{generateMipmaps:!0,minFilter:wn,magFilter:_n,wrapS:dn,wrapT:dn}),this.transmissionRenderTarget.depthTexture=new Gp(2048,2048),this.reset(X)}return _createClass(om,[{key:"reset",value:function reset(X){for(var $=0,ee=Object.entries(X.images);$<ee.length;$++){var ne=(0,fe.Z)(ee[$],2),ae=ne[0],de=ne[1];this.addImage(ae,de.data)}for(var Ue=0,je=Object.entries(X.colors);Ue<je.length;Ue++){var Ke=(0,fe.Z)(je[Ue],2),et=Ke[0],tt=Ke[1];this.addColor(et,tt)}for(var nt=0,it=Object.entries(X.materials);nt<it.length;nt++){var ct=(0,fe.Z)(it[nt],2),dt=ct[0],vt=ct[1];this.addMaterial(dt,Tv(vt,this))}}},{key:"transmissionSamplerMap",get:function get(){return this.transmissionRenderTarget.texture}},{key:"transmissionDepthMap",get:function get(){return this.transmissionRenderTarget.depthTexture}},{key:"addMaterial",value:function addMaterial(X,$){$.uuid=X,this.materials[X]=$}},{key:"deleteMaterial",value:function deleteMaterial(X){this.materials[X]&&(this.materials[X].dispose(),delete this.materials[X])}},{key:"isSharedMaterial",value:function isSharedMaterial(X){return X.uuid in this.materials||X===Bq}},{key:"getMaterial",value:function getMaterial(X){return this.materials[X]}},{key:"getMaterialOrDeletedPlaceholder",value:function getMaterialOrDeletedPlaceholder(X){var $;return null!=($=this.materials[X])?$:Bq}},{key:"getMaterials",value:function getMaterials(){return this.materials}},{key:"addImage",value:function addImage(X,$){var ee=this;if(this.images[X])return this.images[X].onload=function(){ee.onImageLoad&&ee.onImageLoad()},this.images[X].src=co($),!0;var ne=new Image;return ne.src=co($),ne.onload=function(){ee.onImageLoad&&ee.onImageLoad()},this.images[X]=ne,!1}},{key:"deleteImage",value:function deleteImage(X){this.images[X]&&delete this.images[X]}},{key:"getDefaultImage",value:function getDefaultImage(){return this.images.image_0}},{key:"getImage",value:function getImage(X){return this.images[X]}},{key:"getImages",value:function getImages(){return this.images}},{key:"addColor",value:function addColor(X,$){return this.colors[X]?("a"in $?this.colors[X].setRGBA($.r,$.g,$.b,$.a):this.colors[X].setRGBA($.r,$.g,$.b,1),!0):(this.colors[X]=new Iq($.r,$.g,$.b,"a"in $?$.a:1),!1)}},{key:"updateColor",value:function updateColor(X,$){var ee,ne,ae,de;if(this.colors[X]){var fe=this.colors[X];return this.colors[X].r=null!=(ee=$.r)?ee:fe.r,this.colors[X].g=null!=(ne=$.g)?ne:fe.g,this.colors[X].b=null!=(ae=$.b)?ae:fe.b,this.colors[X].a=null!=(de=$.a)?de:fe.a,!0}return!1}},{key:"deleteColor",value:function deleteColor(X){this.colors[X]&&delete this.colors[X]}},{key:"getColor",value:function getColor(X){return this.colors[X]}},{key:"dispose",value:function dispose(){var X=this;Object.keys(this.materials).forEach((function($){return X.deleteMaterial($)})),this.transmissionRenderTarget.depthTexture.dispose(),this.transmissionRenderTarget.dispose(),this.onImageLoad=void 0}}]),om}();function dx(X,$,ee,ne,ae){for(var de,Ue=!1,je=function _loop12(){var X=(0,fe.Z)(et[Ke],2),ne=X[0],de=X[1];if(!ne||void 0===de||Np(ne,ee,ae))return"continue";ee.visible=ae.visible;var je=ee.uniforms["f".concat(ee.id,"_").concat(ne)];if(je)switch(je.constructor){case IU:if("string"==typeof de){var tt=$.getColor(de);tt&&(je.value=tt);break}var nt=de;je.value instanceof Iq?je.value=new $N(nt.r,nt.g,nt.b,nt.a):je.setRGBA(nt);break;case eF:if("string"==typeof de){var it=$.getColor(de);it&&(je.value=it);break}var ct=de;je.value instanceof Iq?je.value=new $N(ct.r,ct.g,ct.b,ct.a):je.value.setRGBA(ct.r,ct.g,ct.b,ct.a);break;case QN:var dt=de;je.value.setX(dt[0]),je.value.setY(dt[1]);break;case KN:var vt=de;je.value.setX(vt[0]),je.value.setY(vt[1]),je.value.setZ(vt[2]);break;case oU:var gt=de;if("image"in gt){var yt=gt.image;if("string"==typeof yt){var _t=$.getImage(yt);_t&&(je.value.image=_t)}else{var wt=new Image;wt.src=co(yt.data),je.value.image=wt}}"wrapping"in gt&&(je.value.wrapS=je.value.wrapT=gt.wrapping),"repeat"in gt&&je.value.repeat.fromArray(gt.repeat),"offset"in gt&&je.value.offset.fromArray(gt.offset),je.value.needsUpdate=!0;break;case UU:de.forEach((function(X,$){je.value[$].setX(X[0]),je.value[$].setY(X[1]),je.value[$].setZ(X[2]),je.value[$].setW(X[3])}));break;default:Ue=Ue||function iG(X,$){switch(X.type){case"noise":case"displace":return"noiseType"===$;case"texture":return"projection"===$||"axis"===$||"side"===$;case"depth":return"num"===$||"smooth"===$||"isWorldSpace"===$||"gradientType"===$;default:return!1}}(ee,ne),je.value=de}},Ke=0,et=Object.entries(X);Ke<et.length;Ke++)je();if(Ue&&ae){var tt=Bp({id:"0",fi:0,data:ae},$);null==(de=ne.userData.layers)||de.changeLayer(ee.id,Ct({},tt)),ne.dispose(),ne.needsUpdate=!0}}var Nq,Fq=new wo,Uq=new Sd,Vq=new Ds,Hq={type:"follow",normal:new wo,raycaster:new kB};!function(X){X.create=function i(X){if(10===X.type)return{type:"follow"}},X.listener=function e(X){var $=X.target,ee=X.normal,ne=X.raycaster,ae=X.begin,de=X.change;!$||!ee||!ne||(ae&&ae("follow",$.uuid),Uq.setFromNormalAndCoplanarPoint(ee,$.getWorldPosition(Fq)),ne.ray.intersectPlane(Uq,Fq),$.position.copy(Fq),null!==$.parent&&$.position.applyMatrix4(Vq.copy($.parent.matrixWorld).invert()),$.position.applyMatrix4(Vq.copy($.hiddenMatrix).invert()),$.updateMatrix(),NV($)&&FV($.parent)&&$.invalidateDownstreamBooleanData(!0),de&&de())}}(Nq||(Nq={}));var jq,Gq=new wo,Wq=new Sd,qq={type:"lookAt",normal:new wo,raycaster:new kB};!function(X){X.create=function i(X){if(9===X.type&&X.distance)return{type:"lookAt",distance:X.distance}},X.listener=function e(X){var $,ee,ne,ae=X.target,de=X.normal,fe=X.raycaster,Ue=X.begin,je=X.change;if(null!=(ee=null==($=null==ae?void 0:ae.interaction)?void 0:$.events.lookAt)&&ee.length&&de&&fe){Ue&&Ue("lookAt",ae.uuid);var Ke=ae.interaction.events.lookAt[0].distance;Wq.set(de,-Ke),fe.ray.intersectPlane(Wq,Gq),ae.lookAt(Gq),ae.updateMatrix(),null==(ne=ae.interaction.animation)||ne.finished.then((function(){ae.lookAt(Gq),ae.updateMatrix(),NV(ae)&&FV(ae.parent)&&ae.invalidateDownstreamBooleanData(!0)})),NV(ae)&&FV(ae.parent)&&ae.invalidateDownstreamBooleanData(!0),je&&je()}}}(jq||(jq={}));var Yq,Jq={type:"start"};!function(X){X.create=function i(X){if(7===X.type)return{type:"start",targets:[]}},X.listener=function e(X){var $,ee,ne=X.target,ae=X.begin,de=X.change;if(null!=(ee=null==($=null==ne?void 0:ne.interaction)?void 0:$.events.start)&&ee.length){ae&&ae("start",ne.uuid);var fe={change:de};ne.interaction.events.start.forEach((function(X){X.targets.forEach((function(X){var $,ee=X.object,ne=X.state,ae=X.params;return null==($=ee.interaction)?void 0:$.animate(ne,ae,fe)}))}))}}}(Yq||(Yq={}));var Zq,Xq={type:"scroll"};!function(X){X.create=function i(X){if(11===X.type&&void 0!==X.steps)return{type:"scroll",targets:[],steps:X.steps}},X.listener=function e(X){var $,ee,ne=X.target,ae=X.deltaY,de=X.begin,fe=X.change;if(null!=(ee=null==($=null==ne?void 0:ne.interaction)?void 0:$.events.scroll)&&ee.length&&ae){de&&de("scroll",ne.uuid);var Ue={change:fe},je=ae>0?1:-1;ne.interaction.events.scroll.forEach((function(X){X.targets.forEach((function($){var ee,ne=$.object,ae=$.state,de=$.params,fe=At(Ct({},de),{autoplay:!1,cycle:!1,rewind:!1,repeat:!1});null==(ee=ne.interaction)||ee.seek(ae,je,X.steps,fe,Ue)}))}))}}}(Zq||(Zq={}));var Qq,Kq={type:"mouseHover"};!function(X){X.create=function i(X){if(2===X.type)return{type:"mouseHover",targets:[]}},X.listener=function e(X){var $,ee,ne=X.target,ae=X.begin,de=X.change,fe=X.enter;if(null!=(ee=null==($=null==ne?void 0:ne.interaction)?void 0:$.events.mouseHover)&&ee.length&&void 0!==fe){ae&&ae("mouseHover",ne.uuid);var Ue={change:de};fe?ne.interaction.events.mouseHover.forEach((function(X){X.targets.forEach((function(X){var $,ee=X.object,ne=X.state,ae=X.params;null==($=ee.interaction)||$.animate(ne,ae,Ue)}))})):ne.interaction.events.mouseHover.forEach((function(X){X.targets.forEach((function(X){var $=X.object,ee=X.params,ne=$.interaction;void 0!==(null==ne?void 0:ne.fromState)&&ne.animate(ne.fromState,ee,Ue)}))}))}}}(Qq||(Qq={}));var $q,eY={type:"mouseDown"},tY={type:"mouseUp"},nY={type:"keyDown"},rY={type:"keyUp"};function sG(X){var $,ee=X.type;return 10===ee?$=Nq.create(X):0===ee||1===ee||5===ee||6===ee?$=$q.create(X):9===ee?$=jq.create(X):2===ee?$=Qq.create(X):11===ee?$=Zq.create(X):7===ee&&($=Yq.create(X)),$}function ST(X,$,ee){var ne=[];X.objects.traverse((function(X,ae){var de=$.find(X);if(delete de.interaction,(ae.visible||FV(de.parent))&&void 0!==ae.states){var fe=new Tq(de,ee),Ue=fe.states;Ue.push(iY.create(X,ae));var Ke,et=(0,je.Z)(ae.states);try{for(et.s();!(Ke=et.n()).done;){var tt=Ke.value,nt=NR.patch(ae,tt.data);Ue.push(iY.create(tt.id,nt))}}catch(_t){et.e(_t)}finally{et.f()}var it=fe.events;if(ae.events){var ct,dt=(0,je.Z)(ae.events);try{for(dt.s();!(ct=dt.n()).done;){var vt=ct.value.data,gt=sG(vt);if(gt){var yt=gt.type;it[yt]?it[yt].push(gt):it[yt]=[gt],"targets"in vt&&ne.push([vt,gt])}}}catch(_t){dt.e(_t)}finally{dt.f()}}(Ue.length>0||Object.keys(it).length>0)&&(de.interaction=fe,xx(de,ae,null,ee))}}));for(var ae=0,de=ne;ae<de.length;ae++){var Ue=(0,fe.Z)(de[ae],2),Ke=Ue[0],et=Ue[1];if("targets"in Ke&&"targets"in et){var tt,nt=(0,je.Z)(Ke.targets);try{for(nt.s();!(tt=nt.n()).done;){var it=tt.value.data,ct=Pq.create(it,$);ct&&et.targets.push(ct)}}catch(dt){nt.e(dt)}finally{nt.f()}}}}function xx(X,$,ee,ne){var ae=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(ae||0!==$.states.length){var de=null===ee?$:NR.patch($,$.states.data(ee));if(Ev(X,de),X instanceof $V&&"Mesh"===de.type){if(X instanceof $j?X.buildFromStore(de.geometry):X.updateGeometry({parameters:de.geometry}),X.freeBooleanPointer(),FV(X.parent)&&X.parent.invalidateDownstreamBooleanData().recomputeBoolean(),"material"in de){if(X.material instanceof Array)return;if("string"!=typeof de.material){var fe,Ue=de.material.layers,Ke=(0,je.Z)(Ue);try{for(Ke.s();!(fe=Ke.n()).done;){var et=fe.value,tt=X.material.userData.layers.getLayerByUuid(et.id);dx(et.data,ne,tt,X.material,et.data)}}catch(Ct){Ke.e(Ct)}finally{Ke.f()}}}else if("materials"in de){if(!(X.material instanceof Array))return;var nt,it=0,ct=(0,je.Z)(de.materials);try{for(ct.s();!(nt=ct.n()).done;){var dt=nt.value;if("string"!=typeof dt){var vt,gt=dt.layers,yt=(0,je.Z)(gt);try{for(yt.s();!(vt=yt.n()).done;){var _t=vt.value,wt=X.material[it].userData.layers.getLayerByUuid(_t.id);dx(_t.data,ne,wt,X.material[it],_t.data)}}catch(Ct){yt.e(Ct)}finally{yt.f()}}it++}}catch(Ct){ct.e(Ct)}finally{ct.f()}}}else if("DirectionalLight"===de.type)X.fromDirectionalLightState(de,ne);else if("PointLight"===de.type)X.fromPointLightState(de,ne);else if("SpotLight"===de.type)X.fromSpotLightState(de,ne);else if(X instanceof VH&&qP.is(de.type)){var St=de;X.setZoom("PerspectiveCamera",St.perspective.zoom),X.setZoom("OrthographicCamera",St.orthographic.zoom)}}}!function(X){X.create=function i(X){var $,ee,ne,ae;if(0===X.type)ne={type:"mousedown"},ae="mouseDown";else if(1===X.type)ne={type:"mouseup"},ae="mouseUp";else if(5===X.type){if(!X.key)return;ne={type:"keydown",key:X.key},ae="keyDown"}else{if(6!==X.type)return;if(!X.key)return;ne={type:"keyup",key:X.key},ae="keyUp"}return{type:ae,domEvent:ne,targets:[],url:null!=($=X.url)?$:void 0,toggle:null!=(ee=X.toggle)&&ee,enable:!1}},X.listener=function e(X){var $,ee=X.target,ne=X.interactionEvents,ae=X.type,de=X.begin,fe=X.change;if(ee){ne||(ne=null==($=ee.interaction)?void 0:$.events[ae]),de&&de(ae,ee.uuid);var Ue={change:fe};ne.forEach((function(X){if(X.toggle){X.enable=!X.enable;var $,ee=(0,je.Z)(X.targets);try{for(ee.s();!($=ee.n()).done;){var ne=$.value,ae=ne.object,de=ne.state,fe=ne.params,Ke=ae.interaction;if(void 0!==Ke){var et=At(Ct({},fe),{cycle:!1,rewind:!1,repeat:!1});X.enable?Ke.animate(de,et,Ue):void 0!==Ke.fromState&&Ke.animate(Ke.fromState,et,Ue)}}}catch(tt){ee.e(tt)}finally{ee.f()}}else X.targets.forEach((function(X){var $,ee=X.object,ne=X.state,ae=X.params;return null==($=ee.interaction)?void 0:$.animate(ne,ae,Ue)}));X.url&&(xD?window.location.assign(X.url):window.open(X.url,"_blank"))}))}}}($q||($q={}));var iY=function(){function na(X){_classCallCheck(this,na),this.objectState=X,this.uuid=da.generateUUID()}return _createClass(na,[{key:"execute",value:function execute(X,$){xx(X,this.objectState,null,$,!0)}}],[{key:"create",value:function create(X,$){var ee=new na($);return ee.uuid=X,ee}}]),na}(),aY=new kB,oY=new wo,sY={follow:Nq.listener,keyDown:$q.listener,keyUp:$q.listener,lookAt:jq.listener,mouseDown:$q.listener,mouseUp:$q.listener,mouseHover:Qq.listener,scroll:Zq.listener,start:Yq.listener},lY={follow:Hq,keyDown:nY,keyUp:rY,lookAt:qq,mouseDown:eY,mouseUp:tY,mouseHover:Kq,scroll:Xq,start:Jq};function AT(X){var $=X.getViewport(new to),ee=function oG(X){if(""!==X.style.transform){var $=getComputedStyle(X).getPropertyValue("transform");if("none"!==$){var ee=$.replace("matrix(","").split(",");return{x:parseFloat(ee[0]),y:parseFloat(ee[3])}}}return{x:1,y:1}}(X.domElement);return{left:$.x*ee.x,top:$.y*ee.y,width:$.z*ee.x,height:$.w*ee.y}}function wx(X,$){if(NV($)){if(!$.raycastLock&&$.visible){var ee=X.intersectObject($,!1);return ee.length?ee[0]:void 0}}else if("EmptyObject"===$.objectType)return TT(X,$)}function TT(X,$){if(NV($)&&!$.raycastLock&&$.visible){var ee=X.intersectObject($,!1);if(ee.length)return ee[0]}var ne,ae=(0,je.Z)($.children);try{for(ae.s();!(ne=ae.n()).done;){var de=ne.value;if(zV(de)){var fe=TT(X,de);if(fe)return fe}}}catch(Ue){ae.e(Ue)}finally{ae.f()}}var uY=function(){function hm(X,$,ee,ne){var ae=this;_classCallCheck(this,hm),this.isEnable=!1,this.splineEvents={},this._map={},this._prevObjects=[],this._onMouseDown=function(X){aY.setFromCamera(ae._getPointer(X.clientX,X.clientY),ae._camera),ae._camera.getWorldDirection(oY),oY.negate(),ae._handleMouseDownEvent(X)},this._onMouseUp=function(X){aY.setFromCamera(ae._getPointer(X.clientX,X.clientY),ae._camera),ae._camera.getWorldDirection(oY),oY.negate(),ae._handleMouseUpEvent(X)},this._onMouseMove=function(X){aY.setFromCamera(ae._getPointer(X.clientX,X.clientY),ae._camera),ae._camera.getWorldDirection(oY),oY.negate(),ae._handleMouseHoverEvent(X),ae._handleLookAtEvent(X),ae._handleFollowEvent(X)},this._onTouchStart=function(X){1===X.touches.length&&(aY.setFromCamera(ae._getPointer(X.touches[0].clientX,X.touches[0].clientY),ae._camera),ae._camera.getWorldDirection(oY),oY.negate(),ae._handleMouseDownEvent(X),ae._handleMouseHoverEvent(X),ae._handleLookAtEvent(X),ae._handleFollowEvent(X))},this._onTouchEnd=function(X){ae._handleMouseUpEvent(X),ae._handleMouseHoverEvent(X,!0)},this._onTouchMove=function(X){1===X.touches.length&&(aY.setFromCamera(ae._getPointer(X.touches[0].clientX,X.touches[0].clientY),ae._camera),ae._camera.getWorldDirection(oY),oY.negate(),ae._handleMouseHoverEvent(X),ae._handleLookAtEvent(X),ae._handleFollowEvent(X))},this._onWheel=function(X){ae._handleWheelEvent(X)},this._onKeyDown=function(X){ae._handleKeyDownEvent(X)},this._onKeyUp=function(X){ae._handleKeyUpEvent(X)},this._renderer=X,this._domElement=X.domElement,this._camera=ee,this._scene=$,this._app=ne,this._domRect=this._domElement.getBoundingClientRect(),this._viewRect=AT(X)}return _createClass(hm,[{key:"activate",value:function activate(){var X,$,ee,ne,ae,de,fe,Ue,je,Ke,et,tt,nt,it,ct,dt,vt,gt,yt=this;this.isEnable=!0,this._map={},this._scene.traverseEntity((function(X){void 0!==X.interaction&&(X.interaction.start(),Object.keys(X.interaction.events).forEach((function($){var ee=$;yt._addDOMCustomEvent(ee,X),(X.visible||"mouseDown"!==ee&&"mouseUp"!==ee&&"mouseHover"!==ee)&&yt._addSPEEvent(ee,X)})))})),wD?(((null==(X=this._map.mouseDown)?void 0:X.length)||(null==($=this._map.mouseHover)?void 0:$.length)||(null==(ee=this._map.lookAt)?void 0:ee.length)||(null==(ne=this._map.follow)?void 0:ne.length))&&this._domElement.addEventListener("touchstart",this._onTouchStart),((null==(ae=this._map.mouseUp)?void 0:ae.length)||(null==(de=this._map.mouseHover)?void 0:de.length))&&this._domElement.addEventListener("touchend",this._onTouchEnd),((null==(fe=this._map.mouseHover)?void 0:fe.length)||(null==(Ue=this._map.lookAt)?void 0:Ue.length)||(null==(je=this._map.follow)?void 0:je.length))&&this._domElement.addEventListener("touchmove",this._onTouchMove)):(null!=(Ke=this._map.mouseDown)&&Ke.length&&this._domElement.addEventListener("pointerdown",this._onMouseDown),null!=(et=this._map.mouseUp)&&et.length&&this._domElement.addEventListener("pointerup",this._onMouseUp),((null==(tt=this._map.mouseHover)?void 0:tt.length)||(null==(nt=this._map.lookAt)?void 0:nt.length)||(null==(it=this._map.follow)?void 0:it.length))&&this._domElement.addEventListener("pointermove",this._onMouseMove)),null!=(ct=this._map.scroll)&&ct.length&&this._domElement.addEventListener("wheel",this._onWheel),null!=(dt=this._map.keyDown)&&dt.length&&document.addEventListener("keydown",this._onKeyDown),null!=(vt=this._map.keyUp)&&vt.length&&document.addEventListener("keyup",this._onKeyUp),null!=(gt=this._map.start)&&gt.length&&this._handleStartEvent(),this.resize()}},{key:"deactivate",value:function deactivate(){this._scene.traverseEntity((function(X){if(X.interaction){X.interaction.end();var $=X;Object.keys(sY).forEach((function(X){var ee=X;$.removeEventListener(ee,sY[ee])}))}})),this._domElement.removeEventListener("pointerdown",this._onMouseDown),this._domElement.removeEventListener("pointerup",this._onMouseUp),this._domElement.removeEventListener("pointermove",this._onMouseMove),this._domElement.removeEventListener("touchstart",this._onTouchStart),this._domElement.removeEventListener("touchend",this._onTouchEnd),this._domElement.removeEventListener("touchmove",this._onTouchMove),this._domElement.removeEventListener("wheel",this._onWheel),document.removeEventListener("keydown",this._onKeyDown),document.removeEventListener("keyup",this._onKeyUp),this._map={},this.isEnable=!1}},{key:"reset",value:function reset(){this._scene.traverseEntity((function(X){var $;null==($=X.interaction)||$.start()})),this._handleStartEvent()}},{key:"resize",value:function resize(){this._domRect=this._domElement.getBoundingClientRect(),this._viewRect=AT(this._renderer)}},{key:"_getPointer",value:function _getPointer(X,$){var ee=this._domRect,ne=this._viewRect,ae=ee.height-ne.height,de=(X-ne.left-ee.left)*(ee.width/ne.width),fe=($-ae+ne.top-ee.top)*(ee.height/ne.height);return{x:de/ee.width*2-1,y:-fe/ee.height*2+1}}},{key:"_handleStartEvent",value:function _handleStartEvent(){var X;null==(X=this._map.start)||X.forEach((function(X){X.dispatchEvent(Jq)}))}},{key:"_handleWheelEvent",value:function _handleWheelEvent(X){var $;null!=($=this._map.scroll)&&$.length&&(Xq.deltaY=X.deltaY,this._map.scroll.forEach((function(X){X.dispatchEvent(Xq)})))}},{key:"_handleMouseDownEvent",value:function _handleMouseDownEvent(X){var $;null==($=this._map.mouseDown)||$.forEach((function(X){wx(aY,X)&&X.dispatchEvent(eY)}))}},{key:"_handleMouseUpEvent",value:function _handleMouseUpEvent(X){var $;null==($=this._map.mouseUp)||$.forEach((function(X){wx(aY,X)&&X.dispatchEvent(tY)}))}},{key:"_handleMouseHoverEvent",value:function _handleMouseHoverEvent(X){var $,ee=arguments.length>1&&void 0!==arguments[1]&&arguments[1],ne=[];ee||null==($=this._map.mouseHover)||$.forEach((function(X){wx(aY,X)&&ne.push(X)})),this._prevObjects.length&&(Kq.enter=!1,this._prevObjects.forEach((function(X){ne.includes(X)||X.dispatchEvent(Kq)}))),ne.length&&(Kq.enter=!0,ne.forEach((function(X){X.dispatchEvent(Kq)}))),this._prevObjects=ne}},{key:"_handleLookAtEvent",value:function _handleLookAtEvent(X){var $;null!=($=this._map.lookAt)&&$.length&&(qq.normal=oY,qq.raycaster=aY,this._map.lookAt.forEach((function(X){X.dispatchEvent(qq)})))}},{key:"_handleFollowEvent",value:function _handleFollowEvent(X){this._map.follow&&(Hq.normal=oY,Hq.raycaster=aY,this._map.follow.forEach((function(X){return X.dispatchEvent(Hq)})))}},{key:"_handleKeyDownEvent",value:function _handleKeyDownEvent(X){var $;null==($=this._map.keyDown)||$.forEach((function($){var ee,ne,ae;nY.interactionEvents=null==(ae=null==(ne=null==(ee=$.interaction)?void 0:ee.events)?void 0:ne.keyDown)?void 0:ae.filter((function($){return"keydown"===$.domEvent.type&&$.domEvent.key===X.key})),$.dispatchEvent(nY)}))}},{key:"_handleKeyUpEvent",value:function _handleKeyUpEvent(X){var $;null==($=this._map.keyUp)||$.forEach((function($){var ee,ne,ae;rY.interactionEvents=null==(ae=null==(ne=null==(ee=$.interaction)?void 0:ee.events)?void 0:ne.keyUp)?void 0:ae.filter((function($){return"keyup"===$.domEvent.type&&$.domEvent.key===X.key})),$.dispatchEvent(rY)}))}},{key:"_addSPEEvent",value:function _addSPEEvent(X,$){var ee;!$.interaction||(lY[X].begin=this._dispatchDOMCustomEvent.bind(this),lY[X].change=this._app.requestRender.bind(this),null!=(ee=$.interaction.events[X])&&ee.length&&($.addEventListener(X,sY[X]),void 0===this._map[X]?this._map[X]=[$]:this._map[X].push($)))}},{key:"_addDOMCustomEvent",value:function _addDOMCustomEvent(X,$){if(X){var ee=new CustomEvent(X,{bubbles:!0});Object.defineProperty(ee,"target",{writable:!1,value:{id:$.uuid,name:$.name}}),this.splineEvents[X]?this.splineEvents[X][$.uuid]=ee:this.splineEvents[X]=(0,ne.Z)({},$.uuid,ee)}}},{key:"_dispatchDOMCustomEvent",value:function _dispatchDOMCustomEvent(X,$){var ee,ne=null==(ee=this.splineEvents[X])?void 0:ee[$];ne&&this._domElement.dispatchEvent(ne)}}]),hm}(),cY=function(){function um(X,$,ee,ne,ae){_classCallCheck(this,um),this._aspect=1,this._renderer=X,this._camera=$,this._frameSize=(new va).copy(ee),this._editorSize=(new va).copy(ne),this._aspect=$.aspect,this._fov=null!=ae?ae:$.fov}return _createClass(um,[{key:"frameSize",set:function set(X){this._frameSize.copy(X)}},{key:"updateRenderer",value:function updateRenderer(){!this._renderer||this._renderer.setSize(this._frameSize.x,this._frameSize.y,!1)}},{key:"updateViewportForImageExport",value:function updateViewportForImageExport(){if(this._renderer&&this._camera&&"PerspectiveCamera"===this._camera.cameraType){var X=this._frameSize.x,$=this._frameSize.y,ee=this._editorSize.x,ne=this._editorSize.y;this._aspect=X/$,this._camera.zoom*=Math.min(ee/X,ne/$),this._renderer.setViewport(0,0,X,$)}}},{key:"updateViewport",value:function updateViewport(){if(this._renderer&&this._camera&&"PerspectiveCamera"===this._camera.cameraType){var X=this._frameSize.x,$=this._frameSize.y,ee=this._editorSize.x,ne=this._editorSize.y,ae=0,de=0,fe=X,Ue=$;X<ee&&(ae=-(ae=.5*(ee-X)),fe=ee),$<ne&&(de=-(de=.5*(ne-$)),Ue=ne),this._aspect=fe/Ue,this._renderer.setViewport(ae,de,fe,Ue)}}},{key:"updateCamera",value:function updateCamera(){if(this._camera)if("PerspectiveCamera"===this._camera.cameraType){var X=this._frameSize.y,$=this._editorSize.y,ee=this._fov;if(X>$){var ne=function aG(X,$,ee,ne,ae){return(X-$)/(ee-$)*(ae-ne)+ne}(X,1080,2160,1,15)/100;ee*=X/$,ee*=1-ne}this._camera.aspect=this._aspect,this._camera.fov=ee,this._camera.updateProjectionMatrix()}else this._camera.setViewplaneSize(this._frameSize.x,this._frameSize.y)}},{key:"revert",value:function revert(){var X=window.innerWidth,$=window.innerHeight;this._renderer&&(this._renderer.setViewport(0,0,X,$),this._renderer.setSize(X,$,!1)),this._camera&&(this._camera.aspect=X/$,this._camera.fov=this._fov,this._camera.setViewplaneSize(X,$),this._camera.updateProjectionMatrix())}}]),um}();var hY=function(){function fm(X){_classCallCheck(this,fm),this.sharedAssets=new zq(X.shared),this.scene=new sq(X.scene,this.sharedAssets),this.scene.switchActiveCamera(this.scene.activeCamera)}return _createClass(fm,[{key:"reset",value:function reset(X,$){this.scene.clearScene(this.sharedAssets),this.sharedAssets.reset(X.shared),this.scene.resetAfterClear(X.scene,this.sharedAssets)}},{key:"dispose",value:function dispose(){this.scene.dispose()}}]),fm}(),dY=function(){function dm(X){var $=X.x,ee=void 0===$?10:$,ne=X.y,ae=void 0===ne?10:ne;_classCallCheck(this,dm),this._startTime=0;var de=document.getElementById("spe-perfs");de?this.element=de:(this.element=document.createElement("div"),document.body.appendChild(this.element),this.element.style.position="absolute",this.element.style.zIndex="10000",this.element.style.fontFamily="monospace",this.element.style.background="black",this.element.style.color="white",this.element.style.padding="10px",this.element.style.opacity="0.5",this.element.style.fontSize="11px",this.element.setAttribute("id","spe-perfs")),this.element.style.left="".concat(ee,"px"),this.element.style.top="".concat(ae,"px")}return _createClass(dm,[{key:"dispose",value:function dispose(){var X;null==(X=this.element.parentElement)||X.removeChild(this.element)}},{key:"start",value:function start(){this._startTime=performance.now()}},{key:"end",value:function end(){var X=performance.now()-this._startTime;this.element.innerHTML=X.toFixed(3)+" ms"}}]),dm}();function lG(X){var $;if(X.index)for(var ee=0;ee<X.index.array.length;ee+=3)$=X.index.array[ee],X.index.array[ee]=X.index.array[ee+2],X.index.array[ee+2]=$}function Sx(X){return"SubdivObject"===X||"NonParametric"===X?X:"Mesh"}function ET(X,$){for(var ee=function cG(X,$){var ee={};return X.traverseEntity((function(X){var ne;if("Mesh"===X.type&&"material"in X&&X.visible&&X instanceof $V&&!Array.isArray(X.material)&&!(X&&X.interaction&&X.interaction.states.length>0)){for(var ae=X.parent;ae;){if(ae instanceof $V&&ae.interaction&&ae.interaction.states.length>1)return;ae=ae.parent}var de=X.material.uuid,fe=$.shared.materials[de];if(fe){if(!wR.isMergable(fe))return}else{var Ue=null==(ne=$.scene.objects.get(X.uuid))?void 0:ne.data;if(Ue&&"material"in Ue&&"string"!=typeof Ue.material){if(!wR.isMergable(Ue.material))return;de=wR.getHash(Ue.material)}}ee[de]||(ee[de]={});var Ke=ee[de][Sx(X.objectType)];if(Ke){if(Ke.push(X),X.cloner){var et,tt=(0,je.Z)(X.cloner.children);try{for(tt.s();!(et=tt.n()).done;){var nt=et.value;Ke.push(nt)}}catch(vt){tt.e(vt)}finally{tt.f()}}}else if(ee[de][Sx(X.objectType)]=[X],X.cloner){var it,ct=(0,je.Z)(X.cloner.children);try{for(ct.s();!(it=ct.n()).done;){var dt=it.value;ee[de][Sx(X.objectType)].push(dt)}}catch(vt){ct.e(vt)}finally{ct.f()}}}})),ee}($,X),ne=function hG(X){var $=0;return Object.values(X).forEach((function(X){Object.values(X).forEach((function(X){var ee=X.length;ee>$&&($=ee)}))})),$}(ee),ae=new Array(ne),de=0,fe=new Array(ne),Ue=0,Ke=new Array(ne),et=0,tt=new Array(ne),nt=0,it=0,ct=Object.values(ee);it<ct.length;it++)for(var dt=ct[it],vt=0,gt=Object.values(dt);vt<gt.length;vt++){var yt=gt[vt];if(Ue=0,et=0,yt.forEach((function(X){X instanceof $V&&(fe[Ue++]=X.geometry.clone(),Ke[et++]=X)})),!(et<2)){for(var _t=0;_t<et;_t++)Ke[_t].updateWorldMatrix(!0,!1),fe[_t].applyMatrix4(Ke[_t].matrixWorld),Ke[_t].matrixWorld.determinant()<0&&lG(fe[_t]);var wt=RM(fe.slice(0,Ue),!1);wt&&function(){var X=void 0;if("SubdivObject"===yt[0].objectType)console.warn("Turning subdiv object into mesh"),X=new Oh(wt,Ke[0].material);else X=new Oh(wt,Ke[0].material);X.castShadow=Ke[0].castShadow,X.receiveShadow=Ke[0].receiveShadow,$.add(X);for(var ne=function g(X){nt=0;var ne,ae=(0,je.Z)(X);try{for(ae.s();!(ne=ae.n()).done;){var de=ne.value;de.children&&g(de.children),de instanceof $V&&(Array.isArray(de.material)||ee[de.material.uuid]&&ee[de.material.uuid][de.objectType]&&ee[de.material.uuid][de.objectType].length>1||(tt[nt++]=de))}}catch(Ue){ae.e(Ue)}finally{ae.f()}for(var fe=0;fe<nt;fe++)$.attach(tt[fe])},fe=0;fe<et;fe++){var Ue=Ke[fe];ne(Ue.children),ae[de++]=Ue}}()}}for(var St=0;St<de;St++)ae[St].removeFromParent()}var fY=new va,pY="The Spline Runtime only accepts .splinecode files that are generated from Spline export panel.",vY=function(){function CT(X){var $=this,ee=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},ne=ee.autoRender,ae=void 0!==ne&&ne;_classCallCheck(this,CT),this._viewportMode=1,this._viewportWidth=window.innerWidth,this._viewportHeight=window.innerHeight,this._proxyObjectCache=new Map,this._skipRender=!0,this.autoRender=!1,this.disposed=!1,this.requestRender=function(){$._skipRender=!1},this.render=function(){var X,ee,ne;!$._renderer||($._rafId=requestAnimationFrame($.render),null==(X=$._perfs)||X.start(),($.autoRender||!$._skipRender)&&($._controls&&($._controls.enableDamping||$._controls.autoRotate)?$._skipRender=!$._controls.update():$._skipRender=!0,$._playmode&&!$._playmode.isEnable&&$._playmode.activate(),$._scene&&$._camera&&($._renderer.autoClear=!1,$._transmissionRenderTarget&&($._renderer.setRenderTarget($._transmissionRenderTarget),$._renderer.clear(),$._camera.layers.enable(0),$._camera.layers.disable(3),$._renderer.render($._scene,$._camera),$._renderer.setRenderTarget(null),$._camera.layers.enable(3)),null!=(ee=$._scene.postprocessing)&&ee.enabled?($._renderer.autoClear=!1,$._scene.postprocessing.render()):($._renderer.autoClear=!0,$._renderer.render($._scene,$._camera))),null==(ne=$._perfs)||ne.end()))},this.resize=HT((function(){var X,ee,ne,ae,de;!$._renderer||(1===$._viewportMode&&$._frameView&&($._frameView.frameSize=fY.set($._viewportWidth,$._viewportHeight)),null==(X=$._frameView)||X.updateRenderer(),null!=(ee=$._scene)&&ee.postprocessing&&$._scene.postprocessing.resize($._viewportWidth,$._viewportHeight,!1),1!==$._viewportMode&&(null==(ne=$._frameView)||ne.updateViewport()),$._camera&&(null==(ae=$._frameView)||ae.updateCamera(),"PerspectiveCamera"===$._camera.cameraType&&1===$._viewportMode&&($._camera.aspect=$._viewportWidth/$._viewportHeight),$._camera.updateProjectionMatrix()),null==(de=$._playmode)||de.resize(),$.requestRender())}),10),this.canvas=X,this.autoRender=ae,window.location.search.includes("perfs")&&(this._perfs=new dY({x:10,y:10}))}return _createClass(CT,[{key:"load",value:function(){var X=(0,de.Z)(et().mark((function _callee7(X){var $;return et().wrap((function _callee7$(ee){for(;;)switch(ee.prev=ee.next){case 0:return X.endsWith(".spline")?console.warn(pY+" The .spline files are only meant to be used by the Editor."):X.endsWith(".splinecode")||console.warn(pY),ee.next=3,fetch(X);case 3:return ee.next=5,ee.sent.arrayBuffer();case 5:return $=ee.sent,ee.next=8,this.start($);case 8:case"end":return ee.stop()}}),_callee7,this)})));return function load($){return X.apply(this,arguments)}}()},{key:"start",value:function(){var X=(0,de.Z)(et().mark((function _callee8(X){var $,ee,ne,ae,de,fe,Ue,je,Ke,tt,nt,it=this;return et().wrap((function _callee8$(et){for(;;)switch(et.prev=et.next){case 0:if(!this.disposed){et.next=2;break}return et.abrupt("return");case 2:return et.next=4,zA(X);case 4:if(ee=et.sent,this._publishData=ee.scene.publish,et.t0=Rv(ee),!et.t0){et.next=10;break}return et.next=10,K1();case 10:if(ne=new hY(ee),window.location.search.includes("merge-geometries")&&(ae=performance.now(),ET(ee,ne.scene),de=performance.now(),console.log("Merged geometries in ",de-ae," ms")),this._scene=ne.scene,Rv(ee)&&this._scene.traverse((function(X){FV(X)&&X.recomputeBoolean()})),this._sharedAssetsManager=ne.sharedAssets,this._sharedAssetsManager.onImageLoad=function(){it.requestRender()},ST(ee.scene,this._scene,this._sharedAssetsManager),this._camera=this._scene.activeCamera,(fe=Object.values(ee.frames)[0])&&("fullscreen"===fe.preset?(this._viewportMode=1,Ke=window.getComputedStyle(this.canvas),tt=Ke.width,nt=Ke.height,!this.canvas.parentElement||"300px"!==tt&&"auto"!==tt?this._viewportWidth=this.canvas.clientWidth:(this._viewportWidth=this.canvas.parentElement.clientWidth,this.canvas.style.width="100%",Ue=this.canvas.style.width),!this.canvas.parentElement||"150px"!==nt&&"auto"!==nt?this._viewportHeight=this.canvas.clientHeight:(this._viewportHeight=this.canvas.parentElement.clientHeight,this.canvas.style.height="100%",je=this.canvas.style.height)):(this._viewportMode=2,this._viewportWidth=fe.size[0],this._viewportHeight=fe.size[1],Ue=this._viewportWidth+"px",je=this._viewportHeight+"px")),null!=($=this._scene.postprocessing)&&$.enabled?(this._renderer=new Pt({canvas:this.canvas,antialias:!1,alpha:!0,stencil:!1,depth:!1,powerPreference:"high-performance"}),this._scene.postprocessing.init({renderer:this._renderer,camera:this._camera,scene:this._scene}),this._scene.postprocessing.addEventListener("smaaloaded",this.requestRender)):this._renderer=new Pt({canvas:this.canvas,antialias:!0,alpha:!0,stencil:!0,depth:!0,powerPreference:"high-performance"}),Ue&&(this.canvas.style.width=Ue),je&&(this.canvas.style.height=je),this._scene.needsTransmission(void 0)&&(this._transmissionRenderTarget=new ro(2048,2048,{generateMipmaps:!0,minFilter:wn,magFilter:_n,wrapS:dn,wrapT:dn}),this._transmissionRenderTarget.depthTexture=new Gp(2048,2048),this._scene.needsTransmission(this._transmissionRenderTarget)),this._renderer.setPixelRatio(window.devicePixelRatio),this._renderer.setSize(this._viewportWidth,this._viewportHeight,!1),this._scene.postprocessing&&this._scene.postprocessing.resize(this._viewportWidth,this._viewportHeight,!1),this._renderer.shadowMap.enabled=!0,this._renderer.shadowMap.type=2,this._renderer.setClearColor(this._scene.bgColor,this._scene.alpha),this._frameView=new cY(this._renderer,this._camera,new va(this._viewportWidth,this._viewportHeight),new va(window.innerWidth,window.innerHeight)),this._controls=new uB(this._camera,this._renderer.domElement),this._publishData&&(this._controls.fromJSON(this._publishData.orbitControls),this._controls.useKeyEvents=!1),this._controls.addEventListener("change",this.requestRender),this._controls.addEventListener("start",this.requestRender),this._playmode=new uY(this._renderer,this._scene,this._camera,this),this.resize(),this.render(),et.t1=this.canvas.parentElement,!et.t1){et.next=36;break}return et.next=34,yD(0);case 34:this._resizeObserver=new ResizeObserver((function(){it._viewportWidth=it.canvas.clientWidth,it._viewportHeight=it.canvas.clientHeight,it.resize()})),this._resizeObserver.observe(this.canvas.parentElement);case 36:case"end":return et.stop()}}),_callee8,this)})));return function start($){return X.apply(this,arguments)}}()},{key:"findObjectById",value:function findObjectById(X){var $,ee=null==($=this._scene)?void 0:$.getObjectByProperty("uuid",X);return this._createProxyObject(ee)}},{key:"findObjectByName",value:function findObjectByName(X){var $,ee=null==($=this._scene)?void 0:$.getObjectByName(X);return this._createProxyObject(ee)}},{key:"getSplineEvents",value:function getSplineEvents(){var X;return null==(X=this._playmode)?void 0:X.splineEvents}},{key:"emitEvent",value:function emitEvent(X,$){var ee=this.findObjectById($);null==ee||ee.emitEvent(X)}},{key:"emitEventReverse",value:function emitEventReverse(X,$){var ee=this.findObjectById($);null==ee||ee.emitEventReverse(X)}},{key:"addEventListener",value:function addEventListener(X,$){var ee;null==(ee=this._renderer)||ee.domElement.addEventListener(X,$)}},{key:"removeEventListener",value:function removeEventListener(X,$){var ee;null==(ee=this._renderer)||ee.domElement.removeEventListener(X,$)}},{key:"setZoom",value:function setZoom(X){var $;null==($=this._controls)||$.zoomOut(X)}},{key:"setSize",value:function setSize(X,$){this._viewportWidth=X,this._viewportHeight=$,this._viewportMode=2,this.resize()}},{key:"dispose",value:function dispose(){var X,$,ee,ne,ae,de,fe;this.disposed=!0,null==(X=this._playmode)||X.deactivate(),null==($=this._scene)||$.dispose(),this._rafId&&cancelAnimationFrame(this._rafId),this._proxyObjectCache.forEach((function(X){Iw.unsubscribe(X)})),null==(ee=this._renderer)||ee.dispose(),null==(ne=this._transmissionRenderTarget)||ne.dispose(),null==(de=null==(ae=this._transmissionRenderTarget)?void 0:ae.depthTexture)||de.dispose(),null==(fe=this._sharedAssetsManager)||fe.dispose(),this._resizeObserver&&this._resizeObserver.disconnect()}},{key:"_createProxyObject",value:function _createProxyObject(X){var $=this;if(null!=X){if(this._proxyObjectCache.has(X.uuid))return this._proxyObjectCache.get(X.uuid);var ee={name:X.name,uuid:X.uuid,visible:X.visible,intensity:X.intensity,position:X.position,rotation:X.rotation,scale:X.scale,emitEvent:function emitEvent($){var ee;null==(ee=X.interaction)||ee.emitEvent($)},emitEventReverse:function emitEventReverse($){var ee;null==(ee=X.interaction)||ee.emitEventReverse($)}},ne=Iw(ee,(function(ee,ne){var ae;"object"!=typeof X[ee]&&(null==(ae=Object.getOwnPropertyDescriptor(X,ee))?void 0:ae.writable)&&(X[ee]=ne),$.requestRender(),X.updateMatrix()}));return this._proxyObjectCache.set(X.uuid,ne),ne}}}]),CT}()},998:function(X,$,ee){"use strict";var ne=ee(458),ae={"text/plain":"Text","text/html":"Url",default:"Text"};X.exports=function copy(X,$){var ee,de,fe,Ue,je,Ke,et=!1;$||($={}),ee=$.debug||!1;try{if(fe=ne(),Ue=document.createRange(),je=document.getSelection(),(Ke=document.createElement("span")).textContent=X,Ke.style.all="unset",Ke.style.position="fixed",Ke.style.top=0,Ke.style.clip="rect(0, 0, 0, 0)",Ke.style.whiteSpace="pre",Ke.style.webkitUserSelect="text",Ke.style.MozUserSelect="text",Ke.style.msUserSelect="text",Ke.style.userSelect="text",Ke.addEventListener("copy",(function(ne){if(ne.stopPropagation(),$.format)if(ne.preventDefault(),"undefined"===typeof ne.clipboardData){ee&&console.warn("unable to use e.clipboardData"),ee&&console.warn("trying IE specific stuff"),window.clipboardData.clearData();var de=ae[$.format]||ae.default;window.clipboardData.setData(de,X)}else ne.clipboardData.clearData(),ne.clipboardData.setData($.format,X);$.onCopy&&(ne.preventDefault(),$.onCopy(ne.clipboardData))})),document.body.appendChild(Ke),Ue.selectNodeContents(Ke),je.addRange(Ue),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");et=!0}catch(tt){ee&&console.error("unable to copy using execCommand: ",tt),ee&&console.warn("trying IE specific stuff");try{window.clipboardData.setData($.format||"text",X),$.onCopy&&$.onCopy(window.clipboardData),et=!0}catch(tt){ee&&console.error("unable to copy using clipboardData: ",tt),ee&&console.error("falling back to prompt"),de=function format(X){var $=(/mac os x/i.test(navigator.userAgent)?"\u2318":"Ctrl")+"+C";return X.replace(/#{\s*key\s*}/g,$)}("message"in $?$.message:"Copy to clipboard: #{key}, Enter"),window.prompt(de,X)}}finally{je&&("function"==typeof je.removeRange?je.removeRange(Ue):je.removeAllRanges()),Ke&&document.body.removeChild(Ke),fe()}return et}},110:function(X,$,ee){"use strict";var ne=ee(309),ae={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},de={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},fe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Ue={};function getStatics(X){return ne.isMemo(X)?fe:Ue[X.$$typeof]||ae}Ue[ne.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Ue[ne.Memo]=fe;var je=Object.defineProperty,Ke=Object.getOwnPropertyNames,et=Object.getOwnPropertySymbols,tt=Object.getOwnPropertyDescriptor,nt=Object.getPrototypeOf,it=Object.prototype;X.exports=function hoistNonReactStatics(X,$,ee){if("string"!==typeof $){if(it){var ne=nt($);ne&&ne!==it&&hoistNonReactStatics(X,ne,ee)}var ae=Ke($);et&&(ae=ae.concat(et($)));for(var fe=getStatics(X),Ue=getStatics($),ct=0;ct<ae.length;++ct){var dt=ae[ct];if(!de[dt]&&(!ee||!ee[dt])&&(!Ue||!Ue[dt])&&(!fe||!fe[dt])){var vt=tt($,dt);try{je(X,dt,vt)}catch(gt){}}}}return X}},746:function(X,$){"use strict";var ee="function"===typeof Symbol&&Symbol.for,ne=ee?Symbol.for("react.element"):60103,ae=ee?Symbol.for("react.portal"):60106,de=ee?Symbol.for("react.fragment"):60107,fe=ee?Symbol.for("react.strict_mode"):60108,Ue=ee?Symbol.for("react.profiler"):60114,je=ee?Symbol.for("react.provider"):60109,Ke=ee?Symbol.for("react.context"):60110,et=ee?Symbol.for("react.async_mode"):60111,tt=ee?Symbol.for("react.concurrent_mode"):60111,nt=ee?Symbol.for("react.forward_ref"):60112,it=ee?Symbol.for("react.suspense"):60113,ct=ee?Symbol.for("react.suspense_list"):60120,dt=ee?Symbol.for("react.memo"):60115,vt=ee?Symbol.for("react.lazy"):60116,gt=ee?Symbol.for("react.block"):60121,yt=ee?Symbol.for("react.fundamental"):60117,_t=ee?Symbol.for("react.responder"):60118,wt=ee?Symbol.for("react.scope"):60119;function z(X){if("object"===typeof X&&null!==X){var $=X.$$typeof;switch($){case ne:switch(X=X.type){case et:case tt:case de:case Ue:case fe:case it:return X;default:switch(X=X&&X.$$typeof){case Ke:case nt:case vt:case dt:case je:return X;default:return $}}case ae:return $}}}function A(X){return z(X)===tt}$.AsyncMode=et,$.ConcurrentMode=tt,$.ContextConsumer=Ke,$.ContextProvider=je,$.Element=ne,$.ForwardRef=nt,$.Fragment=de,$.Lazy=vt,$.Memo=dt,$.Portal=ae,$.Profiler=Ue,$.StrictMode=fe,$.Suspense=it,$.isAsyncMode=function(X){return A(X)||z(X)===et},$.isConcurrentMode=A,$.isContextConsumer=function(X){return z(X)===Ke},$.isContextProvider=function(X){return z(X)===je},$.isElement=function(X){return"object"===typeof X&&null!==X&&X.$$typeof===ne},$.isForwardRef=function(X){return z(X)===nt},$.isFragment=function(X){return z(X)===de},$.isLazy=function(X){return z(X)===vt},$.isMemo=function(X){return z(X)===dt},$.isPortal=function(X){return z(X)===ae},$.isProfiler=function(X){return z(X)===Ue},$.isStrictMode=function(X){return z(X)===fe},$.isSuspense=function(X){return z(X)===it},$.isValidElementType=function(X){return"string"===typeof X||"function"===typeof X||X===de||X===tt||X===Ue||X===fe||X===it||X===ct||"object"===typeof X&&null!==X&&(X.$$typeof===vt||X.$$typeof===dt||X.$$typeof===je||X.$$typeof===Ke||X.$$typeof===nt||X.$$typeof===yt||X.$$typeof===_t||X.$$typeof===wt||X.$$typeof===gt)},$.typeOf=z},309:function(X,$,ee){"use strict";X.exports=ee(746)},198:function(X,$,ee){X=ee.nmd(X);var ne="__lodash_hash_undefined__",ae=9007199254740991,de="[object Arguments]",fe="[object Function]",Ue="[object Object]",je=/^\[object .+?Constructor\]$/,Ke=/^(?:0|[1-9]\d*)$/,et={};et["[object Float32Array]"]=et["[object Float64Array]"]=et["[object Int8Array]"]=et["[object Int16Array]"]=et["[object Int32Array]"]=et["[object Uint8Array]"]=et["[object Uint8ClampedArray]"]=et["[object Uint16Array]"]=et["[object Uint32Array]"]=!0,et[de]=et["[object Array]"]=et["[object ArrayBuffer]"]=et["[object Boolean]"]=et["[object DataView]"]=et["[object Date]"]=et["[object Error]"]=et[fe]=et["[object Map]"]=et["[object Number]"]=et[Ue]=et["[object RegExp]"]=et["[object Set]"]=et["[object String]"]=et["[object WeakMap]"]=!1;var tt="object"==typeof ee.g&&ee.g&&ee.g.Object===Object&&ee.g,nt="object"==typeof self&&self&&self.Object===Object&&self,it=tt||nt||Function("return this")(),ct=$&&!$.nodeType&&$,dt=ct&&X&&!X.nodeType&&X,vt=dt&&dt.exports===ct,gt=vt&&tt.process,yt=function(){try{var X=dt&&dt.require&&dt.require("util").types;return X||gt&&gt.binding&&gt.binding("util")}catch($){}}(),_t=yt&&yt.isTypedArray;function apply(X,$,ee){switch(ee.length){case 0:return X.call($);case 1:return X.call($,ee[0]);case 2:return X.call($,ee[0],ee[1]);case 3:return X.call($,ee[0],ee[1],ee[2])}return X.apply($,ee)}var wt=Array.prototype,St=Function.prototype,Ct=Object.prototype,At=it["__core-js_shared__"],Et=St.toString,Rt=Ct.hasOwnProperty,Bt=function(){var X=/[^.]+$/.exec(At&&At.keys&&At.keys.IE_PROTO||"");return X?"Symbol(src)_1."+X:""}(),Ht=Ct.toString,Wt=Et.call(Object),qt=RegExp("^"+Et.call(Rt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Zt=vt?it.Buffer:void 0,Xt=it.Symbol,Qt=it.Uint8Array,en=Zt?Zt.allocUnsafe:void 0,tn=function overArg(X,$){return function(ee){return X($(ee))}}(Object.getPrototypeOf,Object),un=Object.create,hn=Ct.propertyIsEnumerable,dn=wt.splice,mn=Xt?Xt.toStringTag:void 0,gn=function(){try{var X=getNative(Object,"defineProperty");return X({},"",{}),X}catch($){}}(),_n=Zt?Zt.isBuffer:void 0,wn=Math.max,Sn=Date.now,Cn=getNative(it,"Map"),An=getNative(Object,"create"),Mn=function(){function object(){}return function(X){if(!isObject(X))return{};if(un)return un(X);object.prototype=X;var $=new object;return object.prototype=void 0,$}}();function Hash(X){var $=-1,ee=null==X?0:X.length;for(this.clear();++$<ee;){var ne=X[$];this.set(ne[0],ne[1])}}function ListCache(X){var $=-1,ee=null==X?0:X.length;for(this.clear();++$<ee;){var ne=X[$];this.set(ne[0],ne[1])}}function MapCache(X){var $=-1,ee=null==X?0:X.length;for(this.clear();++$<ee;){var ne=X[$];this.set(ne[0],ne[1])}}function Stack(X){var $=this.__data__=new ListCache(X);this.size=$.size}function arrayLikeKeys(X,$){var ee=Dn(X),ne=!ee&&Pn(X),ae=!ee&&!ne&&Ln(X),de=!ee&&!ne&&!ae&&On(X),fe=ee||ne||ae||de,Ue=fe?function baseTimes(X,$){for(var ee=-1,ne=Array(X);++ee<X;)ne[ee]=$(ee);return ne}(X.length,String):[],je=Ue.length;for(var Ke in X)!$&&!Rt.call(X,Ke)||fe&&("length"==Ke||ae&&("offset"==Ke||"parent"==Ke)||de&&("buffer"==Ke||"byteLength"==Ke||"byteOffset"==Ke)||isIndex(Ke,je))||Ue.push(Ke);return Ue}function assignMergeValue(X,$,ee){(void 0!==ee&&!eq(X[$],ee)||void 0===ee&&!($ in X))&&baseAssignValue(X,$,ee)}function assignValue(X,$,ee){var ne=X[$];Rt.call(X,$)&&eq(ne,ee)&&(void 0!==ee||$ in X)||baseAssignValue(X,$,ee)}function assocIndexOf(X,$){for(var ee=X.length;ee--;)if(eq(X[ee][0],$))return ee;return-1}function baseAssignValue(X,$,ee){"__proto__"==$&&gn?gn(X,$,{configurable:!0,enumerable:!0,value:ee,writable:!0}):X[$]=ee}Hash.prototype.clear=function hashClear(){this.__data__=An?An(null):{},this.size=0},Hash.prototype.delete=function hashDelete(X){var $=this.has(X)&&delete this.__data__[X];return this.size-=$?1:0,$},Hash.prototype.get=function hashGet(X){var $=this.__data__;if(An){var ee=$[X];return ee===ne?void 0:ee}return Rt.call($,X)?$[X]:void 0},Hash.prototype.has=function hashHas(X){var $=this.__data__;return An?void 0!==$[X]:Rt.call($,X)},Hash.prototype.set=function hashSet(X,$){var ee=this.__data__;return this.size+=this.has(X)?0:1,ee[X]=An&&void 0===$?ne:$,this},ListCache.prototype.clear=function listCacheClear(){this.__data__=[],this.size=0},ListCache.prototype.delete=function listCacheDelete(X){var $=this.__data__,ee=assocIndexOf($,X);return!(ee<0)&&(ee==$.length-1?$.pop():dn.call($,ee,1),--this.size,!0)},ListCache.prototype.get=function listCacheGet(X){var $=this.__data__,ee=assocIndexOf($,X);return ee<0?void 0:$[ee][1]},ListCache.prototype.has=function listCacheHas(X){return assocIndexOf(this.__data__,X)>-1},ListCache.prototype.set=function listCacheSet(X,$){var ee=this.__data__,ne=assocIndexOf(ee,X);return ne<0?(++this.size,ee.push([X,$])):ee[ne][1]=$,this},MapCache.prototype.clear=function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Cn||ListCache),string:new Hash}},MapCache.prototype.delete=function mapCacheDelete(X){var $=getMapData(this,X).delete(X);return this.size-=$?1:0,$},MapCache.prototype.get=function mapCacheGet(X){return getMapData(this,X).get(X)},MapCache.prototype.has=function mapCacheHas(X){return getMapData(this,X).has(X)},MapCache.prototype.set=function mapCacheSet(X,$){var ee=getMapData(this,X),ne=ee.size;return ee.set(X,$),this.size+=ee.size==ne?0:1,this},Stack.prototype.clear=function stackClear(){this.__data__=new ListCache,this.size=0},Stack.prototype.delete=function stackDelete(X){var $=this.__data__,ee=$.delete(X);return this.size=$.size,ee},Stack.prototype.get=function stackGet(X){return this.__data__.get(X)},Stack.prototype.has=function stackHas(X){return this.__data__.has(X)},Stack.prototype.set=function stackSet(X,$){var ee=this.__data__;if(ee instanceof ListCache){var ne=ee.__data__;if(!Cn||ne.length<199)return ne.push([X,$]),this.size=++ee.size,this;ee=this.__data__=new MapCache(ne)}return ee.set(X,$),this.size=ee.size,this};var En=function createBaseFor(X){return function($,ee,ne){for(var ae=-1,de=Object($),fe=ne($),Ue=fe.length;Ue--;){var je=fe[X?Ue:++ae];if(!1===ee(de[je],je,de))break}return $}}();function baseGetTag(X){return null==X?void 0===X?"[object Undefined]":"[object Null]":mn&&mn in Object(X)?function getRawTag(X){var $=Rt.call(X,mn),ee=X[mn];try{X[mn]=void 0;var ne=!0}catch(de){}var ae=Ht.call(X);ne&&($?X[mn]=ee:delete X[mn]);return ae}(X):function objectToString(X){return Ht.call(X)}(X)}function baseIsArguments(X){return isObjectLike(X)&&baseGetTag(X)==de}function baseIsNative(X){return!(!isObject(X)||function isMasked(X){return!!Bt&&Bt in X}(X))&&(isFunction(X)?qt:je).test(function toSource(X){if(null!=X){try{return Et.call(X)}catch($){}try{return X+""}catch($){}}return""}(X))}function baseKeysIn(X){if(!isObject(X))return function nativeKeysIn(X){var $=[];if(null!=X)for(var ee in Object(X))$.push(ee);return $}(X);var $=isPrototype(X),ee=[];for(var ne in X)("constructor"!=ne||!$&&Rt.call(X,ne))&&ee.push(ne);return ee}function baseMerge(X,$,ee,ne,ae){X!==$&&En($,(function(de,fe){if(ae||(ae=new Stack),isObject(de))!function baseMergeDeep(X,$,ee,ne,ae,de,fe){var je=safeGet(X,ee),Ke=safeGet($,ee),et=fe.get(Ke);if(et)return void assignMergeValue(X,ee,et);var tt=de?de(je,Ke,ee+"",X,$,fe):void 0,nt=void 0===tt;if(nt){var it=Dn(Ke),ct=!it&&Ln(Ke),dt=!it&&!ct&&On(Ke);tt=Ke,it||ct||dt?Dn(je)?tt=je:!function isArrayLikeObject(X){return isObjectLike(X)&&isArrayLike(X)}(je)?ct?(nt=!1,tt=function cloneBuffer(X,$){if($)return X.slice();var ee=X.length,ne=en?en(ee):new X.constructor(ee);return X.copy(ne),ne}(Ke,!0)):dt?(nt=!1,tt=function cloneTypedArray(X,$){var ee=$?function cloneArrayBuffer(X){var $=new X.constructor(X.byteLength);return new Qt($).set(new Qt(X)),$}(X.buffer):X.buffer;return new X.constructor(ee,X.byteOffset,X.length)}(Ke,!0)):tt=[]:tt=function copyArray(X,$){var ee=-1,ne=X.length;$||($=Array(ne));for(;++ee<ne;)$[ee]=X[ee];return $}(je):function isPlainObject(X){if(!isObjectLike(X)||baseGetTag(X)!=Ue)return!1;var $=tn(X);if(null===$)return!0;var ee=Rt.call($,"constructor")&&$.constructor;return"function"==typeof ee&&ee instanceof ee&&Et.call(ee)==Wt}(Ke)||Pn(Ke)?(tt=je,Pn(je)?tt=function toPlainObject(X){return function copyObject(X,$,ee,ne){var ae=!ee;ee||(ee={});var de=-1,fe=$.length;for(;++de<fe;){var Ue=$[de],je=ne?ne(ee[Ue],X[Ue],Ue,ee,X):void 0;void 0===je&&(je=X[Ue]),ae?baseAssignValue(ee,Ue,je):assignValue(ee,Ue,je)}return ee}(X,keysIn(X))}(je):isObject(je)&&!isFunction(je)||(tt=function initCloneObject(X){return"function"!=typeof X.constructor||isPrototype(X)?{}:Mn(tn(X))}(Ke))):nt=!1}nt&&(fe.set(Ke,tt),ae(tt,Ke,ne,de,fe),fe.delete(Ke));assignMergeValue(X,ee,tt)}(X,$,fe,ee,baseMerge,ne,ae);else{var je=ne?ne(safeGet(X,fe),de,fe+"",X,$,ae):void 0;void 0===je&&(je=de),assignMergeValue(X,fe,je)}}),keysIn)}function baseRest(X,$){return Tn(function overRest(X,$,ee){return $=wn(void 0===$?X.length-1:$,0),function(){for(var ne=arguments,ae=-1,de=wn(ne.length-$,0),fe=Array(de);++ae<de;)fe[ae]=ne[$+ae];ae=-1;for(var Ue=Array($+1);++ae<$;)Ue[ae]=ne[ae];return Ue[$]=ee(fe),apply(X,this,Ue)}}(X,$,identity),X+"")}function getMapData(X,$){var ee=X.__data__;return function isKeyable(X){var $=typeof X;return"string"==$||"number"==$||"symbol"==$||"boolean"==$?"__proto__"!==X:null===X}($)?ee["string"==typeof $?"string":"hash"]:ee.map}function getNative(X,$){var ee=function getValue(X,$){return null==X?void 0:X[$]}(X,$);return baseIsNative(ee)?ee:void 0}function isIndex(X,$){var ee=typeof X;return!!($=null==$?ae:$)&&("number"==ee||"symbol"!=ee&&Ke.test(X))&&X>-1&&X%1==0&&X<$}function isPrototype(X){var $=X&&X.constructor;return X===("function"==typeof $&&$.prototype||Ct)}function safeGet(X,$){if(("constructor"!==$||"function"!==typeof X[$])&&"__proto__"!=$)return X[$]}var Tn=function shortOut(X){var $=0,ee=0;return function(){var ne=Sn(),ae=16-(ne-ee);if(ee=ne,ae>0){if(++$>=800)return arguments[0]}else $=0;return X.apply(void 0,arguments)}}(gn?function(X,$){return gn(X,"toString",{configurable:!0,enumerable:!1,value:(ee=$,function(){return ee}),writable:!0});var ee}:identity);function eq(X,$){return X===$||X!==X&&$!==$}var Pn=baseIsArguments(function(){return arguments}())?baseIsArguments:function(X){return isObjectLike(X)&&Rt.call(X,"callee")&&!hn.call(X,"callee")},Dn=Array.isArray;function isArrayLike(X){return null!=X&&isLength(X.length)&&!isFunction(X)}var Ln=_n||function stubFalse(){return!1};function isFunction(X){if(!isObject(X))return!1;var $=baseGetTag(X);return $==fe||"[object GeneratorFunction]"==$||"[object AsyncFunction]"==$||"[object Proxy]"==$}function isLength(X){return"number"==typeof X&&X>-1&&X%1==0&&X<=ae}function isObject(X){var $=typeof X;return null!=X&&("object"==$||"function"==$)}function isObjectLike(X){return null!=X&&"object"==typeof X}var On=_t?function baseUnary(X){return function($){return X($)}}(_t):function baseIsTypedArray(X){return isObjectLike(X)&&isLength(X.length)&&!!et[baseGetTag(X)]};function keysIn(X){return isArrayLike(X)?arrayLikeKeys(X,!0):baseKeysIn(X)}var In=function createAssigner(X){return baseRest((function($,ee){var ne=-1,ae=ee.length,de=ae>1?ee[ae-1]:void 0,fe=ae>2?ee[2]:void 0;for(de=X.length>3&&"function"==typeof de?(ae--,de):void 0,fe&&function isIterateeCall(X,$,ee){if(!isObject(ee))return!1;var ne=typeof $;if("number"==ne?isArrayLike(ee)&&isIndex($,ee.length):"string"==ne&&$ in ee)return eq(ee[$],X);return!1}(ee[0],ee[1],fe)&&(de=ae<3?void 0:de,ae=1),$=Object($);++ne<ae;){var Ue=ee[ne];Ue&&X($,Ue,ne,de)}return $}))}((function(X,$,ee,ne){baseMerge(X,$,ee,ne)}));function identity(X){return X}X.exports=In},419:function(X,$,ee){"use strict";"undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStart(new Error);var ne=ee(791),ae=ee(296);function p(X){for(var $="https://reactjs.org/docs/error-decoder.html?invariant="+X,ee=1;ee<arguments.length;ee++)$+="&args[]="+encodeURIComponent(arguments[ee]);return"Minified React error #"+X+"; visit "+$+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var de=new Set,fe={};function ea(X,$){fa(X,$),fa(X+"Capture",$)}function fa(X,$){for(fe[X]=$,X=0;X<$.length;X++)de.add($[X])}var Ue=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),je=Object.prototype.hasOwnProperty,Ke=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,et={},tt={};function pa(X,$,ee,ne,ae,de,fe){this.acceptsBooleans=2===$||3===$||4===$,this.attributeName=ne,this.attributeNamespace=ae,this.mustUseProperty=ee,this.propertyName=X,this.type=$,this.sanitizeURL=de,this.removeEmptyString=fe}var nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(X){nt[X]=new pa(X,0,!1,X,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(X){var $=X[0];nt[$]=new pa($,1,!1,X[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(X){nt[X]=new pa(X,2,!1,X.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(X){nt[X]=new pa(X,2,!1,X,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(X){nt[X]=new pa(X,3,!1,X.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(X){nt[X]=new pa(X,3,!0,X,null,!1,!1)})),["capture","download"].forEach((function(X){nt[X]=new pa(X,4,!1,X,null,!1,!1)})),["cols","rows","size","span"].forEach((function(X){nt[X]=new pa(X,6,!1,X,null,!1,!1)})),["rowSpan","start"].forEach((function(X){nt[X]=new pa(X,5,!1,X.toLowerCase(),null,!1,!1)}));var it=/[\-:]([a-z])/g;function ra(X){return X[1].toUpperCase()}function ta(X,$,ee,ne){var ae=nt.hasOwnProperty($)?nt[$]:null;(null!==ae?0!==ae.type:ne||!(2<$.length)||"o"!==$[0]&&"O"!==$[0]||"n"!==$[1]&&"N"!==$[1])&&(function oa(X,$,ee,ne){if(null===$||"undefined"===typeof $||function na(X,$,ee,ne){if(null!==ee&&0===ee.type)return!1;switch(typeof $){case"function":case"symbol":return!0;case"boolean":return!ne&&(null!==ee?!ee.acceptsBooleans:"data-"!==(X=X.toLowerCase().slice(0,5))&&"aria-"!==X);default:return!1}}(X,$,ee,ne))return!0;if(ne)return!1;if(null!==ee)switch(ee.type){case 3:return!$;case 4:return!1===$;case 5:return isNaN($);case 6:return isNaN($)||1>$}return!1}($,ee,ae,ne)&&(ee=null),ne||null===ae?function ma(X){return!!je.call(tt,X)||!je.call(et,X)&&(Ke.test(X)?tt[X]=!0:(et[X]=!0,!1))}($)&&(null===ee?X.removeAttribute($):X.setAttribute($,""+ee)):ae.mustUseProperty?X[ae.propertyName]=null===ee?3!==ae.type&&"":ee:($=ae.attributeName,ne=ae.attributeNamespace,null===ee?X.removeAttribute($):(ee=3===(ae=ae.type)||4===ae&&!0===ee?"":""+ee,ne?X.setAttributeNS(ne,$,ee):X.setAttribute($,ee))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(X){var $=X.replace(it,ra);nt[$]=new pa($,1,!1,X,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(X){var $=X.replace(it,ra);nt[$]=new pa($,1,!1,X,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(X){var $=X.replace(it,ra);nt[$]=new pa($,1,!1,X,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(X){nt[X]=new pa(X,1,!1,X.toLowerCase(),null,!1,!1)})),nt.xlinkHref=new pa("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(X){nt[X]=new pa(X,1,!1,X.toLowerCase(),null,!0,!0)}));var ct=ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,dt=Symbol.for("react.element"),vt=Symbol.for("react.portal"),gt=Symbol.for("react.fragment"),yt=Symbol.for("react.strict_mode"),_t=Symbol.for("react.profiler"),wt=Symbol.for("react.provider"),St=Symbol.for("react.context"),Ct=Symbol.for("react.forward_ref"),At=Symbol.for("react.suspense"),Et=Symbol.for("react.suspense_list"),Rt=Symbol.for("react.memo"),Bt=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var Ht=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var Wt=Symbol.iterator;function Ja(X){return null===X||"object"!==typeof X?null:"function"===typeof(X=Wt&&X[Wt]||X["@@iterator"])?X:null}var qt,Zt=Object.assign;function La(X){if(void 0===qt)try{throw Error()}catch(ee){var $=ee.stack.trim().match(/\n( *(at )?)/);qt=$&&$[1]||""}return"\n"+qt+X}var Xt=!1;function Na(X,$){if(!X||Xt)return"";Xt=!0;var ee=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if($)if($=function b(){throw Error()},Object.defineProperty($.prototype,"props",{set:function set(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct($,[])}catch(Ke){var ne=Ke}Reflect.construct(X,[],$)}else{try{$.call()}catch(Ke){ne=Ke}X.call($.prototype)}else{try{throw Error()}catch(Ke){ne=Ke}X()}}catch(Ke){if(Ke&&ne&&"string"===typeof Ke.stack){for(var ae=Ke.stack.split("\n"),de=ne.stack.split("\n"),fe=ae.length-1,Ue=de.length-1;1<=fe&&0<=Ue&&ae[fe]!==de[Ue];)Ue--;for(;1<=fe&&0<=Ue;fe--,Ue--)if(ae[fe]!==de[Ue]){if(1!==fe||1!==Ue)do{if(fe--,0>--Ue||ae[fe]!==de[Ue]){var je="\n"+ae[fe].replace(" at new "," at ");return X.displayName&&je.includes("<anonymous>")&&(je=je.replace("<anonymous>",X.displayName)),je}}while(1<=fe&&0<=Ue);break}}}finally{Xt=!1,Error.prepareStackTrace=ee}return(X=X?X.displayName||X.name:"")?La(X):""}function Oa(X){switch(X.tag){case 5:return La(X.type);case 16:return La("Lazy");case 13:return La("Suspense");case 19:return La("SuspenseList");case 0:case 2:case 15:return X=Na(X.type,!1);case 11:return X=Na(X.type.render,!1);case 1:return X=Na(X.type,!0);default:return""}}function Pa(X){if(null==X)return null;if("function"===typeof X)return X.displayName||X.name||null;if("string"===typeof X)return X;switch(X){case gt:return"Fragment";case vt:return"Portal";case _t:return"Profiler";case yt:return"StrictMode";case At:return"Suspense";case Et:return"SuspenseList"}if("object"===typeof X)switch(X.$$typeof){case St:return(X.displayName||"Context")+".Consumer";case wt:return(X._context.displayName||"Context")+".Provider";case Ct:var $=X.render;return(X=X.displayName)||(X=""!==(X=$.displayName||$.name||"")?"ForwardRef("+X+")":"ForwardRef"),X;case Rt:return null!==($=X.displayName||null)?$:Pa(X.type)||"Memo";case Bt:$=X._payload,X=X._init;try{return Pa(X($))}catch(ee){}}return null}function Qa(X){var $=X.type;switch(X.tag){case 24:return"Cache";case 9:return($.displayName||"Context")+".Consumer";case 10:return($._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return X=(X=$.render).displayName||X.name||"",$.displayName||(""!==X?"ForwardRef("+X+")":"ForwardRef");case 7:return"Fragment";case 5:return $;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pa($);case 8:return $===yt?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof $)return $.displayName||$.name||null;if("string"===typeof $)return $}return null}function Ra(X){switch(typeof X){case"boolean":case"number":case"string":case"undefined":case"object":return X;default:return""}}function Sa(X){var $=X.type;return(X=X.nodeName)&&"input"===X.toLowerCase()&&("checkbox"===$||"radio"===$)}function Ua(X){X._valueTracker||(X._valueTracker=function Ta(X){var $=Sa(X)?"checked":"value",ee=Object.getOwnPropertyDescriptor(X.constructor.prototype,$),ne=""+X[$];if(!X.hasOwnProperty($)&&"undefined"!==typeof ee&&"function"===typeof ee.get&&"function"===typeof ee.set){var ae=ee.get,de=ee.set;return Object.defineProperty(X,$,{configurable:!0,get:function get(){return ae.call(this)},set:function set(X){ne=""+X,de.call(this,X)}}),Object.defineProperty(X,$,{enumerable:ee.enumerable}),{getValue:function getValue(){return ne},setValue:function setValue(X){ne=""+X},stopTracking:function stopTracking(){X._valueTracker=null,delete X[$]}}}}(X))}function Va(X){if(!X)return!1;var $=X._valueTracker;if(!$)return!0;var ee=$.getValue(),ne="";return X&&(ne=Sa(X)?X.checked?"true":"false":X.value),(X=ne)!==ee&&($.setValue(X),!0)}function Wa(X){if("undefined"===typeof(X=X||("undefined"!==typeof document?document:void 0)))return null;try{return X.activeElement||X.body}catch($){return X.body}}function Xa(X,$){var ee=$.checked;return Zt({},$,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=ee?ee:X._wrapperState.initialChecked})}function Ya(X,$){var ee=null==$.defaultValue?"":$.defaultValue,ne=null!=$.checked?$.checked:$.defaultChecked;ee=Ra(null!=$.value?$.value:ee),X._wrapperState={initialChecked:ne,initialValue:ee,controlled:"checkbox"===$.type||"radio"===$.type?null!=$.checked:null!=$.value}}function Za(X,$){null!=($=$.checked)&&ta(X,"checked",$,!1)}function $a(X,$){Za(X,$);var ee=Ra($.value),ne=$.type;if(null!=ee)"number"===ne?(0===ee&&""===X.value||X.value!=ee)&&(X.value=""+ee):X.value!==""+ee&&(X.value=""+ee);else if("submit"===ne||"reset"===ne)return void X.removeAttribute("value");$.hasOwnProperty("value")?ab(X,$.type,ee):$.hasOwnProperty("defaultValue")&&ab(X,$.type,Ra($.defaultValue)),null==$.checked&&null!=$.defaultChecked&&(X.defaultChecked=!!$.defaultChecked)}function bb(X,$,ee){if($.hasOwnProperty("value")||$.hasOwnProperty("defaultValue")){var ne=$.type;if(!("submit"!==ne&&"reset"!==ne||void 0!==$.value&&null!==$.value))return;$=""+X._wrapperState.initialValue,ee||$===X.value||(X.value=$),X.defaultValue=$}""!==(ee=X.name)&&(X.name=""),X.defaultChecked=!!X._wrapperState.initialChecked,""!==ee&&(X.name=ee)}function ab(X,$,ee){"number"===$&&Wa(X.ownerDocument)===X||(null==ee?X.defaultValue=""+X._wrapperState.initialValue:X.defaultValue!==""+ee&&(X.defaultValue=""+ee))}var Qt=Array.isArray;function db(X,$,ee,ne){if(X=X.options,$){$={};for(var ae=0;ae<ee.length;ae++)$["$"+ee[ae]]=!0;for(ee=0;ee<X.length;ee++)ae=$.hasOwnProperty("$"+X[ee].value),X[ee].selected!==ae&&(X[ee].selected=ae),ae&&ne&&(X[ee].defaultSelected=!0)}else{for(ee=""+Ra(ee),$=null,ae=0;ae<X.length;ae++){if(X[ae].value===ee)return X[ae].selected=!0,void(ne&&(X[ae].defaultSelected=!0));null!==$||X[ae].disabled||($=X[ae])}null!==$&&($.selected=!0)}}function eb(X,$){if(null!=$.dangerouslySetInnerHTML)throw Error(p(91));return Zt({},$,{value:void 0,defaultValue:void 0,children:""+X._wrapperState.initialValue})}function fb(X,$){var ee=$.value;if(null==ee){if(ee=$.children,$=$.defaultValue,null!=ee){if(null!=$)throw Error(p(92));if(Qt(ee)){if(1<ee.length)throw Error(p(93));ee=ee[0]}$=ee}null==$&&($=""),ee=$}X._wrapperState={initialValue:Ra(ee)}}function gb(X,$){var ee=Ra($.value),ne=Ra($.defaultValue);null!=ee&&((ee=""+ee)!==X.value&&(X.value=ee),null==$.defaultValue&&X.defaultValue!==ee&&(X.defaultValue=ee)),null!=ne&&(X.defaultValue=""+ne)}function hb(X){var $=X.textContent;$===X._wrapperState.initialValue&&""!==$&&null!==$&&(X.value=$)}function ib(X){switch(X){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function jb(X,$){return null==X||"http://www.w3.org/1999/xhtml"===X?ib($):"http://www.w3.org/2000/svg"===X&&"foreignObject"===$?"http://www.w3.org/1999/xhtml":X}var en,tn,un=(tn=function(X,$){if("http://www.w3.org/2000/svg"!==X.namespaceURI||"innerHTML"in X)X.innerHTML=$;else{for((en=en||document.createElement("div")).innerHTML="<svg>"+$.valueOf().toString()+"</svg>",$=en.firstChild;X.firstChild;)X.removeChild(X.firstChild);for(;$.firstChild;)X.appendChild($.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(X,$,ee,ne){MSApp.execUnsafeLocalFunction((function(){return tn(X,$)}))}:tn);function mb(X,$){if($){var ee=X.firstChild;if(ee&&ee===X.lastChild&&3===ee.nodeType)return void(ee.nodeValue=$)}X.textContent=$}var hn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dn=["Webkit","ms","Moz","O"];function qb(X,$,ee){return null==$||"boolean"===typeof $||""===$?"":ee||"number"!==typeof $||0===$||hn.hasOwnProperty(X)&&hn[X]?(""+$).trim():$+"px"}function rb(X,$){for(var ee in X=X.style,$)if($.hasOwnProperty(ee)){var ne=0===ee.indexOf("--"),ae=qb(ee,$[ee],ne);"float"===ee&&(ee="cssFloat"),ne?X.setProperty(ee,ae):X[ee]=ae}}Object.keys(hn).forEach((function(X){dn.forEach((function($){$=$+X.charAt(0).toUpperCase()+X.substring(1),hn[$]=hn[X]}))}));var mn=Zt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function tb(X,$){if($){if(mn[X]&&(null!=$.children||null!=$.dangerouslySetInnerHTML))throw Error(p(137,X));if(null!=$.dangerouslySetInnerHTML){if(null!=$.children)throw Error(p(60));if("object"!==typeof $.dangerouslySetInnerHTML||!("__html"in $.dangerouslySetInnerHTML))throw Error(p(61))}if(null!=$.style&&"object"!==typeof $.style)throw Error(p(62))}}function ub(X,$){if(-1===X.indexOf("-"))return"string"===typeof $.is;switch(X){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var gn=null;function wb(X){return(X=X.target||X.srcElement||window).correspondingUseElement&&(X=X.correspondingUseElement),3===X.nodeType?X.parentNode:X}var _n=null,wn=null,Sn=null;function Ab(X){if(X=Bb(X)){if("function"!==typeof _n)throw Error(p(280));var $=X.stateNode;$&&($=Cb($),_n(X.stateNode,X.type,$))}}function Db(X){wn?Sn?Sn.push(X):Sn=[X]:wn=X}function Eb(){if(wn){var X=wn,$=Sn;if(Sn=wn=null,Ab(X),$)for(X=0;X<$.length;X++)Ab($[X])}}function Fb(X,$){return X($)}function Gb(){}var Cn=!1;function Ib(X,$,ee){if(Cn)return X($,ee);Cn=!0;try{return Fb(X,$,ee)}finally{Cn=!1,(null!==wn||null!==Sn)&&(Gb(),Eb())}}function Jb(X,$){var ee=X.stateNode;if(null===ee)return null;var ne=Cb(ee);if(null===ne)return null;ee=ne[$];e:switch($){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(ne=!ne.disabled)||(ne=!("button"===(X=X.type)||"input"===X||"select"===X||"textarea"===X)),X=!ne;break e;default:X=!1}if(X)return null;if(ee&&"function"!==typeof ee)throw Error(p(231,$,typeof ee));return ee}var An=!1;if(Ue)try{var Mn={};Object.defineProperty(Mn,"passive",{get:function get(){An=!0}}),window.addEventListener("test",Mn,Mn),window.removeEventListener("test",Mn,Mn)}catch(tn){An=!1}function Mb(X,$,ee,ne,ae,de,fe,Ue,je){var Ke=Array.prototype.slice.call(arguments,3);try{$.apply(ee,Ke)}catch(et){this.onError(et)}}var En=!1,Tn=null,Pn=!1,Dn=null,Ln={onError:function onError(X){En=!0,Tn=X}};function Sb(X,$,ee,ne,ae,de,fe,Ue,je){En=!1,Tn=null,Mb.apply(Ln,arguments)}function Ub(X){var $=X,ee=X;if(X.alternate)for(;$.return;)$=$.return;else{X=$;do{0!==(4098&($=X).flags)&&(ee=$.return),X=$.return}while(X)}return 3===$.tag?ee:null}function Vb(X){if(13===X.tag){var $=X.memoizedState;if(null===$&&(null!==(X=X.alternate)&&($=X.memoizedState)),null!==$)return $.dehydrated}return null}function Wb(X){if(Ub(X)!==X)throw Error(p(188))}function Yb(X){return null!==(X=function Xb(X){var $=X.alternate;if(!$){if(null===($=Ub(X)))throw Error(p(188));return $!==X?null:X}for(var ee=X,ne=$;;){var ae=ee.return;if(null===ae)break;var de=ae.alternate;if(null===de){if(null!==(ne=ae.return)){ee=ne;continue}break}if(ae.child===de.child){for(de=ae.child;de;){if(de===ee)return Wb(ae),X;if(de===ne)return Wb(ae),$;de=de.sibling}throw Error(p(188))}if(ee.return!==ne.return)ee=ae,ne=de;else{for(var fe=!1,Ue=ae.child;Ue;){if(Ue===ee){fe=!0,ee=ae,ne=de;break}if(Ue===ne){fe=!0,ne=ae,ee=de;break}Ue=Ue.sibling}if(!fe){for(Ue=de.child;Ue;){if(Ue===ee){fe=!0,ee=de,ne=ae;break}if(Ue===ne){fe=!0,ne=de,ee=ae;break}Ue=Ue.sibling}if(!fe)throw Error(p(189))}}if(ee.alternate!==ne)throw Error(p(190))}if(3!==ee.tag)throw Error(p(188));return ee.stateNode.current===ee?X:$}(X))?Zb(X):null}function Zb(X){if(5===X.tag||6===X.tag)return X;for(X=X.child;null!==X;){var $=Zb(X);if(null!==$)return $;X=X.sibling}return null}var On=ae.unstable_scheduleCallback,In=ae.unstable_cancelCallback,Fn=ae.unstable_shouldYield,Wn=ae.unstable_requestPaint,Yn=ae.unstable_now,Jn=ae.unstable_getCurrentPriorityLevel,Zn=ae.unstable_ImmediatePriority,Kn=ae.unstable_UserBlockingPriority,$n=ae.unstable_NormalPriority,nr=ae.unstable_LowPriority,ir=ae.unstable_IdlePriority,ar=null,or=null,hr=null,dr="undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__;function nc(X){hr=X}function oc(){for(var X=new Map,$=1,ee=0;31>ee;ee++){var ne=pc($);X.set($,ne),$*=2}return X}function qc(){null!==hr&&"function"===typeof hr.markCommitStopped&&hr.markCommitStopped()}function rc(X){null!==hr&&"function"===typeof hr.markComponentRenderStarted&&hr.markComponentRenderStarted(X)}function sc(){null!==hr&&"function"===typeof hr.markComponentRenderStopped&&hr.markComponentRenderStopped()}function tc(X){null!==hr&&"function"===typeof hr.markComponentLayoutEffectUnmountStarted&&hr.markComponentLayoutEffectUnmountStarted(X)}function uc(){null!==hr&&"function"===typeof hr.markComponentLayoutEffectUnmountStopped&&hr.markComponentLayoutEffectUnmountStopped()}function vc(X){null!==hr&&"function"===typeof hr.markRenderStarted&&hr.markRenderStarted(X)}function wc(){null!==hr&&"function"===typeof hr.markRenderStopped&&hr.markRenderStopped()}function xc(X,$){null!==hr&&"function"===typeof hr.markStateUpdateScheduled&&hr.markStateUpdateScheduled(X,$)}var fr=Math.clz32?Math.clz32:function yc(X){return 0===(X>>>=0)?32:31-(vr(X)/yr|0)|0},vr=Math.log,yr=Math.LN2;function pc(X){return 1&X?"Sync":2&X?"InputContinuousHydration":4&X?"InputContinuous":8&X?"DefaultHydration":16&X?"Default":32&X?"TransitionHydration":4194240&X?"Transition":130023424&X?"Retry":134217728&X?"SelectiveHydration":268435456&X?"IdleHydration":536870912&X?"Idle":1073741824&X?"Offscreen":void 0}var br=64,_r=4194304;function Ec(X){switch(X&-X){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&X;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&X;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return X}}function Fc(X,$){var ee=X.pendingLanes;if(0===ee)return 0;var ne=0,ae=X.suspendedLanes,de=X.pingedLanes,fe=268435455&ee;if(0!==fe){var Ue=fe&~ae;0!==Ue?ne=Ec(Ue):0!==(de&=fe)&&(ne=Ec(de))}else 0!==(fe=ee&~ae)?ne=Ec(fe):0!==de&&(ne=Ec(de));if(0===ne)return 0;if(0!==$&&$!==ne&&0===($&ae)&&((ae=ne&-ne)>=(de=$&-$)||16===ae&&0!==(4194240&de)))return $;if(0!==(4&ne)&&(ne|=16&ee),0!==($=X.entangledLanes))for(X=X.entanglements,$&=ne;0<$;)ae=1<<(ee=31-fr($)),ne|=X[ee],$&=~ae;return ne}function Gc(X,$){switch(X){case 1:case 2:case 4:return $+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return $+5e3;default:return-1}}function Ic(X){return 0!==(X=-1073741825&X.pendingLanes)?X:1073741824&X?1073741824:0}function Jc(){var X=br;return 0===(4194240&(br<<=1))&&(br=64),X}function Kc(X){for(var $=[],ee=0;31>ee;ee++)$.push(X);return $}function Lc(X,$,ee){X.pendingLanes|=$,536870912!==$&&(X.suspendedLanes=0,X.pingedLanes=0),(X=X.eventTimes)[$=31-fr($)]=ee}function Nc(X,$){var ee=X.entangledLanes|=$;for(X=X.entanglements;ee;){var ne=31-fr(ee),ae=1<<ne;ae&$|X[ne]&$&&(X[ne]|=$),ee&=~ae}}function Oc(X,$,ee){if(dr)for(X=X.pendingUpdatersLaneMap;0<ee;){var ne=31-fr(ee),ae=1<<ne;X[ne].add($),ee&=~ae}}function Pc(X,$){if(dr)for(var ee=X.pendingUpdatersLaneMap,ne=X.memoizedUpdaters;0<$;){var ae=31-fr($);X=1<<ae,0<(ae=ee[ae]).size&&(ae.forEach((function(X){var $=X.alternate;null!==$&&ne.has($)||ne.add(X)})),ae.clear()),$&=~X}}var wr=0;function Qc(X){return 1<(X&=-X)?4<X?0!==(268435455&X)?16:536870912:4:1}var Cr,Ar,Mr,Er,Tr,Pr=!1,Dr=[],Br=null,Ir=null,zr=null,Fr=new Map,Vr=new Map,qr=[],Xr="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ed(X,$){switch(X){case"focusin":case"focusout":Br=null;break;case"dragenter":case"dragleave":Ir=null;break;case"mouseover":case"mouseout":zr=null;break;case"pointerover":case"pointerout":Fr.delete($.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vr.delete($.pointerId)}}function fd(X,$,ee,ne,ae,de){return null===X||X.nativeEvent!==de?(X={blockedOn:$,domEventName:ee,eventSystemFlags:ne,nativeEvent:de,targetContainers:[ae]},null!==$&&(null!==($=Bb($))&&Ar($)),X):(X.eventSystemFlags|=ne,$=X.targetContainers,null!==ae&&-1===$.indexOf(ae)&&$.push(ae),X)}function hd(X){var $=id(X.target);if(null!==$){var ee=Ub($);if(null!==ee)if(13===($=ee.tag)){if(null!==($=Vb(ee)))return X.blockedOn=$,void Tr(X.priority,(function(){Mr(ee)}))}else if(3===$&&ee.stateNode.current.memoizedState.isDehydrated)return void(X.blockedOn=3===ee.tag?ee.stateNode.containerInfo:null)}X.blockedOn=null}function jd(X){if(null!==X.blockedOn)return!1;for(var $=X.targetContainers;0<$.length;){var ee=kd(X.domEventName,X.eventSystemFlags,$[0],X.nativeEvent);if(null!==ee)return null!==($=Bb(ee))&&Ar($),X.blockedOn=ee,!1;var ne=new(ee=X.nativeEvent).constructor(ee.type,ee);gn=ne,ee.target.dispatchEvent(ne),gn=null,$.shift()}return!0}function ld(X,$,ee){jd(X)&&ee.delete($)}function md(){Pr=!1,null!==Br&&jd(Br)&&(Br=null),null!==Ir&&jd(Ir)&&(Ir=null),null!==zr&&jd(zr)&&(zr=null),Fr.forEach(ld),Vr.forEach(ld)}function nd(X,$){X.blockedOn===$&&(X.blockedOn=null,Pr||(Pr=!0,ae.unstable_scheduleCallback(ae.unstable_NormalPriority,md)))}function od(X){function b($){return nd($,X)}if(0<Dr.length){nd(Dr[0],X);for(var $=1;$<Dr.length;$++){var ee=Dr[$];ee.blockedOn===X&&(ee.blockedOn=null)}}for(null!==Br&&nd(Br,X),null!==Ir&&nd(Ir,X),null!==zr&&nd(zr,X),Fr.forEach(b),Vr.forEach(b),$=0;$<qr.length;$++)(ee=qr[$]).blockedOn===X&&(ee.blockedOn=null);for(;0<qr.length&&null===($=qr[0]).blockedOn;)hd($),null===$.blockedOn&&qr.shift()}var Kr=ct.ReactCurrentBatchConfig,ei=!0;function rd(X,$,ee,ne){var ae=wr,de=Kr.transition;Kr.transition=null;try{wr=1,sd(X,$,ee,ne)}finally{wr=ae,Kr.transition=de}}function td(X,$,ee,ne){var ae=wr,de=Kr.transition;Kr.transition=null;try{wr=4,sd(X,$,ee,ne)}finally{wr=ae,Kr.transition=de}}function sd(X,$,ee,ne){if(ei){var ae=kd(X,$,ee,ne);if(null===ae)ud(X,$,ne,li,ee),ed(X,ne);else if(function gd(X,$,ee,ne,ae){switch($){case"focusin":return Br=fd(Br,X,$,ee,ne,ae),!0;case"dragenter":return Ir=fd(Ir,X,$,ee,ne,ae),!0;case"mouseover":return zr=fd(zr,X,$,ee,ne,ae),!0;case"pointerover":var de=ae.pointerId;return Fr.set(de,fd(Fr.get(de)||null,X,$,ee,ne,ae)),!0;case"gotpointercapture":return de=ae.pointerId,Vr.set(de,fd(Vr.get(de)||null,X,$,ee,ne,ae)),!0}return!1}(ae,X,$,ee,ne))ne.stopPropagation();else if(ed(X,ne),4&$&&-1<Xr.indexOf(X)){for(;null!==ae;){var de=Bb(ae);if(null!==de&&Cr(de),null===(de=kd(X,$,ee,ne))&&ud(X,$,ne,li,ee),de===ae)break;ae=de}null!==ae&&ne.stopPropagation()}else ud(X,$,ne,null,ee)}}var li=null;function kd(X,$,ee,ne){if(li=null,null!==(X=id(X=wb(ne))))if(null===($=Ub(X)))X=null;else if(13===(ee=$.tag)){if(null!==(X=Vb($)))return X;X=null}else if(3===ee){if($.stateNode.current.memoizedState.isDehydrated)return 3===$.tag?$.stateNode.containerInfo:null;X=null}else $!==X&&(X=null);return li=X,null}function wd(X){switch(X){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jn()){case Zn:return 1;case Kn:return 4;case $n:case nr:return 16;case ir:return 536870912;default:return 16}default:return 16}}var Ei=null,Di=null,Yi=null;function Ad(){if(Yi)return Yi;var X,$,ee=Di,ne=ee.length,ae="value"in Ei?Ei.value:Ei.textContent,de=ae.length;for(X=0;X<ne&&ee[X]===ae[X];X++);var fe=ne-X;for($=1;$<=fe&&ee[ne-$]===ae[de-$];$++);return Yi=ae.slice(X,1<$?1-$:void 0)}function Bd(X){var $=X.keyCode;return"charCode"in X?0===(X=X.charCode)&&13===$&&(X=13):X=$,10===X&&(X=13),32<=X||13===X?X:0}function Cd(){return!0}function Dd(){return!1}function Ed(X){function b($,ee,ne,ae,de){for(var fe in this._reactName=$,this._targetInst=ne,this.type=ee,this.nativeEvent=ae,this.target=de,this.currentTarget=null,X)X.hasOwnProperty(fe)&&($=X[fe],this[fe]=$?$(ae):ae[fe]);return this.isDefaultPrevented=(null!=ae.defaultPrevented?ae.defaultPrevented:!1===ae.returnValue)?Cd:Dd,this.isPropagationStopped=Dd,this}return Zt(b.prototype,{preventDefault:function preventDefault(){this.defaultPrevented=!0;var X=this.nativeEvent;X&&(X.preventDefault?X.preventDefault():"unknown"!==typeof X.returnValue&&(X.returnValue=!1),this.isDefaultPrevented=Cd)},stopPropagation:function stopPropagation(){var X=this.nativeEvent;X&&(X.stopPropagation?X.stopPropagation():"unknown"!==typeof X.cancelBubble&&(X.cancelBubble=!0),this.isPropagationStopped=Cd)},persist:function persist(){},isPersistent:Cd}),b}var Zi,$i,aa,sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function timeStamp(X){return X.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},la=Ed(sa),ua=Zt({},sa,{view:0,detail:0}),ca=Ed(ua),ha=Zt({},ua,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Md,button:0,buttons:0,relatedTarget:function relatedTarget(X){return void 0===X.relatedTarget?X.fromElement===X.srcElement?X.toElement:X.fromElement:X.relatedTarget},movementX:function movementX(X){return"movementX"in X?X.movementX:(X!==aa&&(aa&&"mousemove"===X.type?(Zi=X.screenX-aa.screenX,$i=X.screenY-aa.screenY):$i=Zi=0,aa=X),Zi)},movementY:function movementY(X){return"movementY"in X?X.movementY:$i}}),da=Ed(ha),va=Ed(Zt({},ha,{dataTransfer:0})),ga=Ed(Zt({},ua,{relatedTarget:0})),ya=Ed(Zt({},sa,{animationName:0,elapsedTime:0,pseudoElement:0})),ba=Zt({},sa,{clipboardData:function clipboardData(X){return"clipboardData"in X?X.clipboardData:window.clipboardData}}),xa=Ed(ba),_a=Ed(Zt({},sa,{data:0})),wa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ca={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Aa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function be(X){var $=this.nativeEvent;return $.getModifierState?$.getModifierState(X):!!(X=Aa[X])&&!!$[X]}function Md(){return be}var Ma=Zt({},ua,{key:function key(X){if(X.key){var $=wa[X.key]||X.key;if("Unidentified"!==$)return $}return"keypress"===X.type?13===(X=Bd(X))?"Enter":String.fromCharCode(X):"keydown"===X.type||"keyup"===X.type?Ca[X.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Md,charCode:function charCode(X){return"keypress"===X.type?Bd(X):0},keyCode:function keyCode(X){return"keydown"===X.type||"keyup"===X.type?X.keyCode:0},which:function which(X){return"keypress"===X.type?Bd(X):"keydown"===X.type||"keyup"===X.type?X.keyCode:0}}),Ea=Ed(Ma),Da=Ed(Zt({},ha,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Ia=Ed(Zt({},ua,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Md})),qa=Ed(Zt({},sa,{propertyName:0,elapsedTime:0,pseudoElement:0})),eo=Zt({},ha,{deltaX:function deltaX(X){return"deltaX"in X?X.deltaX:"wheelDeltaX"in X?-X.wheelDeltaX:0},deltaY:function deltaY(X){return"deltaY"in X?X.deltaY:"wheelDeltaY"in X?-X.wheelDeltaY:"wheelDelta"in X?-X.wheelDelta:0},deltaZ:0,deltaMode:0}),to=Ed(eo),ro=[9,13,27,32],fo=Ue&&"CompositionEvent"in window,vo=null;Ue&&"documentMode"in document&&(vo=document.documentMode);var mo=Ue&&"TextEvent"in window&&!vo,go=Ue&&(!fo||vo&&8<vo&&11>=vo),bo=String.fromCharCode(32),xo=!1;function te(X,$){switch(X){case"keyup":return-1!==ro.indexOf($.keyCode);case"keydown":return 229!==$.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ue(X){return"object"===typeof(X=X.detail)&&"data"in X?X.data:null}var wo=!1;var So={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ze(X){var $=X&&X.nodeName&&X.nodeName.toLowerCase();return"input"===$?!!So[X.type]:"textarea"===$}function Ae(X,$,ee,ne){Db(ne),0<($=Be($,"onChange")).length&&(ee=new la("onChange","change",null,ee,ne),X.push({event:ee,listeners:$}))}var Ao=null,Mo=null;function Ee(X){Fe(X,0)}function Ge(X){if(Va(He(X)))return X}function Ie(X,$){if("change"===X)return $}var Eo=!1;if(Ue){var To;if(Ue){var Uo="oninput"in document;if(!Uo){var Vo=document.createElement("div");Vo.setAttribute("oninput","return;"),Uo="function"===typeof Vo.oninput}To=Uo}else To=!1;Eo=To&&(!document.documentMode||9<document.documentMode)}function Ne(){Ao&&(Ao.detachEvent("onpropertychange",Oe),Mo=Ao=null)}function Oe(X){if("value"===X.propertyName&&Ge(Mo)){var $=[];Ae($,Mo,X,wb(X)),Ib(Ee,$)}}function Pe(X,$,ee){"focusin"===X?(Ne(),Mo=ee,(Ao=$).attachEvent("onpropertychange",Oe)):"focusout"===X&&Ne()}function Qe(X){if("selectionchange"===X||"keyup"===X||"keydown"===X)return Ge(Mo)}function Re(X,$){if("click"===X)return Ge($)}function Se(X,$){if("input"===X||"change"===X)return Ge($)}var Ho="function"===typeof Object.is?Object.is:function Te(X,$){return X===$&&(0!==X||1/X===1/$)||X!==X&&$!==$};function Ve(X,$){if(Ho(X,$))return!0;if("object"!==typeof X||null===X||"object"!==typeof $||null===$)return!1;var ee=Object.keys(X),ne=Object.keys($);if(ee.length!==ne.length)return!1;for(ne=0;ne<ee.length;ne++){var ae=ee[ne];if(!je.call($,ae)||!Ho(X[ae],$[ae]))return!1}return!0}function We(X){for(;X&&X.firstChild;)X=X.firstChild;return X}function Xe(X,$){var ee,ne=We(X);for(X=0;ne;){if(3===ne.nodeType){if(ee=X+ne.textContent.length,X<=$&&ee>=$)return{node:ne,offset:$-X};X=ee}e:{for(;ne;){if(ne.nextSibling){ne=ne.nextSibling;break e}ne=ne.parentNode}ne=void 0}ne=We(ne)}}function Ye(X,$){return!(!X||!$)&&(X===$||(!X||3!==X.nodeType)&&($&&3===$.nodeType?Ye(X,$.parentNode):"contains"in X?X.contains($):!!X.compareDocumentPosition&&!!(16&X.compareDocumentPosition($))))}function Ze(){for(var X=window,$=Wa();$ instanceof X.HTMLIFrameElement;){try{var ee="string"===typeof $.contentWindow.location.href}catch(ne){ee=!1}if(!ee)break;$=Wa((X=$.contentWindow).document)}return $}function $e(X){var $=X&&X.nodeName&&X.nodeName.toLowerCase();return $&&("input"===$&&("text"===X.type||"search"===X.type||"tel"===X.type||"url"===X.type||"password"===X.type)||"textarea"===$||"true"===X.contentEditable)}function af(X){var $=Ze(),ee=X.focusedElem,ne=X.selectionRange;if($!==ee&&ee&&ee.ownerDocument&&Ye(ee.ownerDocument.documentElement,ee)){if(null!==ne&&$e(ee))if($=ne.start,void 0===(X=ne.end)&&(X=$),"selectionStart"in ee)ee.selectionStart=$,ee.selectionEnd=Math.min(X,ee.value.length);else if((X=($=ee.ownerDocument||document)&&$.defaultView||window).getSelection){X=X.getSelection();var ae=ee.textContent.length,de=Math.min(ne.start,ae);ne=void 0===ne.end?de:Math.min(ne.end,ae),!X.extend&&de>ne&&(ae=ne,ne=de,de=ae),ae=Xe(ee,de);var fe=Xe(ee,ne);ae&&fe&&(1!==X.rangeCount||X.anchorNode!==ae.node||X.anchorOffset!==ae.offset||X.focusNode!==fe.node||X.focusOffset!==fe.offset)&&(($=$.createRange()).setStart(ae.node,ae.offset),X.removeAllRanges(),de>ne?(X.addRange($),X.extend(fe.node,fe.offset)):($.setEnd(fe.node,fe.offset),X.addRange($)))}for($=[],X=ee;X=X.parentNode;)1===X.nodeType&&$.push({element:X,left:X.scrollLeft,top:X.scrollTop});for("function"===typeof ee.focus&&ee.focus(),ee=0;ee<$.length;ee++)(X=$[ee]).element.scrollLeft=X.left,X.element.scrollTop=X.top}}var Go=Ue&&"documentMode"in document&&11>=document.documentMode,Wo=null,es=null,rs=null,ls=!1;function gf(X,$,ee){var ne=ee.window===ee?ee.document:9===ee.nodeType?ee:ee.ownerDocument;ls||null==Wo||Wo!==Wa(ne)||("selectionStart"in(ne=Wo)&&$e(ne)?ne={start:ne.selectionStart,end:ne.selectionEnd}:ne={anchorNode:(ne=(ne.ownerDocument&&ne.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:ne.anchorOffset,focusNode:ne.focusNode,focusOffset:ne.focusOffset},rs&&Ve(rs,ne)||(rs=ne,0<(ne=Be(es,"onSelect")).length&&($=new la("onSelect","select",null,$,ee),X.push({event:$,listeners:ne}),$.target=Wo)))}function hf(X,$){var ee={};return ee[X.toLowerCase()]=$.toLowerCase(),ee["Webkit"+X]="webkit"+$,ee["Moz"+X]="moz"+$,ee}var us={animationend:hf("Animation","AnimationEnd"),animationiteration:hf("Animation","AnimationIteration"),animationstart:hf("Animation","AnimationStart"),transitionend:hf("Transition","TransitionEnd")},cs={},hs={};function mf(X){if(cs[X])return cs[X];if(!us[X])return X;var $,ee=us[X];for($ in ee)if(ee.hasOwnProperty($)&&$ in hs)return cs[X]=ee[$];return X}Ue&&(hs=document.createElement("div").style,"AnimationEvent"in window||(delete us.animationend.animation,delete us.animationiteration.animation,delete us.animationstart.animation),"TransitionEvent"in window||delete us.transitionend.transition);var ds=mf("animationend"),fs=mf("animationiteration"),bs=mf("animationstart"),xs=mf("transitionend"),_s=new Map,ws="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tf(X,$){_s.set(X,$),ea($,[X])}for(var Ss=0;Ss<ws.length;Ss++){var Cs=ws[Ss];tf(Cs.toLowerCase(),"on"+(Cs[0].toUpperCase()+Cs.slice(1)))}tf(ds,"onAnimationEnd"),tf(fs,"onAnimationIteration"),tf(bs,"onAnimationStart"),tf("dblclick","onDoubleClick"),tf("focusin","onFocus"),tf("focusout","onBlur"),tf(xs,"onTransitionEnd"),fa("onMouseEnter",["mouseout","mouseover"]),fa("onMouseLeave",["mouseout","mouseover"]),fa("onPointerEnter",["pointerout","pointerover"]),fa("onPointerLeave",["pointerout","pointerover"]),ea("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ea("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ea("onBeforeInput",["compositionend","keypress","textInput","paste"]),ea("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ea("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ea("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var As="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ms=new Set("cancel close invalid load scroll toggle".split(" ").concat(As));function Af(X,$,ee){var ne=X.type||"unknown-event";X.currentTarget=ee,function Tb(X,$,ee,ne,ae,de,fe,Ue,je){if(Sb.apply(this,arguments),En){if(!En)throw Error(p(198));var Ke=Tn;En=!1,Tn=null,Pn||(Pn=!0,Dn=Ke)}}(ne,$,void 0,X),X.currentTarget=null}function Fe(X,$){$=0!==(4&$);for(var ee=0;ee<X.length;ee++){var ne=X[ee],ae=ne.event;ne=ne.listeners;e:{var de=void 0;if($)for(var fe=ne.length-1;0<=fe;fe--){var Ue=ne[fe],je=Ue.instance,Ke=Ue.currentTarget;if(Ue=Ue.listener,je!==de&&ae.isPropagationStopped())break e;Af(ae,Ue,Ke),de=je}else for(fe=0;fe<ne.length;fe++){if(je=(Ue=ne[fe]).instance,Ke=Ue.currentTarget,Ue=Ue.listener,je!==de&&ae.isPropagationStopped())break e;Af(ae,Ue,Ke),de=je}}}if(Pn)throw X=Dn,Pn=!1,Dn=null,X}function F(X,$){var ee=$[Qs];void 0===ee&&(ee=$[Qs]=new Set);var ne=X+"__bubble";ee.has(ne)||(Cf($,X,2,!1),ee.add(ne))}function Df(X,$,ee){var ne=0;$&&(ne|=4),Cf(ee,X,ne,$)}var Es="_reactListening"+Math.random().toString(36).slice(2);function Ff(X){if(!X[Es]){X[Es]=!0,de.forEach((function($){"selectionchange"!==$&&(Ms.has($)||Df($,!1,X),Df($,!0,X))}));var $=9===X.nodeType?X:X.ownerDocument;null===$||$[Es]||($[Es]=!0,Df("selectionchange",!1,$))}}function Cf(X,$,ee,ne){switch(wd($)){case 1:var ae=rd;break;case 4:ae=td;break;default:ae=sd}ee=ae.bind(null,$,ee,X),ae=void 0,!An||"touchstart"!==$&&"touchmove"!==$&&"wheel"!==$||(ae=!0),ne?void 0!==ae?X.addEventListener($,ee,{capture:!0,passive:ae}):X.addEventListener($,ee,!0):void 0!==ae?X.addEventListener($,ee,{passive:ae}):X.addEventListener($,ee,!1)}function ud(X,$,ee,ne,ae){var de=ne;if(0===(1&$)&&0===(2&$)&&null!==ne)e:for(;;){if(null===ne)return;var fe=ne.tag;if(3===fe||4===fe){var Ue=ne.stateNode.containerInfo;if(Ue===ae||8===Ue.nodeType&&Ue.parentNode===ae)break;if(4===fe)for(fe=ne.return;null!==fe;){var je=fe.tag;if((3===je||4===je)&&((je=fe.stateNode.containerInfo)===ae||8===je.nodeType&&je.parentNode===ae))return;fe=fe.return}for(;null!==Ue;){if(null===(fe=id(Ue)))return;if(5===(je=fe.tag)||6===je){ne=de=fe;continue e}Ue=Ue.parentNode}}ne=ne.return}Ib((function(){var ne=de,ae=wb(ee),fe=[];e:{var Ue=_s.get(X);if(void 0!==Ue){var je=la,Ke=X;switch(X){case"keypress":if(0===Bd(ee))break e;case"keydown":case"keyup":je=Ea;break;case"focusin":Ke="focus",je=ga;break;case"focusout":Ke="blur",je=ga;break;case"beforeblur":case"afterblur":je=ga;break;case"click":if(2===ee.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":je=da;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":je=va;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":je=Ia;break;case ds:case fs:case bs:je=ya;break;case xs:je=qa;break;case"scroll":je=ca;break;case"wheel":je=to;break;case"copy":case"cut":case"paste":je=xa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":je=Da}var et=0!==(4&$),tt=!et&&"scroll"===X,nt=et?null!==Ue?Ue+"Capture":null:Ue;et=[];for(var it,ct=ne;null!==ct;){var dt=(it=ct).stateNode;if(5===it.tag&&null!==dt&&(it=dt,null!==nt&&(null!=(dt=Jb(ct,nt))&&et.push(Gf(ct,dt,it)))),tt)break;ct=ct.return}0<et.length&&(Ue=new je(Ue,Ke,null,ee,ae),fe.push({event:Ue,listeners:et}))}}if(0===(7&$)){if(je="mouseout"===X||"pointerout"===X,(!(Ue="mouseover"===X||"pointerover"===X)||ee===gn||!(Ke=ee.relatedTarget||ee.fromElement)||!id(Ke)&&!Ke[Xs])&&(je||Ue)&&(Ue=ae.window===ae?ae:(Ue=ae.ownerDocument)?Ue.defaultView||Ue.parentWindow:window,je?(je=ne,null!==(Ke=(Ke=ee.relatedTarget||ee.toElement)?id(Ke):null)&&(Ke!==(tt=Ub(Ke))||5!==Ke.tag&&6!==Ke.tag)&&(Ke=null)):(je=null,Ke=ne),je!==Ke)){if(et=da,dt="onMouseLeave",nt="onMouseEnter",ct="mouse","pointerout"!==X&&"pointerover"!==X||(et=Da,dt="onPointerLeave",nt="onPointerEnter",ct="pointer"),tt=null==je?Ue:He(je),it=null==Ke?Ue:He(Ke),(Ue=new et(dt,ct+"leave",je,ee,ae)).target=tt,Ue.relatedTarget=it,dt=null,id(ae)===ne&&((et=new et(nt,ct+"enter",Ke,ee,ae)).target=it,et.relatedTarget=tt,dt=et),tt=dt,je&&Ke)e:{for(nt=Ke,ct=0,it=et=je;it;it=If(it))ct++;for(it=0,dt=nt;dt;dt=If(dt))it++;for(;0<ct-it;)et=If(et),ct--;for(;0<it-ct;)nt=If(nt),it--;for(;ct--;){if(et===nt||null!==nt&&et===nt.alternate)break e;et=If(et),nt=If(nt)}et=null}else et=null;null!==je&&Jf(fe,Ue,je,et,!1),null!==Ke&&null!==tt&&Jf(fe,tt,Ke,et,!0)}if("select"===(je=(Ue=ne?He(ne):window).nodeName&&Ue.nodeName.toLowerCase())||"input"===je&&"file"===Ue.type)var vt=Ie;else if(ze(Ue))if(Eo)vt=Se;else{vt=Qe;var gt=Pe}else(je=Ue.nodeName)&&"input"===je.toLowerCase()&&("checkbox"===Ue.type||"radio"===Ue.type)&&(vt=Re);switch(vt&&(vt=vt(X,ne))?Ae(fe,vt,ee,ae):(gt&&gt(X,Ue,ne),"focusout"===X&&(gt=Ue._wrapperState)&&gt.controlled&&"number"===Ue.type&&ab(Ue,"number",Ue.value)),gt=ne?He(ne):window,X){case"focusin":(ze(gt)||"true"===gt.contentEditable)&&(Wo=gt,es=ne,rs=null);break;case"focusout":rs=es=Wo=null;break;case"mousedown":ls=!0;break;case"contextmenu":case"mouseup":case"dragend":ls=!1,gf(fe,ee,ae);break;case"selectionchange":if(Go)break;case"keydown":case"keyup":gf(fe,ee,ae)}var yt;if(fo)e:{switch(X){case"compositionstart":var _t="onCompositionStart";break e;case"compositionend":_t="onCompositionEnd";break e;case"compositionupdate":_t="onCompositionUpdate";break e}_t=void 0}else wo?te(X,ee)&&(_t="onCompositionEnd"):"keydown"===X&&229===ee.keyCode&&(_t="onCompositionStart");_t&&(go&&"ko"!==ee.locale&&(wo||"onCompositionStart"!==_t?"onCompositionEnd"===_t&&wo&&(yt=Ad()):(Di="value"in(Ei=ae)?Ei.value:Ei.textContent,wo=!0)),0<(gt=Be(ne,_t)).length&&(_t=new _a(_t,X,null,ee,ae),fe.push({event:_t,listeners:gt}),yt?_t.data=yt:null!==(yt=ue(ee))&&(_t.data=yt))),(yt=mo?function we(X,$){switch(X){case"compositionend":return ue($);case"keypress":return 32!==$.which?null:(xo=!0,bo);case"textInput":return(X=$.data)===bo&&xo?null:X;default:return null}}(X,ee):function xe(X,$){if(wo)return"compositionend"===X||!fo&&te(X,$)?(X=Ad(),Yi=Di=Ei=null,wo=!1,X):null;switch(X){case"paste":default:return null;case"keypress":if(!($.ctrlKey||$.altKey||$.metaKey)||$.ctrlKey&&$.altKey){if($.char&&1<$.char.length)return $.char;if($.which)return String.fromCharCode($.which)}return null;case"compositionend":return go&&"ko"!==$.locale?null:$.data}}(X,ee))&&(0<(ne=Be(ne,"onBeforeInput")).length&&(ae=new _a("onBeforeInput","beforeinput",null,ee,ae),fe.push({event:ae,listeners:ne}),ae.data=yt))}Fe(fe,$)}))}function Gf(X,$,ee){return{instance:X,listener:$,currentTarget:ee}}function Be(X,$){for(var ee=$+"Capture",ne=[];null!==X;){var ae=X,de=ae.stateNode;5===ae.tag&&null!==de&&(ae=de,null!=(de=Jb(X,ee))&&ne.unshift(Gf(X,de,ae)),null!=(de=Jb(X,$))&&ne.push(Gf(X,de,ae))),X=X.return}return ne}function If(X){if(null===X)return null;do{X=X.return}while(X&&5!==X.tag);return X||null}function Jf(X,$,ee,ne,ae){for(var de=$._reactName,fe=[];null!==ee&&ee!==ne;){var Ue=ee,je=Ue.alternate,Ke=Ue.stateNode;if(null!==je&&je===ne)break;5===Ue.tag&&null!==Ke&&(Ue=Ke,ae?null!=(je=Jb(ee,de))&&fe.unshift(Gf(ee,je,Ue)):ae||null!=(je=Jb(ee,de))&&fe.push(Gf(ee,je,Ue))),ee=ee.return}0!==fe.length&&X.push({event:$,listeners:fe})}var Ts=/\r\n?/g,Ps=/\u0000|\uFFFD/g;function Mf(X){return("string"===typeof X?X:""+X).replace(Ts,"\n").replace(Ps,"")}function Nf(X,$,ee){if($=Mf($),Mf(X)!==$&&ee)throw Error(p(425))}function Of(){}var Ds=null,Ls=null;function Rf(X,$){return"textarea"===X||"noscript"===X||"string"===typeof $.children||"number"===typeof $.children||"object"===typeof $.dangerouslySetInnerHTML&&null!==$.dangerouslySetInnerHTML&&null!=$.dangerouslySetInnerHTML.__html}var Rs="function"===typeof setTimeout?setTimeout:void 0,Bs="function"===typeof clearTimeout?clearTimeout:void 0,Ns="function"===typeof Promise?Promise:void 0,js="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof Ns?function(X){return Ns.resolve(null).then(X).catch(Vf)}:Rs;function Vf(X){setTimeout((function(){throw X}))}function Xf(X,$){var ee=$,ne=0;do{var ae=ee.nextSibling;if(X.removeChild(ee),ae&&8===ae.nodeType)if("/$"===(ee=ae.data)){if(0===ne)return X.removeChild(ae),void od($);ne--}else"$"!==ee&&"$?"!==ee&&"$!"!==ee||ne++;ee=ae}while(ee);od($)}function Yf(X){for(;null!=X;X=X.nextSibling){var $=X.nodeType;if(1===$||3===$)break;if(8===$){if("$"===($=X.data)||"$!"===$||"$?"===$)break;if("/$"===$)return null}}return X}function Zf(X){X=X.previousSibling;for(var $=0;X;){if(8===X.nodeType){var ee=X.data;if("$"===ee||"$!"===ee||"$?"===ee){if(0===$)return X;$--}else"/$"===ee&&$++}X=X.previousSibling}return null}var Ys=Math.random().toString(36).slice(2),Js="__reactFiber$"+Ys,Zs="__reactProps$"+Ys,Xs="__reactContainer$"+Ys,Qs="__reactEvents$"+Ys,Ks="__reactListeners$"+Ys,$s="__reactHandles$"+Ys;function id(X){var $=X[Js];if($)return $;for(var ee=X.parentNode;ee;){if($=ee[Xs]||ee[Js]){if(ee=$.alternate,null!==$.child||null!==ee&&null!==ee.child)for(X=Zf(X);null!==X;){if(ee=X[Js])return ee;X=Zf(X)}return $}ee=(X=ee).parentNode}return null}function Bb(X){return!(X=X[Js]||X[Xs])||5!==X.tag&&6!==X.tag&&13!==X.tag&&3!==X.tag?null:X}function He(X){if(5===X.tag||6===X.tag)return X.stateNode;throw Error(p(33))}function Cb(X){return X[Zs]||null}var il=[],al=-1;function gg(X){return{current:X}}function G(X){0>al||(X.current=il[al],il[al]=null,al--)}function H(X,$){al++,il[al]=X.current,X.current=$}var ll={},cl=gg(ll),hl=gg(!1),gl=ll;function kg(X,$){var ee=X.type.contextTypes;if(!ee)return ll;var ne=X.stateNode;if(ne&&ne.__reactInternalMemoizedUnmaskedChildContext===$)return ne.__reactInternalMemoizedMaskedChildContext;var ae,de={};for(ae in ee)de[ae]=$[ae];return ne&&((X=X.stateNode).__reactInternalMemoizedUnmaskedChildContext=$,X.__reactInternalMemoizedMaskedChildContext=de),de}function lg(X){return null!==(X=X.childContextTypes)&&void 0!==X}function mg(){G(hl),G(cl)}function ng(X,$,ee){if(cl.current!==ll)throw Error(p(168));H(cl,$),H(hl,ee)}function og(X,$,ee){var ne=X.stateNode;if($=$.childContextTypes,"function"!==typeof ne.getChildContext)return ee;for(var ae in ne=ne.getChildContext())if(!(ae in $))throw Error(p(108,Qa(X)||"Unknown",ae));return Zt({},ee,ne)}function pg(X){return X=(X=X.stateNode)&&X.__reactInternalMemoizedMergedChildContext||ll,gl=cl.current,H(cl,X),H(hl,hl.current),!0}function qg(X,$,ee){var ne=X.stateNode;if(!ne)throw Error(p(169));ee?(X=og(X,$,gl),ne.__reactInternalMemoizedMergedChildContext=X,G(hl),G(cl),H(cl,X)):G(hl),H(hl,ee)}var bl=null,_l=!1,kl=!1;function ug(X){null===bl?bl=[X]:bl.push(X)}function wg(){if(!kl&&null!==bl){kl=!0;var X=0,$=wr;try{var ee=bl;for(wr=1;X<ee.length;X++){var ne=ee[X];do{ne=ne(!0)}while(null!==ne)}bl=null,_l=!1}catch(ae){throw null!==bl&&(bl=bl.slice(X+1)),On(Zn,wg),ae}finally{wr=$,kl=!1}}return null}var Xl=ct.ReactCurrentBatchConfig;function yg(X,$){if(X&&X.defaultProps){for(var ee in $=Zt({},$),X=X.defaultProps)void 0===$[ee]&&($[ee]=X[ee]);return $}return $}var tu=gg(null),nu=null,ru=null,iu=null;function Dg(){iu=ru=nu=null}function Eg(X){var $=tu.current;G(tu),X._currentValue=$}function Fg(X,$,ee){for(;null!==X;){var ne=X.alternate;if((X.childLanes&$)!==$?(X.childLanes|=$,null!==ne&&(ne.childLanes|=$)):null!==ne&&(ne.childLanes&$)!==$&&(ne.childLanes|=$),X===ee)break;X=X.return}}function Gg(X,$){nu=X,iu=ru=null,null!==(X=X.dependencies)&&null!==X.firstContext&&(0!==(X.lanes&$)&&(dd=!0),X.firstContext=null)}function Ig(X){var $=X._currentValue;if(iu!==X)if(X={context:X,memoizedValue:$,next:null},null===ru){if(null===nu)throw Error(p(308));ru=X,nu.dependencies={lanes:0,firstContext:X}}else ru=ru.next=X;return $}var ou=null,su=!1;function Lg(X){X.updateQueue={baseState:X.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mg(X,$){X=X.updateQueue,$.updateQueue===X&&($.updateQueue={baseState:X.baseState,firstBaseUpdate:X.firstBaseUpdate,lastBaseUpdate:X.lastBaseUpdate,shared:X.shared,effects:X.effects})}function Ng(X,$){return{eventTime:X,lane:$,tag:0,payload:null,callback:null,next:null}}function Og(X,$){var ee=X.updateQueue;null!==ee&&(ee=ee.shared,Pg(X)?(null===(X=ee.interleaved)?($.next=$,null===ou?ou=[ee]:ou.push(ee)):($.next=X.next,X.next=$),ee.interleaved=$):(null===(X=ee.pending)?$.next=$:($.next=X.next,X.next=$),ee.pending=$))}function Qg(X,$,ee){if(null!==($=$.updateQueue)&&($=$.shared,0!==(4194240&ee))){var ne=$.lanes;ee|=ne&=X.pendingLanes,$.lanes=ee,Nc(X,ee)}}function Rg(X,$){var ee=X.updateQueue,ne=X.alternate;if(null!==ne&&ee===(ne=ne.updateQueue)){var ae=null,de=null;if(null!==(ee=ee.firstBaseUpdate)){do{var fe={eventTime:ee.eventTime,lane:ee.lane,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null};null===de?ae=de=fe:de=de.next=fe,ee=ee.next}while(null!==ee);null===de?ae=de=$:de=de.next=$}else ae=de=$;return ee={baseState:ne.baseState,firstBaseUpdate:ae,lastBaseUpdate:de,shared:ne.shared,effects:ne.effects},void(X.updateQueue=ee)}null===(X=ee.lastBaseUpdate)?ee.firstBaseUpdate=$:X.next=$,ee.lastBaseUpdate=$}function Sg(X,$,ee,ne){var ae=X.updateQueue;su=!1;var de=ae.firstBaseUpdate,fe=ae.lastBaseUpdate,Ue=ae.shared.pending;if(null!==Ue){ae.shared.pending=null;var je=Ue,Ke=je.next;je.next=null,null===fe?de=Ke:fe.next=Ke,fe=je;var et=X.alternate;null!==et&&((Ue=(et=et.updateQueue).lastBaseUpdate)!==fe&&(null===Ue?et.firstBaseUpdate=Ke:Ue.next=Ke,et.lastBaseUpdate=je))}if(null!==de){var tt=ae.baseState;for(fe=0,et=Ke=je=null,Ue=de;;){var nt=Ue.lane,it=Ue.eventTime;if((ne&nt)===nt){null!==et&&(et=et.next={eventTime:it,lane:0,tag:Ue.tag,payload:Ue.payload,callback:Ue.callback,next:null});e:{var ct=X,dt=Ue;switch(nt=$,it=ee,dt.tag){case 1:if("function"===typeof(ct=dt.payload)){tt=ct.call(it,tt,nt);break e}tt=ct;break e;case 3:ct.flags=-65537&ct.flags|128;case 0:if(null===(nt="function"===typeof(ct=dt.payload)?ct.call(it,tt,nt):ct)||void 0===nt)break e;tt=Zt({},tt,nt);break e;case 2:su=!0}}null!==Ue.callback&&0!==Ue.lane&&(X.flags|=64,null===(nt=ae.effects)?ae.effects=[Ue]:nt.push(Ue))}else it={eventTime:it,lane:nt,tag:Ue.tag,payload:Ue.payload,callback:Ue.callback,next:null},null===et?(Ke=et=it,je=tt):et=et.next=it,fe|=nt;if(null===(Ue=Ue.next)){if(null===(Ue=ae.shared.pending))break;Ue=(nt=Ue).next,nt.next=null,ae.lastBaseUpdate=nt,ae.shared.pending=null}}if(null===et&&(je=tt),ae.baseState=je,ae.firstBaseUpdate=Ke,ae.lastBaseUpdate=et,null!==($=ae.shared.interleaved)){ae=$;do{fe|=ae.lane,ae=ae.next}while(ae!==$)}else null===de&&(ae.shared.lanes=0);ef|=fe,X.lanes=fe,X.memoizedState=tt}}function Ug(X,$,ee){if(X=$.effects,$.effects=null,null!==X)for($=0;$<X.length;$++){var ne=X[$],ae=ne.callback;if(null!==ae){if(ne.callback=null,ne=ee,"function"!==typeof ae)throw Error(p(191,ae));ae.call(ne)}}}var cu=(new ne.Component).refs;function Wg(X,$,ee,ne){ee=null===(ee=ee(ne,$=X.memoizedState))||void 0===ee?$:Zt({},$,ee),X.memoizedState=ee,0===X.lanes&&(X.updateQueue.baseState=ee)}var hu={isMounted:function isMounted(X){return!!(X=X._reactInternals)&&Ub(X)===X},enqueueSetState:function enqueueSetState(X,$,ee){X=X._reactInternals;var ne=Xg(),ae=Yg(X),de=Ng(ne,ae);de.payload=$,void 0!==ee&&null!==ee&&(de.callback=ee),Og(X,de),null!==($=Zg(X,ae,ne))&&Qg($,X,ae),xc(X,ae)},enqueueReplaceState:function enqueueReplaceState(X,$,ee){X=X._reactInternals;var ne=Xg(),ae=Yg(X),de=Ng(ne,ae);de.tag=1,de.payload=$,void 0!==ee&&null!==ee&&(de.callback=ee),Og(X,de),null!==($=Zg(X,ae,ne))&&Qg($,X,ae),xc(X,ae)},enqueueForceUpdate:function enqueueForceUpdate(X,$){X=X._reactInternals;var ee=Xg(),ne=Yg(X),ae=Ng(ee,ne);ae.tag=2,void 0!==$&&null!==$&&(ae.callback=$),Og(X,ae),null!==($=Zg(X,ne,ee))&&Qg($,X,ne),null!==hr&&"function"===typeof hr.markForceUpdateScheduled&&hr.markForceUpdateScheduled(X,ne)}};function ah(X,$,ee,ne,ae,de,fe){return"function"===typeof(X=X.stateNode).shouldComponentUpdate?X.shouldComponentUpdate(ne,de,fe):!$.prototype||!$.prototype.isPureReactComponent||(!Ve(ee,ne)||!Ve(ae,de))}function bh(X,$,ee){var ne=!1,ae=ll,de=$.contextType;return"object"===typeof de&&null!==de?de=Ig(de):(ae=lg($)?gl:cl.current,de=(ne=null!==(ne=$.contextTypes)&&void 0!==ne)?kg(X,ae):ll),$=new $(ee,de),X.memoizedState=null!==$.state&&void 0!==$.state?$.state:null,$.updater=hu,X.stateNode=$,$._reactInternals=X,ne&&((X=X.stateNode).__reactInternalMemoizedUnmaskedChildContext=ae,X.__reactInternalMemoizedMaskedChildContext=de),$}function ch(X,$,ee,ne){X=$.state,"function"===typeof $.componentWillReceiveProps&&$.componentWillReceiveProps(ee,ne),"function"===typeof $.UNSAFE_componentWillReceiveProps&&$.UNSAFE_componentWillReceiveProps(ee,ne),$.state!==X&&hu.enqueueReplaceState($,$.state,null)}function dh(X,$,ee,ne){var ae=X.stateNode;ae.props=ee,ae.state=X.memoizedState,ae.refs=cu,Lg(X);var de=$.contextType;"object"===typeof de&&null!==de?ae.context=Ig(de):(de=lg($)?gl:cl.current,ae.context=kg(X,de)),ae.state=X.memoizedState,"function"===typeof(de=$.getDerivedStateFromProps)&&(Wg(X,$,de,ee),ae.state=X.memoizedState),"function"===typeof $.getDerivedStateFromProps||"function"===typeof ae.getSnapshotBeforeUpdate||"function"!==typeof ae.UNSAFE_componentWillMount&&"function"!==typeof ae.componentWillMount||($=ae.state,"function"===typeof ae.componentWillMount&&ae.componentWillMount(),"function"===typeof ae.UNSAFE_componentWillMount&&ae.UNSAFE_componentWillMount(),$!==ae.state&&hu.enqueueReplaceState(ae,ae.state,null),Sg(X,ee,ae,ne),ae.state=X.memoizedState),"function"===typeof ae.componentDidMount&&(X.flags|=4194308)}var vu=[],gu=0,yu=null,wu=0,Su=[],ku=0,Cu=null,Au=1,Mu="";function nh(X,$){vu[gu++]=wu,vu[gu++]=yu,yu=X,wu=$}function oh(X,$,ee){Su[ku++]=Au,Su[ku++]=Mu,Su[ku++]=Cu,Cu=X;var ne=Au;X=Mu;var ae=32-fr(ne)-1;ne&=~(1<<ae),ee+=1;var de=32-fr($)+ae;if(30<de){var fe=ae-ae%5;de=(ne&(1<<fe)-1).toString(32),ne>>=fe,ae-=fe,Au=1<<32-fr($)+ae|ee<<ae|ne,Mu=de+X}else Au=1<<de|ee<<ae|ne,Mu=X}function ph(X){null!==X.return&&(nh(X,1),oh(X,1,0))}function qh(X){for(;X===yu;)yu=vu[--gu],vu[gu]=null,wu=vu[--gu],vu[gu]=null;for(;X===Cu;)Cu=Su[--ku],Su[ku]=null,Mu=Su[--ku],Su[ku]=null,Au=Su[--ku],Su[ku]=null}var Tu=null,Pu=null,Lu=!1,Ou=null;function uh(X,$){var ee=vh(5,null,null,0);ee.elementType="DELETED",ee.stateNode=$,ee.return=X,null===($=X.deletions)?(X.deletions=[ee],X.flags|=16):$.push(ee)}function wh(X,$){switch(X.tag){case 5:var ee=X.type;return null!==($=1!==$.nodeType||ee.toLowerCase()!==$.nodeName.toLowerCase()?null:$)&&(X.stateNode=$,Tu=X,Pu=Yf($.firstChild),!0);case 6:return null!==($=""===X.pendingProps||3!==$.nodeType?null:$)&&(X.stateNode=$,Tu=X,Pu=null,!0);case 13:return null!==($=8!==$.nodeType?null:$)&&(ee=null!==Cu?{id:Au,overflow:Mu}:null,X.memoizedState={dehydrated:$,treeContext:ee,retryLane:1073741824},(ee=vh(18,null,null,0)).stateNode=$,ee.return=X,X.child=ee,Tu=X,Pu=null,!0);default:return!1}}function xh(X){return 0!==(1&X.mode)&&0===(128&X.flags)}function yh(X){if(Lu){var $=Pu;if($){var ee=$;if(!wh(X,$)){if(xh(X))throw Error(p(418));$=Yf(ee.nextSibling);var ne=Tu;$&&wh(X,$)?uh(ne,ee):(X.flags=-4097&X.flags|2,Lu=!1,Tu=X)}}else{if(xh(X))throw Error(p(418));X.flags=-4097&X.flags|2,Lu=!1,Tu=X}}}function zh(X){for(X=X.return;null!==X&&5!==X.tag&&3!==X.tag&&13!==X.tag;)X=X.return;Tu=X}function Ah(X){if(X!==Tu)return!1;if(!Lu)return zh(X),Lu=!0,!1;var $;if(($=3!==X.tag)&&!($=5!==X.tag)&&($="head"!==($=X.type)&&"body"!==$&&!Rf(X.type,X.memoizedProps)),$&&($=Pu)){if(xh(X)){for(X=Pu;X;)X=Yf(X.nextSibling);throw Error(p(418))}for(;$;)uh(X,$),$=Yf($.nextSibling)}if(zh(X),13===X.tag){if(!(X=null!==(X=X.memoizedState)?X.dehydrated:null))throw Error(p(317));e:{for(X=X.nextSibling,$=0;X;){if(8===X.nodeType){var ee=X.data;if("/$"===ee){if(0===$){Pu=Yf(X.nextSibling);break e}$--}else"$"!==ee&&"$!"!==ee&&"$?"!==ee||$++}X=X.nextSibling}Pu=null}}else Pu=Tu?Yf(X.stateNode.nextSibling):null;return!0}function Bh(){Pu=Tu=null,Lu=!1}function Ch(X){null===Ou?Ou=[X]:Ou.push(X)}function Dh(X,$,ee){if(null!==(X=ee.ref)&&"function"!==typeof X&&"object"!==typeof X){if(ee._owner){if(ee=ee._owner){if(1!==ee.tag)throw Error(p(309));var ne=ee.stateNode}if(!ne)throw Error(p(147,X));var ae=ne,de=""+X;return null!==$&&null!==$.ref&&"function"===typeof $.ref&&$.ref._stringRef===de?$.ref:($=function b(X){var b=ae.refs;b===cu&&(b=ae.refs={}),null===X?delete b[de]:b[de]=X},$._stringRef=de,$)}if("string"!==typeof X)throw Error(p(284));if(!ee._owner)throw Error(p(290,X))}return X}function Eh(X,$){throw X=Object.prototype.toString.call($),Error(p(31,"[object Object]"===X?"object with keys {"+Object.keys($).join(", ")+"}":X))}function Fh(X){return(0,X._init)(X._payload)}function Gh(X){function b($,ee){if(X){var ne=$.deletions;null===ne?($.deletions=[ee],$.flags|=16):ne.push(ee)}}function c($,ee){if(!X)return null;for(;null!==ee;)b($,ee),ee=ee.sibling;return null}function d(X,$){for(X=new Map;null!==$;)null!==$.key?X.set($.key,$):X.set($.index,$),$=$.sibling;return X}function e(X,$){return(X=Hh(X,$)).index=0,X.sibling=null,X}function f($,ee,ne){return $.index=ne,X?null!==(ne=$.alternate)?(ne=ne.index)<ee?($.flags|=2,ee):ne:($.flags|=2,ee):($.flags|=1048576,ee)}function g($){return X&&null===$.alternate&&($.flags|=2),$}function h(X,$,ee,ne){return null===$||6!==$.tag?(($=Ih(ee,X.mode,ne)).return=X,$):(($=e($,ee)).return=X,$)}function k(X,$,ee,ne){var ae=ee.type;return ae===gt?n(X,$,ee.props.children,ne,ee.key):null!==$&&($.elementType===ae||"object"===typeof ae&&null!==ae&&ae.$$typeof===Bt&&Fh(ae)===$.type)?((ne=e($,ee.props)).ref=Dh(X,$,ee),ne.return=X,ne):((ne=Jh(ee.type,ee.key,ee.props,null,X.mode,ne)).ref=Dh(X,$,ee),ne.return=X,ne)}function l(X,$,ee,ne){return null===$||4!==$.tag||$.stateNode.containerInfo!==ee.containerInfo||$.stateNode.implementation!==ee.implementation?(($=Kh(ee,X.mode,ne)).return=X,$):(($=e($,ee.children||[])).return=X,$)}function n(X,$,ee,ne,ae){return null===$||7!==$.tag?(($=Lh(ee,X.mode,ne,ae)).return=X,$):(($=e($,ee)).return=X,$)}function u(X,$,ee){if("string"===typeof $&&""!==$||"number"===typeof $)return($=Ih(""+$,X.mode,ee)).return=X,$;if("object"===typeof $&&null!==$){switch($.$$typeof){case dt:return(ee=Jh($.type,$.key,$.props,null,X.mode,ee)).ref=Dh(X,null,$),ee.return=X,ee;case vt:return($=Kh($,X.mode,ee)).return=X,$;case Bt:return u(X,(0,$._init)($._payload),ee)}if(Qt($)||Ja($))return($=Lh($,X.mode,ee,null)).return=X,$;Eh(X,$)}return null}function q(X,$,ee,ne){var ae=null!==$?$.key:null;if("string"===typeof ee&&""!==ee||"number"===typeof ee)return null!==ae?null:h(X,$,""+ee,ne);if("object"===typeof ee&&null!==ee){switch(ee.$$typeof){case dt:return ee.key===ae?k(X,$,ee,ne):null;case vt:return ee.key===ae?l(X,$,ee,ne):null;case Bt:return q(X,$,(ae=ee._init)(ee._payload),ne)}if(Qt(ee)||Ja(ee))return null!==ae?null:n(X,$,ee,ne,null);Eh(X,ee)}return null}function z(X,$,ee,ne,ae){if("string"===typeof ne&&""!==ne||"number"===typeof ne)return h($,X=X.get(ee)||null,""+ne,ae);if("object"===typeof ne&&null!==ne){switch(ne.$$typeof){case dt:return k($,X=X.get(null===ne.key?ee:ne.key)||null,ne,ae);case vt:return l($,X=X.get(null===ne.key?ee:ne.key)||null,ne,ae);case Bt:return z(X,$,ee,(0,ne._init)(ne._payload),ae)}if(Qt(ne)||Ja(ne))return n($,X=X.get(ee)||null,ne,ae,null);Eh($,ne)}return null}function m($,ee,ne,ae){for(var de=null,fe=null,Ue=ee,je=ee=0,Ke=null;null!==Ue&&je<ne.length;je++){Ue.index>je?(Ke=Ue,Ue=null):Ke=Ue.sibling;var et=q($,Ue,ne[je],ae);if(null===et){null===Ue&&(Ue=Ke);break}X&&Ue&&null===et.alternate&&b($,Ue),ee=f(et,ee,je),null===fe?de=et:fe.sibling=et,fe=et,Ue=Ke}if(je===ne.length)return c($,Ue),Lu&&nh($,je),de;if(null===Ue){for(;je<ne.length;je++)null!==(Ue=u($,ne[je],ae))&&(ee=f(Ue,ee,je),null===fe?de=Ue:fe.sibling=Ue,fe=Ue);return Lu&&nh($,je),de}for(Ue=d($,Ue);je<ne.length;je++)null!==(Ke=z(Ue,$,je,ne[je],ae))&&(X&&null!==Ke.alternate&&Ue.delete(null===Ke.key?je:Ke.key),ee=f(Ke,ee,je),null===fe?de=Ke:fe.sibling=Ke,fe=Ke);return X&&Ue.forEach((function(X){return b($,X)})),Lu&&nh($,je),de}function w($,ee,ne,ae){var de=Ja(ne);if("function"!==typeof de)throw Error(p(150));if(null==(ne=de.call(ne)))throw Error(p(151));for(var fe=de=null,Ue=ee,je=ee=0,Ke=null,et=ne.next();null!==Ue&&!et.done;je++,et=ne.next()){Ue.index>je?(Ke=Ue,Ue=null):Ke=Ue.sibling;var tt=q($,Ue,et.value,ae);if(null===tt){null===Ue&&(Ue=Ke);break}X&&Ue&&null===tt.alternate&&b($,Ue),ee=f(tt,ee,je),null===fe?de=tt:fe.sibling=tt,fe=tt,Ue=Ke}if(et.done)return c($,Ue),Lu&&nh($,je),de;if(null===Ue){for(;!et.done;je++,et=ne.next())null!==(et=u($,et.value,ae))&&(ee=f(et,ee,je),null===fe?de=et:fe.sibling=et,fe=et);return Lu&&nh($,je),de}for(Ue=d($,Ue);!et.done;je++,et=ne.next())null!==(et=z(Ue,$,je,et.value,ae))&&(X&&null!==et.alternate&&Ue.delete(null===et.key?je:et.key),ee=f(et,ee,je),null===fe?de=et:fe.sibling=et,fe=et);return X&&Ue.forEach((function(X){return b($,X)})),Lu&&nh($,je),de}return function C(X,$,ee,ne){if("object"===typeof ee&&null!==ee&&ee.type===gt&&null===ee.key&&(ee=ee.props.children),"object"===typeof ee&&null!==ee){switch(ee.$$typeof){case dt:e:{for(var ae=ee.key,de=$;null!==de;){if(de.key===ae){if((ae=ee.type)===gt){if(7===de.tag){c(X,de.sibling),($=e(de,ee.props.children)).return=X,X=$;break e}}else if(de.elementType===ae||"object"===typeof ae&&null!==ae&&ae.$$typeof===Bt&&Fh(ae)===de.type){c(X,de.sibling),($=e(de,ee.props)).ref=Dh(X,de,ee),$.return=X,X=$;break e}c(X,de);break}b(X,de),de=de.sibling}ee.type===gt?(($=Lh(ee.props.children,X.mode,ne,ee.key)).return=X,X=$):((ne=Jh(ee.type,ee.key,ee.props,null,X.mode,ne)).ref=Dh(X,$,ee),ne.return=X,X=ne)}return g(X);case vt:e:{for(de=ee.key;null!==$;){if($.key===de){if(4===$.tag&&$.stateNode.containerInfo===ee.containerInfo&&$.stateNode.implementation===ee.implementation){c(X,$.sibling),($=e($,ee.children||[])).return=X,X=$;break e}c(X,$);break}b(X,$),$=$.sibling}($=Kh(ee,X.mode,ne)).return=X,X=$}return g(X);case Bt:return C(X,$,(de=ee._init)(ee._payload),ne)}if(Qt(ee))return m(X,$,ee,ne);if(Ja(ee))return w(X,$,ee,ne);Eh(X,ee)}return"string"===typeof ee&&""!==ee||"number"===typeof ee?(ee=""+ee,null!==$&&6===$.tag?(c(X,$.sibling),($=e($,ee)).return=X,X=$):(c(X,$),($=Ih(ee,X.mode,ne)).return=X,X=$),g(X)):c(X,$)}}var Ru=Gh(!0),Bu=Gh(!1),Iu={},zu=gg(Iu),Nu=gg(Iu),Fu=gg(Iu);function Sh(X){if(X===Iu)throw Error(p(174));return X}function Th(X,$){switch(H(Fu,$),H(Nu,X),H(zu,Iu),X=$.nodeType){case 9:case 11:$=($=$.documentElement)?$.namespaceURI:jb(null,"");break;default:$=jb($=(X=8===X?$.parentNode:$).namespaceURI||null,X=X.tagName)}G(zu),H(zu,$)}function Uh(){G(zu),G(Nu),G(Fu)}function Vh(X){Sh(Fu.current);var $=Sh(zu.current),ee=jb($,X.type);$!==ee&&(H(Nu,X),H(zu,ee))}function Wh(X){Nu.current===X&&(G(zu),G(Nu))}var Uu=gg(0);function Xh(X){for(var $=X;null!==$;){if(13===$.tag){var ee=$.memoizedState;if(null!==ee&&(null===(ee=ee.dehydrated)||"$?"===ee.data||"$!"===ee.data))return $}else if(19===$.tag&&void 0!==$.memoizedProps.revealOrder){if(0!==(128&$.flags))return $}else if(null!==$.child){$.child.return=$,$=$.child;continue}if($===X)break;for(;null===$.sibling;){if(null===$.return||$.return===X)return null;$=$.return}$.sibling.return=$.return,$=$.sibling}return null}var Vu=[];function Zh(){for(var X=0;X<Vu.length;X++)Vu[X]._workInProgressVersionPrimary=null;Vu.length=0}var Hu=ct.ReactCurrentDispatcher,Gu=ct.ReactCurrentBatchConfig,Wu=0,qu=null,Zu=null,Xu=null,Qu=!1,Ku=!1,$u=0,ec=0;function gi(){throw Error(p(321))}function hi(X,$){if(null===$)return!1;for(var ee=0;ee<$.length&&ee<X.length;ee++)if(!Ho(X[ee],$[ee]))return!1;return!0}function ii(X,$,ee,ne,ae,de){if(Wu=de,qu=$,$.memoizedState=null,$.updateQueue=null,$.lanes=0,Hu.current=null===X||null===X.memoizedState?_c:kc,X=ee(ne,ae),Ku){de=0;do{if(Ku=!1,$u=0,25<=de)throw Error(p(301));de+=1,Xu=Zu=null,$.updateQueue=null,Hu.current=Cc,X=ee(ne,ae)}while(Ku)}if(Hu.current=bc,$=null!==Zu&&null!==Zu.next,Wu=0,Xu=Zu=qu=null,Qu=!1,$)throw Error(p(300));return X}function ni(){var X=0!==$u;return $u=0,X}function oi(){var X={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Xu?qu.memoizedState=Xu=X:Xu=Xu.next=X,Xu}function pi(){if(null===Zu){var X=qu.alternate;X=null!==X?X.memoizedState:null}else X=Zu.next;var $=null===Xu?qu.memoizedState:Xu.next;if(null!==$)Xu=$,Zu=X;else{if(null===X)throw Error(p(310));X={memoizedState:(Zu=X).memoizedState,baseState:Zu.baseState,baseQueue:Zu.baseQueue,queue:Zu.queue,next:null},null===Xu?qu.memoizedState=Xu=X:Xu=Xu.next=X}return Xu}function qi(X,$){return"function"===typeof $?$(X):$}function ri(X){var $=pi(),ee=$.queue;if(null===ee)throw Error(p(311));ee.lastRenderedReducer=X;var ne=Zu,ae=ne.baseQueue,de=ee.pending;if(null!==de){if(null!==ae){var fe=ae.next;ae.next=de.next,de.next=fe}ne.baseQueue=ae=de,ee.pending=null}if(null!==ae){de=ae.next,ne=ne.baseState;var Ue=fe=null,je=null,Ke=de;do{var et=Ke.lane;if((Wu&et)===et)null!==je&&(je=je.next={lane:0,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null}),ne=Ke.hasEagerState?Ke.eagerState:X(ne,Ke.action);else{var tt={lane:et,action:Ke.action,hasEagerState:Ke.hasEagerState,eagerState:Ke.eagerState,next:null};null===je?(Ue=je=tt,fe=ne):je=je.next=tt,qu.lanes|=et,ef|=et}Ke=Ke.next}while(null!==Ke&&Ke!==de);null===je?fe=ne:je.next=Ue,Ho(ne,$.memoizedState)||(dd=!0),$.memoizedState=ne,$.baseState=fe,$.baseQueue=je,ee.lastRenderedState=ne}if(null!==(X=ee.interleaved)){ae=X;do{de=ae.lane,qu.lanes|=de,ef|=de,ae=ae.next}while(ae!==X)}else null===ae&&(ee.lanes=0);return[$.memoizedState,ee.dispatch]}function si(X){var $=pi(),ee=$.queue;if(null===ee)throw Error(p(311));ee.lastRenderedReducer=X;var ne=ee.dispatch,ae=ee.pending,de=$.memoizedState;if(null!==ae){ee.pending=null;var fe=ae=ae.next;do{de=X(de,fe.action),fe=fe.next}while(fe!==ae);Ho(de,$.memoizedState)||(dd=!0),$.memoizedState=de,null===$.baseQueue&&($.baseState=de),ee.lastRenderedState=de}return[de,ne]}function ti(){}function ui(X,$){var ee=qu,ne=pi(),ae=$(),de=!Ho(ne.memoizedState,ae);if(de&&(ne.memoizedState=ae,dd=!0),ne=ne.queue,vi(wi.bind(null,ee,ne,X),[X]),ne.getSnapshot!==$||de||null!==Xu&&1&Xu.memoizedState.tag){if(ee.flags|=2048,xi(9,yi.bind(null,ee,ne,ae,$),void 0,null),null===Gd)throw Error(p(349));0!==(30&Wu)||zi(ee,$,ae)}return ae}function zi(X,$,ee){X.flags|=16384,X={getSnapshot:$,value:ee},null===($=qu.updateQueue)?($={lastEffect:null,stores:null},qu.updateQueue=$,$.stores=[X]):null===(ee=$.stores)?$.stores=[X]:ee.push(X)}function yi(X,$,ee,ne){$.value=ee,$.getSnapshot=ne,Ai($)&&Zg(X,1,-1)}function wi(X,$,ee){return ee((function(){Ai($)&&Zg(X,1,-1)}))}function Ai(X){var $=X.getSnapshot;X=X.value;try{var ee=$();return!Ho(X,ee)}catch(ne){return!0}}function Bi(X){var $=oi();return"function"===typeof X&&(X=X()),$.memoizedState=$.baseState=X,X={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qi,lastRenderedState:X},$.queue=X,X=X.dispatch=Ci.bind(null,qu,X),[$.memoizedState,X]}function xi(X,$,ee,ne){return X={tag:X,create:$,destroy:ee,deps:ne,next:null},null===($=qu.updateQueue)?($={lastEffect:null,stores:null},qu.updateQueue=$,$.lastEffect=X.next=X):null===(ee=$.lastEffect)?$.lastEffect=X.next=X:(ne=ee.next,ee.next=X,X.next=ne,$.lastEffect=X),X}function Fi(){return pi().memoizedState}function Gi(X,$,ee,ne){var ae=oi();qu.flags|=X,ae.memoizedState=xi(1|$,ee,void 0,void 0===ne?null:ne)}function Hi(X,$,ee,ne){var ae=pi();ne=void 0===ne?null:ne;var de=void 0;if(null!==Zu){var fe=Zu.memoizedState;if(de=fe.destroy,null!==ne&&hi(ne,fe.deps))return void(ae.memoizedState=xi($,ee,de,ne))}qu.flags|=X,ae.memoizedState=xi(1|$,ee,de,ne)}function Ii(X,$){return Gi(8390656,8,X,$)}function vi(X,$){return Hi(2048,8,X,$)}function Ji(X,$){return Hi(4,2,X,$)}function Ki(X,$){return Hi(4,4,X,$)}function Li(X,$){return"function"===typeof $?(X=X(),$(X),function(){$(null)}):null!==$&&void 0!==$?(X=X(),$.current=X,function(){$.current=null}):void 0}function Mi(X,$,ee){return ee=null!==ee&&void 0!==ee?ee.concat([X]):null,Hi(4,4,Li.bind(null,$,X),ee)}function Ni(){}function Oi(X,$){var ee=pi();$=void 0===$?null:$;var ne=ee.memoizedState;return null!==ne&&null!==$&&hi($,ne[1])?ne[0]:(ee.memoizedState=[X,$],X)}function Pi(X,$){var ee=pi();$=void 0===$?null:$;var ne=ee.memoizedState;return null!==ne&&null!==$&&hi($,ne[1])?ne[0]:(X=X(),ee.memoizedState=[X,$],X)}function Qi(X,$,ee){return 0===(21&Wu)?(X.baseState&&(X.baseState=!1,dd=!0),X.memoizedState=ee):(Ho(ee,$)||(ee=Jc(),qu.lanes|=ee,ef|=ee,X.baseState=!0),$)}function Ri(X,$){var ee=wr;wr=0!==ee&&4>ee?ee:4,X(!0);var ne=Gu.transition;Gu.transition={};try{X(!1),$()}finally{wr=ee,Gu.transition=ne}}function Si(){return pi().memoizedState}function Ti(X,$,ee){var ne=Yg(X);ee={lane:ne,action:ee,hasEagerState:!1,eagerState:null,next:null},Ui(X)?Vi($,ee):(Wi(X,$,ee),null!==(ee=Zg(X,ne,ee=Xg()))&&Xi(ee,$,ne)),xc(X,ne)}function Ci(X,$,ee){var ne=Yg(X),ae={lane:ne,action:ee,hasEagerState:!1,eagerState:null,next:null};if(Ui(X))Vi($,ae);else{Wi(X,$,ae);var de=X.alternate;if(0===X.lanes&&(null===de||0===de.lanes)&&null!==(de=$.lastRenderedReducer))try{var fe=$.lastRenderedState,Ue=de(fe,ee);if(ae.hasEagerState=!0,ae.eagerState=Ue,Ho(Ue,fe))return}catch(je){}null!==(ee=Zg(X,ne,ee=Xg()))&&Xi(ee,$,ne)}xc(X,ne)}function Ui(X){var $=X.alternate;return X===qu||null!==$&&$===qu}function Vi(X,$){Ku=Qu=!0;var ee=X.pending;null===ee?$.next=$:($.next=ee.next,ee.next=$),X.pending=$}function Wi(X,$,ee){Pg(X)?(null===(X=$.interleaved)?(ee.next=ee,null===ou?ou=[$]:ou.push($)):(ee.next=X.next,X.next=ee),$.interleaved=ee):(null===(X=$.pending)?ee.next=ee:(ee.next=X.next,X.next=ee),$.pending=ee)}function Xi(X,$,ee){if(0!==(4194240&ee)){var ne=$.lanes;ee|=ne&=X.pendingLanes,$.lanes=ee,Nc(X,ee)}}var bc={readContext:Ig,useCallback:gi,useContext:gi,useEffect:gi,useImperativeHandle:gi,useInsertionEffect:gi,useLayoutEffect:gi,useMemo:gi,useReducer:gi,useRef:gi,useState:gi,useDebugValue:gi,useDeferredValue:gi,useTransition:gi,useMutableSource:gi,useSyncExternalStore:gi,useId:gi,unstable_isNewReconciler:!1},_c={readContext:Ig,useCallback:function useCallback(X,$){return oi().memoizedState=[X,void 0===$?null:$],X},useContext:Ig,useEffect:Ii,useImperativeHandle:function useImperativeHandle(X,$,ee){return ee=null!==ee&&void 0!==ee?ee.concat([X]):null,Gi(4194308,4,Li.bind(null,$,X),ee)},useLayoutEffect:function useLayoutEffect(X,$){return Gi(4194308,4,X,$)},useInsertionEffect:function useInsertionEffect(X,$){return Gi(4,2,X,$)},useMemo:function useMemo(X,$){var ee=oi();return $=void 0===$?null:$,X=X(),ee.memoizedState=[X,$],X},useReducer:function useReducer(X,$,ee){var ne=oi();return $=void 0!==ee?ee($):$,ne.memoizedState=ne.baseState=$,X={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:X,lastRenderedState:$},ne.queue=X,X=X.dispatch=Ti.bind(null,qu,X),[ne.memoizedState,X]},useRef:function useRef(X){return X={current:X},oi().memoizedState=X},useState:Bi,useDebugValue:Ni,useDeferredValue:function useDeferredValue(X){return oi().memoizedState=X},useTransition:function useTransition(){var X=Bi(!1),$=X[0];return X=Ri.bind(null,X[1]),oi().memoizedState=X,[$,X]},useMutableSource:function useMutableSource(){},useSyncExternalStore:function useSyncExternalStore(X,$,ee){var ne=qu,ae=oi();if(Lu){if(void 0===ee)throw Error(p(407));ee=ee()}else{if(ee=$(),null===Gd)throw Error(p(349));0!==(30&Wu)||zi(ne,$,ee)}ae.memoizedState=ee;var de={value:ee,getSnapshot:$};return ae.queue=de,Ii(wi.bind(null,ne,de,X),[X]),ne.flags|=2048,xi(9,yi.bind(null,ne,de,ee,$),void 0,null),ee},useId:function useId(){var X=oi(),$=Gd.identifierPrefix;if(Lu){var ee=Mu;$=":"+$+"R"+(ee=(Au&~(1<<32-fr(Au)-1)).toString(32)+ee),0<(ee=$u++)&&($+="H"+ee.toString(32)),$+=":"}else $=":"+$+"r"+(ee=ec++).toString(32)+":";return X.memoizedState=$},unstable_isNewReconciler:!1},kc={readContext:Ig,useCallback:Oi,useContext:Ig,useEffect:vi,useImperativeHandle:Mi,useInsertionEffect:Ji,useLayoutEffect:Ki,useMemo:Pi,useReducer:ri,useRef:Fi,useState:function useState(){return ri(qi)},useDebugValue:Ni,useDeferredValue:function useDeferredValue(X){return Qi(pi(),Zu.memoizedState,X)},useTransition:function useTransition(){return[ri(qi)[0],pi().memoizedState]},useMutableSource:ti,useSyncExternalStore:ui,useId:Si,unstable_isNewReconciler:!1},Cc={readContext:Ig,useCallback:Oi,useContext:Ig,useEffect:vi,useImperativeHandle:Mi,useInsertionEffect:Ji,useLayoutEffect:Ki,useMemo:Pi,useReducer:si,useRef:Fi,useState:function useState(){return si(qi)},useDebugValue:Ni,useDeferredValue:function useDeferredValue(X){var $=pi();return null===Zu?$.memoizedState=X:Qi($,Zu.memoizedState,X)},useTransition:function useTransition(){return[si(qi)[0],pi().memoizedState]},useMutableSource:ti,useSyncExternalStore:ui,useId:Si,unstable_isNewReconciler:!1},Ac=ae.unstable_now,Dc=0,Bc=-1,Wc=-1,fh=-1,Mh=!1,Oh=!1;function ej(X,$){if(0<=Wc){var ee=Ac()-Wc;X.actualDuration+=ee,$&&(X.selfBaseDuration=ee),Wc=-1}}function fj(X){if(0<=Bc){var $=Ac()-Bc;for(Bc=-1,X=X.return;null!==X;){switch(X.tag){case 3:case 12:return void(X.stateNode.effectDuration+=$)}X=X.return}}}function gj(X){if(0<=fh){var $=Ac()-fh;for(fh=-1,X=X.return;null!==X;){switch(X.tag){case 3:case 12:return void(null!==(X=X.stateNode)&&(X.passiveEffectDuration+=$))}X=X.return}}}function hj(){Bc=Ac()}function ij(X){for(var $=X.child;$;)X.actualDuration+=$.actualDuration,$=$.sibling}function jj(X,$){try{var ee="",ne=$;do{ee+=Oa(ne),ne=ne.return}while(ne);var ae=ee}catch(de){ae="\nError generating stack: "+de.message+"\n"+de.stack}return{value:X,source:$,stack:ae}}function kj(X,$){try{console.error($.value)}catch(ee){setTimeout((function(){throw ee}))}}var Rh,Nh,$h,ad="function"===typeof WeakMap?WeakMap:Map;function mj(X,$,ee){(ee=Ng(-1,ee)).tag=3,ee.payload={element:null};var ne=$.value;return ee.callback=function(){pf||(pf=!0,$f=ne),kj(0,$)},ee}function pj(X,$,ee){(ee=Ng(-1,ee)).tag=3;var ne=X.type.getDerivedStateFromError;if("function"===typeof ne){var ae=$.value;ee.payload=function(){return ne(ae)},ee.callback=function(){kj(0,$)}}var de=X.stateNode;return null!==de&&"function"===typeof de.componentDidCatch&&(ee.callback=function(){kj(0,$),"function"!==typeof ne&&(null===ep?ep=new Set([this]):ep.add(this));var X=$.stack;this.componentDidCatch($.value,{componentStack:null!==X?X:""})}),ee}function rj(X,$,ee){var ne=X.pingCache;if(null===ne){ne=X.pingCache=new ad;var ae=new Set;ne.set($,ae)}else void 0===(ae=ne.get($))&&(ae=new Set,ne.set($,ae));ae.has(ee)||(ae.add(ee),ne=sj.bind(null,X,$,ee),dr&&tj(X,ee),$.then(ne,ne))}function uj(X){do{var $;if(($=13===X.tag)&&($=null===($=X.memoizedState)||null!==$.dehydrated),$)return X;X=X.return}while(null!==X);return null}function vj(X,$,ee,ne,ae){return 0===(1&X.mode)?(X===$?X.flags|=65536:(X.flags|=128,ee.flags|=131072,ee.flags&=-52805,1===ee.tag&&(null===ee.alternate?ee.tag=17:(($=Ng(-1,1)).tag=2,Og(ee,$))),ee.lanes|=1),X):(X.flags|=65536,X.lanes=ae,X)}function Aj(X,$){if(!Lu)switch(X.tailMode){case"hidden":$=X.tail;for(var ee=null;null!==$;)null!==$.alternate&&(ee=$),$=$.sibling;null===ee?X.tail=null:ee.sibling=null;break;case"collapsed":ee=X.tail;for(var ne=null;null!==ee;)null!==ee.alternate&&(ne=ee),ee=ee.sibling;null===ne?$||null===X.tail?X.tail=null:X.tail.sibling=null:ne.sibling=null}}function P(X){var $=null!==X.alternate&&X.alternate.child===X.child,ee=0,ne=0;if($)if(0!==(2&X.mode)){for(var ae=X.selfBaseDuration,de=X.child;null!==de;)ee|=de.lanes|de.childLanes,ne|=14680064&de.subtreeFlags,ne|=14680064&de.flags,ae+=de.treeBaseDuration,de=de.sibling;X.treeBaseDuration=ae}else for(ae=X.child;null!==ae;)ee|=ae.lanes|ae.childLanes,ne|=14680064&ae.subtreeFlags,ne|=14680064&ae.flags,ae.return=X,ae=ae.sibling;else if(0!==(2&X.mode)){ae=X.actualDuration,de=X.selfBaseDuration;for(var fe=X.child;null!==fe;)ee|=fe.lanes|fe.childLanes,ne|=fe.subtreeFlags,ne|=fe.flags,ae+=fe.actualDuration,de+=fe.treeBaseDuration,fe=fe.sibling;X.actualDuration=ae,X.treeBaseDuration=de}else for(ae=X.child;null!==ae;)ee|=ae.lanes|ae.childLanes,ne|=ae.subtreeFlags,ne|=ae.flags,ae.return=X,ae=ae.sibling;return X.subtreeFlags|=ne,X.childLanes=ee,$}function Bj(X,$,ee){var ne=$.pendingProps;switch(qh($),$.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return P($),null;case 1:case 17:return lg($.type)&&mg(),P($),null;case 3:return ne=$.stateNode,Uh(),G(hl),G(cl),Zh(),ne.pendingContext&&(ne.context=ne.pendingContext,ne.pendingContext=null),null!==X&&null!==X.child||(Ah($)?$.flags|=4:null===X||X.memoizedState.isDehydrated&&0===(256&$.flags)||($.flags|=1024,null!==Ou&&(Cj(Ou),Ou=null))),P($),null;case 5:Wh($);var ae=Sh(Fu.current);if(ee=$.type,null!==X&&null!=$.stateNode)Nh(X,$,ee,ne),X.ref!==$.ref&&($.flags|=512,$.flags|=2097152);else{if(!ne){if(null===$.stateNode)throw Error(p(166));return P($),null}if(X=Sh(zu.current),Ah($)){ne=$.stateNode,ee=$.type;var de=$.memoizedProps;switch(ne[Js]=$,ne[Zs]=de,X=0!==(1&$.mode),ee){case"dialog":F("cancel",ne),F("close",ne);break;case"iframe":case"object":case"embed":F("load",ne);break;case"video":case"audio":for(ae=0;ae<As.length;ae++)F(As[ae],ne);break;case"source":F("error",ne);break;case"img":case"image":case"link":F("error",ne),F("load",ne);break;case"details":F("toggle",ne);break;case"input":Ya(ne,de),F("invalid",ne);break;case"select":ne._wrapperState={wasMultiple:!!de.multiple},F("invalid",ne);break;case"textarea":fb(ne,de),F("invalid",ne)}for(var Ue in tb(ee,de),ae=null,de)if(de.hasOwnProperty(Ue)){var je=de[Ue];"children"===Ue?"string"===typeof je?ne.textContent!==je&&(!0!==de.suppressHydrationWarning&&Nf(ne.textContent,je,X),ae=["children",je]):"number"===typeof je&&ne.textContent!==""+je&&(!0!==de.suppressHydrationWarning&&Nf(ne.textContent,je,X),ae=["children",""+je]):fe.hasOwnProperty(Ue)&&null!=je&&"onScroll"===Ue&&F("scroll",ne)}switch(ee){case"input":Ua(ne),bb(ne,de,!0);break;case"textarea":Ua(ne),hb(ne);break;case"select":case"option":break;default:"function"===typeof de.onClick&&(ne.onclick=Of)}ne=ae,$.updateQueue=ne,null!==ne&&($.flags|=4)}else{Ue=9===ae.nodeType?ae:ae.ownerDocument,"http://www.w3.org/1999/xhtml"===X&&(X=ib(ee)),"http://www.w3.org/1999/xhtml"===X?"script"===ee?((X=Ue.createElement("div")).innerHTML="<script><\/script>",X=X.removeChild(X.firstChild)):"string"===typeof ne.is?X=Ue.createElement(ee,{is:ne.is}):(X=Ue.createElement(ee),"select"===ee&&(Ue=X,ne.multiple?Ue.multiple=!0:ne.size&&(Ue.size=ne.size))):X=Ue.createElementNS(X,ee),X[Js]=$,X[Zs]=ne,Rh(X,$),$.stateNode=X;e:{switch(Ue=ub(ee,ne),ee){case"dialog":F("cancel",X),F("close",X),ae=ne;break;case"iframe":case"object":case"embed":F("load",X),ae=ne;break;case"video":case"audio":for(ae=0;ae<As.length;ae++)F(As[ae],X);ae=ne;break;case"source":F("error",X),ae=ne;break;case"img":case"image":case"link":F("error",X),F("load",X),ae=ne;break;case"details":F("toggle",X),ae=ne;break;case"input":Ya(X,ne),ae=Xa(X,ne),F("invalid",X);break;case"option":default:ae=ne;break;case"select":X._wrapperState={wasMultiple:!!ne.multiple},ae=Zt({},ne,{value:void 0}),F("invalid",X);break;case"textarea":fb(X,ne),ae=eb(X,ne),F("invalid",X)}for(de in tb(ee,ae),je=ae)if(je.hasOwnProperty(de)){var Ke=je[de];"style"===de?rb(X,Ke):"dangerouslySetInnerHTML"===de?null!=(Ke=Ke?Ke.__html:void 0)&&un(X,Ke):"children"===de?"string"===typeof Ke?("textarea"!==ee||""!==Ke)&&mb(X,Ke):"number"===typeof Ke&&mb(X,""+Ke):"suppressContentEditableWarning"!==de&&"suppressHydrationWarning"!==de&&"autoFocus"!==de&&(fe.hasOwnProperty(de)?null!=Ke&&"onScroll"===de&&F("scroll",X):null!=Ke&&ta(X,de,Ke,Ue))}switch(ee){case"input":Ua(X),bb(X,ne,!1);break;case"textarea":Ua(X),hb(X);break;case"option":null!=ne.value&&X.setAttribute("value",""+Ra(ne.value));break;case"select":X.multiple=!!ne.multiple,null!=(de=ne.value)?db(X,!!ne.multiple,de,!1):null!=ne.defaultValue&&db(X,!!ne.multiple,ne.defaultValue,!0);break;default:"function"===typeof ae.onClick&&(X.onclick=Of)}switch(ee){case"button":case"input":case"select":case"textarea":ne=!!ne.autoFocus;break e;case"img":ne=!0;break e;default:ne=!1}}ne&&($.flags|=4)}null!==$.ref&&($.flags|=512,$.flags|=2097152)}return P($),null;case 6:if(X&&null!=$.stateNode)$h(0,$,X.memoizedProps,ne);else{if("string"!==typeof ne&&null===$.stateNode)throw Error(p(166));if(ee=Sh(Fu.current),Sh(zu.current),Ah($)){if(ne=$.stateNode,ee=$.memoizedProps,ne[Js]=$,(de=ne.nodeValue!==ee)&&null!==(X=Tu))switch(X.tag){case 3:Nf(ne.nodeValue,ee,0!==(1&X.mode));break;case 5:!0!==X.memoizedProps.suppressHydrationWarning&&Nf(ne.nodeValue,ee,0!==(1&X.mode))}de&&($.flags|=4)}else(ne=(9===ee.nodeType?ee:ee.ownerDocument).createTextNode(ne))[Js]=$,$.stateNode=ne}return P($),null;case 13:if(G(Uu),ne=$.memoizedState,Lu&&null!==Pu&&0!==(1&$.mode)&&0===(128&$.flags)){for(ne=Pu;ne;)ne=Yf(ne.nextSibling);return Bh(),$.flags|=98560,$}if(null!==ne&&null!==ne.dehydrated){if(ee=Ah($),null===X){if(!ee)throw Error(p(318));if(!(ee=null!==(ee=$.memoizedState)?ee.dehydrated:null))throw Error(p(317));ee[Js]=$,P($),0!==(2&$.mode)&&null!==ne&&(null!==(ne=$.child)&&($.treeBaseDuration-=ne.treeBaseDuration))}else Bh(),0===(128&$.flags)&&($.memoizedState=null),$.flags|=4,P($),0!==(2&$.mode)&&null!==ne&&(null!==(ne=$.child)&&($.treeBaseDuration-=ne.treeBaseDuration));return null}return null!==Ou&&(Cj(Ou),Ou=null),0!==(128&$.flags)?($.lanes=ee,0!==(2&$.mode)&&ij($),$):(ne=null!==ne,ee=!1,null===X?Ah($):ee=null!==X.memoizedState,ne!==ee&&ne&&($.child.flags|=8192,0!==(1&$.mode)&&(null===X||0!==(1&Uu.current)?0===Kd&&(Kd=3):Dj())),null!==$.updateQueue&&($.flags|=4),P($),0!==(2&$.mode)&&ne&&(null!==(ne=$.child)&&($.treeBaseDuration-=ne.treeBaseDuration)),null);case 4:return Uh(),null===X&&Ff($.stateNode.containerInfo),P($),null;case 10:return Eg($.type._context),P($),null;case 19:if(G(Uu),null===(de=$.memoizedState))return P($),null;if(ne=0!==(128&$.flags),null===(Ue=de.rendering))if(ne)Aj(de,!1);else{if(0!==Kd||null!==X&&0!==(128&X.flags))for(X=$.child;null!==X;){if(null!==(Ue=Xh(X))){for($.flags|=128,Aj(de,!1),null!==(ne=Ue.updateQueue)&&($.updateQueue=ne,$.flags|=4),$.subtreeFlags=0,ne=ee,ee=$.child;null!==ee;)Ue=ne,(de=ee).flags&=14680066,null===(X=de.alternate)?(de.childLanes=0,de.lanes=Ue,de.child=null,de.subtreeFlags=0,de.memoizedProps=null,de.memoizedState=null,de.updateQueue=null,de.dependencies=null,de.stateNode=null,de.selfBaseDuration=0,de.treeBaseDuration=0):(de.childLanes=X.childLanes,de.lanes=X.lanes,de.child=X.child,de.subtreeFlags=0,de.deletions=null,de.memoizedProps=X.memoizedProps,de.memoizedState=X.memoizedState,de.updateQueue=X.updateQueue,de.type=X.type,Ue=X.dependencies,de.dependencies=null===Ue?null:{lanes:Ue.lanes,firstContext:Ue.firstContext},de.selfBaseDuration=X.selfBaseDuration,de.treeBaseDuration=X.treeBaseDuration),ee=ee.sibling;return H(Uu,1&Uu.current|2),$.child}X=X.sibling}null!==de.tail&&Yn()>df&&($.flags|=128,ne=!0,Aj(de,!1),$.lanes=4194304)}else{if(!ne)if(null!==(X=Xh(Ue))){if($.flags|=128,ne=!0,null!==(ee=X.updateQueue)&&($.updateQueue=ee,$.flags|=4),Aj(de,!0),null===de.tail&&"hidden"===de.tailMode&&!Ue.alternate&&!Lu)return P($),null}else 2*Yn()-de.renderingStartTime>df&&1073741824!==ee&&($.flags|=128,ne=!0,Aj(de,!1),$.lanes=4194304);de.isBackwards?(Ue.sibling=$.child,$.child=Ue):(null!==(ee=de.last)?ee.sibling=Ue:$.child=Ue,de.last=Ue)}return null!==de.tail?($=de.tail,de.rendering=$,de.tail=$.sibling,de.renderingStartTime=Yn(),$.sibling=null,ee=Uu.current,H(Uu,ne?1&ee|2:1&ee),$):(P($),null);case 22:case 23:return Fj(),ne=null!==$.memoizedState,null!==X&&null!==X.memoizedState!==ne&&($.flags|=8192),ne&&0!==(1&$.mode)?0!==(1073741824&Zd)&&(P($),6&$.subtreeFlags&&($.flags|=8192)):P($),null;case 24:case 25:return null}throw Error(p(156,$.tag))}Rh=function wj(X,$){for(var ee=$.child;null!==ee;){if(5===ee.tag||6===ee.tag)X.appendChild(ee.stateNode);else if(4!==ee.tag&&null!==ee.child){ee.child.return=ee,ee=ee.child;continue}if(ee===$)break;for(;null===ee.sibling;){if(null===ee.return||ee.return===$)return;ee=ee.return}ee.sibling.return=ee.return,ee=ee.sibling}},Nh=function yj(X,$,ee,ne){var ae=X.memoizedProps;if(ae!==ne){X=$.stateNode,Sh(zu.current);var de,Ue=null;switch(ee){case"input":ae=Xa(X,ae),ne=Xa(X,ne),Ue=[];break;case"select":ae=Zt({},ae,{value:void 0}),ne=Zt({},ne,{value:void 0}),Ue=[];break;case"textarea":ae=eb(X,ae),ne=eb(X,ne),Ue=[];break;default:"function"!==typeof ae.onClick&&"function"===typeof ne.onClick&&(X.onclick=Of)}for(et in tb(ee,ne),ee=null,ae)if(!ne.hasOwnProperty(et)&&ae.hasOwnProperty(et)&&null!=ae[et])if("style"===et){var je=ae[et];for(de in je)je.hasOwnProperty(de)&&(ee||(ee={}),ee[de]="")}else"dangerouslySetInnerHTML"!==et&&"children"!==et&&"suppressContentEditableWarning"!==et&&"suppressHydrationWarning"!==et&&"autoFocus"!==et&&(fe.hasOwnProperty(et)?Ue||(Ue=[]):(Ue=Ue||[]).push(et,null));for(et in ne){var Ke=ne[et];if(je=null!=ae?ae[et]:void 0,ne.hasOwnProperty(et)&&Ke!==je&&(null!=Ke||null!=je))if("style"===et)if(je){for(de in je)!je.hasOwnProperty(de)||Ke&&Ke.hasOwnProperty(de)||(ee||(ee={}),ee[de]="");for(de in Ke)Ke.hasOwnProperty(de)&&je[de]!==Ke[de]&&(ee||(ee={}),ee[de]=Ke[de])}else ee||(Ue||(Ue=[]),Ue.push(et,ee)),ee=Ke;else"dangerouslySetInnerHTML"===et?(Ke=Ke?Ke.__html:void 0,je=je?je.__html:void 0,null!=Ke&&je!==Ke&&(Ue=Ue||[]).push(et,Ke)):"children"===et?"string"!==typeof Ke&&"number"!==typeof Ke||(Ue=Ue||[]).push(et,""+Ke):"suppressContentEditableWarning"!==et&&"suppressHydrationWarning"!==et&&(fe.hasOwnProperty(et)?(null!=Ke&&"onScroll"===et&&F("scroll",X),Ue||je===Ke||(Ue=[])):(Ue=Ue||[]).push(et,Ke))}ee&&(Ue=Ue||[]).push("style",ee);var et=Ue;($.updateQueue=et)&&($.flags|=4)}},$h=function zj(X,$,ee,ne){ee!==ne&&($.flags|=4)};var cd=ct.ReactCurrentOwner,dd=!1;function Ij(X,$,ee,ne){$.child=null===X?Bu($,null,ee,ne):Ru($,X.child,ee,ne)}function Jj(X,$,ee,ne,ae){ee=ee.render;var de=$.ref;return Gg($,ae),rc($),ne=ii(X,$,ee,ne,de,ae),ee=ni(),sc(),null===X||dd?(Lu&&ee&&ph($),$.flags|=1,Ij(X,$,ne,ae),$.child):($.updateQueue=X.updateQueue,$.flags&=-2053,X.lanes&=~ae,Kj(X,$,ae))}function Lj(X,$,ee,ne,ae){if(null===X){var de=ee.type;return"function"!==typeof de||Mj(de)||void 0!==de.defaultProps||null!==ee.compare||void 0!==ee.defaultProps?((X=Jh(ee.type,null,ne,$,$.mode,ae)).ref=$.ref,X.return=$,$.child=X):($.tag=15,$.type=de,Nj(X,$,de,ne,ae))}if(de=X.child,0===(X.lanes&ae)){var fe=de.memoizedProps;if((ee=null!==(ee=ee.compare)?ee:Ve)(fe,ne)&&X.ref===$.ref)return Kj(X,$,ae)}return $.flags|=1,(X=Hh(de,ne)).ref=$.ref,X.return=$,$.child=X}function Nj(X,$,ee,ne,ae){if(null!==X){var de=X.memoizedProps;if(Ve(de,ne)&&X.ref===$.ref){if(dd=!1,$.pendingProps=ne=de,0===(X.lanes&ae))return $.lanes=X.lanes,Kj(X,$,ae);0!==(131072&X.flags)&&(dd=!0)}}return Oj(X,$,ee,ne,ae)}function Pj(X,$,ee){var ne=$.pendingProps,ae=ne.children,de=null!==X?X.memoizedState:null;if("hidden"===ne.mode)if(0===(1&$.mode))$.memoizedState={baseLanes:0,cachePool:null,transitions:null},H(Qd,Zd),Zd|=ee;else{if(0===(1073741824&ee))return X=null!==de?de.baseLanes|ee:ee,$.lanes=$.childLanes=1073741824,$.memoizedState={baseLanes:X,cachePool:null,transitions:null},$.updateQueue=null,H(Qd,Zd),Zd|=X,null;$.memoizedState={baseLanes:0,cachePool:null,transitions:null},ne=null!==de?de.baseLanes:ee,H(Qd,Zd),Zd|=ne}else null!==de?(ne=de.baseLanes|ee,$.memoizedState=null):ne=ee,H(Qd,Zd),Zd|=ne;return Ij(X,$,ae,ee),$.child}function Tj(X,$){var ee=$.ref;(null===X&&null!==ee||null!==X&&X.ref!==ee)&&($.flags|=512,$.flags|=2097152)}function Oj(X,$,ee,ne,ae){var de=lg(ee)?gl:cl.current;return de=kg($,de),Gg($,ae),rc($),ee=ii(X,$,ee,ne,de,ae),ne=ni(),sc(),null===X||dd?(Lu&&ne&&ph($),$.flags|=1,Ij(X,$,ee,ae),$.child):($.updateQueue=X.updateQueue,$.flags&=-2053,X.lanes&=~ae,Kj(X,$,ae))}function Uj(X,$,ee,ne,ae){if(lg(ee)){var de=!0;pg($)}else de=!1;if(Gg($,ae),null===$.stateNode)null!==X&&(X.alternate=null,$.alternate=null,$.flags|=2),bh($,ee,ne),dh($,ee,ne,ae),ne=!0;else if(null===X){var fe=$.stateNode,Ue=$.memoizedProps;fe.props=Ue;var je=fe.context,Ke=ee.contextType;"object"===typeof Ke&&null!==Ke?Ke=Ig(Ke):Ke=kg($,Ke=lg(ee)?gl:cl.current);var et=ee.getDerivedStateFromProps,tt="function"===typeof et||"function"===typeof fe.getSnapshotBeforeUpdate;tt||"function"!==typeof fe.UNSAFE_componentWillReceiveProps&&"function"!==typeof fe.componentWillReceiveProps||(Ue!==ne||je!==Ke)&&ch($,fe,ne,Ke),su=!1;var nt=$.memoizedState;fe.state=nt,Sg($,ne,fe,ae),je=$.memoizedState,Ue!==ne||nt!==je||hl.current||su?("function"===typeof et&&(Wg($,ee,et,ne),je=$.memoizedState),(Ue=su||ah($,ee,Ue,ne,nt,je,Ke))?(tt||"function"!==typeof fe.UNSAFE_componentWillMount&&"function"!==typeof fe.componentWillMount||("function"===typeof fe.componentWillMount&&fe.componentWillMount(),"function"===typeof fe.UNSAFE_componentWillMount&&fe.UNSAFE_componentWillMount()),"function"===typeof fe.componentDidMount&&($.flags|=4194308)):("function"===typeof fe.componentDidMount&&($.flags|=4194308),$.memoizedProps=ne,$.memoizedState=je),fe.props=ne,fe.state=je,fe.context=Ke,ne=Ue):("function"===typeof fe.componentDidMount&&($.flags|=4194308),ne=!1)}else{fe=$.stateNode,Mg(X,$),Ue=$.memoizedProps,Ke=$.type===$.elementType?Ue:yg($.type,Ue),fe.props=Ke,tt=$.pendingProps,nt=fe.context,"object"===typeof(je=ee.contextType)&&null!==je?je=Ig(je):je=kg($,je=lg(ee)?gl:cl.current);var it=ee.getDerivedStateFromProps;(et="function"===typeof it||"function"===typeof fe.getSnapshotBeforeUpdate)||"function"!==typeof fe.UNSAFE_componentWillReceiveProps&&"function"!==typeof fe.componentWillReceiveProps||(Ue!==tt||nt!==je)&&ch($,fe,ne,je),su=!1,nt=$.memoizedState,fe.state=nt,Sg($,ne,fe,ae);var ct=$.memoizedState;Ue!==tt||nt!==ct||hl.current||su?("function"===typeof it&&(Wg($,ee,it,ne),ct=$.memoizedState),(Ke=su||ah($,ee,Ke,ne,nt,ct,je)||!1)?(et||"function"!==typeof fe.UNSAFE_componentWillUpdate&&"function"!==typeof fe.componentWillUpdate||("function"===typeof fe.componentWillUpdate&&fe.componentWillUpdate(ne,ct,je),"function"===typeof fe.UNSAFE_componentWillUpdate&&fe.UNSAFE_componentWillUpdate(ne,ct,je)),"function"===typeof fe.componentDidUpdate&&($.flags|=4),"function"===typeof fe.getSnapshotBeforeUpdate&&($.flags|=1024)):("function"!==typeof fe.componentDidUpdate||Ue===X.memoizedProps&&nt===X.memoizedState||($.flags|=4),"function"!==typeof fe.getSnapshotBeforeUpdate||Ue===X.memoizedProps&&nt===X.memoizedState||($.flags|=1024),$.memoizedProps=ne,$.memoizedState=ct),fe.props=ne,fe.state=ct,fe.context=je,ne=Ke):("function"!==typeof fe.componentDidUpdate||Ue===X.memoizedProps&&nt===X.memoizedState||($.flags|=4),"function"!==typeof fe.getSnapshotBeforeUpdate||Ue===X.memoizedProps&&nt===X.memoizedState||($.flags|=1024),ne=!1)}return Vj(X,$,ee,ne,de,ae)}function Vj(X,$,ee,ne,ae,de){Tj(X,$);var fe=0!==(128&$.flags);if(!ne&&!fe)return ae&&qg($,ee,!1),Kj(X,$,de);if(ne=$.stateNode,cd.current=$,fe&&"function"!==typeof ee.getDerivedStateFromError){var Ue=null;Wc=-1}else rc($),Ue=ne.render(),sc();return $.flags|=1,null!==X&&fe?(fe=Ue,$.child=Ru($,X.child,null,de),$.child=Ru($,null,fe,de)):Ij(X,$,Ue,de),$.memoizedState=ne.state,ae&&qg($,ee,!0),$.child}function Wj(X){var $=X.stateNode;$.pendingContext?ng(0,$.pendingContext,$.pendingContext!==$.context):$.context&&ng(0,$.context,!1),Th(X,$.containerInfo)}function Xj(X,$,ee,ne,ae){return Bh(),Ch(ae),$.flags|=256,Ij(X,$,ee,ne),$.child}var pd={dehydrated:null,treeContext:null,retryLane:0};function Zj(X){return{baseLanes:X,cachePool:null,transitions:null}}function ak(X,$){return{baseLanes:X.baseLanes|$,cachePool:null,transitions:X.transitions}}function bk(X,$,ee){var ne,ae=$.pendingProps,de=Uu.current,fe=!1,Ue=0!==(128&$.flags);if((ne=Ue)||(ne=(null===X||null!==X.memoizedState)&&0!==(2&de)),ne?(fe=!0,$.flags&=-129):null!==X&&null===X.memoizedState||(de|=1),H(Uu,1&de),null===X)return yh($),null!==(X=$.memoizedState)&&null!==(X=X.dehydrated)?(0===(1&$.mode)?$.lanes=1:"$!"===X.data?$.lanes=8:$.lanes=1073741824,null):(de=ae.children,X=ae.fallback,fe?(ae=$.mode,fe=$.child,de={mode:"hidden",children:de},0===(1&ae)&&null!==fe?(fe.childLanes=0,fe.pendingProps=de,2&$.mode&&(fe.actualDuration=0,fe.actualStartTime=-1,fe.selfBaseDuration=0,fe.treeBaseDuration=0)):fe=ck(de,ae,0,null),X=Lh(X,ae,ee,null),fe.return=$,X.return=$,fe.sibling=X,$.child=fe,$.child.memoizedState=Zj(ee),$.memoizedState=pd,X):dk($,de));if(null!==(de=X.memoizedState)){if(null!==(ne=de.dehydrated)){if(Ue)return 256&$.flags?($.flags&=-257,ek(X,$,ee,Error(p(422)))):null!==$.memoizedState?($.child=X.child,$.flags|=128,null):(fe=ae.fallback,de=$.mode,ae=ck({mode:"visible",children:ae.children},de,0,null),(fe=Lh(fe,de,ee,null)).flags|=2,ae.return=$,fe.return=$,ae.sibling=fe,$.child=ae,0!==(1&$.mode)&&Ru($,X.child,null,ee),$.child.memoizedState=Zj(ee),$.memoizedState=pd,fe);if(0===(1&$.mode))$=ek(X,$,ee,null);else if("$!"===ne.data)$=ek(X,$,ee,Error(p(419)));else if(ae=0!==(ee&X.childLanes),dd||ae){if(null!==(ae=Gd)){switch(ee&-ee){case 4:fe=2;break;case 16:fe=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:fe=32;break;case 536870912:fe=268435456;break;default:fe=0}0!==(ae=0!==(fe&(ae.suspendedLanes|ee))?0:fe)&&ae!==de.retryLane&&(de.retryLane=ae,Zg(X,ae,-1))}Dj(),$=ek(X,$,ee,Error(p(421)))}else"$?"===ne.data?($.flags|=128,$.child=X.child,$=fk.bind(null,X),ne._reactRetry=$,$=null):(ee=de.treeContext,Pu=Yf(ne.nextSibling),Tu=$,Lu=!0,Ou=null,null!==ee&&(Su[ku++]=Au,Su[ku++]=Mu,Su[ku++]=Cu,Au=ee.id,Mu=ee.overflow,Cu=$),($=dk($,$.pendingProps.children)).flags|=4096);return $}return fe?(ae=gk(X,$,ae.children,ae.fallback,ee),fe=$.child,de=X.child.memoizedState,fe.memoizedState=null===de?Zj(ee):ak(de,ee),fe.childLanes=X.childLanes&~ee,$.memoizedState=pd,ae):(ee=hk(X,$,ae.children,ee),$.memoizedState=null,ee)}return fe?(ae=gk(X,$,ae.children,ae.fallback,ee),fe=$.child,de=X.child.memoizedState,fe.memoizedState=null===de?Zj(ee):ak(de,ee),fe.childLanes=X.childLanes&~ee,$.memoizedState=pd,ae):(ee=hk(X,$,ae.children,ee),$.memoizedState=null,ee)}function dk(X,$){return($=ck({mode:"visible",children:$},X.mode,0,null)).return=X,X.child=$}function hk(X,$,ee,ne){var ae=X.child;return X=ae.sibling,ee=Hh(ae,{mode:"visible",children:ee}),0===(1&$.mode)&&(ee.lanes=ne),ee.return=$,ee.sibling=null,null!==X&&(null===(ne=$.deletions)?($.deletions=[X],$.flags|=16):ne.push(X)),$.child=ee}function gk(X,$,ee,ne,ae){var de=$.mode,fe=(X=X.child).sibling,Ue={mode:"hidden",children:ee};return 0===(1&de)&&$.child!==X?((ee=$.child).childLanes=0,ee.pendingProps=Ue,2&$.mode&&(ee.actualDuration=0,ee.actualStartTime=-1,ee.selfBaseDuration=X.selfBaseDuration,ee.treeBaseDuration=X.treeBaseDuration),$.deletions=null):(ee=Hh(X,Ue)).subtreeFlags=14680064&X.subtreeFlags,null!==fe?ne=Hh(fe,ne):(ne=Lh(ne,de,ae,null)).flags|=2,ne.return=$,ee.return=$,ee.sibling=ne,$.child=ee,ne}function ek(X,$,ee,ne){return null!==ne&&Ch(ne),Ru($,X.child,null,ee),(X=dk($,$.pendingProps.children)).flags|=2,$.memoizedState=null,X}function ik(X,$,ee){X.lanes|=$;var ne=X.alternate;null!==ne&&(ne.lanes|=$),Fg(X.return,$,ee)}function jk(X,$,ee,ne,ae){var de=X.memoizedState;null===de?X.memoizedState={isBackwards:$,rendering:null,renderingStartTime:0,last:ne,tail:ee,tailMode:ae}:(de.isBackwards=$,de.rendering=null,de.renderingStartTime=0,de.last=ne,de.tail=ee,de.tailMode=ae)}function kk(X,$,ee){var ne=$.pendingProps,ae=ne.revealOrder,de=ne.tail;if(Ij(X,$,ne.children,ee),0!==(2&(ne=Uu.current)))ne=1&ne|2,$.flags|=128;else{if(null!==X&&0!==(128&X.flags))e:for(X=$.child;null!==X;){if(13===X.tag)null!==X.memoizedState&&ik(X,ee,$);else if(19===X.tag)ik(X,ee,$);else if(null!==X.child){X.child.return=X,X=X.child;continue}if(X===$)break e;for(;null===X.sibling;){if(null===X.return||X.return===$)break e;X=X.return}X.sibling.return=X.return,X=X.sibling}ne&=1}if(H(Uu,ne),0===(1&$.mode))$.memoizedState=null;else switch(ae){case"forwards":for(ee=$.child,ae=null;null!==ee;)null!==(X=ee.alternate)&&null===Xh(X)&&(ae=ee),ee=ee.sibling;null===(ee=ae)?(ae=$.child,$.child=null):(ae=ee.sibling,ee.sibling=null),jk($,!1,ae,ee,de);break;case"backwards":for(ee=null,ae=$.child,$.child=null;null!==ae;){if(null!==(X=ae.alternate)&&null===Xh(X)){$.child=ae;break}X=ae.sibling,ae.sibling=ee,ee=ae,ae=X}jk($,!0,ee,null,de);break;case"together":jk($,!1,null,null,void 0);break;default:$.memoizedState=null}return $.child}function Kj(X,$,ee){if(null!==X&&($.dependencies=X.dependencies),Wc=-1,ef|=$.lanes,0===(ee&$.childLanes))return null;if(null!==X&&$.child!==X.child)throw Error(p(153));if(null!==$.child){for(ee=Hh(X=$.child,X.pendingProps),$.child=ee,ee.return=$;null!==X.sibling;)X=X.sibling,(ee=ee.sibling=Hh(X,X.pendingProps)).return=$;ee.sibling=null}return $.child}function mk(X,$){switch(qh($),$.tag){case 1:return lg($.type)&&mg(),65536&(X=$.flags)?($.flags=-65537&X|128,0!==(2&$.mode)&&ij($),$):null;case 3:return Uh(),G(hl),G(cl),Zh(),0!==(65536&(X=$.flags))&&0===(128&X)?($.flags=-65537&X|128,$):null;case 5:return Wh($),null;case 13:if(G(Uu),null!==(X=$.memoizedState)&&null!==X.dehydrated){if(null===$.alternate)throw Error(p(340));Bh()}return 65536&(X=$.flags)?($.flags=-65537&X|128,0!==(2&$.mode)&&ij($),$):null;case 19:return G(Uu),null;case 4:return Uh(),null;case 10:return Eg($.type._context),null;case 22:case 23:return Fj(),null;default:return null}}var vd=!1,yd=!1,bd="function"===typeof WeakSet?WeakSet:Set,xd=null,_d=null,Sd=null;function sk(X,$){if($.props=X.memoizedProps,$.state=X.memoizedState,2&X.mode)try{hj(),$.componentWillUnmount()}finally{fj(X)}else $.componentWillUnmount()}function tk(X,$){var ee=X.ref;if(null!==ee)if("function"===typeof ee)try{if(2&X.mode)try{hj(),ee(null)}finally{fj(X)}else ee(null)}catch(ne){U(X,$,ne)}else ee.current=null}function uk(X,$,ee){try{ee()}catch(ne){U(X,$,ne)}}var Td=!1;function xk(X,$,ee){var ne=$.updateQueue;if(null!==(ne=null!==ne?ne.lastEffect:null)){var ae=ne=ne.next;do{if((ae.tag&X)===X){var de=ae.destroy;ae.destroy=void 0,void 0!==de&&(0!==(8&X)?null!==hr&&"function"===typeof hr.markComponentPassiveEffectUnmountStarted&&hr.markComponentPassiveEffectUnmountStarted($):0!==(4&X)&&tc($),uk($,ee,de),0!==(8&X)?null!==hr&&"function"===typeof hr.markComponentPassiveEffectUnmountStopped&&hr.markComponentPassiveEffectUnmountStopped():0!==(4&X)&&uc())}ae=ae.next}while(ae!==ne)}}function yk(X,$){var ee=$.updateQueue;if(null!==(ee=null!==ee?ee.lastEffect:null)){var ne=ee=ee.next;do{if((ne.tag&X)===X){0!==(8&X)?null!==hr&&"function"===typeof hr.markComponentPassiveEffectMountStarted&&hr.markComponentPassiveEffectMountStarted($):0!==(4&X)&&null!==hr&&"function"===typeof hr.markComponentLayoutEffectMountStarted&&hr.markComponentLayoutEffectMountStarted($);var ae=ne.create;ne.destroy=ae(),0!==(8&X)?null!==hr&&"function"===typeof hr.markComponentPassiveEffectMountStopped&&hr.markComponentPassiveEffectMountStopped():0!==(4&X)&&null!==hr&&"function"===typeof hr.markComponentLayoutEffectMountStopped&&hr.markComponentLayoutEffectMountStopped()}ne=ne.next}while(ne!==ee)}}function zk(X){var $=X.ref;if(null!==$){var ee=X.stateNode;if("function"===typeof $)if(2&X.mode)try{hj(),$(ee)}finally{fj(X)}else $(ee);else $.current=ee}}function Ak(X){var $=X.alternate;null!==$&&(X.alternate=null,Ak($)),X.child=null,X.deletions=null,X.sibling=null,5===X.tag&&(null!==($=X.stateNode)&&(delete $[Js],delete $[Zs],delete $[Qs],delete $[Ks],delete $[$s])),X.stateNode=null,X.return=null,X.dependencies=null,X.memoizedProps=null,X.memoizedState=null,X.pendingProps=null,X.stateNode=null,X.updateQueue=null}function Bk(X){return 5===X.tag||3===X.tag||4===X.tag}function Ck(X){e:for(;;){for(;null===X.sibling;){if(null===X.return||Bk(X.return))return null;X=X.return}for(X.sibling.return=X.return,X=X.sibling;5!==X.tag&&6!==X.tag&&18!==X.tag;){if(2&X.flags)continue e;if(null===X.child||4===X.tag)continue e;X.child.return=X,X=X.child}if(!(2&X.flags))return X.stateNode}}function Dk(X,$,ee){var ne=X.tag;if(5===ne||6===ne)X=X.stateNode,$?8===ee.nodeType?ee.parentNode.insertBefore(X,$):ee.insertBefore(X,$):(8===ee.nodeType?($=ee.parentNode).insertBefore(X,ee):($=ee).appendChild(X),null!==(ee=ee._reactRootContainer)&&void 0!==ee||null!==$.onclick||($.onclick=Of));else if(4!==ne&&null!==(X=X.child))for(Dk(X,$,ee),X=X.sibling;null!==X;)Dk(X,$,ee),X=X.sibling}function Ek(X,$,ee){var ne=X.tag;if(5===ne||6===ne)X=X.stateNode,$?ee.insertBefore(X,$):ee.appendChild(X);else if(4!==ne&&null!==(X=X.child))for(Ek(X,$,ee),X=X.sibling;null!==X;)Ek(X,$,ee),X=X.sibling}var Pd=null,Od=!1;function Gk(X,$,ee){for(ee=ee.child;null!==ee;)Hk(X,$,ee),ee=ee.sibling}function Hk(X,$,ee){if(or&&"function"===typeof or.onCommitFiberUnmount)try{or.onCommitFiberUnmount(ar,ee)}catch(Ue){}switch(ee.tag){case 5:yd||tk(ee,$);case 6:var ne=Pd,ae=Od;Pd=null,Gk(X,$,ee),Od=ae,null!==(Pd=ne)&&(Od?(X=Pd,ee=ee.stateNode,8===X.nodeType?X.parentNode.removeChild(ee):X.removeChild(ee)):Pd.removeChild(ee.stateNode));break;case 18:null!==Pd&&(Od?(X=Pd,ee=ee.stateNode,8===X.nodeType?Xf(X.parentNode,ee):1===X.nodeType&&Xf(X,ee),od(X)):Xf(Pd,ee.stateNode));break;case 4:ne=Pd,ae=Od,Pd=ee.stateNode.containerInfo,Od=!0,Gk(X,$,ee),Pd=ne,Od=ae;break;case 0:case 11:case 14:case 15:if(!yd&&(null!==(ne=ee.updateQueue)&&null!==(ne=ne.lastEffect))){ae=ne=ne.next;do{var de=ae,fe=de.destroy;de=de.tag,void 0!==fe&&(0!==(2&de)?uk(ee,$,fe):0!==(4&de)&&(tc(ee),2&ee.mode?(hj(),uk(ee,$,fe),fj(ee)):uk(ee,$,fe),uc())),ae=ae.next}while(ae!==ne)}Gk(X,$,ee);break;case 1:if(!yd&&(tk(ee,$),"function"===typeof(ne=ee.stateNode).componentWillUnmount))try{sk(ee,ne)}catch(Ue){U(ee,$,Ue)}Gk(X,$,ee);break;case 21:Gk(X,$,ee);break;case 22:1&ee.mode?(yd=(ne=yd)||null!==ee.memoizedState,Gk(X,$,ee),yd=ne):Gk(X,$,ee);break;default:Gk(X,$,ee)}}function Ik(X){var $=X.updateQueue;if(null!==$){X.updateQueue=null;var ee=X.stateNode;null===ee&&(ee=X.stateNode=new bd),$.forEach((function($){var ne=Jk.bind(null,X,$);if(!ee.has($)){if(ee.add($),dr){if(null===_d||null===Sd)throw Error(p(413));tj(Sd,_d)}$.then(ne,ne)}}))}}function Mk(X,$){var ee=$.deletions;if(null!==ee)for(var ne=0;ne<ee.length;ne++){var ae=ee[ne];try{var de=X,fe=$,Ue=fe;e:for(;null!==Ue;){switch(Ue.tag){case 5:Pd=Ue.stateNode,Od=!1;break e;case 3:case 4:Pd=Ue.stateNode.containerInfo,Od=!0;break e}Ue=Ue.return}if(null===Pd)throw Error(p(160));Hk(de,fe,ae),Pd=null,Od=!1;var je=ae.alternate;null!==je&&(je.return=null),ae.return=null}catch(Ke){U(ae,$,Ke)}}if(12854&$.subtreeFlags)for($=$.child;null!==$;)Lk($,X),$=$.sibling}function Lk(X,$){var ee=X.alternate,ne=X.flags;switch(X.tag){case 0:case 11:case 14:case 15:if(Mk($,X),Nk(X),4&ne){try{xk(3,X,X.return),yk(3,X)}catch(ct){U(X,X.return,ct)}if(2&X.mode){try{hj(),xk(5,X,X.return)}catch(ct){U(X,X.return,ct)}fj(X)}else try{xk(5,X,X.return)}catch(ct){U(X,X.return,ct)}}break;case 1:Mk($,X),Nk(X),512&ne&&null!==ee&&tk(ee,ee.return);break;case 5:if(Mk($,X),Nk(X),512&ne&&null!==ee&&tk(ee,ee.return),32&X.flags){var ae=X.stateNode;try{mb(ae,"")}catch(ct){U(X,X.return,ct)}}if(4&ne&&null!=(ae=X.stateNode)){var de=X.memoizedProps,fe=null!==ee?ee.memoizedProps:de,Ue=X.type,je=X.updateQueue;if(X.updateQueue=null,null!==je)try{"input"===Ue&&"radio"===de.type&&null!=de.name&&Za(ae,de),ub(Ue,fe);var Ke=ub(Ue,de);for(fe=0;fe<je.length;fe+=2){var et=je[fe],tt=je[fe+1];"style"===et?rb(ae,tt):"dangerouslySetInnerHTML"===et?un(ae,tt):"children"===et?mb(ae,tt):ta(ae,et,tt,Ke)}switch(Ue){case"input":$a(ae,de);break;case"textarea":gb(ae,de);break;case"select":var nt=ae._wrapperState.wasMultiple;ae._wrapperState.wasMultiple=!!de.multiple;var it=de.value;null!=it?db(ae,!!de.multiple,it,!1):nt!==!!de.multiple&&(null!=de.defaultValue?db(ae,!!de.multiple,de.defaultValue,!0):db(ae,!!de.multiple,de.multiple?[]:"",!1))}ae[Zs]=de}catch(ct){U(X,X.return,ct)}}break;case 6:if(Mk($,X),Nk(X),4&ne){if(null===X.stateNode)throw Error(p(162));Ke=X.stateNode,et=X.memoizedProps;try{Ke.nodeValue=et}catch(ct){U(X,X.return,ct)}}break;case 3:if(Mk($,X),Nk(X),4&ne&&null!==ee&&ee.memoizedState.isDehydrated)try{od($.containerInfo)}catch(ct){U(X,X.return,ct)}break;case 4:default:Mk($,X),Nk(X);break;case 13:Mk($,X),Nk(X),8192&(Ke=X.child).flags&&null!==Ke.memoizedState&&(null===Ke.alternate||null===Ke.alternate.memoizedState)&&(cf=Yn()),4&ne&&Ik(X);break;case 22:if(Ke=null!==ee&&null!==ee.memoizedState,1&X.mode?(yd=(et=yd)||Ke,Mk($,X),yd=et):Mk($,X),Nk(X),8192&ne){et=null!==X.memoizedState;e:for(tt=null,nt=X;;){if(5===nt.tag){if(null===tt){tt=nt;try{ae=nt.stateNode,et?"function"===typeof(de=ae.style).setProperty?de.setProperty("display","none","important"):de.display="none":(Ue=nt.stateNode,fe=void 0!==(je=nt.memoizedProps.style)&&null!==je&&je.hasOwnProperty("display")?je.display:null,Ue.style.display=qb("display",fe))}catch(ct){U(X,X.return,ct)}}}else if(6===nt.tag){if(null===tt)try{nt.stateNode.nodeValue=et?"":nt.memoizedProps}catch(ct){U(X,X.return,ct)}}else if((22!==nt.tag&&23!==nt.tag||null===nt.memoizedState||nt===X)&&null!==nt.child){nt.child.return=nt,nt=nt.child;continue}if(nt===X)break e;for(;null===nt.sibling;){if(null===nt.return||nt.return===X)break e;tt===nt&&(tt=null),nt=nt.return}tt===nt&&(tt=null),nt.sibling.return=nt.return,nt=nt.sibling}if(et&&!Ke&&0!==(1&X.mode))for(xd=X,X=X.child;null!==X;){for(Ke=xd=X;null!==xd;){switch(tt=(et=xd).child,et.tag){case 0:case 11:case 14:case 15:if(2&et.mode)try{hj(),xk(4,et,et.return)}finally{fj(et)}else xk(4,et,et.return);break;case 1:if(tk(et,et.return),"function"===typeof(nt=et.stateNode).componentWillUnmount){it=et,ae=et.return;try{sk(it,nt)}catch(ct){U(it,ae,ct)}}break;case 5:tk(et,et.return);break;case 22:if(null!==et.memoizedState){Pk(Ke);continue}}null!==tt?(tt.return=et,xd=tt):Pk(Ke)}X=X.sibling}}break;case 19:Mk($,X),Nk(X),4&ne&&Ik(X);case 21:}}function Nk(X){var $=X.flags;if(2&$){try{e:{for(var ee=X.return;null!==ee;){if(Bk(ee)){var ne=ee;break e}ee=ee.return}throw Error(p(160))}switch(ne.tag){case 5:var ae=ne.stateNode;32&ne.flags&&(mb(ae,""),ne.flags&=-33),Ek(X,Ck(X),ae);break;case 3:case 4:var de=ne.stateNode.containerInfo;Dk(X,Ck(X),de);break;default:throw Error(p(161))}}catch(fe){U(X,X.return,fe)}X.flags&=-3}4096&$&&(X.flags&=-4097)}function Qk(X,$,ee){_d=ee,Sd=$,xd=X,Rk(X,$,ee),Sd=_d=null}function Rk(X,$,ee){for(var ne=0!==(1&X.mode);null!==xd;){var ae=xd,de=ae.child;if(22===ae.tag&&ne){var fe=null!==ae.memoizedState||vd;if(!fe){var Ue=ae.alternate,je=null!==Ue&&null!==Ue.memoizedState||yd;Ue=vd;var Ke=yd;if(vd=fe,(yd=je)&&!Ke)for(xd=ae;null!==xd;)je=(fe=xd).child,22===fe.tag&&null!==fe.memoizedState?Sk(ae):null!==je?(je.return=fe,xd=je):Sk(ae);for(;null!==de;)xd=de,Rk(de,$,ee),de=de.sibling;xd=ae,vd=Ue,yd=Ke}Tk(X)}else 0!==(8772&ae.subtreeFlags)&&null!==de?(de.return=ae,xd=de):Tk(X)}}function Tk(X){for(;null!==xd;){var $=xd;if(0!==(8772&$.flags)){var ee=$.alternate;try{if(0!==(8772&$.flags))switch($.tag){case 0:case 11:case 15:if(!yd)if(2&$.mode)try{hj(),yk(5,$)}finally{fj($)}else yk(5,$);break;case 1:var ne=$.stateNode;if(4&$.flags&&!yd)if(null===ee)if(2&$.mode)try{hj(),ne.componentDidMount()}finally{fj($)}else ne.componentDidMount();else{var ae=$.elementType===$.type?ee.memoizedProps:yg($.type,ee.memoizedProps),de=ee.memoizedState;if(2&$.mode)try{hj(),ne.componentDidUpdate(ae,de,ne.__reactInternalSnapshotBeforeUpdate)}finally{fj($)}else ne.componentDidUpdate(ae,de,ne.__reactInternalSnapshotBeforeUpdate)}var fe=$.updateQueue;null!==fe&&Ug($,fe,ne);break;case 3:var Ue=$.updateQueue;if(null!==Ue){var je=null;if(null!==$.child)switch($.child.tag){case 5:case 1:je=$.child.stateNode}Ug($,Ue,je)}break;case 5:var Ke=$.stateNode;if(null===ee&&4&$.flags){je=Ke;var et=$.memoizedProps;switch($.type){case"button":case"input":case"select":case"textarea":et.autoFocus&&je.focus();break;case"img":et.src&&(je.src=et.src)}}break;case 6:case 4:case 19:case 17:case 21:case 22:case 23:break;case 12:var tt=$.memoizedProps,nt=tt.onCommit,it=tt.onRender,ct=$.stateNode.effectDuration;je=Dc,ee=null===ee?"mount":"update",Mh&&(ee="nested-update"),"function"===typeof it&&it($.memoizedProps.id,ee,$.actualDuration,$.treeBaseDuration,$.actualStartTime,je),"function"===typeof nt&&nt($.memoizedProps.id,ee,ct,je),Uk($);var dt=$.return;e:for(;null!==dt;){switch(dt.tag){case 3:case 12:dt.stateNode.effectDuration+=ct;break e}dt=dt.return}break;case 13:if(null===$.memoizedState){var vt=$.alternate;if(null!==vt){var gt=vt.memoizedState;if(null!==gt){var yt=gt.dehydrated;null!==yt&&od(yt)}}}break;default:throw Error(p(163))}yd||512&$.flags&&zk($)}catch(_t){U($,$.return,_t)}}if($===X){xd=null;break}if(null!==(je=$.sibling)){je.return=$.return,xd=je;break}xd=$.return}}function Pk(X){for(;null!==xd;){var $=xd;if($===X){xd=null;break}var ee=$.sibling;if(null!==ee){ee.return=$.return,xd=ee;break}xd=$.return}}function Sk(X){for(;null!==xd;){var $=xd;try{switch($.tag){case 0:case 11:case 15:if(2&$.mode)try{hj();var ee=$.return;try{yk(4,$)}catch(Ke){U($,ee,Ke)}}finally{fj($)}else{var ne=$.return;try{yk(4,$)}catch(Ke){U($,ne,Ke)}}break;case 1:var ae=$.stateNode;if("function"===typeof ae.componentDidMount){var de=$.return;try{ae.componentDidMount()}catch(Ke){U($,de,Ke)}}var fe=$.return;try{zk($)}catch(Ke){U($,fe,Ke)}break;case 5:var Ue=$.return;try{zk($)}catch(Ke){U($,Ue,Ke)}}}catch(Ke){U($,$.return,Ke)}if($===X){xd=null;break}var je=$.sibling;if(null!==je){je.return=$.return,xd=je;break}xd=$.return}}var Rd,Id=Math.ceil,Nd=ct.ReactCurrentDispatcher,Fd=ct.ReactCurrentOwner,Ud=ct.ReactCurrentBatchConfig,Vd=0,Gd=null,Wd=null,Jd=0,Zd=0,Qd=gg(0),Kd=0,$d=null,ef=0,of=0,sf=0,lf=null,uf=null,cf=0,df=1/0,ff=null,pf=!1,$f=null,ep=null,tp=!1,np=null,rp=0,ip=[],ap=0,op=null,sp=-1,lp=0;function Xg(){return 0!==(6&Vd)?Yn():-1!==sp?sp:sp=Yn()}function Yg(X){return 0===(1&X.mode)?1:0!==(2&Vd)&&0!==Jd?Jd&-Jd:null!==Xl.transition?(0===lp&&(lp=Jc()),lp):0!==(X=wr)?X:X=void 0===(X=window.event)?16:wd(X.type)}function Zg(X,$,ee){if(50<ap)throw ap=0,op=null,Error(p(185));var ne=ml(X,$);return null===ne?null:(Lc(ne,$,ee),0!==(2&Vd)&&ne===Gd||(dr&&Oc(ne,X,$),ne===Gd&&(0===(2&Vd)&&(of|=$),4===Kd&&nl(ne,Jd)),ol(ne,ee),1===$&&0===Vd&&0===(1&X.mode)&&(df=Yn()+500,_l&&wg())),ne)}function ml(X,$){X.lanes|=$;var ee=X.alternate;for(null!==ee&&(ee.lanes|=$),ee=X,X=X.return;null!==X;)X.childLanes|=$,null!==(ee=X.alternate)&&(ee.childLanes|=$),ee=X,X=X.return;return 3===ee.tag?ee.stateNode:null}function Pg(X){return(null!==Gd||null!==ou)&&0!==(1&X.mode)&&0===(2&Vd)}function ol(X,$){var ee=X.callbackNode;!function Hc(X,$){for(var ee=X.suspendedLanes,ne=X.pingedLanes,ae=X.expirationTimes,de=X.pendingLanes;0<de;){var fe=31-fr(de),Ue=1<<fe,je=ae[fe];-1===je?0!==(Ue&ee)&&0===(Ue&ne)||(ae[fe]=Gc(Ue,$)):je<=$&&(X.expiredLanes|=Ue),de&=~Ue}}(X,$);var ne=Fc(X,X===Gd?Jd:0);if(0===ne)null!==ee&&In(ee),X.callbackNode=null,X.callbackPriority=0;else if($=ne&-ne,X.callbackPriority!==$){if(null!=ee&&In(ee),1===$)0===X.tag?function vg(X){_l=!0,ug(X)}(pl.bind(null,X)):ug(pl.bind(null,X)),js((function(){0===Vd&&wg()})),ee=null;else{switch(Qc(ne)){case 1:ee=Zn;break;case 4:ee=Kn;break;case 16:default:ee=$n;break;case 536870912:ee=ir}ee=ql(ee,rl.bind(null,X))}X.callbackPriority=$,X.callbackNode=ee}}function rl(X,$){if(Oh=Mh=!1,sp=-1,lp=0,0!==(6&Vd))throw Error(p(327));var ee=X.callbackNode;if(sl()&&X.callbackNode!==ee)return null;var ne=Fc(X,X===Gd?Jd:0);if(0===ne)return null;if(0!==(30&ne)||0!==(ne&X.expiredLanes)||$)$=tl(X,ne);else{$=ne;var ae=Vd;Vd|=2;var de=ul();if(Gd!==X||Jd!==$){if(dr){var fe=X.memoizedUpdaters;0<fe.size&&(tj(X,Jd),fe.clear()),Pc(X,$)}ff=null,df=Yn()+500,vl(X,$)}for(vc($);;)try{wl();break}catch(Ue){xl(X,Ue)}Dg(),Nd.current=de,Vd=ae,null!==Wd?(null!==hr&&"function"===typeof hr.markRenderYielded&&hr.markRenderYielded(),$=0):(wc(),Gd=null,Jd=0,$=Kd)}if(0!==$){if(2===$&&(0!==(ae=Ic(X))&&(ne=ae,$=yl(X,ae))),1===$)throw ee=$d,vl(X,0),nl(X,ne),ol(X,Yn()),ee;if(6===$)nl(X,ne);else{if(ae=X.current.alternate,0===(30&ne)&&!function zl(X){for(var $=X;;){if(16384&$.flags){var ee=$.updateQueue;if(null!==ee&&null!==(ee=ee.stores))for(var ne=0;ne<ee.length;ne++){var ae=ee[ne],de=ae.getSnapshot;ae=ae.value;try{if(!Ho(de(),ae))return!1}catch(fe){return!1}}}if(ee=$.child,16384&$.subtreeFlags&&null!==ee)ee.return=$,$=ee;else{if($===X)break;for(;null===$.sibling;){if(null===$.return||$.return===X)return!0;$=$.return}$.sibling.return=$.return,$=$.sibling}}return!0}(ae)&&(2===($=tl(X,ne))&&(0!==(de=Ic(X))&&(ne=de,$=yl(X,de))),1===$))throw ee=$d,vl(X,0),nl(X,ne),ol(X,Yn()),ee;switch(X.finishedWork=ae,X.finishedLanes=ne,$){case 0:case 1:throw Error(p(345));case 2:case 5:Al(X,uf,ff);break;case 3:if(nl(X,ne),(130023424&ne)===ne&&10<($=cf+500-Yn())){if(0!==Fc(X,0))break;if(((ae=X.suspendedLanes)&ne)!==ne){Xg(),X.pingedLanes|=X.suspendedLanes&ae;break}X.timeoutHandle=Rs(Al.bind(null,X,uf,ff),$);break}Al(X,uf,ff);break;case 4:if(nl(X,ne),(4194240&ne)===ne)break;for($=X.eventTimes,ae=-1;0<ne;)de=1<<(fe=31-fr(ne)),(fe=$[fe])>ae&&(ae=fe),ne&=~de;if(ne=ae,10<(ne=(120>(ne=Yn()-ne)?120:480>ne?480:1080>ne?1080:1920>ne?1920:3e3>ne?3e3:4320>ne?4320:1960*Id(ne/1960))-ne)){X.timeoutHandle=Rs(Al.bind(null,X,uf,ff),ne);break}Al(X,uf,ff);break;default:throw Error(p(329))}}}return ol(X,Yn()),X.callbackNode===ee?rl.bind(null,X):null}function yl(X,$){var ee=lf;return X.current.memoizedState.isDehydrated&&(vl(X,$).flags|=256),2!==(X=tl(X,$))&&($=uf,uf=ee,null!==$&&Cj($)),X}function Cj(X){null===uf?uf=X:uf.push.apply(uf,X)}function nl(X,$){for($&=~sf,$&=~of,X.suspendedLanes|=$,X.pingedLanes&=~$,X=X.expirationTimes;0<$;){var ee=31-fr($),ne=1<<ee;X[ee]=-1,$&=~ne}}function pl(X){if(Mh=Oh,Oh=!1,0!==(6&Vd))throw Error(p(327));sl();var $=Fc(X,0);if(0===(1&$))return ol(X,Yn()),null;var ee=tl(X,$);if(0!==X.tag&&2===ee){var ne=Ic(X);0!==ne&&($=ne,ee=yl(X,ne))}if(1===ee)throw ee=$d,vl(X,0),nl(X,$),ol(X,Yn()),ee;if(6===ee)throw Error(p(345));return X.finishedWork=X.current.alternate,X.finishedLanes=$,Al(X,uf,ff),ol(X,Yn()),null}function Cl(X,$){var ee=Vd;Vd|=1;try{return X($)}finally{0===(Vd=ee)&&(df=Yn()+500,_l&&wg())}}function Dl(X){null!==np&&0===np.tag&&0===(6&Vd)&&sl();var $=Vd;Vd|=1;var ee=Ud.transition,ne=wr;try{if(Ud.transition=null,wr=1,X)return X()}finally{wr=ne,Ud.transition=ee,0===(6&(Vd=$))&&wg()}}function Fj(){Zd=Qd.current,G(Qd)}function vl(X,$){X.finishedWork=null,X.finishedLanes=0;var ee=X.timeoutHandle;if(-1!==ee&&(X.timeoutHandle=-1,Bs(ee)),null!==Wd)for(ee=Wd.return;null!==ee;){var ne=ee;switch(qh(ne),ne.tag){case 1:null!==(ne=ne.type.childContextTypes)&&void 0!==ne&&mg();break;case 3:Uh(),G(hl),G(cl),Zh();break;case 5:Wh(ne);break;case 4:Uh();break;case 13:case 19:G(Uu);break;case 10:Eg(ne.type._context);break;case 22:case 23:Fj()}ee=ee.return}if(Gd=X,Wd=X=Hh(X.current,null),Jd=Zd=$,Kd=0,$d=null,sf=of=ef=0,uf=lf=null,null!==ou){for($=0;$<ou.length;$++)if(null!==(ne=(ee=ou[$]).interleaved)){ee.interleaved=null;var ae=ne.next,de=ee.pending;if(null!==de){var fe=de.next;de.next=ae,ne.next=fe}ee.pending=ne}ou=null}return X}function xl(X,$){for(;;){var ee=Wd;try{if(Dg(),Hu.current=bc,Qu){for(var ne=qu.memoizedState;null!==ne;){var ae=ne.queue;null!==ae&&(ae.pending=null),ne=ne.next}Qu=!1}if(Wu=0,Xu=Zu=qu=null,Ku=!1,$u=0,Fd.current=null,null===ee||null===ee.return){Kd=1,$d=$,Wd=null;break}if(2&ee.mode&&ej(ee,!0),sc(),null!==$&&"object"===typeof $&&"function"===typeof $.then){var de=$;null!==hr&&"function"===typeof hr.markComponentSuspended&&hr.markComponentSuspended(ee,de,Jd)}else null!==hr&&"function"===typeof hr.markComponentErrored&&hr.markComponentErrored(ee,$,Jd);e:{var fe=X,Ue=ee.return,je=ee;if(de=$,$=Jd,je.flags|=32768,dr&&tj(fe,$),null!==de&&"object"===typeof de&&"function"===typeof de.then){var Ke=de,et=je,tt=et.tag;if(0===(1&et.mode)&&(0===tt||11===tt||15===tt)){var nt=et.alternate;nt?(et.updateQueue=nt.updateQueue,et.memoizedState=nt.memoizedState,et.lanes=nt.lanes):(et.updateQueue=null,et.memoizedState=null)}var it=uj(Ue);if(null!==it){it.flags&=-257,vj(it,Ue,je,0,$),1&it.mode&&rj(fe,Ke,$),de=Ke;var ct=($=it).updateQueue;if(null===ct){var dt=new Set;dt.add(de),$.updateQueue=dt}else ct.add(de);break e}if(0===(1&$)){rj(fe,Ke,$),Dj();break e}de=Error(p(426))}else if(Lu&&1&je.mode){var vt=uj(Ue);if(null!==vt){0===(65536&vt.flags)&&(vt.flags|=256),vj(vt,Ue,je,0,$),Ch(de);break e}}fe=de,4!==Kd&&(Kd=2),null===lf?lf=[fe]:lf.push(fe),de=jj(de,je),je=Ue;do{switch(je.tag){case 3:je.flags|=65536,$&=-$,je.lanes|=$,Rg(je,mj(0,de,$));break e;case 1:fe=de;var gt=je.type,yt=je.stateNode;if(0===(128&je.flags)&&("function"===typeof gt.getDerivedStateFromError||null!==yt&&"function"===typeof yt.componentDidCatch&&(null===ep||!ep.has(yt)))){je.flags|=65536,$&=-$,je.lanes|=$,Rg(je,pj(je,fe,$));break e}}je=je.return}while(null!==je)}El(ee)}catch(_t){$=_t,Wd===ee&&null!==ee&&(Wd=ee=ee.return);continue}break}}function ul(){var X=Nd.current;return Nd.current=bc,null===X?bc:X}function Dj(){0!==Kd&&3!==Kd&&2!==Kd||(Kd=4),null===Gd||0===(268435455&ef)&&0===(268435455&of)||nl(Gd,Jd)}function tl(X,$){var ee=Vd;Vd|=2;var ne=ul();if(Gd!==X||Jd!==$){if(dr){var ae=X.memoizedUpdaters;0<ae.size&&(tj(X,Jd),ae.clear()),Pc(X,$)}ff=null,vl(X,$)}for(vc($);;)try{Fl();break}catch(de){xl(X,de)}if(Dg(),Vd=ee,Nd.current=ne,null!==Wd)throw Error(p(261));return wc(),Gd=null,Jd=0,Kd}function Fl(){for(;null!==Wd;)Gl(Wd)}function wl(){for(;null!==Wd&&!Fn();)Gl(Wd)}function Gl(X){var $=X.alternate;0!==(2&X.mode)?(Wc=Ac(),0>X.actualStartTime&&(X.actualStartTime=Ac()),$=Rd($,X,Zd),ej(X,!0)):$=Rd($,X,Zd),X.memoizedProps=X.pendingProps,null===$?El(X):Wd=$,Fd.current=null}function El(X){var $=X;do{var ee=$.alternate;if(X=$.return,0===(32768&$.flags)){if(0===(2&$.mode))ee=Bj(ee,$,Zd);else{var ne=$;Wc=Ac(),0>ne.actualStartTime&&(ne.actualStartTime=Ac()),ee=Bj(ee,$,Zd),ej($,!1)}if(null!==ee)return void(Wd=ee)}else{if(null!==(ee=mk(ee,$)))return ee.flags&=32767,void(Wd=ee);if(0!==(2&$.mode)){for(ej($,!1),ee=$.actualDuration,ne=$.child;null!==ne;)ee+=ne.actualDuration,ne=ne.sibling;$.actualDuration=ee}if(null===X)return Kd=6,void(Wd=null);X.flags|=32768,X.subtreeFlags=0,X.deletions=null}if(null!==($=$.sibling))return void(Wd=$);Wd=$=X}while(null!==$);0===Kd&&(Kd=5)}function Al(X,$,ee){var ne=wr,ae=Ud.transition;try{Ud.transition=null,wr=1,function Il(X,$,ee,ne){do{sl()}while(null!==np);if(0!==(6&Vd))throw Error(p(327));ee=X.finishedWork;var ae=X.finishedLanes;if(null!==hr&&"function"===typeof hr.markCommitStarted&&hr.markCommitStarted(ae),null===ee)return qc(),null;if(X.finishedWork=null,X.finishedLanes=0,ee===X.current)throw Error(p(177));X.callbackNode=null,X.callbackPriority=0;var de=ee.lanes|ee.childLanes;if(function Mc(X,$){var ee=X.pendingLanes&~$;X.pendingLanes=$,X.suspendedLanes=0,X.pingedLanes=0,X.expiredLanes&=$,X.mutableReadLanes&=$,X.entangledLanes&=$,$=X.entanglements;var ne=X.eventTimes;for(X=X.expirationTimes;0<ee;){var ae=31-fr(ee),de=1<<ae;$[ae]=0,ne[ae]=-1,X[ae]=-1,ee&=~de}}(X,de),X===Gd&&(Wd=Gd=null,Jd=0),0===(2064&ee.subtreeFlags)&&0===(2064&ee.flags)||tp||(tp=!0,ql($n,(function(){return sl(),null}))),de=0!==(15990&ee.flags),0!==(15990&ee.subtreeFlags)||de){de=Ud.transition,Ud.transition=null;var fe=wr;wr=1;var Ue=Vd;Vd|=4,Fd.current=null,function wk(X,$){if(Ds=ei,$e(X=Ze())){if("selectionStart"in X)var ee={start:X.selectionStart,end:X.selectionEnd};else e:{var ne=(ee=(ee=X.ownerDocument)&&ee.defaultView||window).getSelection&&ee.getSelection();if(ne&&0!==ne.rangeCount){ee=ne.anchorNode;var ae=ne.anchorOffset,de=ne.focusNode;ne=ne.focusOffset;try{ee.nodeType,de.nodeType}catch(St){ee=null;break e}var fe=0,Ue=-1,je=-1,Ke=0,et=0,tt=X,nt=null;t:for(;;){for(var it;tt!==ee||0!==ae&&3!==tt.nodeType||(Ue=fe+ae),tt!==de||0!==ne&&3!==tt.nodeType||(je=fe+ne),3===tt.nodeType&&(fe+=tt.nodeValue.length),null!==(it=tt.firstChild);)nt=tt,tt=it;for(;;){if(tt===X)break t;if(nt===ee&&++Ke===ae&&(Ue=fe),nt===de&&++et===ne&&(je=fe),null!==(it=tt.nextSibling))break;nt=(tt=nt).parentNode}tt=it}ee=-1===Ue||-1===je?null:{start:Ue,end:je}}else ee=null}ee=ee||{start:0,end:0}}else ee=null;for(Ls={focusedElem:X,selectionRange:ee},ei=!1,xd=$;null!==xd;)if(X=($=xd).child,0!==(1028&$.subtreeFlags)&&null!==X)X.return=$,xd=X;else for(;null!==xd;){$=xd;try{var ct=$.alternate;if(0!==(1024&$.flags))switch($.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==ct){var dt=ct.memoizedProps,vt=ct.memoizedState,gt=$.stateNode,yt=gt.getSnapshotBeforeUpdate($.elementType===$.type?dt:yg($.type,dt),vt);gt.__reactInternalSnapshotBeforeUpdate=yt}break;case 3:var _t=$.stateNode.containerInfo;if(1===_t.nodeType)_t.textContent="";else if(9===_t.nodeType){var wt=_t.body;null!=wt&&(wt.textContent="")}break;default:throw Error(p(163))}}catch(St){U($,$.return,St)}if(null!==(X=$.sibling)){X.return=$.return,xd=X;break}xd=$.return}return ct=Td,Td=!1,ct}(X,ee),Dc=Ac(),function Kk(X,$,ee){_d=ee,Sd=X,Lk($,X),Sd=_d=null}(X,ee,ae),af(Ls),ei=!!Ds,Ls=Ds=null,X.current=ee,null!==hr&&"function"===typeof hr.markLayoutEffectsStarted&&hr.markLayoutEffectsStarted(ae),Qk(ee,X,ae),null!==hr&&"function"===typeof hr.markLayoutEffectsStopped&&hr.markLayoutEffectsStopped(),Wn(),Vd=Ue,wr=fe,Ud.transition=de}else X.current=ee,Dc=Ac();if(tp&&(tp=!1,np=X,rp=ae),0===(de=X.pendingLanes)&&(ep=null),function mc(X,$){if(or&&"function"===typeof or.onCommitFiberRoot)try{var ee=128===(128&X.current.flags);switch($){case 1:var ne=Zn;break;case 4:ne=Kn;break;case 16:default:ne=$n;break;case 536870912:ne=ir}or.onCommitFiberRoot(ar,X,ne,ee)}catch(ae){}}(ee.stateNode,ne),dr&&X.memoizedUpdaters.clear(),ol(X,Yn()),null!==$)for(ne=X.onRecoverableError,ee=0;ee<$.length;ee++)ne($[ee]);if(pf)throw pf=!1,X=$f,$f=null,X;return 0!==(1&rp)&&0!==X.tag&&sl(),0!==(1&(de=X.pendingLanes))?(Oh=!0,X===op?ap++:(ap=0,op=X)):ap=0,wg(),qc(),null}(X,$,ee,ne)}finally{Ud.transition=ae,wr=ne}return null}function sl(){if(null!==np){var X=Qc(rp),$=Ud.transition,ee=wr;try{if(Ud.transition=null,wr=16>X?16:X,null===np)var ne=!1;else{X=np;var ae=rp;if(np=null,rp=0,0!==(6&Vd))throw Error(p(331));for(null!==hr&&"function"===typeof hr.markPassiveEffectsStarted&&hr.markPassiveEffectsStarted(ae),ae=Vd,Vd|=4,xd=X.current;null!==xd;){var de=xd,fe=de.child;if(0!==(16&xd.flags)){var Ue=de.deletions;if(null!==Ue){for(var je=0;je<Ue.length;je++){var Ke=Ue[je];for(xd=Ke;null!==xd;){var et=xd,tt=et;switch(tt.tag){case 0:case 11:case 15:2&tt.mode?(fh=Ac(),xk(8,tt,de),gj(tt)):xk(8,tt,de)}var nt=et.child;if(null!==nt)nt.return=et,xd=nt;else for(;null!==xd;){var it=(et=xd).sibling,ct=et.return;if(Ak(et),et===Ke){xd=null;break}if(null!==it){it.return=ct,xd=it;break}xd=ct}}}var dt=de.alternate;if(null!==dt){var vt=dt.child;if(null!==vt){dt.child=null;do{var gt=vt.sibling;vt.sibling=null,vt=gt}while(null!==vt)}}xd=de}}if(0!==(2064&de.subtreeFlags)&&null!==fe)fe.return=de,xd=fe;else e:for(;null!==xd;){if(0!==(2048&(de=xd).flags))switch(je=de,je.tag){case 0:case 11:case 15:2&je.mode?(fh=Ac(),xk(9,je,je.return),gj(je)):xk(9,je,je.return)}var yt=de.sibling;if(null!==yt){yt.return=de.return,xd=yt;break e}xd=de.return}}var _t=X.current;for(xd=_t;null!==xd;){var wt=(fe=xd).child;if(0!==(2064&fe.subtreeFlags)&&null!==wt)wt.return=fe,xd=wt;else e:for(fe=_t;null!==xd;){if(0!==(2048&(Ue=xd).flags))try{switch((Ke=Ue).tag){case 0:case 11:case 15:if(2&Ke.mode){fh=Ac();try{yk(9,Ke)}finally{gj(Ke)}}else yk(9,Ke)}}catch(Zt){U(Ue,Ue.return,Zt)}if(Ue===fe){xd=null;break e}var St=Ue.sibling;if(null!==St){St.return=Ue.return,xd=St;break e}xd=Ue.return}}for(_t=ip,ip=[],wt=0;wt<_t.length;wt++){var Ct=_t[wt];if(0!==(4&Ct.flags)&&12===Ct.tag){var At=Ct.stateNode.passiveEffectDuration,Et=Ct.memoizedProps,Rt=Et.id,Bt=Et.onPostCommit;St=Dc;var Ht=null===Ct.alternate?"mount":"update";Mh&&(Ht="nested-update"),"function"===typeof Bt&&Bt(Rt,Ht,At,St);var Wt=Ct.return;e:for(;null!==Wt;){switch(Wt.tag){case 3:case 12:Wt.stateNode.passiveEffectDuration+=At;break e}Wt=Wt.return}}}if(null!==hr&&"function"===typeof hr.markPassiveEffectsStopped&&hr.markPassiveEffectsStopped(),Vd=ae,wg(),or&&"function"===typeof or.onPostCommitFiberRoot)try{or.onPostCommitFiberRoot(ar,X)}catch(Zt){}var qt=X.current.stateNode;qt.effectDuration=0,qt.passiveEffectDuration=0,ne=!0}return ne}finally{wr=ee,Ud.transition=$}}return!1}function Uk(X){ip.push(X),tp||(tp=!0,ql($n,(function(){return sl(),null})))}function Jl(X,$,ee){Og(X,$=mj(0,$=jj(ee,$),1)),$=Xg(),null!==(X=ml(X,1))&&(Lc(X,1,$),ol(X,$))}function U(X,$,ee){if(3===X.tag)Jl(X,X,ee);else for(;null!==$;){if(3===$.tag){Jl($,X,ee);break}if(1===$.tag){var ne=$.stateNode;if("function"===typeof $.type.getDerivedStateFromError||"function"===typeof ne.componentDidCatch&&(null===ep||!ep.has(ne))){Og($,X=pj($,X=jj(ee,X),1)),X=Xg(),null!==($=ml($,1))&&(Lc($,1,X),ol($,X));break}}$=$.return}}function sj(X,$,ee){var ne=X.pingCache;null!==ne&&ne.delete($),$=Xg(),X.pingedLanes|=X.suspendedLanes&ee,Gd===X&&(Jd&ee)===ee&&(4===Kd||3===Kd&&(130023424&Jd)===Jd&&500>Yn()-cf?vl(X,0):sf|=ee),ol(X,$)}function Kl(X,$){0===$&&(0===(1&X.mode)?$=1:($=_r,0===(130023424&(_r<<=1))&&(_r=4194304)));var ee=Xg();null!==(X=ml(X,$))&&(Lc(X,$,ee),ol(X,ee))}function fk(X){var $=X.memoizedState,ee=0;null!==$&&(ee=$.retryLane),Kl(X,ee)}function Jk(X,$){var ee=0;switch(X.tag){case 13:var ne=X.stateNode,ae=X.memoizedState;null!==ae&&(ee=ae.retryLane);break;case 19:ne=X.stateNode;break;default:throw Error(p(314))}null!==ne&&ne.delete($),Kl(X,ee)}function tj(X,$){dr&&X.memoizedUpdaters.forEach((function(ee){Oc(X,ee,$)}))}function ql(X,$){return On(X,$)}function Ml(X,$,ee,ne){this.tag=X,this.key=ee,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=$,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=ne,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null,this.actualDuration=0,this.actualStartTime=-1,this.treeBaseDuration=this.selfBaseDuration=0}function vh(X,$,ee,ne){return new Ml(X,$,ee,ne)}function Mj(X){return!(!(X=X.prototype)||!X.isReactComponent)}function Hh(X,$){var ee=X.alternate;return null===ee?((ee=vh(X.tag,$,X.key,X.mode)).elementType=X.elementType,ee.type=X.type,ee.stateNode=X.stateNode,ee.alternate=X,X.alternate=ee):(ee.pendingProps=$,ee.type=X.type,ee.flags=0,ee.subtreeFlags=0,ee.deletions=null,ee.actualDuration=0,ee.actualStartTime=-1),ee.flags=14680064&X.flags,ee.childLanes=X.childLanes,ee.lanes=X.lanes,ee.child=X.child,ee.memoizedProps=X.memoizedProps,ee.memoizedState=X.memoizedState,ee.updateQueue=X.updateQueue,$=X.dependencies,ee.dependencies=null===$?null:{lanes:$.lanes,firstContext:$.firstContext},ee.sibling=X.sibling,ee.index=X.index,ee.ref=X.ref,ee.selfBaseDuration=X.selfBaseDuration,ee.treeBaseDuration=X.treeBaseDuration,ee}function Jh(X,$,ee,ne,ae,de){var fe=2;if(ne=X,"function"===typeof X)Mj(X)&&(fe=1);else if("string"===typeof X)fe=5;else e:switch(X){case gt:return Lh(ee.children,ae,de,$);case yt:fe=8,ae|=8;break;case _t:return(X=vh(12,ee,$,2|ae)).elementType=_t,X.lanes=de,X.stateNode={effectDuration:0,passiveEffectDuration:0},X;case At:return(X=vh(13,ee,$,ae)).elementType=At,X.lanes=de,X;case Et:return(X=vh(19,ee,$,ae)).elementType=Et,X.lanes=de,X;case Ht:return ck(ee,ae,de,$);default:if("object"===typeof X&&null!==X)switch(X.$$typeof){case wt:fe=10;break e;case St:fe=9;break e;case Ct:fe=11;break e;case Rt:fe=14;break e;case Bt:fe=16,ne=null;break e}throw Error(p(130,null==X?X:typeof X,""))}return($=vh(fe,ee,$,ae)).elementType=X,$.type=ne,$.lanes=de,$}function Lh(X,$,ee,ne){return(X=vh(7,X,ne,$)).lanes=ee,X}function ck(X,$,ee,ne){return(X=vh(22,X,ne,$)).elementType=Ht,X.lanes=ee,X.stateNode={},X}function Ih(X,$,ee){return(X=vh(6,X,null,$)).lanes=ee,X}function Kh(X,$,ee){return($=vh(4,null!==X.children?X.children:[],X.key,$)).lanes=ee,$.stateNode={containerInfo:X.containerInfo,pendingChildren:null,implementation:X.implementation},$}function Nl(X,$,ee,ne,ae){for(this.tag=$,this.containerInfo=X,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kc(0),this.expirationTimes=Kc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kc(0),this.identifierPrefix=ne,this.onRecoverableError=ae,this.mutableSourceEagerHydrationData=null,this.passiveEffectDuration=this.effectDuration=0,this.memoizedUpdaters=new Set,X=this.pendingUpdatersLaneMap=[],$=0;31>$;$++)X.push(new Set)}function Ol(X,$,ee,ne,ae,de,fe,Ue,je){return X=new Nl(X,$,ee,Ue,je),1===$?($=1,!0===de&&($|=8)):$=0,dr&&($|=2),de=vh(3,null,null,$),X.current=de,de.stateNode=X,de.memoizedState={element:ne,isDehydrated:ee,cache:null,transitions:null,pendingSuspenseBoundaries:null},Lg(de),X}function Pl(X,$,ee){var ne=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:vt,key:null==ne?null:""+ne,children:X,containerInfo:$,implementation:ee}}function Ql(X){if(!X)return ll;e:{if(Ub(X=X._reactInternals)!==X||1!==X.tag)throw Error(p(170));var $=X;do{switch($.tag){case 3:$=$.stateNode.context;break e;case 1:if(lg($.type)){$=$.stateNode.__reactInternalMemoizedMergedChildContext;break e}}$=$.return}while(null!==$);throw Error(p(171))}if(1===X.tag){var ee=X.type;if(lg(ee))return og(X,ee,$)}return $}function Rl(X,$,ee,ne,ae,de,fe,Ue,je){return(X=Ol(ee,ne,!0,X,0,de,0,Ue,je)).context=Ql(null),ee=X.current,(de=Ng(ne=Xg(),ae=Yg(ee))).callback=void 0!==$&&null!==$?$:null,Og(ee,de),X.current.lanes=ae,Lc(X,ae,ne),ol(X,ne),X}function Sl(X,$,ee,ne){var ae=$.current,de=Xg(),fe=Yg(ae);return null!==hr&&"function"===typeof hr.markRenderScheduled&&hr.markRenderScheduled(fe),ee=Ql(ee),null===$.context?$.context=ee:$.pendingContext=ee,($=Ng(de,fe)).payload={element:X},null!==(ne=void 0===ne?null:ne)&&($.callback=ne),Og(ae,$),null!==(X=Zg(ae,fe,de))&&Qg(X,ae,fe),fe}function Tl(X){return(X=X.current).child?(X.child.tag,X.child.stateNode):null}function Ul(X,$){if(null!==(X=X.memoizedState)&&null!==X.dehydrated){var ee=X.retryLane;X.retryLane=0!==ee&&ee<$?ee:$}}function Vl(X,$){Ul(X,$),(X=X.alternate)&&Ul(X,$)}Rd=function Hl(X,$,ee){if(null!==X)if(X.memoizedProps!==$.pendingProps||hl.current)dd=!0;else{if(0===(X.lanes&ee)&&0===(128&$.flags))return dd=!1,function lk(X,$,ee){switch($.tag){case 3:Wj($),Bh();break;case 5:Vh($);break;case 1:lg($.type)&&pg($);break;case 4:Th($,$.stateNode.containerInfo);break;case 10:var ne=$.type._context,ae=$.memoizedProps.value;H(tu,ne._currentValue),ne._currentValue=ae;break;case 12:0!==(ee&$.childLanes)&&($.flags|=4),(ne=$.stateNode).effectDuration=0,ne.passiveEffectDuration=0;break;case 13:if(null!==(ne=$.memoizedState))return null!==ne.dehydrated?(H(Uu,1&Uu.current),$.flags|=128,null):0!==(ee&$.child.childLanes)?bk(X,$,ee):(H(Uu,1&Uu.current),null!==(X=Kj(X,$,ee))?X.sibling:null);H(Uu,1&Uu.current);break;case 19:if(ne=0!==(ee&$.childLanes),0!==(128&X.flags)){if(ne)return kk(X,$,ee);$.flags|=128}if(null!==(ae=$.memoizedState)&&(ae.rendering=null,ae.tail=null,ae.lastEffect=null),H(Uu,Uu.current),ne)break;return null;case 22:case 23:return $.lanes=0,Pj(X,$,ee)}return Kj(X,$,ee)}(X,$,ee);dd=0!==(131072&X.flags)}else dd=!1,Lu&&0!==(1048576&$.flags)&&oh($,wu,$.index);switch($.lanes=0,$.tag){case 2:var ne=$.type;null!==X&&(X.alternate=null,$.alternate=null,$.flags|=2),X=$.pendingProps;var ae=kg($,cl.current);Gg($,ee),rc($),ae=ii(null,$,ne,X,ae,ee);var de=ni();return sc(),$.flags|=1,"object"===typeof ae&&null!==ae&&"function"===typeof ae.render&&void 0===ae.$$typeof?($.tag=1,$.memoizedState=null,$.updateQueue=null,lg(ne)?(de=!0,pg($)):de=!1,$.memoizedState=null!==ae.state&&void 0!==ae.state?ae.state:null,Lg($),ae.updater=hu,$.stateNode=ae,ae._reactInternals=$,dh($,ne,X,ee),$=Vj(null,$,ne,!0,de,ee)):($.tag=0,Lu&&de&&ph($),Ij(null,$,ae,ee),$=$.child),$;case 16:ne=$.elementType;e:{switch(null!==X&&(X.alternate=null,$.alternate=null,$.flags|=2),X=$.pendingProps,ne=(ae=ne._init)(ne._payload),$.type=ne,ae=$.tag=function Ll(X){if("function"===typeof X)return Mj(X)?1:0;if(void 0!==X&&null!==X){if((X=X.$$typeof)===Ct)return 11;if(X===Rt)return 14}return 2}(ne),X=yg(ne,X),ae){case 0:$=Oj(null,$,ne,X,ee);break e;case 1:$=Uj(null,$,ne,X,ee);break e;case 11:$=Jj(null,$,ne,X,ee);break e;case 14:$=Lj(null,$,ne,yg(ne.type,X),ee);break e}throw Error(p(306,ne,""))}return $;case 0:return ne=$.type,ae=$.pendingProps,Oj(X,$,ne,ae=$.elementType===ne?ae:yg(ne,ae),ee);case 1:return ne=$.type,ae=$.pendingProps,Uj(X,$,ne,ae=$.elementType===ne?ae:yg(ne,ae),ee);case 3:e:{if(Wj($),null===X)throw Error(p(387));ne=$.pendingProps,ae=(de=$.memoizedState).element,Mg(X,$),Sg($,ne,null,ee);var fe=$.memoizedState;if(ne=fe.element,de.isDehydrated){if(de={element:ne,isDehydrated:!1,cache:fe.cache,pendingSuspenseBoundaries:fe.pendingSuspenseBoundaries,transitions:fe.transitions},$.updateQueue.baseState=de,$.memoizedState=de,256&$.flags){$=Xj(X,$,ne,ee,ae=Error(p(423)));break e}if(ne!==ae){$=Xj(X,$,ne,ee,ae=Error(p(424)));break e}for(Pu=Yf($.stateNode.containerInfo.firstChild),Tu=$,Lu=!0,Ou=null,ee=Bu($,null,ne,ee),$.child=ee;ee;)ee.flags=-3&ee.flags|4096,ee=ee.sibling}else{if(Bh(),ne===ae){$=Kj(X,$,ee);break e}Ij(X,$,ne,ee)}$=$.child}return $;case 5:return Vh($),null===X&&yh($),ne=$.type,ae=$.pendingProps,de=null!==X?X.memoizedProps:null,fe=ae.children,Rf(ne,ae)?fe=null:null!==de&&Rf(ne,de)&&($.flags|=32),Tj(X,$),Ij(X,$,fe,ee),$.child;case 6:return null===X&&yh($),null;case 13:return bk(X,$,ee);case 4:return Th($,$.stateNode.containerInfo),ne=$.pendingProps,null===X?$.child=Ru($,null,ne,ee):Ij(X,$,ne,ee),$.child;case 11:return ne=$.type,ae=$.pendingProps,Jj(X,$,ne,ae=$.elementType===ne?ae:yg(ne,ae),ee);case 7:return Ij(X,$,$.pendingProps,ee),$.child;case 8:return Ij(X,$,$.pendingProps.children,ee),$.child;case 12:return $.flags|=4,(ne=$.stateNode).effectDuration=0,ne.passiveEffectDuration=0,Ij(X,$,$.pendingProps.children,ee),$.child;case 10:e:{if(ne=$.type._context,ae=$.pendingProps,de=$.memoizedProps,fe=ae.value,H(tu,ne._currentValue),ne._currentValue=fe,null!==de)if(Ho(de.value,fe)){if(de.children===ae.children&&!hl.current){$=Kj(X,$,ee);break e}}else for(null!==(de=$.child)&&(de.return=$);null!==de;){var Ue=de.dependencies;if(null!==Ue){fe=de.child;for(var je=Ue.firstContext;null!==je;){if(je.context===ne){if(1===de.tag){(je=Ng(-1,ee&-ee)).tag=2;var Ke=de.updateQueue;if(null!==Ke){var et=(Ke=Ke.shared).pending;null===et?je.next=je:(je.next=et.next,et.next=je),Ke.pending=je}}de.lanes|=ee,null!==(je=de.alternate)&&(je.lanes|=ee),Fg(de.return,ee,$),Ue.lanes|=ee;break}je=je.next}}else if(10===de.tag)fe=de.type===$.type?null:de.child;else if(18===de.tag){if(null===(fe=de.return))throw Error(p(341));fe.lanes|=ee,null!==(Ue=fe.alternate)&&(Ue.lanes|=ee),Fg(fe,ee,$),fe=de.sibling}else fe=de.child;if(null!==fe)fe.return=de;else for(fe=de;null!==fe;){if(fe===$){fe=null;break}if(null!==(de=fe.sibling)){de.return=fe.return,fe=de;break}fe=fe.return}de=fe}Ij(X,$,ae.children,ee),$=$.child}return $;case 9:return ae=$.type,ne=$.pendingProps.children,Gg($,ee),ae=Ig(ae),rc($),ne=ne(ae),sc(),$.flags|=1,Ij(X,$,ne,ee),$.child;case 14:return ae=yg(ne=$.type,$.pendingProps),Lj(X,$,ne,ae=yg(ne.type,ae),ee);case 15:return Nj(X,$,$.type,$.pendingProps,ee);case 17:return ne=$.type,ae=$.pendingProps,ae=$.elementType===ne?ae:yg(ne,ae),null!==X&&(X.alternate=null,$.alternate=null,$.flags|=2),$.tag=1,lg(ne)?(X=!0,pg($)):X=!1,Gg($,ee),bh($,ne,ae),dh($,ne,ae,ee),Vj(null,$,ne,!0,X,ee);case 19:return kk(X,$,ee);case 22:return Pj(X,$,ee)}throw Error(p(156,$.tag))};var up="function"===typeof reportError?reportError:function(X){console.error(X)};function Yl(X){this._internalRoot=X}function Zl(X){this._internalRoot=X}function $l(X){return!(!X||1!==X.nodeType&&9!==X.nodeType&&11!==X.nodeType)}function am(X){return!(!X||1!==X.nodeType&&9!==X.nodeType&&11!==X.nodeType&&(8!==X.nodeType||" react-mount-point-unstable "!==X.nodeValue))}function bm(){}function dm(X,$,ee,ne,ae){var de=ee._reactRootContainer;if(de){var fe=de;if("function"===typeof ae){var Ue=ae;ae=function e(){var X=Tl(fe);Ue.call(X)}}Sl($,fe,X,ae)}else fe=function cm(X,$,ee,ne,ae){if(ae){if("function"===typeof ne){var de=ne;ne=function d(){var X=Tl(fe);de.call(X)}}var fe=Rl($,ne,X,0,null,!1,0,"",bm);return X._reactRootContainer=fe,X[Xs]=fe.current,Ff(8===X.nodeType?X.parentNode:X),Dl(),fe}for(;ae=X.lastChild;)X.removeChild(ae);if("function"===typeof ne){var Ue=ne;ne=function d(){var X=Tl(je);Ue.call(X)}}var je=Ol(X,0,!1,null,0,!1,0,"",bm);return X._reactRootContainer=je,X[Xs]=je.current,Ff(8===X.nodeType?X.parentNode:X),Dl((function(){Sl($,je,ee,ne)})),je}(ee,$,X,ae,ne);return Tl(fe)}Zl.prototype.render=Yl.prototype.render=function(X){var $=this._internalRoot;if(null===$)throw Error(p(409));Sl(X,$,null,null)},Zl.prototype.unmount=Yl.prototype.unmount=function(){var X=this._internalRoot;if(null!==X){this._internalRoot=null;var $=X.containerInfo;Dl((function(){Sl(null,X,null,null)})),$[Xs]=null}},Zl.prototype.unstable_scheduleHydration=function(X){if(X){var $=Er();X={blockedOn:null,target:X,priority:$};for(var ee=0;ee<qr.length&&0!==$&&$<qr[ee].priority;ee++);qr.splice(ee,0,X),0===ee&&hd(X)}},Cr=function Rc(X){switch(X.tag){case 3:var $=X.stateNode;if($.current.memoizedState.isDehydrated){var ee=Ec($.pendingLanes);0!==ee&&(Nc($,1|ee),ol($,Yn()),0===(6&Vd)&&(df=Yn()+500,wg()))}break;case 13:var ne=Xg();Dl((function(){return Zg(X,1,ne)})),Vl(X,1)}},Ar=function Sc(X){13===X.tag&&(Zg(X,134217728,Xg()),Vl(X,134217728))},Mr=function Tc(X){if(13===X.tag){var $=Xg(),ee=Yg(X);Zg(X,ee,$),Vl(X,ee)}},Er=function Uc(){return wr},Tr=function Vc(X,$){var ee=wr;try{return wr=X,$()}finally{wr=ee}},_n=function xb(X,$,ee){switch($){case"input":if($a(X,ee),$=ee.name,"radio"===ee.type&&null!=$){for(ee=X;ee.parentNode;)ee=ee.parentNode;for(ee=ee.querySelectorAll("input[name="+JSON.stringify(""+$)+'][type="radio"]'),$=0;$<ee.length;$++){var ne=ee[$];if(ne!==X&&ne.form===X.form){var ae=Cb(ne);if(!ae)throw Error(p(90));Va(ne),$a(ne,ae)}}}break;case"textarea":gb(X,ee);break;case"select":null!=($=ee.value)&&db(X,!!ee.multiple,$,!1)}},Fb=Cl,Gb=Dl;var hp={usingClientEntryPoint:!1,Events:[Bb,He,Cb,Db,Eb,Cl]},pp={findFiberByHostInstance:id,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"};!function(X){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var $=__REACT_DEVTOOLS_GLOBAL_HOOK__;if($.isDisabled||!$.supportsFiber)return!0;try{X=Zt({},X,{getLaneLabelMap:oc,injectProfilingHooks:nc}),ar=$.inject(X),or=$}catch(ee){}$.checkDCE}({bundleType:pp.bundleType,version:pp.version,rendererPackageName:pp.rendererPackageName,rendererConfig:pp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ct.ReactCurrentDispatcher,findHostInstanceByFiber:function findHostInstanceByFiber(X){return null===(X=Yb(X))?null:X.stateNode},findFiberByHostInstance:pp.findFiberByHostInstance||function Wl(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"}),$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hp,$.createPortal=function(X,$){var ee=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$l($))throw Error(p(200));return Pl(X,$,null,ee)},$.createRoot=function(X,$){if(!$l(X))throw Error(p(299));var ee=!1,ne="",ae=up;return null!==$&&void 0!==$&&(!0===$.unstable_strictMode&&(ee=!0),void 0!==$.identifierPrefix&&(ne=$.identifierPrefix),void 0!==$.onRecoverableError&&(ae=$.onRecoverableError)),$=Ol(X,1,!1,null,0,ee,0,ne,ae),X[Xs]=$.current,Ff(8===X.nodeType?X.parentNode:X),new Yl($)},$.findDOMNode=function(X){if(null==X)return null;if(1===X.nodeType)return X;var $=X._reactInternals;if(void 0===$){if("function"===typeof X.render)throw Error(p(188));throw X=Object.keys(X).join(","),Error(p(268,X))}return X=null===(X=Yb($))?null:X.stateNode},$.flushSync=function(X){return Dl(X)},$.hydrate=function(X,$,ee){if(!am($))throw Error(p(200));return dm(null,X,$,!0,ee)},$.hydrateRoot=function(X,$,ee){if(!$l(X))throw Error(p(405));var ne=null!=ee&&ee.hydratedSources||null,ae=!1,de="",fe=up;if(null!==ee&&void 0!==ee&&(!0===ee.unstable_strictMode&&(ae=!0),void 0!==ee.identifierPrefix&&(de=ee.identifierPrefix),void 0!==ee.onRecoverableError&&(fe=ee.onRecoverableError)),$=Rl($,null,X,1,null!=ee?ee:null,ae,0,de,fe),X[Xs]=$.current,Ff(X),ne)for(X=0;X<ne.length;X++)ae=(ae=(ee=ne[X])._getVersion)(ee._source),null==$.mutableSourceEagerHydrationData?$.mutableSourceEagerHydrationData=[ee,ae]:$.mutableSourceEagerHydrationData.push(ee,ae);return new Zl($)},$.render=function(X,$,ee){if(!am($))throw Error(p(200));return dm(null,X,$,!1,ee)},$.unmountComponentAtNode=function(X){if(!am(X))throw Error(p(40));return!!X._reactRootContainer&&(Dl((function(){dm(null,null,X,!1,(function(){X._reactRootContainer=null,X[Xs]=null}))})),!0)},$.unstable_batchedUpdates=Cl,$.unstable_renderSubtreeIntoContainer=function(X,$,ee,ne){if(!am(ee))throw Error(p(200));if(null==X||void 0===X._reactInternals)throw Error(p(38));return dm(X,$,ee,!1,ne)},$.version="18.1.0-next-22edb9f77-20220426","undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop&&__REACT_DEVTOOLS_GLOBAL_HOOK__.registerInternalModuleStop(new Error)},250:function(X,$,ee){"use strict";var ne=ee(683);$.createRoot=ne.createRoot,$.hydrateRoot=ne.hydrateRoot},683:function(X,$,ee){"use strict";!function checkDCE(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(X){console.error(X)}}(),X.exports=ee(419)},77:function(X){var $="undefined"!==typeof Element,ee="function"===typeof Map,ne="function"===typeof Set,ae="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function equal(X,de){if(X===de)return!0;if(X&&de&&"object"==typeof X&&"object"==typeof de){if(X.constructor!==de.constructor)return!1;var fe,Ue,je,Ke;if(Array.isArray(X)){if((fe=X.length)!=de.length)return!1;for(Ue=fe;0!==Ue--;)if(!equal(X[Ue],de[Ue]))return!1;return!0}if(ee&&X instanceof Map&&de instanceof Map){if(X.size!==de.size)return!1;for(Ke=X.entries();!(Ue=Ke.next()).done;)if(!de.has(Ue.value[0]))return!1;for(Ke=X.entries();!(Ue=Ke.next()).done;)if(!equal(Ue.value[1],de.get(Ue.value[0])))return!1;return!0}if(ne&&X instanceof Set&&de instanceof Set){if(X.size!==de.size)return!1;for(Ke=X.entries();!(Ue=Ke.next()).done;)if(!de.has(Ue.value[0]))return!1;return!0}if(ae&&ArrayBuffer.isView(X)&&ArrayBuffer.isView(de)){if((fe=X.length)!=de.length)return!1;for(Ue=fe;0!==Ue--;)if(X[Ue]!==de[Ue])return!1;return!0}if(X.constructor===RegExp)return X.source===de.source&&X.flags===de.flags;if(X.valueOf!==Object.prototype.valueOf)return X.valueOf()===de.valueOf();if(X.toString!==Object.prototype.toString)return X.toString()===de.toString();if((fe=(je=Object.keys(X)).length)!==Object.keys(de).length)return!1;for(Ue=fe;0!==Ue--;)if(!Object.prototype.hasOwnProperty.call(de,je[Ue]))return!1;if($&&X instanceof Element)return!1;for(Ue=fe;0!==Ue--;)if(("_owner"!==je[Ue]&&"__v"!==je[Ue]&&"__o"!==je[Ue]||!X.$$typeof)&&!equal(X[je[Ue]],de[je[Ue]]))return!1;return!0}return X!==X&&de!==de}X.exports=function isEqual(X,$){try{return equal(X,$)}catch(ee){if((ee.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw ee}}},374:function(X,$,ee){"use strict";var ne=ee(791),ae=Symbol.for("react.element"),de=Symbol.for("react.fragment"),fe=Object.prototype.hasOwnProperty,Ue=ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,je={key:!0,ref:!0,__self:!0,__source:!0};function q(X,$,ee){var ne,de={},Ke=null,et=null;for(ne in void 0!==ee&&(Ke=""+ee),void 0!==$.key&&(Ke=""+$.key),void 0!==$.ref&&(et=$.ref),$)fe.call($,ne)&&!je.hasOwnProperty(ne)&&(de[ne]=$[ne]);if(X&&X.defaultProps)for(ne in $=X.defaultProps)void 0===de[ne]&&(de[ne]=$[ne]);return{$$typeof:ae,type:X,key:Ke,ref:et,props:de,_owner:Ue.current}}$.jsx=q,$.jsxs=q},117:function(X,$){"use strict";var ee=Symbol.for("react.element"),ne=Symbol.for("react.portal"),ae=Symbol.for("react.fragment"),de=Symbol.for("react.strict_mode"),fe=Symbol.for("react.profiler"),Ue=Symbol.for("react.provider"),je=Symbol.for("react.context"),Ke=Symbol.for("react.forward_ref"),et=Symbol.for("react.suspense"),tt=Symbol.for("react.memo"),nt=Symbol.for("react.lazy"),it=Symbol.iterator;var ct={isMounted:function isMounted(){return!1},enqueueForceUpdate:function enqueueForceUpdate(){},enqueueReplaceState:function enqueueReplaceState(){},enqueueSetState:function enqueueSetState(){}},dt=Object.assign,vt={};function E(X,$,ee){this.props=X,this.context=$,this.refs=vt,this.updater=ee||ct}function F(){}function G(X,$,ee){this.props=X,this.context=$,this.refs=vt,this.updater=ee||ct}E.prototype.isReactComponent={},E.prototype.setState=function(X,$){if("object"!==typeof X&&"function"!==typeof X&&null!=X)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,X,$,"setState")},E.prototype.forceUpdate=function(X){this.updater.enqueueForceUpdate(this,X,"forceUpdate")},F.prototype=E.prototype;var gt=G.prototype=new F;gt.constructor=G,dt(gt,E.prototype),gt.isPureReactComponent=!0;var yt=Array.isArray,_t=Object.prototype.hasOwnProperty,wt={current:null},St={key:!0,ref:!0,__self:!0,__source:!0};function M(X,$,ne){var ae,de={},fe=null,Ue=null;if(null!=$)for(ae in void 0!==$.ref&&(Ue=$.ref),void 0!==$.key&&(fe=""+$.key),$)_t.call($,ae)&&!St.hasOwnProperty(ae)&&(de[ae]=$[ae]);var je=arguments.length-2;if(1===je)de.children=ne;else if(1<je){for(var Ke=Array(je),et=0;et<je;et++)Ke[et]=arguments[et+2];de.children=Ke}if(X&&X.defaultProps)for(ae in je=X.defaultProps)void 0===de[ae]&&(de[ae]=je[ae]);return{$$typeof:ee,type:X,key:fe,ref:Ue,props:de,_owner:wt.current}}function O(X){return"object"===typeof X&&null!==X&&X.$$typeof===ee}var Ct=/\/+/g;function Q(X,$){return"object"===typeof X&&null!==X&&null!=X.key?function escape(X){var $={"=":"=0",":":"=2"};return"$"+X.replace(/[=:]/g,(function(X){return $[X]}))}(""+X.key):$.toString(36)}function R(X,$,ae,de,fe){var Ue=typeof X;"undefined"!==Ue&&"boolean"!==Ue||(X=null);var je=!1;if(null===X)je=!0;else switch(Ue){case"string":case"number":je=!0;break;case"object":switch(X.$$typeof){case ee:case ne:je=!0}}if(je)return fe=fe(je=X),X=""===de?"."+Q(je,0):de,yt(fe)?(ae="",null!=X&&(ae=X.replace(Ct,"$&/")+"/"),R(fe,$,ae,"",(function(X){return X}))):null!=fe&&(O(fe)&&(fe=function N(X,$){return{$$typeof:ee,type:X.type,key:$,ref:X.ref,props:X.props,_owner:X._owner}}(fe,ae+(!fe.key||je&&je.key===fe.key?"":(""+fe.key).replace(Ct,"$&/")+"/")+X)),$.push(fe)),1;if(je=0,de=""===de?".":de+":",yt(X))for(var Ke=0;Ke<X.length;Ke++){var et=de+Q(Ue=X[Ke],Ke);je+=R(Ue,$,ae,et,fe)}else if(et=function A(X){return null===X||"object"!==typeof X?null:"function"===typeof(X=it&&X[it]||X["@@iterator"])?X:null}(X),"function"===typeof et)for(X=et.call(X),Ke=0;!(Ue=X.next()).done;)je+=R(Ue=Ue.value,$,ae,et=de+Q(Ue,Ke++),fe);else if("object"===Ue)throw $=String(X),Error("Objects are not valid as a React child (found: "+("[object Object]"===$?"object with keys {"+Object.keys(X).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return je}function S(X,$,ee){if(null==X)return X;var ne=[],ae=0;return R(X,ne,"","",(function(X){return $.call(ee,X,ae++)})),ne}function T(X){if(-1===X._status){var $=X._result;($=$()).then((function($){0!==X._status&&-1!==X._status||(X._status=1,X._result=$)}),(function($){0!==X._status&&-1!==X._status||(X._status=2,X._result=$)})),-1===X._status&&(X._status=0,X._result=$)}if(1===X._status)return X._result.default;throw X._result}var At={current:null},Et={transition:null},Rt={ReactCurrentDispatcher:At,ReactCurrentBatchConfig:Et,ReactCurrentOwner:wt};$.Children={map:S,forEach:function forEach(X,$,ee){S(X,(function(){$.apply(this,arguments)}),ee)},count:function count(X){var $=0;return S(X,(function(){$++})),$},toArray:function toArray(X){return S(X,(function(X){return X}))||[]},only:function only(X){if(!O(X))throw Error("React.Children.only expected to receive a single React element child.");return X}},$.Component=E,$.Fragment=ae,$.Profiler=fe,$.PureComponent=G,$.StrictMode=de,$.Suspense=et,$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Rt,$.cloneElement=function(X,$,ne){if(null===X||void 0===X)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+X+".");var ae=dt({},X.props),de=X.key,fe=X.ref,Ue=X._owner;if(null!=$){if(void 0!==$.ref&&(fe=$.ref,Ue=wt.current),void 0!==$.key&&(de=""+$.key),X.type&&X.type.defaultProps)var je=X.type.defaultProps;for(Ke in $)_t.call($,Ke)&&!St.hasOwnProperty(Ke)&&(ae[Ke]=void 0===$[Ke]&&void 0!==je?je[Ke]:$[Ke])}var Ke=arguments.length-2;if(1===Ke)ae.children=ne;else if(1<Ke){je=Array(Ke);for(var et=0;et<Ke;et++)je[et]=arguments[et+2];ae.children=je}return{$$typeof:ee,type:X.type,key:de,ref:fe,props:ae,_owner:Ue}},$.createContext=function(X){return(X={$$typeof:je,_currentValue:X,_currentValue2:X,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:Ue,_context:X},X.Consumer=X},$.createElement=M,$.createFactory=function(X){var $=M.bind(null,X);return $.type=X,$},$.createRef=function(){return{current:null}},$.forwardRef=function(X){return{$$typeof:Ke,render:X}},$.isValidElement=O,$.lazy=function(X){return{$$typeof:nt,_payload:{_status:-1,_result:X},_init:T}},$.memo=function(X,$){return{$$typeof:tt,type:X,compare:void 0===$?null:$}},$.startTransition=function(X){var $=Et.transition;Et.transition={};try{X()}finally{Et.transition=$}},$.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},$.useCallback=function(X,$){return At.current.useCallback(X,$)},$.useContext=function(X){return At.current.useContext(X)},$.useDebugValue=function(){},$.useDeferredValue=function(X){return At.current.useDeferredValue(X)},$.useEffect=function(X,$){return At.current.useEffect(X,$)},$.useId=function(){return At.current.useId()},$.useImperativeHandle=function(X,$,ee){return At.current.useImperativeHandle(X,$,ee)},$.useInsertionEffect=function(X,$){return At.current.useInsertionEffect(X,$)},$.useLayoutEffect=function(X,$){return At.current.useLayoutEffect(X,$)},$.useMemo=function(X,$){return At.current.useMemo(X,$)},$.useReducer=function(X,$,ee){return At.current.useReducer(X,$,ee)},$.useRef=function(X){return At.current.useRef(X)},$.useState=function(X){return At.current.useState(X)},$.useSyncExternalStore=function(X,$,ee){return At.current.useSyncExternalStore(X,$,ee)},$.useTransition=function(){return At.current.useTransition()},$.version="18.1.0"},791:function(X,$,ee){"use strict";X.exports=ee(117)},184:function(X,$,ee){"use strict";X.exports=ee(374)},727:function(X){var $=function(X){"use strict";var $,ee=Object.prototype,ne=ee.hasOwnProperty,ae="function"===typeof Symbol?Symbol:{},de=ae.iterator||"@@iterator",fe=ae.asyncIterator||"@@asyncIterator",Ue=ae.toStringTag||"@@toStringTag";function define(X,$,ee){return Object.defineProperty(X,$,{value:ee,enumerable:!0,configurable:!0,writable:!0}),X[$]}try{define({},"")}catch(gt){define=function define(X,$,ee){return X[$]=ee}}function wrap(X,$,ee,ne){var ae=$&&$.prototype instanceof Generator?$:Generator,de=Object.create(ae.prototype),fe=new Context(ne||[]);return de._invoke=function makeInvokeMethod(X,$,ee){var ne=je;return function invoke(ae,de){if(ne===et)throw new Error("Generator is already running");if(ne===tt){if("throw"===ae)throw de;return doneResult()}for(ee.method=ae,ee.arg=de;;){var fe=ee.delegate;if(fe){var Ue=maybeInvokeDelegate(fe,ee);if(Ue){if(Ue===nt)continue;return Ue}}if("next"===ee.method)ee.sent=ee._sent=ee.arg;else if("throw"===ee.method){if(ne===je)throw ne=tt,ee.arg;ee.dispatchException(ee.arg)}else"return"===ee.method&&ee.abrupt("return",ee.arg);ne=et;var it=tryCatch(X,$,ee);if("normal"===it.type){if(ne=ee.done?tt:Ke,it.arg===nt)continue;return{value:it.arg,done:ee.done}}"throw"===it.type&&(ne=tt,ee.method="throw",ee.arg=it.arg)}}}(X,ee,fe),de}function tryCatch(X,$,ee){try{return{type:"normal",arg:X.call($,ee)}}catch(gt){return{type:"throw",arg:gt}}}X.wrap=wrap;var je="suspendedStart",Ke="suspendedYield",et="executing",tt="completed",nt={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var it={};define(it,de,(function(){return this}));var ct=Object.getPrototypeOf,dt=ct&&ct(ct(values([])));dt&&dt!==ee&&ne.call(dt,de)&&(it=dt);var vt=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(it);function defineIteratorMethods(X){["next","throw","return"].forEach((function($){define(X,$,(function(X){return this._invoke($,X)}))}))}function AsyncIterator(X,$){function invoke(ee,ae,de,fe){var Ue=tryCatch(X[ee],X,ae);if("throw"!==Ue.type){var je=Ue.arg,Ke=je.value;return Ke&&"object"===typeof Ke&&ne.call(Ke,"__await")?$.resolve(Ke.__await).then((function(X){invoke("next",X,de,fe)}),(function(X){invoke("throw",X,de,fe)})):$.resolve(Ke).then((function(X){je.value=X,de(je)}),(function(X){return invoke("throw",X,de,fe)}))}fe(Ue.arg)}var ee;this._invoke=function enqueue(X,ne){function callInvokeWithMethodAndArg(){return new $((function($,ee){invoke(X,ne,$,ee)}))}return ee=ee?ee.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}}function maybeInvokeDelegate(X,ee){var ne=X.iterator[ee.method];if(ne===$){if(ee.delegate=null,"throw"===ee.method){if(X.iterator.return&&(ee.method="return",ee.arg=$,maybeInvokeDelegate(X,ee),"throw"===ee.method))return nt;ee.method="throw",ee.arg=new TypeError("The iterator does not provide a 'throw' method")}return nt}var ae=tryCatch(ne,X.iterator,ee.arg);if("throw"===ae.type)return ee.method="throw",ee.arg=ae.arg,ee.delegate=null,nt;var de=ae.arg;return de?de.done?(ee[X.resultName]=de.value,ee.next=X.nextLoc,"return"!==ee.method&&(ee.method="next",ee.arg=$),ee.delegate=null,nt):de:(ee.method="throw",ee.arg=new TypeError("iterator result is not an object"),ee.delegate=null,nt)}function pushTryEntry(X){var $={tryLoc:X[0]};1 in X&&($.catchLoc=X[1]),2 in X&&($.finallyLoc=X[2],$.afterLoc=X[3]),this.tryEntries.push($)}function resetTryEntry(X){var $=X.completion||{};$.type="normal",delete $.arg,X.completion=$}function Context(X){this.tryEntries=[{tryLoc:"root"}],X.forEach(pushTryEntry,this),this.reset(!0)}function values(X){if(X){var ee=X[de];if(ee)return ee.call(X);if("function"===typeof X.next)return X;if(!isNaN(X.length)){var ae=-1,fe=function next(){for(;++ae<X.length;)if(ne.call(X,ae))return next.value=X[ae],next.done=!1,next;return next.value=$,next.done=!0,next};return fe.next=fe}}return{next:doneResult}}function doneResult(){return{value:$,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,define(vt,"constructor",GeneratorFunctionPrototype),define(GeneratorFunctionPrototype,"constructor",GeneratorFunction),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,Ue,"GeneratorFunction"),X.isGeneratorFunction=function(X){var $="function"===typeof X&&X.constructor;return!!$&&($===GeneratorFunction||"GeneratorFunction"===($.displayName||$.name))},X.mark=function(X){return Object.setPrototypeOf?Object.setPrototypeOf(X,GeneratorFunctionPrototype):(X.__proto__=GeneratorFunctionPrototype,define(X,Ue,"GeneratorFunction")),X.prototype=Object.create(vt),X},X.awrap=function(X){return{__await:X}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,fe,(function(){return this})),X.AsyncIterator=AsyncIterator,X.async=function($,ee,ne,ae,de){void 0===de&&(de=Promise);var fe=new AsyncIterator(wrap($,ee,ne,ae),de);return X.isGeneratorFunction(ee)?fe:fe.next().then((function(X){return X.done?X.value:fe.next()}))},defineIteratorMethods(vt),define(vt,Ue,"Generator"),define(vt,de,(function(){return this})),define(vt,"toString",(function(){return"[object Generator]"})),X.keys=function(X){var $=[];for(var ee in X)$.push(ee);return $.reverse(),function next(){for(;$.length;){var ee=$.pop();if(ee in X)return next.value=ee,next.done=!1,next}return next.done=!0,next}},X.values=values,Context.prototype={constructor:Context,reset:function reset(X){if(this.prev=0,this.next=0,this.sent=this._sent=$,this.done=!1,this.delegate=null,this.method="next",this.arg=$,this.tryEntries.forEach(resetTryEntry),!X)for(var ee in this)"t"===ee.charAt(0)&&ne.call(this,ee)&&!isNaN(+ee.slice(1))&&(this[ee]=$)},stop:function stop(){this.done=!0;var X=this.tryEntries[0].completion;if("throw"===X.type)throw X.arg;return this.rval},dispatchException:function dispatchException(X){if(this.done)throw X;var ee=this;function handle(ne,ae){return fe.type="throw",fe.arg=X,ee.next=ne,ae&&(ee.method="next",ee.arg=$),!!ae}for(var ae=this.tryEntries.length-1;ae>=0;--ae){var de=this.tryEntries[ae],fe=de.completion;if("root"===de.tryLoc)return handle("end");if(de.tryLoc<=this.prev){var Ue=ne.call(de,"catchLoc"),je=ne.call(de,"finallyLoc");if(Ue&&je){if(this.prev<de.catchLoc)return handle(de.catchLoc,!0);if(this.prev<de.finallyLoc)return handle(de.finallyLoc)}else if(Ue){if(this.prev<de.catchLoc)return handle(de.catchLoc,!0)}else{if(!je)throw new Error("try statement without catch or finally");if(this.prev<de.finallyLoc)return handle(de.finallyLoc)}}}},abrupt:function abrupt(X,$){for(var ee=this.tryEntries.length-1;ee>=0;--ee){var ae=this.tryEntries[ee];if(ae.tryLoc<=this.prev&&ne.call(ae,"finallyLoc")&&this.prev<ae.finallyLoc){var de=ae;break}}de&&("break"===X||"continue"===X)&&de.tryLoc<=$&&$<=de.finallyLoc&&(de=null);var fe=de?de.completion:{};return fe.type=X,fe.arg=$,de?(this.method="next",this.next=de.finallyLoc,nt):this.complete(fe)},complete:function complete(X,$){if("throw"===X.type)throw X.arg;return"break"===X.type||"continue"===X.type?this.next=X.arg:"return"===X.type?(this.rval=this.arg=X.arg,this.method="return",this.next="end"):"normal"===X.type&&$&&(this.next=$),nt},finish:function finish(X){for(var $=this.tryEntries.length-1;$>=0;--$){var ee=this.tryEntries[$];if(ee.finallyLoc===X)return this.complete(ee.completion,ee.afterLoc),resetTryEntry(ee),nt}},catch:function _catch(X){for(var $=this.tryEntries.length-1;$>=0;--$){var ee=this.tryEntries[$];if(ee.tryLoc===X){var ne=ee.completion;if("throw"===ne.type){var ae=ne.arg;resetTryEntry(ee)}return ae}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(X,ee,ne){return this.delegate={iterator:values(X),resultName:ee,nextLoc:ne},"next"===this.method&&(this.arg=$),nt}},X}(X.exports);try{regeneratorRuntime=$}catch(ee){"object"===typeof globalThis?globalThis.regeneratorRuntime=$:Function("r","regeneratorRuntime = r")($)}},813:function(X,$){"use strict";function f(X,$){var ee=X.length;X.push($);e:for(;0<ee;){var ne=ee-1>>>1,ae=X[ne];if(!(0<g(ae,$)))break e;X[ne]=$,X[ee]=ae,ee=ne}}function h(X){return 0===X.length?null:X[0]}function k(X){if(0===X.length)return null;var $=X[0],ee=X.pop();if(ee!==$){X[0]=ee;e:for(var ne=0,ae=X.length,de=ae>>>1;ne<de;){var fe=2*(ne+1)-1,Ue=X[fe],je=fe+1,Ke=X[je];if(0>g(Ue,ee))je<ae&&0>g(Ke,Ue)?(X[ne]=Ke,X[je]=ee,ne=je):(X[ne]=Ue,X[fe]=ee,ne=fe);else{if(!(je<ae&&0>g(Ke,ee)))break e;X[ne]=Ke,X[je]=ee,ne=je}}}return $}function g(X,$){var ee=X.sortIndex-$.sortIndex;return 0!==ee?ee:X.id-$.id}if("object"===typeof performance&&"function"===typeof performance.now){var ee=performance;$.unstable_now=function(){return ee.now()}}else{var ne=Date,ae=ne.now();$.unstable_now=function(){return ne.now()-ae}}var de=[],fe=[],Ue=1,je=null,Ke=3,et=!1,tt=!1,nt=!1,it="function"===typeof setTimeout?setTimeout:null,ct="function"===typeof clearTimeout?clearTimeout:null,dt="undefined"!==typeof setImmediate?setImmediate:null;function G(X){for(var $=h(fe);null!==$;){if(null===$.callback)k(fe);else{if(!($.startTime<=X))break;k(fe),$.sortIndex=$.expirationTime,f(de,$)}$=h(fe)}}function H(X){if(nt=!1,G(X),!tt)if(null!==h(de))tt=!0,I(J);else{var $=h(fe);null!==$&&K(H,$.startTime-X)}}function J(X,ee){tt=!1,nt&&(nt=!1,ct(_t),_t=-1),et=!0;var ne=Ke;try{for(G(ee),je=h(de);null!==je&&(!(je.expirationTime>ee)||X&&!M());){var ae=je.callback;if("function"===typeof ae){je.callback=null,Ke=je.priorityLevel;var Ue=ae(je.expirationTime<=ee);ee=$.unstable_now(),"function"===typeof Ue?je.callback=Ue:je===h(de)&&k(de),G(ee)}else k(de);je=h(de)}if(null!==je)var it=!0;else{var dt=h(fe);null!==dt&&K(H,dt.startTime-ee),it=!1}return it}finally{je=null,Ke=ne,et=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var vt,gt=!1,yt=null,_t=-1,wt=5,St=-1;function M(){return!($.unstable_now()-St<wt)}function R(){if(null!==yt){var X=$.unstable_now();St=X;var ee=!0;try{ee=yt(!0,X)}finally{ee?vt():(gt=!1,yt=null)}}else gt=!1}if("function"===typeof dt)vt=function S(){dt(R)};else if("undefined"!==typeof MessageChannel){var Ct=new MessageChannel,At=Ct.port2;Ct.port1.onmessage=R,vt=function S(){At.postMessage(null)}}else vt=function S(){it(R,0)};function I(X){yt=X,gt||(gt=!0,vt())}function K(X,ee){_t=it((function(){X($.unstable_now())}),ee)}$.unstable_IdlePriority=5,$.unstable_ImmediatePriority=1,$.unstable_LowPriority=4,$.unstable_NormalPriority=3,$.unstable_Profiling=null,$.unstable_UserBlockingPriority=2,$.unstable_cancelCallback=function(X){X.callback=null},$.unstable_continueExecution=function(){tt||et||(tt=!0,I(J))},$.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):wt=0<X?Math.floor(1e3/X):5},$.unstable_getCurrentPriorityLevel=function(){return Ke},$.unstable_getFirstCallbackNode=function(){return h(de)},$.unstable_next=function(X){switch(Ke){case 1:case 2:case 3:var $=3;break;default:$=Ke}var ee=Ke;Ke=$;try{return X()}finally{Ke=ee}},$.unstable_pauseExecution=function(){},$.unstable_requestPaint=function(){},$.unstable_runWithPriority=function(X,$){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ee=Ke;Ke=X;try{return $()}finally{Ke=ee}},$.unstable_scheduleCallback=function(X,ee,ne){var ae=$.unstable_now();switch("object"===typeof ne&&null!==ne?ne="number"===typeof(ne=ne.delay)&&0<ne?ae+ne:ae:ne=ae,X){case 1:var je=-1;break;case 2:je=250;break;case 5:je=1073741823;break;case 4:je=1e4;break;default:je=5e3}return X={id:Ue++,callback:ee,priorityLevel:X,startTime:ne,expirationTime:je=ne+je,sortIndex:-1},ne>ae?(X.sortIndex=ne,f(fe,X),null===h(de)&&X===h(fe)&&(nt?(ct(_t),_t=-1):nt=!0,K(H,ne-ae))):(X.sortIndex=je,f(de,X),tt||et||(tt=!0,I(J))),X},$.unstable_shouldYield=M,$.unstable_wrapCallback=function(X){var $=Ke;return function(){var ee=Ke;Ke=$;try{return X.apply(this,arguments)}finally{Ke=ee}}}},296:function(X,$,ee){"use strict";X.exports=ee(813)},458:function(X){X.exports=function(){var X=document.getSelection();if(!X.rangeCount)return function(){};for(var $=document.activeElement,ee=[],ne=0;ne<X.rangeCount;ne++)ee.push(X.getRangeAt(ne));switch($.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":$.blur();break;default:$=null}return X.removeAllRanges(),function(){"Caret"===X.type&&X.removeAllRanges(),X.rangeCount||ee.forEach((function($){X.addRange($)})),$&&$.focus()}}},907:function(X,$,ee){"use strict";function _arrayLikeToArray(X,$){(null==$||$>X.length)&&($=X.length);for(var ee=0,ne=new Array($);ee<$;ee++)ne[ee]=X[ee];return ne}ee.d($,{Z:function(){return _arrayLikeToArray}})},861:function(X,$,ee){"use strict";function asyncGeneratorStep(X,$,ee,ne,ae,de,fe){try{var Ue=X[de](fe),je=Ue.value}catch(Ke){return void ee(Ke)}Ue.done?$(je):Promise.resolve(je).then(ne,ae)}function _asyncToGenerator(X){return function(){var $=this,ee=arguments;return new Promise((function(ne,ae){var de=X.apply($,ee);function _next(X){asyncGeneratorStep(de,ne,ae,_next,_throw,"next",X)}function _throw(X){asyncGeneratorStep(de,ne,ae,_next,_throw,"throw",X)}_next(void 0)}))}}ee.d($,{Z:function(){return _asyncToGenerator}})},762:function(X,$,ee){"use strict";ee.d($,{Z:function(){return _createForOfIteratorHelper}});var ne=ee(181);function _createForOfIteratorHelper(X,$){var ee="undefined"!==typeof Symbol&&X[Symbol.iterator]||X["@@iterator"];if(!ee){if(Array.isArray(X)||(ee=(0,ne.Z)(X))||$&&X&&"number"===typeof X.length){ee&&(X=ee);var ae=0,de=function F(){};return{s:de,n:function n(){return ae>=X.length?{done:!0}:{done:!1,value:X[ae++]}},e:function e(X){throw X},f:de}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var fe,Ue=!0,je=!1;return{s:function s(){ee=ee.call(X)},n:function n(){var X=ee.next();return Ue=X.done,X},e:function e(X){je=!0,fe=X},f:function f(){try{Ue||null==ee.return||ee.return()}finally{if(je)throw fe}}}}},942:function(X,$,ee){"use strict";function _defineProperty(X,$,ee){return $ in X?Object.defineProperty(X,$,{value:ee,enumerable:!0,configurable:!0,writable:!0}):X[$]=ee,X}ee.d($,{Z:function(){return _defineProperty}})},885:function(X,$,ee){"use strict";ee.d($,{Z:function(){return _slicedToArray}});var ne=ee(181);function _slicedToArray(X,$){return function _arrayWithHoles(X){if(Array.isArray(X))return X}(X)||function _iterableToArrayLimit(X,$){var ee=null==X?null:"undefined"!==typeof Symbol&&X[Symbol.iterator]||X["@@iterator"];if(null!=ee){var ne,ae,de=[],fe=!0,Ue=!1;try{for(ee=ee.call(X);!(fe=(ne=ee.next()).done)&&(de.push(ne.value),!$||de.length!==$);fe=!0);}catch(je){Ue=!0,ae=je}finally{try{fe||null==ee.return||ee.return()}finally{if(Ue)throw ae}}return de}}(X,$)||(0,ne.Z)(X,$)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},982:function(X,$,ee){"use strict";ee.d($,{Z:function(){return _toConsumableArray}});var ne=ee(907);var ae=ee(181);function _toConsumableArray(X){return function _arrayWithoutHoles(X){if(Array.isArray(X))return(0,ne.Z)(X)}(X)||function _iterableToArray(X){if("undefined"!==typeof Symbol&&null!=X[Symbol.iterator]||null!=X["@@iterator"])return Array.from(X)}(X)||(0,ae.Z)(X)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},181:function(X,$,ee){"use strict";ee.d($,{Z:function(){return _unsupportedIterableToArray}});var ne=ee(907);function _unsupportedIterableToArray(X,$){if(X){if("string"===typeof X)return(0,ne.Z)(X,$);var ee=Object.prototype.toString.call(X).slice(8,-1);return"Object"===ee&&X.constructor&&(ee=X.constructor.name),"Map"===ee||"Set"===ee?Array.from(X):"Arguments"===ee||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ee)?(0,ne.Z)(X,$):void 0}}}},$={};function __webpack_require__(ee){var ne=$[ee];if(void 0!==ne)return ne.exports;var ae=$[ee]={id:ee,loaded:!1,exports:{}};return X[ee](ae,ae.exports,__webpack_require__),ae.loaded=!0,ae.exports}__webpack_require__.m=X,__webpack_require__.amdO={},__webpack_require__.n=function(X){var $=X&&X.__esModule?function(){return X.default}:function(){return X};return __webpack_require__.d($,{a:$}),$},function(){var X,$=Object.getPrototypeOf?function(X){return Object.getPrototypeOf(X)}:function(X){return X.__proto__};__webpack_require__.t=function(ee,ne){if(1&ne&&(ee=this(ee)),8&ne)return ee;if("object"===typeof ee&&ee){if(4&ne&&ee.__esModule)return ee;if(16&ne&&"function"===typeof ee.then)return ee}var ae=Object.create(null);__webpack_require__.r(ae);var de={};X=X||[null,$({}),$([]),$($)];for(var fe=2&ne&&ee;"object"==typeof fe&&!~X.indexOf(fe);fe=$(fe))Object.getOwnPropertyNames(fe).forEach((function(X){de[X]=function(){return ee[X]}}));return de.default=function(){return ee},__webpack_require__.d(ae,de),ae}}(),__webpack_require__.d=function(X,$){for(var ee in $)__webpack_require__.o($,ee)&&!__webpack_require__.o(X,ee)&&Object.defineProperty(X,ee,{enumerable:!0,get:$[ee]})},__webpack_require__.f={},__webpack_require__.e=function(X){return Promise.all(Object.keys(__webpack_require__.f).reduce((function($,ee){return __webpack_require__.f[ee](X,$),$}),[]))},__webpack_require__.u=function(X){return"static/js/"+X+".8e568108.chunk.js"},__webpack_require__.miniCssF=function(X){},__webpack_require__.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(X){if("object"===typeof window)return window}}(),__webpack_require__.hmd=function(X){return(X=Object.create(X)).children||(X.children=[]),Object.defineProperty(X,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+X.id)}}),X},__webpack_require__.o=function(X,$){return Object.prototype.hasOwnProperty.call(X,$)},function(){var X={},$="personal-website:";__webpack_require__.l=function(ee,ne,ae,de){if(X[ee])X[ee].push(ne);else{var fe,Ue;if(void 0!==ae)for(var je=document.getElementsByTagName("script"),Ke=0;Ke<je.length;Ke++){var et=je[Ke];if(et.getAttribute("src")==ee||et.getAttribute("data-webpack")==$+ae){fe=et;break}}fe||(Ue=!0,(fe=document.createElement("script")).charset="utf-8",fe.timeout=120,__webpack_require__.nc&&fe.setAttribute("nonce",__webpack_require__.nc),fe.setAttribute("data-webpack",$+ae),fe.src=ee),X[ee]=[ne];var onScriptComplete=function($,ne){fe.onerror=fe.onload=null,clearTimeout(tt);var ae=X[ee];if(delete X[ee],fe.parentNode&&fe.parentNode.removeChild(fe),ae&&ae.forEach((function(X){return X(ne)})),$)return $(ne)},tt=setTimeout(onScriptComplete.bind(null,void 0,{type:"timeout",target:fe}),12e4);fe.onerror=onScriptComplete.bind(null,fe.onerror),fe.onload=onScriptComplete.bind(null,fe.onload),Ue&&document.head.appendChild(fe)}}}(),__webpack_require__.r=function(X){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(X,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(X,"__esModule",{value:!0})},__webpack_require__.nmd=function(X){return X.paths=[],X.children||(X.children=[]),X},__webpack_require__.p="/jsn/",function(){var X={179:0};__webpack_require__.f.j=function($,ee){var ne=__webpack_require__.o(X,$)?X[$]:void 0;if(0!==ne)if(ne)ee.push(ne[2]);else{var ae=new Promise((function(ee,ae){ne=X[$]=[ee,ae]}));ee.push(ne[2]=ae);var de=__webpack_require__.p+__webpack_require__.u($),fe=new Error;__webpack_require__.l(de,(function(ee){if(__webpack_require__.o(X,$)&&(0!==(ne=X[$])&&(X[$]=void 0),ne)){var ae=ee&&("load"===ee.type?"missing":ee.type),de=ee&&ee.target&&ee.target.src;fe.message="Loading chunk "+$+" failed.\n("+ae+": "+de+")",fe.name="ChunkLoadError",fe.type=ae,fe.request=de,ne[1](fe)}}),"chunk-"+$,$)}};var webpackJsonpCallback=function($,ee){var ne,ae,de=ee[0],fe=ee[1],Ue=ee[2],je=0;if(de.some((function($){return 0!==X[$]}))){for(ne in fe)__webpack_require__.o(fe,ne)&&(__webpack_require__.m[ne]=fe[ne]);if(Ue)Ue(__webpack_require__)}for($&&$(ee);je<de.length;je++)ae=de[je],__webpack_require__.o(X,ae)&&X[ae]&&X[ae][0](),X[ae]=0},$=self.webpackChunkpersonal_website=self.webpackChunkpersonal_website||[];$.forEach(webpackJsonpCallback.bind(null,0)),$.push=webpackJsonpCallback.bind(null,$.push.bind($))}(),function(){"use strict";var X=__webpack_require__(791),$=__webpack_require__.t(X,2),ee=__webpack_require__(250),ne=__webpack_require__(198),ae=__webpack_require__.n(ne),de=1/60*1e3,fe="undefined"!==typeof performance?function(){return performance.now()}:function(){return Date.now()};function getLastItem(X){var $=null==X?0:X.length;return $?X[$-1]:void 0}function isNumber(X){return"number"===typeof X}function isArray(X){return Array.isArray(X)}function chakra_ui_utils_esm_isFunction(X){return"function"===typeof X}function chakra_ui_utils_esm_isObject(X){var $=typeof X;return null!=X&&("object"===$||"function"===$)&&!isArray(X)}function isEmptyObject(X){return chakra_ui_utils_esm_isObject(X)&&0===Object.keys(X).length}function isString(X){return"[object String]"===Object.prototype.toString.call(X)}function isCssVar(X){return/^var\(--.+\)$/.test(X)}var Ue=!1;function omit(X,$){var ee={};return Object.keys(X).forEach((function(ne){$.includes(ne)||(ee[ne]=X[ne])})),ee}var je=function memoize(X){var $=new WeakMap;return function memoizedFn(ee,ne,ae,de){if("undefined"===typeof ee)return X(ee,ne,ae);$.has(ee)||$.set(ee,new Map);var fe=$.get(ee);if(fe.has(ne))return fe.get(ne);var Ue=X(ee,ne,ae,de);return fe.set(ne,Ue),Ue}}((function get(X,$,ee,ne){var ae="string"===typeof $?$.split("."):[$];for(ne=0;ne<ae.length&&X;ne+=1)X=X[ae[ne]];return void 0===X?ee:X}));function objectFilter(X,$){var ee={};return Object.keys(X).forEach((function(ne){var ae=X[ne];$(ae,ne,X)&&(ee[ne]=ae)})),ee}var Ke=function filterUndefined(X){return objectFilter(X,(function(X){return null!==X&&void 0!==X}))},et=function objectKeys(X){return Object.keys(X)},tt=function fromEntries(X){return X.reduce((function(X,$){var ee=$[0],ne=$[1];return X[ee]=ne,X}),{})};function px(X){if(null==X)return X;var $=function analyzeCSSValue(X){var $=parseFloat(X.toString()),ee=X.toString().replace(String($),"");return{unitless:!ee,value:$,unit:ee}}(X);return $.unitless||isNumber(X)?X+"px":X}var nt=function sortByBreakpointValue(X,$){return parseInt(X[1],10)>parseInt($[1],10)?1:-1},it=function sortBps(X){return tt(Object.entries(X).sort(nt))};function normalize(X){var $=it(X);return Object.assign(Object.values($),$)}function queryString(X,$){var ee=["@media screen"];return X&&ee.push("and","(min-width: "+px(X)+")"),$&&ee.push("and","(max-width: "+px($)+")"),ee.join(" ")}function analyzeBreakpoints(X){var $;if(!X)return null;X.base=null!=($=X.base)?$:"0px";var ee=normalize(X),ne=Object.entries(X).sort(nt).map((function(X,$,ee){var ne,ae=X[0],de=X[1],fe=(null!=(ne=ee[$+1])?ne:[])[1];return fe=parseFloat(fe)>0?function subtract(X){var $;if(!X)return X;var ee=(X=null!=($=px(X))?$:X).endsWith("px")?-1:-.0635;return isNumber(X)?""+(X+ee):X.replace(/([0-9]+\.?[0-9]*)/,(function(X){return""+(parseFloat(X)+ee)}))}(fe):void 0,{breakpoint:ae,minW:de,maxW:fe,maxWQuery:queryString(null,fe),minWQuery:queryString(de),minMaxQuery:queryString(de,fe)}})),ae=function keys(X){var $=Object.keys(it(X));return new Set($)}(X),de=Array.from(ae.values());return{keys:ae,normalized:ee,isResponsive:function isResponsive(X){var $=Object.keys(X);return $.length>0&&$.every((function(X){return ae.has(X)}))},asObject:it(X),asArray:normalize(X),details:ne,media:[null].concat(ee.map((function(X){return queryString(X)})).slice(1)),toArrayValue:function toArrayValue(X){if(!chakra_ui_utils_esm_isObject(X))throw new Error("toArrayValue: value must be an object");for(var $=de.map((function($){var ee;return null!=(ee=X[$])?ee:null}));null===getLastItem($);)$.pop();return $},toObjectValue:function toObjectValue(X){if(!Array.isArray(X))throw new Error("toObjectValue: value must be an array");return X.reduce((function(X,$,ee){var ne=de[ee];return null!=ne&&null!=$&&(X[ne]=$),X}),{})}}}var ct=function canUseDOM(){return!("undefined"===typeof window||!window.document||!window.document.createElement)}(),dt=function dataAttr(X){return X?"":void 0},vt=function cx(){for(var X=arguments.length,$=new Array(X),ee=0;ee<X;ee++)$[ee]=arguments[ee];return $.filter(Boolean).join(" ")};["input:not([disabled])","select:not([disabled])","textarea:not([disabled])","embed","iframe","object","a[href]","area[href]","button:not([disabled])","[tabindex]","audio[controls]","video[controls]","*[tabindex]:not([aria-disabled])","*[contenteditable]"].join();function chakra_ui_utils_esm_runIfFn(X){for(var $=arguments.length,ee=new Array($>1?$-1:0),ne=1;ne<$;ne++)ee[ne-1]=arguments[ne];return chakra_ui_utils_esm_isFunction(X)?X.apply(void 0,ee):X}function once(X){var $;return function func(){if(X){for(var ee=arguments.length,ne=new Array(ee),ae=0;ae<ee;ae++)ne[ae]=arguments[ae];$=X.apply(this,ne),X=null}return $}}var gt=function noop(){},yt=once((function(X){return function(){X.condition,X.message}}));once((function(X){return function(){X.condition,X.message}}));function flatten(X,$){return void 0===$&&($=1/0),(chakra_ui_utils_esm_isObject(X)||Array.isArray(X))&&$?Object.entries(X).reduce((function(X,ee){var ne=ee[0],ae=ee[1];return chakra_ui_utils_esm_isObject(ae)||isArray(ae)?Object.entries(flatten(ae,$-1)).forEach((function($){var ee=$[0],ae=$[1];X[ne+"."+ee]=ae})):X[ne]=ae,X}),{}):X}Number.MIN_SAFE_INTEGER,Number.MAX_SAFE_INTEGER;Object.freeze(["base","sm","md","lg","xl","2xl"]);var _t=ct?X.useLayoutEffect:X.useEffect;function use_animation_state_5054a9f7_esm_useCallbackRef($,ee){void 0===ee&&(ee=[]);var ne=X.useRef($);return _t((function(){ne.current=$})),X.useCallback((function(){for(var X=arguments.length,$=new Array(X),ee=0;ee<X;ee++)$[ee]=arguments[ee];return null==ne.current?void 0:ne.current.apply(ne,$)}),ee)}__webpack_require__(998);var wt=function useUpdateEffect($,ee){var ne=X.useRef(!1),ae=X.useRef(!1);X.useEffect((function(){if(ne.current&&ae.current)return $();ae.current=!0}),ee),X.useEffect((function(){return ne.current=!0,function(){ne.current=!1}}),[])};function useUnmountEffect($,ee){return void 0===ee&&(ee=[]),X.useEffect((function(){return function(){return $()}}),ee)}function useForceUpdate(){var $=X.useRef(!1),ee=X.useState(0),ne=ee[0],ae=ee[1];return useUnmountEffect((function(){$.current=!0})),X.useCallback((function(){$.current||ae(ne+1)}),[ne])}function assignRef(X,$){if(null!=X)if("function"!==typeof X)try{X.current=$}catch(ee){throw new Error("Cannot assign value '"+$+"' to ref '"+X+"'")}else X($)}function useMergeRefs(){for(var $=arguments.length,ee=new Array($),ne=0;ne<$;ne++)ee[ne]=arguments[ne];return X.useMemo((function(){return ee.every((function(X){return null==X}))?null:function(X){ee.forEach((function($){$&&assignRef($,X)}))}}),ee)}var St={body:{classList:{add:function add(){},remove:function remove(){}}},addEventListener:function addEventListener(){},removeEventListener:function removeEventListener(){},activeElement:{blur:function blur(){},nodeName:""},querySelector:function querySelector(){return null},querySelectorAll:function querySelectorAll(){return[]},getElementById:function getElementById(){return null},createEvent:function createEvent(){return{initEvent:function initEvent(){}}},createElement:function createElement(){return{children:[],childNodes:[],style:{},setAttribute:function setAttribute(){},getElementsByTagName:function getElementsByTagName(){return[]}}}},Ct=function noop(){},At={document:St,navigator:{userAgent:""},CustomEvent:function CustomEvent(){return this},addEventListener:Ct,removeEventListener:Ct,getComputedStyle:function getComputedStyle(){return{getPropertyValue:function getPropertyValue(){return""}}},matchMedia:function matchMedia(){return{matches:!1,addListener:Ct,removeListener:Ct}},requestAnimationFrame:function requestAnimationFrame(X){return"undefined"===typeof setTimeout?(X(),null):setTimeout(X,0)},cancelAnimationFrame:function cancelAnimationFrame(X){"undefined"!==typeof setTimeout&&clearTimeout(X)},setTimeout:function setTimeout(){return 0},clearTimeout:Ct,setInterval:function setInterval(){return 0},clearInterval:Ct},Et=ct?{window:window,document:document}:{window:At,document:St},Rt=(0,X.createContext)(Et);function EnvironmentProvider($){var ee=$.children,ne=$.environment,ae=(0,X.useState)(null),de=ae[0],fe=ae[1],Ue=(0,X.useMemo)((function(){var X,$=null==de?void 0:de.ownerDocument,ee=null==de?void 0:de.ownerDocument.defaultView;return null!=(X=null!=ne?ne:$?{document:$,window:ee}:void 0)?X:Et}),[de,ne]);return X.createElement(Rt.Provider,{value:Ue},ee,X.createElement("span",{hidden:!0,className:"chakra-env",ref:function ref($){(0,X.startTransition)((function(){$&&fe($)}))}}))}var Bt="chakra-ui-light",Ht="chakra-ui-dark",Wt="(prefers-color-scheme: dark)";function getColorModeUtils(X){var $;void 0===X&&(X={});var ee=X,ne=ee.doc,ae=void 0===ne?document:ne,de=ee.preventTransition,fe=void 0===de||de,Ue=ae.body,je=null!=($=ae.defaultView)?$:window,Ke=ae.documentElement,et={setDataset:function setDataset(X){var $=fe?et.preventTransition():void 0;Ke.dataset.theme=X,Ke.style.colorScheme=X,null==$||$()},setClassName:function setClassName(X){Ue.classList.add(X?Ht:Bt),Ue.classList.remove(X?Bt:Ht)},query:function query(X){return je.matchMedia(X)},getColorScheme:function getColorScheme(X){var $;return(null!=($=et.query(Wt).matches)?$:"dark"===X)?"dark":"light"},addListener:function addListener(X){var $=et.query(Wt),ee=function listener($){X($.matches?"dark":"light")};return $.addEventListener("change",ee),function(){return $.removeEventListener("change",ee)}},preventTransition:function preventTransition(){var X=ae.createElement("style");return X.appendChild(ae.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),ae.head.appendChild(X),function(){je.getComputedStyle(ae.body),je.setTimeout((function(){ae.head.removeChild(X)}),1)}}};return et}var qt="chakra-ui-color-mode";var Zt=function createLocalStorageManager(X){return{get:function get($){if(!ct)return $;try{var ee=localStorage.getItem(X);return null!=ee?ee:$}catch(ne){return $}},set:function set($){if(ct)try{localStorage.setItem(X,$)}catch(ee){Ue}},type:"localStorage"}}(qt);(function createCookieStorageManager(X){return{type:"cookie",get:function get($){var ee;if(!ct)return $;var ne=document.cookie.match(new RegExp("(^| )"+X+"=([^;]+)"));return null!=(ee=null==ne?void 0:ne[2])?ee:$},set:function set($){ct&&(document.cookie=X+"="+$+"; max-age=31536000; path=/")}}})(qt);var Xt=X.createContext({});var Qt=function useColorMode(){var $=X.useContext(Xt);if(void 0===$)throw new Error("useColorMode must be used within a ColorModeProvider");return $};function ColorModeProvider($){var ee=$.value,ne=$.children,ae=$.options,de=(ae=void 0===ae?{}:ae).useSystemColorMode,fe=ae.initialColorMode,Ue=$.colorModeManager,je=void 0===Ue?Zt:Ue,Ke="dark"===fe?"dark":"light",et=X.useState(Ke),tt=et[0],nt=et[1],it=function useEnvironment(){return(0,X.useContext)(Rt)}().document;X.useEffect((function(){if(ct){var X=getColorModeUtils({doc:it}),$=je.get();if($)nt($);else{var ee=X.getColorScheme(Ke);nt("system"!==fe?Ke:ee)}}}),[je,Ke,fe,it]),wt((function(){var X=getColorModeUtils({doc:it}),$="dark"===tt;X.setClassName($),tt&&(X.setDataset(tt),je.set(tt))}),[tt,it]);var dt=X.useCallback((function(){nt((function(X){return"light"===X?"dark":"light"}))}),[]);X.useEffect((function(){if(ct){var X=getColorModeUtils({doc:it});return de||"system"===fe?X.addListener(nt):gt}}),[de,fe,it]);var vt=X.useMemo((function(){return{colorMode:null!=ee?ee:tt,toggleColorMode:ee?gt:dt,setColorMode:ee?gt:nt}}),[tt,dt,ee]);return X.createElement(Xt.Provider,{value:vt},ne)}function chakra_ui_styled_system_esm_extends(){return chakra_ui_styled_system_esm_extends=Object.assign||function(X){for(var $=1;$<arguments.length;$++){var ee=arguments[$];for(var ne in ee)Object.prototype.hasOwnProperty.call(ee,ne)&&(X[ne]=ee[ne])}return X},chakra_ui_styled_system_esm_extends.apply(this,arguments)}function createTransform(X){var $=X.scale,ee=X.transform,ne=X.compose;return function fn(X,ae){var de,fe=function tokenToCSSVar(X,$){return function(ee){var ne=String($),ae=X?X+"."+ne:ne;return chakra_ui_utils_esm_isObject(ee.__cssMap)&&ae in ee.__cssMap?ee.__cssMap[ae].varRef:$}}($,X)(ae),Ue=null!=(de=null==ee?void 0:ee(fe,ae))?de:fe;return ne&&(Ue=ne(Ue,ae)),Ue}}function toConfig(X,$){return function(ee){var ne={property:ee,scale:X};return ne.transform=createTransform({scale:X,transform:$}),ne}}var en,tn,un=function getRtl(X){var $=X.rtl,ee=X.ltr;return function(X){return"rtl"===X.direction?$:ee}};var hn=["rotate(var(--chakra-rotate, 0))","scaleX(var(--chakra-scale-x, 1))","scaleY(var(--chakra-scale-y, 1))","skewX(var(--chakra-skew-x, 0))","skewY(var(--chakra-skew-y, 0))"];var dn={"--chakra-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-sepia":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-drop-shadow":"var(--chakra-empty,/*!*/ /*!*/)",filter:["var(--chakra-blur)","var(--chakra-brightness)","var(--chakra-contrast)","var(--chakra-grayscale)","var(--chakra-hue-rotate)","var(--chakra-invert)","var(--chakra-saturate)","var(--chakra-sepia)","var(--chakra-drop-shadow)"].join(" ")},mn={backdropFilter:["var(--chakra-backdrop-blur)","var(--chakra-backdrop-brightness)","var(--chakra-backdrop-contrast)","var(--chakra-backdrop-grayscale)","var(--chakra-backdrop-hue-rotate)","var(--chakra-backdrop-invert)","var(--chakra-backdrop-opacity)","var(--chakra-backdrop-saturate)","var(--chakra-backdrop-sepia)"].join(" "),"--chakra-backdrop-blur":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-brightness":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-contrast":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-grayscale":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-hue-rotate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-invert":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-opacity":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-saturate":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-backdrop-sepia":"var(--chakra-empty,/*!*/ /*!*/)"};var gn={"row-reverse":{space:"--chakra-space-x-reverse",divide:"--chakra-divide-x-reverse"},"column-reverse":{space:"--chakra-space-y-reverse",divide:"--chakra-divide-y-reverse"}},_n="& > :not(style) ~ :not(style)",wn=((en={})[_n]={marginInlineStart:"calc(var(--chakra-space-x) * calc(1 - var(--chakra-space-x-reverse)))",marginInlineEnd:"calc(var(--chakra-space-x) * var(--chakra-space-x-reverse))"},en),Sn=((tn={})[_n]={marginTop:"calc(var(--chakra-space-y) * calc(1 - var(--chakra-space-y-reverse)))",marginBottom:"calc(var(--chakra-space-y) * var(--chakra-space-y-reverse))"},tn);function _setPrototypeOf(X,$){return _setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(X,$){return X.__proto__=$,X},_setPrototypeOf(X,$)}function _inherits(X,$){if("function"!==typeof $&&null!==$)throw new TypeError("Super expression must either be null or a function");X.prototype=Object.create($&&$.prototype,{constructor:{value:X,writable:!0,configurable:!0}}),Object.defineProperty(X,"prototype",{writable:!1}),$&&_setPrototypeOf(X,$)}function _wrapRegExp(){_wrapRegExp=function _wrapRegExp(X,$){return new BabelRegExp(X,void 0,$)};var X=RegExp.prototype,$=new WeakMap;function BabelRegExp(X,ee,ne){var ae=new RegExp(X,ee);return $.set(ae,ne||$.get(X)),_setPrototypeOf(ae,BabelRegExp.prototype)}function buildGroups(X,ee){var ne=$.get(ee);return Object.keys(ne).reduce((function($,ee){return $[ee]=X[ne[ee]],$}),Object.create(null))}return _inherits(BabelRegExp,RegExp),BabelRegExp.prototype.exec=function($){var ee=X.exec.call(this,$);return ee&&(ee.groups=buildGroups(ee,this)),ee},BabelRegExp.prototype[Symbol.replace]=function(ee,ne){if("string"==typeof ne){var ae=$.get(this);return X[Symbol.replace].call(this,ee,ne.replace(/\$<([^>]+)>/g,(function(X,$){return"$"+ae[$]})))}if("function"==typeof ne){var de=this;return X[Symbol.replace].call(this,ee,(function(){var X=arguments;return"object"!=typeof X[X.length-1]&&(X=[].slice.call(X)).push(buildGroups(X,de)),ne.apply(this,X)}))}return X[Symbol.replace].call(this,ee,ne)},_wrapRegExp.apply(this,arguments)}var Cn={"to-t":"to top","to-tr":"to top right","to-r":"to right","to-br":"to bottom right","to-b":"to bottom","to-bl":"to bottom left","to-l":"to left","to-tl":"to top left"},An=new Set(Object.values(Cn)),Mn=new Set(["none","-moz-initial","inherit","initial","revert","unset"]),En=function trimSpace(X){return X.trim()};var Tn=function isCSSFunction(X){return isString(X)&&X.includes("(")&&X.includes(")")},Pn=function wrap(X){return function($){return X+"("+$+")"}},Dn={filter:function filter(X){return"auto"!==X?X:dn},backdropFilter:function backdropFilter(X){return"auto"!==X?X:mn},ring:function ring(X){return function getRingTemplate(X){return{"--chakra-ring-offset-shadow":"var(--chakra-ring-inset) 0 0 0 var(--chakra-ring-offset-width) var(--chakra-ring-offset-color)","--chakra-ring-shadow":"var(--chakra-ring-inset) 0 0 0 calc(var(--chakra-ring-width) + var(--chakra-ring-offset-width)) var(--chakra-ring-color)","--chakra-ring-width":X,boxShadow:["var(--chakra-ring-offset-shadow)","var(--chakra-ring-shadow)","var(--chakra-shadow, 0 0 #0000)"].join(", ")}}(Dn.px(X))},bgClip:function bgClip(X){return"text"===X?{color:"transparent",backgroundClip:"text"}:{backgroundClip:X}},transform:function transform(X){return"auto"===X?function getTransformTemplate(){return["translateX(var(--chakra-translate-x, 0))","translateY(var(--chakra-translate-y, 0))"].concat(hn).join(" ")}():"auto-gpu"===X?function getTransformGpuTemplate(){return["translate3d(var(--chakra-translate-x, 0), var(--chakra-translate-y, 0), 0)"].concat(hn).join(" ")}():X},px:function px(X){if(null==X)return X;var $=function analyzeCSSValue(X){var $=parseFloat(X.toString()),ee=X.toString().replace(String($),"");return{unitless:!ee,value:$,unit:ee}}(X);return $.unitless||isNumber(X)?X+"px":X},fraction:function fraction(X){return!isNumber(X)||X>1?X:100*X+"%"},float:function float(X,$){return"rtl"===$.direction?{left:"right",right:"left"}[X]:X},degree:function degree(X){if(isCssVar(X)||null==X)return X;var $=isString(X)&&!X.endsWith("deg");return isNumber(X)||$?X+"deg":X},gradient:function gradientTransform(X,$){return function parseGradient(X,$){var ee,ne;if(null==X||Mn.has(X))return X;var ae=null!=(ee=null==(ne=_wrapRegExp(/(^[a-z-A-Z]+)\(((.*))\)/g,{type:1,values:2}).exec(X))?void 0:ne.groups)?ee:{},de=ae.type,fe=ae.values;if(!de||!fe)return X;var Ue=de.includes("-gradient")?de:de+"-gradient",je=fe.split(",").map(En).filter(Boolean),Ke=je[0],et=je.slice(1);if(0===(null==et?void 0:et.length))return X;var tt=Ke in Cn?Cn[Ke]:Ke;et.unshift(tt);var nt=et.map((function(X){if(An.has(X))return X;var ee=X.indexOf(" "),ne=-1!==ee?[X.substr(0,ee),X.substr(ee+1)]:[X],ae=ne[0],de=ne[1],fe=Tn(de)?de:de&&de.split(" "),Ue="colors."+ae,je=Ue in $.__cssMap?$.__cssMap[Ue].varRef:ae;return fe?[je].concat(Array.isArray(fe)?fe:[fe]).join(" "):je}));return Ue+"("+nt.join(", ")+")"}(X,null!=$?$:{})},blur:Pn("blur"),opacity:Pn("opacity"),brightness:Pn("brightness"),contrast:Pn("contrast"),dropShadow:Pn("drop-shadow"),grayscale:Pn("grayscale"),hueRotate:Pn("hue-rotate"),invert:Pn("invert"),saturate:Pn("saturate"),sepia:Pn("sepia"),bgImage:function bgImage(X){return null==X||Tn(X)||Mn.has(X)?X:"url("+X+")"},outline:function outline(X){var $="0"===String(X)||"none"===String(X);return null!==X&&$?{outline:"2px solid transparent",outlineOffset:"2px"}:{outline:X}},flexDirection:function flexDirection(X){var $,ee=null!=($=gn[X])?$:{},ne=ee.space,ae=ee.divide,de={flexDirection:X};return ne&&(de[ne]=1),ae&&(de[ae]=1),de}},Ln={borderWidths:toConfig("borderWidths"),borderStyles:toConfig("borderStyles"),colors:toConfig("colors"),borders:toConfig("borders"),radii:toConfig("radii",Dn.px),space:toConfig("space",Dn.px),spaceT:toConfig("space",Dn.px),degreeT:function degreeT(X){return{property:X,transform:Dn.degree}},prop:function prop(X,$,ee){return chakra_ui_styled_system_esm_extends({property:X,scale:$},$&&{transform:createTransform({scale:$,transform:ee})})},propT:function propT(X,$){return{property:X,transform:$}},sizes:toConfig("sizes",Dn.px),sizesT:toConfig("sizes",Dn.fraction),shadows:toConfig("shadows"),logical:function logical(X){var $=X.property,ee=X.scale,ne=X.transform;return{scale:ee,property:un($),transform:ee?createTransform({scale:ee,compose:ne}):ne}},blur:toConfig("blur",Dn.blur)},On={background:Ln.colors("background"),backgroundColor:Ln.colors("backgroundColor"),backgroundImage:Ln.propT("backgroundImage",Dn.bgImage),backgroundSize:!0,backgroundPosition:!0,backgroundRepeat:!0,backgroundAttachment:!0,backgroundClip:{transform:Dn.bgClip},bgSize:Ln.prop("backgroundSize"),bgPosition:Ln.prop("backgroundPosition"),bg:Ln.colors("background"),bgColor:Ln.colors("backgroundColor"),bgPos:Ln.prop("backgroundPosition"),bgRepeat:Ln.prop("backgroundRepeat"),bgAttachment:Ln.prop("backgroundAttachment"),bgGradient:Ln.propT("backgroundImage",Dn.gradient),bgClip:{transform:Dn.bgClip}};Object.assign(On,{bgImage:On.backgroundImage,bgImg:On.backgroundImage});var In={border:Ln.borders("border"),borderWidth:Ln.borderWidths("borderWidth"),borderStyle:Ln.borderStyles("borderStyle"),borderColor:Ln.colors("borderColor"),borderRadius:Ln.radii("borderRadius"),borderTop:Ln.borders("borderTop"),borderBlockStart:Ln.borders("borderBlockStart"),borderTopLeftRadius:Ln.radii("borderTopLeftRadius"),borderStartStartRadius:Ln.logical({scale:"radii",property:{ltr:"borderTopLeftRadius",rtl:"borderTopRightRadius"}}),borderEndStartRadius:Ln.logical({scale:"radii",property:{ltr:"borderBottomLeftRadius",rtl:"borderBottomRightRadius"}}),borderTopRightRadius:Ln.radii("borderTopRightRadius"),borderStartEndRadius:Ln.logical({scale:"radii",property:{ltr:"borderTopRightRadius",rtl:"borderTopLeftRadius"}}),borderEndEndRadius:Ln.logical({scale:"radii",property:{ltr:"borderBottomRightRadius",rtl:"borderBottomLeftRadius"}}),borderRight:Ln.borders("borderRight"),borderInlineEnd:Ln.borders("borderInlineEnd"),borderBottom:Ln.borders("borderBottom"),borderBlockEnd:Ln.borders("borderBlockEnd"),borderBottomLeftRadius:Ln.radii("borderBottomLeftRadius"),borderBottomRightRadius:Ln.radii("borderBottomRightRadius"),borderLeft:Ln.borders("borderLeft"),borderInlineStart:{property:"borderInlineStart",scale:"borders"},borderInlineStartRadius:Ln.logical({scale:"radii",property:{ltr:["borderTopLeftRadius","borderBottomLeftRadius"],rtl:["borderTopRightRadius","borderBottomRightRadius"]}}),borderInlineEndRadius:Ln.logical({scale:"radii",property:{ltr:["borderTopRightRadius","borderBottomRightRadius"],rtl:["borderTopLeftRadius","borderBottomLeftRadius"]}}),borderX:Ln.borders(["borderLeft","borderRight"]),borderInline:Ln.borders("borderInline"),borderY:Ln.borders(["borderTop","borderBottom"]),borderBlock:Ln.borders("borderBlock"),borderTopWidth:Ln.borderWidths("borderTopWidth"),borderBlockStartWidth:Ln.borderWidths("borderBlockStartWidth"),borderTopColor:Ln.colors("borderTopColor"),borderBlockStartColor:Ln.colors("borderBlockStartColor"),borderTopStyle:Ln.borderStyles("borderTopStyle"),borderBlockStartStyle:Ln.borderStyles("borderBlockStartStyle"),borderBottomWidth:Ln.borderWidths("borderBottomWidth"),borderBlockEndWidth:Ln.borderWidths("borderBlockEndWidth"),borderBottomColor:Ln.colors("borderBottomColor"),borderBlockEndColor:Ln.colors("borderBlockEndColor"),borderBottomStyle:Ln.borderStyles("borderBottomStyle"),borderBlockEndStyle:Ln.borderStyles("borderBlockEndStyle"),borderLeftWidth:Ln.borderWidths("borderLeftWidth"),borderInlineStartWidth:Ln.borderWidths("borderInlineStartWidth"),borderLeftColor:Ln.colors("borderLeftColor"),borderInlineStartColor:Ln.colors("borderInlineStartColor"),borderLeftStyle:Ln.borderStyles("borderLeftStyle"),borderInlineStartStyle:Ln.borderStyles("borderInlineStartStyle"),borderRightWidth:Ln.borderWidths("borderRightWidth"),borderInlineEndWidth:Ln.borderWidths("borderInlineEndWidth"),borderRightColor:Ln.colors("borderRightColor"),borderInlineEndColor:Ln.colors("borderInlineEndColor"),borderRightStyle:Ln.borderStyles("borderRightStyle"),borderInlineEndStyle:Ln.borderStyles("borderInlineEndStyle"),borderTopRadius:Ln.radii(["borderTopLeftRadius","borderTopRightRadius"]),borderBottomRadius:Ln.radii(["borderBottomLeftRadius","borderBottomRightRadius"]),borderLeftRadius:Ln.radii(["borderTopLeftRadius","borderBottomLeftRadius"]),borderRightRadius:Ln.radii(["borderTopRightRadius","borderBottomRightRadius"])};Object.assign(In,{rounded:In.borderRadius,roundedTop:In.borderTopRadius,roundedTopLeft:In.borderTopLeftRadius,roundedTopRight:In.borderTopRightRadius,roundedTopStart:In.borderStartStartRadius,roundedTopEnd:In.borderStartEndRadius,roundedBottom:In.borderBottomRadius,roundedBottomLeft:In.borderBottomLeftRadius,roundedBottomRight:In.borderBottomRightRadius,roundedBottomStart:In.borderEndStartRadius,roundedBottomEnd:In.borderEndEndRadius,roundedLeft:In.borderLeftRadius,roundedRight:In.borderRightRadius,roundedStart:In.borderInlineStartRadius,roundedEnd:In.borderInlineEndRadius,borderStart:In.borderInlineStart,borderEnd:In.borderInlineEnd,borderTopStartRadius:In.borderStartStartRadius,borderTopEndRadius:In.borderStartEndRadius,borderBottomStartRadius:In.borderEndStartRadius,borderBottomEndRadius:In.borderEndEndRadius,borderStartRadius:In.borderInlineStartRadius,borderEndRadius:In.borderInlineEndRadius,borderStartWidth:In.borderInlineStartWidth,borderEndWidth:In.borderInlineEndWidth,borderStartColor:In.borderInlineStartColor,borderEndColor:In.borderInlineEndColor,borderStartStyle:In.borderInlineStartStyle,borderEndStyle:In.borderInlineEndStyle});var Fn={color:Ln.colors("color"),textColor:Ln.colors("color"),fill:Ln.colors("fill"),stroke:Ln.colors("stroke")},Wn={boxShadow:Ln.shadows("boxShadow"),mixBlendMode:!0,blendMode:Ln.prop("mixBlendMode"),backgroundBlendMode:!0,bgBlendMode:Ln.prop("backgroundBlendMode"),opacity:!0};Object.assign(Wn,{shadow:Wn.boxShadow});var Yn={filter:{transform:Dn.filter},blur:Ln.blur("--chakra-blur"),brightness:Ln.propT("--chakra-brightness",Dn.brightness),contrast:Ln.propT("--chakra-contrast",Dn.contrast),hueRotate:Ln.degreeT("--chakra-hue-rotate"),invert:Ln.propT("--chakra-invert",Dn.invert),saturate:Ln.propT("--chakra-saturate",Dn.saturate),dropShadow:Ln.propT("--chakra-drop-shadow",Dn.dropShadow),backdropFilter:{transform:Dn.backdropFilter},backdropBlur:Ln.blur("--chakra-backdrop-blur"),backdropBrightness:Ln.propT("--chakra-backdrop-brightness",Dn.brightness),backdropContrast:Ln.propT("--chakra-backdrop-contrast",Dn.contrast),backdropHueRotate:Ln.degreeT("--chakra-backdrop-hue-rotate"),backdropInvert:Ln.propT("--chakra-backdrop-invert",Dn.invert),backdropSaturate:Ln.propT("--chakra-backdrop-saturate",Dn.saturate)},Jn={alignItems:!0,alignContent:!0,justifyItems:!0,justifyContent:!0,flexWrap:!0,flexDirection:{transform:Dn.flexDirection},experimental_spaceX:{static:wn,transform:createTransform({scale:"space",transform:function transform(X){return null!==X?{"--chakra-space-x":X}:null}})},experimental_spaceY:{static:Sn,transform:createTransform({scale:"space",transform:function transform(X){return null!=X?{"--chakra-space-y":X}:null}})},flex:!0,flexFlow:!0,flexGrow:!0,flexShrink:!0,flexBasis:Ln.sizes("flexBasis"),justifySelf:!0,alignSelf:!0,order:!0,placeItems:!0,placeContent:!0,placeSelf:!0,gap:Ln.space("gap"),rowGap:Ln.space("rowGap"),columnGap:Ln.space("columnGap")};Object.assign(Jn,{flexDir:Jn.flexDirection});var Zn={gridGap:Ln.space("gridGap"),gridColumnGap:Ln.space("gridColumnGap"),gridRowGap:Ln.space("gridRowGap"),gridColumn:!0,gridRow:!0,gridAutoFlow:!0,gridAutoColumns:!0,gridColumnStart:!0,gridColumnEnd:!0,gridRowStart:!0,gridRowEnd:!0,gridAutoRows:!0,gridTemplate:!0,gridTemplateColumns:!0,gridTemplateRows:!0,gridTemplateAreas:!0,gridArea:!0},Kn={appearance:!0,cursor:!0,resize:!0,userSelect:!0,pointerEvents:!0,outline:{transform:Dn.outline},outlineOffset:!0,outlineColor:Ln.colors("outlineColor")},$n={width:Ln.sizesT("width"),inlineSize:Ln.sizesT("inlineSize"),height:Ln.sizes("height"),blockSize:Ln.sizes("blockSize"),boxSize:Ln.sizes(["width","height"]),minWidth:Ln.sizes("minWidth"),minInlineSize:Ln.sizes("minInlineSize"),minHeight:Ln.sizes("minHeight"),minBlockSize:Ln.sizes("minBlockSize"),maxWidth:Ln.sizes("maxWidth"),maxInlineSize:Ln.sizes("maxInlineSize"),maxHeight:Ln.sizes("maxHeight"),maxBlockSize:Ln.sizes("maxBlockSize"),overflow:!0,overflowX:!0,overflowY:!0,overscrollBehavior:!0,overscrollBehaviorX:!0,overscrollBehaviorY:!0,display:!0,verticalAlign:!0,boxSizing:!0,boxDecorationBreak:!0,float:Ln.propT("float",Dn.float),objectFit:!0,objectPosition:!0,visibility:!0,isolation:!0};Object.assign($n,{w:$n.width,h:$n.height,minW:$n.minWidth,maxW:$n.maxWidth,minH:$n.minHeight,maxH:$n.maxHeight,overscroll:$n.overscrollBehavior,overscrollX:$n.overscrollBehaviorX,overscrollY:$n.overscrollBehaviorY});var nr={listStyleType:!0,listStylePosition:!0,listStylePos:Ln.prop("listStylePosition"),listStyleImage:!0,listStyleImg:Ln.prop("listStyleImage")},ir={border:"0px",clip:"rect(0, 0, 0, 0)",width:"1px",height:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},ar={position:"static",width:"auto",height:"auto",clip:"auto",padding:"0",margin:"0",overflow:"visible",whiteSpace:"normal"},or=function getWithPriority(X,$,ee){var ne={},ae=je(X,$,{});for(var de in ae){de in ee&&null!=ee[de]||(ne[de]=ae[de])}return ne},hr={srOnly:{transform:function transform(X){return!0===X?ir:"focusable"===X?ar:{}}},layerStyle:{processResult:!0,transform:function transform(X,$,ee){return or($,"layerStyles."+X,ee)}},textStyle:{processResult:!0,transform:function transform(X,$,ee){return or($,"textStyles."+X,ee)}},apply:{processResult:!0,transform:function transform(X,$,ee){return or($,X,ee)}}},dr={position:!0,pos:Ln.prop("position"),zIndex:Ln.prop("zIndex","zIndices"),inset:Ln.spaceT("inset"),insetX:Ln.spaceT(["left","right"]),insetInline:Ln.spaceT("insetInline"),insetY:Ln.spaceT(["top","bottom"]),insetBlock:Ln.spaceT("insetBlock"),top:Ln.spaceT("top"),insetBlockStart:Ln.spaceT("insetBlockStart"),bottom:Ln.spaceT("bottom"),insetBlockEnd:Ln.spaceT("insetBlockEnd"),left:Ln.spaceT("left"),insetInlineStart:Ln.logical({scale:"space",property:{ltr:"left",rtl:"right"}}),right:Ln.spaceT("right"),insetInlineEnd:Ln.logical({scale:"space",property:{ltr:"right",rtl:"left"}})};Object.assign(dr,{insetStart:dr.insetInlineStart,insetEnd:dr.insetInlineEnd});var fr={ring:{transform:Dn.ring},ringColor:Ln.colors("--chakra-ring-color"),ringOffset:Ln.prop("--chakra-ring-offset-width"),ringOffsetColor:Ln.colors("--chakra-ring-offset-color"),ringInset:Ln.prop("--chakra-ring-inset")},vr={margin:Ln.spaceT("margin"),marginTop:Ln.spaceT("marginTop"),marginBlockStart:Ln.spaceT("marginBlockStart"),marginRight:Ln.spaceT("marginRight"),marginInlineEnd:Ln.spaceT("marginInlineEnd"),marginBottom:Ln.spaceT("marginBottom"),marginBlockEnd:Ln.spaceT("marginBlockEnd"),marginLeft:Ln.spaceT("marginLeft"),marginInlineStart:Ln.spaceT("marginInlineStart"),marginX:Ln.spaceT(["marginInlineStart","marginInlineEnd"]),marginInline:Ln.spaceT("marginInline"),marginY:Ln.spaceT(["marginTop","marginBottom"]),marginBlock:Ln.spaceT("marginBlock"),padding:Ln.space("padding"),paddingTop:Ln.space("paddingTop"),paddingBlockStart:Ln.space("paddingBlockStart"),paddingRight:Ln.space("paddingRight"),paddingBottom:Ln.space("paddingBottom"),paddingBlockEnd:Ln.space("paddingBlockEnd"),paddingLeft:Ln.space("paddingLeft"),paddingInlineStart:Ln.space("paddingInlineStart"),paddingInlineEnd:Ln.space("paddingInlineEnd"),paddingX:Ln.space(["paddingInlineStart","paddingInlineEnd"]),paddingInline:Ln.space("paddingInline"),paddingY:Ln.space(["paddingTop","paddingBottom"]),paddingBlock:Ln.space("paddingBlock")};Object.assign(vr,{m:vr.margin,mt:vr.marginTop,mr:vr.marginRight,me:vr.marginInlineEnd,marginEnd:vr.marginInlineEnd,mb:vr.marginBottom,ml:vr.marginLeft,ms:vr.marginInlineStart,marginStart:vr.marginInlineStart,mx:vr.marginX,my:vr.marginY,p:vr.padding,pt:vr.paddingTop,py:vr.paddingY,px:vr.paddingX,pb:vr.paddingBottom,pl:vr.paddingLeft,ps:vr.paddingInlineStart,paddingStart:vr.paddingInlineStart,pr:vr.paddingRight,pe:vr.paddingInlineEnd,paddingEnd:vr.paddingInlineEnd});var yr={textDecorationColor:Ln.colors("textDecorationColor"),textDecoration:!0,textDecor:{property:"textDecoration"},textDecorationLine:!0,textDecorationStyle:!0,textDecorationThickness:!0,textUnderlineOffset:!0,textShadow:Ln.shadows("textShadow")},br={clipPath:!0,transform:Ln.propT("transform",Dn.transform),transformOrigin:!0,translateX:Ln.spaceT("--chakra-translate-x"),translateY:Ln.spaceT("--chakra-translate-y"),skewX:Ln.degreeT("--chakra-skew-x"),skewY:Ln.degreeT("--chakra-skew-y"),scaleX:Ln.prop("--chakra-scale-x"),scaleY:Ln.prop("--chakra-scale-y"),scale:Ln.prop(["--chakra-scale-x","--chakra-scale-y"]),rotate:Ln.degreeT("--chakra-rotate")},_r={transition:!0,transitionDelay:!0,animation:!0,willChange:!0,transitionDuration:Ln.prop("transitionDuration","transition.duration"),transitionProperty:Ln.prop("transitionProperty","transition.property"),transitionTimingFunction:Ln.prop("transitionTimingFunction","transition.easing")},wr={fontFamily:Ln.prop("fontFamily","fonts"),fontSize:Ln.prop("fontSize","fontSizes",Dn.px),fontWeight:Ln.prop("fontWeight","fontWeights"),lineHeight:Ln.prop("lineHeight","lineHeights"),letterSpacing:Ln.prop("letterSpacing","letterSpacings"),textAlign:!0,fontStyle:!0,wordBreak:!0,overflowWrap:!0,textOverflow:!0,textTransform:!0,whiteSpace:!0,noOfLines:{static:{overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitBoxOrient:"vertical",WebkitLineClamp:"var(--chakra-line-clamp)"},property:"--chakra-line-clamp"}},Cr={scrollBehavior:!0,scrollSnapAlign:!0,scrollSnapStop:!0,scrollSnapType:!0,scrollMargin:Ln.spaceT("scrollMargin"),scrollMarginTop:Ln.spaceT("scrollMarginTop"),scrollMarginBottom:Ln.spaceT("scrollMarginBottom"),scrollMarginLeft:Ln.spaceT("scrollMarginLeft"),scrollMarginRight:Ln.spaceT("scrollMarginRight"),scrollMarginX:Ln.spaceT(["scrollMarginLeft","scrollMarginRight"]),scrollMarginY:Ln.spaceT(["scrollMarginTop","scrollMarginBottom"]),scrollPadding:Ln.spaceT("scrollPadding"),scrollPaddingTop:Ln.spaceT("scrollPaddingTop"),scrollPaddingBottom:Ln.spaceT("scrollPaddingBottom"),scrollPaddingLeft:Ln.spaceT("scrollPaddingLeft"),scrollPaddingRight:Ln.spaceT("scrollPaddingRight"),scrollPaddingX:Ln.spaceT(["scrollPaddingLeft","scrollPaddingRight"]),scrollPaddingY:Ln.spaceT(["scrollPaddingTop","scrollPaddingBottom"])};function chakra_ui_styled_system_esm_arrayLikeToArray(X,$){(null==$||$>X.length)&&($=X.length);for(var ee=0,ne=new Array($);ee<$;ee++)ne[ee]=X[ee];return ne}function chakra_ui_styled_system_esm_createForOfIteratorHelperLoose(X,$){var ee="undefined"!==typeof Symbol&&X[Symbol.iterator]||X["@@iterator"];if(ee)return(ee=ee.call(X)).next.bind(ee);if(Array.isArray(X)||(ee=function chakra_ui_styled_system_esm_unsupportedIterableToArray(X,$){if(X){if("string"===typeof X)return chakra_ui_styled_system_esm_arrayLikeToArray(X,$);var ee=Object.prototype.toString.call(X).slice(8,-1);return"Object"===ee&&X.constructor&&(ee=X.constructor.name),"Map"===ee||"Set"===ee?Array.from(X):"Arguments"===ee||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ee)?chakra_ui_styled_system_esm_arrayLikeToArray(X,$):void 0}}(X))||$&&X&&"number"===typeof X.length){ee&&(X=ee);var ne=0;return function(){return ne>=X.length?{done:!0}:{done:!1,value:X[ne++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Ar=function hover(X,$){return X+":hover "+$+", "+X+"[data-hover] "+$},Mr=function focus(X,$){return X+":focus "+$+", "+X+"[data-focus] "+$},Er=function focusVisible(X,$){return X+":focus-visible "+$},Tr=function focusWithin(X,$){return X+":focus-within "+$},Pr=function active(X,$){return X+":active "+$+", "+X+"[data-active] "+$},Dr=function disabled(X,$){return X+":disabled "+$+", "+X+"[data-disabled] "+$},Br=function invalid(X,$){return X+":invalid "+$+", "+X+"[data-invalid] "+$},Ir=function checked(X,$){return X+":checked "+$+", "+X+"[data-checked] "+$},zr=function placeholderShown(X,$){return X+":placeholder-shown "+$},Fr=function toGroup(X){return qr((function($){return X($,"&")}),"[role=group]","[data-group]",".group")},Vr=function toPeer(X){return qr((function($){return X($,"~ &")}),"[data-peer]",".peer")},qr=function merge(X){for(var $=arguments.length,ee=new Array($>1?$-1:0),ne=1;ne<$;ne++)ee[ne-1]=arguments[ne];return ee.map(X).join(", ")},Xr={_hover:"&:hover, &[data-hover]",_active:"&:active, &[data-active]",_focus:"&:focus, &[data-focus]",_highlighted:"&[data-highlighted]",_focusWithin:"&:focus-within",_focusVisible:"&:focus-visible",_disabled:"&[disabled], &[aria-disabled=true], &[data-disabled]",_readOnly:"&[aria-readonly=true], &[readonly], &[data-readonly]",_before:"&::before",_after:"&::after",_empty:"&:empty",_expanded:"&[aria-expanded=true], &[data-expanded]",_checked:"&[aria-checked=true], &[data-checked]",_grabbed:"&[aria-grabbed=true], &[data-grabbed]",_pressed:"&[aria-pressed=true], &[data-pressed]",_invalid:"&[aria-invalid=true], &[data-invalid]",_valid:"&[data-valid], &[data-state=valid]",_loading:"&[data-loading], &[aria-busy=true]",_selected:"&[aria-selected=true], &[data-selected]",_hidden:"&[hidden], &[data-hidden]",_autofill:"&:-webkit-autofill",_even:"&:nth-of-type(even)",_odd:"&:nth-of-type(odd)",_first:"&:first-of-type",_last:"&:last-of-type",_notFirst:"&:not(:first-of-type)",_notLast:"&:not(:last-of-type)",_visited:"&:visited",_activeLink:"&[aria-current=page]",_activeStep:"&[aria-current=step]",_indeterminate:"&:indeterminate, &[aria-checked=mixed], &[data-indeterminate]",_groupHover:Fr(Ar),_peerHover:Vr(Ar),_groupFocus:Fr(Mr),_peerFocus:Vr(Mr),_groupFocusVisible:Fr(Er),_peerFocusVisible:Vr(Er),_groupActive:Fr(Pr),_peerActive:Vr(Pr),_groupDisabled:Fr(Dr),_peerDisabled:Vr(Dr),_groupInvalid:Fr(Br),_peerInvalid:Vr(Br),_groupChecked:Fr(Ir),_peerChecked:Vr(Ir),_groupFocusWithin:Fr(Tr),_peerFocusWithin:Vr(Tr),_peerPlaceholderShown:Vr(zr),_placeholder:"&::placeholder",_placeholderShown:"&:placeholder-shown",_fullScreen:"&:fullscreen",_selection:"&::selection",_rtl:"[dir=rtl] &, &[dir=rtl]",_ltr:"[dir=ltr] &, &[dir=ltr]",_mediaDark:"@media (prefers-color-scheme: dark)",_mediaReduceMotion:"@media (prefers-reduced-motion: reduce)",_dark:".chakra-ui-dark &:not([data-theme]),[data-theme=dark] &:not([data-theme]),&[data-theme=dark]",_light:".chakra-ui-light &:not([data-theme]),[data-theme=light] &:not([data-theme]),&[data-theme=light]"},Kr=et(Xr),ei=ae()({},On,In,Fn,Jn,$n,Yn,fr,Kn,Zn,hr,dr,Wn,vr,Cr,wr,yr,br,nr,_r),li=Object.assign({},vr,$n,Jn,Zn,dr),Ei=(et(li),[].concat(et(ei),Kr)),Di=chakra_ui_styled_system_esm_extends({},ei,Xr),Yi=function isStyleProp(X){return X in Di},Zi=function isCSSVariableTokenValue(X,$){return X.startsWith("--")&&isString($)&&!isCssVar($)},$i=function resolveTokenValue(X,$){var ee,ne;if(null==$)return $;var ae=function getVar($){var ee,ne;return null==(ee=X.__cssMap)||null==(ne=ee[$])?void 0:ne.varRef},de=function getValue(X){var $;return null!=($=ae(X))?$:X},fe=$.split(",").map((function(X){return X.trim()})),Ue=fe[0],je=fe[1];return $=null!=(ee=null!=(ne=ae(Ue))?ne:de(je))?ee:de($)};function getCss(X){var $=X.configs,ee=void 0===$?{}:$,ne=X.pseudos,de=void 0===ne?{}:ne,fe=X.theme;return function css(X,$){void 0===$&&($=!1);var ne=chakra_ui_utils_esm_runIfFn(X,fe),Ue=function expandResponsive(X){return function($){if(!$.__breakpoints)return X;var ee=$.__breakpoints,ne=ee.isResponsive,ae=ee.toArrayValue,de=ee.media,fe={};for(var Ue in X){var je=chakra_ui_utils_esm_runIfFn(X[Ue],$);if(null!=je)if(je=chakra_ui_utils_esm_isObject(je)&&ne(je)?ae(je):je,Array.isArray(je))for(var Ke=je.slice(0,de.length).length,et=0;et<Ke;et+=1){var tt=null==de?void 0:de[et];tt?(fe[tt]=fe[tt]||{},null!=je[et]&&(fe[tt][Ue]=je[et])):fe[Ue]=je[et]}else fe[Ue]=je}return fe}}(ne)(fe),je={};for(var Ke in Ue){var et,tt,nt,it,ct,dt=chakra_ui_utils_esm_runIfFn(Ue[Ke],fe);Ke in de&&(Ke=de[Ke]),Zi(Ke,dt)&&(dt=$i(fe,dt));var vt=ee[Ke];if(!0===vt&&(vt={property:Ke}),chakra_ui_utils_esm_isObject(dt)){var gt;je[Ke]=null!=(gt=je[Ke])?gt:{},je[Ke]=ae()({},je[Ke],css(dt,!0))}else{var yt=null!=(et=null==(tt=vt)||null==tt.transform?void 0:tt.transform(dt,fe,ne))?et:dt;yt=null!=(nt=vt)&&nt.processResult?css(yt,!0):yt;var _t=chakra_ui_utils_esm_runIfFn(null==(it=vt)?void 0:it.property,fe);if(!$&&null!=(ct=vt)&&ct.static){var wt=chakra_ui_utils_esm_runIfFn(vt.static,fe);je=ae()({},je,wt)}if(_t&&Array.isArray(_t))for(var St,Ct=chakra_ui_styled_system_esm_createForOfIteratorHelperLoose(_t);!(St=Ct()).done;){je[St.value]=yt}else _t?"&"===_t&&chakra_ui_utils_esm_isObject(yt)?je=ae()({},je,yt):je[_t]=yt:chakra_ui_utils_esm_isObject(yt)?je=ae()({},je,yt):je[Ke]=yt}}return je}}var aa=function css(X){return function($){return getCss({theme:$,pseudos:Xr,configs:ei})(X)}};function resolveReference(X){return chakra_ui_utils_esm_isObject(X)&&X.reference?X.reference:String(X)}var sa=function toExpression(X){for(var $=arguments.length,ee=new Array($>1?$-1:0),ne=1;ne<$;ne++)ee[ne-1]=arguments[ne];return ee.map(resolveReference).join(" "+X+" ").replace(/calc/g,"")},la=function add(){for(var X=arguments.length,$=new Array(X),ee=0;ee<X;ee++)$[ee]=arguments[ee];return"calc("+sa.apply(void 0,["+"].concat($))+")"},ua=function subtract(){for(var X=arguments.length,$=new Array(X),ee=0;ee<X;ee++)$[ee]=arguments[ee];return"calc("+sa.apply(void 0,["-"].concat($))+")"},ca=function multiply(){for(var X=arguments.length,$=new Array(X),ee=0;ee<X;ee++)$[ee]=arguments[ee];return"calc("+sa.apply(void 0,["*"].concat($))+")"},ha=function divide(){for(var X=arguments.length,$=new Array(X),ee=0;ee<X;ee++)$[ee]=arguments[ee];return"calc("+sa.apply(void 0,["/"].concat($))+")"},da=function negate(X){var $=resolveReference(X);return null==$||Number.isNaN(parseFloat($))?ca($,-1):String($).startsWith("-")?String($).slice(1):"-"+$},va=Object.assign((function(X){return{add:function add(){for(var $=arguments.length,ee=new Array($),ne=0;ne<$;ne++)ee[ne]=arguments[ne];return va(la.apply(void 0,[X].concat(ee)))},subtract:function subtract(){for(var $=arguments.length,ee=new Array($),ne=0;ne<$;ne++)ee[ne]=arguments[ne];return va(ua.apply(void 0,[X].concat(ee)))},multiply:function multiply(){for(var $=arguments.length,ee=new Array($),ne=0;ne<$;ne++)ee[ne]=arguments[ne];return va(ca.apply(void 0,[X].concat(ee)))},divide:function divide(){for(var $=arguments.length,ee=new Array($),ne=0;ne<$;ne++)ee[ne]=arguments[ne];return va(ha.apply(void 0,[X].concat(ee)))},negate:function negate(){return va(da(X))},toString:function toString(){return X.toString()}}}),{add:la,subtract:ua,multiply:ca,divide:ha,negate:da});function chakra_ui_styled_system_esm_escape(X){var $=function replaceWhiteSpace(X,$){return void 0===$&&($="-"),X.replace(/\s+/g,$)}(X.toString());return $.includes("\\.")?X:!Number.isInteger(parseFloat(X.toString()))?$.replace(".","\\."):X}function toVarReference(X,$){return"var("+chakra_ui_styled_system_esm_escape(X)+($?", "+$:"")+")"}function toVarDefinition(X,$){return void 0===$&&($=""),"--"+function addPrefix(X,$){return void 0===$&&($=""),[$,chakra_ui_styled_system_esm_escape(X)].filter(Boolean).join("-")}(X,$)}function tokenToCssVar(X,$){return function cssVar(X,$,ee){var ne=toVarDefinition(X,ee);return{variable:ne,reference:toVarReference(ne,$)}}(String(X).replace(/\./g,"-"),void 0,$)}function createThemeVars(X,$){for(var ee={},ne={},de=function _loop(){var de=Ue[fe],je=de[0],Ke=de[1],et=Ke.isSemantic,tt=Ke.value,nt=tokenToCssVar(je,null==$?void 0:$.cssVarPrefix),it=nt.variable,ct=nt.reference;if(!et){if(je.startsWith("space")){var dt=je.split("."),vt=dt[0]+".-"+dt.slice(1).join("."),gt=va.negate(tt),yt=va.negate(ct);ne[vt]={value:gt,var:it,varRef:yt}}return ee[it]=tt,ne[je]={value:tt,var:it,varRef:ct},"continue"}var _t=chakra_ui_utils_esm_isObject(tt)?tt:{default:tt};ee=ae()(ee,Object.entries(_t).reduce((function(ee,ne){var ae,de,fe=ne[0],Ue=function lookupToken(ee){var ne=[String(je).split(".")[0],ee].join(".");return X[ne]?tokenToCssVar(ne,null==$?void 0:$.cssVarPrefix).reference:ee}(ne[1]);return"default"===fe?(ee[it]=Ue,ee):(ee[null!=(ae=null==Xr?void 0:Xr[fe])?ae:fe]=((de={})[it]=Ue,de),ee)}),{})),ne[je]={value:ct,var:it,varRef:ct}},fe=0,Ue=Object.entries(X);fe<Ue.length;fe++)de();return{cssVars:ee,cssMap:ne}}var ga=["__cssMap","__cssVars","__breakpoints"],ya=["colors","borders","borderWidths","borderStyles","fonts","fontSizes","fontWeights","letterSpacings","lineHeights","radii","space","shadows","sizes","zIndices","transition","blur"];function extractTokens(X){return function pick(X,$){var ee={};return $.forEach((function($){$ in X&&(ee[$]=X[$])})),ee}(X,ya)}function omitVars(X){return X.__cssMap,X.__cssVars,X.__breakpoints,function chakra_ui_styled_system_esm_objectWithoutPropertiesLoose(X,$){if(null==X)return{};var ee,ne,ae={},de=Object.keys(X);for(ne=0;ne<de.length;ne++)ee=de[ne],$.indexOf(ee)>=0||(ae[ee]=X[ee]);return ae}(X,ga)}function toCSSVar(X){var $,ee=omitVars(X),ne=extractTokens(ee),ae=function extractSemanticTokens(X){return X.semanticTokens}(ee),de=function flattenTokens(X){var $,ee,ne=X.tokens,ae=X.semanticTokens,de=Object.entries(null!=($=flatten(ne))?$:{}).map((function(X){return[X[0],{isSemantic:!1,value:X[1]}]})),fe=Object.entries(null!=(ee=flatten(ae,1))?ee:{}).map((function(X){return[X[0],{isSemantic:!0,value:X[1]}]}));return tt([].concat(de,fe))}({tokens:ne,semanticTokens:ae}),fe=createThemeVars(de,{cssVarPrefix:null==($=ee.config)?void 0:$.cssVarPrefix}),Ue=fe.cssMap,je=fe.cssVars;return Object.assign(ee,{__cssVars:chakra_ui_styled_system_esm_extends({},{"--chakra-ring-inset":"var(--chakra-empty,/*!*/ /*!*/)","--chakra-ring-offset-width":"0px","--chakra-ring-offset-color":"#fff","--chakra-ring-color":"rgba(66, 153, 225, 0.6)","--chakra-ring-offset-shadow":"0 0 #0000","--chakra-ring-shadow":"0 0 #0000","--chakra-space-x-reverse":"0","--chakra-space-y-reverse":"0"},je),__cssMap:Ue,__breakpoints:analyzeBreakpoints(ee.breakpoints)}),ee}var ba=function(){function StyleSheet(X){var $=this;this._insertTag=function(X){var ee;ee=0===$.tags.length?$.insertionPoint?$.insertionPoint.nextSibling:$.prepend?$.container.firstChild:$.before:$.tags[$.tags.length-1].nextSibling,$.container.insertBefore(X,ee),$.tags.push(X)},this.isSpeedy=void 0===X.speedy||X.speedy,this.tags=[],this.ctr=0,this.nonce=X.nonce,this.key=X.key,this.container=X.container,this.prepend=X.prepend,this.insertionPoint=X.insertionPoint,this.before=null}var X=StyleSheet.prototype;return X.hydrate=function hydrate(X){X.forEach(this._insertTag)},X.insert=function insert(X){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function createStyleElement(X){var $=document.createElement("style");return $.setAttribute("data-emotion",X.key),void 0!==X.nonce&&$.setAttribute("nonce",X.nonce),$.appendChild(document.createTextNode("")),$.setAttribute("data-s",""),$}(this));var $=this.tags[this.tags.length-1];if(this.isSpeedy){var ee=function sheetForTag(X){if(X.sheet)return X.sheet;for(var $=0;$<document.styleSheets.length;$++)if(document.styleSheets[$].ownerNode===X)return document.styleSheets[$]}($);try{ee.insertRule(X,ee.cssRules.length)}catch(ne){0}}else $.appendChild(document.createTextNode(X));this.ctr++},X.flush=function flush(){this.tags.forEach((function(X){return X.parentNode&&X.parentNode.removeChild(X)})),this.tags=[],this.ctr=0},StyleSheet}(),xa=Math.abs,_a=String.fromCharCode,wa=Object.assign;function trim(X){return X.trim()}function replace(X,$,ee){return X.replace($,ee)}function indexof(X,$){return X.indexOf($)}function Utility_charat(X,$){return 0|X.charCodeAt($)}function Utility_substr(X,$,ee){return X.slice($,ee)}function Utility_strlen(X){return X.length}function Utility_sizeof(X){return X.length}function Utility_append(X,$){return $.push(X),X}var Ca=1,Aa=1,Ma=0,Ea=0,Da=0,Ia="";function node(X,$,ee,ne,ae,de,fe){return{value:X,root:$,parent:ee,type:ne,props:ae,children:de,line:Ca,column:Aa,length:fe,return:""}}function Tokenizer_copy(X,$){return wa(node("",null,null,"",null,null,0),X,{length:-X.length},$)}function prev(){return Da=Ea>0?Utility_charat(Ia,--Ea):0,Aa--,10===Da&&(Aa=1,Ca--),Da}function next(){return Da=Ea<Ma?Utility_charat(Ia,Ea++):0,Aa++,10===Da&&(Aa=1,Ca++),Da}function peek(){return Utility_charat(Ia,Ea)}function caret(){return Ea}function slice(X,$){return Utility_substr(Ia,X,$)}function token(X){switch(X){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(X){return Ca=Aa=1,Ma=Utility_strlen(Ia=X),Ea=0,[]}function dealloc(X){return Ia="",X}function delimit(X){return trim(slice(Ea-1,delimiter(91===X?X+2:40===X?X+1:X)))}function whitespace(X){for(;(Da=peek())&&Da<33;)next();return token(X)>2||token(Da)>3?"":" "}function escaping(X,$){for(;--$&&next()&&!(Da<48||Da>102||Da>57&&Da<65||Da>70&&Da<97););return slice(X,caret()+($<6&&32==peek()&&32==next()))}function delimiter(X){for(;next();)switch(Da){case X:return Ea;case 34:case 39:34!==X&&39!==X&&delimiter(Da);break;case 40:41===X&&delimiter(X);break;case 92:next()}return Ea}function commenter(X,$){for(;next()&&X+Da!==57&&(X+Da!==84||47!==peek()););return"/*"+slice($,Ea-1)+"*"+_a(47===X?X:next())}function identifier(X){for(;!token(peek());)next();return slice(X,Ea)}var qa="-ms-",eo="-moz-",to="-webkit-",ro="comm",fo="rule",vo="decl",mo="@keyframes";function serialize(X,$){for(var ee="",ne=Utility_sizeof(X),ae=0;ae<ne;ae++)ee+=$(X[ae],ae,X,$)||"";return ee}function stringify(X,$,ee,ne){switch(X.type){case"@import":case vo:return X.return=X.return||X.value;case ro:return"";case mo:return X.return=X.value+"{"+serialize(X.children,ne)+"}";case fo:X.value=X.props.join(",")}return Utility_strlen(ee=serialize(X.children,ne))?X.return=X.value+"{"+ee+"}":""}function prefix(X,$){switch(function hash(X,$){return((($<<2^Utility_charat(X,0))<<2^Utility_charat(X,1))<<2^Utility_charat(X,2))<<2^Utility_charat(X,3)}(X,$)){case 5103:return to+"print-"+X+X;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return to+X+X;case 5349:case 4246:case 4810:case 6968:case 2756:return to+X+eo+X+qa+X+X;case 6828:case 4268:return to+X+qa+X+X;case 6165:return to+X+qa+"flex-"+X+X;case 5187:return to+X+replace(X,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+X;case 5443:return to+X+qa+"flex-item-"+replace(X,/flex-|-self/,"")+X;case 4675:return to+X+qa+"flex-line-pack"+replace(X,/align-content|flex-|-self/,"")+X;case 5548:return to+X+qa+replace(X,"shrink","negative")+X;case 5292:return to+X+qa+replace(X,"basis","preferred-size")+X;case 6060:return to+"box-"+replace(X,"-grow","")+to+X+qa+replace(X,"grow","positive")+X;case 4554:return to+replace(X,/([^-])(transform)/g,"$1-webkit-$2")+X;case 6187:return replace(replace(replace(X,/(zoom-|grab)/,to+"$1"),/(image-set)/,to+"$1"),X,"")+X;case 5495:case 3959:return replace(X,/(image-set\([^]*)/,to+"$1$`$1");case 4968:return replace(replace(X,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+to+X+X;case 4095:case 3583:case 4068:case 2532:return replace(X,/(.+)-inline(.+)/,to+"$1$2")+X;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Utility_strlen(X)-1-$>6)switch(Utility_charat(X,$+1)){case 109:if(45!==Utility_charat(X,$+4))break;case 102:return replace(X,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+eo+(108==Utility_charat(X,$+3)?"$3":"$2-$3"))+X;case 115:return~indexof(X,"stretch")?prefix(replace(X,"stretch","fill-available"),$)+X:X}break;case 4949:if(115!==Utility_charat(X,$+1))break;case 6444:switch(Utility_charat(X,Utility_strlen(X)-3-(~indexof(X,"!important")&&10))){case 107:return replace(X,":",":"+to)+X;case 101:return replace(X,/(.+:)([^;!]+)(;|!.+)?/,"$1"+to+(45===Utility_charat(X,14)?"inline-":"")+"box$3$1"+to+"$2$3$1"+qa+"$2box$3")+X}break;case 5936:switch(Utility_charat(X,$+11)){case 114:return to+X+qa+replace(X,/[svh]\w+-[tblr]{2}/,"tb")+X;case 108:return to+X+qa+replace(X,/[svh]\w+-[tblr]{2}/,"tb-rl")+X;case 45:return to+X+qa+replace(X,/[svh]\w+-[tblr]{2}/,"lr")+X}return to+X+qa+X+X}return X}function compile(X){return dealloc(parse("",null,null,null,[""],X=alloc(X),0,[0],X))}function parse(X,$,ee,ne,ae,de,fe,Ue,je){for(var Ke=0,et=0,tt=fe,nt=0,it=0,ct=0,dt=1,vt=1,gt=1,yt=0,_t="",wt=ae,St=de,Ct=ne,At=_t;vt;)switch(ct=yt,yt=next()){case 40:if(108!=ct&&58==At.charCodeAt(tt-1)){-1!=indexof(At+=replace(delimit(yt),"&","&\f"),"&\f")&&(gt=-1);break}case 34:case 39:case 91:At+=delimit(yt);break;case 9:case 10:case 13:case 32:At+=whitespace(ct);break;case 92:At+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:Utility_append(comment(commenter(next(),caret()),$,ee),je);break;default:At+="/"}break;case 123*dt:Ue[Ke++]=Utility_strlen(At)*gt;case 125*dt:case 59:case 0:switch(yt){case 0:case 125:vt=0;case 59+et:it>0&&Utility_strlen(At)-tt&&Utility_append(it>32?declaration(At+";",ne,ee,tt-1):declaration(replace(At," ","")+";",ne,ee,tt-2),je);break;case 59:At+=";";default:if(Utility_append(Ct=ruleset(At,$,ee,Ke,et,ae,Ue,_t,wt=[],St=[],tt),de),123===yt)if(0===et)parse(At,$,Ct,Ct,wt,de,tt,Ue,St);else switch(nt){case 100:case 109:case 115:parse(X,Ct,Ct,ne&&Utility_append(ruleset(X,Ct,Ct,0,0,ae,Ue,_t,ae,wt=[],tt),St),ae,St,tt,Ue,ne?wt:St);break;default:parse(At,Ct,Ct,Ct,[""],St,0,Ue,St)}}Ke=et=it=0,dt=gt=1,_t=At="",tt=fe;break;case 58:tt=1+Utility_strlen(At),it=ct;default:if(dt<1)if(123==yt)--dt;else if(125==yt&&0==dt++&&125==prev())continue;switch(At+=_a(yt),yt*dt){case 38:gt=et>0?1:(At+="\f",-1);break;case 44:Ue[Ke++]=(Utility_strlen(At)-1)*gt,gt=1;break;case 64:45===peek()&&(At+=delimit(next())),nt=peek(),et=tt=Utility_strlen(_t=At+=identifier(caret())),yt++;break;case 45:45===ct&&2==Utility_strlen(At)&&(dt=0)}}return de}function ruleset(X,$,ee,ne,ae,de,fe,Ue,je,Ke,et){for(var tt=ae-1,nt=0===ae?de:[""],it=Utility_sizeof(nt),ct=0,dt=0,vt=0;ct<ne;++ct)for(var gt=0,yt=Utility_substr(X,tt+1,tt=xa(dt=fe[ct])),_t=X;gt<it;++gt)(_t=trim(dt>0?nt[gt]+" "+yt:replace(yt,/&\f/g,nt[gt])))&&(je[vt++]=_t);return node(X,$,ee,0===ae?fo:Ue,je,Ke,et)}function comment(X,$,ee){return node(X,$,ee,ro,_a(function Tokenizer_char(){return Da}()),Utility_substr(X,2,-2),0)}function declaration(X,$,ee,ne){return node(X,$,ee,vo,Utility_substr(X,0,ne),Utility_substr(X,ne+1,-1),ne)}var go=function identifierWithPointTracking(X,$,ee){for(var ne=0,ae=0;ne=ae,ae=peek(),38===ne&&12===ae&&($[ee]=1),!token(ae);)next();return slice(X,Ea)},bo=function getRules(X,$){return dealloc(function toRules(X,$){var ee=-1,ne=44;do{switch(token(ne)){case 0:38===ne&&12===peek()&&($[ee]=1),X[ee]+=go(Ea-1,$,ee);break;case 2:X[ee]+=delimit(ne);break;case 4:if(44===ne){X[++ee]=58===peek()?"&\f":"",$[ee]=X[ee].length;break}default:X[ee]+=_a(ne)}}while(ne=next());return X}(alloc(X),$))},xo=new WeakMap,wo=function compat(X){if("rule"===X.type&&X.parent&&!(X.length<1)){for(var $=X.value,ee=X.parent,ne=X.column===ee.column&&X.line===ee.line;"rule"!==ee.type;)if(!(ee=ee.parent))return;if((1!==X.props.length||58===$.charCodeAt(0)||xo.get(ee))&&!ne){xo.set(X,!0);for(var ae=[],de=bo($,ae),fe=ee.props,Ue=0,je=0;Ue<de.length;Ue++)for(var Ke=0;Ke<fe.length;Ke++,je++)X.props[je]=ae[Ue]?de[Ue].replace(/&\f/g,fe[Ke]):fe[Ke]+" "+de[Ue]}}},So=function removeLabel(X){if("decl"===X.type){var $=X.value;108===$.charCodeAt(0)&&98===$.charCodeAt(2)&&(X.return="",X.value="")}},Ao=[function prefixer(X,$,ee,ne){if(X.length>-1&&!X.return)switch(X.type){case vo:X.return=prefix(X.value,X.length);break;case mo:return serialize([Tokenizer_copy(X,{value:replace(X.value,"@","@"+to)})],ne);case fo:if(X.length)return function Utility_combine(X,$){return X.map($).join("")}(X.props,(function($){switch(function match(X,$){return(X=$.exec(X))?X[0]:X}($,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return serialize([Tokenizer_copy(X,{props:[replace($,/:(read-\w+)/,":-moz-$1")]})],ne);case"::placeholder":return serialize([Tokenizer_copy(X,{props:[replace($,/:(plac\w+)/,":-webkit-input-$1")]}),Tokenizer_copy(X,{props:[replace($,/:(plac\w+)/,":-moz-$1")]}),Tokenizer_copy(X,{props:[replace($,/:(plac\w+)/,qa+"input-$1")]})],ne)}return""}))}}],Mo=function createCache(X){var $=X.key;if("css"===$){var ee=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(ee,(function(X){-1!==X.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(X),X.setAttribute("data-s",""))}))}var ne=X.stylisPlugins||Ao;var ae,de,fe={},Ue=[];ae=X.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+$+' "]'),(function(X){for(var $=X.getAttribute("data-emotion").split(" "),ee=1;ee<$.length;ee++)fe[$[ee]]=!0;Ue.push(X)}));var je,Ke,et=[stringify,(Ke=function(X){je.insert(X)},function(X){X.root||(X=X.return)&&Ke(X)})],tt=function middleware(X){var $=Utility_sizeof(X);return function(ee,ne,ae,de){for(var fe="",Ue=0;Ue<$;Ue++)fe+=X[Ue](ee,ne,ae,de)||"";return fe}}([wo,So].concat(ne,et));de=function insert(X,$,ee,ne){je=ee,function stylis(X){serialize(compile(X),tt)}(X?X+"{"+$.styles+"}":$.styles),ne&&(nt.inserted[$.name]=!0)};var nt={key:$,sheet:new ba({key:$,container:ae,nonce:X.nonce,speedy:X.speedy,prepend:X.prepend,insertionPoint:X.insertionPoint}),nonce:X.nonce,inserted:fe,registered:{},insert:de};return nt.sheet.hydrate(Ue),nt};function extends_extends(){return extends_extends=Object.assign||function(X){for(var $=1;$<arguments.length;$++){var ee=arguments[$];for(var ne in ee)Object.prototype.hasOwnProperty.call(ee,ne)&&(X[ne]=ee[ne])}return X},extends_extends.apply(this,arguments)}var Eo=function weakMemoize(X){var $=new WeakMap;return function(ee){if($.has(ee))return $.get(ee);var ne=X(ee);return $.set(ee,ne),ne}};var To=function murmur2(X){for(var $,ee=0,ne=0,ae=X.length;ae>=4;++ne,ae-=4)$=1540483477*(65535&($=255&X.charCodeAt(ne)|(255&X.charCodeAt(++ne))<<8|(255&X.charCodeAt(++ne))<<16|(255&X.charCodeAt(++ne))<<24))+(59797*($>>>16)<<16),ee=1540483477*(65535&($^=$>>>24))+(59797*($>>>16)<<16)^1540483477*(65535&ee)+(59797*(ee>>>16)<<16);switch(ae){case 3:ee^=(255&X.charCodeAt(ne+2))<<16;case 2:ee^=(255&X.charCodeAt(ne+1))<<8;case 1:ee=1540483477*(65535&(ee^=255&X.charCodeAt(ne)))+(59797*(ee>>>16)<<16)}return(((ee=1540483477*(65535&(ee^=ee>>>13))+(59797*(ee>>>16)<<16))^ee>>>15)>>>0).toString(36)},Uo={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var Vo=function emotion_memoize_browser_esm_memoize(X){var $=Object.create(null);return function(ee){return void 0===$[ee]&&($[ee]=X(ee)),$[ee]}},Ho=/[A-Z]|^ms/g,Go=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Wo=function isCustomProperty(X){return 45===X.charCodeAt(1)},es=function isProcessableValue(X){return null!=X&&"boolean"!==typeof X},rs=Vo((function(X){return Wo(X)?X:X.replace(Ho,"-$&").toLowerCase()})),ls=function processStyleValue(X,$){switch(X){case"animation":case"animationName":if("string"===typeof $)return $.replace(Go,(function(X,$,ee){return us={name:$,styles:ee,next:us},$}))}return 1===Uo[X]||Wo(X)||"number"!==typeof $||0===$?$:$+"px"};function handleInterpolation(X,$,ee){if(null==ee)return"";if(void 0!==ee.__emotion_styles)return ee;switch(typeof ee){case"boolean":return"";case"object":if(1===ee.anim)return us={name:ee.name,styles:ee.styles,next:us},ee.name;if(void 0!==ee.styles){var ne=ee.next;if(void 0!==ne)for(;void 0!==ne;)us={name:ne.name,styles:ne.styles,next:us},ne=ne.next;return ee.styles+";"}return function createStringFromObject(X,$,ee){var ne="";if(Array.isArray(ee))for(var ae=0;ae<ee.length;ae++)ne+=handleInterpolation(X,$,ee[ae])+";";else for(var de in ee){var fe=ee[de];if("object"!==typeof fe)null!=$&&void 0!==$[fe]?ne+=de+"{"+$[fe]+"}":es(fe)&&(ne+=rs(de)+":"+ls(de,fe)+";");else if(!Array.isArray(fe)||"string"!==typeof fe[0]||null!=$&&void 0!==$[fe[0]]){var Ue=handleInterpolation(X,$,fe);switch(de){case"animation":case"animationName":ne+=rs(de)+":"+Ue+";";break;default:ne+=de+"{"+Ue+"}"}}else for(var je=0;je<fe.length;je++)es(fe[je])&&(ne+=rs(de)+":"+ls(de,fe[je])+";")}return ne}(X,$,ee);case"function":if(void 0!==X){var ae=us,de=ee(X);return us=ae,handleInterpolation(X,$,de)}}if(null==$)return ee;var fe=$[ee];return void 0!==fe?fe:ee}var us,cs=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var hs=function serializeStyles(X,$,ee){if(1===X.length&&"object"===typeof X[0]&&null!==X[0]&&void 0!==X[0].styles)return X[0];var ne=!0,ae="";us=void 0;var de=X[0];null==de||void 0===de.raw?(ne=!1,ae+=handleInterpolation(ee,$,de)):ae+=de[0];for(var fe=1;fe<X.length;fe++)ae+=handleInterpolation(ee,$,X[fe]),ne&&(ae+=de[fe]);cs.lastIndex=0;for(var Ue,je="";null!==(Ue=cs.exec(ae));)je+="-"+Ue[1];return{name:To(ae)+je,styles:ae,next:us}},ds=(0,X.createContext)("undefined"!==typeof HTMLElement?Mo({key:"css"}):null);ds.Provider;var fs=function withEmotionCache($){return(0,X.forwardRef)((function(ee,ne){var ae=(0,X.useContext)(ds);return $(ee,ae,ne)}))},bs=(0,X.createContext)({});var xs=Eo((function(X){return Eo((function($){return function getTheme(X,$){return"function"===typeof $?$(X):extends_extends({},X,$)}(X,$)}))})),_s=function ThemeProvider($){var ee=(0,X.useContext)(bs);return $.theme!==ee&&(ee=xs(ee)($.theme)),(0,X.createElement)(bs.Provider,{value:ee},$.children)};$.useInsertionEffect&&$.useInsertionEffect;__webpack_require__(110);function emotion_utils_browser_esm_getRegisteredStyles(X,$,ee){var ne="";return ee.split(" ").forEach((function(ee){void 0!==X[ee]?$.push(X[ee]+";"):ne+=ee+" "})),ne}var ws=function registerStyles(X,$,ee){var ne=X.key+"-"+$.name;!1===ee&&void 0===X.registered[ne]&&(X.registered[ne]=$.styles)},Ss=function insertStyles(X,$,ee){ws(X,$,ee);var ne=X.key+"-"+$.name;if(void 0===X.inserted[$.name]){var ae=$;do{X.insert($===ae?"."+ne:"",ae,X.sheet,!0);ae=ae.next}while(void 0!==ae)}},Cs=$.useInsertionEffect?$.useInsertionEffect:X.useLayoutEffect,As=fs((function($,ee){var ne=$.styles,ae=hs([ne],void 0,(0,X.useContext)(bs)),de=(0,X.useRef)();return Cs((function(){var X=ee.key+"-global",$=new ee.sheet.constructor({key:X,nonce:ee.sheet.nonce,container:ee.sheet.container,speedy:ee.sheet.isSpeedy}),ne=!1,fe=document.querySelector('style[data-emotion="'+X+" "+ae.name+'"]');return ee.sheet.tags.length&&($.before=ee.sheet.tags[0]),null!==fe&&(ne=!0,fe.setAttribute("data-emotion",X),$.hydrate([fe])),de.current=[$,ne],function(){$.flush()}}),[ee]),Cs((function(){var X=de.current,$=X[0];if(X[1])X[1]=!1;else{if(void 0!==ae.next&&Ss(ee,ae.next,!0),$.tags.length){var ne=$.tags[$.tags.length-1].nextElementSibling;$.before=ne,$.flush()}ee.insert("",ae,$,!1)}}),[ee,ae.name]),null}));function emotion_react_browser_esm_css(){for(var X=arguments.length,$=new Array(X),ee=0;ee<X;ee++)$[ee]=arguments[ee];return hs($)}var Ms=function keyframes(){var X=emotion_react_browser_esm_css.apply(void 0,arguments),$="animation-"+X.name;return{name:$,styles:"@keyframes "+$+"{"+X.styles+"}",anim:1,toString:function toString(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};var Es=__webpack_require__(77),Ts=__webpack_require__.n(Es);function createContext($){void 0===$&&($={});var ee=$,ne=ee.strict,ae=void 0===ne||ne,de=ee.errorMessage,fe=void 0===de?"useContext: `context` is undefined. Seems you forgot to wrap component within the Provider":de,Ue=ee.name,je=X.createContext(void 0);return je.displayName=Ue,[je.Provider,function useContext(){var $=X.useContext(je);if(!$&&ae){var ee=new Error(fe);throw ee.name="ContextError",null==Error.captureStackTrace||Error.captureStackTrace(ee,useContext),ee}return $},je]}var Ps=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,Ds=Vo((function(X){return Ps.test(X)||111===X.charCodeAt(0)&&110===X.charCodeAt(1)&&X.charCodeAt(2)<91})),Ls=function testOmitPropsOnComponent(X){return"theme"!==X},Rs=function getDefaultShouldForwardProp(X){return"string"===typeof X&&X.charCodeAt(0)>96?Ds:Ls},Bs=function composeShouldForwardProps(X,$,ee){var ne;if($){var ae=$.shouldForwardProp;ne=X.__emotion_forwardProp&&ae?function($){return X.__emotion_forwardProp($)&&ae($)}:ae}return"function"!==typeof ne&&ee&&(ne=X.__emotion_forwardProp),ne},Ns=$.useInsertionEffect?$.useInsertionEffect:function useInsertionEffect(X){X()};var js=function Insertion(X){var $=X.cache,ee=X.serialized,ne=X.isStringTag;ws($,ee,ne);(function emotion_styled_base_browser_esm_useInsertionEffectMaybe(X){Ns(X)})((function(){return Ss($,ee,ne)}));return null},Ys=function createStyled($,ee){var ne,ae,de=$.__emotion_real===$,fe=de&&$.__emotion_base||$;void 0!==ee&&(ne=ee.label,ae=ee.target);var Ue=Bs($,ee,de),je=Ue||Rs(fe),Ke=!je("as");return function(){var et=arguments,tt=de&&void 0!==$.__emotion_styles?$.__emotion_styles.slice(0):[];if(void 0!==ne&&tt.push("label:"+ne+";"),null==et[0]||void 0===et[0].raw)tt.push.apply(tt,et);else{0,tt.push(et[0][0]);for(var nt=et.length,it=1;it<nt;it++)tt.push(et[it],et[0][it])}var ct=fs((function($,ee,ne){var de=Ke&&$.as||fe,et="",nt=[],it=$;if(null==$.theme){for(var ct in it={},$)it[ct]=$[ct];it.theme=(0,X.useContext)(bs)}"string"===typeof $.className?et=emotion_utils_browser_esm_getRegisteredStyles(ee.registered,nt,$.className):null!=$.className&&(et=$.className+" ");var dt=hs(tt.concat(nt),ee.registered,it);et+=ee.key+"-"+dt.name,void 0!==ae&&(et+=" "+ae);var vt=Ke&&void 0===Ue?Rs(de):je,gt={};for(var yt in $)Ke&&"as"===yt||vt(yt)&&(gt[yt]=$[yt]);return gt.className=et,gt.ref=ne,(0,X.createElement)(X.Fragment,null,(0,X.createElement)(js,{cache:ee,serialized:dt,isStringTag:"string"===typeof de}),(0,X.createElement)(de,gt))}));return ct.displayName=void 0!==ne?ne:"Styled("+("string"===typeof fe?fe:fe.displayName||fe.name||"Component")+")",ct.defaultProps=$.defaultProps,ct.__emotion_real=ct,ct.__emotion_base=fe,ct.__emotion_styles=tt,ct.__emotion_forwardProp=Ue,Object.defineProperty(ct,"toString",{value:function value(){return"."+ae}}),ct.withComponent=function(X,$){return createStyled(X,extends_extends({},ee,$,{shouldForwardProp:Bs(ct,$,!0)})).apply(void 0,tt)},ct}},Js=Ys.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(X){Js[X]=Js(X)}));var Zs=Js;function chakra_ui_system_esm_extends(){return chakra_ui_system_esm_extends=Object.assign||function(X){for(var $=1;$<arguments.length;$++){var ee=arguments[$];for(var ne in ee)Object.prototype.hasOwnProperty.call(ee,ne)&&(X[ne]=ee[ne])}return X},chakra_ui_system_esm_extends.apply(this,arguments)}var Xs=function ThemeProvider($){var ee=$.cssVarsRoot,ne=$.theme,ae=$.children,de=X.useMemo((function(){return toCSSVar(ne)}),[ne]);return X.createElement(_s,{theme:de},X.createElement(Qs,{root:ee}),ae)},Qs=function CSSVars($){var ee=$.root,ne=[void 0===ee?":host, :root":ee,"[data-theme]"].join(",");return X.createElement(As,{styles:function styles(X){var $;return($={})[ne]=X.__cssVars,$}})};function chakra_ui_system_esm_useTheme(){var $=X.useContext(bs);if(!$)throw Error("useTheme: `theme` is undefined. Seems you forgot to wrap your app in `<ChakraProvider />` or `<ThemeProvider />`");return $}var Ks=createContext({name:"StylesContext",errorMessage:"useStyles: `styles` is undefined. Seems you forgot to wrap the components in `<StylesProvider />` "}),$s=(Ks[0],Ks[1],function GlobalStyle(){var $=Qt().colorMode;return X.createElement(As,{styles:function styles(X){var ee=chakra_ui_utils_esm_runIfFn(je(X,"styles.global"),{theme:X,colorMode:$});if(ee){var styles=aa(ee)(X);return styles}}})});function omitThemingProps(X){return omit(X,["styleConfig","size","variant","colorScheme"])}function chakra_ui_system_esm_useChakra(){return chakra_ui_system_esm_extends({},Qt(),{theme:chakra_ui_system_esm_useTheme()})}function chakra_ui_system_esm_objectWithoutPropertiesLoose(X,$){if(null==X)return{};var ee,ne,ae={},de=Object.keys(X);for(ne=0;ne<de.length;ne++)ee=de[ne],$.indexOf(ee)>=0||(ae[ee]=X[ee]);return ae}var il=new Set([].concat(Ei,["textStyle","layerStyle","apply","noOfLines","focusBorderColor","errorBorderColor","as","__css","css","sx"])),al=new Set(["htmlWidth","htmlHeight","htmlSize"]),ll=function shouldForwardProp(X){return al.has(X)||!il.has(X)},cl=["theme","css","__css","sx"],hl=["baseStyle"];function styled(X,$){var ee=null!=$?$:{},ne=ee.baseStyle,ae=chakra_ui_system_esm_objectWithoutPropertiesLoose(ee,hl);ae.shouldForwardProp||(ae.shouldForwardProp=ll);var de=function toCSSObject(X){var $=X.baseStyle;return function(X){X.theme;var ee=X.css,ne=X.__css,ae=X.sx,de=objectFilter(chakra_ui_system_esm_objectWithoutPropertiesLoose(X,cl),(function(X,$){return Yi($)})),fe=chakra_ui_utils_esm_runIfFn($,X),Ue=Object.assign({},ne,fe,Ke(de),ae),je=aa(Ue)(X.theme);return ee?[je,ee]:je}}({baseStyle:ne});return Zs(X,ae)(de)}function chakra_ui_system_esm_forwardRef($){return X.forwardRef($)}var gl=["styleConfig"];function useStyleConfig($,ee,ne){var de;void 0===ee&&(ee={}),void 0===ne&&(ne={});var fe=ee,Ue=fe.styleConfig,et=chakra_ui_system_esm_objectWithoutPropertiesLoose(fe,gl),tt=chakra_ui_system_esm_useChakra(),nt=tt.theme,it=tt.colorMode,ct=je(nt,"components."+$),dt=Ue||ct,vt=ae()({theme:nt,colorMode:it},null!=(de=null==dt?void 0:dt.defaultProps)?de:{},Ke(omit(et,["children"]))),gt=(0,X.useRef)({});if(dt){var yt,_t,wt,St,Ct,At,Et=chakra_ui_utils_esm_runIfFn(null!=(yt=dt.baseStyle)?yt:{},vt),Rt=chakra_ui_utils_esm_runIfFn(null!=(_t=null==(wt=dt.variants)?void 0:wt[vt.variant])?_t:{},vt),Bt=chakra_ui_utils_esm_runIfFn(null!=(St=null==(Ct=dt.sizes)?void 0:Ct[vt.size])?St:{},vt),Ht=ae()({},Et,Bt,Rt);null!=(At=ne)&&At.isMultiPart&&dt.parts&&dt.parts.forEach((function(X){var $;Ht[X]=null!=($=Ht[X])?$:{}})),Ts()(gt.current,Ht)||(gt.current=Ht)}return gt.current}var bl=function factory(){var X=new Map;return new Proxy(styled,{apply:function apply(X,$,ee){return styled.apply(void 0,ee)},get:function get($,ee){return X.has(ee)||X.set(ee,styled(ee)),X.get(ee)}})}(),_l={border:"0px",clip:"rect(0px, 0px, 0px, 0px)",height:"1px",width:"1px",margin:"-1px",padding:"0px",overflow:"hidden",whiteSpace:"nowrap",position:"absolute"},kl=bl("span",{baseStyle:_l});bl("input",{baseStyle:_l});function chakra_ui_spinner_esm_extends(){return chakra_ui_spinner_esm_extends=Object.assign||function(X){for(var $=1;$<arguments.length;$++){var ee=arguments[$];for(var ne in ee)Object.prototype.hasOwnProperty.call(ee,ne)&&(X[ne]=ee[ne])}return X},chakra_ui_spinner_esm_extends.apply(this,arguments)}var Xl=["label","thickness","speed","emptyColor","className"],tu=Ms({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),nu=chakra_ui_system_esm_forwardRef((function($,ee){var ne=useStyleConfig("Spinner",$),ae=omitThemingProps($),de=ae.label,fe=void 0===de?"Loading...":de,Ue=ae.thickness,je=void 0===Ue?"2px":Ue,Ke=ae.speed,et=void 0===Ke?"0.45s":Ke,tt=ae.emptyColor,nt=void 0===tt?"transparent":tt,it=ae.className,ct=function chakra_ui_spinner_esm_objectWithoutPropertiesLoose(X,$){if(null==X)return{};var ee,ne,ae={},de=Object.keys(X);for(ne=0;ne<de.length;ne++)ee=de[ne],$.indexOf(ee)>=0||(ae[ee]=X[ee]);return ae}(ae,Xl),dt=vt("chakra-spinner",it),gt=chakra_ui_spinner_esm_extends({display:"inline-block",borderColor:"currentColor",borderStyle:"solid",borderRadius:"99999px",borderWidth:je,borderBottomColor:nt,borderLeftColor:nt,animation:tu+" "+et+" linear infinite"},ne);return X.createElement(bl.div,chakra_ui_spinner_esm_extends({ref:ee,__css:gt,className:dt},ct),fe&&X.createElement(kl,null,fe))}));function chakra_ui_button_esm_objectWithoutPropertiesLoose(X,$){if(null==X)return{};var ee,ne,ae={},de=Object.keys(X);for(ne=0;ne<de.length;ne++)ee=de[ne],$.indexOf(ee)>=0||(ae[ee]=X[ee]);return ae}function chakra_ui_button_esm_extends(){return chakra_ui_button_esm_extends=Object.assign||function(X){for(var $=1;$<arguments.length;$++){var ee=arguments[$];for(var ne in ee)Object.prototype.hasOwnProperty.call(ee,ne)&&(X[ne]=ee[ne])}return X},chakra_ui_button_esm_extends.apply(this,arguments)}var ru=createContext({strict:!1,name:"ButtonGroupContext"}),iu=(ru[0],ru[1]);var ou=["label","placement","spacing","children","className","__css"],su=function ButtonSpinner($){var ee=$.label,ne=$.placement,ae=$.spacing,de=void 0===ae?"0.5rem":ae,fe=$.children,Ue=void 0===fe?X.createElement(nu,{color:"currentColor",width:"1em",height:"1em"}):fe,je=$.className,Ke=$.__css,et=chakra_ui_button_esm_objectWithoutPropertiesLoose($,ou),tt=vt("chakra-button__spinner",je),nt="start"===ne?"marginEnd":"marginStart",it=X.useMemo((function(){var X;return chakra_ui_button_esm_extends(((X={display:"flex",alignItems:"center",position:ee?"relative":"absolute"})[nt]=ee?de:0,X.fontSize="1em",X.lineHeight="normal",X),Ke)}),[Ke,ee,nt,de]);return X.createElement(bl.div,chakra_ui_button_esm_extends({className:tt},et,{__css:it}),Ue)};var cu=["children","className"],hu=function ButtonIcon($){var ee=$.children,ne=$.className,ae=chakra_ui_button_esm_objectWithoutPropertiesLoose($,cu),de=X.isValidElement(ee)?X.cloneElement(ee,{"aria-hidden":!0,focusable:!1}):ee,fe=vt("chakra-button__icon",ne);return X.createElement(bl.span,chakra_ui_button_esm_extends({display:"inline-flex",alignSelf:"center",flexShrink:0},ae,{className:fe}),de)};var vu=["isDisabled","isLoading","isActive","children","leftIcon","rightIcon","loadingText","iconSpacing","type","spinner","spinnerPlacement","className","as"],gu=chakra_ui_system_esm_forwardRef((function($,ee){var ne=iu(),de=useStyleConfig("Button",chakra_ui_button_esm_extends({},ne,$)),fe=omitThemingProps($),Ue=fe.isDisabled,je=void 0===Ue?null==ne?void 0:ne.isDisabled:Ue,Ke=fe.isLoading,et=fe.isActive,tt=fe.children,nt=fe.leftIcon,it=fe.rightIcon,ct=fe.loadingText,gt=fe.iconSpacing,yt=void 0===gt?"0.5rem":gt,_t=fe.type,wt=fe.spinner,St=fe.spinnerPlacement,Ct=void 0===St?"start":St,At=fe.className,Et=fe.as,Rt=chakra_ui_button_esm_objectWithoutPropertiesLoose(fe,vu),Bt=X.useMemo((function(){var X,$=ae()({},null!=(X=null==de?void 0:de._focus)?X:{},{zIndex:1});return chakra_ui_button_esm_extends({display:"inline-flex",appearance:"none",alignItems:"center",justifyContent:"center",userSelect:"none",position:"relative",whiteSpace:"nowrap",verticalAlign:"middle",outline:"none"},de,!!ne&&{_focus:$})}),[de,ne]),Ht=function useButtonType($){var ee=X.useState(!$),ne=ee[0],ae=ee[1],de=X.useCallback((function(X){X&&ae("BUTTON"===X.tagName)}),[]);return{ref:de,type:ne?"button":void 0}}(Et),Wt=Ht.ref,qt=Ht.type,Zt={rightIcon:it,leftIcon:nt,iconSpacing:yt,children:tt};return X.createElement(bl.button,chakra_ui_button_esm_extends({disabled:je||Ke,ref:useMergeRefs(ee,Wt),as:Et,type:null!=_t?_t:qt,"data-active":dt(et),"data-loading":dt(Ke),__css:Bt,className:vt("chakra-button",At)},Rt),Ke&&"start"===Ct&&X.createElement(su,{className:"chakra-button__spinner--start",label:ct,placement:"start",spacing:yt},wt),Ke?ct||X.createElement(bl.span,{opacity:0},X.createElement(ButtonContent,Zt)):X.createElement(ButtonContent,Zt),Ke&&"end"===Ct&&X.createElement(su,{className:"chakra-button__spinner--end",label:ct,placement:"end",spacing:yt},wt))}));function ButtonContent($){var ee=$.leftIcon,ne=$.rightIcon,ae=$.children,de=$.iconSpacing;return X.createElement(X.Fragment,null,ee&&X.createElement(hu,{marginEnd:de},ee),ae,ne&&X.createElement(hu,{marginStart:de},ne))}var yu=["icon","children","isRound","aria-label"],wu=chakra_ui_system_esm_forwardRef((function($,ee){var ne=$.icon,ae=$.children,de=$.isRound,fe=$["aria-label"],Ue=chakra_ui_button_esm_objectWithoutPropertiesLoose($,yu),je=ne||ae,Ke=X.isValidElement(je)?X.cloneElement(je,{"aria-hidden":!0,focusable:!1}):null;return X.createElement(gu,chakra_ui_button_esm_extends({padding:"0",borderRadius:de?"full":void 0,ref:ee,"aria-label":fe},Ue),Ke)}));var Su={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ku=X.createContext&&X.createContext(Su),__assign=function(){return __assign=Object.assign||function(X){for(var $,ee=1,ne=arguments.length;ee<ne;ee++)for(var ae in $=arguments[ee])Object.prototype.hasOwnProperty.call($,ae)&&(X[ae]=$[ae]);return X},__assign.apply(this,arguments)},__rest=function(X,$){var ee={};for(var ne in X)Object.prototype.hasOwnProperty.call(X,ne)&&$.indexOf(ne)<0&&(ee[ne]=X[ne]);if(null!=X&&"function"===typeof Object.getOwnPropertySymbols){var ae=0;for(ne=Object.getOwnPropertySymbols(X);ae<ne.length;ae++)$.indexOf(ne[ae])<0&&Object.prototype.propertyIsEnumerable.call(X,ne[ae])&&(ee[ne[ae]]=X[ne[ae]])}return ee};function Tree2Element($){return $&&$.map((function($,ee){return X.createElement($.tag,__assign({key:ee},$.attr),Tree2Element($.child))}))}function iconBase_GenIcon($){return function(ee){return X.createElement(IconBase,__assign({attr:__assign({},$.attr)},ee),Tree2Element($.child))}}function IconBase($){var ee=function elem(ee){var ne,ae=$.attr,de=$.size,fe=$.title,Ue=__rest($,["attr","size","title"]),je=de||ee.size||"1em";return ee.className&&(ne=ee.className),$.className&&(ne=(ne?ne+" ":"")+$.className),X.createElement("svg",__assign({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},ee.attr,ae,Ue,{className:ne,style:__assign(__assign({color:$.color||ee.color},ee.style),$.style),height:je,width:je,xmlns:"http://www.w3.org/2000/svg"}),fe&&X.createElement("title",null,fe),$.children)};return void 0!==ku?X.createElement(ku.Consumer,null,(function(X){return ee(X)})):ee(Su)}function FaGithub(X){return iconBase_GenIcon({tag:"svg",attr:{viewBox:"0 0 496 512"},child:[{tag:"path",attr:{d:"M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"}}]})(X)}function FaLinkedin(X){return iconBase_GenIcon({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"}}]})(X)}var Cu=__webpack_require__(184);var Au=function Navbar_Navbar(){return(0,Cu.jsxs)("div",{className:"navbar",children:[(0,Cu.jsx)("span",{className:"navbar-name",children:"Jason Hoang"}),(0,Cu.jsxs)("div",{className:"navbar-icons",children:[(0,Cu.jsx)(wu,{icon:(0,Cu.jsx)(FaGithub,{}),m:"1",size:"lg",colorScheme:"gray",onClick:function onClick(){return window.open("https://github.com/jsn-hoang")}}),(0,Cu.jsx)(wu,{icon:(0,Cu.jsx)(FaLinkedin,{}),m:"1",size:"lg",colorScheme:"linkedin",onClick:function onClick(){return window.open("https://www.linkedin.com/in/jsn-hoang/")}})]})]})},Mu=__webpack_require__(861),Tu=__webpack_require__(885),Pu=__webpack_require__(762),Lu=__webpack_require__(757),Ou=__webpack_require__.n(Lu),Ru=__webpack_require__(556),Bu=Object.defineProperty,Iu=Object.getOwnPropertySymbols,zu=Object.prototype.hasOwnProperty,Nu=Object.prototype.propertyIsEnumerable,Fu=function __defNormalProp(X,$,ee){return $ in X?Bu(X,$,{enumerable:!0,configurable:!0,writable:!0,value:ee}):X[$]=ee},Uu=function __spreadValues(X,$){for(var ee in $||($={}))zu.call($,ee)&&Fu(X,ee,$[ee]);if(Iu){var ne,ae=(0,Pu.Z)(Iu($));try{for(ae.s();!(ne=ae.n()).done;){ee=ne.value;Nu.call($,ee)&&Fu(X,ee,$[ee])}}catch(de){ae.e(de)}finally{ae.f()}}return X};var Vu={exports:{}},Hu={},Gu=X,Wu=Symbol.for("react.element"),qu=Symbol.for("react.fragment"),Zu=Object.prototype.hasOwnProperty,Xu=Gu.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qu={key:!0,ref:!0,__self:!0,__source:!0};function q(X,$,ee){var ne,ae={},de=null,fe=null;for(ne in void 0!==ee&&(de=""+ee),void 0!==$.key&&(de=""+$.key),void 0!==$.ref&&(fe=$.ref),$)Zu.call($,ne)&&!Qu.hasOwnProperty(ne)&&(ae[ne]=$[ne]);if(X&&X.defaultProps)for(ne in $=X.defaultProps)void 0===ae[ne]&&(ae[ne]=$[ne]);return{$$typeof:Wu,type:X,key:de,ref:fe,props:ae,_owner:Xu.current}}Hu.Fragment=qu,Hu.jsx=q,Hu.jsxs=q,Vu.exports=Hu;var Ku=Vu.exports.jsx,$u=(0,X.forwardRef)((function($,ee){var ne,ae=$,de=ae.scene,fe=ae.style,Ue=ae.onMouseDown,je=ae.onMouseUp,Ke=ae.onMouseHover,et=ae.onKeyDown,tt=ae.onKeyUp,nt=ae.onStart,it=ae.onLookAt,ct=ae.onFollow,dt=ae.onWheel,vt=ae.onLoad,gt=ae.autoRender,yt=void 0!==gt&&gt,_t=function __objRest(X,$){var ee={};for(var ne in X)zu.call(X,ne)&&$.indexOf(ne)<0&&(ee[ne]=X[ne]);if(null!=X&&Iu){var ae,de=(0,Pu.Z)(Iu(X));try{for(de.s();!(ae=de.n()).done;)ne=ae.value,$.indexOf(ne)<0&&Nu.call(X,ne)&&(ee[ne]=X[ne])}catch(fe){de.e(fe)}finally{de.f()}}return ee}(ae,["scene","style","onMouseDown","onMouseUp","onMouseHover","onKeyDown","onKeyUp","onStart","onLookAt","onFollow","onWheel","onLoad","autoRender"]),wt=(0,X.useRef)(null),St=(0,X.useState)(!0),Ct=(0,Tu.Z)(St,2),At=Ct[0],Et=Ct[1];return(0,X.useEffect)((function(){var X;Et(!0);var $=[{name:"mouseDown",cb:Ue},{name:"mouseUp",cb:je},{name:"mouseHover",cb:Ke},{name:"keyDown",cb:et},{name:"keyUp",cb:tt},{name:"start",cb:nt},{name:"lookAt",cb:it},{name:"follow",cb:ct},{name:"scroll",cb:dt}];if(wt.current){var ee=function(){var ee=(0,Mu.Z)(Ou().mark((function _callee(){var ee,ne,ae;return Ou().wrap((function _callee$(fe){for(;;)switch(fe.prev=fe.next){case 0:return fe.next=2,X.load(de);case 2:ee=(0,Pu.Z)($);try{for(ee.s();!(ne=ee.n()).done;)(ae=ne.value).cb&&X.addEventListener(ae.name,ae.cb)}catch(Ue){ee.e(Ue)}finally{ee.f()}Et(!1),null==vt||vt(X);case 6:case"end":return fe.stop()}}),_callee)})));return function init(){return ee.apply(this,arguments)}}();X=new Ru.M(wt.current,{autoRender:yt}),ee()}return function(){var ee,ne=(0,Pu.Z)($);try{for(ne.s();!(ee=ne.n()).done;){var ae=ee.value;ae.cb&&X.removeEventListener(ae.name,ae.cb)}}catch(de){ne.e(de)}finally{ne.f()}X.dispose()}}),[de]),Ku("canvas",Uu({ref:(ne=[ee,wt],function(X){ne.forEach((function($){"function"===typeof $?$(X):null!=$&&($.current=X)}))}),style:Uu({display:At?"none":"block"},fe)},_t))}));var ec=function Intro_Intro(){return(0,Cu.jsxs)("div",{className:"intro",children:[(0,Cu.jsxs)("div",{className:"intro-text",children:[(0,Cu.jsx)("h1",{className:"intro-greeting",children:"Hello!"}),(0,Cu.jsx)("p",{className:"intro-sub-greeting",children:"Welcome to my virtual home."})]}),(0,Cu.jsx)("div",{className:"intro-model",children:(0,Cu.jsx)($u,{scene:"https://prod.spline.design/13tgrogdzr14GaVd/scene.splinecode"})})]})};var bc=function About_About(){return(0,Cu.jsxs)("div",{className:"about",children:[(0,Cu.jsxs)("div",{className:"about-text",children:[(0,Cu.jsx)("div",{className:"heading",children:(0,Cu.jsx)("span",{className:"about-heading",children:"a bit about me"})}),(0,Cu.jsxs)("p",{className:"about-body",children:["I am a fourth-year Computing Science major at the ",(0,Cu.jsx)("a",{href:"https://www.ualberta.ca/about/index.html",children:"University of Alberta"}),". My interest in programming encompasses anything from machine learning and artificial intelligence to web and game development, and I enjoy trying to learn new things. Some of my other hobbies include basketball, video games, reading, and chess."]})]}),(0,Cu.jsx)("div",{id:"about-picture",children:(0,Cu.jsx)("img",{src:"assets/chaosonic47.png",alt:"Jason Hoang"})})]})};function chakra_ui_icon_esm_extends(){return chakra_ui_icon_esm_extends=Object.assign||function(X){for(var $=1;$<arguments.length;$++){var ee=arguments[$];for(var ne in ee)Object.prototype.hasOwnProperty.call(ee,ne)&&(X[ne]=ee[ne])}return X},chakra_ui_icon_esm_extends.apply(this,arguments)}var _c=["as","viewBox","color","focusable","children","className","__css"],kc={path:X.createElement("g",{stroke:"currentColor",strokeWidth:"1.5"},X.createElement("path",{strokeLinecap:"round",fill:"none",d:"M9,9a3,3,0,1,1,4,2.829,1.5,1.5,0,0,0-1,1.415V14.25"}),X.createElement("path",{fill:"currentColor",strokeLinecap:"round",d:"M12,17.25a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,17.25h0"}),X.createElement("circle",{fill:"none",strokeMiterlimit:"10",cx:"12",cy:"12",r:"11.25"})),viewBox:"0 0 24 24"},Cc=chakra_ui_system_esm_forwardRef((function($,ee){var ne=$.as,ae=$.viewBox,de=$.color,fe=void 0===de?"currentColor":de,Ue=$.focusable,je=void 0!==Ue&&Ue,Ke=$.children,et=$.className,tt=$.__css,nt=function chakra_ui_icon_esm_objectWithoutPropertiesLoose(X,$){if(null==X)return{};var ee,ne,ae={},de=Object.keys(X);for(ne=0;ne<de.length;ne++)ee=de[ne],$.indexOf(ee)>=0||(ae[ee]=X[ee]);return ae}($,_c),it={ref:ee,focusable:je,className:vt("chakra-icon",et),__css:chakra_ui_icon_esm_extends({w:"1em",h:"1em",display:"inline-block",lineHeight:"1em",flexShrink:0,color:fe},tt)},ct=null!=ae?ae:kc.viewBox;if(ne&&"string"!==typeof ne)return X.createElement(bl.svg,chakra_ui_icon_esm_extends({as:ne},it,nt));var dt=null!=Ke?Ke:kc.path;return X.createElement(bl.svg,chakra_ui_icon_esm_extends({verticalAlign:"middle",viewBox:ct},it,nt),dt)}));function DiAndroid(X){return iconBase_GenIcon({tag:"svg",attr:{version:"1.1",viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M6.802 20.283c0 1.23-0.857 2.237-1.904 2.237s-1.905-1.006-1.905-2.237v-7.321c0-1.23 0.857-2.237 1.905-2.237s1.904 1.007 1.904 2.237v7.321zM29.007 20.283c0 1.23-0.857 2.237-1.905 2.237s-1.905-1.006-1.905-2.237v-7.321c0-1.23 0.857-2.237 1.905-2.237s1.905 1.007 1.905 2.237v7.321zM20.164 3.649l1.222-2.193c0.1-0.179 0.070-0.388-0.065-0.463s-0.329 0.009-0.428 0.188l-1.25 2.244c-1.115-0.439-2.364-0.684-3.684-0.684-1.33 0-2.588 0.25-3.71 0.695l-1.256-2.254c-0.1-0.179-0.293-0.264-0.428-0.188s-0.165 0.284-0.065 0.463l1.228 2.204c-2.555 1.2-4.276 3.453-4.276 6.035 0 0.262 0.019 0.521 0.053 0.776h16.909c0.035-0.255 0.053-0.513 0.053-0.776 0-2.59-1.732-4.849-4.301-6.046zM12.097 7.477c-0.411 0-0.744-0.333-0.744-0.744s0.333-0.744 0.744-0.744 0.744 0.333 0.744 0.744c0 0.411-0.333 0.744-0.744 0.744zM19.861 7.477c-0.411 0-0.744-0.333-0.744-0.744s0.333-0.744 0.744-0.744 0.744 0.333 0.744 0.744c0 0.411-0.333 0.744-0.744 0.744zM7.45 11.211v12.471h0.007c0.087 1.053 1.056 1.89 2.23 1.89h12.541c1.173 0 2.142-0.837 2.23-1.89h0.007v-12.471h-17.014zM14.74 25.51v3.858c0 1.23-0.857 2.237-1.905 2.237s-1.904-1.007-1.904-2.237v-3.855zM21.088 25.508v3.86c0 1.23-0.857 2.237-1.905 2.237s-1.905-1.007-1.905-2.237v-3.86z"}}]})(X)}function DiCss3(X){return iconBase_GenIcon({tag:"svg",attr:{version:"1.1",viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M16.017 21.044v0zM4.743 3.519l2.049 22.981 9.194 2.552 9.22-2.556 2.051-22.977h-22.514zM23 8.775l-0.693 7.767h-0l-0.48 5.359-0.042 0.476-5.781 1.603-5.773-1.603-0.395-4.426h2.829l0.201 2.248 3.142 0.847 0.008-0.002 0.002-0 3.134-0.846 0.329-3.655-6.579 0-0.056-0.633-0.129-1.429-0.067-0.756 7.081-0 0.258-2.886h-10.786l-0.056-0.634-0.129-1.429-0.067-0.756h14.118l-0.068 0.756z"}}]})(X)}function DiDart(X){return iconBase_GenIcon({tag:"svg",attr:{version:"1.1",viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M23.116 23.609c-0.009 0.014-0.025 0.016-0.039 0.020-0.056 0.070-0.142 0.089-0.218 0.122-0.816 0.358-1.63 0.722-2.444 1.084-0.068 0.030-0.129 0.021-0.195-0.001-0.421-0.142-0.838-0.293-1.257-0.441-0.511-0.181-1.021-0.361-1.532-0.541-1.025-0.361-2.050-0.722-3.074-1.085-0.615-0.218-1.232-0.433-1.847-0.65-0.913-0.323-1.829-0.641-2.741-0.968-0.145-0.052-0.299-0.082-0.43-0.168-0.007-0.006-0.014-0.013-0.021-0.019-0.030-0.042-0.041-0.092-0.051-0.141-0.052-0.248-0.081-0.497-0.084-0.751-0.044-3.38-0.005-6.759-0.019-10.139-0-0.055 0.009-0.107 0.018-0.16-0-0.011 0.006-0.017 0.015-0.021 0.008-0.007 0.017-0.008 0.026-0.004 0.052 0.027 0.087 0.074 0.127 0.114 4.537 4.537 9.074 9.074 13.611 13.61 0.043 0.043 0.082 0.090 0.137 0.119 0.008 0.006 0.014 0.013 0.019 0.021zM23.12 23.518c-0.022 0.003-0.039-0.005-0.054-0.020-0.021-0.022-0.043-0.043-0.064-0.064-4.555-4.555-9.109-9.109-13.664-13.664-0.033-0.033-0.071-0.063-0.096-0.104 0.033-0.027 0.072-0.034 0.113-0.035 0.037-0.001 0.074-0.001 0.111-0.001 3.307 0 6.613-0.001 9.92 0.001 0.296 0 0.591 0.020 0.882 0.084 0.059 0.013 0.119 0.025 0.166 0.067 0.007 0.005 0.014 0.011 0.022 0.016 0.086 0.139 0.121 0.299 0.175 0.45 0.433 1.232 0.871 2.462 1.302 3.694 0.278 0.794 0.56 1.587 0.84 2.38 0.454 1.285 0.909 2.57 1.36 3.856 0.058 0.165 0.111 0.332 0.177 0.494 0.032 0.080 0.022 0.153-0.013 0.233-0.305 0.678-0.604 1.359-0.905 2.039-0.071 0.16-0.141 0.321-0.214 0.48-0.015 0.033-0.029 0.068-0.058 0.093zM8.986 21.106c0.069 0.002 0.127 0.038 0.189 0.060 0.294 0.103 0.589 0.205 0.883 0.308 0.601 0.212 1.202 0.425 1.804 0.637 0.532 0.187 1.065 0.372 1.597 0.559 0.354 0.124 0.707 0.251 1.060 0.375 0.624 0.22 1.249 0.439 1.874 0.659 0.34 0.12 0.68 0.241 1.020 0.361 0.634 0.224 1.269 0.446 1.904 0.67 0.35 0.123 0.7 0.247 1.050 0.374 0.064 0.023 0.117 0.019 0.18-0.010 0.28-0.128 0.564-0.249 0.846-0.374 0.212-0.093 0.422-0.189 0.634-0.283 0.343-0.152 0.686-0.302 1.029-0.453 0.090-0.040 0.18-0.079 0.269-0.118-0.169 0.524-0.338 1.048-0.507 1.572-0.102 0.317-0.203 0.635-0.304 0.952-0.068 0.214-0.137 0.428-0.204 0.642-0.030 0.096-0.030 0.098-0.131 0.098-0.453 0-0.906-0.001-1.359-0.001-1.279-0.001-2.557 0.009-3.835-0.005-0.983-0.011-1.966-0.003-2.949-0.009-0.061-0-0.106-0.017-0.148-0.061-0.067-0.072-0.139-0.139-0.209-0.209-1.036-1.030-2.072-2.060-3.108-3.090-0.117-0.116-0.233-0.234-0.351-0.349-0.285-0.277-0.501-0.605-0.691-0.95-0.23-0.42-0.413-0.86-0.538-1.323-0.003-0.010-0.003-0.021-0.004-0.031zM23.343 23.845c0.014-0.107 0.078-0.194 0.118-0.29 0.099-0.239 0.207-0.475 0.312-0.712 0.091-0.205 0.183-0.409 0.274-0.614 0.126-0.285 0.251-0.57 0.377-0.855 0.043-0.096 0.085-0.192 0.132-0.286 0.029-0.057 0.037-0.108 0.014-0.171-0.147-0.408-0.293-0.817-0.437-1.227-0.075-0.211-0.146-0.424-0.22-0.635-0.177-0.506-0.354-1.011-0.532-1.516-0.12-0.34-0.241-0.68-0.361-1.020-0.175-0.495-0.349-0.991-0.523-1.486-0.119-0.337-0.239-0.673-0.358-1.010-0.184-0.522-0.366-1.044-0.55-1.566-0.12-0.34-0.241-0.68-0.361-1.020-0.175-0.495-0.347-0.991-0.524-1.485-0.051-0.142-0.107-0.281-0.141-0.428 0.214 0.043 0.418 0.118 0.621 0.197 0.509 0.2 0.988 0.455 1.417 0.797 0.195 0.156 0.365 0.34 0.541 0.516 0.256 0.255 0.509 0.514 0.765 0.77 0.821 0.823 1.641 1.647 2.463 2.469 0.051 0.051 0.073 0.102 0.072 0.174-0.002 1.826-0.002 3.653-0.003 5.479-0 0.941-0.002 1.883-0.003 2.824 0 0.011 0 0.021 0 0.032-0.001 0.085 0.016 0.085-0.084 0.117-0.16 0.051-0.321 0.102-0.481 0.153-0.812 0.259-1.624 0.519-2.435 0.778-0.023 0.007-0.047 0.012-0.071 0.018-0.008-0.002-0.015-0.003-0.023-0.005zM20.603 9.57c-0.124-0.023-0.247-0.047-0.371-0.069-0.107-0.019-0.214-0.031-0.323-0.037-0.709-0.039-1.418-0.018-2.127-0.019-2.912-0.002-5.823-0.001-8.735-0-0.042 0-0.084 0.002-0.126 0.004-0.007-0.001-0.014-0.002-0.021-0.004 0.183-0.136 0.377-0.256 0.567-0.382 0.491-0.327 0.984-0.651 1.476-0.977 1.025-0.678 2.049-1.358 3.074-2.036 0.524-0.347 1.050-0.691 1.573-1.040 0.093-0.062 0.177-0.137 0.287-0.173 0.226-0.076 0.45-0.056 0.673 0.009 0.31 0.089 0.578 0.252 0.816 0.467 0.088 0.080 0.171 0.167 0.256 0.251 0.778 0.772 1.556 1.545 2.335 2.316 0.059 0.058 0.1 0.121 0.127 0.2 0.167 0.484 0.34 0.967 0.51 1.45 0.005 0.013 0.007 0.027 0.010 0.041zM8.884 9.468c0.029 0.042 0.015 0.089 0.015 0.133 0.001 3.413 0.001 6.826 0.001 10.239 0 0.214 0.019 0.427 0.026 0.64 0.006 0.191 0.046 0.381 0.091 0.567 0.008 0.032 0.027 0.065 0.009 0.1-0.252-0.087-0.504-0.173-0.756-0.261-0.255-0.089-0.509-0.18-0.765-0.268-0.058-0.020-0.105-0.051-0.148-0.095-0.843-0.852-1.688-1.701-2.53-2.553-0.277-0.28-0.473-0.609-0.556-0.999-0.036-0.171-0.040-0.341 0.009-0.511 0.021-0.075 0.052-0.146 0.097-0.209 0.303-0.423 0.58-0.863 0.867-1.295 1.113-1.677 2.222-3.356 3.333-5.034 0.101-0.152 0.203-0.303 0.305-0.455z"}}]})(X)}function DiFirebase(X){return iconBase_GenIcon({tag:"svg",attr:{version:"1.1",viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M13.249 6.953c-2.833 0.351-4.585 1.184-4.794 2.293-0.038 0.18-0.038 1.184-0.019 2.236 0.038 1.573 0.066 1.971 0.208 2.226 0.152 0.294 0.152 0.341 0 0.739-0.142 0.369-0.152 0.654-0.104 2.188 0.038 0.966 0.114 1.904 0.18 2.075 0.085 0.237 0.085 0.369 0 0.559-0.142 0.303-0.152 2.975-0.019 3.78 0.057 0.379 0.18 0.673 0.36 0.9 0.843 1.052 3.079 1.677 6.366 1.781 4.083 0.133 7.2-0.635 7.939-1.952 0.199-0.341 0.208-0.493 0.208-2.226 0-1.468-0.028-1.933-0.151-2.226-0.123-0.313-0.123-0.417-0.028-0.597 0.085-0.161 0.114-0.71 0.095-2.018-0.019-1.876-0.047-2.151-0.256-2.454-0.104-0.152-0.095-0.227 0.019-0.464 0.123-0.227 0.152-0.644 0.142-2.302-0.009-1.175-0.057-2.15-0.123-2.33-0.256-0.786-1.393-1.506-2.937-1.876-1.895-0.445-4.964-0.587-7.086-0.332zM13.685 7.844c-0.028 0.047 0.502 0.057 1.213 0.028 1.052-0.038 3.827 0.123 3.733 0.218-0.019 0.019-0.445 0.076-0.957 0.133-0.521 0.057-1.023 0.152-1.137 0.208-0.189 0.104-0.189 0.114-0.028 0.237 0.161 0.114 0.151 0.123-0.095 0.18-0.777 0.161-1.279 0.36-1.459 0.587-0.455 0.578-0.057 1.156 0.919 1.364 0.739 0.152 3.657 0.057 4.462-0.142 0.891-0.227 1.345-0.483 1.345-0.767 0-0.388-0.569-0.673-1.942-0.957-0.73-0.142-0.265-0.171 0.644-0.028 0.9 0.142 1.63 0.417 1.866 0.72 0.171 0.227 0.189 0.379 0.189 2.027 0 2.037 0.019 1.989-0.909 2.416-1.345 0.635-3.534 0.872-7.333 0.805-0.72-0.019-0.777-0.028-0.578-0.142s0.133-0.133-0.663-0.18c-1.108-0.066-2.075-0.341-2.529-0.701-0.55-0.436-0.9-1.222-0.947-2.15-0.047-0.881 0.123-1.895 0.303-1.829 0.066 0.028 0.208-0.133 0.341-0.369 0.379-0.72 1.203-1.213 2.558-1.554 0.805-0.199 1.080-0.227 1.004-0.104zM10.123 14.949c0 0.388 0.189 0.549 0.928 0.767 2.672 0.805 8.697 0.701 10.421-0.18 0.351-0.18 0.398-0.237 0.398-0.53 0-0.36 0.095-0.417 0.322-0.18 0.18 0.18 0.171 0.019 0.151 1.98l-0.009 1.611-0.275 0.256c-0.587 0.54-2.624 0.966-5.116 1.080-3.088 0.142-6.622-0.464-7.162-1.232-0.104-0.152-0.133-0.559-0.133-1.847 0-1.402 0.019-1.677 0.161-1.828 0.218-0.246 0.313-0.208 0.313 0.104zM10.407 20.368c0.815 0.597 4.86 0.995 7.598 0.758 1.506-0.133 2.804-0.379 3.429-0.654 0.417-0.189 0.436-0.218 0.436-0.578 0-0.265 0.038-0.388 0.133-0.388 0.322 0 0.369 0.256 0.35 1.999-0.009 0.947-0.047 1.772-0.066 1.838-0.076 0.189-0.881 0.587-1.554 0.758-1.146 0.303-2.217 0.436-3.932 0.493-3.164 0.104-6.139-0.379-6.944-1.127-0.199-0.199-0.208-0.265-0.208-1.914 0-1.639 0.009-1.715 0.218-1.933l0.208-0.227 0.047 0.407c0.038 0.284 0.114 0.445 0.284 0.568z"}}]})(X)}function DiHtml5(X){return iconBase_GenIcon({tag:"svg",attr:{version:"1.1",viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M4.665 3.411l2.063 23.176 9.258 2.574 9.284-2.578 2.065-23.172h-22.671zM8.951 8.911l-0.068-0.763h7.107v2.842h-4.005l0.259 2.911h3.746v2.842h-6.341l-0.698-7.833zM22.518 14.665l-0.667 7.483-0.043 0.48-5.822 1.616-5.814-1.616-0.398-4.463h2.849l0.202 2.267 3.163 0.854 3.165-0.856 0.329-3.686h-3.485v-2.842h6.587l-0.069 0.763zM23.032 8.911l-0.129 1.441-0.057 0.639h-6.846v-2.842h7.1l-0.068 0.762z"}}]})(X)}function DiJava(X){return iconBase_GenIcon({tag:"svg",attr:{version:"1.1",viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M12.557 23.22c0 0-0.982 0.571 0.699 0.765 2.037 0.232 3.079 0.199 5.324-0.226 0 0 0.59 0.37 1.415 0.691-5.033 2.157-11.39-0.125-7.437-1.23zM11.942 20.405c0 0-1.102 0.816 0.581 0.99 2.176 0.224 3.895 0.243 6.869-0.33 0 0 0.411 0.417 1.058 0.645-6.085 1.779-12.863 0.14-8.508-1.305zM17.127 15.63c1.24 1.428-0.326 2.713-0.326 2.713s3.149-1.625 1.703-3.661c-1.351-1.898-2.386-2.841 3.221-6.093 0 0-8.801 2.198-4.598 7.042zM23.783 25.302c0 0 0.727 0.599-0.801 1.062-2.905 0.88-12.091 1.146-14.643 0.035-0.917-0.399 0.803-0.953 1.344-1.069 0.564-0.122 0.887-0.1 0.887-0.1-1.020-0.719-6.594 1.411-2.831 2.021 10.262 1.664 18.706-0.749 16.044-1.95zM13.029 17.489c0 0-4.673 1.11-1.655 1.513 1.274 0.171 3.814 0.132 6.181-0.066 1.934-0.163 3.876-0.51 3.876-0.51s-0.682 0.292-1.175 0.629c-4.745 1.248-13.911 0.667-11.272-0.609 2.232-1.079 4.046-0.956 4.046-0.956zM21.412 22.174c4.824-2.506 2.593-4.915 1.037-4.591-0.382 0.079-0.552 0.148-0.552 0.148s0.142-0.222 0.412-0.318c3.079-1.083 5.448 3.193-0.994 4.887-0 0 0.075-0.067 0.097-0.126zM18.503 3.337c0 0 2.671 2.672-2.534 6.781-4.174 3.296-0.952 5.176-0.002 7.323-2.436-2.198-4.224-4.133-3.025-5.934 1.761-2.644 6.638-3.925 5.56-8.17zM13.503 28.966c4.63 0.296 11.74-0.164 11.908-2.355 0 0-0.324 0.831-3.826 1.49-3.952 0.744-8.826 0.657-11.716 0.18 0 0 0.592 0.49 3.635 0.685z"}}]})(X)}function DiJavascript(X){return iconBase_GenIcon({tag:"svg",attr:{version:"1.1",viewBox:"0 0 32 32"},child:[{tag:"path",attr:{d:"M4.698 3.419l2.057 23.073 9.231 2.563 9.256-2.566 2.059-23.069h-22.604zM13.226 9.394l-0.409 4.441 9.671 0.001-0.069 0.76-0.665 7.45-0.042 0.478-5.804 1.609-5.796-1.609-0.396-4.443h2.84l0.202 2.257 3.154 0.85 3.156-0.852 0.328-3.67-9.671-0.001 0.069-0.76 0.665-7.45 0.209-2.086h11.287l0.131 1.598 0.403 4.453h-2.841l-0.262-2.922-2.889-0.174h-0.515v-0.004l-2.755 0.074z"}}]})(X)}function DiReact(X){return iconBase_GenIcon({tag:"svg",attr:{version:"1.1",viewBox:"0 0 34 32"},child:[{tag:"path",attr:{d:"M19.314 15.987c0 1.321-1.071 2.392-2.392 2.392s-2.392-1.071-2.392-2.392c0-1.321 1.071-2.392 2.392-2.392s2.392 1.071 2.392 2.392z"}},{tag:"path",attr:{d:"M16.922 24.783c1.878 1.826 3.729 2.906 5.221 2.906 0.489 0 0.952-0.103 1.337-0.334 1.337-0.772 1.826-2.701 1.363-5.453-0.077-0.489-0.18-0.977-0.309-1.492 0.514-0.154 0.977-0.309 1.44-0.463 2.598-1.003 4.038-2.392 4.038-3.909 0-1.543-1.44-2.932-4.038-3.909-0.463-0.18-0.926-0.334-1.44-0.463 0.129-0.514 0.232-1.003 0.309-1.492 0.437-2.803-0.051-4.758-1.389-5.53-0.386-0.231-0.849-0.334-1.337-0.334-1.466 0-3.344 1.080-5.221 2.906-1.852-1.826-3.704-2.906-5.195-2.906-0.489 0-0.952 0.103-1.337 0.334-1.337 0.772-1.826 2.701-1.363 5.453 0.077 0.489 0.18 0.977 0.309 1.492-0.514 0.154-0.977 0.309-1.44 0.463-2.598 1.003-4.038 2.392-4.038 3.909 0 1.543 1.44 2.932 4.038 3.909 0.463 0.18 0.926 0.334 1.44 0.463-0.129 0.514-0.232 1.003-0.309 1.492-0.437 2.752 0.051 4.707 1.363 5.453 0.386 0.232 0.849 0.334 1.337 0.334 1.492 0.051 3.344-1.029 5.221-2.829v0zM15.481 21.311c0.463 0.026 0.952 0.026 1.44 0.026s0.977 0 1.44-0.026c-0.463 0.617-0.952 1.183-1.44 1.723-0.489-0.54-0.977-1.106-1.44-1.723zM12.292 18.662c0.257 0.437 0.489 0.849 0.772 1.26-0.797-0.103-1.543-0.232-2.263-0.386 0.232-0.694 0.489-1.415 0.797-2.135 0.206 0.411 0.437 0.849 0.694 1.26zM10.8 12.463c0.72-0.154 1.466-0.283 2.263-0.386-0.257 0.412-0.514 0.823-0.772 1.26s-0.489 0.849-0.694 1.286c-0.334-0.746-0.592-1.466-0.797-2.161zM12.215 15.987c0.334-0.694 0.694-1.389 1.106-2.083 0.386-0.669 0.823-1.337 1.26-2.006 0.772-0.051 1.543-0.077 2.341-0.077 0.823 0 1.595 0.026 2.341 0.077 0.463 0.669 0.874 1.337 1.26 2.006 0.412 0.694 0.772 1.389 1.106 2.083-0.334 0.694-0.694 1.389-1.106 2.083-0.386 0.669-0.823 1.337-1.26 2.006-0.772 0.051-1.543 0.077-2.341 0.077-0.823 0-1.595-0.026-2.341-0.077-0.463-0.669-0.874-1.337-1.26-2.006-0.412-0.695-0.772-1.389-1.106-2.083v0zM22.272 14.598l-0.694-1.286c-0.257-0.437-0.489-0.849-0.772-1.26 0.797 0.103 1.543 0.232 2.263 0.386-0.231 0.72-0.489 1.44-0.797 2.161v0zM22.272 17.376c0.309 0.72 0.566 1.44 0.797 2.135-0.72 0.154-1.466 0.283-2.263 0.386 0.257-0.412 0.514-0.823 0.772-1.26 0.232-0.386 0.463-0.823 0.694-1.26v0zM22.863 26.301c-0.206 0.129-0.463 0.18-0.746 0.18-1.26 0-2.829-1.029-4.372-2.572 0.746-0.797 1.466-1.698 2.186-2.701 1.209-0.103 2.366-0.283 3.447-0.54 0.129 0.463 0.206 0.926 0.283 1.389 0.36 2.186 0.077 3.755-0.797 4.244zM24.201 12.746c2.881 0.823 4.604 2.083 4.604 3.241 0 1.003-1.183 2.006-3.266 2.804-0.412 0.154-0.874 0.309-1.337 0.437-0.334-1.055-0.746-2.135-1.26-3.241 0.514-1.106 0.952-2.186 1.26-3.241v0zM22.143 5.493c0.283 0 0.514 0.051 0.746 0.18 0.849 0.489 1.157 2.032 0.797 4.244-0.077 0.437-0.18 0.9-0.283 1.389-1.080-0.232-2.238-0.412-3.447-0.54-0.694-1.003-1.44-1.903-2.186-2.701 1.543-1.518 3.112-2.572 4.372-2.572zM18.362 10.663c-0.463-0.026-0.952-0.026-1.44-0.026s-0.977 0-1.44 0.026c0.463-0.617 0.952-1.183 1.44-1.723 0.489 0.54 0.977 1.132 1.44 1.723v0zM10.98 5.673c0.206-0.129 0.463-0.18 0.746-0.18 1.26 0 2.829 1.029 4.372 2.572-0.746 0.797-1.466 1.697-2.186 2.701-1.209 0.103-2.366 0.283-3.447 0.54-0.129-0.463-0.206-0.926-0.283-1.389-0.36-2.186-0.077-3.729 0.797-4.244v0zM9.643 19.228c-2.881-0.823-4.604-2.083-4.604-3.241 0-1.003 1.183-2.006 3.266-2.803 0.412-0.154 0.874-0.309 1.337-0.437 0.334 1.055 0.746 2.135 1.26 3.241-0.514 1.106-0.952 2.212-1.26 3.241zM10.183 22.057c0.077-0.437 0.18-0.9 0.283-1.389 1.080 0.232 2.238 0.412 3.447 0.54 0.694 1.003 1.44 1.903 2.186 2.701-1.543 1.517-3.112 2.572-4.372 2.572-0.283 0-0.514-0.051-0.746-0.18-0.875-0.489-1.157-2.058-0.797-4.244z"}}]})(X)}function RiFlutterFill(X){return iconBase_GenIcon({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"g",attr:{},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"}},{tag:"path",attr:{fillRule:"nonzero",d:"M13.503 2.001l-10 10 3.083 3.083 13.08-13.083h-6.163zm-.006 9.198L8.122 16.62 13.494 22h6.189l-5.387-5.4 5.389-5.4h-6.188z"}}]}]})(X)}var Ac=function Projects_Projects(){return(0,Cu.jsxs)("div",{className:"projects",children:[(0,Cu.jsx)("span",{className:"projects-heading",children:"some of my software projects..."}),(0,Cu.jsxs)("div",{className:"projects-grid",children:[(0,Cu.jsxs)("div",{className:"grid-item grid-one",children:[(0,Cu.jsx)("div",{className:"icon-buttons",children:(0,Cu.jsx)(wu,{icon:(0,Cu.jsx)(FaGithub,{}),m:"1",variant:"ghost",isRound:"true",onClick:function onClick(){return window.open("https://github.com/jsn-hoang/habit-tracker")}})}),(0,Cu.jsx)("h3",{className:"grid-item-title",children:"Habit Tracker"}),(0,Cu.jsx)("p",{children:"An Android application that helps users build good habits and track their progress, with additional features such as following, geolocation, history, etc."}),(0,Cu.jsxs)("div",{className:"icons",children:[(0,Cu.jsx)(Cc,{p:"4",as:DiAndroid,w:"16",h:"16"}),(0,Cu.jsx)(Cc,{p:"4",as:DiJava,w:"16",h:"16"}),(0,Cu.jsx)(Cc,{p:"4",as:DiFirebase,w:"16",h:"16"})]})]}),(0,Cu.jsxs)("div",{className:"grid-item grid-two",children:[(0,Cu.jsx)("div",{className:"icon-buttons",children:(0,Cu.jsx)(wu,{icon:(0,Cu.jsx)(FaGithub,{}),m:"1",variant:"ghost",isRound:"true",onClick:function onClick(){return window.open("https://github.com/jsn-hoang/todoapp")}})}),(0,Cu.jsx)("h3",{className:"grid-item-title",children:"To Do App"}),(0,Cu.jsx)("p",{children:"A Flutter to-do app with smooth animations and a dark UI theme that uses the shared_preferences package for persistent store of data."}),(0,Cu.jsxs)("div",{className:"icons",children:[(0,Cu.jsx)(Cc,{p:"4",as:RiFlutterFill,w:"16",h:"16"}),(0,Cu.jsx)(Cc,{p:"4",as:DiDart,w:"16",h:"16"})]})]}),(0,Cu.jsxs)("div",{className:"grid-item grid-three",children:[(0,Cu.jsx)("div",{className:"icon-buttons",children:(0,Cu.jsx)(wu,{icon:(0,Cu.jsx)(FaGithub,{}),m:"1",variant:"ghost",isRound:"true",onClick:function onClick(){return window.open("https://github.com/jsn-hoang/jsn")}})}),(0,Cu.jsx)("h3",{className:"grid-item-title",children:"jsn"}),(0,Cu.jsx)("p",{children:"My personal website (you're on it right now!) built with React, leveraging Chakra UI and Spline."}),(0,Cu.jsxs)("div",{className:"icons",children:[(0,Cu.jsx)(Cc,{p:"4",as:DiHtml5,w:"16",h:"16"}),(0,Cu.jsx)(Cc,{p:"4",as:DiCss3,w:"16",h:"16"}),(0,Cu.jsx)(Cc,{p:"4",as:DiJavascript,w:"16",h:"16"}),(0,Cu.jsx)(Cc,{p:"4",as:DiReact,w:"16",h:"16"})]})]})]})]})};var Dc=function Credits_Credits(){return(0,Cu.jsx)("div",{className:"credits",children:"\xa9 2022 Jason Hoang. All rights reserved."})};var Bc=function App_App(){return(0,Cu.jsxs)("div",{className:"App",children:[(0,Cu.jsx)(Au,{}),(0,Cu.jsx)(ec,{}),(0,Cu.jsx)(bc,{}),(0,Cu.jsx)(Ac,{}),(0,Cu.jsx)(Dc,{})]})},Wc=function CSSReset(){return X.createElement(As,{styles:'\n      html {\n        line-height: 1.5;\n        -webkit-text-size-adjust: 100%;\n        font-family: system-ui, sans-serif;\n        -webkit-font-smoothing: antialiased;\n        text-rendering: optimizeLegibility;\n        -moz-osx-font-smoothing: grayscale;\n        touch-action: manipulation;\n      }\n\n      body {\n        position: relative;\n        min-height: 100%;\n        font-feature-settings: \'kern\';\n      }\n\n      *,\n      *::before,\n      *::after {\n        border-width: 0;\n        border-style: solid;\n        box-sizing: border-box;\n      }\n\n      main {\n        display: block;\n      }\n\n      hr {\n        border-top-width: 1px;\n        box-sizing: content-box;\n        height: 0;\n        overflow: visible;\n      }\n\n      pre,\n      code,\n      kbd,\n      samp {\n        font-family: SFMono-Regular,  Menlo, Monaco, Consolas, monospace;\n        font-size: 1em;\n      }\n\n      a {\n        background-color: transparent;\n        color: inherit;\n        text-decoration: inherit;\n      }\n\n      abbr[title] {\n        border-bottom: none;\n        text-decoration: underline;\n        -webkit-text-decoration: underline dotted;\n        text-decoration: underline dotted;\n      }\n\n      b,\n      strong {\n        font-weight: bold;\n      }\n\n      small {\n        font-size: 80%;\n      }\n\n      sub,\n      sup {\n        font-size: 75%;\n        line-height: 0;\n        position: relative;\n        vertical-align: baseline;\n      }\n\n      sub {\n        bottom: -0.25em;\n      }\n\n      sup {\n        top: -0.5em;\n      }\n\n      img {\n        border-style: none;\n      }\n\n      button,\n      input,\n      optgroup,\n      select,\n      textarea {\n        font-family: inherit;\n        font-size: 100%;\n        line-height: 1.15;\n        margin: 0;\n      }\n\n      button,\n      input {\n        overflow: visible;\n      }\n\n      button,\n      select {\n        text-transform: none;\n      }\n\n      button::-moz-focus-inner,\n      [type="button"]::-moz-focus-inner,\n      [type="reset"]::-moz-focus-inner,\n      [type="submit"]::-moz-focus-inner {\n        border-style: none;\n        padding: 0;\n      }\n\n      fieldset {\n        padding: 0.35em 0.75em 0.625em;\n      }\n\n      legend {\n        box-sizing: border-box;\n        color: inherit;\n        display: table;\n        max-width: 100%;\n        padding: 0;\n        white-space: normal;\n      }\n\n      progress {\n        vertical-align: baseline;\n      }\n\n      textarea {\n        overflow: auto;\n      }\n\n      [type="checkbox"],\n      [type="radio"] {\n        box-sizing: border-box;\n        padding: 0;\n      }\n\n      [type="number"]::-webkit-inner-spin-button,\n      [type="number"]::-webkit-outer-spin-button {\n        -webkit-appearance: none !important;\n      }\n\n      input[type="number"] {\n        -moz-appearance: textfield;\n      }\n\n      [type="search"] {\n        -webkit-appearance: textfield;\n        outline-offset: -2px;\n      }\n\n      [type="search"]::-webkit-search-decoration {\n        -webkit-appearance: none !important;\n      }\n\n      ::-webkit-file-upload-button {\n        -webkit-appearance: button;\n        font: inherit;\n      }\n\n      details {\n        display: block;\n      }\n\n      summary {\n        display: list-item;\n      }\n\n      template {\n        display: none;\n      }\n\n      [hidden] {\n        display: none !important;\n      }\n\n      body,\n      blockquote,\n      dl,\n      dd,\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6,\n      hr,\n      figure,\n      p,\n      pre {\n        margin: 0;\n      }\n\n      button {\n        background: transparent;\n        padding: 0;\n      }\n\n      fieldset {\n        margin: 0;\n        padding: 0;\n      }\n\n      ol,\n      ul {\n        margin: 0;\n        padding: 0;\n      }\n\n      textarea {\n        resize: vertical;\n      }\n\n      button,\n      [role="button"] {\n        cursor: pointer;\n      }\n\n      button::-moz-focus-inner {\n        border: 0 !important;\n      }\n\n      table {\n        border-collapse: collapse;\n      }\n\n      h1,\n      h2,\n      h3,\n      h4,\n      h5,\n      h6 {\n        font-size: inherit;\n        font-weight: inherit;\n      }\n\n      button,\n      input,\n      optgroup,\n      select,\n      textarea {\n        padding: 0;\n        line-height: inherit;\n        color: inherit;\n      }\n\n      img,\n      svg,\n      video,\n      canvas,\n      audio,\n      iframe,\n      embed,\n      object {\n        display: block;\n      }\n\n      img,\n      video {\n        max-width: 100%;\n        height: auto;\n      }\n\n      [data-js-focus-visible] :focus:not([data-focus-visible-added]):not([data-focus-visible-disabled]) {\n        outline: none;\n        box-shadow: none;\n      }\n\n      select::-ms-expand {\n        display: none;\n      }\n    '})},fh=__webpack_require__(683),Mh=createContext({strict:!1,name:"PortalManagerContext"}),Oh=Mh[0],Rh=Mh[1];function PortalManager($){var ee=$.children,ne=$.zIndex;return X.createElement(Oh,{value:{zIndex:ne}},ee)}function chakra_ui_portal_esm_extends(){return chakra_ui_portal_esm_extends=Object.assign||function(X){for(var $=1;$<arguments.length;$++){var ee=arguments[$];for(var ne in ee)Object.prototype.hasOwnProperty.call(ee,ne)&&(X[ne]=ee[ne])}return X},chakra_ui_portal_esm_extends.apply(this,arguments)}var Nh=["containerRef"],$h=createContext({strict:!1,name:"PortalContext"}),ad=$h[0],cd=$h[1],dd="chakra-portal",pd=function Container($){return X.createElement("div",{className:"chakra-portal-zIndex",style:{position:"absolute",zIndex:$.zIndex,top:0,left:0,right:0}},$.children)},vd=function DefaultPortal($){var ee=$.appendToParentPortal,ne=$.children,ae=X.useRef(null),de=X.useRef(null),fe=useForceUpdate(),Ue=cd(),je=Rh();_t((function(){if(ae.current){var X=ae.current.ownerDocument,$=ee&&null!=Ue?Ue:X.body;if($){de.current=X.createElement("div"),de.current.className=dd,$.appendChild(de.current),fe();var ne=de.current;return function(){$.contains(ne)&&$.removeChild(ne)}}}}),[]);var Ke=null!=je&&je.zIndex?X.createElement(pd,{zIndex:null==je?void 0:je.zIndex},ne):ne;return de.current?(0,fh.createPortal)(X.createElement(ad,{value:de.current},Ke),de.current):X.createElement("span",{ref:ae})},yd=function ContainerPortal($){var ee=$.children,ne=$.containerRef,ae=$.appendToParentPortal,de=ne.current,fe=null!=de?de:ct?document.body:void 0,Ue=X.useMemo((function(){var X=null==de?void 0:de.ownerDocument.createElement("div");return X&&(X.className=dd),X}),[de]),je=useForceUpdate();return _t((function(){je()}),[]),_t((function(){if(Ue&&fe)return fe.appendChild(Ue),function(){fe.removeChild(Ue)}}),[Ue,fe]),fe&&Ue?(0,fh.createPortal)(X.createElement(ad,{value:ae?Ue:null},ee),Ue):null};function Portal($){var ee=$.containerRef,ne=function chakra_ui_portal_esm_objectWithoutPropertiesLoose(X,$){if(null==X)return{};var ee,ne,ae={},de=Object.keys(X);for(ne=0;ne<de.length;ne++)ee=de[ne],$.indexOf(ee)>=0||(ae[ee]=X[ee]);return ae}($,Nh);return ee?X.createElement(yd,chakra_ui_portal_esm_extends({containerRef:ee},ne)):X.createElement(vd,ne)}Portal.defaultProps={appendToParentPortal:!0},Portal.className=dd,Portal.selector=".chakra-portal";var bd=function ChakraProvider($){var ee=$.children,ne=$.colorModeManager,ae=$.portalZIndex,de=$.resetCSS,fe=void 0===de||de,Ue=$.theme,je=void 0===Ue?{}:Ue,Ke=$.environment,et=$.cssVarsRoot,tt=X.createElement(EnvironmentProvider,{environment:Ke},ee);return X.createElement(Xs,{theme:je,cssVarsRoot:et},X.createElement(ColorModeProvider,{colorModeManager:ne,options:je.config},fe&&X.createElement(Wc,null),X.createElement($s,null),ae?X.createElement(PortalManager,{zIndex:ae},tt):tt))},xd={px:"1px",.5:"0.125rem",1:"0.25rem",1.5:"0.375rem",2:"0.5rem",2.5:"0.625rem",3:"0.75rem",3.5:"0.875rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem",12:"3rem",14:"3.5rem",16:"4rem",20:"5rem",24:"6rem",28:"7rem",32:"8rem",36:"9rem",40:"10rem",44:"11rem",48:"12rem",52:"13rem",56:"14rem",60:"15rem",64:"16rem",72:"18rem",80:"20rem",96:"24rem"};function sizes_bd20b99a_esm_extends(){return sizes_bd20b99a_esm_extends=Object.assign||function(X){for(var $=1;$<arguments.length;$++){var ee=arguments[$];for(var ne in ee)Object.prototype.hasOwnProperty.call(ee,ne)&&(X[ne]=ee[ne])}return X},sizes_bd20b99a_esm_extends.apply(this,arguments)}var _d=sizes_bd20b99a_esm_extends({},xd,{max:"max-content",min:"min-content",full:"100%","3xs":"14rem","2xs":"16rem",xs:"20rem",sm:"24rem",md:"28rem",lg:"32rem",xl:"36rem","2xl":"42rem","3xl":"48rem","4xl":"56rem","5xl":"64rem","6xl":"72rem","7xl":"80rem","8xl":"90rem"},{container:{sm:"640px",md:"768px",lg:"1024px",xl:"1280px"}});function bound01(X,$){(function isOnePointZero(X){return"string"===typeof X&&-1!==X.indexOf(".")&&1===parseFloat(X)})(X)&&(X="100%");var ee=function isPercentage(X){return"string"===typeof X&&-1!==X.indexOf("%")}(X);return X=360===$?X:Math.min($,Math.max(0,parseFloat(X))),ee&&(X=parseInt(String(X*$),10)/100),Math.abs(X-$)<1e-6?1:X=360===$?(X<0?X%$+$:X%$)/parseFloat(String($)):X%$/parseFloat(String($))}function clamp01(X){return Math.min(1,Math.max(0,X))}function boundAlpha(X){return X=parseFloat(X),(isNaN(X)||X<0||X>1)&&(X=1),X}function convertToPercentage(X){return X<=1?"".concat(100*Number(X),"%"):X}function util_pad2(X){return 1===X.length?"0"+X:String(X)}function rgbToHsl(X,$,ee){X=bound01(X,255),$=bound01($,255),ee=bound01(ee,255);var ne=Math.max(X,$,ee),ae=Math.min(X,$,ee),de=0,fe=0,Ue=(ne+ae)/2;if(ne===ae)fe=0,de=0;else{var je=ne-ae;switch(fe=Ue>.5?je/(2-ne-ae):je/(ne+ae),ne){case X:de=($-ee)/je+($<ee?6:0);break;case $:de=(ee-X)/je+2;break;case ee:de=(X-$)/je+4}de/=6}return{h:de,s:fe,l:Ue}}function hue2rgb(X,$,ee){return ee<0&&(ee+=1),ee>1&&(ee-=1),ee<1/6?X+6*ee*($-X):ee<.5?$:ee<2/3?X+($-X)*(2/3-ee)*6:X}function rgbToHsv(X,$,ee){X=bound01(X,255),$=bound01($,255),ee=bound01(ee,255);var ne=Math.max(X,$,ee),ae=Math.min(X,$,ee),de=0,fe=ne,Ue=ne-ae,je=0===ne?0:Ue/ne;if(ne===ae)de=0;else{switch(ne){case X:de=($-ee)/Ue+($<ee?6:0);break;case $:de=(ee-X)/Ue+2;break;case ee:de=(X-$)/Ue+4}de/=6}return{h:de,s:je,v:fe}}function rgbToHex(X,$,ee,ne){var ae=[util_pad2(Math.round(X).toString(16)),util_pad2(Math.round($).toString(16)),util_pad2(Math.round(ee).toString(16))];return ne&&ae[0].startsWith(ae[0].charAt(1))&&ae[1].startsWith(ae[1].charAt(1))&&ae[2].startsWith(ae[2].charAt(1))?ae[0].charAt(0)+ae[1].charAt(0)+ae[2].charAt(0):ae.join("")}function convertDecimalToHex(X){return Math.round(255*parseFloat(X)).toString(16)}function convertHexToDecimal(X){return parseIntFromHex(X)/255}function parseIntFromHex(X){return parseInt(X,16)}var Sd={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function inputToRGB(X){var $={r:0,g:0,b:0},ee=1,ne=null,ae=null,de=null,fe=!1,Ue=!1;return"string"===typeof X&&(X=function stringInputToObject(X){if(0===(X=X.trim().toLowerCase()).length)return!1;var $=!1;if(Sd[X])X=Sd[X],$=!0;else if("transparent"===X)return{r:0,g:0,b:0,a:0,format:"name"};var ee=Rd.rgb.exec(X);if(ee)return{r:ee[1],g:ee[2],b:ee[3]};if(ee=Rd.rgba.exec(X))return{r:ee[1],g:ee[2],b:ee[3],a:ee[4]};if(ee=Rd.hsl.exec(X))return{h:ee[1],s:ee[2],l:ee[3]};if(ee=Rd.hsla.exec(X))return{h:ee[1],s:ee[2],l:ee[3],a:ee[4]};if(ee=Rd.hsv.exec(X))return{h:ee[1],s:ee[2],v:ee[3]};if(ee=Rd.hsva.exec(X))return{h:ee[1],s:ee[2],v:ee[3],a:ee[4]};if(ee=Rd.hex8.exec(X))return{r:parseIntFromHex(ee[1]),g:parseIntFromHex(ee[2]),b:parseIntFromHex(ee[3]),a:convertHexToDecimal(ee[4]),format:$?"name":"hex8"};if(ee=Rd.hex6.exec(X))return{r:parseIntFromHex(ee[1]),g:parseIntFromHex(ee[2]),b:parseIntFromHex(ee[3]),format:$?"name":"hex"};if(ee=Rd.hex4.exec(X))return{r:parseIntFromHex(ee[1]+ee[1]),g:parseIntFromHex(ee[2]+ee[2]),b:parseIntFromHex(ee[3]+ee[3]),a:convertHexToDecimal(ee[4]+ee[4]),format:$?"name":"hex8"};if(ee=Rd.hex3.exec(X))return{r:parseIntFromHex(ee[1]+ee[1]),g:parseIntFromHex(ee[2]+ee[2]),b:parseIntFromHex(ee[3]+ee[3]),format:$?"name":"hex"};return!1}(X)),"object"===typeof X&&(isValidCSSUnit(X.r)&&isValidCSSUnit(X.g)&&isValidCSSUnit(X.b)?($=function rgbToRgb(X,$,ee){return{r:255*bound01(X,255),g:255*bound01($,255),b:255*bound01(ee,255)}}(X.r,X.g,X.b),fe=!0,Ue="%"===String(X.r).substr(-1)?"prgb":"rgb"):isValidCSSUnit(X.h)&&isValidCSSUnit(X.s)&&isValidCSSUnit(X.v)?(ne=convertToPercentage(X.s),ae=convertToPercentage(X.v),$=function hsvToRgb(X,$,ee){X=6*bound01(X,360),$=bound01($,100),ee=bound01(ee,100);var ne=Math.floor(X),ae=X-ne,de=ee*(1-$),fe=ee*(1-ae*$),Ue=ee*(1-(1-ae)*$),je=ne%6;return{r:255*[ee,fe,de,de,Ue,ee][je],g:255*[Ue,ee,ee,fe,de,de][je],b:255*[de,de,Ue,ee,ee,fe][je]}}(X.h,ne,ae),fe=!0,Ue="hsv"):isValidCSSUnit(X.h)&&isValidCSSUnit(X.s)&&isValidCSSUnit(X.l)&&(ne=convertToPercentage(X.s),de=convertToPercentage(X.l),$=function hslToRgb(X,$,ee){var ne,ae,de;if(X=bound01(X,360),$=bound01($,100),ee=bound01(ee,100),0===$)ae=ee,de=ee,ne=ee;else{var fe=ee<.5?ee*(1+$):ee+$-ee*$,Ue=2*ee-fe;ne=hue2rgb(Ue,fe,X+1/3),ae=hue2rgb(Ue,fe,X),de=hue2rgb(Ue,fe,X-1/3)}return{r:255*ne,g:255*ae,b:255*de}}(X.h,ne,de),fe=!0,Ue="hsl"),Object.prototype.hasOwnProperty.call(X,"a")&&(ee=X.a)),ee=boundAlpha(ee),{ok:fe,format:X.format||Ue,r:Math.min(255,Math.max($.r,0)),g:Math.min(255,Math.max($.g,0)),b:Math.min(255,Math.max($.b,0)),a:ee}}var Td="(?:".concat("[-\\+]?\\d*\\.\\d+%?",")|(?:").concat("[-\\+]?\\d+%?",")"),Pd="[\\s|\\(]+(".concat(Td,")[,|\\s]+(").concat(Td,")[,|\\s]+(").concat(Td,")\\s*\\)?"),Od="[\\s|\\(]+(".concat(Td,")[,|\\s]+(").concat(Td,")[,|\\s]+(").concat(Td,")[,|\\s]+(").concat(Td,")\\s*\\)?"),Rd={CSS_UNIT:new RegExp(Td),rgb:new RegExp("rgb"+Pd),rgba:new RegExp("rgba"+Od),hsl:new RegExp("hsl"+Pd),hsla:new RegExp("hsla"+Od),hsv:new RegExp("hsv"+Pd),hsva:new RegExp("hsva"+Od),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function isValidCSSUnit(X){return Boolean(Rd.CSS_UNIT.exec(String(X)))}var Id=function(){function TinyColor(X,$){var ee;if(void 0===X&&(X=""),void 0===$&&($={}),X instanceof TinyColor)return X;"number"===typeof X&&(X=function numberInputToObject(X){return{r:X>>16,g:(65280&X)>>8,b:255&X}}(X)),this.originalInput=X;var ne=inputToRGB(X);this.originalInput=X,this.r=ne.r,this.g=ne.g,this.b=ne.b,this.a=ne.a,this.roundA=Math.round(100*this.a)/100,this.format=null!==(ee=$.format)&&void 0!==ee?ee:ne.format,this.gradientType=$.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=ne.ok}return TinyColor.prototype.isDark=function(){return this.getBrightness()<128},TinyColor.prototype.isLight=function(){return!this.isDark()},TinyColor.prototype.getBrightness=function(){var X=this.toRgb();return(299*X.r+587*X.g+114*X.b)/1e3},TinyColor.prototype.getLuminance=function(){var X=this.toRgb(),$=X.r/255,ee=X.g/255,ne=X.b/255;return.2126*($<=.03928?$/12.92:Math.pow(($+.055)/1.055,2.4))+.7152*(ee<=.03928?ee/12.92:Math.pow((ee+.055)/1.055,2.4))+.0722*(ne<=.03928?ne/12.92:Math.pow((ne+.055)/1.055,2.4))},TinyColor.prototype.getAlpha=function(){return this.a},TinyColor.prototype.setAlpha=function(X){return this.a=boundAlpha(X),this.roundA=Math.round(100*this.a)/100,this},TinyColor.prototype.toHsv=function(){var X=rgbToHsv(this.r,this.g,this.b);return{h:360*X.h,s:X.s,v:X.v,a:this.a}},TinyColor.prototype.toHsvString=function(){var X=rgbToHsv(this.r,this.g,this.b),$=Math.round(360*X.h),ee=Math.round(100*X.s),ne=Math.round(100*X.v);return 1===this.a?"hsv(".concat($,", ").concat(ee,"%, ").concat(ne,"%)"):"hsva(".concat($,", ").concat(ee,"%, ").concat(ne,"%, ").concat(this.roundA,")")},TinyColor.prototype.toHsl=function(){var X=rgbToHsl(this.r,this.g,this.b);return{h:360*X.h,s:X.s,l:X.l,a:this.a}},TinyColor.prototype.toHslString=function(){var X=rgbToHsl(this.r,this.g,this.b),$=Math.round(360*X.h),ee=Math.round(100*X.s),ne=Math.round(100*X.l);return 1===this.a?"hsl(".concat($,", ").concat(ee,"%, ").concat(ne,"%)"):"hsla(".concat($,", ").concat(ee,"%, ").concat(ne,"%, ").concat(this.roundA,")")},TinyColor.prototype.toHex=function(X){return void 0===X&&(X=!1),rgbToHex(this.r,this.g,this.b,X)},TinyColor.prototype.toHexString=function(X){return void 0===X&&(X=!1),"#"+this.toHex(X)},TinyColor.prototype.toHex8=function(X){return void 0===X&&(X=!1),function rgbaToHex(X,$,ee,ne,ae){var de=[util_pad2(Math.round(X).toString(16)),util_pad2(Math.round($).toString(16)),util_pad2(Math.round(ee).toString(16)),util_pad2(convertDecimalToHex(ne))];return ae&&de[0].startsWith(de[0].charAt(1))&&de[1].startsWith(de[1].charAt(1))&&de[2].startsWith(de[2].charAt(1))&&de[3].startsWith(de[3].charAt(1))?de[0].charAt(0)+de[1].charAt(0)+de[2].charAt(0)+de[3].charAt(0):de.join("")}(this.r,this.g,this.b,this.a,X)},TinyColor.prototype.toHex8String=function(X){return void 0===X&&(X=!1),"#"+this.toHex8(X)},TinyColor.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},TinyColor.prototype.toRgbString=function(){var X=Math.round(this.r),$=Math.round(this.g),ee=Math.round(this.b);return 1===this.a?"rgb(".concat(X,", ").concat($,", ").concat(ee,")"):"rgba(".concat(X,", ").concat($,", ").concat(ee,", ").concat(this.roundA,")")},TinyColor.prototype.toPercentageRgb=function(){var X=function fmt(X){return"".concat(Math.round(100*bound01(X,255)),"%")};return{r:X(this.r),g:X(this.g),b:X(this.b),a:this.a}},TinyColor.prototype.toPercentageRgbString=function(){var X=function rnd(X){return Math.round(100*bound01(X,255))};return 1===this.a?"rgb(".concat(X(this.r),"%, ").concat(X(this.g),"%, ").concat(X(this.b),"%)"):"rgba(".concat(X(this.r),"%, ").concat(X(this.g),"%, ").concat(X(this.b),"%, ").concat(this.roundA,")")},TinyColor.prototype.toName=function(){if(0===this.a)return"transparent";if(this.a<1)return!1;for(var X="#"+rgbToHex(this.r,this.g,this.b,!1),$=0,ee=Object.entries(Sd);$<ee.length;$++){var ne=ee[$],ae=ne[0];if(X===ne[1])return ae}return!1},TinyColor.prototype.toString=function(X){var $=Boolean(X);X=null!==X&&void 0!==X?X:this.format;var ee=!1,ne=this.a<1&&this.a>=0;return $||!ne||!X.startsWith("hex")&&"name"!==X?("rgb"===X&&(ee=this.toRgbString()),"prgb"===X&&(ee=this.toPercentageRgbString()),"hex"!==X&&"hex6"!==X||(ee=this.toHexString()),"hex3"===X&&(ee=this.toHexString(!0)),"hex4"===X&&(ee=this.toHex8String(!0)),"hex8"===X&&(ee=this.toHex8String()),"name"===X&&(ee=this.toName()),"hsl"===X&&(ee=this.toHslString()),"hsv"===X&&(ee=this.toHsvString()),ee||this.toHexString()):"name"===X&&0===this.a?this.toName():this.toRgbString()},TinyColor.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},TinyColor.prototype.clone=function(){return new TinyColor(this.toString())},TinyColor.prototype.lighten=function(X){void 0===X&&(X=10);var $=this.toHsl();return $.l+=X/100,$.l=clamp01($.l),new TinyColor($)},TinyColor.prototype.brighten=function(X){void 0===X&&(X=10);var $=this.toRgb();return $.r=Math.max(0,Math.min(255,$.r-Math.round(-X/100*255))),$.g=Math.max(0,Math.min(255,$.g-Math.round(-X/100*255))),$.b=Math.max(0,Math.min(255,$.b-Math.round(-X/100*255))),new TinyColor($)},TinyColor.prototype.darken=function(X){void 0===X&&(X=10);var $=this.toHsl();return $.l-=X/100,$.l=clamp01($.l),new TinyColor($)},TinyColor.prototype.tint=function(X){return void 0===X&&(X=10),this.mix("white",X)},TinyColor.prototype.shade=function(X){return void 0===X&&(X=10),this.mix("black",X)},TinyColor.prototype.desaturate=function(X){void 0===X&&(X=10);var $=this.toHsl();return $.s-=X/100,$.s=clamp01($.s),new TinyColor($)},TinyColor.prototype.saturate=function(X){void 0===X&&(X=10);var $=this.toHsl();return $.s+=X/100,$.s=clamp01($.s),new TinyColor($)},TinyColor.prototype.greyscale=function(){return this.desaturate(100)},TinyColor.prototype.spin=function(X){var $=this.toHsl(),ee=($.h+X)%360;return $.h=ee<0?360+ee:ee,new TinyColor($)},TinyColor.prototype.mix=function(X,$){void 0===$&&($=50);var ee=this.toRgb(),ne=new TinyColor(X).toRgb(),ae=$/100;return new TinyColor({r:(ne.r-ee.r)*ae+ee.r,g:(ne.g-ee.g)*ae+ee.g,b:(ne.b-ee.b)*ae+ee.b,a:(ne.a-ee.a)*ae+ee.a})},TinyColor.prototype.analogous=function(X,$){void 0===X&&(X=6),void 0===$&&($=30);var ee=this.toHsl(),ne=360/$,ae=[this];for(ee.h=(ee.h-(ne*X>>1)+720)%360;--X;)ee.h=(ee.h+ne)%360,ae.push(new TinyColor(ee));return ae},TinyColor.prototype.complement=function(){var X=this.toHsl();return X.h=(X.h+180)%360,new TinyColor(X)},TinyColor.prototype.monochromatic=function(X){void 0===X&&(X=6);for(var $=this.toHsv(),ee=$.h,ne=$.s,ae=$.v,de=[],fe=1/X;X--;)de.push(new TinyColor({h:ee,s:ne,v:ae})),ae=(ae+fe)%1;return de},TinyColor.prototype.splitcomplement=function(){var X=this.toHsl(),$=X.h;return[this,new TinyColor({h:($+72)%360,s:X.s,l:X.l}),new TinyColor({h:($+216)%360,s:X.s,l:X.l})]},TinyColor.prototype.onBackground=function(X){var $=this.toRgb(),ee=new TinyColor(X).toRgb();return new TinyColor({r:ee.r+($.r-ee.r)*$.a,g:ee.g+($.g-ee.g)*$.a,b:ee.b+($.b-ee.b)*$.a})},TinyColor.prototype.triad=function(){return this.polyad(3)},TinyColor.prototype.tetrad=function(){return this.polyad(4)},TinyColor.prototype.polyad=function(X){for(var $=this.toHsl(),ee=$.h,ne=[this],ae=360/X,de=1;de<X;de++)ne.push(new TinyColor({h:(ee+de*ae)%360,s:$.s,l:$.l}));return ne},TinyColor.prototype.equals=function(X){return this.toRgbString()===new TinyColor(X).toRgbString()},TinyColor}();function random(X){if(void 0===X&&(X={}),void 0!==X.count&&null!==X.count){var $=X.count,ee=[];for(X.count=void 0;$>ee.length;)X.count=null,X.seed&&(X.seed+=1),ee.push(random(X));return X.count=$,ee}var ne=function pickHue(X,$){var ee=randomWithin(function getHueRange(X){var $=parseInt(X,10);if(!Number.isNaN($)&&$<360&&$>0)return[$,$];if("string"===typeof X){var ee=Nd.find((function($){return $.name===X}));if(ee){var ne=defineColor(ee);if(ne.hueRange)return ne.hueRange}var ae=new Id(X);if(ae.isValid){var de=ae.toHsv().h;return[de,de]}}return[0,360]}(X),$);ee<0&&(ee=360+ee);return ee}(X.hue,X.seed),ae=function pickSaturation(X,$){if("monochrome"===$.hue)return 0;if("random"===$.luminosity)return randomWithin([0,100],$.seed);var ee=getColorInfo(X).saturationRange,ne=ee[0],ae=ee[1];switch($.luminosity){case"bright":ne=55;break;case"dark":ne=ae-10;break;case"light":ae=55}return randomWithin([ne,ae],$.seed)}(ne,X),de=function pickBrightness(X,$,ee){var ne=function getMinimumBrightness(X,$){for(var ee=getColorInfo(X).lowerBounds,ne=0;ne<ee.length-1;ne++){var ae=ee[ne][0],de=ee[ne][1],fe=ee[ne+1][0],Ue=ee[ne+1][1];if($>=ae&&$<=fe){var je=(Ue-de)/(fe-ae);return je*$+(de-je*ae)}}return 0}(X,$),ae=100;switch(ee.luminosity){case"dark":ae=ne+20;break;case"light":ne=(ae+ne)/2;break;case"random":ne=0,ae=100}return randomWithin([ne,ae],ee.seed)}(ne,ae,X),fe={h:ne,s:ae,v:de};return void 0!==X.alpha&&(fe.a=X.alpha),new Id(fe)}function getColorInfo(X){X>=334&&X<=360&&(X-=360);for(var $=0,ee=Nd;$<ee.length;$++){var ne=defineColor(ee[$]);if(ne.hueRange&&X>=ne.hueRange[0]&&X<=ne.hueRange[1])return ne}throw Error("Color not found")}function randomWithin(X,$){if(void 0===$)return Math.floor(X[0]+Math.random()*(X[1]+1-X[0]));var ee=X[1]||1,ne=X[0]||0,ae=($=(9301*$+49297)%233280)/233280;return Math.floor(ne+ae*(ee-ne))}function defineColor(X){var $=X.lowerBounds[0][0],ee=X.lowerBounds[X.lowerBounds.length-1][0],ne=X.lowerBounds[X.lowerBounds.length-1][1],ae=X.lowerBounds[0][1];return{name:X.name,hueRange:X.hueRange,lowerBounds:X.lowerBounds,saturationRange:[$,ee],brightnessRange:[ne,ae]}}var Nd=[{name:"monochrome",hueRange:null,lowerBounds:[[0,0],[100,0]]},{name:"red",hueRange:[-26,18],lowerBounds:[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]},{name:"orange",hueRange:[19,46],lowerBounds:[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]},{name:"yellow",hueRange:[47,62],lowerBounds:[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]},{name:"green",hueRange:[63,178],lowerBounds:[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]},{name:"blue",hueRange:[179,257],lowerBounds:[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]},{name:"purple",hueRange:[258,282],lowerBounds:[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]},{name:"pink",hueRange:[283,334],lowerBounds:[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]]}],Fd=function getColor(X,$,ee){var ne=je(X,"colors."+$,$);return new Id(ne).isValid?ne:ee},Ud=function tone(X){return function($){var ee=Fd($,X);return new Id(ee).isDark()?"dark":"light"}},Vd=function transparentize(X,$){return function(ee){var ne=Fd(ee,X);return new Id(ne).setAlpha($).toRgbString()}};function generateStripe(X,$){return void 0===X&&(X="1rem"),void 0===$&&($="rgba(255, 255, 255, 0.15)"),{backgroundImage:"linear-gradient(\n    45deg,\n    "+$+" 25%,\n    transparent 25%,\n    transparent 50%,\n    "+$+" 50%,\n    "+$+" 75%,\n    transparent 75%,\n    transparent\n  )",backgroundSize:X+" "+X}}function randomColor(X){var $=random().toHexString();return!X||isEmptyObject(X)?$:X.string&&X.colors?function randomColorFromList(X,$){var ee=0;if(0===X.length)return $[0];for(var ne=0;ne<X.length;ne+=1)ee=X.charCodeAt(ne)+((ee<<5)-ee),ee&=ee;return ee=(ee%$.length+$.length)%$.length,$[ee]}(X.string,X.colors):X.string&&!X.colors?function randomColorFromString(X){var $=0;if(0===X.length)return $.toString();for(var ee=0;ee<X.length;ee+=1)$=X.charCodeAt(ee)+(($<<5)-$),$&=$;for(var ne="#",ae=0;ae<3;ae+=1){ne+=("00"+($>>8*ae&255).toString(16)).substr(-2)}return ne}(X.string):X.colors&&!X.string?function randomFromList(X){return X[Math.floor(Math.random()*X.length)]}(X.colors):$}function mode(X,$){return function(ee){return"dark"===ee.colorMode?$:X}}function orient(X){var $=X.orientation,ee=X.vertical,ne=X.horizontal;return $?"vertical"===$?ee:ne:{}}function chakra_ui_theme_tools_esm_extends(){return chakra_ui_theme_tools_esm_extends=Object.assign||function(X){for(var $=1;$<arguments.length;$++){var ee=arguments[$];for(var ne in ee)Object.prototype.hasOwnProperty.call(ee,ne)&&(X[ne]=ee[ne])}return X},chakra_ui_theme_tools_esm_extends.apply(this,arguments)}function _defineProperties(X,$){for(var ee=0;ee<$.length;ee++){var ne=$[ee];ne.enumerable=ne.enumerable||!1,ne.configurable=!0,"value"in ne&&(ne.writable=!0),Object.defineProperty(X,ne.key,ne)}}var Gd=function(){function Anatomy(X){var $=this;this.map={},this.called=!1,this.assert=function(){if($.called)throw new Error("[anatomy] .part(...) should only be called once. Did you mean to use .extend(...) ?");$.called=!0},this.parts=function(){$.assert();for(var X=arguments.length,ee=new Array(X),ne=0;ne<X;ne++)ee[ne]=arguments[ne];for(var ae=0,de=ee;ae<de.length;ae++){var fe=de[ae];$.map[fe]=$.toPart(fe)}return $},this.extend=function(){for(var X=arguments.length,ee=new Array(X),ne=0;ne<X;ne++)ee[ne]=arguments[ne];for(var ae=0,de=ee;ae<de.length;ae++){var fe=de[ae];fe in $.map||($.map[fe]=$.toPart(fe))}return $},this.toPart=function(X){var ee="chakra-"+(["container","root"].includes(null!=X?X:"")?[$.name]:[$.name,X]).filter(Boolean).join("__");return{className:ee,selector:"."+ee,toString:function toString(){return X}}},this.__type={}}return function _createClass(X,$,ee){return $&&_defineProperties(X.prototype,$),ee&&_defineProperties(X,ee),Object.defineProperty(X,"prototype",{writable:!1}),X}(Anatomy,[{key:"selectors",get:function get(){return tt(Object.entries(this.map).map((function(X){return[X[0],X[1].selector]})))}},{key:"classNames",get:function get(){return tt(Object.entries(this.map).map((function(X){return[X[0],X[1].className]})))}},{key:"keys",get:function get(){return Object.keys(this.map)}}]),Anatomy}();function anatomy(X){return new Gd(X)}function toRef(X){return chakra_ui_utils_esm_isObject(X)&&X.reference?X.reference:String(X)}var Wd=function toExpr(X){for(var $=arguments.length,ee=new Array($>1?$-1:0),ne=1;ne<$;ne++)ee[ne-1]=arguments[ne];return ee.map(toRef).join(" "+X+" ").replace(/calc/g,"")},Jd=function add(){for(var X=arguments.length,$=new Array(X),ee=0;ee<X;ee++)$[ee]=arguments[ee];return"calc("+Wd.apply(void 0,["+"].concat($))+")"},Zd=function subtract(){for(var X=arguments.length,$=new Array(X),ee=0;ee<X;ee++)$[ee]=arguments[ee];return"calc("+Wd.apply(void 0,["-"].concat($))+")"},Qd=function multiply(){for(var X=arguments.length,$=new Array(X),ee=0;ee<X;ee++)$[ee]=arguments[ee];return"calc("+Wd.apply(void 0,["*"].concat($))+")"},Kd=function divide(){for(var X=arguments.length,$=new Array(X),ee=0;ee<X;ee++)$[ee]=arguments[ee];return"calc("+Wd.apply(void 0,["/"].concat($))+")"},$d=function negate(X){var $=toRef(X);return null==$||Number.isNaN(parseFloat($))?Qd($,-1):String($).startsWith("-")?String($).slice(1):"-"+$},ef=Object.assign((function(X){return{add:function add(){for(var $=arguments.length,ee=new Array($),ne=0;ne<$;ne++)ee[ne]=arguments[ne];return ef(Jd.apply(void 0,[X].concat(ee)))},subtract:function subtract(){for(var $=arguments.length,ee=new Array($),ne=0;ne<$;ne++)ee[ne]=arguments[ne];return ef(Zd.apply(void 0,[X].concat(ee)))},multiply:function multiply(){for(var $=arguments.length,ee=new Array($),ne=0;ne<$;ne++)ee[ne]=arguments[ne];return ef(Qd.apply(void 0,[X].concat(ee)))},divide:function divide(){for(var $=arguments.length,ee=new Array($),ne=0;ne<$;ne++)ee[ne]=arguments[ne];return ef(Kd.apply(void 0,[X].concat(ee)))},negate:function negate(){return ef($d(X))},toString:function toString(){return X.toString()}}}),{add:Jd,subtract:Zd,multiply:Qd,divide:Kd,negate:$d});function chakra_ui_theme_tools_esm_escape(X){var $=function chakra_ui_theme_tools_esm_replaceWhiteSpace(X,$){return void 0===$&&($="-"),X.replace(/\s+/g,$)}(X.toString());return $.includes("\\.")?X:function isDecimal(X){return!Number.isInteger(parseFloat(X.toString()))}(X)?$.replace(".","\\."):X}function toVarRef(X,$){return"var("+chakra_ui_theme_tools_esm_escape(X)+($?", "+$:"")+")"}function toVar(X,$){return void 0===$&&($=""),"--"+function chakra_ui_theme_tools_esm_addPrefix(X,$){return void 0===$&&($=""),[$,chakra_ui_theme_tools_esm_escape(X)].filter(Boolean).join("-")}(X,$)}function chakra_ui_theme_tools_esm_cssVar(X,$){var ee=toVar(X,null==$?void 0:$.prefix);return{variable:ee,reference:toVarRef(ee,getFallback(null==$?void 0:$.fallback))}}function getFallback(X){return"string"===typeof X?X:null==X?void 0:X.reference}var of=anatomy("accordion").parts("root","container","button","panel").extend("icon"),sf=anatomy("alert").parts("title","description","container").extend("icon","spinner"),lf=anatomy("avatar").parts("label","badge","container").extend("excessLabel","group"),uf=anatomy("breadcrumb").parts("link","item","container").extend("separator"),cf=(anatomy("button").parts(),anatomy("checkbox").parts("control","icon","container").extend("label")),df=(anatomy("progress").parts("track","filledTrack").extend("label"),anatomy("drawer").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer")),ff=anatomy("editable").parts("preview","input","textarea"),pf=anatomy("form").parts("container","requiredIndicator","helperText"),$f=anatomy("formError").parts("text","icon"),ep=anatomy("input").parts("addon","field","element"),tp=anatomy("list").parts("container","item","icon"),np=anatomy("menu").parts("button","list","item").extend("groupTitle","command","divider"),rp=anatomy("modal").parts("overlay","dialogContainer","dialog").extend("header","closeButton","body","footer"),ip=anatomy("numberinput").parts("root","field","stepperGroup","stepper"),ap=(anatomy("pininput").parts("field"),anatomy("popover").parts("content","header","body","footer").extend("popper","arrow","closeButton")),op=anatomy("progress").parts("label","filledTrack","track"),sp=anatomy("radio").parts("container","control","label"),lp=anatomy("select").parts("field","icon"),up=anatomy("slider").parts("container","track","thumb","filledTrack"),hp=anatomy("stat").parts("container","label","helpText","number","icon"),pp=anatomy("switch").parts("container","track","thumb"),bp=anatomy("table").parts("table","thead","tbody","tr","th","td","tfoot","caption"),kp=anatomy("tabs").parts("root","tab","tablist","tabpanel","tabpanels","indicator"),Up=anatomy("tag").parts("container","label","closeButton"),Gp={letterSpacings:{tighter:"-0.05em",tight:"-0.025em",normal:"0",wide:"0.025em",wider:"0.05em",widest:"0.1em"},lineHeights:{normal:"normal",none:1,shorter:1.25,short:1.375,base:1.5,tall:1.625,taller:"2",3:".75rem",4:"1rem",5:"1.25rem",6:"1.5rem",7:"1.75rem",8:"2rem",9:"2.25rem",10:"2.5rem"},fontWeights:{hairline:100,thin:200,light:300,normal:400,medium:500,semibold:600,bold:700,extrabold:800,black:900},fonts:{heading:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace'},fontSizes:{xs:"0.75rem",sm:"0.875rem",md:"1rem",lg:"1.125rem",xl:"1.25rem","2xl":"1.5rem","3xl":"1.875rem","4xl":"2.25rem","5xl":"3rem","6xl":"3.75rem","7xl":"4.5rem","8xl":"6rem","9xl":"8rem"}},qp={root:{},container:{borderTopWidth:"1px",borderColor:"inherit",_last:{borderBottomWidth:"1px"}},button:{transitionProperty:"common",transitionDuration:"normal",fontSize:"1rem",_focus:{boxShadow:"outline"},_hover:{bg:"blackAlpha.50"},_disabled:{opacity:.4,cursor:"not-allowed"},px:4,py:2},panel:{pt:2,px:4,pb:5},icon:{fontSize:"1.25em"}},Yp={parts:of.keys,baseStyle:qp};function getBg(X){var $=X.theme,ee=X.colorScheme;return mode(Fd($,ee+".100",ee),Vd(ee+".200",.16)($))(X)}var Jp={subtle:function variantSubtle(X){var $=X.colorScheme;return{container:{bg:getBg(X)},icon:{color:mode($+".500",$+".200")(X)},spinner:{color:mode($+".500",$+".200")(X)}}},"left-accent":function variantLeftAccent(X){var $=X.colorScheme;return{container:{paddingStart:3,borderStartWidth:"4px",borderStartColor:mode($+".500",$+".200")(X),bg:getBg(X)},icon:{color:mode($+".500",$+".200")(X)},spinner:{color:mode($+".500",$+".200")(X)}}},"top-accent":function variantTopAccent(X){var $=X.colorScheme;return{container:{pt:2,borderTopWidth:"4px",borderTopColor:mode($+".500",$+".200")(X),bg:getBg(X)},icon:{color:mode($+".500",$+".200")(X)},spinner:{color:mode($+".500",$+".200")(X)}}},solid:function variantSolid(X){var $=X.colorScheme;return{container:{bg:mode($+".500",$+".200")(X),color:mode("white","gray.900")(X)}}}},Qp={parts:sf.keys,baseStyle:{container:{px:4,py:3},title:{fontWeight:"bold",lineHeight:6,marginEnd:2},description:{lineHeight:6},icon:{flexShrink:0,marginEnd:3,w:5,h:6},spinner:{flexShrink:0,marginEnd:3,w:5,h:5}},variants:Jp,defaultProps:{variant:"subtle",colorScheme:"blue"}},nv=function baseStyleBadge(X){return{transform:"translate(25%, 25%)",borderRadius:"full",border:"0.2em solid",borderColor:mode("white","gray.800")(X)}},ov=function baseStyleExcessLabel(X){return{bg:mode("gray.200","whiteAlpha.400")(X)}},sv=function baseStyleContainer(X){var $=X.name,ee=X.theme,ne=$?randomColor({string:$}):"gray.400",ae=function isDark(X){return function($){return"dark"===Ud(X)($)}}(ne)(ee),de="white";return ae||(de="gray.800"),{bg:ne,color:de,borderColor:mode("white","gray.800")(X),verticalAlign:"top"}};function getSize$3(X){var $="100%"!==X?_d[X]:void 0;return{container:{width:X,height:X,fontSize:"calc("+(null!=$?$:X)+" / 2.5)"},excessLabel:{width:X,height:X},label:{fontSize:"calc("+(null!=$?$:X)+" / 2.5)",lineHeight:"100%"!==X?null!=$?$:X:void 0}}}var lv,_v,Sv,kv={"2xs":getSize$3(4),xs:getSize$3(6),sm:getSize$3(8),md:getSize$3(12),lg:getSize$3(16),xl:getSize$3(24),"2xl":getSize$3(32),full:getSize$3("100%")},Cv={parts:lf.keys,baseStyle:function baseStyle(X){return{badge:nv(X),excessLabel:ov(X),container:sv(X)}},sizes:kv,defaultProps:{size:"md"}},Pv={solid:function variantSolid(X){var $=X.colorScheme,ee=X.theme;return{bg:mode($+".500",Vd($+".500",.6)(ee))(X),color:mode("white","whiteAlpha.800")(X)}},subtle:function variantSubtle(X){var $=X.colorScheme,ee=X.theme;return{bg:mode($+".100",Vd($+".200",.16)(ee))(X),color:mode($+".800",$+".200")(X)}},outline:function variantOutline(X){var $=X.colorScheme,ee=X.theme,ne=Vd($+".200",.8)(ee),ae=mode(Fd(ee,$+".500"),ne)(X);return{color:ae,boxShadow:"inset 0 0 0px 1px "+ae}}},Dv={baseStyle:{px:1,textTransform:"uppercase",fontSize:"xs",borderRadius:"sm",fontWeight:"bold"},variants:Pv,defaultProps:{variant:"subtle",colorScheme:"gray"}},Ov={link:{transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focus:{boxShadow:"outline"}}},Bv={parts:uf.keys,baseStyle:Ov},Uv=function variantGhost(X){var $=X.colorScheme,ee=X.theme;if("gray"===$)return{color:mode("inherit","whiteAlpha.900")(X),_hover:{bg:mode("gray.100","whiteAlpha.200")(X)},_active:{bg:mode("gray.200","whiteAlpha.300")(X)}};var ne=Vd($+".200",.12)(ee),ae=Vd($+".200",.24)(ee);return{color:mode($+".600",$+".200")(X),bg:"transparent",_hover:{bg:mode($+".50",ne)(X)},_active:{bg:mode($+".100",ae)(X)}}},Vv={yellow:{bg:"yellow.400",color:"black",hoverBg:"yellow.500",activeBg:"yellow.600"},cyan:{bg:"cyan.400",color:"black",hoverBg:"cyan.500",activeBg:"cyan.600"}},Gv={ghost:Uv,outline:function variantOutline(X){var $=X.colorScheme,ee=mode("gray.200","whiteAlpha.300")(X);return sizes_bd20b99a_esm_extends({border:"1px solid",borderColor:"gray"===$?ee:"currentColor",".chakra-button__group[data-attached] > &:not(:last-of-type)":{marginEnd:"-1px"}},Uv(X))},solid:function variantSolid(X){var $,ee=X.colorScheme;if("gray"===ee){var ne=mode("gray.100","whiteAlpha.200")(X);return{bg:ne,_hover:{bg:mode("gray.200","whiteAlpha.300")(X),_disabled:{bg:ne}},_active:{bg:mode("gray.300","whiteAlpha.400")(X)}}}var ae=null!=($=Vv[ee])?$:{},de=ae.bg,fe=void 0===de?ee+".500":de,Ue=ae.color,je=void 0===Ue?"white":Ue,Ke=ae.hoverBg,et=void 0===Ke?ee+".600":Ke,tt=ae.activeBg,nt=void 0===tt?ee+".700":tt,it=mode(fe,ee+".200")(X);return{bg:it,color:mode(je,"gray.800")(X),_hover:{bg:mode(et,ee+".300")(X),_disabled:{bg:it}},_active:{bg:mode(nt,ee+".400")(X)}}},link:function variantLink(X){var $=X.colorScheme;return{padding:0,height:"auto",lineHeight:"normal",verticalAlign:"baseline",color:mode($+".500",$+".200")(X),_hover:{textDecoration:"underline",_disabled:{textDecoration:"none"}},_active:{color:mode($+".700",$+".500")(X)}}},unstyled:{bg:"none",color:"inherit",display:"inline",lineHeight:"inherit",m:0,p:0}},qv={baseStyle:{lineHeight:"1.2",borderRadius:"md",fontWeight:"semibold",transitionProperty:"common",transitionDuration:"normal",_focus:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{_disabled:{bg:"initial"}}},variants:Gv,sizes:{lg:{h:12,minW:12,fontSize:"lg",px:6},md:{h:10,minW:10,fontSize:"md",px:4},sm:{h:8,minW:8,fontSize:"sm",px:3},xs:{h:6,minW:6,fontSize:"xs",px:2}},defaultProps:{variant:"solid",size:"md",colorScheme:"gray"}},Jv=function baseStyleControl(X){var $=X.colorScheme;return{w:"100%",transitionProperty:"box-shadow",transitionDuration:"normal",border:"2px solid",borderRadius:"sm",borderColor:"inherit",color:"white",_checked:{bg:mode($+".500",$+".200")(X),borderColor:mode($+".500",$+".200")(X),color:mode("white","gray.900")(X),_hover:{bg:mode($+".600",$+".300")(X),borderColor:mode($+".600",$+".300")(X)},_disabled:{borderColor:mode("gray.200","transparent")(X),bg:mode("gray.200","whiteAlpha.300")(X),color:mode("gray.500","whiteAlpha.500")(X)}},_indeterminate:{bg:mode($+".500",$+".200")(X),borderColor:mode($+".500",$+".200")(X),color:mode("white","gray.900")(X)},_disabled:{bg:mode("gray.100","whiteAlpha.100")(X),borderColor:mode("gray.100","transparent")(X)},_focus:{boxShadow:"outline"},_invalid:{borderColor:mode("red.500","red.300")(X)}}},Kv={_disabled:{cursor:"not-allowed"}},em={userSelect:"none",_disabled:{opacity:.4}},tm={transitionProperty:"transform",transitionDuration:"normal"},lm={parts:cf.keys,baseStyle:function baseStyle(X){return{icon:tm,container:Kv,control:Jv(X),label:em}},sizes:{sm:{control:{h:3,w:3},label:{fontSize:"sm"},icon:{fontSize:"0.45rem"}},md:{control:{w:4,h:4},label:{fontSize:"md"},icon:{fontSize:"0.625rem"}},lg:{control:{w:5,h:5},label:{fontSize:"lg"},icon:{fontSize:"0.625rem"}}},defaultProps:{size:"md",colorScheme:"blue"}},pm=chakra_ui_theme_tools_esm_cssVar("close-button-size"),vm={baseStyle:function baseStyle(X){var $=mode("blackAlpha.100","whiteAlpha.100")(X),ee=mode("blackAlpha.200","whiteAlpha.200")(X);return{w:[pm.reference],h:[pm.reference],borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_disabled:{opacity:.4,cursor:"not-allowed",boxShadow:"none"},_hover:{bg:$},_active:{bg:ee},_focus:{boxShadow:"outline"}}},sizes:{lg:(lv={},lv[pm.variable]="40px",lv.fontSize="16px",lv),md:(_v={},_v[pm.variable]="32px",_v.fontSize="12px",_v),sm:(Sv={},Sv[pm.variable]="24px",Sv.fontSize="10px",Sv)},defaultProps:{size:"md"}},mm={baseStyle:{fontFamily:"mono",fontSize:"sm",px:"0.2em",borderRadius:"sm"},variants:Dv.variants,defaultProps:Dv.defaultProps},gm={baseStyle:{w:"100%",mx:"auto",maxW:"60ch",px:"1rem"}},ym={baseStyle:{opacity:.6,borderColor:"inherit"},variants:{solid:{borderStyle:"solid"},dashed:{borderStyle:"dashed"}},defaultProps:{variant:"solid"}};function getSize$2(X){return"full"===X?{dialog:{maxW:"100vw",h:"100vh"}}:{dialog:{maxW:X}}}var xm={bg:"blackAlpha.600",zIndex:"overlay"},_m={display:"flex",zIndex:"modal",justifyContent:"center"},wm=function baseStyleDialog(X){return sizes_bd20b99a_esm_extends({},X.isFullHeight&&{height:"100vh"},{zIndex:"modal",maxH:"100vh",bg:mode("white","gray.700")(X),color:"inherit",boxShadow:mode("lg","dark-lg")(X)})},Sm={px:6,py:4,fontSize:"xl",fontWeight:"semibold"},km={position:"absolute",top:2,insetEnd:3},Mm={px:6,py:2,flex:1,overflow:"auto"},Em={px:6,py:4},Pm={xs:getSize$2("xs"),sm:getSize$2("md"),md:getSize$2("lg"),lg:getSize$2("2xl"),xl:getSize$2("4xl"),full:getSize$2("full")},Dm={parts:df.keys,baseStyle:function baseStyle(X){return{overlay:xm,dialogContainer:_m,dialog:wm(X),header:Sm,closeButton:km,body:Mm,footer:Em}},sizes:Pm,defaultProps:{size:"xs"}},Lm={preview:{borderRadius:"md",py:"3px",transitionProperty:"common",transitionDuration:"normal"},input:{borderRadius:"md",py:"3px",transitionProperty:"common",transitionDuration:"normal",width:"full",_focus:{boxShadow:"outline"},_placeholder:{opacity:.6}},textarea:{borderRadius:"md",py:"3px",transitionProperty:"common",transitionDuration:"normal",width:"full",_focus:{boxShadow:"outline"},_placeholder:{opacity:.6}}},Om={parts:ff.keys,baseStyle:Lm},Rm=function baseStyleRequiredIndicator(X){return{marginStart:1,color:mode("red.500","red.300")(X)}},Bm=function baseStyleHelperText(X){return{mt:2,color:mode("gray.500","whiteAlpha.600")(X),lineHeight:"normal",fontSize:"sm"}},Im={parts:pf.keys,baseStyle:function baseStyle(X){return{container:{width:"100%",position:"relative"},requiredIndicator:Rm(X),helperText:Bm(X)}}},zm=function baseStyleText(X){return{color:mode("red.500","red.300")(X),mt:2,fontSize:"sm",lineHeight:"normal"}},Nm=function baseStyleIcon(X){return{marginEnd:"0.5em",color:mode("red.500","red.300")(X)}},Fm={parts:$f.keys,baseStyle:function baseStyle(X){return{text:zm(X),icon:Nm(X)}}},Um={baseStyle:{fontSize:"md",marginEnd:3,mb:2,fontWeight:"medium",transitionProperty:"common",transitionDuration:"normal",opacity:1,_disabled:{opacity:.4}}},Vm={baseStyle:{fontFamily:"heading",fontWeight:"bold"},sizes:{"4xl":{fontSize:["6xl",null,"7xl"],lineHeight:1},"3xl":{fontSize:["5xl",null,"6xl"],lineHeight:1},"2xl":{fontSize:["4xl",null,"5xl"],lineHeight:[1.2,null,1]},xl:{fontSize:["3xl",null,"4xl"],lineHeight:[1.33,null,1.2]},lg:{fontSize:["2xl",null,"3xl"],lineHeight:[1.33,null,1.2]},md:{fontSize:"xl",lineHeight:1.2},sm:{fontSize:"md",lineHeight:1.2},xs:{fontSize:"sm",lineHeight:1.2}},defaultProps:{size:"xl"}},Hm={lg:{fontSize:"lg",px:4,h:12,borderRadius:"md"},md:{fontSize:"md",px:4,h:10,borderRadius:"md"},sm:{fontSize:"sm",px:3,h:8,borderRadius:"sm"},xs:{fontSize:"xs",px:2,h:6,borderRadius:"sm"}},jm={lg:{field:Hm.lg,addon:Hm.lg},md:{field:Hm.md,addon:Hm.md},sm:{field:Hm.sm,addon:Hm.sm},xs:{field:Hm.xs,addon:Hm.xs}};function getDefaults(X){var $=X.focusBorderColor,ee=X.errorBorderColor;return{focusBorderColor:$||mode("blue.500","blue.300")(X),errorBorderColor:ee||mode("red.500","red.300")(X)}}var Gm={outline:function variantOutline(X){var $=X.theme,ee=getDefaults(X),ne=ee.focusBorderColor,ae=ee.errorBorderColor;return{field:{border:"1px solid",borderColor:"inherit",bg:"inherit",_hover:{borderColor:mode("gray.300","whiteAlpha.400")(X)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_disabled:{opacity:.4,cursor:"not-allowed"},_invalid:{borderColor:Fd($,ae),boxShadow:"0 0 0 1px "+Fd($,ae)},_focus:{zIndex:1,borderColor:Fd($,ne),boxShadow:"0 0 0 1px "+Fd($,ne)}},addon:{border:"1px solid",borderColor:mode("inherit","whiteAlpha.50")(X),bg:mode("gray.100","whiteAlpha.300")(X)}}},filled:function variantFilled(X){var $=X.theme,ee=getDefaults(X),ne=ee.focusBorderColor,ae=ee.errorBorderColor;return{field:{border:"2px solid",borderColor:"transparent",bg:mode("gray.100","whiteAlpha.50")(X),_hover:{bg:mode("gray.200","whiteAlpha.100")(X)},_readOnly:{boxShadow:"none !important",userSelect:"all"},_disabled:{opacity:.4,cursor:"not-allowed"},_invalid:{borderColor:Fd($,ae)},_focus:{bg:"transparent",borderColor:Fd($,ne)}},addon:{border:"2px solid",borderColor:"transparent",bg:mode("gray.100","whiteAlpha.50")(X)}}},flushed:function variantFlushed(X){var $=X.theme,ee=getDefaults(X),ne=ee.focusBorderColor,ae=ee.errorBorderColor;return{field:{borderBottom:"1px solid",borderColor:"inherit",borderRadius:0,px:0,bg:"transparent",_readOnly:{boxShadow:"none !important",userSelect:"all"},_invalid:{borderColor:Fd($,ae),boxShadow:"0px 1px 0px 0px "+Fd($,ae)},_focus:{borderColor:Fd($,ne),boxShadow:"0px 1px 0px 0px "+Fd($,ne)}},addon:{borderBottom:"2px solid",borderColor:"inherit",borderRadius:0,px:0,bg:"transparent"}}},unstyled:{field:{bg:"transparent",px:0,height:"auto"},addon:{bg:"transparent",px:0,height:"auto"}}},Wm={parts:ep.keys,baseStyle:{field:{width:"100%",minWidth:0,outline:0,position:"relative",appearance:"none",transitionProperty:"common",transitionDuration:"normal"}},sizes:jm,variants:Gm,defaultProps:{size:"md",variant:"outline"}},Ym={baseStyle:function baseStyle(X){return{bg:mode("gray.100","whiteAlpha")(X),borderRadius:"md",borderWidth:"1px",borderBottomWidth:"3px",fontSize:"0.8em",fontWeight:"bold",lineHeight:"normal",px:"0.4em",whiteSpace:"nowrap"}}},Jm={baseStyle:{transitionProperty:"common",transitionDuration:"fast",transitionTimingFunction:"ease-out",cursor:"pointer",textDecoration:"none",outline:"none",color:"inherit",_hover:{textDecoration:"underline"},_focus:{boxShadow:"outline"}}},Zm={container:{},item:{},icon:{marginEnd:"0.5rem",display:"inline",verticalAlign:"text-bottom"}},Xm={parts:tp.keys,baseStyle:Zm},Qm=function baseStyleList(X){return{bg:mode("#fff","gray.700")(X),boxShadow:mode("sm","dark-lg")(X),color:"inherit",minW:"3xs",py:"2",zIndex:1,borderRadius:"md",borderWidth:"1px"}},Km=function baseStyleItem(X){return{py:"0.4rem",px:"0.8rem",transitionProperty:"background",transitionDuration:"ultra-fast",transitionTimingFunction:"ease-in",_focus:{bg:mode("gray.100","whiteAlpha.100")(X)},_active:{bg:mode("gray.200","whiteAlpha.200")(X)},_expanded:{bg:mode("gray.100","whiteAlpha.100")(X)},_disabled:{opacity:.4,cursor:"not-allowed"}}},$m={mx:4,my:2,fontWeight:"semibold",fontSize:"sm"},eg={opacity:.6},tg={border:0,borderBottom:"1px solid",borderColor:"inherit",my:"0.5rem",opacity:.6},rg={transitionProperty:"common",transitionDuration:"normal"},ig={parts:np.keys,baseStyle:function baseStyle(X){return{button:rg,list:Qm(X),item:Km(X),groupTitle:$m,command:eg,divider:tg}}},sg={bg:"blackAlpha.600",zIndex:"modal"},bg=function baseStyleDialogContainer(X){return{display:"flex",zIndex:"modal",justifyContent:"center",alignItems:X.isCentered?"center":"flex-start",overflow:"inside"===X.scrollBehavior?"hidden":"auto"}},$g=function baseStyleDialog(X){var $=X.scrollBehavior;return{borderRadius:"md",bg:mode("white","gray.700")(X),color:"inherit",my:"3.75rem",zIndex:"modal",maxH:"inside"===$?"calc(100% - 7.5rem)":void 0,boxShadow:mode("lg","dark-lg")(X)}},ty={px:6,py:4,fontSize:"xl",fontWeight:"semibold"},ny={position:"absolute",top:2,insetEnd:3},iy=function baseStyleBody(X){return{px:6,py:2,flex:1,overflow:"inside"===X.scrollBehavior?"auto":void 0}},sy={px:6,py:4};function getSize$1(X){return"full"===X?{dialog:{maxW:"100vw",minH:"100vh","@supports(min-height: -webkit-fill-available)":{minH:"-webkit-fill-available"},my:0}}:{dialog:{maxW:X}}}var ly,uy,cy,hy={xs:getSize$1("xs"),sm:getSize$1("sm"),md:getSize$1("md"),lg:getSize$1("lg"),xl:getSize$1("xl"),"2xl":getSize$1("2xl"),"3xl":getSize$1("3xl"),"4xl":getSize$1("4xl"),"5xl":getSize$1("5xl"),"6xl":getSize$1("6xl"),full:getSize$1("full")},fy={parts:rp.keys,baseStyle:function baseStyle(X){return{overlay:sg,dialogContainer:bg(X),dialog:$g(X),header:ty,closeButton:ny,body:iy(X),footer:sy}},sizes:hy,defaultProps:{size:"md"}},py=Wm.variants,vy=Wm.defaultProps,my=chakra_ui_theme_tools_esm_cssVar("number-input-stepper-width"),gy=chakra_ui_theme_tools_esm_cssVar("number-input-input-padding"),yy=ef(my).add("0.5rem").toString(),by=((ly={})[my.variable]="24px",ly[gy.variable]=yy,ly),ky=null!=(uy=null==(cy=Wm.baseStyle)?void 0:cy.field)?uy:{},Cy={width:[my.reference]},Py=function baseStyleStepper(X){return{borderStart:"1px solid",borderStartColor:mode("inherit","whiteAlpha.300")(X),color:mode("inherit","whiteAlpha.800")(X),_active:{bg:mode("gray.200","whiteAlpha.300")(X)},_disabled:{opacity:.4,cursor:"not-allowed"}}};function getSize(X){var $,ee,ne=Wm.sizes[X],ae={lg:"md",md:"md",sm:"sm",xs:"sm"},de=null!=($=null==(ee=ne.field)?void 0:ee.fontSize)?$:"md",fe=Gp.fontSizes[de];return{field:sizes_bd20b99a_esm_extends({},ne.field,{paddingInlineEnd:gy.reference,verticalAlign:"top"}),stepper:{fontSize:ef(fe).multiply(.75).toString(),_first:{borderTopEndRadius:ae[X]},_last:{borderBottomEndRadius:ae[X],mt:"-1px",borderTopWidth:1}}}}var Dy,Ly={xs:getSize("xs"),sm:getSize("sm"),md:getSize("md"),lg:getSize("lg")},Oy={parts:ip.keys,baseStyle:function baseStyle(X){return{root:by,field:ky,stepperGroup:Cy,stepper:Py(X)}},sizes:Ly,variants:py,defaultProps:vy},Iy={baseStyle:sizes_bd20b99a_esm_extends({},Wm.baseStyle.field,{textAlign:"center"}),sizes:{lg:{fontSize:"lg",w:12,h:12,borderRadius:"md"},md:{fontSize:"md",w:10,h:10,borderRadius:"md"},sm:{fontSize:"sm",w:8,h:8,borderRadius:"sm"},xs:{fontSize:"xs",w:6,h:6,borderRadius:"sm"}},variants:{outline:function outline(X){var $;return null!=($=Wm.variants.outline(X).field)?$:{}},flushed:function flushed(X){var $;return null!=($=Wm.variants.flushed(X).field)?$:{}},filled:function filled(X){var $;return null!=($=Wm.variants.filled(X).field)?$:{}},unstyled:null!=(Dy=Wm.variants.unstyled.field)?Dy:{}},defaultProps:Wm.defaultProps},zy=chakra_ui_theme_tools_esm_cssVar("popper-bg"),Ny=chakra_ui_theme_tools_esm_cssVar("popper-arrow-bg"),Fy=chakra_ui_theme_tools_esm_cssVar("popper-arrow-shadow-color"),Uy={zIndex:10},Vy=function baseStyleContent(X){var $,ee=mode("white","gray.700")(X),ne=mode("gray.200","whiteAlpha.300")(X);return($={})[zy.variable]="colors."+ee,$.bg=zy.reference,$[Ny.variable]=zy.reference,$[Fy.variable]="colors."+ne,$.width="xs",$.border="1px solid",$.borderColor="inherit",$.borderRadius="md",$.boxShadow="sm",$.zIndex="inherit",$._focus={outline:0,boxShadow:"outline"},$},Hy={px:3,py:2,borderBottomWidth:"1px"},jy={px:3,py:2},Gy={px:3,py:2,borderTopWidth:"1px"},Wy={position:"absolute",borderRadius:"md",top:1,insetEnd:2,padding:2},qy={parts:ap.keys,baseStyle:function baseStyle(X){return{popper:Uy,content:Vy(X),header:Hy,body:jy,footer:Gy,arrow:{},closeButton:Wy}}};var Yy={lineHeight:"1",fontSize:"0.25em",fontWeight:"bold",color:"white"},Jy=function baseStyleTrack(X){return{bg:mode("gray.100","whiteAlpha.300")(X)}},Zy=function baseStyleFilledTrack(X){return sizes_bd20b99a_esm_extends({transitionProperty:"common",transitionDuration:"slow"},function filledStyle(X){var $=X.colorScheme,ee=X.theme,ne=X.isIndeterminate,ae=X.hasStripe,de=mode(generateStripe(),generateStripe("1rem","rgba(0,0,0,0.1)"))(X),fe=mode($+".500",$+".200")(X),Ue="linear-gradient(\n    to right,\n    transparent 0%,\n    "+Fd(ee,fe)+" 50%,\n    transparent 100%\n  )";return sizes_bd20b99a_esm_extends({},!ne&&ae&&de,ne?{bgImage:Ue}:{bgColor:fe})}(X))},Xy={parts:op.keys,sizes:{xs:{track:{h:"0.25rem"}},sm:{track:{h:"0.5rem"}},md:{track:{h:"0.75rem"}},lg:{track:{h:"1rem"}}},baseStyle:function baseStyle(X){return{label:Yy,filledTrack:Zy(X),track:Jy(X)}},defaultProps:{size:"md",colorScheme:"blue"}},$y=function baseStyleControl(X){var $=lm.baseStyle(X).control,ee=void 0===$?{}:$;return sizes_bd20b99a_esm_extends({},ee,{borderRadius:"full",_checked:sizes_bd20b99a_esm_extends({},ee._checked,{_before:{content:'""',display:"inline-block",pos:"relative",w:"50%",h:"50%",borderRadius:"50%",bg:"currentColor"}})})},nb={parts:sp.keys,baseStyle:function baseStyle(X){return{label:lm.baseStyle(X).label,container:lm.baseStyle(X).container,control:$y(X)}},sizes:{md:{control:{w:4,h:4},label:{fontSize:"md"}},lg:{control:{w:5,h:5},label:{fontSize:"lg"}},sm:{control:{width:3,height:3},label:{fontSize:"sm"}}},defaultProps:{size:"md",colorScheme:"blue"}},ob=function baseStyleField(X){return sizes_bd20b99a_esm_extends({},Wm.baseStyle.field,{bg:mode("white","gray.700")(X),appearance:"none",paddingBottom:"1px",lineHeight:"normal","> option, > optgroup":{bg:mode("white","gray.700")(X)}})},lb={width:"1.5rem",height:"100%",insetEnd:"0.5rem",position:"relative",color:"currentColor",fontSize:"1.25rem",_disabled:{opacity:.5}},cb={paddingInlineEnd:"2rem"},pb=ae()({},Wm.sizes,{lg:{field:cb},md:{field:cb},sm:{field:cb},xs:{field:cb,icon:{insetEnd:"0.25rem"}}}),yb={parts:lp.keys,baseStyle:function baseStyle(X){return{field:ob(X),icon:lb}},sizes:pb,variants:Wm.variants,defaultProps:Wm.defaultProps},kb=function fade(X,$){return Ms({from:{borderColor:X,background:X},to:{borderColor:$,background:$}})},zb={baseStyle:function baseStyle(X){var $=mode("gray.100","gray.800")(X),ee=mode("gray.400","gray.600")(X),ne=X.startColor,ae=void 0===ne?$:ne,de=X.endColor,fe=void 0===de?ee:de,Ue=X.speed,je=X.theme,Ke=Fd(je,ae),et=Fd(je,fe);return{opacity:.7,borderRadius:"2px",borderColor:Ke,background:et,animation:Ue+"s linear infinite alternate "+kb(Ke,et)}}},Nb={baseStyle:function baseStyle(X){return{borderRadius:"md",fontWeight:"semibold",_focus:{boxShadow:"outline",padding:"1rem",position:"fixed",top:"1.5rem",insetStart:"1.5rem",bg:mode("white","gray.700")(X)}}}};var Hb,Qb,Kb,$b,tx,ux,hx,fx,vx,mx,gx,yx,bx,_x=function baseStyleContainer(X){return sizes_bd20b99a_esm_extends({display:"inline-block",position:"relative",cursor:"pointer",_disabled:{opacity:.6,cursor:"default",pointerEvents:"none"}},orient({orientation:X.orientation,vertical:{h:"100%"},horizontal:{w:"100%"}}))},kx=function baseStyleTrack(X){return{overflow:"hidden",borderRadius:"sm",bg:mode("gray.200","whiteAlpha.200")(X),_disabled:{bg:mode("gray.300","whiteAlpha.300")(X)}}},Cx=function baseStyleThumb(X){return sizes_bd20b99a_esm_extends({display:"flex",alignItems:"center",justifyContent:"center",position:"absolute",outline:0,zIndex:1,borderRadius:"full",bg:"white",boxShadow:"base",border:"1px solid",borderColor:"transparent",transitionProperty:"transform",transitionDuration:"normal",_focus:{boxShadow:"outline"},_disabled:{bg:"gray.300"}},function thumbOrientation(X){return orient({orientation:X.orientation,vertical:{left:"50%",transform:"translateX(-50%)",_active:{transform:"translateX(-50%) scale(1.15)"}},horizontal:{top:"50%",transform:"translateY(-50%)",_active:{transform:"translateY(-50%) scale(1.15)"}}})}(X))},Ax=function baseStyleFilledTrack(X){var $=X.colorScheme;return{width:"inherit",height:"inherit",bg:mode($+".500",$+".200")(X)}},Ex={lg:function sizeLg(X){return{thumb:{w:"16px",h:"16px"},track:orient({orientation:X.orientation,horizontal:{h:"4px"},vertical:{w:"4px"}})}},md:function sizeMd(X){return{thumb:{w:"14px",h:"14px"},track:orient({orientation:X.orientation,horizontal:{h:"4px"},vertical:{w:"4px"}})}},sm:function sizeSm(X){return{thumb:{w:"10px",h:"10px"},track:orient({orientation:X.orientation,horizontal:{h:"2px"},vertical:{w:"2px"}})}}},Px={parts:up.keys,sizes:Ex,baseStyle:function baseStyle(X){return{container:_x(X),track:kx(X),thumb:Cx(X),filledTrack:Ax(X)}},defaultProps:{size:"md",colorScheme:"blue"}},Dx=chakra_ui_theme_tools_esm_cssVar("spinner-size"),Lx={baseStyle:{width:[Dx.reference],height:[Dx.reference]},sizes:{xs:(Hb={},Hb[Dx.variable]="0.75rem",Hb),sm:(Qb={},Qb[Dx.variable]="1rem",Qb),md:(Kb={},Kb[Dx.variable]="1.5rem",Kb),lg:($b={},$b[Dx.variable]="2rem",$b),xl:(tx={},tx[Dx.variable]="3rem",tx)},defaultProps:{size:"md"}},Ox={container:{},label:{fontWeight:"medium"},helpText:{opacity:.8,marginBottom:2},number:{verticalAlign:"baseline",fontWeight:"semibold"},icon:{marginEnd:1,w:"14px",h:"14px",verticalAlign:"middle"}},Rx={parts:hp.keys,baseStyle:Ox,sizes:{md:{label:{fontSize:"sm"},helpText:{fontSize:"sm"},number:{fontSize:"2xl"}}},defaultProps:{size:"md"}},Bx=chakra_ui_theme_tools_esm_cssVar("switch-track-width"),Ix=chakra_ui_theme_tools_esm_cssVar("switch-track-height"),zx=chakra_ui_theme_tools_esm_cssVar("switch-track-diff"),Nx=ef.subtract(Bx,Ix),Fx=chakra_ui_theme_tools_esm_cssVar("switch-thumb-x"),Ux=function baseStyleTrack(X){var $=X.colorScheme;return{borderRadius:"full",p:"2px",width:[Bx.reference],height:[Ix.reference],transitionProperty:"common",transitionDuration:"fast",bg:mode("gray.300","whiteAlpha.400")(X),_focus:{boxShadow:"outline"},_disabled:{opacity:.4,cursor:"not-allowed"},_checked:{bg:mode($+".500",$+".200")(X)}}},Vx={bg:"white",transitionProperty:"transform",transitionDuration:"normal",borderRadius:"inherit",width:[Ix.reference],height:[Ix.reference],_checked:{transform:"translateX("+Fx.reference+")"}},Hx={sm:{container:(ux={},ux[Bx.variable]="1.375rem",ux[Ix.variable]="0.75rem",ux)},md:{container:(hx={},hx[Bx.variable]="1.875rem",hx[Ix.variable]="1rem",hx)},lg:{container:(fx={},fx[Bx.variable]="2.875rem",fx[Ix.variable]="1.5rem",fx)}},jx={parts:pp.keys,baseStyle:function baseStyle(X){var $,ee;return{container:(ee={},ee[zx.variable]=Nx,ee[Fx.variable]=zx.reference,ee._rtl=($={},$[Fx.variable]=ef(zx).negate().toString(),$),ee),track:Ux(X),thumb:Vx}},sizes:Hx,defaultProps:{size:"md",colorScheme:"blue"}},Gx={"&[data-is-numeric=true]":{textAlign:"end"}},Wx={simple:function variantSimple(X){var $=X.colorScheme;return{th:sizes_bd20b99a_esm_extends({color:mode("gray.600","gray.400")(X),borderBottom:"1px",borderColor:mode($+".100",$+".700")(X)},Gx),td:sizes_bd20b99a_esm_extends({borderBottom:"1px",borderColor:mode($+".100",$+".700")(X)},Gx),caption:{color:mode("gray.600","gray.100")(X)},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}},striped:function variantStripe(X){var $=X.colorScheme;return{th:sizes_bd20b99a_esm_extends({color:mode("gray.600","gray.400")(X),borderBottom:"1px",borderColor:mode($+".100",$+".700")(X)},Gx),td:sizes_bd20b99a_esm_extends({borderBottom:"1px",borderColor:mode($+".100",$+".700")(X)},Gx),caption:{color:mode("gray.600","gray.100")(X)},tbody:{tr:{"&:nth-of-type(odd)":{"th, td":{borderBottomWidth:"1px",borderColor:mode($+".100",$+".700")(X)},td:{background:mode($+".100",$+".700")(X)}}}},tfoot:{tr:{"&:last-of-type":{th:{borderBottomWidth:0}}}}}},unstyled:{}},qx={parts:bp.keys,baseStyle:{table:{fontVariantNumeric:"lining-nums tabular-nums",borderCollapse:"collapse",width:"full"},th:{fontFamily:"heading",fontWeight:"bold",textTransform:"uppercase",letterSpacing:"wider",textAlign:"start"},td:{textAlign:"start"},caption:{mt:4,fontFamily:"heading",textAlign:"center",fontWeight:"medium"}},variants:Wx,sizes:{sm:{th:{px:"4",py:"1",lineHeight:"4",fontSize:"xs"},td:{px:"4",py:"2",fontSize:"sm",lineHeight:"4"},caption:{px:"4",py:"2",fontSize:"xs"}},md:{th:{px:"6",py:"3",lineHeight:"4",fontSize:"xs"},td:{px:"6",py:"4",lineHeight:"5"},caption:{px:"6",py:"2",fontSize:"sm"}},lg:{th:{px:"8",py:"4",lineHeight:"5",fontSize:"sm"},td:{px:"8",py:"5",lineHeight:"6"},caption:{px:"6",py:"2",fontSize:"md"}}},defaultProps:{variant:"simple",size:"md",colorScheme:"gray"}},Yx=function baseStyleRoot(X){return{display:"vertical"===X.orientation?"flex":"block"}},Jx=function baseStyleTab(X){return{flex:X.isFitted?1:void 0,transitionProperty:"common",transitionDuration:"normal",_focus:{zIndex:1,boxShadow:"outline"}}},Zx=function baseStyleTablist(X){var $=X.align,ee=void 0===$?"start":$,ne=X.orientation;return{justifyContent:{end:"flex-end",center:"center",start:"flex-start"}[ee],flexDirection:"vertical"===ne?"column":"row"}},Xx={p:4},Qx={line:function variantLine(X){var $,ee,ne=X.colorScheme,ae=X.orientation,de="vertical"===ae?"borderStart":"borderBottom",fe="vertical"===ae?"marginStart":"marginBottom";return{tablist:($={},$[de]="2px solid",$.borderColor="inherit",$),tab:(ee={},ee[de]="2px solid",ee.borderColor="transparent",ee[fe]="-2px",ee._selected={color:mode(ne+".600",ne+".300")(X),borderColor:"currentColor"},ee._active={bg:mode("gray.200","whiteAlpha.300")(X)},ee._disabled={opacity:.4,cursor:"not-allowed"},ee)}},enclosed:function variantEnclosed(X){var $=X.colorScheme;return{tab:{borderTopRadius:"md",border:"1px solid",borderColor:"transparent",mb:"-1px",_selected:{color:mode($+".600",$+".300")(X),borderColor:"inherit",borderBottomColor:mode("white","gray.800")(X)}},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}},"enclosed-colored":function variantEnclosedColored(X){var $=X.colorScheme;return{tab:{border:"1px solid",borderColor:"inherit",bg:mode("gray.50","whiteAlpha.50")(X),mb:"-1px",_notLast:{marginEnd:"-1px"},_selected:{bg:mode("#fff","gray.800")(X),color:mode($+".600",$+".300")(X),borderColor:"inherit",borderTopColor:"currentColor",borderBottomColor:"transparent"}},tablist:{mb:"-1px",borderBottom:"1px solid",borderColor:"inherit"}}},"soft-rounded":function variantSoftRounded(X){var $=X.colorScheme,ee=X.theme;return{tab:{borderRadius:"full",fontWeight:"semibold",color:"gray.600",_selected:{color:Fd(ee,$+".700"),bg:Fd(ee,$+".100")}}}},"solid-rounded":function variantSolidRounded(X){var $=X.colorScheme;return{tab:{borderRadius:"full",fontWeight:"semibold",color:mode("gray.600","inherit")(X),_selected:{color:mode("#fff","gray.800")(X),bg:mode($+".600",$+".300")(X)}}}},unstyled:{}},Kx={parts:kp.keys,baseStyle:function baseStyle(X){return{root:Yx(X),tab:Jx(X),tablist:Zx(X),tabpanel:Xx}},sizes:{sm:{tab:{py:1,px:4,fontSize:"sm"}},md:{tab:{fontSize:"md",py:2,px:4}},lg:{tab:{fontSize:"lg",py:3,px:4}}},variants:Qx,defaultProps:{size:"md",variant:"line",colorScheme:"blue"}},$x={container:{fontWeight:"medium",lineHeight:1.2,outline:0,_focus:{boxShadow:"outline"}},label:{lineHeight:1.2,overflow:"visible"},closeButton:{fontSize:"18px",w:"1.25rem",h:"1.25rem",transitionProperty:"common",transitionDuration:"normal",borderRadius:"full",marginStart:"0.375rem",marginEnd:"-1",opacity:.5,_disabled:{opacity:.4},_focus:{boxShadow:"outline",bg:"rgba(0, 0, 0, 0.14)"},_hover:{opacity:.8},_active:{opacity:1}}},e_={subtle:function subtle(X){return{container:Dv.variants.subtle(X)}},solid:function solid(X){return{container:Dv.variants.solid(X)}},outline:function outline(X){return{container:Dv.variants.outline(X)}}},t_={parts:Up.keys,variants:e_,baseStyle:$x,sizes:{sm:{container:{minH:"1.25rem",minW:"1.25rem",fontSize:"xs",px:2,borderRadius:"md"},closeButton:{marginEnd:"-2px",marginStart:"0.35rem"}},md:{container:{minH:"1.5rem",minW:"1.5rem",fontSize:"sm",borderRadius:"md",px:2}},lg:{container:{minH:8,minW:8,fontSize:"md",borderRadius:"md",px:3}}},defaultProps:{size:"md",variant:"subtle",colorScheme:"gray"}},n_=sizes_bd20b99a_esm_extends({},Wm.baseStyle.field,{paddingY:"8px",minHeight:"80px",lineHeight:"short",verticalAlign:"top"}),r_={outline:function outline(X){var $;return null!=($=Wm.variants.outline(X).field)?$:{}},flushed:function flushed(X){var $;return null!=($=Wm.variants.flushed(X).field)?$:{}},filled:function filled(X){var $;return null!=($=Wm.variants.filled(X).field)?$:{}},unstyled:null!=(vx=Wm.variants.unstyled.field)?vx:{}},i_={baseStyle:n_,sizes:{xs:null!=(mx=Wm.sizes.xs.field)?mx:{},sm:null!=(gx=Wm.sizes.sm.field)?gx:{},md:null!=(yx=Wm.sizes.md.field)?yx:{},lg:null!=(bx=Wm.sizes.lg.field)?bx:{}},variants:r_,defaultProps:{size:"md",variant:"outline"}},o_=chakra_ui_theme_tools_esm_cssVar("tooltip-bg"),s_=chakra_ui_theme_tools_esm_cssVar("popper-arrow-bg"),l_={baseStyle:function baseStyle(X){var $,ee=mode("gray.700","gray.300")(X);return($={})[o_.variable]="colors."+ee,$.px="8px",$.py="2px",$.bg=[o_.reference],$[s_.variable]=[o_.reference],$.color=mode("whiteAlpha.900","gray.900")(X),$.borderRadius="sm",$.fontWeight="medium",$.fontSize="sm",$.boxShadow="md",$.maxW="320px",$.zIndex="tooltip",$}},u_=Object.freeze({__proto__:null,Accordion:Yp,Alert:Qp,Avatar:Cv,Badge:Dv,Breadcrumb:Bv,Button:qv,Checkbox:lm,CloseButton:vm,Code:mm,Container:gm,Divider:ym,Drawer:Dm,Editable:Om,Form:Im,FormError:Fm,FormLabel:Um,Heading:Vm,Input:Wm,Kbd:Ym,Link:Jm,List:Xm,Menu:ig,Modal:fy,NumberInput:Oy,PinInput:Iy,Popover:qy,Progress:Xy,Radio:nb,Select:yb,Skeleton:zb,SkipLink:Nb,Slider:Px,Spinner:Lx,Stat:Rx,Switch:jx,Table:qx,Tabs:Kx,Tag:t_,Textarea:i_,Tooltip:l_}),c_=function createBreakpoints(X){return yt({condition:!0,message:["[chakra-ui]: createBreakpoints(...) will be deprecated pretty soon","simply pass the breakpoints as an object. Remove the createBreakpoint(..) call"].join("")}),chakra_ui_theme_tools_esm_extends({base:"0em"},X)}({sm:"30em",md:"48em",lg:"62em",xl:"80em","2xl":"96em"}),h_=sizes_bd20b99a_esm_extends({breakpoints:c_,zIndices:{hide:-1,auto:"auto",base:0,docked:10,dropdown:1e3,sticky:1100,banner:1200,overlay:1300,modal:1400,popover:1500,skipLink:1600,toast:1700,tooltip:1800},radii:{none:"0",sm:"0.125rem",base:"0.25rem",md:"0.375rem",lg:"0.5rem",xl:"0.75rem","2xl":"1rem","3xl":"1.5rem",full:"9999px"},blur:{none:0,sm:"4px",base:"8px",md:"12px",lg:"16px",xl:"24px","2xl":"40px","3xl":"64px"},colors:{transparent:"transparent",current:"currentColor",black:"#000000",white:"#FFFFFF",whiteAlpha:{50:"rgba(255, 255, 255, 0.04)",100:"rgba(255, 255, 255, 0.06)",200:"rgba(255, 255, 255, 0.08)",300:"rgba(255, 255, 255, 0.16)",400:"rgba(255, 255, 255, 0.24)",500:"rgba(255, 255, 255, 0.36)",600:"rgba(255, 255, 255, 0.48)",700:"rgba(255, 255, 255, 0.64)",800:"rgba(255, 255, 255, 0.80)",900:"rgba(255, 255, 255, 0.92)"},blackAlpha:{50:"rgba(0, 0, 0, 0.04)",100:"rgba(0, 0, 0, 0.06)",200:"rgba(0, 0, 0, 0.08)",300:"rgba(0, 0, 0, 0.16)",400:"rgba(0, 0, 0, 0.24)",500:"rgba(0, 0, 0, 0.36)",600:"rgba(0, 0, 0, 0.48)",700:"rgba(0, 0, 0, 0.64)",800:"rgba(0, 0, 0, 0.80)",900:"rgba(0, 0, 0, 0.92)"},gray:{50:"#F7FAFC",100:"#EDF2F7",200:"#E2E8F0",300:"#CBD5E0",400:"#A0AEC0",500:"#718096",600:"#4A5568",700:"#2D3748",800:"#1A202C",900:"#171923"},red:{50:"#FFF5F5",100:"#FED7D7",200:"#FEB2B2",300:"#FC8181",400:"#F56565",500:"#E53E3E",600:"#C53030",700:"#9B2C2C",800:"#822727",900:"#63171B"},orange:{50:"#FFFAF0",100:"#FEEBC8",200:"#FBD38D",300:"#F6AD55",400:"#ED8936",500:"#DD6B20",600:"#C05621",700:"#9C4221",800:"#7B341E",900:"#652B19"},yellow:{50:"#FFFFF0",100:"#FEFCBF",200:"#FAF089",300:"#F6E05E",400:"#ECC94B",500:"#D69E2E",600:"#B7791F",700:"#975A16",800:"#744210",900:"#5F370E"},green:{50:"#F0FFF4",100:"#C6F6D5",200:"#9AE6B4",300:"#68D391",400:"#48BB78",500:"#38A169",600:"#2F855A",700:"#276749",800:"#22543D",900:"#1C4532"},teal:{50:"#E6FFFA",100:"#B2F5EA",200:"#81E6D9",300:"#4FD1C5",400:"#38B2AC",500:"#319795",600:"#2C7A7B",700:"#285E61",800:"#234E52",900:"#1D4044"},blue:{50:"#ebf8ff",100:"#bee3f8",200:"#90cdf4",300:"#63b3ed",400:"#4299e1",500:"#3182ce",600:"#2b6cb0",700:"#2c5282",800:"#2a4365",900:"#1A365D"},cyan:{50:"#EDFDFD",100:"#C4F1F9",200:"#9DECF9",300:"#76E4F7",400:"#0BC5EA",500:"#00B5D8",600:"#00A3C4",700:"#0987A0",800:"#086F83",900:"#065666"},purple:{50:"#FAF5FF",100:"#E9D8FD",200:"#D6BCFA",300:"#B794F4",400:"#9F7AEA",500:"#805AD5",600:"#6B46C1",700:"#553C9A",800:"#44337A",900:"#322659"},pink:{50:"#FFF5F7",100:"#FED7E2",200:"#FBB6CE",300:"#F687B3",400:"#ED64A6",500:"#D53F8C",600:"#B83280",700:"#97266D",800:"#702459",900:"#521B41"},linkedin:{50:"#E8F4F9",100:"#CFEDFB",200:"#9BDAF3",300:"#68C7EC",400:"#34B3E4",500:"#00A0DC",600:"#008CC9",700:"#0077B5",800:"#005E93",900:"#004471"},facebook:{50:"#E8F4F9",100:"#D9DEE9",200:"#B7C2DA",300:"#6482C0",400:"#4267B2",500:"#385898",600:"#314E89",700:"#29487D",800:"#223B67",900:"#1E355B"},messenger:{50:"#D0E6FF",100:"#B9DAFF",200:"#A2CDFF",300:"#7AB8FF",400:"#2E90FF",500:"#0078FF",600:"#0063D1",700:"#0052AC",800:"#003C7E",900:"#002C5C"},whatsapp:{50:"#dffeec",100:"#b9f5d0",200:"#90edb3",300:"#65e495",400:"#3cdd78",500:"#22c35e",600:"#179848",700:"#0c6c33",800:"#01421c",900:"#001803"},twitter:{50:"#E5F4FD",100:"#C8E9FB",200:"#A8DCFA",300:"#83CDF7",400:"#57BBF5",500:"#1DA1F2",600:"#1A94DA",700:"#1681BF",800:"#136B9E",900:"#0D4D71"},telegram:{50:"#E3F2F9",100:"#C5E4F3",200:"#A2D4EC",300:"#7AC1E4",400:"#47A9DA",500:"#0088CC",600:"#007AB8",700:"#006BA1",800:"#005885",900:"#003F5E"}}},Gp,{sizes:_d,shadows:{xs:"0 0 0 1px rgba(0, 0, 0, 0.05)",sm:"0 1px 2px 0 rgba(0, 0, 0, 0.05)",base:"0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06)",md:"0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)",lg:"0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)",xl:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)","2xl":"0 25px 50px -12px rgba(0, 0, 0, 0.25)",outline:"0 0 0 3px rgba(66, 153, 225, 0.6)",inner:"inset 0 2px 4px 0 rgba(0,0,0,0.06)",none:"none","dark-lg":"rgba(0, 0, 0, 0.1) 0px 0px 0px 1px, rgba(0, 0, 0, 0.2) 0px 5px 10px, rgba(0, 0, 0, 0.4) 0px 15px 40px"},space:xd,borders:{none:0,"1px":"1px solid","2px":"2px solid","4px":"4px solid","8px":"8px solid"},transition:{property:{common:"background-color, border-color, color, fill, stroke, opacity, box-shadow, transform",colors:"background-color, border-color, color, fill, stroke",dimensions:"width, height",position:"left, right, top, bottom",background:"background-color, background-image, background-position"},easing:{"ease-in":"cubic-bezier(0.4, 0, 1, 1)","ease-out":"cubic-bezier(0, 0, 0.2, 1)","ease-in-out":"cubic-bezier(0.4, 0, 0.2, 1)"},duration:{"ultra-fast":"50ms",faster:"100ms",fast:"150ms",normal:"200ms",slow:"300ms",slower:"400ms","ultra-slow":"500ms"}}});var d_=sizes_bd20b99a_esm_extends({direction:"ltr"},h_,{components:u_,styles:{global:function global(X){return{body:{fontFamily:"body",color:mode("gray.800","whiteAlpha.900")(X),bg:mode("white","gray.800")(X),transitionProperty:"background-color",transitionDuration:"normal",lineHeight:"base"},"*::placeholder":{color:mode("gray.500","whiteAlpha.400")(X)},"*, *::before, &::after":{borderColor:mode("gray.200","whiteAlpha.300")(X),wordWrap:"break-word"}}}},config:{useSystemColorMode:!1,initialColorMode:"light",cssVarPrefix:"chakra"}}),p_=(0,X.createContext)(null);function useConstant($){var ee=(0,X.useRef)(null);return null===ee.current&&(ee.current=$()),ee.current}var v_=0,m_=function incrementId(){return v_++},g_=function useId(){return useConstant(m_)};function usePresence(){var $=(0,X.useContext)(p_);if(null===$)return[!0,null];var ee=$.isPresent,ne=$.onExitComplete,ae=$.register,de=g_();(0,X.useEffect)((function(){return ae(de)}),[]);return!ee&&ne?[!1,function safeToRemove(){return null===ne||void 0===ne?void 0:ne(de)}]:[!0]}function useIsPresent(){return function isPresent(X){return null===X||X.isPresent}((0,X.useContext)(p_))}var y_=function extendStatics(X,$){return y_=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(X,$){X.__proto__=$}||function(X,$){for(var ee in $)Object.prototype.hasOwnProperty.call($,ee)&&(X[ee]=$[ee])},y_(X,$)};function __extends(X,$){if("function"!==typeof $&&null!==$)throw new TypeError("Class extends value "+String($)+" is not a constructor or null");function __(){this.constructor=X}y_(X,$),X.prototype=null===$?Object.create($):(__.prototype=$.prototype,new __)}var b_=function __assign(){return b_=Object.assign||function __assign(X){for(var $,ee=1,ne=arguments.length;ee<ne;ee++)for(var ae in $=arguments[ee])Object.prototype.hasOwnProperty.call($,ae)&&(X[ae]=$[ae]);return X},b_.apply(this,arguments)};function tslib_es6_rest(X,$){var ee={};for(var ne in X)Object.prototype.hasOwnProperty.call(X,ne)&&$.indexOf(ne)<0&&(ee[ne]=X[ne]);if(null!=X&&"function"===typeof Object.getOwnPropertySymbols){var ae=0;for(ne=Object.getOwnPropertySymbols(X);ae<ne.length;ae++)$.indexOf(ne[ae])<0&&Object.prototype.propertyIsEnumerable.call(X,ne[ae])&&(ee[ne[ae]]=X[ne[ae]])}return ee}Object.create;function __values(X){var $="function"===typeof Symbol&&Symbol.iterator,ee=$&&X[$],ne=0;if(ee)return ee.call(X);if(X&&"number"===typeof X.length)return{next:function next(){return X&&ne>=X.length&&(X=void 0),{value:X&&X[ne++],done:!X}}};throw new TypeError($?"Object is not iterable.":"Symbol.iterator is not defined.")}function tslib_es6_read(X,$){var ee="function"===typeof Symbol&&X[Symbol.iterator];if(!ee)return X;var ne,ae,de=ee.call(X),fe=[];try{for(;(void 0===$||$-- >0)&&!(ne=de.next()).done;)fe.push(ne.value)}catch(Ue){ae={error:Ue}}finally{try{ne&&!ne.done&&(ee=de.return)&&ee.call(de)}finally{if(ae)throw ae.error}}return fe}function tslib_es6_spreadArray(X,$,ee){if(ee||2===arguments.length)for(var ne,ae=0,de=$.length;ae<de;ae++)!ne&&ae in $||(ne||(ne=Array.prototype.slice.call($,0,ae)),ne[ae]=$[ae]);return X.concat(ne||Array.prototype.slice.call($))}Object.create;var x_=function createDefinition(X){return{isEnabled:function isEnabled($){return X.some((function(X){return!!$[X]}))}}},w_={measureLayout:x_(["layout","layoutId","drag"]),animation:x_(["animate","exit","variants","whileHover","whileTap","whileFocus","whileDrag","whileInView"]),exit:x_(["exit"]),drag:x_(["drag","dragControls"]),focus:x_(["whileFocus"]),hover:x_(["whileHover","onHoverStart","onHoverEnd"]),tap:x_(["whileTap","onTap","onTapStart","onTapCancel"]),pan:x_(["onPan","onPanStart","onPanSessionStart","onPanEnd"]),inView:x_(["whileInView","onViewportEnter","onViewportLeave"])};var S_=(0,X.createContext)({strict:!1}),k_=Object.keys(w_),C_=k_.length;var A_=(0,X.createContext)({transformPagePoint:function transformPagePoint(X){return X},isStatic:!1,reducedMotion:"never"}),M_=(0,X.createContext)({});var E_="undefined"!==typeof document,T_=E_?X.useLayoutEffect:X.useEffect,P_={current:null},D_=!1;function useReducedMotion(){return!D_&&function initPrefersReducedMotion(){if(D_=!0,E_)if(window.matchMedia){var X=window.matchMedia("(prefers-reduced-motion)"),$=function setReducedMotionPreferences(){return P_.current=X.matches};X.addListener($),$()}else P_.current=!1}(),tslib_es6_read((0,X.useState)(P_.current),1)[0]}function useVisualElement($,ee,ne,ae){var de=(0,X.useContext)(S_),fe=function useVisualElementContext(){return(0,X.useContext)(M_).visualElement}(),Ue=(0,X.useContext)(p_),je=function useReducedMotionConfig(){var $=useReducedMotion(),ee=(0,X.useContext)(A_).reducedMotion;return"never"!==ee&&("always"===ee||$)}(),Ke=(0,X.useRef)(void 0);ae||(ae=de.renderer),!Ke.current&&ae&&(Ke.current=ae($,{visualState:ee,parent:fe,props:ne,presenceId:null===Ue||void 0===Ue?void 0:Ue.id,blockInitialAnimation:!1===(null===Ue||void 0===Ue?void 0:Ue.initial),shouldReduceMotion:je}));var et=Ke.current;return T_((function(){null===et||void 0===et||et.syncRender()})),(0,X.useEffect)((function(){var X;null===(X=null===et||void 0===et?void 0:et.animationState)||void 0===X||X.animateChanges()})),T_((function(){return function(){return null===et||void 0===et?void 0:et.notifyUnmount()}}),[]),et}function is_ref_object_isRefObject(X){return"object"===typeof X&&Object.prototype.hasOwnProperty.call(X,"current")}function isVariantLabels(X){return Array.isArray(X)}function isVariantLabel(X){return"string"===typeof X||isVariantLabels(X)}function resolveVariantFromProps(X,$,ee,ne,ae){var de;return void 0===ne&&(ne={}),void 0===ae&&(ae={}),"function"===typeof $&&($=$(null!==ee&&void 0!==ee?ee:X.custom,ne,ae)),"string"===typeof $&&($=null===(de=X.variants)||void 0===de?void 0:de[$]),"function"===typeof $&&($=$(null!==ee&&void 0!==ee?ee:X.custom,ne,ae)),$}function resolveVariant(X,$,ee){var ne=X.getProps();return resolveVariantFromProps(ne,$,null!==ee&&void 0!==ee?ee:ne.custom,function getCurrent(X){var $={};return X.forEachValue((function(X,ee){return $[ee]=X.get()})),$}(X),function variants_getVelocity(X){var $={};return X.forEachValue((function(X,ee){return $[ee]=X.getVelocity()})),$}(X))}function checkIfControllingVariants(X){var $;return"function"===typeof(null===($=X.animate)||void 0===$?void 0:$.start)||isVariantLabel(X.initial)||isVariantLabel(X.animate)||isVariantLabel(X.whileHover)||isVariantLabel(X.whileDrag)||isVariantLabel(X.whileTap)||isVariantLabel(X.whileFocus)||isVariantLabel(X.exit)}function checkIfVariantNode(X){return Boolean(checkIfControllingVariants(X)||X.variants)}function useCreateMotionContext($){var ee=function getCurrentTreeVariants(X,$){if(checkIfControllingVariants(X)){var ee=X.initial,ne=X.animate;return{initial:!1===ee||isVariantLabel(ee)?ee:void 0,animate:isVariantLabel(ne)?ne:void 0}}return!1!==X.inherit?$:{}}($,(0,X.useContext)(M_)),ne=ee.initial,ae=ee.animate;return(0,X.useMemo)((function(){return{initial:ne,animate:ae}}),[variantLabelsAsDependency(ne),variantLabelsAsDependency(ae)])}function variantLabelsAsDependency(X){return Array.isArray(X)?X.join(" "):X}var L_=1/60*1e3,O_="undefined"!==typeof performance?function(){return performance.now()}:function(){return Date.now()},R_="undefined"!==typeof window?function(X){return window.requestAnimationFrame(X)}:function(X){return setTimeout((function(){return X(O_())}),L_)};var B_=!0,I_=!1,z_=!1,N_={delta:0,timestamp:0},F_=["read","update","preRender","render","postRender"],U_=F_.reduce((function(X,$){return X[$]=function create_render_step_createRenderStep(X){var $=[],ee=[],ne=0,ae=!1,de=!1,fe=new WeakSet,Ue={schedule:function schedule(X){var de=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&ae,Ue=de?$:ee;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&fe.add(X),-1===Ue.indexOf(X)&&(Ue.push(X),de&&ae&&(ne=$.length)),X},cancel:function cancel(X){var $=ee.indexOf(X);-1!==$&&ee.splice($,1),fe.delete(X)},process:function process(je){if(ae)de=!0;else{ae=!0;var Ke=[ee,$];if($=Ke[0],(ee=Ke[1]).length=0,ne=$.length)for(var et=0;et<ne;et++){var tt=$[et];tt(je),fe.has(tt)&&(Ue.schedule(tt),X())}ae=!1,de&&(de=!1,Ue.process(je))}}};return Ue}((function(){return I_=!0})),X}),{}),V_=F_.reduce((function(X,$){var ee=U_[$];return X[$]=function(X){var $=arguments.length>1&&void 0!==arguments[1]&&arguments[1],ne=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return I_||q_(),ee.schedule(X,$,ne)},X}),{}),H_=F_.reduce((function(X,$){return X[$]=U_[$].cancel,X}),{}),j_=F_.reduce((function(X,$){return X[$]=function(){return U_[$].process(N_)},X}),{}),G_=function processStep(X){return U_[X].process(N_)},W_=function processFrame(X){I_=!1,N_.delta=B_?L_:Math.max(Math.min(X-N_.timestamp,40),1),N_.timestamp=X,z_=!0,F_.forEach(G_),z_=!1,I_&&(B_=!1,R_(processFrame))},q_=function startLoop(){I_=!0,B_=!0,z_||R_(W_)},Y_=function getFrameData(){return N_},J_=V_,Z_=function mix(X,$,ee){return-ee*X+ee*$+X};function velocityPerSecond(X,$){return $?X*(1e3/$):0}function addUniqueItem(X,$){-1===X.indexOf($)&&X.push($)}function array_removeItem(X,$){var ee=X.indexOf($);ee>-1&&X.splice(ee,1)}var X_=function(){function SubscriptionManager(){this.subscriptions=[]}return SubscriptionManager.prototype.add=function(X){var $=this;return addUniqueItem(this.subscriptions,X),function(){return array_removeItem($.subscriptions,X)}},SubscriptionManager.prototype.notify=function(X,$,ee){var ne=this.subscriptions.length;if(ne)if(1===ne)this.subscriptions[0](X,$,ee);else for(var ae=0;ae<ne;ae++){var de=this.subscriptions[ae];de&&de(X,$,ee)}},SubscriptionManager.prototype.getSize=function(){return this.subscriptions.length},SubscriptionManager.prototype.clear=function(){this.subscriptions.length=0},SubscriptionManager}(),Q_=function(){function MotionValue(X){var $=this;this.timeDelta=0,this.lastUpdated=0,this.updateSubscribers=new X_,this.velocityUpdateSubscribers=new X_,this.renderSubscribers=new X_,this.canTrackVelocity=!1,this.updateAndNotify=function(X,ee){void 0===ee&&(ee=!0),$.prev=$.current,$.current=X;var ne=Y_(),ae=ne.delta,de=ne.timestamp;$.lastUpdated!==de&&($.timeDelta=ae,$.lastUpdated=de,J_.postRender($.scheduleVelocityCheck)),$.prev!==$.current&&$.updateSubscribers.notify($.current),$.velocityUpdateSubscribers.getSize()&&$.velocityUpdateSubscribers.notify($.getVelocity()),ee&&$.renderSubscribers.notify($.current)},this.scheduleVelocityCheck=function(){return J_.postRender($.velocityCheck)},this.velocityCheck=function(X){X.timestamp!==$.lastUpdated&&($.prev=$.current,$.velocityUpdateSubscribers.notify($.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=X,this.canTrackVelocity=function isFloat(X){return!isNaN(parseFloat(X))}(this.current)}return MotionValue.prototype.onChange=function(X){return this.updateSubscribers.add(X)},MotionValue.prototype.clearListeners=function(){this.updateSubscribers.clear()},MotionValue.prototype.onRenderRequest=function(X){return X(this.get()),this.renderSubscribers.add(X)},MotionValue.prototype.attach=function(X){this.passiveEffect=X},MotionValue.prototype.set=function(X,$){void 0===$&&($=!0),$&&this.passiveEffect?this.passiveEffect(X,this.updateAndNotify):this.updateAndNotify(X,$)},MotionValue.prototype.get=function(){return this.current},MotionValue.prototype.getPrevious=function(){return this.prev},MotionValue.prototype.getVelocity=function(){return this.canTrackVelocity?velocityPerSecond(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0},MotionValue.prototype.start=function(X){var $=this;return this.stop(),new Promise((function(ee){$.hasAnimated=!0,$.stopAnimation=X(ee)})).then((function(){return $.clearAnimation()}))},MotionValue.prototype.stop=function(){this.stopAnimation&&this.stopAnimation(),this.clearAnimation()},MotionValue.prototype.isAnimating=function(){return!!this.stopAnimation},MotionValue.prototype.clearAnimation=function(){this.stopAnimation=null},MotionValue.prototype.destroy=function(){this.updateSubscribers.clear(),this.renderSubscribers.clear(),this.stop()},MotionValue}();function motionValue(X){return new Q_(X)}var K_=function isMotionValue(X){return Boolean(null!==X&&"object"===typeof X&&X.getVelocity)};var $_=function clamp(X,$,ee){return Math.min(Math.max(ee,X),$)},ew=.001;function findSpring(X){var $,ee,ne=X.duration,ae=void 0===ne?800:ne,de=X.bounce,fe=void 0===de?.25:de,Ue=X.velocity,je=void 0===Ue?0:Ue,Ke=X.mass,et=void 0===Ke?1:Ke,tt=1-fe;tt=$_(.05,1,tt),ae=$_(.01,10,ae/1e3),tt<1?($=function envelope(X){var $=X*tt,ee=$*ae,ne=$-je,de=calcAngularFreq(X,tt),fe=Math.exp(-ee);return ew-ne/de*fe},ee=function derivative(X){var ee=X*tt*ae,ne=ee*je+je,de=Math.pow(tt,2)*Math.pow(X,2)*ae,fe=Math.exp(-ee),Ue=calcAngularFreq(Math.pow(X,2),tt);return(-$(X)+ew>0?-1:1)*((ne-de)*fe)/Ue}):($=function envelope(X){return Math.exp(-X*ae)*((X-je)*ae+1)-.001},ee=function derivative(X){return Math.exp(-X*ae)*(ae*ae*(je-X))});var nt=function approximateRoot(X,$,ee){for(var ne=ee,ae=1;ae<12;ae++)ne-=X(ne)/$(ne);return ne}($,ee,5/ae);if(ae*=1e3,isNaN(nt))return{stiffness:100,damping:10,duration:ae};var it=Math.pow(nt,2)*et;return{stiffness:it,damping:2*tt*Math.sqrt(et*it),duration:ae}}function calcAngularFreq(X,$){return X*Math.sqrt(1-$*$)}var tw=["duration","bounce"],nw=["stiffness","damping","mass"];function isSpringType(X,$){return $.some((function($){return void 0!==X[$]}))}function spring(X){var $=X.from,ee=void 0===$?0:$,ne=X.to,ae=void 0===ne?1:ne,de=X.restSpeed,fe=void 0===de?2:de,Ue=X.restDelta,je=tslib_es6_rest(X,["from","to","restSpeed","restDelta"]),Ke={done:!1,value:ee},et=function getSpringOptions(X){var $=Object.assign({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},X);if(!isSpringType(X,nw)&&isSpringType(X,tw)){var ee=findSpring(X);($=Object.assign(Object.assign(Object.assign({},$),ee),{velocity:0,mass:1})).isResolvedFromDuration=!0}return $}(je),tt=et.stiffness,nt=et.damping,it=et.mass,ct=et.velocity,dt=et.duration,vt=et.isResolvedFromDuration,gt=rw,yt=rw;function createSpring(){var X=ct?-ct/1e3:0,$=ae-ee,ne=nt/(2*Math.sqrt(tt*it)),de=Math.sqrt(tt/it)/1e3;if(void 0===Ue&&(Ue=Math.min(Math.abs(ae-ee)/100,.4)),ne<1){var fe=calcAngularFreq(de,ne);gt=function resolveSpring(ee){var Ue=Math.exp(-ne*de*ee);return ae-Ue*((X+ne*de*$)/fe*Math.sin(fe*ee)+$*Math.cos(fe*ee))},yt=function resolveVelocity(ee){var ae=Math.exp(-ne*de*ee);return ne*de*ae*(Math.sin(fe*ee)*(X+ne*de*$)/fe+$*Math.cos(fe*ee))-ae*(Math.cos(fe*ee)*(X+ne*de*$)-fe*$*Math.sin(fe*ee))}}else if(1===ne)gt=function resolveSpring(ee){return ae-Math.exp(-de*ee)*($+(X+de*$)*ee)};else{var je=de*Math.sqrt(ne*ne-1);gt=function resolveSpring(ee){var fe=Math.exp(-ne*de*ee),Ue=Math.min(je*ee,300);return ae-fe*((X+ne*de*$)*Math.sinh(Ue)+je*$*Math.cosh(Ue))/je}}}return createSpring(),{next:function next(X){var $=gt(X);if(vt)Ke.done=X>=dt;else{var ee=1e3*yt(X),ne=Math.abs(ee)<=fe,de=Math.abs(ae-$)<=Ue;Ke.done=ne&&de}return Ke.value=Ke.done?ae:$,Ke},flipTarget:function flipTarget(){ct=-ct;var X=[ae,ee];ee=X[0],ae=X[1],createSpring()}}}spring.needsInterpolation=function(X,$){return"string"===typeof X||"string"===typeof $};var rw=function zero(X){return 0},iw=function progress(X,$,ee){var ne=$-X;return 0===ne?1:(ee-X)/ne},aw=function clamp(X,$){return function(ee){return Math.max(Math.min(ee,$),X)}},ow=function sanitize(X){return X%1?Number(X.toFixed(5)):X},sw=/(-)?([\d]*\.?[\d])+/g,lw=/(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))/gi,uw=/^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2,3}\s*\/*\s*[\d\.]+%?\))$/i;function utils_isString(X){return"string"===typeof X}var cw={test:function test(X){return"number"===typeof X},parse:parseFloat,transform:function transform(X){return X}},hw=Object.assign(Object.assign({},cw),{transform:aw(0,1)}),dw=Object.assign(Object.assign({},cw),{default:1}),fw=__webpack_require__(942),pw=function isColorString(X,$){return function(ee){return Boolean(utils_isString(ee)&&uw.test(ee)&&ee.startsWith(X)||$&&Object.prototype.hasOwnProperty.call(ee,$))}},vw=function splitColor(X,$,ee){return function(ne){var ae;if(!utils_isString(ne))return ne;var de=ne.match(sw),fe=(0,Tu.Z)(de,4),Ue=fe[0],je=fe[1],Ke=fe[2],et=fe[3];return ae={},(0,fw.Z)(ae,X,parseFloat(Ue)),(0,fw.Z)(ae,$,parseFloat(je)),(0,fw.Z)(ae,ee,parseFloat(Ke)),(0,fw.Z)(ae,"alpha",void 0!==et?parseFloat(et):1),ae}},mw=aw(0,255),gw=Object.assign(Object.assign({},cw),{transform:function transform(X){return Math.round(mw(X))}}),yw={test:pw("rgb","red"),parse:vw("red","green","blue"),transform:function transform(X){var $=X.red,ee=X.green,ne=X.blue,ae=X.alpha,de=void 0===ae?1:ae;return"rgba("+gw.transform($)+", "+gw.transform(ee)+", "+gw.transform(ne)+", "+ow(hw.transform(de))+")"}};var bw={test:pw("#"),parse:function parseHex(X){var $="",ee="",ne="",ae="";return X.length>5?($=X.substr(1,2),ee=X.substr(3,2),ne=X.substr(5,2),ae=X.substr(7,2)):($=X.substr(1,1),ee=X.substr(2,1),ne=X.substr(3,1),ae=X.substr(4,1),$+=$,ee+=ee,ne+=ne,ae+=ae),{red:parseInt($,16),green:parseInt(ee,16),blue:parseInt(ne,16),alpha:ae?parseInt(ae,16)/255:1}},transform:yw.transform},xw=function createUnitType(X){return{test:function test($){return utils_isString($)&&$.endsWith(X)&&1===$.split(" ").length},parse:parseFloat,transform:function transform($){return"".concat($).concat(X)}}},_w=xw("deg"),ww=xw("%"),Sw=xw("px"),kw=xw("vh"),Cw=xw("vw"),Aw=Object.assign(Object.assign({},ww),{parse:function parse(X){return ww.parse(X)/100},transform:function transform(X){return ww.transform(100*X)}}),Mw={test:pw("hsl","hue"),parse:vw("hue","saturation","lightness"),transform:function transform(X){var $=X.hue,ee=X.saturation,ne=X.lightness,ae=X.alpha,de=void 0===ae?1:ae;return"hsla("+Math.round($)+", "+ww.transform(ow(ee))+", "+ww.transform(ow(ne))+", "+ow(hw.transform(de))+")"}};function hueToRgb(X,$,ee){return ee<0&&(ee+=1),ee>1&&(ee-=1),ee<1/6?X+6*($-X)*ee:ee<.5?$:ee<2/3?X+($-X)*(2/3-ee)*6:X}function hslaToRgba(X){var $=X.hue,ee=X.saturation,ne=X.lightness,ae=X.alpha;$/=360,ne/=100;var de=0,fe=0,Ue=0;if(ee/=100){var je=ne<.5?ne*(1+ee):ne+ee-ne*ee,Ke=2*ne-je;de=hueToRgb(Ke,je,$+1/3),fe=hueToRgb(Ke,je,$),Ue=hueToRgb(Ke,je,$-1/3)}else de=fe=Ue=ne;return{red:Math.round(255*de),green:Math.round(255*fe),blue:Math.round(255*Ue),alpha:ae}}var Ew=function mixLinearColor(X,$,ee){var ne=X*X,ae=$*$;return Math.sqrt(Math.max(0,ee*(ae-ne)+ne))},Tw=[bw,yw,Mw],Pw=function getColorType(X){return Tw.find((function($){return $.test(X)}))},Dw=function notAnimatable(X){return"'".concat(X,"' is not an animatable color. Use the equivalent color code instead.")},Lw=function mixColor(X,$){var ee=Pw(X),ne=Pw($);Dw(X),Dw($);var ae=ee.parse(X),de=ne.parse($);ee===Mw&&(ae=hslaToRgba(ae),ee=yw),ne===Mw&&(de=hslaToRgba(de),ne=yw);var fe=Object.assign({},ae);return function(X){for(var $ in fe)"alpha"!==$&&(fe[$]=Ew(ae[$],de[$],X));return fe.alpha=Z_(ae.alpha,de.alpha,X),ee.transform(fe)}},Ow=__webpack_require__(982),Rw={test:function test(X){return yw.test(X)||bw.test(X)||Mw.test(X)},parse:function parse(X){return yw.test(X)?yw.parse(X):Mw.test(X)?Mw.parse(X):bw.parse(X)},transform:function transform(X){return utils_isString(X)?X:X.hasOwnProperty("red")?yw.transform(X):Mw.transform(X)}},Bw="${c}",Iw="${n}";function analyse(X){"number"===typeof X&&(X="".concat(X));var $=[],ee=0,ne=X.match(lw);ne&&(ee=ne.length,X=X.replace(lw,Bw),$.push.apply($,(0,Ow.Z)(ne.map(Rw.parse))));var ae=X.match(sw);return ae&&(X=X.replace(sw,Iw),$.push.apply($,(0,Ow.Z)(ae.map(cw.parse)))),{values:$,numColors:ee,tokenised:X}}function complex_parse(X){return analyse(X).values}function createTransformer(X){var $=analyse(X),ee=$.values,ne=$.numColors,ae=$.tokenised,de=ee.length;return function(X){for(var $=ae,ee=0;ee<de;ee++)$=$.replace(ee<ne?Bw:Iw,ee<ne?Rw.transform(X[ee]):ow(X[ee]));return $}}var zw=function convertNumbersToZero(X){return"number"===typeof X?0:X};var Nw={test:function test(X){var $,ee,ne,ae;return isNaN(X)&&utils_isString(X)&&(null!==(ee=null===($=X.match(sw))||void 0===$?void 0:$.length)&&void 0!==ee?ee:0)+(null!==(ae=null===(ne=X.match(lw))||void 0===ne?void 0:ne.length)&&void 0!==ae?ae:0)>0},parse:complex_parse,createTransformer:createTransformer,getAnimatableNone:function getAnimatableNone(X){var $=complex_parse(X);return createTransformer(X)($.map(zw))}},Fw=function isNum(X){return"number"===typeof X},Uw=function combineFunctions(X,$){return function(ee){return $(X(ee))}},Vw=function pipe(){for(var X=arguments.length,$=new Array(X),ee=0;ee<X;ee++)$[ee]=arguments[ee];return $.reduce(Uw)};function getMixer(X,$){return Fw(X)?function(ee){return Z_(X,$,ee)}:Rw.test(X)?Lw(X,$):Gw(X,$)}var Hw=function mixArray(X,$){var ee=(0,Ow.Z)(X),ne=ee.length,ae=X.map((function(X,ee){return getMixer(X,$[ee])}));return function(X){for(var $=0;$<ne;$++)ee[$]=ae[$](X);return ee}},jw=function mixObject(X,$){var ee=Object.assign(Object.assign({},X),$),ne={};for(var ae in ee)void 0!==X[ae]&&void 0!==$[ae]&&(ne[ae]=getMixer(X[ae],$[ae]));return function(X){for(var $ in ne)ee[$]=ne[$](X);return ee}};function mix_complex_analyse(X){for(var $=Nw.parse(X),ee=$.length,ne=0,ae=0,de=0,fe=0;fe<ee;fe++)ne||"number"===typeof $[fe]?ne++:void 0!==$[fe].hue?de++:ae++;return{parsed:$,numNumbers:ne,numRGB:ae,numHSL:de}}var Gw=function mixComplex(X,$){var ee=Nw.createTransformer($),ne=mix_complex_analyse(X),ae=mix_complex_analyse($);return ne.numHSL===ae.numHSL&&ne.numRGB===ae.numRGB&&ne.numNumbers>=ae.numNumbers?Vw(Hw(ne.parsed,ae.parsed),ee):("Complex values '".concat(X,"' and '").concat($,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition."),function(ee){return"".concat(ee>0?$:X)})},Ww=function mixNumber(X,$){return function(ee){return Z_(X,$,ee)}};function createMixers(X,$,ee){for(var ne=[],ae=ee||function detectMixerFactory(X){return"number"===typeof X?Ww:"string"===typeof X?Rw.test(X)?Lw:Gw:Array.isArray(X)?Hw:"object"===typeof X?jw:void 0}(X[0]),de=X.length-1,fe=0;fe<de;fe++){var Ue=ae(X[fe],X[fe+1]);if($){var je=Array.isArray($)?$[fe]:$;Ue=Vw(je,Ue)}ne.push(Ue)}return ne}function fastInterpolate(X,$){var ee=(0,Tu.Z)(X,2),ne=ee[0],ae=ee[1],de=(0,Tu.Z)($,1)[0];return function(X){return de(iw(ne,ae,X))}}function slowInterpolate(X,$){var ee=X.length,ne=ee-1;return function(ae){var de=0,fe=!1;if(ae<=X[0]?fe=!0:ae>=X[ne]&&(de=ne-1,fe=!0),!fe){for(var Ue=1;Ue<ee&&!(X[Ue]>ae||Ue===ne);Ue++);de=Ue-1}var je=iw(X[de],X[de+1],ae);return $[de](je)}}function interpolate(X,$){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},ne=ee.clamp,ae=void 0===ne||ne,de=ee.ease,fe=ee.mixer,Ue=X.length;$.length,!de||!Array.isArray(de)||de.length,X[0]>X[Ue-1]&&(X=[].concat(X),$=[].concat($),X.reverse(),$.reverse());var je=createMixers($,de,fe),Ke=2===Ue?fastInterpolate(X,je):slowInterpolate(X,je);return ae?function($){return Ke($_(X[0],X[Ue-1],$))}:Ke}var qw=function reverseEasing(X){return function($){return 1-X(1-$)}},Yw=function mirrorEasing(X){return function($){return $<=.5?X(2*$)/2:(2-X(2*(1-$)))/2}},Jw=function createBackIn(X){return function($){return $*$*((X+1)*$-X)}},Zw=function linear(X){return X},Xw=function createExpoIn(X){return function($){return Math.pow($,X)}}(2),Kw=qw(Xw),$w=Yw(Xw),eS=function circIn(X){return 1-Math.sin(Math.acos(X))},tS=qw(eS),nS=Yw(tS),rS=Jw(1.525),iS=qw(rS),aS=Yw(rS),oS=function createAnticipate(X){var $=Jw(X);return function(X){return(X*=2)<1?.5*$(X):.5*(2-Math.pow(2,-10*(X-1)))}}(1.525),sS=function bounceOut(X){if(1===X||0===X)return X;var $=X*X;return X<.36363636363636365?7.5625*$:X<.7272727272727273?9.075*$-9.9*X+3.4:X<.9?12.066481994459833*$-19.63545706371191*X+8.898060941828255:10.8*X*X-20.52*X+10.72},lS=qw(sS);function defaultEasing(X,$){return X.map((function(){return $||$w})).splice(0,X.length-1)}function keyframes_keyframes(X){var $=X.from,ee=void 0===$?0:$,ne=X.to,ae=void 0===ne?1:ne,de=X.ease,fe=X.offset,Ue=X.duration,je=void 0===Ue?300:Ue,Ke={done:!1,value:ee},et=Array.isArray(ae)?ae:[ee,ae],tt=function convertOffsetToTimes(X,$){return X.map((function(X){return X*$}))}(fe&&fe.length===et.length?fe:function defaultOffset(X){var $=X.length;return X.map((function(X,ee){return 0!==ee?ee/($-1):0}))}(et),je);function createInterpolator(){return interpolate(tt,et,{ease:Array.isArray(de)?de:defaultEasing(et,de)})}var nt=createInterpolator();return{next:function next(X){return Ke.value=nt(X),Ke.done=X>=je,Ke},flipTarget:function flipTarget(){et.reverse(),nt=createInterpolator()}}}var uS={keyframes:keyframes_keyframes,spring:spring,decay:function decay(X){var $=X.velocity,ee=void 0===$?0:$,ne=X.from,ae=void 0===ne?0:ne,de=X.power,fe=void 0===de?.8:de,Ue=X.timeConstant,je=void 0===Ue?350:Ue,Ke=X.restDelta,et=void 0===Ke?.5:Ke,tt=X.modifyTarget,nt={done:!1,value:ae},it=fe*ee,ct=ae+it,dt=void 0===tt?ct:tt(ct);return dt!==ct&&(it=dt-ae),{next:function next(X){var $=-it*Math.exp(-X/je);return nt.done=!($>et||$<-et),nt.value=nt.done?dt:dt+$,nt},flipTarget:function flipTarget(){}}}};var cS=1/60*1e3,hS="undefined"!==typeof performance?function(){return performance.now()}:function(){return Date.now()},dS="undefined"!==typeof window?function(X){return window.requestAnimationFrame(X)}:function(X){return setTimeout((function(){return X(hS())}),cS)};var fS=!0,pS=!1,vS=!1,mS={delta:0,timestamp:0},gS=["read","update","preRender","render","postRender"],yS=gS.reduce((function(X,$){return X[$]=function es_create_render_step_createRenderStep(X){var $=[],ee=[],ne=0,ae=!1,de=!1,fe=new WeakSet,Ue={schedule:function schedule(X){var de=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&ae,Ue=de?$:ee;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&fe.add(X),-1===Ue.indexOf(X)&&(Ue.push(X),de&&ae&&(ne=$.length)),X},cancel:function cancel(X){var $=ee.indexOf(X);-1!==$&&ee.splice($,1),fe.delete(X)},process:function process(je){if(ae)de=!0;else{ae=!0;var Ke=[ee,$];if($=Ke[0],(ee=Ke[1]).length=0,ne=$.length)for(var et=0;et<ne;et++){var tt=$[et];tt(je),fe.has(tt)&&(Ue.schedule(tt),X())}ae=!1,de&&(de=!1,Ue.process(je))}}};return Ue}((function(){return pS=!0})),X}),{}),bS=gS.reduce((function(X,$){var ee=yS[$];return X[$]=function(X){var $=arguments.length>1&&void 0!==arguments[1]&&arguments[1],ne=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return pS||SS(),ee.schedule(X,$,ne)},X}),{}),xS=gS.reduce((function(X,$){return X[$]=yS[$].cancel,X}),{}),_S=(gS.reduce((function(X,$){return X[$]=function(){return yS[$].process(mS)},X}),{}),function processStep(X){return yS[X].process(mS)}),wS=function processFrame(X){pS=!1,mS.delta=fS?cS:Math.max(Math.min(X-mS.timestamp,40),1),mS.timestamp=X,vS=!0,gS.forEach(_S),vS=!1,pS&&(fS=!1,dS(processFrame))},SS=function startLoop(){pS=!0,fS=!0,vS||dS(wS)},kS=bS;function loopElapsed(X,$){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return X-$-ee}var CS=function framesync(X){var $=function passTimestamp($){var ee=$.delta;return X(ee)};return{start:function start(){return kS.update($,!0)},stop:function stop(){return xS.update($)}}};function animate(X){var $,ee,ne,ae,de,fe=X.from,Ue=X.autoplay,je=void 0===Ue||Ue,Ke=X.driver,et=void 0===Ke?CS:Ke,tt=X.elapsed,nt=void 0===tt?0:tt,it=X.repeat,ct=void 0===it?0:it,dt=X.repeatType,vt=void 0===dt?"loop":dt,gt=X.repeatDelay,yt=void 0===gt?0:gt,_t=X.onPlay,wt=X.onStop,St=X.onComplete,Ct=X.onRepeat,At=X.onUpdate,Et=tslib_es6_rest(X,["from","autoplay","driver","elapsed","repeat","repeatType","repeatDelay","onPlay","onStop","onComplete","onRepeat","onUpdate"]),Rt=Et.to,Bt=0,Ht=Et.duration,Wt=!1,qt=!0,Zt=function detectAnimationFromOptions(X){if(Array.isArray(X.to))return keyframes_keyframes;if(uS[X.type])return uS[X.type];var $=new Set(Object.keys(X));return $.has("ease")||$.has("duration")&&!$.has("dampingRatio")?keyframes_keyframes:$.has("dampingRatio")||$.has("stiffness")||$.has("mass")||$.has("damping")||$.has("restSpeed")||$.has("restDelta")?spring:keyframes_keyframes}(Et);(null===(ee=($=Zt).needsInterpolation)||void 0===ee?void 0:ee.call($,fe,Rt))&&(de=interpolate([0,100],[fe,Rt],{clamp:!1}),fe=0,Rt=100);var Xt=Zt(Object.assign(Object.assign({},Et),{from:fe,to:Rt}));function repeat(){Bt++,"reverse"===vt?nt=function reverseElapsed(X,$){var ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?$-(X-$)+ee:loopElapsed($+-X,$,ee)}(nt,Ht,yt,qt=Bt%2===0):(nt=loopElapsed(nt,Ht,yt),"mirror"===vt&&Xt.flipTarget()),Wt=!1,Ct&&Ct()}function update(X){if(qt||(X=-X),nt+=X,!Wt){var $=Xt.next(Math.max(0,nt));ae=$.value,de&&(ae=de(ae)),Wt=qt?$.done:nt<=0}null===At||void 0===At||At(ae),Wt&&(0===Bt&&(null!==Ht&&void 0!==Ht||(Ht=nt)),Bt<ct?function hasRepeatDelayElapsed(X,$,ee,ne){return ne?X>=$+ee:X<=-ee}(nt,Ht,yt,qt)&&repeat():function complete(){ne.stop(),St&&St()}())}return je&&function play(){null===_t||void 0===_t||_t(),(ne=et(update)).start()}(),{stop:function stop(){null===wt||void 0===wt||wt(),ne.stop()}}}function inertia(X){var $,ee=X.from,ne=void 0===ee?0:ee,ae=X.velocity,de=void 0===ae?0:ae,fe=X.min,Ue=X.max,je=X.power,Ke=void 0===je?.8:je,et=X.timeConstant,tt=void 0===et?750:et,nt=X.bounceStiffness,it=void 0===nt?500:nt,ct=X.bounceDamping,dt=void 0===ct?10:ct,vt=X.restDelta,gt=void 0===vt?1:vt,yt=X.modifyTarget,_t=X.driver,wt=X.onUpdate,St=X.onComplete,Ct=X.onStop;function isOutOfBounds(X){return void 0!==fe&&X<fe||void 0!==Ue&&X>Ue}function boundaryNearest(X){return void 0===fe?Ue:void 0===Ue||Math.abs(fe-X)<Math.abs(Ue-X)?fe:Ue}function startAnimation(X){null===$||void 0===$||$.stop(),$=animate(Object.assign(Object.assign({},X),{driver:_t,onUpdate:function onUpdate($){var ee;null===wt||void 0===wt||wt($),null===(ee=X.onUpdate)||void 0===ee||ee.call(X,$)},onComplete:St,onStop:Ct}))}function startSpring(X){startAnimation(Object.assign({type:"spring",stiffness:it,damping:dt,restDelta:gt},X))}if(isOutOfBounds(ne))startSpring({from:ne,velocity:de,to:boundaryNearest(ne)});else{var At=Ke*de+ne;"undefined"!==typeof yt&&(At=yt(At));var Et,Rt,Bt=boundaryNearest(At),Ht=Bt===fe?-1:1;startAnimation({type:"decay",from:ne,velocity:de,timeConstant:tt,power:Ke,restDelta:gt,modifyTarget:yt,onUpdate:isOutOfBounds(At)?function checkBoundary(X){Et=Rt,Rt=X,de=velocityPerSecond(X-Et,function getFrameData(){return mS}().delta),(1===Ht&&X>Bt||-1===Ht&&X<Bt)&&startSpring({from:X,to:Bt,velocity:de})}:void 0})}return{stop:function stop(){return null===$||void 0===$?void 0:$.stop()}}}var AS=function secondsToMilliseconds(X){return 1e3*X},MS=function a(X,$){return 1-3*$+3*X},ES=function b(X,$){return 3*$-6*X},TS=function c(X){return 3*X},PS=function calcBezier(X,$,ee){return((MS($,ee)*X+ES($,ee))*X+TS($))*X},DS=function getSlope(X,$,ee){return 3*MS($,ee)*X*X+2*ES($,ee)*X+TS($)};var LS=.1;function cubicBezier(X,$,ee,ne){if(X===$&&ee===ne)return Zw;for(var ae=new Float32Array(11),de=0;de<11;++de)ae[de]=PS(de*LS,X,ee);function getTForX($){for(var ne=0,de=1;10!==de&&ae[de]<=$;++de)ne+=LS;--de;var fe=ne+($-ae[de])/(ae[de+1]-ae[de])*LS,Ue=DS(fe,X,ee);return Ue>=.001?function newtonRaphsonIterate(X,$,ee,ne){for(var ae=0;ae<8;++ae){var de=DS($,ee,ne);if(0===de)return $;$-=(PS($,ee,ne)-X)/de}return $}($,fe,X,ee):0===Ue?fe:function binarySubdivide(X,$,ee,ne,ae){var de,fe,Ue=0;do{(de=PS(fe=$+(ee-$)/2,ne,ae)-X)>0?ee=fe:$=fe}while(Math.abs(de)>1e-7&&++Ue<10);return fe}($,ne,ne+LS,X,ee)}return function(X){return 0===X||1===X?X:PS(getTForX(X),$,ne)}}var OS={linear:Zw,easeIn:Xw,easeInOut:$w,easeOut:Kw,circIn:eS,circInOut:nS,circOut:tS,backIn:rS,backInOut:aS,backOut:iS,anticipate:oS,bounceIn:lS,bounceInOut:function bounceInOut(X){return X<.5?.5*(1-sS(1-2*X)):.5*sS(2*X-1)+.5},bounceOut:sS},RS=function easingDefinitionToFunction(X){if(Array.isArray(X)){X.length;var $=tslib_es6_read(X,4);return cubicBezier($[0],$[1],$[2],$[3])}return"string"===typeof X?("Invalid easing type '".concat(X,"'"),OS[X]):X},BS=function isAnimatable(X,$){return"zIndex"!==X&&(!("number"!==typeof $&&!Array.isArray($))||!("string"!==typeof $||!Nw.test($)||$.startsWith("url(")))},IS=function isKeyframesTarget(X){return Array.isArray(X)},zS=function underDampedSpring(){return{type:"spring",stiffness:500,damping:25,restSpeed:10}},NS=function criticallyDampedSpring(X){return{type:"spring",stiffness:550,damping:0===X?2*Math.sqrt(550):30,restSpeed:10}},FS=function linearTween(){return{type:"keyframes",ease:"linear",duration:.3}},US=function keyframes(X){return{type:"keyframes",duration:.8,values:X}},VS={x:zS,y:zS,z:zS,rotate:zS,rotateX:zS,rotateY:zS,rotateZ:zS,scaleX:NS,scaleY:NS,scale:NS,opacity:FS,backgroundColor:FS,color:FS,default:NS},jS=new Set(["brightness","contrast","saturate","opacity"]);function applyDefaultFilter(X){var $=X.slice(0,-1).split("("),ee=(0,Tu.Z)($,2),ne=ee[0],ae=ee[1];if("drop-shadow"===ne)return X;var de=ae.match(sw)||[],fe=(0,Tu.Z)(de,1)[0];if(!fe)return X;var Ue=ae.replace(fe,""),je=jS.has(ne)?1:0;return fe!==ae&&(je*=100),ne+"("+je+Ue+")"}var GS=/([a-z-]*)\(.*?\)/g,WS=Object.assign(Object.assign({},Nw),{getAnimatableNone:function getAnimatableNone(X){var $=X.match(GS);return $?$.map(applyDefaultFilter).join(" "):X}}),qS=b_(b_({},cw),{transform:Math.round}),YS={borderWidth:Sw,borderTopWidth:Sw,borderRightWidth:Sw,borderBottomWidth:Sw,borderLeftWidth:Sw,borderRadius:Sw,radius:Sw,borderTopLeftRadius:Sw,borderTopRightRadius:Sw,borderBottomRightRadius:Sw,borderBottomLeftRadius:Sw,width:Sw,maxWidth:Sw,height:Sw,maxHeight:Sw,size:Sw,top:Sw,right:Sw,bottom:Sw,left:Sw,padding:Sw,paddingTop:Sw,paddingRight:Sw,paddingBottom:Sw,paddingLeft:Sw,margin:Sw,marginTop:Sw,marginRight:Sw,marginBottom:Sw,marginLeft:Sw,rotate:_w,rotateX:_w,rotateY:_w,rotateZ:_w,scale:dw,scaleX:dw,scaleY:dw,scaleZ:dw,skew:_w,skewX:_w,skewY:_w,distance:Sw,translateX:Sw,translateY:Sw,translateZ:Sw,x:Sw,y:Sw,z:Sw,perspective:Sw,transformPerspective:Sw,opacity:hw,originX:Aw,originY:Aw,originZ:Sw,zIndex:qS,fillOpacity:hw,strokeOpacity:hw,numOctaves:qS},JS=b_(b_({},YS),{color:Rw,backgroundColor:Rw,outlineColor:Rw,fill:Rw,stroke:Rw,borderColor:Rw,borderTopColor:Rw,borderRightColor:Rw,borderBottomColor:Rw,borderLeftColor:Rw,filter:WS,WebkitFilter:WS}),XS=function getDefaultValueType(X){return JS[X]};function animatable_none_getAnimatableNone(X,$){var ee,ne=XS(X);return ne!==WS&&(ne=Nw),null===(ee=ne.getAnimatableNone)||void 0===ee?void 0:ee.call(ne,$)}var KS=!1,nk=function resolveFinalValueInKeyframes(X){return IS(X)?X[X.length-1]||0:X};function convertTransitionToAnimationOptions(X){var $=X.ease,ee=X.times,ne=X.yoyo,ae=X.flip,de=X.loop,fe=tslib_es6_rest(X,["ease","times","yoyo","flip","loop"]),Ue=b_({},fe);return ee&&(Ue.offset=ee),fe.duration&&(Ue.duration=AS(fe.duration)),fe.repeatDelay&&(Ue.repeatDelay=AS(fe.repeatDelay)),$&&(Ue.ease=function isEasingArray(X){return Array.isArray(X)&&"number"!==typeof X[0]}($)?$.map(RS):RS($)),"tween"===fe.type&&(Ue.type="keyframes"),(ne||de||ae)&&(!0,ne?Ue.repeatType="reverse":de?Ue.repeatType="loop":ae&&(Ue.repeatType="mirror"),Ue.repeat=de||ne||ae||fe.repeat),"spring"!==fe.type&&(Ue.type="keyframes"),Ue}function getPopmotionAnimationOptions(X,$,ee){var ne;return Array.isArray($.to)&&(null!==(ne=X.duration)&&void 0!==ne||(X.duration=.8)),function hydrateKeyframes(X){return Array.isArray(X.to)&&null===X.to[0]&&(X.to=tslib_es6_spreadArray([],tslib_es6_read(X.to),!1),X.to[0]=X.from),X}($),function isTransitionDefined(X){X.when,X.delay,X.delayChildren,X.staggerChildren,X.staggerDirection,X.repeat,X.repeatType,X.repeatDelay,X.from;var $=tslib_es6_rest(X,["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from"]);return!!Object.keys($).length}(X)||(X=b_(b_({},X),function getDefaultTransition(X,$){var ee;return ee=IS($)?US:VS[X]||VS.default,b_({to:$},ee($))}(ee,$.to))),b_(b_({},$),convertTransitionToAnimationOptions(X))}function isZero(X){return 0===X||"string"===typeof X&&0===parseFloat(X)&&-1===X.indexOf(" ")}function getZeroUnit(X){return"number"===typeof X?0:animatable_none_getAnimatableNone("",X)}function getValueTransition(X,$){return X[$]||X.default||X}function startAnimation(X,$,ee,ne){return void 0===ne&&(ne={}),KS&&(ne={type:!1}),$.start((function(ae){var de,fe,Ue=function getAnimation(X,$,ee,ne,ae){var de,fe=getValueTransition(ne,X),Ue=null!==(de=fe.from)&&void 0!==de?de:$.get(),je=BS(X,ee);"none"===Ue&&je&&"string"===typeof ee?Ue=animatable_none_getAnimatableNone(X,ee):isZero(Ue)&&"string"===typeof ee?Ue=getZeroUnit(ee):!Array.isArray(ee)&&isZero(ee)&&"string"===typeof Ue&&(ee=getZeroUnit(Ue));var Ke=BS(X,Ue);return"You are trying to animate ".concat(X,' from "').concat(Ue,'" to "').concat(ee,'". ').concat(Ue," is not an animatable value - to enable this animation set ").concat(Ue," to a value animatable to ").concat(ee," via the `style` property."),Ke&&je&&!1!==fe.type?function start(){var ne={from:Ue,to:ee,velocity:$.getVelocity(),onComplete:ae,onUpdate:function onUpdate(X){return $.set(X)}};return"inertia"===fe.type||"decay"===fe.type?inertia(b_(b_({},ne),fe)):animate(b_(b_({},getPopmotionAnimationOptions(fe,ne,X)),{onUpdate:function onUpdate(X){var $;ne.onUpdate(X),null===($=fe.onUpdate)||void 0===$||$.call(fe,X)},onComplete:function onComplete(){var X;ne.onComplete(),null===(X=fe.onComplete)||void 0===X||X.call(fe)}}))}:function set(){var X,ne,de=nk(ee);return $.set(de),ae(),null===(X=null===fe||void 0===fe?void 0:fe.onUpdate)||void 0===X||X.call(fe,de),null===(ne=null===fe||void 0===fe?void 0:fe.onComplete)||void 0===ne||ne.call(fe),{stop:function stop(){}}}}(X,$,ee,ne,ae),je=function getDelayFromTransition(X,$){var ee,ne;return null!==(ne=null!==(ee=(getValueTransition(X,$)||{}).delay)&&void 0!==ee?ee:X.delay)&&void 0!==ne?ne:0}(ne,X),Ke=function start(){return fe=Ue()};return je?de=window.setTimeout(Ke,AS(je)):Ke(),function(){clearTimeout(de),null===fe||void 0===fe||fe.stop()}}))}var rk=["TopLeft","TopRight","BottomLeft","BottomRight"],ok=rk.length,pk=function asNumber(X){return"string"===typeof X?parseFloat(X):X},vk=function isPx(X){return"number"===typeof X||Sw.test(X)};function getRadius(X,$){var ee;return null!==(ee=X[$])&&void 0!==ee?ee:X.borderRadius}var _k=compress(0,.5,tS),Ok=compress(.5,.95,Zw);function compress(X,$,ee){return function(ne){return ne<X?0:ne>$?1:ee(iw(X,$,ne))}}function copyAxisInto(X,$){X.min=$.min,X.max=$.max}function copyBoxInto(X,$){copyAxisInto(X.x,$.x),copyAxisInto(X.y,$.y)}function isIdentityScale(X){return void 0===X||1===X}function hasScale(X){var $=X.scale,ee=X.scaleX,ne=X.scaleY;return!isIdentityScale($)||!isIdentityScale(ee)||!isIdentityScale(ne)}function hasTransform(X){return hasScale(X)||hasTranslate(X.x)||hasTranslate(X.y)||X.z||X.rotate||X.rotateX||X.rotateY}function hasTranslate(X){return X&&"0%"!==X}function scalePoint(X,$,ee){return ee+$*(X-ee)}function applyPointDelta(X,$,ee,ne,ae){return void 0!==ae&&(X=scalePoint(X,ae,ne)),scalePoint(X,ee,ne)+$}function applyAxisDelta(X,$,ee,ne,ae){void 0===$&&($=0),void 0===ee&&(ee=1),X.min=applyPointDelta(X.min,$,ee,ne,ae),X.max=applyPointDelta(X.max,$,ee,ne,ae)}function applyBoxDelta(X,$){var ee=$.x,ne=$.y;applyAxisDelta(X.x,ee.translate,ee.scale,ee.originPoint),applyAxisDelta(X.y,ne.translate,ne.scale,ne.originPoint)}function translateAxis(X,$){X.min=X.min+$,X.max=X.max+$}function transformAxis(X,$,ee){var ne=tslib_es6_read(ee,3),ae=ne[0],de=ne[1],fe=ne[2],Ue=void 0!==$[fe]?$[fe]:.5,je=Z_(X.min,X.max,Ue);applyAxisDelta(X,$[ae],$[de],je,$.scale)}var Fk=["x","scaleX","originX"],Vk=["y","scaleY","originY"];function transformBox(X,$){transformAxis(X.x,$,Fk),transformAxis(X.y,$,Vk)}var Wk=function isPoint(X){return X.hasOwnProperty("x")&&X.hasOwnProperty("y")},qk=function isPoint3D(X){return Wk(X)&&X.hasOwnProperty("z")},Yk=function distance1D(X,$){return Math.abs(X-$)};function distance_distance(X,$){if(Fw(X)&&Fw($))return Yk(X,$);if(Wk(X)&&Wk($)){var ee=Yk(X.x,$.x),ne=Yk(X.y,$.y),ae=qk(X)&&qk($)?Yk(X.z,$.z):0;return Math.sqrt(Math.pow(ee,2)+Math.pow(ne,2)+Math.pow(ae,2))}}function calcLength(X){return X.max-X.min}function isNear(X,$,ee){return void 0===$&&($=0),void 0===ee&&(ee=.01),distance_distance(X,$)<ee}function calcAxisDelta(X,$,ee,ne){void 0===ne&&(ne=.5),X.origin=ne,X.originPoint=Z_($.min,$.max,X.origin),X.scale=calcLength(ee)/calcLength($),(isNear(X.scale,1,1e-4)||isNaN(X.scale))&&(X.scale=1),X.translate=Z_(ee.min,ee.max,X.origin)-X.originPoint,(isNear(X.translate)||isNaN(X.translate))&&(X.translate=0)}function calcBoxDelta(X,$,ee,ne){calcAxisDelta(X.x,$.x,ee.x,null===ne||void 0===ne?void 0:ne.originX),calcAxisDelta(X.y,$.y,ee.y,null===ne||void 0===ne?void 0:ne.originY)}function calcRelativeAxis(X,$,ee){X.min=ee.min+$.min,X.max=X.min+calcLength($)}function calcRelativeAxisPosition(X,$,ee){X.min=$.min-ee.min,X.max=X.min+calcLength($)}function calcRelativePosition(X,$,ee){calcRelativeAxisPosition(X.x,$.x,ee.x),calcRelativeAxisPosition(X.y,$.y,ee.y)}function removePointDelta(X,$,ee,ne,ae){return X=scalePoint(X-=$,1/ee,ne),void 0!==ae&&(X=scalePoint(X,1/ae,ne)),X}function removeAxisTransforms(X,$,ee,ne,ae){var de=tslib_es6_read(ee,3),fe=de[0],Ue=de[1],je=de[2];!function removeAxisDelta(X,$,ee,ne,ae,de,fe){if(void 0===$&&($=0),void 0===ee&&(ee=1),void 0===ne&&(ne=.5),void 0===de&&(de=X),void 0===fe&&(fe=X),ww.test($)&&($=parseFloat($),$=Z_(fe.min,fe.max,$/100)-fe.min),"number"===typeof $){var Ue=Z_(de.min,de.max,ne);X===de&&(Ue-=$),X.min=removePointDelta(X.min,$,ee,Ue,ae),X.max=removePointDelta(X.max,$,ee,Ue,ae)}}(X,$[fe],$[Ue],$[je],$.scale,ne,ae)}var Zk=["x","scaleX","originX"],Xk=["y","scaleY","originY"];function removeBoxTransforms(X,$,ee,ne){removeAxisTransforms(X.x,$,Zk,null===ee||void 0===ee?void 0:ee.x,null===ne||void 0===ne?void 0:ne.x),removeAxisTransforms(X.y,$,Xk,null===ee||void 0===ee?void 0:ee.y,null===ne||void 0===ne?void 0:ne.y)}function isAxisDeltaZero(X){return 0===X.translate&&1===X.scale}function isDeltaZero(X){return isAxisDeltaZero(X.x)&&isAxisDeltaZero(X.y)}function boxEquals(X,$){return X.x.min===$.x.min&&X.x.max===$.x.max&&X.y.min===$.y.min&&X.y.max===$.y.max}var $k=function(){function NodeStack(){this.members=[]}return NodeStack.prototype.add=function(X){addUniqueItem(this.members,X),X.scheduleRender()},NodeStack.prototype.remove=function(X){if(array_removeItem(this.members,X),X===this.prevLead&&(this.prevLead=void 0),X===this.lead){var $=this.members[this.members.length-1];$&&this.promote($)}},NodeStack.prototype.relegate=function(X){var $,ee=this.members.findIndex((function($){return X===$}));if(0===ee)return!1;for(var ne=ee;ne>=0;ne--){var ae=this.members[ne];if(!1!==ae.isPresent){$=ae;break}}return!!$&&(this.promote($),!0)},NodeStack.prototype.promote=function(X,$){var ee,ne=this.lead;X!==ne&&(this.prevLead=ne,this.lead=X,X.show(),ne&&(ne.instance&&ne.scheduleRender(),X.scheduleRender(),X.resumeFrom=ne,$&&(X.resumeFrom.preserveOpacity=!0),ne.snapshot&&(X.snapshot=ne.snapshot,X.snapshot.latestValues=ne.animationValues||ne.latestValues,X.snapshot.isShared=!0),(null===(ee=X.root)||void 0===ee?void 0:ee.isUpdating)&&(X.isLayoutDirty=!0),!1===X.options.crossfade&&ne.hide()))},NodeStack.prototype.exitAnimationComplete=function(){this.members.forEach((function(X){var $,ee,ne,ae,de;null===(ee=($=X.options).onExitComplete)||void 0===ee||ee.call($),null===(de=null===(ne=X.resumingFrom)||void 0===ne?void 0:(ae=ne.options).onExitComplete)||void 0===de||de.call(ae)}))},NodeStack.prototype.scheduleRender=function(){this.members.forEach((function(X){X.instance&&X.scheduleRender(!1)}))},NodeStack.prototype.removeLeadSnapshot=function(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)},NodeStack}(),eC={};function buildProjectionTransform(X,$,ee){var ne=X.x.translate/$.x,ae=X.y.translate/$.y,de="translate3d(".concat(ne,"px, ").concat(ae,"px, 0) ");if(ee){var fe=ee.rotate,Ue=ee.rotateX,je=ee.rotateY;fe&&(de+="rotate(".concat(fe,"deg) ")),Ue&&(de+="rotateX(".concat(Ue,"deg) ")),je&&(de+="rotateY(".concat(je,"deg) "))}return"translate3d(0px, 0px, 0) scale(1, 1)"===(de+="scale(".concat(X.x.scale,", ").concat(X.y.scale,")"))?"none":de}function eachAxis(X){return[X("x"),X("y")]}var tC=["","X","Y","Z"],nC=["transformPerspective","x","y","z"];function sortTransformProps(X,$){return nC.indexOf(X)-nC.indexOf($)}["translate","scale","rotate","skew"].forEach((function(X){return tC.forEach((function($){return nC.push(X+$)}))}));var rC=new Set(nC);function isTransformProp(X){return rC.has(X)}var iC=new Set(["originX","originY","originZ"]);function isTransformOriginProp(X){return iC.has(X)}var aC=function compareByDepth(X,$){return X.depth-$.depth},oC=function(){function FlatTree(){this.children=[],this.isDirty=!1}return FlatTree.prototype.add=function(X){addUniqueItem(this.children,X),this.isDirty=!0},FlatTree.prototype.remove=function(X){array_removeItem(this.children,X),this.isDirty=!0},FlatTree.prototype.forEach=function(X){this.isDirty&&this.children.sort(aC),this.isDirty=!1,this.children.forEach(X)},FlatTree}();function resolveMotionValue(X){var $=K_(X)?X.get():X;return function isCustomValue(X){return Boolean(X&&"object"===typeof X&&X.mix&&X.toValue)}($)?$.toValue():$}var sC={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function createProjectionNode(X){var $=X.attachResizeListener,ee=X.defaultParent,ne=X.measureScroll,ae=X.resetTransform;return function(){function ProjectionNode(X,$,ne){var ae=this;void 0===$&&($={}),void 0===ne&&(ne=null===ee||void 0===ee?void 0:ee()),this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.potentialNodes=new Map,this.checkUpdateFailed=function(){ae.isUpdating&&(ae.isUpdating=!1,ae.clearAllSnapshots())},this.updateProjection=function(){ae.nodes.forEach(resolveTargetDelta),ae.nodes.forEach(calcProjection)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.id=X,this.latestValues=$,this.root=ne?ne.root||ne:this,this.path=ne?tslib_es6_spreadArray(tslib_es6_spreadArray([],tslib_es6_read(ne.path),!1),[ne],!1):[],this.parent=ne,this.depth=ne?ne.depth+1:0,X&&this.root.registerPotentialNode(X,this);for(var de=0;de<this.path.length;de++)this.path[de].shouldResetTransform=!0;this.root===this&&(this.nodes=new oC)}return ProjectionNode.prototype.addEventListener=function(X,$){return this.eventHandlers.has(X)||this.eventHandlers.set(X,new X_),this.eventHandlers.get(X).add($)},ProjectionNode.prototype.notifyListeners=function(X){for(var $=[],ee=1;ee<arguments.length;ee++)$[ee-1]=arguments[ee];var ne=this.eventHandlers.get(X);null===ne||void 0===ne||ne.notify.apply(ne,tslib_es6_spreadArray([],tslib_es6_read($),!1))},ProjectionNode.prototype.hasListeners=function(X){return this.eventHandlers.has(X)},ProjectionNode.prototype.registerPotentialNode=function(X,$){this.potentialNodes.set(X,$)},ProjectionNode.prototype.mount=function(X,ee){var ne,ae=this;if(void 0===ee&&(ee=!1),!this.instance){this.isSVG=X instanceof SVGElement&&"svg"!==X.tagName,this.instance=X;var de=this.options,fe=de.layoutId,Ue=de.layout,je=de.visualElement;if(je&&!je.getInstance()&&je.mount(X),this.root.nodes.add(this),null===(ne=this.parent)||void 0===ne||ne.children.add(this),this.id&&this.root.potentialNodes.delete(this.id),ee&&(Ue||fe)&&(this.isLayoutDirty=!0),$){var Ke,et=function resizeUnblockUpdate_1(){return ae.root.updateBlockedByResize=!1};$(X,(function(){ae.root.updateBlockedByResize=!0,clearTimeout(Ke),Ke=window.setTimeout(et,250),sC.hasAnimatedSinceResize&&(sC.hasAnimatedSinceResize=!1,ae.nodes.forEach(finishAnimation))}))}fe&&this.root.registerSharedNode(fe,this),!1!==this.options.animate&&je&&(fe||Ue)&&this.addEventListener("didUpdate",(function(X){var $,ee,ne,de,fe,Ue=X.delta,Ke=X.hasLayoutChanged,et=X.hasRelativeTargetChanged,tt=X.layout;if(ae.isTreeAnimationBlocked())return ae.target=void 0,void(ae.relativeTarget=void 0);var nt=null!==(ee=null!==($=ae.options.transition)&&void 0!==$?$:je.getDefaultTransition())&&void 0!==ee?ee:lC,it=je.getProps(),ct=it.onLayoutAnimationStart,dt=it.onLayoutAnimationComplete,vt=!ae.targetLayout||!boxEquals(ae.targetLayout,tt)||et,gt=!Ke&&et;if((null===(ne=ae.resumeFrom)||void 0===ne?void 0:ne.instance)||gt||Ke&&(vt||!ae.currentAnimation)){ae.resumeFrom&&(ae.resumingFrom=ae.resumeFrom,ae.resumingFrom.resumingFrom=void 0),ae.setAnimationOrigin(Ue,gt);var yt=b_(b_({},getValueTransition(nt,"layout")),{onPlay:ct,onComplete:dt});je.shouldReduceMotion&&(yt.delay=0,yt.type=!1),ae.startAnimation(yt)}else Ke||0!==ae.animationProgress||ae.finishAnimation(),ae.isLead()&&(null===(fe=(de=ae.options).onExitComplete)||void 0===fe||fe.call(de));ae.targetLayout=tt}))}},ProjectionNode.prototype.unmount=function(){var X,$;this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this),null===(X=this.getStack())||void 0===X||X.remove(this),null===($=this.parent)||void 0===$||$.children.delete(this),this.instance=void 0,H_.preRender(this.updateProjection)},ProjectionNode.prototype.blockUpdate=function(){this.updateManuallyBlocked=!0},ProjectionNode.prototype.unblockUpdate=function(){this.updateManuallyBlocked=!1},ProjectionNode.prototype.isUpdateBlocked=function(){return this.updateManuallyBlocked||this.updateBlockedByResize},ProjectionNode.prototype.isTreeAnimationBlocked=function(){var X;return this.isAnimationBlocked||(null===(X=this.parent)||void 0===X?void 0:X.isTreeAnimationBlocked())||!1},ProjectionNode.prototype.startUpdate=function(){var X;this.isUpdateBlocked()||(this.isUpdating=!0,null===(X=this.nodes)||void 0===X||X.forEach(resetRotation))},ProjectionNode.prototype.willUpdate=function(X){var $,ee,ne;if(void 0===X&&(X=!0),this.root.isUpdateBlocked())null===(ee=($=this.options).onExitComplete)||void 0===ee||ee.call($);else if(!this.root.isUpdating&&this.root.startUpdate(),!this.isLayoutDirty){this.isLayoutDirty=!0;for(var ae=0;ae<this.path.length;ae++){var de=this.path[ae];de.shouldResetTransform=!0,de.updateScroll()}var fe=this.options,Ue=fe.layoutId,je=fe.layout;if(void 0!==Ue||je){var Ke=null===(ne=this.options.visualElement)||void 0===ne?void 0:ne.getProps().transformTemplate;this.prevTransformTemplateValue=null===Ke||void 0===Ke?void 0:Ke(this.latestValues,""),this.updateSnapshot(),X&&this.notifyListeners("willUpdate")}}},ProjectionNode.prototype.didUpdate=function(){if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(clearMeasurements);this.isUpdating&&(this.isUpdating=!1,this.potentialNodes.size&&(this.potentialNodes.forEach(mountNodeEarly),this.potentialNodes.clear()),this.nodes.forEach(resetTransformStyle),this.nodes.forEach(updateLayout),this.nodes.forEach(notifyLayoutUpdate),this.clearAllSnapshots(),j_.update(),j_.preRender(),j_.render())},ProjectionNode.prototype.clearAllSnapshots=function(){this.nodes.forEach(clearSnapshot),this.sharedNodes.forEach(removeLeadSnapshots)},ProjectionNode.prototype.scheduleUpdateProjection=function(){J_.preRender(this.updateProjection,!1,!0)},ProjectionNode.prototype.scheduleCheckAfterUnmount=function(){var X=this;J_.postRender((function(){X.isLayoutDirty?X.root.didUpdate():X.root.checkUpdateFailed()}))},ProjectionNode.prototype.updateSnapshot=function(){if(!this.snapshot&&this.instance){var X=this.measure(),$=this.removeTransform(this.removeElementScroll(X));roundBox($),this.snapshot={measured:X,layout:$,latestValues:{}}}},ProjectionNode.prototype.updateLayout=function(){var X;if(this.instance&&(this.updateScroll(),this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty)){if(this.resumeFrom&&!this.resumeFrom.instance)for(var $=0;$<this.path.length;$++){this.path[$].updateScroll()}var ee=this.measure();roundBox(ee);var ne=this.layout;this.layout={measured:ee,actual:this.removeElementScroll(ee)},this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.actual),null===(X=this.options.visualElement)||void 0===X||X.notifyLayoutMeasure(this.layout.actual,null===ne||void 0===ne?void 0:ne.actual)}},ProjectionNode.prototype.updateScroll=function(){this.options.layoutScroll&&this.instance&&(this.scroll=ne(this.instance))},ProjectionNode.prototype.resetTransform=function(){var X;if(ae){var $=this.isLayoutDirty||this.shouldResetTransform,ee=this.projectionDelta&&!isDeltaZero(this.projectionDelta),ne=null===(X=this.options.visualElement)||void 0===X?void 0:X.getProps().transformTemplate,de=null===ne||void 0===ne?void 0:ne(this.latestValues,""),fe=de!==this.prevTransformTemplateValue;$&&(ee||hasTransform(this.latestValues)||fe)&&(ae(this.instance,de),this.shouldResetTransform=!1,this.scheduleRender())}},ProjectionNode.prototype.measure=function(){var X=this.options.visualElement;if(!X)return{x:{min:0,max:0},y:{min:0,max:0}};var $=X.measureViewportBox(),ee=this.root.scroll;return ee&&(translateAxis($.x,ee.x),translateAxis($.y,ee.y)),$},ProjectionNode.prototype.removeElementScroll=function(X){var $={x:{min:0,max:0},y:{min:0,max:0}};copyBoxInto($,X);for(var ee=0;ee<this.path.length;ee++){var ne=this.path[ee],ae=ne.scroll,de=ne.options;ne!==this.root&&ae&&de.layoutScroll&&(translateAxis($.x,ae.x),translateAxis($.y,ae.y))}return $},ProjectionNode.prototype.applyTransform=function(X,$){void 0===$&&($=!1);var ee={x:{min:0,max:0},y:{min:0,max:0}};copyBoxInto(ee,X);for(var ne=0;ne<this.path.length;ne++){var ae=this.path[ne];!$&&ae.options.layoutScroll&&ae.scroll&&ae!==ae.root&&transformBox(ee,{x:-ae.scroll.x,y:-ae.scroll.y}),hasTransform(ae.latestValues)&&transformBox(ee,ae.latestValues)}return hasTransform(this.latestValues)&&transformBox(ee,this.latestValues),ee},ProjectionNode.prototype.removeTransform=function(X){var $,ee={x:{min:0,max:0},y:{min:0,max:0}};copyBoxInto(ee,X);for(var ne=0;ne<this.path.length;ne++){var ae=this.path[ne];if(ae.instance&&hasTransform(ae.latestValues)){hasScale(ae.latestValues)&&ae.updateSnapshot();var de={x:{min:0,max:0},y:{min:0,max:0}};copyBoxInto(de,ae.measure()),removeBoxTransforms(ee,ae.latestValues,null===($=ae.snapshot)||void 0===$?void 0:$.layout,de)}}return hasTransform(this.latestValues)&&removeBoxTransforms(ee,this.latestValues),ee},ProjectionNode.prototype.setTargetDelta=function(X){this.targetDelta=X,this.root.scheduleUpdateProjection()},ProjectionNode.prototype.setOptions=function(X){var $;this.options=b_(b_(b_({},this.options),X),{crossfade:null===($=X.crossfade)||void 0===$||$})},ProjectionNode.prototype.clearMeasurements=function(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1},ProjectionNode.prototype.resolveTargetDelta=function(){var X,$=this.options,ee=$.layout,ne=$.layoutId;this.layout&&(ee||ne)&&(this.targetDelta||this.relativeTarget||(this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&this.relativeParent.layout&&(this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},calcRelativePosition(this.relativeTargetOrigin,this.layout.actual,this.relativeParent.layout.actual),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin))),(this.relativeTarget||this.targetDelta)&&(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&(null===(X=this.relativeParent)||void 0===X?void 0:X.target)?function calcRelativeBox(X,$,ee){calcRelativeAxis(X.x,$.x,ee.x),calcRelativeAxis(X.y,$.y,ee.y)}(this.target,this.relativeTarget,this.relativeParent.target):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.actual):copyBoxInto(this.target,this.layout.actual),applyBoxDelta(this.target,this.targetDelta)):copyBoxInto(this.target,this.layout.actual),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,this.relativeParent=this.getClosestProjectingParent(),this.relativeParent&&Boolean(this.relativeParent.resumingFrom)===Boolean(this.resumingFrom)&&!this.relativeParent.options.layoutScroll&&this.relativeParent.target&&(this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},calcRelativePosition(this.relativeTargetOrigin,this.target,this.relativeParent.target),copyBoxInto(this.relativeTarget,this.relativeTargetOrigin)))))},ProjectionNode.prototype.getClosestProjectingParent=function(){if(this.parent&&!hasTransform(this.parent.latestValues))return(this.parent.relativeTarget||this.parent.targetDelta)&&this.parent.layout?this.parent:this.parent.getClosestProjectingParent()},ProjectionNode.prototype.calcProjection=function(){var X,$=this.options,ee=$.layout,ne=$.layoutId;if(this.isTreeAnimating=Boolean((null===(X=this.parent)||void 0===X?void 0:X.isTreeAnimating)||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),this.layout&&(ee||ne)){var ae=this.getLead();copyBoxInto(this.layoutCorrected,this.layout.actual),function applyTreeDeltas(X,$,ee,ne){var ae,de;void 0===ne&&(ne=!1);var fe=ee.length;if(fe){var Ue,je;$.x=$.y=1;for(var Ke=0;Ke<fe;Ke++)je=(Ue=ee[Ke]).projectionDelta,"contents"!==(null===(de=null===(ae=Ue.instance)||void 0===ae?void 0:ae.style)||void 0===de?void 0:de.display)&&(ne&&Ue.options.layoutScroll&&Ue.scroll&&Ue!==Ue.root&&transformBox(X,{x:-Ue.scroll.x,y:-Ue.scroll.y}),je&&($.x*=je.x.scale,$.y*=je.y.scale,applyBoxDelta(X,je)),ne&&hasTransform(Ue.latestValues)&&transformBox(X,Ue.latestValues))}}(this.layoutCorrected,this.treeScale,this.path,Boolean(this.resumingFrom)||this!==ae);var de=ae.target;if(de){this.projectionDelta||(this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}});var fe=this.treeScale.x,Ue=this.treeScale.y,je=this.projectionTransform;calcBoxDelta(this.projectionDelta,this.layoutCorrected,de,this.latestValues),this.projectionTransform=buildProjectionTransform(this.projectionDelta,this.treeScale),this.projectionTransform===je&&this.treeScale.x===fe&&this.treeScale.y===Ue||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",de))}}},ProjectionNode.prototype.hide=function(){this.isVisible=!1},ProjectionNode.prototype.show=function(){this.isVisible=!0},ProjectionNode.prototype.scheduleRender=function(X){var $,ee,ne;void 0===X&&(X=!0),null===(ee=($=this.options).scheduleRender)||void 0===ee||ee.call($),X&&(null===(ne=this.getStack())||void 0===ne||ne.scheduleRender()),this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)},ProjectionNode.prototype.setAnimationOrigin=function(X,$){var ee,ne=this;void 0===$&&($=!1);var ae=this.snapshot,de=(null===ae||void 0===ae?void 0:ae.latestValues)||{},fe=b_({},this.latestValues),Ue={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeTarget=this.relativeTargetOrigin=void 0,this.attemptToResolveRelativeTarget=!$;var je={x:{min:0,max:0},y:{min:0,max:0}},Ke=null===ae||void 0===ae?void 0:ae.isShared,et=((null===(ee=this.getStack())||void 0===ee?void 0:ee.members.length)||0)<=1,tt=Boolean(Ke&&!et&&!0===this.options.crossfade&&!this.path.some(hasOpacityCrossfade));this.animationProgress=0,this.mixTargetDelta=function($){var ee,ae=$/1e3;mixAxisDelta(Ue.x,X.x,ae),mixAxisDelta(Ue.y,X.y,ae),ne.setTargetDelta(Ue),ne.relativeTarget&&ne.relativeTargetOrigin&&ne.layout&&(null===(ee=ne.relativeParent)||void 0===ee?void 0:ee.layout)&&(calcRelativePosition(je,ne.layout.actual,ne.relativeParent.layout.actual),function mixBox(X,$,ee,ne){mixAxis(X.x,$.x,ee.x,ne),mixAxis(X.y,$.y,ee.y,ne)}(ne.relativeTarget,ne.relativeTargetOrigin,je,ae)),Ke&&(ne.animationValues=fe,function mixValues(X,$,ee,ne,ae,de){var fe,Ue,je,Ke;ae?(X.opacity=Z_(0,null!==(fe=ee.opacity)&&void 0!==fe?fe:1,_k(ne)),X.opacityExit=Z_(null!==(Ue=$.opacity)&&void 0!==Ue?Ue:1,0,Ok(ne))):de&&(X.opacity=Z_(null!==(je=$.opacity)&&void 0!==je?je:1,null!==(Ke=ee.opacity)&&void 0!==Ke?Ke:1,ne));for(var et=0;et<ok;et++){var tt="border".concat(rk[et],"Radius"),nt=getRadius($,tt),it=getRadius(ee,tt);void 0===nt&&void 0===it||(nt||(nt=0),it||(it=0),0===nt||0===it||vk(nt)===vk(it)?(X[tt]=Math.max(Z_(pk(nt),pk(it),ne),0),(ww.test(it)||ww.test(nt))&&(X[tt]+="%")):X[tt]=it)}($.rotate||ee.rotate)&&(X.rotate=Z_($.rotate||0,ee.rotate||0,ne))}(fe,de,ne.latestValues,ae,tt,et)),ne.root.scheduleUpdateProjection(),ne.scheduleRender(),ne.animationProgress=ae},this.mixTargetDelta(0)},ProjectionNode.prototype.startAnimation=function(X){var $,ee,ne=this;this.notifyListeners("animationStart"),null===($=this.currentAnimation)||void 0===$||$.stop(),this.resumingFrom&&(null===(ee=this.resumingFrom.currentAnimation)||void 0===ee||ee.stop()),this.pendingAnimation&&(H_.update(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=J_.update((function(){sC.hasAnimatedSinceResize=!0,ne.currentAnimation=function animate_animate(X,$,ee){void 0===ee&&(ee={});var ne=K_(X)?X:motionValue(X);return startAnimation("",ne,$,ee),{stop:function stop(){return ne.stop()},isAnimating:function isAnimating(){return ne.isAnimating()}}}(0,1e3,b_(b_({},X),{onUpdate:function onUpdate($){var ee;ne.mixTargetDelta($),null===(ee=X.onUpdate)||void 0===ee||ee.call(X,$)},onComplete:function onComplete(){var $;null===($=X.onComplete)||void 0===$||$.call(X),ne.completeAnimation()}})),ne.resumingFrom&&(ne.resumingFrom.currentAnimation=ne.currentAnimation),ne.pendingAnimation=void 0}))},ProjectionNode.prototype.completeAnimation=function(){var X;this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0),null===(X=this.getStack())||void 0===X||X.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")},ProjectionNode.prototype.finishAnimation=function(){var X;this.currentAnimation&&(null===(X=this.mixTargetDelta)||void 0===X||X.call(this,1e3),this.currentAnimation.stop()),this.completeAnimation()},ProjectionNode.prototype.applyTransformsToTarget=function(){var X=this.getLead(),$=X.targetWithTransforms,ee=X.target,ne=X.layout,ae=X.latestValues;$&&ee&&ne&&(copyBoxInto($,ee),transformBox($,ae),calcBoxDelta(this.projectionDeltaWithTransform,this.layoutCorrected,$,ae))},ProjectionNode.prototype.registerSharedNode=function(X,$){var ee,ne,ae;this.sharedNodes.has(X)||this.sharedNodes.set(X,new $k),this.sharedNodes.get(X).add($),$.promote({transition:null===(ee=$.options.initialPromotionConfig)||void 0===ee?void 0:ee.transition,preserveFollowOpacity:null===(ae=null===(ne=$.options.initialPromotionConfig)||void 0===ne?void 0:ne.shouldPreserveFollowOpacity)||void 0===ae?void 0:ae.call(ne,$)})},ProjectionNode.prototype.isLead=function(){var X=this.getStack();return!X||X.lead===this},ProjectionNode.prototype.getLead=function(){var X;return this.options.layoutId&&(null===(X=this.getStack())||void 0===X?void 0:X.lead)||this},ProjectionNode.prototype.getPrevLead=function(){var X;return this.options.layoutId?null===(X=this.getStack())||void 0===X?void 0:X.prevLead:void 0},ProjectionNode.prototype.getStack=function(){var X=this.options.layoutId;if(X)return this.root.sharedNodes.get(X)},ProjectionNode.prototype.promote=function(X){var $=void 0===X?{}:X,ee=$.needsReset,ne=$.transition,ae=$.preserveFollowOpacity,de=this.getStack();de&&de.promote(this,ae),ee&&(this.projectionDelta=void 0,this.needsReset=!0),ne&&this.setOptions({transition:ne})},ProjectionNode.prototype.relegate=function(){var X=this.getStack();return!!X&&X.relegate(this)},ProjectionNode.prototype.resetRotation=function(){var X=this.options.visualElement;if(X){for(var $=!1,ee={},ne=0;ne<tC.length;ne++){var ae="rotate"+tC[ne];X.getStaticValue(ae)&&($=!0,ee[ae]=X.getStaticValue(ae),X.setStaticValue(ae,0))}if($){for(var ae in null===X||void 0===X||X.syncRender(),ee)X.setStaticValue(ae,ee[ae]);X.scheduleRender()}}},ProjectionNode.prototype.getProjectionStyles=function(X){var $,ee,ne,ae,de,fe;void 0===X&&(X={});var Ue={};if(!this.instance||this.isSVG)return Ue;if(!this.isVisible)return{visibility:"hidden"};Ue.visibility="";var je=null===($=this.options.visualElement)||void 0===$?void 0:$.getProps().transformTemplate;if(this.needsReset)return this.needsReset=!1,Ue.opacity="",Ue.pointerEvents=resolveMotionValue(X.pointerEvents)||"",Ue.transform=je?je(this.latestValues,""):"none",Ue;var Ke=this.getLead();if(!this.projectionDelta||!this.layout||!Ke.target){var et={};return this.options.layoutId&&(et.opacity=null!==(ee=this.latestValues.opacity)&&void 0!==ee?ee:1,et.pointerEvents=resolveMotionValue(X.pointerEvents)||""),this.hasProjected&&!hasTransform(this.latestValues)&&(et.transform=je?je({},""):"none",this.hasProjected=!1),et}var tt=Ke.animationValues||Ke.latestValues;this.applyTransformsToTarget(),Ue.transform=buildProjectionTransform(this.projectionDeltaWithTransform,this.treeScale,tt),je&&(Ue.transform=je(tt,Ue.transform));var nt=this.projectionDelta,it=nt.x,ct=nt.y;for(var dt in Ue.transformOrigin="".concat(100*it.origin,"% ").concat(100*ct.origin,"% 0"),Ke.animationValues?Ue.opacity=Ke===this?null!==(ae=null!==(ne=tt.opacity)&&void 0!==ne?ne:this.latestValues.opacity)&&void 0!==ae?ae:1:this.preserveOpacity?this.latestValues.opacity:tt.opacityExit:Ue.opacity=Ke===this?null!==(de=tt.opacity)&&void 0!==de?de:"":null!==(fe=tt.opacityExit)&&void 0!==fe?fe:0,eC)if(void 0!==tt[dt]){var vt=eC[dt],gt=vt.correct,yt=vt.applyTo,_t=gt(tt[dt],Ke);if(yt)for(var wt=yt.length,St=0;St<wt;St++)Ue[yt[St]]=_t;else Ue[dt]=_t}return this.options.layoutId&&(Ue.pointerEvents=Ke===this?resolveMotionValue(X.pointerEvents)||"":"none"),Ue},ProjectionNode.prototype.clearSnapshot=function(){this.resumeFrom=this.snapshot=void 0},ProjectionNode.prototype.resetTree=function(){this.root.nodes.forEach((function(X){var $;return null===($=X.currentAnimation)||void 0===$?void 0:$.stop()})),this.root.nodes.forEach(clearMeasurements),this.root.sharedNodes.clear()},ProjectionNode}()}function updateLayout(X){X.updateLayout()}function notifyLayoutUpdate(X){var $,ee,ne,ae,de=null!==(ee=null===($=X.resumeFrom)||void 0===$?void 0:$.snapshot)&&void 0!==ee?ee:X.snapshot;if(X.isLead()&&X.layout&&de&&X.hasListeners("didUpdate")){var fe=X.layout,Ue=fe.actual,je=fe.measured;"size"===X.options.animationType?eachAxis((function(X){var $=de.isShared?de.measured[X]:de.layout[X],ee=calcLength($);$.min=Ue[X].min,$.max=$.min+ee})):"position"===X.options.animationType&&eachAxis((function(X){var $=de.isShared?de.measured[X]:de.layout[X],ee=calcLength(Ue[X]);$.max=$.min+ee}));var Ke={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};calcBoxDelta(Ke,Ue,de.layout);var et={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};de.isShared?calcBoxDelta(et,X.applyTransform(je,!0),de.measured):calcBoxDelta(et,Ue,de.layout);var tt=!isDeltaZero(Ke),nt=!1;if(!X.resumeFrom&&(X.relativeParent=X.getClosestProjectingParent(),X.relativeParent&&!X.relativeParent.resumeFrom)){var it=X.relativeParent,ct=it.snapshot,dt=it.layout;if(ct&&dt){var vt={x:{min:0,max:0},y:{min:0,max:0}};calcRelativePosition(vt,de.layout,ct.layout);var gt={x:{min:0,max:0},y:{min:0,max:0}};calcRelativePosition(gt,Ue,dt.actual),boxEquals(vt,gt)||(nt=!0)}}X.notifyListeners("didUpdate",{layout:Ue,snapshot:de,delta:et,layoutDelta:Ke,hasLayoutChanged:tt,hasRelativeTargetChanged:nt})}else X.isLead()&&(null===(ae=(ne=X.options).onExitComplete)||void 0===ae||ae.call(ne));X.options.transition=void 0}function clearSnapshot(X){X.clearSnapshot()}function clearMeasurements(X){X.clearMeasurements()}function resetTransformStyle(X){var $=X.options.visualElement;(null===$||void 0===$?void 0:$.getProps().onBeforeLayoutMeasure)&&$.notifyBeforeLayoutMeasure(),X.resetTransform()}function finishAnimation(X){X.finishAnimation(),X.targetDelta=X.relativeTarget=X.target=void 0}function resolveTargetDelta(X){X.resolveTargetDelta()}function calcProjection(X){X.calcProjection()}function resetRotation(X){X.resetRotation()}function removeLeadSnapshots(X){X.removeLeadSnapshot()}function mixAxisDelta(X,$,ee){X.translate=Z_($.translate,0,ee),X.scale=Z_($.scale,1,ee),X.origin=$.origin,X.originPoint=$.originPoint}function mixAxis(X,$,ee,ne){X.min=Z_($.min,ee.min,ne),X.max=Z_($.max,ee.max,ne)}function hasOpacityCrossfade(X){return X.animationValues&&void 0!==X.animationValues.opacityExit}var lC={duration:.45,ease:[.4,0,.1,1]};function mountNodeEarly(X,$){for(var ee=X.root,ne=X.path.length-1;ne>=0;ne--)if(Boolean(X.path[ne].instance)){ee=X.path[ne];break}var ae=(ee&&ee!==X.root?ee.instance:document).querySelector('[data-projection-id="'.concat($,'"]'));ae&&X.mount(ae,!0)}function roundAxis(X){X.min=Math.round(X.min),X.max=Math.round(X.max)}function roundBox(X){roundAxis(X.x),roundAxis(X.y)}var uC=1;var cC=(0,X.createContext)({}),hC=(0,X.createContext)({});var dC=function(X){function VisualElementHandler(){return null!==X&&X.apply(this,arguments)||this}return __extends(VisualElementHandler,X),VisualElementHandler.prototype.getSnapshotBeforeUpdate=function(){return this.updateProps(),null},VisualElementHandler.prototype.componentDidUpdate=function(){},VisualElementHandler.prototype.updateProps=function(){var X=this.props,$=X.visualElement,ee=X.props;$&&$.setProps(ee)},VisualElementHandler.prototype.render=function(){return this.props.children},VisualElementHandler}(X.Component);function motion_createMotionComponent($){var ee=$.preloadedFeatures,ne=$.createVisualElement,ae=$.projectionNodeConstructor,de=$.useRender,fe=$.useVisualState,Ue=$.Component;return ee&&function loadFeatures(X){for(var $ in X)null!==X[$]&&("projectionNodeConstructor"===$?w_.projectionNodeConstructor=X[$]:w_[$].Component=X[$])}(ee),(0,X.forwardRef)((function MotionComponent($,ee){var je=function useLayoutId($){var ee,ne=$.layoutId,ae=null===(ee=(0,X.useContext)(cC))||void 0===ee?void 0:ee.id;return ae&&void 0!==ne?ae+"-"+ne:ne}($);$=b_(b_({},$),{layoutId:je});var Ke=(0,X.useContext)(A_),et=null,tt=useCreateMotionContext($),nt=Ke.isStatic?void 0:function useProjectionId(){return useConstant((function(){if(sC.hasEverUpdated)return uC++}))}(),it=fe($,Ke.isStatic);return!Ke.isStatic&&E_&&(tt.visualElement=useVisualElement(Ue,it,b_(b_({},Ke),$),ne),function useProjection($,ee,ne,ae){var de,fe=ee.layoutId,Ue=ee.layout,je=ee.drag,Ke=ee.dragConstraints,et=ee.layoutScroll,tt=(0,X.useContext)(hC);ae&&ne&&!(null===ne||void 0===ne?void 0:ne.projection)&&(ne.projection=new ae($,ne.getLatestValues(),null===(de=ne.parent)||void 0===de?void 0:de.projection),ne.projection.setOptions({layoutId:fe,layout:Ue,alwaysMeasureLayout:Boolean(je)||Ke&&is_ref_object_isRefObject(Ke),visualElement:ne,scheduleRender:function scheduleRender(){return ne.scheduleRender()},animationType:"string"===typeof Ue?Ue:"both",initialPromotionConfig:tt,layoutScroll:et}))}(nt,$,tt.visualElement,ae||w_.projectionNodeConstructor),et=function useFeatures($,ee,ne){var ae=[];if((0,X.useContext)(S_),!ee)return null;for(var de=0;de<C_;de++){var fe=k_[de],Ue=w_[fe],je=Ue.isEnabled,Ke=Ue.Component;je($)&&Ke&&ae.push(X.createElement(Ke,b_({key:fe},$,{visualElement:ee})))}return ae}($,tt.visualElement)),X.createElement(dC,{visualElement:tt.visualElement,props:b_(b_({},Ke),$)},et,X.createElement(M_.Provider,{value:tt},de(Ue,$,nt,function useMotionRef($,ee,ne){return(0,X.useCallback)((function(X){var ae;X&&(null===(ae=$.mount)||void 0===ae||ae.call($,X)),ee&&(X?ee.mount(X):ee.unmount()),ne&&("function"===typeof ne?ne(X):is_ref_object_isRefObject(ne)&&(ne.current=X))}),[ee])}(it,tt.visualElement,ee),it,Ke.isStatic,tt.visualElement)))}))}function createMotionProxy(X){function custom($,ee){return void 0===ee&&(ee={}),motion_createMotionComponent(X($,ee))}if("undefined"===typeof Proxy)return custom;var $=new Map;return new Proxy(custom,{get:function get(X,ee){return $.has(ee)||$.set(ee,custom(ee)),$.get(ee)}})}var fC=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","svg","switch","symbol","text","tspan","use","view"];function isSVGComponent(X){return"string"===typeof X&&!X.includes("-")&&!!(fC.indexOf(X)>-1||/[A-Z]/.test(X))}function isForcedMotionValue(X,$){var ee=$.layout,ne=$.layoutId;return isTransformProp(X)||isTransformOriginProp(X)||(ee||void 0!==ne)&&(!!eC[X]||"opacity"===X)}var pC={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"};function isCSSVariable(X){return X.startsWith("--")}var vC=function getValueAsType(X,$){return $&&"number"===typeof X?$.transform(X):X};function buildHTMLStyles(X,$,ee,ne){var ae,de=X.style,fe=X.vars,Ue=X.transform,je=X.transformKeys,Ke=X.transformOrigin;je.length=0;var et=!1,tt=!1,nt=!0;for(var it in $){var ct=$[it];if(isCSSVariable(it))fe[it]=ct;else{var dt=YS[it],vt=vC(ct,dt);if(isTransformProp(it)){if(et=!0,Ue[it]=vt,je.push(it),!nt)continue;ct!==(null!==(ae=dt.default)&&void 0!==ae?ae:0)&&(nt=!1)}else isTransformOriginProp(it)?(Ke[it]=vt,tt=!0):de[it]=vt}}et?de.transform=function buildTransform(X,$,ee,ne){var ae=X.transform,de=X.transformKeys,fe=$.enableHardwareAcceleration,Ue=void 0===fe||fe,je=$.allowTransformNone,Ke=void 0===je||je,et="";de.sort(sortTransformProps);for(var tt=!1,nt=de.length,it=0;it<nt;it++){var ct=de[it];et+="".concat(pC[ct]||ct,"(").concat(ae[ct],") "),"z"===ct&&(tt=!0)}return!tt&&Ue?et+="translateZ(0)":et=et.trim(),ne?et=ne(ae,ee?"":et):Ke&&ee&&(et="none"),et}(X,ee,nt,ne):ne?de.transform=ne({},""):!$.transform&&de.transform&&(de.transform="none"),tt&&(de.transformOrigin=function buildTransformOrigin(X){var $=X.originX,ee=void 0===$?"50%":$,ne=X.originY,ae=void 0===ne?"50%":ne,de=X.originZ,fe=void 0===de?0:de;return"".concat(ee," ").concat(ae," ").concat(fe)}(Ke))}var mC=function createHtmlRenderState(){return{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}};function copyRawValuesOnly(X,$,ee){for(var ne in $)K_($[ne])||isForcedMotionValue(ne,ee)||(X[ne]=$[ne])}function useStyle($,ee,ne){var ae={};return copyRawValuesOnly(ae,$.style||{},$),Object.assign(ae,function useInitialMotionValues($,ee,ne){var ae=$.transformTemplate;return(0,X.useMemo)((function(){var X={style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}};buildHTMLStyles(X,ee,{enableHardwareAcceleration:!ne},ae);var $=X.style;return b_(b_({},X.vars),$)}),[ee])}($,ee,ne)),$.transformValues&&(ae=$.transformValues(ae)),ae}function useHTMLProps(X,$,ee){var ne={},ae=useStyle(X,$,ee);return Boolean(X.drag)&&!1!==X.dragListener&&(ne.draggable=!1,ae.userSelect=ae.WebkitUserSelect=ae.WebkitTouchCallout="none",ae.touchAction=!0===X.drag?"none":"pan-".concat("x"===X.drag?"y":"x")),ne.style=ae,ne}var gC=new Set(["initial","animate","exit","style","variants","transition","transformTemplate","transformValues","custom","inherit","layout","layoutId","layoutDependency","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","drag","dragControls","dragListener","dragConstraints","dragDirectionLock","dragSnapToOrigin","_dragX","_dragY","dragElastic","dragMomentum","dragPropagation","dragTransition","whileDrag","onPan","onPanStart","onPanEnd","onPanSessionStart","onTap","onTapStart","onTapCancel","onHoverStart","onHoverEnd","whileFocus","whileTap","whileHover","whileInView","onViewportEnter","onViewportLeave","viewport","layoutScroll"]);function isValidMotionProp(X){return gC.has(X)}var yC=function shouldForward(X){return!isValidMotionProp(X)};try{!function loadExternalIsValidProp(X){X&&(yC=function shouldForward($){return $.startsWith("on")?!isValidMotionProp($):X($)})}(require("@emotion/is-prop-valid").default)}catch(cE){}function calcOrigin(X,$,ee){return"string"===typeof X?X:Sw.transform($+ee*X)}var bC={offset:"stroke-dashoffset",array:"stroke-dasharray"},xC={offset:"strokeDashoffset",array:"strokeDasharray"};function buildSVGAttrs(X,$,ee,ne){var ae=$.attrX,de=$.attrY,fe=$.originX,Ue=$.originY,je=$.pathLength,Ke=$.pathSpacing,et=void 0===Ke?1:Ke,tt=$.pathOffset,nt=void 0===tt?0:tt;buildHTMLStyles(X,tslib_es6_rest($,["attrX","attrY","originX","originY","pathLength","pathSpacing","pathOffset"]),ee,ne),X.attrs=X.style,X.style={};var it=X.attrs,ct=X.style,dt=X.dimensions;it.transform&&(dt&&(ct.transform=it.transform),delete it.transform),dt&&(void 0!==fe||void 0!==Ue||ct.transform)&&(ct.transformOrigin=function calcSVGTransformOrigin(X,$,ee){var ne=calcOrigin($,X.x,X.width),ae=calcOrigin(ee,X.y,X.height);return"".concat(ne," ").concat(ae)}(dt,void 0!==fe?fe:.5,void 0!==Ue?Ue:.5)),void 0!==ae&&(it.x=ae),void 0!==de&&(it.y=de),void 0!==je&&function buildSVGPath(X,$,ee,ne,ae){void 0===ee&&(ee=1),void 0===ne&&(ne=0),void 0===ae&&(ae=!0),X.pathLength=1;var de=ae?bC:xC;X[de.offset]=Sw.transform(-ne);var fe=Sw.transform($),Ue=Sw.transform(ee);X[de.array]="".concat(fe," ").concat(Ue)}(it,je,et,nt,!1)}var _C=function createSvgRenderState(){return b_(b_({},{style:{},transform:{},transformKeys:[],transformOrigin:{},vars:{}}),{attrs:{}})};function useSVGProps($,ee){var ne=(0,X.useMemo)((function(){var X=_C();return buildSVGAttrs(X,ee,{enableHardwareAcceleration:!1},$.transformTemplate),b_(b_({},X.attrs),{style:b_({},X.style)})}),[ee]);if($.style){var ae={};copyRawValuesOnly(ae,$.style,$),ne.style=b_(b_({},ae),ne.style)}return ne}function createUseRender($){void 0===$&&($=!1);return function useRender(ee,ne,ae,de,fe,Ue){var je=fe.latestValues,Ke=(isSVGComponent(ee)?useSVGProps:useHTMLProps)(ne,je,Ue),et=function filterProps(X,$,ee){var ne={};for(var ae in X)(yC(ae)||!0===ee&&isValidMotionProp(ae)||!$&&!isValidMotionProp(ae)||X.draggable&&ae.startsWith("onDrag"))&&(ne[ae]=X[ae]);return ne}(ne,"string"===typeof ee,$),tt=b_(b_(b_({},et),Ke),{ref:de});return ae&&(tt["data-projection-id"]=ae),(0,X.createElement)(ee,tt)}}var wC=/([a-z])([A-Z])/g,SC=function camelToDash(X){return X.replace(wC,"$1-$2").toLowerCase()};function renderHTML(X,$,ee,ne){var ae=$.style,de=$.vars;for(var fe in Object.assign(X.style,ae,ne&&ne.getProjectionStyles(ee)),de)X.style.setProperty(fe,de[fe])}var kC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength"]);function renderSVG(X,$,ee,ne){for(var ae in renderHTML(X,$,void 0,ne),$.attrs)X.setAttribute(kC.has(ae)?ae:SC(ae),$.attrs[ae])}function scrapeMotionValuesFromProps(X){var $=X.style,ee={};for(var ne in $)(K_($[ne])||isForcedMotionValue(ne,X))&&(ee[ne]=$[ne]);return ee}function scrape_motion_values_scrapeMotionValuesFromProps(X){var $=scrapeMotionValuesFromProps(X);for(var ee in X){if(K_(X[ee]))$["x"===ee||"y"===ee?"attr"+ee.toUpperCase():ee]=X[ee]}return $}function isAnimationControls(X){return"object"===typeof X&&"function"===typeof X.start}function makeState(X,$,ee,ne){var ae=X.scrapeMotionValuesFromProps,de=X.createRenderState,fe=X.onMount,Ue={latestValues:makeLatestValues($,ee,ne,ae),renderState:de()};return fe&&(Ue.mount=function(X){return fe($,X,Ue)}),Ue}var CC=function makeUseVisualState($){return function(ee,ne){var ae=(0,X.useContext)(M_),de=(0,X.useContext)(p_);return ne?makeState($,ee,ae,de):useConstant((function(){return makeState($,ee,ae,de)}))}};function makeLatestValues(X,$,ee,ne){var ae={},de=!1===(null===ee||void 0===ee?void 0:ee.initial),fe=ne(X);for(var Ue in fe)ae[Ue]=resolveMotionValue(fe[Ue]);var je=X.initial,Ke=X.animate,et=checkIfControllingVariants(X),tt=checkIfVariantNode(X);$&&tt&&!et&&!1!==X.inherit&&(null!==je&&void 0!==je||(je=$.initial),null!==Ke&&void 0!==Ke||(Ke=$.animate));var nt=de||!1===je,it=nt?Ke:je;it&&"boolean"!==typeof it&&!isAnimationControls(it)&&(Array.isArray(it)?it:[it]).forEach((function($){var ee=resolveVariantFromProps(X,$);if(ee){var ne=ee.transitionEnd;ee.transition;var de=tslib_es6_rest(ee,["transitionEnd","transition"]);for(var fe in de){var Ue=de[fe];if(Array.isArray(Ue))Ue=Ue[nt?Ue.length-1:0];null!==Ue&&(ae[fe]=Ue)}for(var fe in ne)ae[fe]=ne[fe]}}));return ae}var AC,MC={useVisualState:CC({scrapeMotionValuesFromProps:scrape_motion_values_scrapeMotionValuesFromProps,createRenderState:_C,onMount:function onMount(X,$,ee){var ne=ee.renderState,ae=ee.latestValues;try{ne.dimensions="function"===typeof $.getBBox?$.getBBox():$.getBoundingClientRect()}catch(de){ne.dimensions={x:0,y:0,width:0,height:0}}buildSVGAttrs(ne,ae,{enableHardwareAcceleration:!1},X.transformTemplate),renderSVG($,ne)}})},EC={useVisualState:CC({scrapeMotionValuesFromProps:scrapeMotionValuesFromProps,createRenderState:mC})};function use_dom_event_addDomEvent(X,$,ee,ne){return X.addEventListener($,ee,ne),function(){return X.removeEventListener($,ee,ne)}}function useDomEvent($,ee,ne,ae){(0,X.useEffect)((function(){var X=$.current;if(ne&&X)return use_dom_event_addDomEvent(X,ee,ne,ae)}),[$,ee,ne,ae])}function event_type_isMouseEvent(X){return"undefined"!==typeof PointerEvent&&X instanceof PointerEvent?!("mouse"!==X.pointerType):X instanceof MouseEvent}function event_type_isTouchEvent(X){return!!X.touches}!function(X){X.Animate="animate",X.Hover="whileHover",X.Tap="whileTap",X.Drag="whileDrag",X.Focus="whileFocus",X.InView="whileInView",X.Exit="exit"}(AC||(AC={}));var TC={pageX:0,pageY:0};function event_info_pointFromTouch(X,$){void 0===$&&($="page");var ee=X.touches[0]||X.changedTouches[0]||TC;return{x:ee[$+"X"],y:ee[$+"Y"]}}function event_info_pointFromMouse(X,$){return void 0===$&&($="page"),{x:X[$+"X"],y:X[$+"Y"]}}function event_info_extractEventInfo(X,$){return void 0===$&&($="page"),{point:event_type_isTouchEvent(X)?event_info_pointFromTouch(X,$):event_info_pointFromMouse(X,$)}}var PC=function wrapHandler(X,$){void 0===$&&($=!1);var ee=function listener($){return X($,event_info_extractEventInfo($))};return $?function event_info_filterPrimaryPointer(X){return function($){var ee=$ instanceof MouseEvent;(!ee||ee&&0===$.button)&&X($)}}(ee):ee},DC={pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointercancel:"mousecancel",pointerover:"mouseover",pointerout:"mouseout",pointerenter:"mouseenter",pointerleave:"mouseleave"},LC={pointerdown:"touchstart",pointermove:"touchmove",pointerup:"touchend",pointercancel:"touchcancel"};function use_pointer_event_getPointerEventName(X){return function supportsPointerEvents(){return E_&&null===window.onpointerdown}()?X:function supportsTouchEvents(){return E_&&null===window.ontouchstart}()?LC[X]:function supportsMouseEvents(){return E_&&null===window.onmousedown}()?DC[X]:X}function use_pointer_event_addPointerEvent(X,$,ee,ne){return use_dom_event_addDomEvent(X,use_pointer_event_getPointerEventName($),PC(ee,"pointerdown"===$),ne)}function use_pointer_event_usePointerEvent(X,$,ee,ne){return useDomEvent(X,use_pointer_event_getPointerEventName($),ee&&PC(ee,"pointerdown"===$),ne)}function createLock(X){var $=null;return function(){return null===$&&($=X,function openLock(){$=null})}}var OC=createLock("dragHorizontal"),RC=createLock("dragVertical");function getGlobalLock(X){var $=!1;if("y"===X)$=RC();else if("x"===X)$=OC();else{var ee=OC(),ne=RC();ee&&ne?$=function lock(){ee(),ne()}:(ee&&ee(),ne&&ne())}return $}function isDragActive(){var X=getGlobalLock(!0);return!X||(X(),!1)}function createHoverEvent(X,$,ee){return function(ne,ae){var de;event_type_isMouseEvent(ne)&&!isDragActive()&&(null===(de=X.animationState)||void 0===de||de.setActive(AC.Hover,$),null===ee||void 0===ee||ee(ne,ae))}}var BC=function isNodeOrChild(X,$){return!!$&&(X===$||isNodeOrChild(X,$.parentElement))};function use_unmount_effect_useUnmountEffect($){return(0,X.useEffect)((function(){return function(){return $()}}),[])}var IC=new WeakMap,zC=new WeakMap,NC=function fireObserverCallback(X){var $;null===($=IC.get(X.target))||void 0===$||$(X)},FC=function fireAllObserverCallbacks(X){X.forEach(NC)};function observeIntersection(X,$,ee){var ne=function initIntersectionObserver(X){var $=X.root,ee=tslib_es6_rest(X,["root"]),ne=$||document;zC.has(ne)||zC.set(ne,{});var ae=zC.get(ne),de=JSON.stringify(ee);return ae[de]||(ae[de]=new IntersectionObserver(FC,b_({root:$},ee))),ae[de]}($);return IC.set(X,ee),ne.observe(X),function(){IC.delete(X),ne.unobserve(X)}}var UC={some:0,all:1};function useIntersectionObserver($,ee,ne,ae){var de=ae.root,fe=ae.margin,Ue=ae.amount,je=void 0===Ue?"some":Ue,Ke=ae.once;(0,X.useEffect)((function(){if($){var X={root:null===de||void 0===de?void 0:de.current,rootMargin:fe,threshold:"number"===typeof je?je:UC[je]};return observeIntersection(ne.getInstance(),X,(function intersectionCallback(X){var $,ae=X.isIntersecting;if(ee.isInView!==ae&&(ee.isInView=ae,!Ke||ae||!ee.hasEnteredView)){ae&&(ee.hasEnteredView=!0),null===($=ne.animationState)||void 0===$||$.setActive(AC.InView,ae);var de=ne.getProps(),fe=ae?de.onViewportEnter:de.onViewportLeave;null===fe||void 0===fe||fe(X)}}))}}),[$,de,fe,je])}function useMissingIntersectionObserver($,ee,ne,ae){var de=ae.fallback,fe=void 0===de||de;(0,X.useEffect)((function(){$&&fe&&requestAnimationFrame((function(){var X;ee.hasEnteredView=!0;var $=ne.getProps().onViewportEnter;null===$||void 0===$||$(null),null===(X=ne.animationState)||void 0===X||X.setActive(AC.InView,!0)}))}),[$])}var VC=function makeRenderlessComponent(X){return function($){return X($),null}},HC={inView:VC((function useViewport($){var ee=$.visualElement,ne=$.whileInView,ae=$.onViewportEnter,de=$.onViewportLeave,fe=$.viewport,Ue=void 0===fe?{}:fe,je=(0,X.useRef)({hasEnteredView:!1,isInView:!1}),Ke=Boolean(ne||ae||de);Ue.once&&je.current.hasEnteredView&&(Ke=!1),("undefined"===typeof IntersectionObserver?useMissingIntersectionObserver:useIntersectionObserver)(Ke,je.current,ee,Ue)})),tap:VC((function useTapGesture($){var ee=$.onTap,ne=$.onTapStart,ae=$.onTapCancel,de=$.whileTap,fe=$.visualElement,Ue=ee||ne||ae||de,je=(0,X.useRef)(!1),Ke=(0,X.useRef)(null);function removePointerEndListener(){var X;null===(X=Ke.current)||void 0===X||X.call(Ke),Ke.current=null}function checkPointerEnd(){var X;return removePointerEndListener(),je.current=!1,null===(X=fe.animationState)||void 0===X||X.setActive(AC.Tap,!1),!isDragActive()}function onPointerUp(X,$){checkPointerEnd()&&(BC(fe.getInstance(),X.target)?null===ee||void 0===ee||ee(X,$):null===ae||void 0===ae||ae(X,$))}function onPointerCancel(X,$){checkPointerEnd()&&(null===ae||void 0===ae||ae(X,$))}use_pointer_event_usePointerEvent(fe,"pointerdown",Ue?function onPointerDown(X,$){var ee;removePointerEndListener(),je.current||(je.current=!0,Ke.current=Vw(use_pointer_event_addPointerEvent(window,"pointerup",onPointerUp),use_pointer_event_addPointerEvent(window,"pointercancel",onPointerCancel)),null===(ee=fe.animationState)||void 0===ee||ee.setActive(AC.Tap,!0),null===ne||void 0===ne||ne(X,$))}:void 0),use_unmount_effect_useUnmountEffect(removePointerEndListener)})),focus:VC((function useFocusGesture(X){var $=X.whileFocus,ee=X.visualElement;useDomEvent(ee,"focus",$?function onFocus(){var X;null===(X=ee.animationState)||void 0===X||X.setActive(AC.Focus,!0)}:void 0),useDomEvent(ee,"blur",$?function onBlur(){var X;null===(X=ee.animationState)||void 0===X||X.setActive(AC.Focus,!1)}:void 0)})),hover:VC((function useHoverGesture(X){var $=X.onHoverStart,ee=X.onHoverEnd,ne=X.whileHover,ae=X.visualElement;use_pointer_event_usePointerEvent(ae,"pointerenter",$||ne?createHoverEvent(ae,!0,$):void 0),use_pointer_event_usePointerEvent(ae,"pointerleave",ee||ne?createHoverEvent(ae,!1,ee):void 0)}))};function shallowCompare(X,$){if(!Array.isArray($))return!1;var ee=$.length;if(ee!==X.length)return!1;for(var ne=0;ne<ee;ne++)if($[ne]!==X[ne])return!1;return!0}var jC=function isNumericalString(X){return/^\-?\d*\.?\d+$/.test(X)},GC=function isZeroValueString(X){return/^0[^.\s]+$/.test(X)},WC=function testValueType(X){return function($){return $.test(X)}},qC=[cw,Sw,ww,_w,Cw,kw,{test:function test(X){return"auto"===X},parse:function parse(X){return X}}],YC=function findDimensionValueType(X){return qC.find(WC(X))},JC=tslib_es6_spreadArray(tslib_es6_spreadArray([],tslib_es6_read(qC),!1),[Rw,Nw],!1),ZC=function findValueType(X){return JC.find(WC(X))};function setMotionValue(X,$,ee){X.hasValue($)?X.getValue($).set(ee):X.addValue($,motionValue(ee))}function setTarget(X,$){var ee=resolveVariant(X,$),ne=ee?X.makeTargetAnimatable(ee,!1):{},ae=ne.transitionEnd,de=void 0===ae?{}:ae;ne.transition;var fe=tslib_es6_rest(ne,["transitionEnd","transition"]);for(var Ue in fe=b_(b_({},fe),de)){setMotionValue(X,Ue,nk(fe[Ue]))}}function getOriginFromTransition(X,$){if($)return($[X]||$.default||$).from}function animateVariant(X,$,ee){var ne;void 0===ee&&(ee={});var ae=resolveVariant(X,$,ee.custom),de=(ae||{}).transition,fe=void 0===de?X.getDefaultTransition()||{}:de;ee.transitionOverride&&(fe=ee.transitionOverride);var Ue=ae?function(){return animateTarget(X,ae,ee)}:function(){return Promise.resolve()},je=(null===(ne=X.variantChildren)||void 0===ne?void 0:ne.size)?function(ne){void 0===ne&&(ne=0);var ae=fe.delayChildren,de=void 0===ae?0:ae,Ue=fe.staggerChildren,je=fe.staggerDirection;return function animateChildren(X,$,ee,ne,ae,de){void 0===ee&&(ee=0);void 0===ne&&(ne=0);void 0===ae&&(ae=1);var fe=[],Ue=(X.variantChildren.size-1)*ne,je=1===ae?function(X){return void 0===X&&(X=0),X*ne}:function(X){return void 0===X&&(X=0),Ue-X*ne};return Array.from(X.variantChildren).sort(sortByTreeOrder).forEach((function(X,ne){fe.push(animateVariant(X,$,b_(b_({},de),{delay:ee+je(ne)})).then((function(){return X.notifyAnimationComplete($)})))})),Promise.all(fe)}(X,$,de+ne,Ue,je,ee)}:function(){return Promise.resolve()},Ke=fe.when;if(Ke){var et=tslib_es6_read("beforeChildren"===Ke?[Ue,je]:[je,Ue],2),tt=et[0],nt=et[1];return tt().then(nt)}return Promise.all([Ue(),je(ee.delay)])}function animateTarget(X,$,ee){var ne,ae=void 0===ee?{}:ee,de=ae.delay,fe=void 0===de?0:de,Ue=ae.transitionOverride,je=ae.type,Ke=X.makeTargetAnimatable($),et=Ke.transition,tt=void 0===et?X.getDefaultTransition():et,nt=Ke.transitionEnd,it=tslib_es6_rest(Ke,["transition","transitionEnd"]);Ue&&(tt=Ue);var ct=[],dt=je&&(null===(ne=X.animationState)||void 0===ne?void 0:ne.getState()[je]);for(var vt in it){var gt=X.getValue(vt),yt=it[vt];if(!(!gt||void 0===yt||dt&&shouldBlockAnimation(dt,vt))){var _t=b_({delay:fe},tt);X.shouldReduceMotion&&isTransformProp(vt)&&(_t=b_(b_({},_t),{type:!1,delay:0}));var wt=startAnimation(vt,gt,yt,_t);ct.push(wt)}}return Promise.all(ct).then((function(){nt&&setTarget(X,nt)}))}function sortByTreeOrder(X,$){return X.sortNodePosition($)}function shouldBlockAnimation(X,$){var ee=X.protectedKeys,ne=X.needsAnimating,ae=ee.hasOwnProperty($)&&!0!==ne[$];return ne[$]=!1,ae}var XC=[AC.Animate,AC.InView,AC.Focus,AC.Hover,AC.Tap,AC.Drag,AC.Exit],QC=tslib_es6_spreadArray([],tslib_es6_read(XC),!1).reverse(),KC=XC.length;function animateList(X){return function($){return Promise.all($.map((function($){var ee=$.animation,ne=$.options;return function animateVisualElement(X,$,ee){var ne;if(void 0===ee&&(ee={}),X.notifyAnimationStart($),Array.isArray($)){var ae=$.map((function($){return animateVariant(X,$,ee)}));ne=Promise.all(ae)}else if("string"===typeof $)ne=animateVariant(X,$,ee);else{var de="function"===typeof $?resolveVariant(X,$,ee.custom):$;ne=animateTarget(X,de,ee)}return ne.then((function(){return X.notifyAnimationComplete($)}))}(X,ee,ne)})))}}function createAnimationState(X){var $=animateList(X),ee=function createState(){var X;return(X={})[AC.Animate]=createTypeState(!0),X[AC.InView]=createTypeState(),X[AC.Hover]=createTypeState(),X[AC.Tap]=createTypeState(),X[AC.Drag]=createTypeState(),X[AC.Focus]=createTypeState(),X[AC.Exit]=createTypeState(),X}(),ne={},ae=!0,de=function buildResolvedTypeValues($,ee){var ne=resolveVariant(X,ee);if(ne){ne.transition;var ae=ne.transitionEnd,de=tslib_es6_rest(ne,["transition","transitionEnd"]);$=b_(b_(b_({},$),de),ae)}return $};function animateChanges(fe,Ue){for(var je,Ke=X.getProps(),et=X.getVariantContext(!0)||{},tt=[],nt=new Set,it={},ct=1/0,dt=function _loop_1($){var ne=QC[$],dt=ee[ne],vt=null!==(je=Ke[ne])&&void 0!==je?je:et[ne],gt=isVariantLabel(vt),yt=ne===Ue?dt.isActive:null;!1===yt&&(ct=$);var _t=vt===et[ne]&&vt!==Ke[ne]&&gt;if(_t&&ae&&X.manuallyAnimateOnMount&&(_t=!1),dt.protectedKeys=b_({},it),!dt.isActive&&null===yt||!vt&&!dt.prevProp||isAnimationControls(vt)||"boolean"===typeof vt)return"continue";var wt=function checkVariantsDidChange(X,$){if("string"===typeof $)return $!==X;if(isVariantLabels($))return!shallowCompare($,X);return!1}(dt.prevProp,vt),St=wt||ne===Ue&&dt.isActive&&!_t&&gt||$>ct&&gt,Ct=Array.isArray(vt)?vt:[vt],At=Ct.reduce(de,{});!1===yt&&(At={});var Et=dt.prevResolvedValues,Rt=void 0===Et?{}:Et,Bt=b_(b_({},Rt),At),Ht=function markToAnimate(X){St=!0,nt.delete(X),dt.needsAnimating[X]=!0};for(var Wt in Bt){var qt=At[Wt],Zt=Rt[Wt];it.hasOwnProperty(Wt)||(qt!==Zt?IS(qt)&&IS(Zt)?!shallowCompare(qt,Zt)||wt?Ht(Wt):dt.protectedKeys[Wt]=!0:void 0!==qt?Ht(Wt):nt.add(Wt):void 0!==qt&&nt.has(Wt)?Ht(Wt):dt.protectedKeys[Wt]=!0)}dt.prevProp=vt,dt.prevResolvedValues=At,dt.isActive&&(it=b_(b_({},it),At)),ae&&X.blockInitialAnimation&&(St=!1),St&&!_t&&tt.push.apply(tt,tslib_es6_spreadArray([],tslib_es6_read(Ct.map((function(X){return{animation:X,options:b_({type:ne},fe)}}))),!1))},vt=0;vt<KC;vt++)dt(vt);if(ne=b_({},it),nt.size){var gt={};nt.forEach((function($){var ee=X.getBaseTarget($);void 0!==ee&&(gt[$]=ee)})),tt.push({animation:gt})}var yt=Boolean(tt.length);return ae&&!1===Ke.initial&&!X.manuallyAnimateOnMount&&(yt=!1),ae=!1,yt?$(tt):Promise.resolve()}return{isAnimated:function isAnimated(X){return void 0!==ne[X]},animateChanges:animateChanges,setActive:function setActive($,ne,ae){var de;if(ee[$].isActive===ne)return Promise.resolve();null===(de=X.variantChildren)||void 0===de||de.forEach((function(X){var ee;return null===(ee=X.animationState)||void 0===ee?void 0:ee.setActive($,ne)})),ee[$].isActive=ne;var fe=animateChanges(ae,$);for(var Ue in ee)ee[Ue].protectedKeys={};return fe},setAnimateFunction:function setAnimateFunction(ee){$=ee(X)},getState:function getState(){return ee}}}function createTypeState(X){return void 0===X&&(X=!1),{isActive:X,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}var $C={animation:VC((function($){var ee=$.visualElement,ne=$.animate;ee.animationState||(ee.animationState=createAnimationState(ee)),isAnimationControls(ne)&&(0,X.useEffect)((function(){return ne.subscribe(ee)}),[ne])})),exit:VC((function($){var ee=$.custom,ne=$.visualElement,ae=tslib_es6_read(usePresence(),2),de=ae[0],fe=ae[1],Ue=(0,X.useContext)(p_);(0,X.useEffect)((function(){var X,$;ne.isPresent=de;var ae=null===(X=ne.animationState)||void 0===X?void 0:X.setActive(AC.Exit,!de,{custom:null!==($=null===Ue||void 0===Ue?void 0:Ue.custom)&&void 0!==$?$:ee});!de&&(null===ae||void 0===ae||ae.then(fe))}),[de])}))},eA=function(){function PanSession(X,$,ee){var ne=this,ae=(void 0===ee?{}:ee).transformPagePoint;if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(ne.lastMoveEvent&&ne.lastMoveEventInfo){var X=PanSession_getPanInfo(ne.lastMoveEventInfo,ne.history),$=null!==ne.startEvent,ee=distance_distance(X.offset,{x:0,y:0})>=3;if($||ee){var ae=X.point,de=Y_().timestamp;ne.history.push(b_(b_({},ae),{timestamp:de}));var fe=ne.handlers,Ue=fe.onStart,je=fe.onMove;$||(Ue&&Ue(ne.lastMoveEvent,X),ne.startEvent=ne.lastMoveEvent),je&&je(ne.lastMoveEvent,X)}}},this.handlePointerMove=function(X,$){ne.lastMoveEvent=X,ne.lastMoveEventInfo=transformPoint($,ne.transformPagePoint),event_type_isMouseEvent(X)&&0===X.buttons?ne.handlePointerUp(X,$):J_.update(ne.updatePoint,!0)},this.handlePointerUp=function(X,$){ne.end();var ee=ne.handlers,ae=ee.onEnd,de=ee.onSessionEnd,fe=PanSession_getPanInfo(transformPoint($,ne.transformPagePoint),ne.history);ne.startEvent&&ae&&ae(X,fe),de&&de(X,fe)},!(event_type_isTouchEvent(X)&&X.touches.length>1)){this.handlers=$,this.transformPagePoint=ae;var de=transformPoint(event_info_extractEventInfo(X),this.transformPagePoint),fe=de.point,Ue=Y_().timestamp;this.history=[b_(b_({},fe),{timestamp:Ue})];var je=$.onSessionStart;je&&je(X,PanSession_getPanInfo(de,this.history)),this.removeListeners=Vw(use_pointer_event_addPointerEvent(window,"pointermove",this.handlePointerMove),use_pointer_event_addPointerEvent(window,"pointerup",this.handlePointerUp),use_pointer_event_addPointerEvent(window,"pointercancel",this.handlePointerUp))}}return PanSession.prototype.updateHandlers=function(X){this.handlers=X},PanSession.prototype.end=function(){this.removeListeners&&this.removeListeners(),H_.update(this.updatePoint)},PanSession}();function transformPoint(X,$){return $?{point:$(X.point)}:X}function PanSession_subtractPoint(X,$){return{x:X.x-$.x,y:X.y-$.y}}function PanSession_getPanInfo(X,$){var ee=X.point;return{point:ee,delta:PanSession_subtractPoint(ee,PanSession_lastDevicePoint($)),offset:PanSession_subtractPoint(ee,startDevicePoint($)),velocity:PanSession_getVelocity($,.1)}}function startDevicePoint(X){return X[0]}function PanSession_lastDevicePoint(X){return X[X.length-1]}function PanSession_getVelocity(X,$){if(X.length<2)return{x:0,y:0};for(var ee=X.length-1,ne=null,ae=PanSession_lastDevicePoint(X);ee>=0&&(ne=X[ee],!(ae.timestamp-ne.timestamp>AS($)));)ee--;if(!ne)return{x:0,y:0};var de=(ae.timestamp-ne.timestamp)/1e3;if(0===de)return{x:0,y:0};var fe={x:(ae.x-ne.x)/de,y:(ae.y-ne.y)/de};return fe.x===1/0&&(fe.x=0),fe.y===1/0&&(fe.y=0),fe}function calcRelativeAxisConstraints(X,$,ee){return{min:void 0!==$?X.min+$:void 0,max:void 0!==ee?X.max+ee-(X.max-X.min):void 0}}function calcViewportAxisConstraints(X,$){var ee,ne=$.min-X.min,ae=$.max-X.max;return $.max-$.min<X.max-X.min&&(ne=(ee=tslib_es6_read([ae,ne],2))[0],ae=ee[1]),{min:ne,max:ae}}var tA=.35;function resolveAxisElastic(X,$,ee){return{min:resolvePointElastic(X,$),max:resolvePointElastic(X,ee)}}function resolvePointElastic(X,$){var ee;return"number"===typeof X?X:null!==(ee=X[$])&&void 0!==ee?ee:0}function convertBoundingBoxToBox(X){var $=X.top;return{x:{min:X.left,max:X.right},y:{min:$,max:X.bottom}}}function measure_measureViewportBox(X,$){return convertBoundingBoxToBox(function transformBoxPoints(X,$){if(!$)return X;var ee=$({x:X.left,y:X.top}),ne=$({x:X.right,y:X.bottom});return{top:ee.y,left:ee.x,bottom:ne.y,right:ne.x}}(X.getBoundingClientRect(),$))}var nA=new WeakMap,rA=function(){function VisualElementDragControls(X){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=X}return VisualElementDragControls.prototype.start=function(X,$){var ee=this,ne=(void 0===$?{}:$).snapToCursor,ae=void 0!==ne&&ne;if(!1!==this.visualElement.isPresent){this.panSession=new eA(X,{onSessionStart:function onSessionStart(X){ee.stopAnimation(),ae&&ee.snapToCursor(event_info_extractEventInfo(X,"page").point)},onStart:function onStart(X,$){var ne,ae=ee.getProps(),de=ae.drag,fe=ae.dragPropagation,Ue=ae.onDragStart;(!de||fe||(ee.openGlobalLock&&ee.openGlobalLock(),ee.openGlobalLock=getGlobalLock(de),ee.openGlobalLock))&&(ee.isDragging=!0,ee.currentDirection=null,ee.resolveConstraints(),ee.visualElement.projection&&(ee.visualElement.projection.isAnimationBlocked=!0,ee.visualElement.projection.target=void 0),eachAxis((function(X){var $,ne,ae=ee.getAxisMotionValue(X).get()||0;if(ww.test(ae)){var de=null===(ne=null===($=ee.visualElement.projection)||void 0===$?void 0:$.layout)||void 0===ne?void 0:ne.actual[X];if(de)ae=calcLength(de)*(parseFloat(ae)/100)}ee.originPoint[X]=ae})),null===Ue||void 0===Ue||Ue(X,$),null===(ne=ee.visualElement.animationState)||void 0===ne||ne.setActive(AC.Drag,!0))},onMove:function onMove(X,$){var ne=ee.getProps(),ae=ne.dragPropagation,de=ne.dragDirectionLock,fe=ne.onDirectionLock,Ue=ne.onDrag;if(ae||ee.openGlobalLock){var je=$.offset;if(de&&null===ee.currentDirection)return ee.currentDirection=function getCurrentDirection(X,$){void 0===$&&($=10);var ee=null;Math.abs(X.y)>$?ee="y":Math.abs(X.x)>$&&(ee="x");return ee}(je),void(null!==ee.currentDirection&&(null===fe||void 0===fe||fe(ee.currentDirection)));ee.updateAxis("x",$.point,je),ee.updateAxis("y",$.point,je),ee.visualElement.syncRender(),null===Ue||void 0===Ue||Ue(X,$)}},onSessionEnd:function onSessionEnd(X,$){return ee.stop(X,$)}},{transformPagePoint:this.visualElement.getTransformPagePoint()})}},VisualElementDragControls.prototype.stop=function(X,$){var ee=this.isDragging;if(this.cancel(),ee){var ne=$.velocity;this.startAnimation(ne);var ae=this.getProps().onDragEnd;null===ae||void 0===ae||ae(X,$)}},VisualElementDragControls.prototype.cancel=function(){var X,$;this.isDragging=!1,this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!1),null===(X=this.panSession)||void 0===X||X.end(),this.panSession=void 0,!this.getProps().dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),null===($=this.visualElement.animationState)||void 0===$||$.setActive(AC.Drag,!1)},VisualElementDragControls.prototype.updateAxis=function(X,$,ee){var ne=this.getProps().drag;if(ee&&shouldDrag(X,ne,this.currentDirection)){var ae=this.getAxisMotionValue(X),de=this.originPoint[X]+ee[X];this.constraints&&this.constraints[X]&&(de=function applyConstraints(X,$,ee){var ne=$.min,ae=$.max;return void 0!==ne&&X<ne?X=ee?Z_(ne,X,ee.min):Math.max(X,ne):void 0!==ae&&X>ae&&(X=ee?Z_(ae,X,ee.max):Math.min(X,ae)),X}(de,this.constraints[X],this.elastic[X])),ae.set(de)}},VisualElementDragControls.prototype.resolveConstraints=function(){var X=this,$=this.getProps(),ee=$.dragConstraints,ne=$.dragElastic,ae=(this.visualElement.projection||{}).layout,de=this.constraints;ee&&is_ref_object_isRefObject(ee)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!ee||!ae)&&function calcRelativeConstraints(X,$){var ee=$.top,ne=$.left,ae=$.bottom,de=$.right;return{x:calcRelativeAxisConstraints(X.x,ne,de),y:calcRelativeAxisConstraints(X.y,ee,ae)}}(ae.actual,ee),this.elastic=function resolveDragElastic(X){return void 0===X&&(X=tA),!1===X?X=0:!0===X&&(X=tA),{x:resolveAxisElastic(X,"left","right"),y:resolveAxisElastic(X,"top","bottom")}}(ne),de!==this.constraints&&ae&&this.constraints&&!this.hasMutatedConstraints&&eachAxis((function($){X.getAxisMotionValue($)&&(X.constraints[$]=function rebaseAxisConstraints(X,$){var ee={};return void 0!==$.min&&(ee.min=$.min-X.min),void 0!==$.max&&(ee.max=$.max-X.min),ee}(ae.actual[$],X.constraints[$]))}))},VisualElementDragControls.prototype.resolveRefConstraints=function(){var X=this.getProps(),$=X.dragConstraints,ee=X.onMeasureDragConstraints;if(!$||!is_ref_object_isRefObject($))return!1;var ne=$.current,ae=this.visualElement.projection;if(!ae||!ae.layout)return!1;var de=function measurePageBox(X,$,ee){var ne=measure_measureViewportBox(X,ee),ae=$.scroll;return ae&&(translateAxis(ne.x,ae.x),translateAxis(ne.y,ae.y)),ne}(ne,ae.root,this.visualElement.getTransformPagePoint()),fe=function calcViewportConstraints(X,$){return{x:calcViewportAxisConstraints(X.x,$.x),y:calcViewportAxisConstraints(X.y,$.y)}}(ae.layout.actual,de);if(ee){var Ue=ee(function convertBoxToBoundingBox(X){var $=X.x,ee=X.y;return{top:ee.min,right:$.max,bottom:ee.max,left:$.min}}(fe));this.hasMutatedConstraints=!!Ue,Ue&&(fe=convertBoundingBoxToBox(Ue))}return fe},VisualElementDragControls.prototype.startAnimation=function(X){var $=this,ee=this.getProps(),ne=ee.drag,ae=ee.dragMomentum,de=ee.dragElastic,fe=ee.dragTransition,Ue=ee.dragSnapToOrigin,je=ee.onDragTransitionEnd,Ke=this.constraints||{},et=eachAxis((function(ee){var je;if(shouldDrag(ee,ne,$.currentDirection)){var et=null!==(je=null===Ke||void 0===Ke?void 0:Ke[ee])&&void 0!==je?je:{};Ue&&(et={min:0,max:0});var tt=de?200:1e6,nt=de?40:1e7,it=b_(b_({type:"inertia",velocity:ae?X[ee]:0,bounceStiffness:tt,bounceDamping:nt,timeConstant:750,restDelta:1,restSpeed:10},fe),et);return $.startAxisValueAnimation(ee,it)}}));return Promise.all(et).then(je)},VisualElementDragControls.prototype.startAxisValueAnimation=function(X,$){return startAnimation(X,this.getAxisMotionValue(X),0,$)},VisualElementDragControls.prototype.stopAnimation=function(){var X=this;eachAxis((function($){return X.getAxisMotionValue($).stop()}))},VisualElementDragControls.prototype.getAxisMotionValue=function(X){var $,ee,ne="_drag"+X.toUpperCase(),ae=this.visualElement.getProps()[ne];return ae||this.visualElement.getValue(X,null!==(ee=null===($=this.visualElement.getProps().initial)||void 0===$?void 0:$[X])&&void 0!==ee?ee:0)},VisualElementDragControls.prototype.snapToCursor=function(X){var $=this;eachAxis((function(ee){if(shouldDrag(ee,$.getProps().drag,$.currentDirection)){var ne=$.visualElement.projection,ae=$.getAxisMotionValue(ee);if(ne&&ne.layout){var de=ne.layout.actual[ee],fe=de.min,Ue=de.max;ae.set(X[ee]-Z_(fe,Ue,.5))}}}))},VisualElementDragControls.prototype.scalePositionWithinConstraints=function(){var X,$=this,ee=this.getProps(),ne=ee.drag,ae=ee.dragConstraints,de=this.visualElement.projection;if(is_ref_object_isRefObject(ae)&&de&&this.constraints){this.stopAnimation();var fe={x:0,y:0};eachAxis((function(X){var ee=$.getAxisMotionValue(X);if(ee){var ne=ee.get();fe[X]=function constraints_calcOrigin(X,$){var ee=.5,ne=calcLength(X),ae=calcLength($);return ae>ne?ee=iw($.min,$.max-ne,X.min):ne>ae&&(ee=iw(X.min,X.max-ae,$.min)),$_(0,1,ee)}({min:ne,max:ne},$.constraints[X])}}));var Ue=this.visualElement.getProps().transformTemplate;this.visualElement.getInstance().style.transform=Ue?Ue({},""):"none",null===(X=de.root)||void 0===X||X.updateScroll(),de.updateLayout(),this.resolveConstraints(),eachAxis((function(X){if(shouldDrag(X,ne,null)){var ee=$.getAxisMotionValue(X),ae=$.constraints[X],de=ae.min,Ue=ae.max;ee.set(Z_(de,Ue,fe[X]))}}))}},VisualElementDragControls.prototype.addListeners=function(){var X,$=this;nA.set(this.visualElement,this);var ee=use_pointer_event_addPointerEvent(this.visualElement.getInstance(),"pointerdown",(function(X){var ee=$.getProps(),ne=ee.drag,ae=ee.dragListener;ne&&(void 0===ae||ae)&&$.start(X)})),ne=function measureDragConstraints(){is_ref_object_isRefObject($.getProps().dragConstraints)&&($.constraints=$.resolveRefConstraints())},ae=this.visualElement.projection,de=ae.addEventListener("measure",ne);ae&&!ae.layout&&(null===(X=ae.root)||void 0===X||X.updateScroll(),ae.updateLayout()),ne();var fe=use_dom_event_addDomEvent(window,"resize",(function(){$.scalePositionWithinConstraints()}));return ae.addEventListener("didUpdate",(function(X){var ee=X.delta,ne=X.hasLayoutChanged;$.isDragging&&ne&&(eachAxis((function(X){var ne=$.getAxisMotionValue(X);ne&&($.originPoint[X]+=ee[X].translate,ne.set(ne.get()+ee[X].translate))})),$.visualElement.syncRender())})),function(){fe(),ee(),de()}},VisualElementDragControls.prototype.getProps=function(){var X=this.visualElement.getProps(),$=X.drag,ee=void 0!==$&&$,ne=X.dragDirectionLock,ae=void 0!==ne&&ne,de=X.dragPropagation,fe=void 0!==de&&de,Ue=X.dragConstraints,je=void 0!==Ue&&Ue,Ke=X.dragElastic,et=void 0===Ke?tA:Ke,tt=X.dragMomentum,nt=void 0===tt||tt;return b_(b_({},X),{drag:ee,dragDirectionLock:ae,dragPropagation:fe,dragConstraints:je,dragElastic:et,dragMomentum:nt})},VisualElementDragControls}();function shouldDrag(X,$,ee){return(!0===$||$===X)&&(null===ee||ee===X)}var iA={pan:VC((function use_pan_gesture_usePanGesture($){var ee=$.onPan,ne=$.onPanStart,ae=$.onPanEnd,de=$.onPanSessionStart,fe=$.visualElement,Ue=ee||ne||ae||de,je=(0,X.useRef)(null),Ke=(0,X.useContext)(A_).transformPagePoint,et={onSessionStart:de,onStart:ne,onMove:ee,onEnd:function onEnd(X,$){je.current=null,ae&&ae(X,$)}};(0,X.useEffect)((function(){null!==je.current&&je.current.updateHandlers(et)})),use_pointer_event_usePointerEvent(fe,"pointerdown",Ue&&function onPointerDown(X){je.current=new eA(X,et,{transformPagePoint:Ke})}),use_unmount_effect_useUnmountEffect((function(){return je.current&&je.current.end()}))})),drag:VC((function useDrag($){var ee=$.dragControls,ne=$.visualElement,ae=useConstant((function(){return new rA(ne)}));(0,X.useEffect)((function(){return ee&&ee.subscribe(ae)}),[ae,ee]),(0,X.useEffect)((function(){return ae.addListeners()}),[ae])}))},aA=["LayoutMeasure","BeforeLayoutMeasure","LayoutUpdate","ViewportBoxUpdate","Update","Render","AnimationComplete","LayoutAnimationComplete","AnimationStart","LayoutAnimationStart","SetAxisTarget","Unmount"];var oA=function visualElement(X){var $=X.treeType,ee=void 0===$?"":$,ne=X.build,ae=X.getBaseTarget,de=X.makeTargetAnimatable,fe=X.measureViewportBox,Ue=X.render,je=X.readValueFromInstance,Ke=X.removeValueFromRenderState,et=X.sortNodePosition,tt=X.scrapeMotionValuesFromProps;return function(X,$){var nt=X.parent,it=X.props,ct=X.presenceId,dt=X.blockInitialAnimation,vt=X.visualState,gt=X.shouldReduceMotion;void 0===$&&($={});var yt,_t,wt=!1,St=vt.latestValues,Ct=vt.renderState,At=function createLifecycles(){var X=aA.map((function(){return new X_})),$={},ee={clearAllListeners:function clearAllListeners(){return X.forEach((function(X){return X.clear()}))},updatePropListeners:function updatePropListeners(X){aA.forEach((function(ne){var ae,de="on"+ne,fe=X[de];null===(ae=$[ne])||void 0===ae||ae.call($),fe&&($[ne]=ee[de](fe))}))}};return X.forEach((function(X,$){ee["on"+aA[$]]=function($){return X.add($)},ee["notify"+aA[$]]=function(){for(var $=[],ee=0;ee<arguments.length;ee++)$[ee]=arguments[ee];return X.notify.apply(X,tslib_es6_spreadArray([],tslib_es6_read($),!1))}})),ee}(),Et=new Map,Rt=new Map,Bt={},Ht=b_({},St);function render(){yt&&wt&&(triggerBuild(),Ue(yt,Ct,it.style,en.projection))}function triggerBuild(){ne(en,Ct,St,$,it)}function update(){At.notifyUpdate(St)}function bindToMotionValue(X,$){var ee=$.onChange((function($){St[X]=$,it.onUpdate&&J_.update(update,!1,!0)})),ne=$.onRenderRequest(en.scheduleRender);Rt.set(X,(function(){ee(),ne()}))}var Wt=tt(it);for(var qt in Wt){var Zt=Wt[qt];void 0!==St[qt]&&K_(Zt)&&Zt.set(St[qt],!1)}var Xt=checkIfControllingVariants(it),Qt=checkIfVariantNode(it),en=b_(b_({treeType:ee,current:null,depth:nt?nt.depth+1:0,parent:nt,children:new Set,presenceId:ct,shouldReduceMotion:gt,variantChildren:Qt?new Set:void 0,isVisible:void 0,manuallyAnimateOnMount:Boolean(null===nt||void 0===nt?void 0:nt.isMounted()),blockInitialAnimation:dt,isMounted:function isMounted(){return Boolean(yt)},mount:function mount(X){wt=!0,yt=en.current=X,en.projection&&en.projection.mount(X),Qt&&nt&&!Xt&&(_t=null===nt||void 0===nt?void 0:nt.addVariantChild(en)),Et.forEach((function(X,$){return bindToMotionValue($,X)})),null===nt||void 0===nt||nt.children.add(en),en.setProps(it)},unmount:function unmount(){var X;null===(X=en.projection)||void 0===X||X.unmount(),H_.update(update),H_.render(render),Rt.forEach((function(X){return X()})),null===_t||void 0===_t||_t(),null===nt||void 0===nt||nt.children.delete(en),At.clearAllListeners(),yt=void 0,wt=!1},addVariantChild:function addVariantChild(X){var $,ee=en.getClosestVariantNode();if(ee)return null===($=ee.variantChildren)||void 0===$||$.add(X),function(){return ee.variantChildren.delete(X)}},sortNodePosition:function sortNodePosition(X){return et&&ee===X.treeType?et(en.getInstance(),X.getInstance()):0},getClosestVariantNode:function getClosestVariantNode(){return Qt?en:null===nt||void 0===nt?void 0:nt.getClosestVariantNode()},getLayoutId:function getLayoutId(){return it.layoutId},getInstance:function getInstance(){return yt},getStaticValue:function getStaticValue(X){return St[X]},setStaticValue:function setStaticValue(X,$){return St[X]=$},getLatestValues:function getLatestValues(){return St},setVisibility:function setVisibility(X){en.isVisible!==X&&(en.isVisible=X,en.scheduleRender())},makeTargetAnimatable:function makeTargetAnimatable(X,$){return void 0===$&&($=!0),de(en,X,it,$)},measureViewportBox:function measureViewportBox(){return fe(yt,it)},addValue:function addValue(X,$){en.hasValue(X)&&en.removeValue(X),Et.set(X,$),St[X]=$.get(),bindToMotionValue(X,$)},removeValue:function removeValue(X){var $;Et.delete(X),null===($=Rt.get(X))||void 0===$||$(),Rt.delete(X),delete St[X],Ke(X,Ct)},hasValue:function hasValue(X){return Et.has(X)},getValue:function getValue(X,$){var ee=Et.get(X);return void 0===ee&&void 0!==$&&(ee=motionValue($),en.addValue(X,ee)),ee},forEachValue:function forEachValue(X){return Et.forEach(X)},readValue:function readValue(X){var ee;return null!==(ee=St[X])&&void 0!==ee?ee:je(yt,X,$)},setBaseTarget:function setBaseTarget(X,$){Ht[X]=$},getBaseTarget:function getBaseTarget(X){if(ae){var $=ae(it,X);if(void 0!==$&&!K_($))return $}return Ht[X]}},At),{build:function build(){return triggerBuild(),Ct},scheduleRender:function scheduleRender(){J_.render(render,!1,!0)},syncRender:render,setProps:function setProps(X){(X.transformTemplate||it.transformTemplate)&&en.scheduleRender(),it=X,At.updatePropListeners(X),Bt=function updateMotionValuesFromProps(X,$,ee){var ne;for(var ae in $){var de=$[ae],fe=ee[ae];if(K_(de))X.addValue(ae,de);else if(K_(fe))X.addValue(ae,motionValue(de));else if(fe!==de)if(X.hasValue(ae)){var Ue=X.getValue(ae);!Ue.hasAnimated&&Ue.set(de)}else X.addValue(ae,motionValue(null!==(ne=X.getStaticValue(ae))&&void 0!==ne?ne:de))}for(var ae in ee)void 0===$[ae]&&X.removeValue(ae);return $}(en,tt(it),Bt)},getProps:function getProps(){return it},getVariant:function getVariant(X){var $;return null===($=it.variants)||void 0===$?void 0:$[X]},getDefaultTransition:function getDefaultTransition(){return it.transition},getTransformPagePoint:function getTransformPagePoint(){return it.transformPagePoint},getVariantContext:function getVariantContext(X){if(void 0===X&&(X=!1),X)return null===nt||void 0===nt?void 0:nt.getVariantContext();if(!Xt){var $=(null===nt||void 0===nt?void 0:nt.getVariantContext())||{};return void 0!==it.initial&&($.initial=it.initial),$}for(var ee={},ne=0;ne<hA;ne++){var ae=cA[ne],de=it[ae];(isVariantLabel(de)||!1===de)&&(ee[ae]=de)}return ee}});return en}},cA=tslib_es6_spreadArray(["initial"],tslib_es6_read(XC),!1),hA=cA.length;function css_variables_conversion_isCSSVariable(X){return"string"===typeof X&&X.startsWith("var(--")}var yA=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function getVariableValue(X,$,ee){void 0===ee&&(ee=1),'Max CSS variable fallback depth detected in property "'.concat(X,'". This may indicate a circular fallback dependency.');var ne=tslib_es6_read(function parseCSSVariable(X){var $=yA.exec(X);if(!$)return[,];var ee=tslib_es6_read($,3);return[ee[1],ee[2]]}(X),2),ae=ne[0],de=ne[1];if(ae){var fe=window.getComputedStyle($).getPropertyValue(ae);return fe?fe.trim():css_variables_conversion_isCSSVariable(de)?getVariableValue(de,$,ee+1):de}}var SA,AA=new Set(["width","height","top","left","right","bottom","x","y"]),MA=function isPositionalKey(X){return AA.has(X)},TA=function setAndResetVelocity(X,$){X.set($,!1),X.set($)},VA=function isNumOrPxType(X){return X===cw||X===Sw};!function(X){X.width="width",X.height="height",X.left="left",X.right="right",X.top="top",X.bottom="bottom"}(SA||(SA={}));var HA=function getPosFromMatrix(X,$){return parseFloat(X.split(", ")[$])},jA=function getTranslateFromMatrix(X,$){return function(ee,ne){var ae=ne.transform;if("none"===ae||!ae)return 0;var de=ae.match(/^matrix3d\((.+)\)$/);if(de)return HA(de[1],$);var fe=ae.match(/^matrix\((.+)\)$/);return fe?HA(fe[1],X):0}},XA=new Set(["x","y","z"]),iM=nC.filter((function(X){return!XA.has(X)}));var oM={width:function width(X,$){var ee=X.x,ne=$.paddingLeft,ae=void 0===ne?"0":ne,de=$.paddingRight,fe=void 0===de?"0":de;return ee.max-ee.min-parseFloat(ae)-parseFloat(fe)},height:function height(X,$){var ee=X.y,ne=$.paddingTop,ae=void 0===ne?"0":ne,de=$.paddingBottom,fe=void 0===de?"0":de;return ee.max-ee.min-parseFloat(ae)-parseFloat(fe)},top:function top(X,$){var top=$.top;return parseFloat(top)},left:function left(X,$){var left=$.left;return parseFloat(left)},bottom:function bottom(X,$){var ee=X.y,ne=$.top;return parseFloat(ne)+(ee.max-ee.min)},right:function right(X,$){var ee=X.x,ne=$.left;return parseFloat(ne)+(ee.max-ee.min)},x:jA(4,13),y:jA(5,14)},sM=function checkAndConvertChangedValueTypes(X,$,ee,ne){void 0===ee&&(ee={}),void 0===ne&&(ne={}),$=b_({},$),ne=b_({},ne);var ae=Object.keys($).filter(MA),de=[],fe=!1,Ue=[];if(ae.forEach((function(ae){var je=X.getValue(ae);if(X.hasValue(ae)){var Ke,et=ee[ae],tt=YC(et),nt=$[ae];if(IS(nt)){var it=nt.length,ct=null===nt[0]?1:0;et=nt[ct],tt=YC(et);for(var dt=ct;dt<it;dt++)Ke?YC(nt[dt]):(Ke=YC(nt[dt]))===tt||VA(tt)&&VA(Ke)}else Ke=YC(nt);if(tt!==Ke)if(VA(tt)&&VA(Ke)){var vt=je.get();"string"===typeof vt&&je.set(parseFloat(vt)),"string"===typeof nt?$[ae]=parseFloat(nt):Array.isArray(nt)&&Ke===Sw&&($[ae]=nt.map(parseFloat))}else(null===tt||void 0===tt?void 0:tt.transform)&&(null===Ke||void 0===Ke?void 0:Ke.transform)&&(0===et||0===nt)?0===et?je.set(Ke.transform(et)):$[ae]=tt.transform(nt):(fe||(de=function removeNonTranslationalTransform(X){var $=[];return iM.forEach((function(ee){var ne=X.getValue(ee);void 0!==ne&&($.push([ee,ne.get()]),ne.set(ee.startsWith("scale")?1:0))})),$.length&&X.syncRender(),$}(X),fe=!0),Ue.push(ae),ne[ae]=void 0!==ne[ae]?ne[ae]:$[ae],TA(je,nt))}})),Ue.length){var je=function convertChangedValueTypes(X,$,ee){var ne=$.measureViewportBox(),ae=$.getInstance(),de=getComputedStyle(ae),fe=de.display,Ue={};"none"===fe&&$.setStaticValue("display",X.display||"block"),ee.forEach((function(X){Ue[X]=oM[X](ne,de)})),$.syncRender();var je=$.measureViewportBox();return ee.forEach((function(ee){var ne=$.getValue(ee);TA(ne,Ue[ee]),X[ee]=oM[ee](je,de)})),X}($,X,Ue);return de.length&&de.forEach((function($){var ee=tslib_es6_read($,2),ne=ee[0],ae=ee[1];X.getValue(ne).set(ae)})),X.syncRender(),{target:je,transitionEnd:ne}}return{target:$,transitionEnd:ne}};function unitConversion(X,$,ee,ne){return function hasPositionalKey(X){return Object.keys(X).some(MA)}($)?sM(X,$,ee,ne):{target:$,transitionEnd:ne}}var uM=function parseDomVariant(X,$,ee,ne){var ae=function resolveCSSVariables(X,$,ee){var ne,ae=tslib_es6_rest($,[]),de=X.getInstance();if(!(de instanceof Element))return{target:ae,transitionEnd:ee};for(var fe in ee&&(ee=b_({},ee)),X.forEachValue((function(X){var $=X.get();if(css_variables_conversion_isCSSVariable($)){var ee=getVariableValue($,de);ee&&X.set(ee)}})),ae){var Ue=ae[fe];if(css_variables_conversion_isCSSVariable(Ue)){var je=getVariableValue(Ue,de);je&&(ae[fe]=je,ee&&(null!==(ne=ee[fe])&&void 0!==ne||(ee[fe]=Ue)))}}return{target:ae,transitionEnd:ee}}(X,$,ne);return unitConversion(X,$=ae.target,ee,ne=ae.transitionEnd)};var dM={treeType:"dom",readValueFromInstance:function readValueFromInstance(X,$){if(isTransformProp($)){var ee=XS($);return ee&&ee.default||0}var ne=function visual_element_getComputedStyle(X){return window.getComputedStyle(X)}(X);return(isCSSVariable($)?ne.getPropertyValue($):ne[$])||0},sortNodePosition:function sortNodePosition(X,$){return 2&X.compareDocumentPosition($)?1:-1},getBaseTarget:function getBaseTarget(X,$){var ee;return null===(ee=X.style)||void 0===ee?void 0:ee[$]},measureViewportBox:function measureViewportBox(X,$){return measure_measureViewportBox(X,$.transformPagePoint)},resetTransform:function resetTransform(X,$,ee){var ne=ee.transformTemplate;$.style.transform=ne?ne({},""):"none",X.scheduleRender()},restoreTransform:function restoreTransform(X,$){X.style.transform=$.style.transform},removeValueFromRenderState:function removeValueFromRenderState(X,$){var ee=$.vars,ne=$.style;delete ee[X],delete ne[X]},makeTargetAnimatable:function makeTargetAnimatable(X,$,ee,ne){var ae=ee.transformValues;void 0===ne&&(ne=!0);var de=$.transition,fe=$.transitionEnd,Ue=tslib_es6_rest($,["transition","transitionEnd"]),je=function getOrigin(X,$,ee){var ne,ae,de={};for(var fe in X)de[fe]=null!==(ne=getOriginFromTransition(fe,$))&&void 0!==ne?ne:null===(ae=ee.getValue(fe))||void 0===ae?void 0:ae.get();return de}(Ue,de||{},X);if(ae&&(fe&&(fe=ae(fe)),Ue&&(Ue=ae(Ue)),je&&(je=ae(je))),ne){!function checkTargetForNewValues(X,$,ee){var ne,ae,de,fe,Ue=Object.keys($).filter((function($){return!X.hasValue($)})),je=Ue.length;if(je)for(var Ke=0;Ke<je;Ke++){var et=Ue[Ke],tt=$[et],nt=null;Array.isArray(tt)&&(nt=tt[0]),null===nt&&(nt=null!==(ae=null!==(ne=ee[et])&&void 0!==ne?ne:X.readValue(et))&&void 0!==ae?ae:$[et]),void 0!==nt&&null!==nt&&("string"===typeof nt&&(jC(nt)||GC(nt))?nt=parseFloat(nt):!ZC(nt)&&Nw.test(tt)&&(nt=animatable_none_getAnimatableNone(et,tt)),X.addValue(et,motionValue(nt)),null!==(de=(fe=ee)[et])&&void 0!==de||(fe[et]=nt),X.setBaseTarget(et,nt))}}(X,Ue,je);var Ke=uM(X,Ue,je,fe);fe=Ke.transitionEnd,Ue=Ke.target}return b_({transition:de,transitionEnd:fe},Ue)},scrapeMotionValuesFromProps:scrapeMotionValuesFromProps,build:function build(X,$,ee,ne,ae){void 0!==X.isVisible&&($.style.visibility=X.isVisible?"visible":"hidden"),buildHTMLStyles($,ee,ne,ae.transformTemplate)},render:renderHTML},yM=oA(dM),bM=oA(b_(b_({},dM),{getBaseTarget:function getBaseTarget(X,$){return X[$]},readValueFromInstance:function readValueFromInstance(X,$){var ee;return isTransformProp($)?(null===(ee=XS($))||void 0===ee?void 0:ee.default)||0:($=kC.has($)?$:SC($),X.getAttribute($))},scrapeMotionValuesFromProps:scrape_motion_values_scrapeMotionValuesFromProps,build:function build(X,$,ee,ne,ae){buildSVGAttrs($,ee,ne,ae.transformTemplate)},render:renderSVG})),_M=function createDomVisualElement(X,$){return isSVGComponent(X)?bM($,{enableHardwareAcceleration:!1}):yM($,{enableHardwareAcceleration:!0})};function pixelsToPercent(X,$){return $.max===$.min?0:X/($.max-$.min)*100}var CM={correct:function correct(X,$){if(!$.target)return X;if("string"===typeof X){if(!Sw.test(X))return X;X=parseFloat(X)}var ee=pixelsToPercent(X,$.target.x),ne=pixelsToPercent(X,$.target.y);return"".concat(ee,"% ").concat(ne,"%")}},AM="_$css",MM={correct:function correct(X,$){var ee=$.treeScale,ne=$.projectionDelta,ae=X,de=X.includes("var("),fe=[];de&&(X=X.replace(yA,(function(X){return fe.push(X),AM})));var Ue=Nw.parse(X);if(Ue.length>5)return ae;var je=Nw.createTransformer(X),Ke="number"!==typeof Ue[0]?1:0,et=ne.x.scale*ee.x,tt=ne.y.scale*ee.y;Ue[0+Ke]/=et,Ue[1+Ke]/=tt;var nt=Z_(et,tt,.5);"number"===typeof Ue[2+Ke]&&(Ue[2+Ke]/=nt),"number"===typeof Ue[3+Ke]&&(Ue[3+Ke]/=nt);var it=je(Ue);if(de){var ct=0;it=it.replace(AM,(function(){var X=fe[ct];return ct++,X}))}return it}},EM=function(X){function MeasureLayoutWithContext(){return null!==X&&X.apply(this,arguments)||this}return __extends(MeasureLayoutWithContext,X),MeasureLayoutWithContext.prototype.componentDidMount=function(){var X=this,$=this.props,ee=$.visualElement,ne=$.layoutGroup,ae=$.switchLayoutGroup,de=$.layoutId,fe=ee.projection;!function addScaleCorrector(X){Object.assign(eC,X)}(TM),fe&&((null===ne||void 0===ne?void 0:ne.group)&&ne.group.add(fe),(null===ae||void 0===ae?void 0:ae.register)&&de&&ae.register(fe),fe.root.didUpdate(),fe.addEventListener("animationComplete",(function(){X.safeToRemove()})),fe.setOptions(b_(b_({},fe.options),{onExitComplete:function onExitComplete(){return X.safeToRemove()}}))),sC.hasEverUpdated=!0},MeasureLayoutWithContext.prototype.getSnapshotBeforeUpdate=function(X){var $=this,ee=this.props,ne=ee.layoutDependency,ae=ee.visualElement,de=ee.drag,fe=ee.isPresent,Ue=ae.projection;return Ue?(Ue.isPresent=fe,de||X.layoutDependency!==ne||void 0===ne?Ue.willUpdate():this.safeToRemove(),X.isPresent!==fe&&(fe?Ue.promote():Ue.relegate()||J_.postRender((function(){var X;(null===(X=Ue.getStack())||void 0===X?void 0:X.members.length)||$.safeToRemove()}))),null):null},MeasureLayoutWithContext.prototype.componentDidUpdate=function(){var X=this.props.visualElement.projection;X&&(X.root.didUpdate(),!X.currentAnimation&&X.isLead()&&this.safeToRemove())},MeasureLayoutWithContext.prototype.componentWillUnmount=function(){var X=this.props,$=X.visualElement,ee=X.layoutGroup,ne=X.switchLayoutGroup,ae=$.projection;ae&&(ae.scheduleCheckAfterUnmount(),(null===ee||void 0===ee?void 0:ee.group)&&ee.group.remove(ae),(null===ne||void 0===ne?void 0:ne.deregister)&&ne.deregister(ae))},MeasureLayoutWithContext.prototype.safeToRemove=function(){var X=this.props.safeToRemove;null===X||void 0===X||X()},MeasureLayoutWithContext.prototype.render=function(){return null},MeasureLayoutWithContext}(X.Component);var TM={borderRadius:b_(b_({},CM),{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:CM,borderTopRightRadius:CM,borderBottomLeftRadius:CM,borderBottomRightRadius:CM,boxShadow:MM},PM={measureLayout:function MeasureLayout($){var ee=tslib_es6_read(usePresence(),2),ne=ee[0],ae=ee[1],de=(0,X.useContext)(cC);return X.createElement(EM,b_({},$,{layoutGroup:de,switchLayoutGroup:(0,X.useContext)(hC),isPresent:ne,safeToRemove:ae}))}},DM=createProjectionNode({attachResizeListener:function attachResizeListener(X,$){return X.addEventListener("resize",$,{passive:!0}),function(){return X.removeEventListener("resize",$)}},measureScroll:function measureScroll(){return{x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}}}),LM={current:void 0},OM=createProjectionNode({measureScroll:function measureScroll(X){return{x:X.scrollLeft,y:X.scrollTop}},defaultParent:function defaultParent(){if(!LM.current){var X=new DM(0,{});X.mount(window),X.setOptions({layoutScroll:!0}),LM.current=X}return LM.current},resetTransform:function resetTransform(X,$){X.style.transform=null!==$&&void 0!==$?$:"none"}}),BM=b_(b_(b_(b_({},$C),HC),iA),PM),NM=createMotionProxy((function(X,$){return function create_config_createDomMotionConfig(X,$,ee,ne,ae){var de=$.forwardMotionProps,fe=void 0!==de&&de,Ue=isSVGComponent(X)?MC:EC;return b_(b_({},Ue),{preloadedFeatures:ee,useRender:createUseRender(fe),createVisualElement:ne,projectionNodeConstructor:ae,Component:X})}(X,$,BM,_M,OM)}));function useIsMounted(){var $=(0,X.useRef)(!1);return T_((function(){return $.current=!0,function(){$.current=!1}}),[]),$}var jM=function PresenceChild($){var ee=$.children,ne=$.initial,ae=$.isPresent,de=$.onExitComplete,fe=$.custom,Ue=$.presenceAffectsLayout,je=useConstant(newChildrenMap),Ke=g_(),et=(0,X.useMemo)((function(){return{id:Ke,initial:ne,isPresent:ae,custom:fe,onExitComplete:function onExitComplete(X){var $,ee;je.set(X,!0);try{for(var ne=__values(je.values()),ae=ne.next();!ae.done;ae=ne.next()){if(!ae.value)return}}catch(fe){$={error:fe}}finally{try{ae&&!ae.done&&(ee=ne.return)&&ee.call(ne)}finally{if($)throw $.error}}null===de||void 0===de||de()},register:function register(X){return je.set(X,!1),function(){return je.delete(X)}}}}),Ue?void 0:[ae]);return(0,X.useMemo)((function(){je.forEach((function(X,$){return je.set($,!1)}))}),[ae]),X.useEffect((function(){!ae&&!je.size&&(null===de||void 0===de||de())}),[ae]),X.createElement(p_.Provider,{value:et},ee)};function newChildrenMap(){return new Map}var qM=function getChildKey(X){return X.key||""};var eE=function AnimatePresence($){var ee=$.children,ne=$.custom,ae=$.initial,de=void 0===ae||ae,fe=$.onExitComplete,Ue=$.exitBeforeEnter,je=$.presenceAffectsLayout,Ke=void 0===je||je,et=tslib_es6_read(function use_force_update_useForceUpdate(){var $=useIsMounted(),ee=tslib_es6_read((0,X.useState)(0),2),ne=ee[0],ae=ee[1],de=(0,X.useCallback)((function(){$.current&&ae(ne+1)}),[ne]);return[(0,X.useCallback)((function(){return J_.postRender(de)}),[de]),ne]}(),1),tt=et[0],nt=(0,X.useContext)(cC).forceRender;nt&&(tt=nt);var it=useIsMounted(),ct=function onlyElements($){var ee=[];return X.Children.forEach($,(function($){(0,X.isValidElement)($)&&ee.push($)})),ee}(ee),dt=ct,vt=new Set,gt=(0,X.useRef)(dt),yt=(0,X.useRef)(new Map).current,_t=(0,X.useRef)(!0);if(T_((function(){_t.current=!1,function updateChildLookup(X,$){X.forEach((function(X){var ee=qM(X);$.set(ee,X)}))}(ct,yt),gt.current=dt})),use_unmount_effect_useUnmountEffect((function(){_t.current=!0,yt.clear(),vt.clear()})),_t.current)return X.createElement(X.Fragment,null,dt.map((function($){return X.createElement(jM,{key:qM($),isPresent:!0,initial:!!de&&void 0,presenceAffectsLayout:Ke},$)})));dt=tslib_es6_spreadArray([],tslib_es6_read(dt),!1);for(var wt=gt.current.map(qM),St=ct.map(qM),Ct=wt.length,At=0;At<Ct;At++){var Et=wt[At];-1===St.indexOf(Et)&&vt.add(Et)}return Ue&&vt.size&&(dt=[]),vt.forEach((function($){if(-1===St.indexOf($)){var ee=yt.get($);if(ee){var ae=wt.indexOf($);dt.splice(ae,0,X.createElement(jM,{key:qM(ee),isPresent:!1,onExitComplete:function onExit(){yt.delete($),vt.delete($);var X=gt.current.findIndex((function(X){return X.key===$}));if(gt.current.splice(X,1),!vt.size){if(gt.current=ct,!1===it.current)return;tt(),fe&&fe()}},custom:ne,presenceAffectsLayout:Ke},ee))}}})),dt=dt.map((function($){var ee=$.key;return vt.has(ee)?$:X.createElement(jM,{key:qM($),isPresent:!0,presenceAffectsLayout:Ke},$)})),X.createElement(X.Fragment,null,vt.size?dt:dt.map((function($){return(0,X.cloneElement)($)})))};function chakra_ui_toast_esm_extends(){return chakra_ui_toast_esm_extends=Object.assign||function(X){for(var $=1;$<arguments.length;$++){var ee=arguments[$];for(var ne in ee)Object.prototype.hasOwnProperty.call(ee,ne)&&(X[ne]=ee[ne])}return X},chakra_ui_toast_esm_extends.apply(this,arguments)}function findToast(X,$){var ee=tE(X,$);return{position:ee,index:ee?X[ee].findIndex((function(X){return X.id===$})):-1}}var tE=function getToastPosition(X,$){var ee;return null==(ee=Object.values(X).flat().find((function(X){return X.id===$})))?void 0:ee.position};var nE={initial:function initial(X){var $,ee=X.position,ne=["top","bottom"].includes(ee)?"y":"x",ae=["top-right","bottom-right"].includes(ee)?1:-1;return"bottom"===ee&&(ae=1),($={opacity:0})[ne]=24*ae,$},animate:{opacity:1,y:0,x:0,scale:1,transition:{duration:.4,ease:[.4,0,.2,1]}},exit:{opacity:0,scale:.85,transition:{duration:.2,ease:[.4,0,1,1]}}},rE=X.memo((function($){var ee=$.id,ne=$.message,ae=$.onCloseComplete,de=$.onRequestRemove,fe=$.requestClose,Ue=void 0!==fe&&fe,je=$.position,Ke=void 0===je?"bottom":je,et=$.duration,tt=void 0===et?5e3:et,nt=$.containerStyle,it=$.motionVariants,ct=void 0===it?nE:it,dt=$.toastSpacing,vt=void 0===dt?"0.5rem":dt,gt=X.useState(tt),yt=gt[0],_t=gt[1],St=useIsPresent();wt((function(){St||null==ae||ae()}),[St]),wt((function(){_t(tt)}),[tt]);var Ct=function close(){St&&de()};X.useEffect((function(){St&&Ue&&de()}),[St,Ue,de]),function useTimeout($,ee){var ne=use_animation_state_5054a9f7_esm_useCallbackRef($);X.useEffect((function(){var X;if(null!=ee)return X=window.setTimeout((function(){ne()}),ee),function(){X&&window.clearTimeout(X)}}),[ee,ne])}(Ct,yt);var At=X.useMemo((function(){return chakra_ui_toast_esm_extends({pointerEvents:"auto",maxWidth:560,minWidth:300,margin:vt},nt)}),[nt,vt]),Et=X.useMemo((function(){return function getToastStyle(X){var $="center";return X.includes("right")&&($="flex-end"),X.includes("left")&&($="flex-start"),{display:"flex",flexDirection:"column",alignItems:$}}(Ke)}),[Ke]);return X.createElement(NM.li,{layout:!0,className:"chakra-toast",variants:ct,initial:"initial",animate:"animate",exit:"exit",onHoverStart:function onMouseEnter(){return _t(null)},onHoverEnd:function onMouseLeave(){return _t(tt)},custom:{position:Ke},style:Et},X.createElement(bl.div,{role:"status","aria-atomic":"true",className:"chakra-toast__inner",__css:At},chakra_ui_utils_esm_runIfFn(ne,{id:ee,onClose:Ct})))}));var iE=0;function useToastProvider($){void 0===$&&($={});var ee=X.useState({top:[],"top-left":[],"top-right":[],"bottom-left":[],bottom:[],"bottom-right":[]}),ne=ee[0],ae=ee[1],de=X.useMemo((function(){var X=function createToast(X,$){var ee,ne;iE+=1;var de=null!=(ee=$.id)?ee:iE,fe=null!=(ne=$.position)?ne:"top";return{id:de,message:X,position:fe,duration:$.duration,onCloseComplete:$.onCloseComplete,onRequestRemove:function onRequestRemove(){return function removeToast(X,$){ae((function(ee){var ne;return chakra_ui_toast_esm_extends({},ee,((ne={})[$]=ee[$].filter((function($){return $.id!=X})),ne))}))}(String(de),fe)},status:$.status,requestClose:!1,containerStyle:$.containerStyle}};return{notify:function notify(ee,ne){var de=X(ee,chakra_ui_toast_esm_extends({},$,ne)),fe=de.position,Ue=de.id;return ae((function(X){var $,ee,ne,ae=fe.includes("top")?[de].concat(null!=($=X[fe])?$:[]):[].concat(null!=(ee=X[fe])?ee:[],[de]);return chakra_ui_toast_esm_extends({},X,((ne={})[fe]=ae,ne))})),Ue},closeAll:function closeAll(X){var $=(void 0===X?{}:X).positions;ae((function(X){return(null!=$?$:["bottom","bottom-right","bottom-left","top","top-left","top-right"]).reduce((function($,ee){return $[ee]=X[ee].map((function(X){return chakra_ui_toast_esm_extends({},X,{requestClose:!0})})),$}),chakra_ui_toast_esm_extends({},X))}))},close:function close(X){ae((function($){var ee,ne=tE($,X);return ne?chakra_ui_toast_esm_extends({},$,((ee={})[ne]=$[ne].map((function($){return $.id==X?chakra_ui_toast_esm_extends({},$,{requestClose:!0}):$})),ee)):$}))},update:function update(X,$){ae((function(ee){var ne=chakra_ui_toast_esm_extends({},ee),ae=findToast(ne,X),de=ae.position,fe=ae.index;return de&&-1!==fe&&(ne[de][fe]=chakra_ui_toast_esm_extends({},ne[de][fe],$)),ne}))},isActive:function isActive(X){var $=findToast(ne,X).position;return Boolean($)}}}),[$,ne]);return{areas:ne,getStyle:function getStyle(X){return{position:"fixed",zIndex:5500,pointerEvents:"none",display:"flex",flexDirection:"column",margin:"top"===X||"bottom"===X?"0 auto":void 0,top:X.includes("top")?"env(safe-area-inset-top, 0px)":void 0,bottom:X.includes("bottom")?"env(safe-area-inset-bottom, 0px)":void 0,right:X.includes("left")?void 0:"env(safe-area-inset-right, 0px)",left:X.includes("right")?void 0:"env(safe-area-inset-left, 0px)"}},toast:de}}var aE=createContext({strict:!0,name:"ToastManagerContext"}),oE=aE[0],sE=(aE[1],X.forwardRef((function($,ee){var ne=$.children,ae=$.defaultOptions,de=$.motionVariants,fe=$.component,Ue=void 0===fe?rE:fe,je=useToastProvider({defaultOptions:ae}),Ke=je.areas,tt=je.getStyle,nt=je.toast;X.useImperativeHandle(ee,(function(){return nt}));var it=et(Ke).map((function($){var ee=Ke[$];return X.createElement("ul",{role:"region","aria-live":"polite",key:$,id:"chakra-toast-manager-"+$,style:tt($)},X.createElement(eE,{initial:!1},ee.map((function($){return X.createElement(Ue,chakra_ui_toast_esm_extends({key:$.id,motionVariants:de},$))}))))}));return X.createElement(oE,{value:nt},ne,X.createElement(Portal,null,it))})));var lE=["children","toastOptions"],uE=function ChakraProvider($){var ee=$.children,ne=$.toastOptions,ae=function chakra_ui_react_esm_objectWithoutPropertiesLoose(X,$){if(null==X)return{};var ee,ne,ae={},de=Object.keys(X);for(ne=0;ne<de.length;ne++)ee=de[ne],$.indexOf(ee)>=0||(ae[ee]=X[ee]);return ae}($,lE);return X.createElement(bd,ae,X.createElement(sE,ne,ee))};uE.defaultProps={theme:d_},ee.createRoot(document.getElementById("root")).render((0,Cu.jsx)(X.StrictMode,{children:(0,Cu.jsx)(uE,{children:(0,Cu.jsx)(Bc,{})})}))}()}();
//# sourceMappingURL=main.91ad42dc.js.map